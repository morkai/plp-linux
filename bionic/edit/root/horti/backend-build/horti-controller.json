{"paths":{".":{"./helpers":"backend/helpers.js","moment":"node_modules/moment/moment.js","h5.main":"node_modules/h5.main/lib/index.js","../config/up/horti-controller.js":"config/up/horti-controller.js","./extensions":"backend/extensions.js"},"node_modules/h5.main/lib/index.js":{"h5.step":"node_modules/h5.step/lib/index.js","h5.pubsub":"node_modules/h5.pubsub/lib/index.js","./utils/app":"node_modules/h5.main/lib/utils/app.js","./utils/log":"node_modules/h5.main/lib/utils/log.js","backend/node_modules/updater":"backend/node_modules/updater/index.js","backend/node_modules/h5-mongoose":"backend/node_modules/h5-mongoose/index.js","backend/node_modules/events":"backend/node_modules/events/index.js","backend/node_modules/modbus":"backend/node_modules/modbus/index.js","backend/node_modules/messenger/server":"backend/node_modules/messenger/server.js","backend/node_modules/messenger/client":"backend/node_modules/messenger/client.js","backend/node_modules/horti-program":"backend/node_modules/horti-program/index.js"},"node_modules/h5.pubsub/lib/index.js":{"./MessageBroker":"node_modules/h5.pubsub/lib/MessageBroker.js"},"node_modules/h5.pubsub/lib/MessageBroker.js":{"./Subscriptions":"node_modules/h5.pubsub/lib/Subscriptions.js","./Subscription":"node_modules/h5.pubsub/lib/Subscription.js","./Sandbox":"node_modules/h5.pubsub/lib/Sandbox.js"},"node_modules/h5.main/lib/utils/app.js":{},"node_modules/h5.main/lib/utils/log.js":{},"config/up/horti-controller.js":{"../horti-controller":"config/horti-controller.js"},"config/horti-controller.js":{"./horti-mongodb":"config/horti-mongodb.js","./horti-common":"config/horti-common.js"},"backend/extensions.js":{"util/dateFormatter":"backend/node_modules/util/dateFormatter.js","chalk":"C:/Workspace/node_modules/chalk/index.js"},"C:/Workspace/node_modules/chalk/index.js":{"escape-string-regexp":"C:/Workspace/node_modules/escape-string-regexp/index.js","ansi-styles":"C:/Workspace/node_modules/ansi-styles/index.js","supports-color":"C:/Workspace/node_modules/supports-color/index.js","./templates.js":"C:/Workspace/node_modules/chalk/templates.js"},"C:/Workspace/node_modules/ansi-styles/index.js":{"color-convert":"C:/Workspace/node_modules/color-convert/index.js"},"C:/Workspace/node_modules/color-convert/index.js":{"./conversions":"C:/Workspace/node_modules/color-convert/conversions.js","./route":"C:/Workspace/node_modules/color-convert/route.js"},"C:/Workspace/node_modules/color-convert/conversions.js":{"color-name":"C:/Workspace/node_modules/color-name/index.js"},"C:/Workspace/node_modules/color-convert/route.js":{"./conversions":"C:/Workspace/node_modules/color-convert/conversions.js"},"C:/Workspace/node_modules/supports-color/index.js":{"has-flag":"C:/Workspace/node_modules/has-flag/index.js"},"node_modules/moment/moment.js":{"./locale/pl":"node_modules/moment/locale/pl.js"},"node_modules/moment/locale/pl.js":{"../moment":"node_modules/moment/moment.js"},"backend/node_modules/updater/index.js":{"lodash":"node_modules/lodash/lodash.js","./expressMiddleware":"backend/node_modules/updater/expressMiddleware.js","./routes":"backend/node_modules/updater/routes.js","./commands":"backend/node_modules/updater/commands.js","package.json":"package.json"},"node_modules/lodash/lodash.js":{},"backend/node_modules/updater/commands.js":{},"backend/node_modules/h5-mongoose/index.js":{"mongoose":"node_modules/mongoose/index.js","./expressMiddleware":"backend/node_modules/h5-mongoose/expressMiddleware.js"},"node_modules/mongoose/index.js":{"./lib/":"node_modules/mongoose/lib/index.js"},"node_modules/mongoose/lib/index.js":{"./driver":"node_modules/mongoose/lib/driver.js","./drivers/node-mongodb-native":"node_modules/mongoose/lib/drivers/node-mongodb-native/index.js","./document":"node_modules/mongoose/lib/document.js","./schema":"node_modules/mongoose/lib/schema.js","./schematype":"node_modules/mongoose/lib/schematype.js","./schema/index":"node_modules/mongoose/lib/schema/index.js","./virtualtype":"node_modules/mongoose/lib/virtualtype.js","./connectionstate":"node_modules/mongoose/lib/connectionstate.js","./validoptions":"node_modules/mongoose/lib/validoptions.js","./types":"node_modules/mongoose/lib/types/index.js","./query":"node_modules/mongoose/lib/query.js","./model":"node_modules/mongoose/lib/model.js","./helpers/schema/applyPlugins":"node_modules/mongoose/lib/helpers/schema/applyPlugins.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","mongoose-legacy-pluralize":"node_modules/mongoose/node_modules/mongoose-legacy-pluralize/index.js","./utils":"node_modules/mongoose/lib/utils.js","../package.json":"node_modules/mongoose/package.json","./cast":"node_modules/mongoose/lib/cast.js","./plugins/removeSubdocs":"node_modules/mongoose/lib/plugins/removeSubdocs.js","./plugins/saveSubdocs":"node_modules/mongoose/lib/plugins/saveSubdocs.js","./plugins/trackTransaction":"node_modules/mongoose/lib/plugins/trackTransaction.js","./plugins/validateBeforeSave":"node_modules/mongoose/lib/plugins/validateBeforeSave.js","./aggregate":"node_modules/mongoose/lib/aggregate.js","./promise_provider":"node_modules/mongoose/lib/promise_provider.js","./plugins/sharding":"node_modules/mongoose/lib/plugins/sharding.js","./helpers/printJestWarning":"node_modules/mongoose/lib/helpers/printJestWarning.js","./document_provider":"node_modules/mongoose/lib/document_provider.js","./error/index":"node_modules/mongoose/lib/error/index.js","./error/cast":"node_modules/mongoose/lib/error/cast.js","./options/SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","mongodb":"node_modules/mongodb/index.js","mquery":"node_modules/mquery/lib/mquery.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/index.js":{"./binary":"node_modules/mongoose/lib/drivers/node-mongodb-native/binary.js","./collection":"node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js","./decimal128":"node_modules/mongoose/lib/drivers/node-mongodb-native/decimal128.js","./objectid":"node_modules/mongoose/lib/drivers/node-mongodb-native/objectid.js","./ReadPreference":"node_modules/mongoose/lib/drivers/node-mongodb-native/ReadPreference.js","./connection":"node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/binary.js":{"mongodb":"node_modules/mongodb/index.js"},"node_modules/mongodb/index.js":{"./lib/core":"node_modules/mongodb/lib/core/index.js","./lib/apm":"node_modules/mongodb/lib/apm.js","./lib/mongo_client":"node_modules/mongodb/lib/mongo_client.js","./lib/bulk/common":"node_modules/mongodb/lib/bulk/common.js","./lib/admin":"node_modules/mongodb/lib/admin.js","./lib/db":"node_modules/mongodb/lib/db.js","./lib/collection":"node_modules/mongodb/lib/collection.js","./lib/topologies/server":"node_modules/mongodb/lib/topologies/server.js","./lib/topologies/replset":"node_modules/mongodb/lib/topologies/replset.js","./lib/topologies/mongos":"node_modules/mongodb/lib/topologies/mongos.js","./lib/gridfs/grid_store":"node_modules/mongodb/lib/gridfs/grid_store.js","./lib/gridfs/chunk":"node_modules/mongodb/lib/gridfs/chunk.js","./lib/aggregation_cursor":"node_modules/mongodb/lib/aggregation_cursor.js","./lib/command_cursor":"node_modules/mongodb/lib/command_cursor.js","./lib/cursor":"node_modules/mongodb/lib/cursor.js","./lib/gridfs-stream":"node_modules/mongodb/lib/gridfs-stream/index.js"},"node_modules/mongodb/lib/core/index.js":{"bson":"node_modules/bson/index.js","optional-require":"node_modules/optional-require/index.js","./utils":"node_modules/mongodb/lib/core/utils.js","./error":"node_modules/mongodb/lib/core/error.js","./connection/connection":"node_modules/mongodb/lib/core/connection/connection.js","./topologies/server":"node_modules/mongodb/lib/core/topologies/server.js","./topologies/replset":"node_modules/mongodb/lib/core/topologies/replset.js","./topologies/mongos":"node_modules/mongodb/lib/core/topologies/mongos.js","./connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","./cursor":"node_modules/mongodb/lib/core/cursor.js","./topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","./sessions":"node_modules/mongodb/lib/core/sessions.js","./sdam/topology":"node_modules/mongodb/lib/core/sdam/topology.js","./connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","./auth/mongo_credentials":"node_modules/mongodb/lib/core/auth/mongo_credentials.js","./auth/defaultAuthProviders":"node_modules/mongodb/lib/core/auth/defaultAuthProviders.js","./auth/mongocr":"node_modules/mongodb/lib/core/auth/mongocr.js","./auth/x509":"node_modules/mongodb/lib/core/auth/x509.js","./auth/plain":"node_modules/mongodb/lib/core/auth/plain.js","./auth/gssapi":"node_modules/mongodb/lib/core/auth/gssapi.js","./auth/scram":"node_modules/mongodb/lib/core/auth/scram.js","./uri_parser":"node_modules/mongodb/lib/core/uri_parser.js"},"node_modules/bson/index.js":{"./lib/bson/bson":"node_modules/bson/lib/bson/bson.js","./lib/bson/binary":"node_modules/bson/lib/bson/binary.js","./lib/bson/code":"node_modules/bson/lib/bson/code.js","./lib/bson/db_ref":"node_modules/bson/lib/bson/db_ref.js","./lib/bson/decimal128":"node_modules/bson/lib/bson/decimal128.js","./lib/bson/double":"node_modules/bson/lib/bson/double.js","./lib/bson/int_32":"node_modules/bson/lib/bson/int_32.js","./lib/bson/long":"node_modules/bson/lib/bson/long.js","./lib/bson/map":"node_modules/bson/lib/bson/map.js","./lib/bson/max_key":"node_modules/bson/lib/bson/max_key.js","./lib/bson/min_key":"node_modules/bson/lib/bson/min_key.js","./lib/bson/objectid":"node_modules/bson/lib/bson/objectid.js","./lib/bson/regexp":"node_modules/bson/lib/bson/regexp.js","./lib/bson/symbol":"node_modules/bson/lib/bson/symbol.js","./lib/bson/timestamp":"node_modules/bson/lib/bson/timestamp.js"},"node_modules/bson/lib/bson/bson.js":{"./map":"node_modules/bson/lib/bson/map.js","./long":"node_modules/bson/lib/bson/long.js","./double":"node_modules/bson/lib/bson/double.js","./timestamp":"node_modules/bson/lib/bson/timestamp.js","./objectid":"node_modules/bson/lib/bson/objectid.js","./regexp":"node_modules/bson/lib/bson/regexp.js","./symbol":"node_modules/bson/lib/bson/symbol.js","./int_32":"node_modules/bson/lib/bson/int_32.js","./code":"node_modules/bson/lib/bson/code.js","./decimal128":"node_modules/bson/lib/bson/decimal128.js","./min_key":"node_modules/bson/lib/bson/min_key.js","./max_key":"node_modules/bson/lib/bson/max_key.js","./db_ref":"node_modules/bson/lib/bson/db_ref.js","./binary":"node_modules/bson/lib/bson/binary.js","./parser/deserializer":"node_modules/bson/lib/bson/parser/deserializer.js","./parser/serializer":"node_modules/bson/lib/bson/parser/serializer.js","./parser/calculate_size":"node_modules/bson/lib/bson/parser/calculate_size.js","./parser/utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/bson/lib/bson/objectid.js":{"./parser/utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/bson/lib/bson/symbol.js":{},"node_modules/bson/lib/bson/decimal128.js":{"./long":"node_modules/bson/lib/bson/long.js","./parser/utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/bson/lib/bson/binary.js":{"./parser/utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/bson/lib/bson/parser/deserializer.js":{"../long":"node_modules/bson/lib/bson/long.js","../double":"node_modules/bson/lib/bson/double.js","../timestamp":"node_modules/bson/lib/bson/timestamp.js","../objectid":"node_modules/bson/lib/bson/objectid.js","../symbol":"node_modules/bson/lib/bson/symbol.js","../code":"node_modules/bson/lib/bson/code.js","../min_key":"node_modules/bson/lib/bson/min_key.js","../max_key":"node_modules/bson/lib/bson/max_key.js","../decimal128":"node_modules/bson/lib/bson/decimal128.js","../int_32":"node_modules/bson/lib/bson/int_32.js","../db_ref":"node_modules/bson/lib/bson/db_ref.js","../regexp":"node_modules/bson/lib/bson/regexp.js","../binary":"node_modules/bson/lib/bson/binary.js","./utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/bson/lib/bson/parser/serializer.js":{"../float_parser":"node_modules/bson/lib/bson/float_parser.js","../long":"node_modules/bson/lib/bson/long.js","../map":"node_modules/bson/lib/bson/map.js","../binary":"node_modules/bson/lib/bson/binary.js","./utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/bson/lib/bson/parser/calculate_size.js":{"../long":"node_modules/bson/lib/bson/long.js","../double":"node_modules/bson/lib/bson/double.js","../timestamp":"node_modules/bson/lib/bson/timestamp.js","../objectid":"node_modules/bson/lib/bson/objectid.js","../symbol":"node_modules/bson/lib/bson/symbol.js","../regexp":"node_modules/bson/lib/bson/regexp.js","../code":"node_modules/bson/lib/bson/code.js","../decimal128":"node_modules/bson/lib/bson/decimal128.js","../min_key":"node_modules/bson/lib/bson/min_key.js","../max_key":"node_modules/bson/lib/bson/max_key.js","../db_ref":"node_modules/bson/lib/bson/db_ref.js","../binary":"node_modules/bson/lib/bson/binary.js","./utils":"node_modules/bson/lib/bson/parser/utils.js"},"node_modules/optional-require/index.js":{"./dist":"node_modules/optional-require/dist/index.js"},"node_modules/optional-require/dist/index.js":{"require-at":"node_modules/require-at/require-at.js"},"node_modules/require-at/require-at.js":{"./create-require":"node_modules/require-at/create-require.js"},"node_modules/require-at/create-require.js":{},"node_modules/mongodb/lib/core/utils.js":{"optional-require":"node_modules/optional-require/index.js","../../package.json":"node_modules/mongodb/package.json"},"node_modules/mongodb/lib/core/connection/connection.js":{"./utils":"node_modules/mongodb/lib/core/connection/utils.js","../wireprotocol/shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../wireprotocol/compression":"node_modules/mongodb/lib/core/wireprotocol/compression.js","./commands":"node_modules/mongodb/lib/core/connection/commands.js","./msg":"node_modules/mongodb/lib/core/connection/msg.js","../error":"node_modules/mongodb/lib/core/error.js","./logger":"node_modules/mongodb/lib/core/connection/logger.js","safe-buffer":"node_modules/safe-buffer/index.js","./command_result":"node_modules/mongodb/lib/core/connection/command_result.js"},"node_modules/mongodb/lib/core/connection/utils.js":{"optional-require":"node_modules/optional-require/index.js","bson":"node_modules/bson/index.js"},"node_modules/mongodb/lib/core/wireprotocol/shared.js":{"../topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../error":"node_modules/mongodb/lib/core/error.js","../sdam/common":"node_modules/mongodb/lib/core/sdam/common.js","../sdam/topology_description":"node_modules/mongodb/lib/core/sdam/topology_description.js"},"node_modules/mongodb/lib/core/topologies/read_preference.js":{"../../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/utils.js":{"./core/error":"node_modules/mongodb/lib/core/error.js","./write_concern":"node_modules/mongodb/lib/write_concern.js","./async/async_iterator":"node_modules/mongodb/lib/async/async_iterator.js"},"node_modules/mongodb/lib/core/sdam/topology_description.js":{"./common":"node_modules/mongodb/lib/core/sdam/common.js","./server_description":"node_modules/mongodb/lib/core/sdam/server_description.js","../wireprotocol/constants":"node_modules/mongodb/lib/core/wireprotocol/constants.js"},"node_modules/mongodb/lib/core/sdam/server_description.js":{"../utils":"node_modules/mongodb/lib/core/utils.js","./common":"node_modules/mongodb/lib/core/sdam/common.js","../../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/core/wireprotocol/compression.js":{"../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js"},"node_modules/mongodb/lib/core/connection/commands.js":{"./utils":"node_modules/mongodb/lib/core/connection/utils.js","safe-buffer":"node_modules/safe-buffer/index.js","../wireprotocol/shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js"},"node_modules/safe-buffer/index.js":{},"node_modules/mongodb/lib/core/connection/msg.js":{"safe-buffer":"node_modules/safe-buffer/index.js","../wireprotocol/shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../../core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/connection/logger.js":{"../error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/topologies/server.js":{"./read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../connection/pool":"node_modules/mongodb/lib/core/connection/pool.js","../error":"node_modules/mongodb/lib/core/error.js","../wireprotocol":"node_modules/mongodb/lib/core/wireprotocol/index.js","../cursor":"node_modules/mongodb/lib/core/cursor.js","./shared":"node_modules/mongodb/lib/core/topologies/shared.js","../utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/core/connection/pool.js":{"../error":"node_modules/mongodb/lib/core/error.js","./logger":"node_modules/mongodb/lib/core/connection/logger.js","./msg":"node_modules/mongodb/lib/core/connection/msg.js","./command_result":"node_modules/mongodb/lib/core/connection/command_result.js","../wireprotocol/shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../wireprotocol/compression":"node_modules/mongodb/lib/core/wireprotocol/compression.js","./apm":"node_modules/mongodb/lib/core/connection/apm.js","safe-buffer":"node_modules/safe-buffer/index.js","./connect":"node_modules/mongodb/lib/core/connection/connect.js","../sessions":"node_modules/mongodb/lib/core/sessions.js","../utils":"node_modules/mongodb/lib/core/utils.js","../../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/core/connection/apm.js":{"../connection/msg":"node_modules/mongodb/lib/core/connection/msg.js","../connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","../../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/core/connection/connect.js":{"./connection":"node_modules/mongodb/lib/core/connection/connection.js","../error":"node_modules/mongodb/lib/core/error.js","../auth/defaultAuthProviders":"node_modules/mongodb/lib/core/auth/defaultAuthProviders.js","../auth/auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js","../wireprotocol/constants":"node_modules/mongodb/lib/core/wireprotocol/constants.js","../utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/core/auth/defaultAuthProviders.js":{"./mongocr":"node_modules/mongodb/lib/core/auth/mongocr.js","./x509":"node_modules/mongodb/lib/core/auth/x509.js","./plain":"node_modules/mongodb/lib/core/auth/plain.js","./gssapi":"node_modules/mongodb/lib/core/auth/gssapi.js","./scram":"node_modules/mongodb/lib/core/auth/scram.js","./mongodb_aws":"node_modules/mongodb/lib/core/auth/mongodb_aws.js"},"node_modules/mongodb/lib/core/auth/mongocr.js":{"./auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js"},"node_modules/mongodb/lib/core/auth/x509.js":{"./auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js"},"node_modules/mongodb/lib/core/auth/plain.js":{"../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","./auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js"},"node_modules/mongodb/lib/core/auth/gssapi.js":{"./auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js","../utils":"node_modules/mongodb/lib/core/utils.js","../error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/auth/scram.js":{"safe-buffer":"node_modules/safe-buffer/index.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../error":"node_modules/mongodb/lib/core/error.js","./auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js","../../utils":"node_modules/mongodb/lib/utils.js","saslprep":"node_modules/saslprep/index.js"},"node_modules/saslprep/index.js":{"./lib/memory-code-points":"node_modules/saslprep/lib/memory-code-points.js"},"node_modules/saslprep/lib/memory-code-points.js":{"sparse-bitfield":"node_modules/sparse-bitfield/index.js"},"node_modules/sparse-bitfield/index.js":{"memory-pager":"node_modules/memory-pager/index.js"},"node_modules/mongodb/lib/core/auth/mongodb_aws.js":{"./auth_provider":"node_modules/mongodb/lib/core/auth/auth_provider.js","./mongo_credentials":"node_modules/mongodb/lib/core/auth/mongo_credentials.js","../error":"node_modules/mongodb/lib/core/error.js","../utils":"node_modules/mongodb/lib/core/utils.js","aws4":"node_modules/aws4/aws4.js"},"node_modules/aws4/aws4.js":{"./lru":"node_modules/aws4/lru.js"},"node_modules/mongodb/lib/core/sessions.js":{"./connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","./utils":"node_modules/mongodb/lib/core/utils.js","./error":"node_modules/mongodb/lib/core/error.js","././error":"node_modules/mongodb/lib/core/error.js","./transactions":"node_modules/mongodb/lib/core/transactions.js","./topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../utils":"node_modules/mongodb/lib/utils.js","./topologies/shared":"node_modules/mongodb/lib/core/topologies/shared.js","./wireprotocol/shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","./../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/core/transactions.js":{"./error":"node_modules/mongodb/lib/core/error.js","./topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../read_concern":"node_modules/mongodb/lib/read_concern.js","../write_concern":"node_modules/mongodb/lib/write_concern.js"},"node_modules/mongodb/lib/core/topologies/shared.js":{"./read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../sdam/common":"node_modules/mongodb/lib/core/sdam/common.js","../error":"node_modules/mongodb/lib/core/error.js","../utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/core/wireprotocol/index.js":{"./write_command":"node_modules/mongodb/lib/core/wireprotocol/write_command.js","./kill_cursors":"node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","./get_more":"node_modules/mongodb/lib/core/wireprotocol/get_more.js","./query":"node_modules/mongodb/lib/core/wireprotocol/query.js","./command":"node_modules/mongodb/lib/core/wireprotocol/command.js"},"node_modules/mongodb/lib/core/wireprotocol/write_command.js":{"../error":"node_modules/mongodb/lib/core/error.js","./shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","./command":"node_modules/mongodb/lib/core/wireprotocol/command.js","../../utils":"node_modules/mongodb/lib/utils.js","../../explain":"node_modules/mongodb/lib/explain.js"},"node_modules/mongodb/lib/core/wireprotocol/command.js":{"../connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","../connection/msg":"node_modules/mongodb/lib/core/connection/msg.js","../error":"node_modules/mongodb/lib/core/error.js","./shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../transactions":"node_modules/mongodb/lib/core/transactions.js","../sessions":"node_modules/mongodb/lib/core/sessions.js","../utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/explain.js":{"./core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js":{"../connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","../error":"node_modules/mongodb/lib/core/error.js","./shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../utils":"node_modules/mongodb/lib/core/utils.js","./command":"node_modules/mongodb/lib/core/wireprotocol/command.js"},"node_modules/mongodb/lib/core/wireprotocol/get_more.js":{"../connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../error":"node_modules/mongodb/lib/core/error.js","./shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../utils":"node_modules/mongodb/lib/core/utils.js","./command":"node_modules/mongodb/lib/core/wireprotocol/command.js"},"node_modules/mongodb/lib/core/wireprotocol/query.js":{"../connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","../error":"node_modules/mongodb/lib/core/error.js","./shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js","../utils":"node_modules/mongodb/lib/core/utils.js","./command":"node_modules/mongodb/lib/core/wireprotocol/command.js","../../utils":"node_modules/mongodb/lib/utils.js","../../explain":"node_modules/mongodb/lib/explain.js"},"node_modules/mongodb/lib/core/cursor.js":{"./connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","./connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","./error":"node_modules/mongodb/lib/core/error.js","./utils":"node_modules/mongodb/lib/core/utils.js","./topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../operations/execute_operation":"node_modules/mongodb/lib/operations/execute_operation.js","../utils":"node_modules/mongodb/lib/utils.js","../operations/operation":"node_modules/mongodb/lib/operations/operation.js","../async/async_iterator":"node_modules/mongodb/lib/async/async_iterator.js"},"node_modules/mongodb/lib/operations/execute_operation.js":{"../utils":"node_modules/mongodb/lib/utils.js","../core/error":"node_modules/mongodb/lib/core/error.js","./operation":"node_modules/mongodb/lib/operations/operation.js","../core/topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../core/utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/operations/operation.js":{"../explain":"node_modules/mongodb/lib/explain.js","../core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/topologies/replset.js":{"./read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../cursor":"node_modules/mongodb/lib/core/cursor.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","../error":"node_modules/mongodb/lib/core/error.js","./server":"node_modules/mongodb/lib/core/topologies/server.js","./replset_state":"node_modules/mongodb/lib/core/topologies/replset_state.js","./shared":"node_modules/mongodb/lib/core/topologies/shared.js","../utils":"node_modules/mongodb/lib/core/utils.js","../../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/core/topologies/replset_state.js":{"./shared":"node_modules/mongodb/lib/core/topologies/shared.js","../connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","./read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../error":"node_modules/mongodb/lib/core/error.js","safe-buffer":"node_modules/safe-buffer/index.js"},"node_modules/mongodb/lib/core/topologies/mongos.js":{"../cursor":"node_modules/mongodb/lib/core/cursor.js","../connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../error":"node_modules/mongodb/lib/core/error.js","./server":"node_modules/mongodb/lib/core/topologies/server.js","./shared":"node_modules/mongodb/lib/core/topologies/shared.js","../utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/core/sdam/topology.js":{"denque":"node_modules/denque/index.js","./server_description":"node_modules/mongodb/lib/core/sdam/server_description.js","./common":"node_modules/mongodb/lib/core/sdam/common.js","./topology_description":"node_modules/mongodb/lib/core/sdam/topology_description.js","./events":"node_modules/mongodb/lib/core/sdam/events.js","./server":"node_modules/mongodb/lib/core/sdam/server.js","../utils":"node_modules/mongodb/lib/core/utils.js","../topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../topologies/shared":"node_modules/mongodb/lib/core/topologies/shared.js","../cursor":"node_modules/mongodb/lib/core/cursor.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../sessions":"node_modules/mongodb/lib/core/sessions.js","../error":"node_modules/mongodb/lib/core/error.js","./srv_polling":"node_modules/mongodb/lib/core/sdam/srv_polling.js","../../utils":"node_modules/mongodb/lib/utils.js","../../cmap/events":"node_modules/mongodb/lib/cmap/events.js","./server_selection":"node_modules/mongodb/lib/core/sdam/server_selection.js"},"node_modules/mongodb/lib/core/sdam/server.js":{"../../cmap/connection_pool":"node_modules/mongodb/lib/cmap/connection_pool.js","../../cmap/events":"node_modules/mongodb/lib/cmap/events.js","../error":"node_modules/mongodb/lib/core/error.js","../utils":"node_modules/mongodb/lib/core/utils.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","./server_description":"node_modules/mongodb/lib/core/sdam/server_description.js","../topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","./monitor":"node_modules/mongodb/lib/core/sdam/monitor.js","./common":"node_modules/mongodb/lib/core/sdam/common.js","../transactions":"node_modules/mongodb/lib/core/transactions.js"},"node_modules/mongodb/lib/cmap/connection_pool.js":{"denque":"node_modules/denque/index.js","../core/connection/logger":"node_modules/mongodb/lib/core/connection/logger.js","../utils":"node_modules/mongodb/lib/utils.js","../core/error":"node_modules/mongodb/lib/core/error.js","./connection":"node_modules/mongodb/lib/cmap/connection.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../core/connection/connect":"node_modules/mongodb/lib/core/connection/connect.js","./errors":"node_modules/mongodb/lib/cmap/errors.js","./events":"node_modules/mongodb/lib/cmap/events.js"},"node_modules/mongodb/lib/cmap/connection.js":{"./message_stream":"node_modules/mongodb/lib/cmap/message_stream.js","../core/error":"node_modules/mongodb/lib/core/error.js","../core/connection/command_result":"node_modules/mongodb/lib/core/connection/command_result.js","./stream_description":"node_modules/mongodb/lib/cmap/stream_description.js","../core/wireprotocol":"node_modules/mongodb/lib/core/wireprotocol/index.js","../core/connection/apm":"node_modules/mongodb/lib/core/connection/apm.js","../core/sessions":"node_modules/mongodb/lib/core/sessions.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/cmap/message_stream.js":{"bl":"node_modules/bl/bl.js","../core/error":"node_modules/mongodb/lib/core/error.js","../core/wireprotocol/compression":"node_modules/mongodb/lib/core/wireprotocol/compression.js","../core/connection/commands":"node_modules/mongodb/lib/core/connection/commands.js","../core/connection/msg":"node_modules/mongodb/lib/core/connection/msg.js","../core/wireprotocol/shared":"node_modules/mongodb/lib/core/wireprotocol/shared.js"},"node_modules/bl/bl.js":{"readable-stream":"node_modules/readable-stream/readable.js","safe-buffer":"node_modules/safe-buffer/index.js"},"node_modules/readable-stream/readable.js":{"./lib/_stream_readable.js":"node_modules/readable-stream/lib/_stream_readable.js","./lib/_stream_writable.js":"node_modules/readable-stream/lib/_stream_writable.js","./lib/_stream_duplex.js":"node_modules/readable-stream/lib/_stream_duplex.js","./lib/_stream_transform.js":"node_modules/readable-stream/lib/_stream_transform.js","./lib/_stream_passthrough.js":"node_modules/readable-stream/lib/_stream_passthrough.js"},"node_modules/readable-stream/lib/_stream_readable.js":{"process-nextick-args":"node_modules/process-nextick-args/index.js","isarray":"node_modules/readable-stream/node_modules/isarray/index.js","./internal/streams/stream":"node_modules/readable-stream/lib/internal/streams/stream.js","safe-buffer":"node_modules/safe-buffer/index.js","core-util-is":"node_modules/core-util-is/lib/util.js","inherits":"node_modules/inherits/inherits.js","./internal/streams/BufferList":"node_modules/readable-stream/lib/internal/streams/BufferList.js","./internal/streams/destroy":"node_modules/readable-stream/lib/internal/streams/destroy.js","./_stream_duplex":"node_modules/readable-stream/lib/_stream_duplex.js"},"node_modules/readable-stream/lib/internal/streams/stream.js":{},"node_modules/core-util-is/lib/util.js":{},"node_modules/inherits/inherits.js":{},"node_modules/readable-stream/lib/internal/streams/BufferList.js":{"safe-buffer":"node_modules/safe-buffer/index.js"},"node_modules/readable-stream/lib/internal/streams/destroy.js":{"process-nextick-args":"node_modules/process-nextick-args/index.js"},"node_modules/readable-stream/lib/_stream_writable.js":{"process-nextick-args":"node_modules/process-nextick-args/index.js","core-util-is":"node_modules/core-util-is/lib/util.js","inherits":"node_modules/inherits/inherits.js","util-deprecate":"node_modules/util-deprecate/node.js","./internal/streams/stream":"node_modules/readable-stream/lib/internal/streams/stream.js","safe-buffer":"node_modules/safe-buffer/index.js","./internal/streams/destroy":"node_modules/readable-stream/lib/internal/streams/destroy.js","./_stream_duplex":"node_modules/readable-stream/lib/_stream_duplex.js"},"node_modules/util-deprecate/node.js":{},"node_modules/readable-stream/lib/_stream_duplex.js":{"process-nextick-args":"node_modules/process-nextick-args/index.js","core-util-is":"node_modules/core-util-is/lib/util.js","inherits":"node_modules/inherits/inherits.js","./_stream_readable":"node_modules/readable-stream/lib/_stream_readable.js","./_stream_writable":"node_modules/readable-stream/lib/_stream_writable.js"},"node_modules/readable-stream/lib/_stream_transform.js":{"./_stream_duplex":"node_modules/readable-stream/lib/_stream_duplex.js","core-util-is":"node_modules/core-util-is/lib/util.js","inherits":"node_modules/inherits/inherits.js"},"node_modules/readable-stream/lib/_stream_passthrough.js":{"./_stream_transform":"node_modules/readable-stream/lib/_stream_transform.js","core-util-is":"node_modules/core-util-is/lib/util.js","inherits":"node_modules/inherits/inherits.js"},"node_modules/mongodb/lib/cmap/stream_description.js":{"../core/sdam/server_description":"node_modules/mongodb/lib/core/sdam/server_description.js"},"node_modules/mongodb/lib/cmap/errors.js":{"../core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/sdam/monitor.js":{"./common":"node_modules/mongodb/lib/core/sdam/common.js","../connection/connect":"node_modules/mongodb/lib/core/connection/connect.js","../../cmap/connection":"node_modules/mongodb/lib/cmap/connection.js","../utils":"node_modules/mongodb/lib/core/utils.js","../error":"node_modules/mongodb/lib/core/error.js","../connection/utils":"node_modules/mongodb/lib/core/connection/utils.js","../../utils":"node_modules/mongodb/lib/utils.js","./events":"node_modules/mongodb/lib/core/sdam/events.js"},"node_modules/mongodb/lib/core/sdam/srv_polling.js":{"../connection/logger":"node_modules/mongodb/lib/core/connection/logger.js"},"node_modules/mongodb/lib/core/sdam/server_selection.js":{"./common":"node_modules/mongodb/lib/core/sdam/common.js","../topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/core/uri_parser.js":{"./error":"node_modules/mongodb/lib/core/error.js","./topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/apm.js":{},"node_modules/mongodb/lib/mongo_client.js":{"./change_stream":"node_modules/mongodb/lib/change_stream.js","./db":"node_modules/mongodb/lib/db.js","./core":"node_modules/mongodb/lib/core/index.js","./write_concern":"node_modules/mongodb/lib/write_concern.js","./utils":"node_modules/mongodb/lib/utils.js","./core/topologies/read_preference":"node_modules/mongodb/lib/core/topologies/read_preference.js","./topologies/native_topology":"node_modules/mongodb/lib/topologies/native_topology.js","./operations/connect":"node_modules/mongodb/lib/operations/connect.js"},"node_modules/mongodb/lib/change_stream.js":{"denque":"node_modules/denque/index.js","./error":"node_modules/mongodb/lib/error.js","./core":"node_modules/mongodb/lib/core/index.js","./cursor":"node_modules/mongodb/lib/cursor.js","./core/utils":"node_modules/mongodb/lib/core/utils.js","./utils":"node_modules/mongodb/lib/utils.js","./operations/aggregate":"node_modules/mongodb/lib/operations/aggregate.js"},"node_modules/mongodb/lib/error.js":{"./core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/cursor.js":{"./utils":"node_modules/mongodb/lib/utils.js","./core":"node_modules/mongodb/lib/core/index.js","./core/cursor":"node_modules/mongodb/lib/core/cursor.js","./operations/execute_operation":"node_modules/mongodb/lib/operations/execute_operation.js","./explain":"node_modules/mongodb/lib/explain.js","./operations/operation":"node_modules/mongodb/lib/operations/operation.js","./operations/cursor_ops":"node_modules/mongodb/lib/operations/cursor_ops.js","./operations/count":"node_modules/mongodb/lib/operations/count.js"},"node_modules/mongodb/lib/operations/cursor_ops.js":{"./collection_ops":"node_modules/mongodb/lib/operations/collection_ops.js","../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js","../core/cursor":"node_modules/mongodb/lib/core/cursor.js"},"node_modules/mongodb/lib/operations/collection_ops.js":{"../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/db_ops.js":{"../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js","../constants":"node_modules/mongodb/lib/constants.js"},"node_modules/mongodb/lib/operations/common_functions.js":{"../utils":"node_modules/mongodb/lib/utils.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js","../core":"node_modules/mongodb/lib/core/index.js","../core/cursor":"node_modules/mongodb/lib/core/cursor.js","../core/utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/operations/count.js":{"./common_functions":"node_modules/mongodb/lib/operations/common_functions.js","./operation":"node_modules/mongodb/lib/operations/operation.js"},"node_modules/mongodb/lib/operations/aggregate.js":{"./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","../core":"node_modules/mongodb/lib/core/index.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","./operation":"node_modules/mongodb/lib/operations/operation.js"},"node_modules/mongodb/lib/operations/command_v2.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../core":"node_modules/mongodb/lib/core/index.js","../read_concern":"node_modules/mongodb/lib/read_concern.js","../write_concern":"node_modules/mongodb/lib/write_concern.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../utils":"node_modules/mongodb/lib/utils.js","../core/sessions":"node_modules/mongodb/lib/core/sessions.js","../core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/db.js":{"./utils":"node_modules/mongodb/lib/utils.js","./command_cursor":"node_modules/mongodb/lib/command_cursor.js","./core":"node_modules/mongodb/lib/core/index.js","./collection":"node_modules/mongodb/lib/collection.js","./change_stream":"node_modules/mongodb/lib/change_stream.js","./constants":"node_modules/mongodb/lib/constants.js","./write_concern":"node_modules/mongodb/lib/write_concern.js","./read_concern":"node_modules/mongodb/lib/read_concern.js","./aggregation_cursor":"node_modules/mongodb/lib/aggregation_cursor.js","./operations/db_ops":"node_modules/mongodb/lib/operations/db_ops.js","./operations/aggregate":"node_modules/mongodb/lib/operations/aggregate.js","./operations/add_user":"node_modules/mongodb/lib/operations/add_user.js","./operations/collections":"node_modules/mongodb/lib/operations/collections.js","./operations/command":"node_modules/mongodb/lib/operations/command.js","./operations/run_command":"node_modules/mongodb/lib/operations/run_command.js","./operations/create_collection":"node_modules/mongodb/lib/operations/create_collection.js","./operations/create_indexes":"node_modules/mongodb/lib/operations/create_indexes.js","./operations/drop":"node_modules/mongodb/lib/operations/drop.js","./operations/execute_db_admin_command":"node_modules/mongodb/lib/operations/execute_db_admin_command.js","./operations/index_information":"node_modules/mongodb/lib/operations/index_information.js","./operations/list_collections":"node_modules/mongodb/lib/operations/list_collections.js","./operations/profiling_level":"node_modules/mongodb/lib/operations/profiling_level.js","./operations/remove_user":"node_modules/mongodb/lib/operations/remove_user.js","./operations/rename":"node_modules/mongodb/lib/operations/rename.js","./operations/set_profiling_level":"node_modules/mongodb/lib/operations/set_profiling_level.js","./operations/execute_operation":"node_modules/mongodb/lib/operations/execute_operation.js"},"node_modules/mongodb/lib/command_cursor.js":{"./core":"node_modules/mongodb/lib/core/index.js","./cursor":"node_modules/mongodb/lib/cursor.js","./core/cursor":"node_modules/mongodb/lib/core/cursor.js"},"node_modules/mongodb/lib/collection.js":{"./utils":"node_modules/mongodb/lib/utils.js","./core":"node_modules/mongodb/lib/core/index.js","./bulk/unordered":"node_modules/mongodb/lib/bulk/unordered.js","./bulk/ordered":"node_modules/mongodb/lib/bulk/ordered.js","./change_stream":"node_modules/mongodb/lib/change_stream.js","./write_concern":"node_modules/mongodb/lib/write_concern.js","./read_concern":"node_modules/mongodb/lib/read_concern.js","./aggregation_cursor":"node_modules/mongodb/lib/aggregation_cursor.js","./command_cursor":"node_modules/mongodb/lib/command_cursor.js","./operations/collection_ops":"node_modules/mongodb/lib/operations/collection_ops.js","./operations/common_functions":"node_modules/mongodb/lib/operations/common_functions.js","./operations/aggregate":"node_modules/mongodb/lib/operations/aggregate.js","./operations/bulk_write":"node_modules/mongodb/lib/operations/bulk_write.js","./operations/count_documents":"node_modules/mongodb/lib/operations/count_documents.js","./operations/create_indexes":"node_modules/mongodb/lib/operations/create_indexes.js","./operations/delete_many":"node_modules/mongodb/lib/operations/delete_many.js","./operations/delete_one":"node_modules/mongodb/lib/operations/delete_one.js","./operations/distinct":"node_modules/mongodb/lib/operations/distinct.js","./operations/drop":"node_modules/mongodb/lib/operations/drop.js","./operations/drop_index":"node_modules/mongodb/lib/operations/drop_index.js","./operations/drop_indexes":"node_modules/mongodb/lib/operations/drop_indexes.js","./operations/estimated_document_count":"node_modules/mongodb/lib/operations/estimated_document_count.js","./operations/find":"node_modules/mongodb/lib/operations/find.js","./operations/find_one":"node_modules/mongodb/lib/operations/find_one.js","./operations/find_and_modify":"node_modules/mongodb/lib/operations/find_and_modify.js","./operations/find_one_and_delete":"node_modules/mongodb/lib/operations/find_one_and_delete.js","./operations/find_one_and_replace":"node_modules/mongodb/lib/operations/find_one_and_replace.js","./operations/find_one_and_update":"node_modules/mongodb/lib/operations/find_one_and_update.js","./operations/geo_haystack_search":"node_modules/mongodb/lib/operations/geo_haystack_search.js","./operations/indexes":"node_modules/mongodb/lib/operations/indexes.js","./operations/index_exists":"node_modules/mongodb/lib/operations/index_exists.js","./operations/index_information":"node_modules/mongodb/lib/operations/index_information.js","./operations/insert_many":"node_modules/mongodb/lib/operations/insert_many.js","./operations/insert_one":"node_modules/mongodb/lib/operations/insert_one.js","./operations/is_capped":"node_modules/mongodb/lib/operations/is_capped.js","./operations/list_indexes":"node_modules/mongodb/lib/operations/list_indexes.js","./operations/map_reduce":"node_modules/mongodb/lib/operations/map_reduce.js","./operations/options_operation":"node_modules/mongodb/lib/operations/options_operation.js","./operations/rename":"node_modules/mongodb/lib/operations/rename.js","./operations/re_index":"node_modules/mongodb/lib/operations/re_index.js","./operations/replace_one":"node_modules/mongodb/lib/operations/replace_one.js","./operations/stats":"node_modules/mongodb/lib/operations/stats.js","./operations/update_many":"node_modules/mongodb/lib/operations/update_many.js","./operations/update_one":"node_modules/mongodb/lib/operations/update_one.js","./operations/execute_operation":"node_modules/mongodb/lib/operations/execute_operation.js"},"node_modules/mongodb/lib/bulk/unordered.js":{"./common":"node_modules/mongodb/lib/bulk/common.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/bulk/common.js":{"../core":"node_modules/mongodb/lib/core/index.js","../utils":"node_modules/mongodb/lib/utils.js","../core/utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/bulk/ordered.js":{"./common":"node_modules/mongodb/lib/bulk/common.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/aggregation_cursor.js":{"./core":"node_modules/mongodb/lib/core/index.js","./cursor":"node_modules/mongodb/lib/cursor.js","./core/cursor":"node_modules/mongodb/lib/core/cursor.js"},"node_modules/mongodb/lib/operations/bulk_write.js":{"../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js","./operation":"node_modules/mongodb/lib/operations/operation.js"},"node_modules/mongodb/lib/operations/count_documents.js":{"./aggregate":"node_modules/mongodb/lib/operations/aggregate.js"},"node_modules/mongodb/lib/operations/create_indexes.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","../core":"node_modules/mongodb/lib/core/index.js","../utils":"node_modules/mongodb/lib/utils.js","../core/utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/operations/delete_many.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/delete_one.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/distinct.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","../utils":"node_modules/mongodb/lib/utils.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../error":"node_modules/mongodb/lib/error.js"},"node_modules/mongodb/lib/operations/drop.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command":"node_modules/mongodb/lib/operations/command.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/command.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/drop_index.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command":"node_modules/mongodb/lib/operations/command.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/drop_indexes.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./drop_index":"node_modules/mongodb/lib/operations/drop_index.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/estimated_document_count.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command_v2":"node_modules/mongodb/lib/operations/command_v2.js"},"node_modules/mongodb/lib/operations/find.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../core":"node_modules/mongodb/lib/core/index.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/operations/find_one.js":{"../utils":"node_modules/mongodb/lib/utils.js","./operation":"node_modules/mongodb/lib/operations/operation.js"},"node_modules/mongodb/lib/operations/find_and_modify.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js","../core":"node_modules/mongodb/lib/core/index.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../error":"node_modules/mongodb/lib/error.js"},"node_modules/mongodb/lib/operations/find_one_and_delete.js":{"./find_and_modify":"node_modules/mongodb/lib/operations/find_and_modify.js"},"node_modules/mongodb/lib/operations/find_one_and_replace.js":{"../core":"node_modules/mongodb/lib/core/index.js","./find_and_modify":"node_modules/mongodb/lib/operations/find_and_modify.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/find_one_and_update.js":{"../core":"node_modules/mongodb/lib/core/index.js","./find_and_modify":"node_modules/mongodb/lib/operations/find_and_modify.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/geo_haystack_search.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js","../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/indexes.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/index_exists.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js"},"node_modules/mongodb/lib/operations/index_information.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/insert_many.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./bulk_write":"node_modules/mongodb/lib/operations/bulk_write.js","../core":"node_modules/mongodb/lib/core/index.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/insert_one.js":{"../core":"node_modules/mongodb/lib/core/index.js","./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js"},"node_modules/mongodb/lib/operations/is_capped.js":{"./options_operation":"node_modules/mongodb/lib/operations/options_operation.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/options_operation.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/list_indexes.js":{"./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","./operation":"node_modules/mongodb/lib/operations/operation.js","../core/utils":"node_modules/mongodb/lib/core/utils.js"},"node_modules/mongodb/lib/operations/map_reduce.js":{"../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js","../dynamic_loaders":"node_modules/mongodb/lib/dynamic_loaders.js","./operation":"node_modules/mongodb/lib/operations/operation.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../error":"node_modules/mongodb/lib/error.js"},"node_modules/mongodb/lib/operations/rename.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","./db_ops":"node_modules/mongodb/lib/operations/db_ops.js","../dynamic_loaders":"node_modules/mongodb/lib/dynamic_loaders.js"},"node_modules/mongodb/lib/operations/re_index.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","../core/sdam/common":"node_modules/mongodb/lib/core/sdam/common.js","../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/replace_one.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/stats.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command":"node_modules/mongodb/lib/operations/command.js"},"node_modules/mongodb/lib/operations/update_many.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/update_one.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./common_functions":"node_modules/mongodb/lib/operations/common_functions.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/add_user.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command":"node_modules/mongodb/lib/operations/command.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/collections.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/operations/run_command.js":{"./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","./operation":"node_modules/mongodb/lib/operations/operation.js"},"node_modules/mongodb/lib/operations/create_collection.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command":"node_modules/mongodb/lib/operations/command.js","../utils":"node_modules/mongodb/lib/utils.js","../dynamic_loaders":"node_modules/mongodb/lib/dynamic_loaders.js","../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/execute_db_admin_command.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js","../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/list_collections.js":{"./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","./operation":"node_modules/mongodb/lib/operations/operation.js","../core/utils":"node_modules/mongodb/lib/core/utils.js","../constants":"node_modules/mongodb/lib/constants.js"},"node_modules/mongodb/lib/operations/profiling_level.js":{"./command":"node_modules/mongodb/lib/operations/command.js"},"node_modules/mongodb/lib/operations/remove_user.js":{"./operation":"node_modules/mongodb/lib/operations/operation.js","./command":"node_modules/mongodb/lib/operations/command.js","../utils":"node_modules/mongodb/lib/utils.js","../write_concern":"node_modules/mongodb/lib/write_concern.js"},"node_modules/mongodb/lib/operations/set_profiling_level.js":{"./command":"node_modules/mongodb/lib/operations/command.js"},"node_modules/mongodb/lib/topologies/native_topology.js":{"../core":"node_modules/mongodb/lib/core/index.js","./topology_base":"node_modules/mongodb/lib/topologies/topology_base.js","../cursor":"node_modules/mongodb/lib/cursor.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/topologies/topology_base.js":{"../core":"node_modules/mongodb/lib/core/index.js"},"node_modules/mongodb/lib/operations/connect.js":{"../core":"node_modules/mongodb/lib/core/index.js","../topologies/mongos":"node_modules/mongodb/lib/topologies/mongos.js","../topologies/native_topology":"node_modules/mongodb/lib/topologies/native_topology.js","../read_concern":"node_modules/mongodb/lib/read_concern.js","../topologies/replset":"node_modules/mongodb/lib/topologies/replset.js","../topologies/server":"node_modules/mongodb/lib/topologies/server.js","../utils":"node_modules/mongodb/lib/utils.js","../write_concern":"node_modules/mongodb/lib/write_concern.js","../cmap/events":"node_modules/mongodb/lib/cmap/events.js","../url_parser":"node_modules/mongodb/lib/url_parser.js"},"node_modules/mongodb/lib/topologies/mongos.js":{"./topology_base":"node_modules/mongodb/lib/topologies/topology_base.js","../core":"node_modules/mongodb/lib/core/index.js","../cursor":"node_modules/mongodb/lib/cursor.js","./server":"node_modules/mongodb/lib/topologies/server.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/topologies/server.js":{"../core":"node_modules/mongodb/lib/core/index.js","../cursor":"node_modules/mongodb/lib/cursor.js","./topology_base":"node_modules/mongodb/lib/topologies/topology_base.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/topologies/replset.js":{"./server":"node_modules/mongodb/lib/topologies/server.js","../cursor":"node_modules/mongodb/lib/cursor.js","../core":"node_modules/mongodb/lib/core/index.js","./topology_base":"node_modules/mongodb/lib/topologies/topology_base.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/url_parser.js":{"./core":"node_modules/mongodb/lib/core/index.js","./read_concern":"node_modules/mongodb/lib/read_concern.js","./core/error":"node_modules/mongodb/lib/core/error.js"},"node_modules/mongodb/lib/admin.js":{"./utils":"node_modules/mongodb/lib/utils.js","./operations/add_user":"node_modules/mongodb/lib/operations/add_user.js","./operations/execute_db_admin_command":"node_modules/mongodb/lib/operations/execute_db_admin_command.js","./operations/remove_user":"node_modules/mongodb/lib/operations/remove_user.js","./operations/validate_collection":"node_modules/mongodb/lib/operations/validate_collection.js","./operations/list_databases":"node_modules/mongodb/lib/operations/list_databases.js","./operations/execute_operation":"node_modules/mongodb/lib/operations/execute_operation.js"},"node_modules/mongodb/lib/operations/validate_collection.js":{"./command":"node_modules/mongodb/lib/operations/command.js"},"node_modules/mongodb/lib/operations/list_databases.js":{"./command_v2":"node_modules/mongodb/lib/operations/command_v2.js","./operation":"node_modules/mongodb/lib/operations/operation.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/gridfs/grid_store.js":{"./chunk":"node_modules/mongodb/lib/gridfs/chunk.js","../core":"node_modules/mongodb/lib/core/index.js","safe-buffer":"node_modules/safe-buffer/index.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/gridfs/chunk.js":{"../core":"node_modules/mongodb/lib/core/index.js","safe-buffer":"node_modules/safe-buffer/index.js"},"node_modules/mongodb/lib/gridfs-stream/index.js":{"./download":"node_modules/mongodb/lib/gridfs-stream/download.js","./upload":"node_modules/mongodb/lib/gridfs-stream/upload.js","../utils":"node_modules/mongodb/lib/utils.js"},"node_modules/mongodb/lib/gridfs-stream/download.js":{},"node_modules/mongodb/lib/gridfs-stream/upload.js":{"../core":"node_modules/mongodb/lib/core/index.js","safe-buffer":"node_modules/safe-buffer/index.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js":{"../../collection":"node_modules/mongoose/lib/collection.js","../../error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","mongodb":"node_modules/mongodb/index.js","../../helpers/get":"node_modules/mongoose/lib/helpers/get.js","sliced":"node_modules/sliced/index.js"},"node_modules/mongoose/lib/collection.js":{"./connectionstate":"node_modules/mongoose/lib/connectionstate.js","./helpers/immediate":"node_modules/mongoose/lib/helpers/immediate.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/decimal128.js":{"mongodb":"node_modules/mongodb/index.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/objectid.js":{"mongodb":"node_modules/mongodb/index.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/ReadPreference.js":{"mongodb":"node_modules/mongodb/index.js"},"node_modules/mongoose/lib/document.js":{"./internal":"node_modules/mongoose/lib/internal.js","./error/index":"node_modules/mongoose/lib/error/index.js","./schema/mixed":"node_modules/mongoose/lib/schema/mixed.js","./error/objectExpected":"node_modules/mongoose/lib/error/objectExpected.js","./error/objectParameter":"node_modules/mongoose/lib/error/objectParameter.js","./error/parallelValidate":"node_modules/mongoose/lib/error/parallelValidate.js","./schema":"node_modules/mongoose/lib/schema.js","./error/strict":"node_modules/mongoose/lib/error/strict.js","./error/validation":"node_modules/mongoose/lib/error/validation.js","./error/validator":"node_modules/mongoose/lib/error/validator.js","./virtualtype":"node_modules/mongoose/lib/virtualtype.js","./helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","./helpers/document/cleanModifiedSubpaths":"node_modules/mongoose/lib/helpers/document/cleanModifiedSubpaths.js","./helpers/document/compile":"node_modules/mongoose/lib/helpers/document/compile.js","./helpers/common":"node_modules/mongoose/lib/helpers/common.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/document/getEmbeddedDiscriminatorPath":"node_modules/mongoose/lib/helpers/document/getEmbeddedDiscriminatorPath.js","./helpers/document/handleSpreadDoc":"node_modules/mongoose/lib/helpers/document/handleSpreadDoc.js","./plugins/idGetter":"node_modules/mongoose/lib/plugins/idGetter.js","./helpers/projection/isDefiningProjection":"node_modules/mongoose/lib/helpers/projection/isDefiningProjection.js","./helpers/projection/isExclusive":"node_modules/mongoose/lib/helpers/projection/isExclusive.js","./options":"node_modules/mongoose/lib/options.js","mpath":"node_modules/mpath/index.js","./queryhelpers":"node_modules/mongoose/lib/queryhelpers.js","./utils":"node_modules/mongoose/lib/utils.js","./helpers/isPromise":"node_modules/mongoose/lib/helpers/isPromise.js","./helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js","./schema/symbols":"node_modules/mongoose/lib/schema/symbols.js"},"node_modules/mongoose/lib/internal.js":{"./statemachine":"node_modules/mongoose/lib/statemachine.js"},"node_modules/mongoose/lib/statemachine.js":{"./utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/utils.js":{"ms":"node_modules/ms/index.js","mpath":"node_modules/mpath/index.js","sliced":"node_modules/sliced/index.js","safe-buffer":"node_modules/mongoose/node_modules/safe-buffer/index.js","./types/decimal128":"node_modules/mongoose/lib/types/decimal128.js","./types/objectid":"node_modules/mongoose/lib/types/objectid.js","./options/PopulateOptions":"node_modules/mongoose/lib/options/PopulateOptions.js","./helpers/clone":"node_modules/mongoose/lib/helpers/clone.js","./helpers/isObject":"node_modules/mongoose/lib/helpers/isObject.js","./helpers/isBsonType":"node_modules/mongoose/lib/helpers/isBsonType.js","./helpers/getFunctionName":"node_modules/mongoose/lib/helpers/getFunctionName.js","./helpers/isMongooseObject":"node_modules/mongoose/lib/helpers/isMongooseObject.js","./helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","./helpers/schema/merge":"node_modules/mongoose/lib/helpers/schema/merge.js","./helpers/specialProperties":"node_modules/mongoose/lib/helpers/specialProperties.js"},"node_modules/mpath/index.js":{"./lib":"node_modules/mpath/lib/index.js"},"node_modules/mpath/lib/index.js":{"./stringToParts":"node_modules/mpath/lib/stringToParts.js"},"node_modules/mongoose/node_modules/safe-buffer/index.js":{},"node_modules/mongoose/lib/types/decimal128.js":{"../driver":"node_modules/mongoose/lib/driver.js"},"node_modules/mongoose/lib/types/objectid.js":{"../driver":"node_modules/mongoose/lib/driver.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/options/PopulateOptions.js":{"../helpers/clone":"node_modules/mongoose/lib/helpers/clone.js"},"node_modules/mongoose/lib/helpers/clone.js":{"regexp-clone":"node_modules/regexp-clone/index.js","../types/decimal128":"node_modules/mongoose/lib/types/decimal128.js","../types/objectid":"node_modules/mongoose/lib/types/objectid.js","./specialProperties":"node_modules/mongoose/lib/helpers/specialProperties.js","./isMongooseObject":"node_modules/mongoose/lib/helpers/isMongooseObject.js","./getFunctionName":"node_modules/mongoose/lib/helpers/getFunctionName.js","./isBsonType":"node_modules/mongoose/lib/helpers/isBsonType.js","./isObject":"node_modules/mongoose/lib/helpers/isObject.js","./symbols":"node_modules/mongoose/lib/helpers/symbols.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/isBsonType.js":{"./get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/promiseOrCallback.js":{"../promise_provider":"node_modules/mongoose/lib/promise_provider.js"},"node_modules/mongoose/lib/promise_provider.js":{"mquery":"node_modules/mquery/lib/mquery.js"},"node_modules/mquery/lib/mquery.js":{"sliced":"node_modules/sliced/index.js","./utils":"node_modules/mquery/lib/utils.js","debug":"node_modules/mquery/node_modules/debug/src/index.js","./permissions":"node_modules/mquery/lib/permissions.js","./env":"node_modules/mquery/lib/env.js","./collection":"node_modules/mquery/lib/collection/index.js","./collection/collection":"node_modules/mquery/lib/collection/collection.js","bluebird":"node_modules/bluebird/js/release/bluebird.js"},"node_modules/mquery/lib/utils.js":{"safe-buffer":"node_modules/safe-buffer/index.js","regexp-clone":"node_modules/regexp-clone/index.js"},"node_modules/mquery/node_modules/debug/src/index.js":{"./node.js":"node_modules/mquery/node_modules/debug/src/node.js"},"node_modules/mquery/node_modules/debug/src/node.js":{"./debug":"node_modules/mquery/node_modules/debug/src/debug.js","supports-color":"C:/Workspace/node_modules/supports-color/index.js"},"node_modules/mquery/node_modules/debug/src/debug.js":{"ms":"node_modules/mquery/node_modules/ms/index.js"},"node_modules/mquery/lib/collection/index.js":{"../env":"node_modules/mquery/lib/env.js","./node":"node_modules/mquery/lib/collection/node.js"},"node_modules/mquery/lib/collection/node.js":{"./collection":"node_modules/mquery/lib/collection/collection.js","../utils":"node_modules/mquery/lib/utils.js"},"node_modules/bluebird/js/release/bluebird.js":{"./promise":"node_modules/bluebird/js/release/promise.js"},"node_modules/bluebird/js/release/promise.js":{"./util":"node_modules/bluebird/js/release/util.js","./es5":"node_modules/bluebird/js/release/es5.js","./async":"node_modules/bluebird/js/release/async.js","./errors":"node_modules/bluebird/js/release/errors.js","./thenables":"node_modules/bluebird/js/release/thenables.js","./promise_array":"node_modules/bluebird/js/release/promise_array.js","./context":"node_modules/bluebird/js/release/context.js","./debuggability":"node_modules/bluebird/js/release/debuggability.js","./finally":"node_modules/bluebird/js/release/finally.js","./catch_filter":"node_modules/bluebird/js/release/catch_filter.js","./nodeback":"node_modules/bluebird/js/release/nodeback.js","./method":"node_modules/bluebird/js/release/method.js","./bind":"node_modules/bluebird/js/release/bind.js","./cancel":"node_modules/bluebird/js/release/cancel.js","./direct_resolve":"node_modules/bluebird/js/release/direct_resolve.js","./synchronous_inspection":"node_modules/bluebird/js/release/synchronous_inspection.js","./join":"node_modules/bluebird/js/release/join.js","./map.js":"node_modules/bluebird/js/release/map.js","./call_get.js":"node_modules/bluebird/js/release/call_get.js","./using.js":"node_modules/bluebird/js/release/using.js","./timers.js":"node_modules/bluebird/js/release/timers.js","./generators.js":"node_modules/bluebird/js/release/generators.js","./nodeify.js":"node_modules/bluebird/js/release/nodeify.js","./promisify.js":"node_modules/bluebird/js/release/promisify.js","./props.js":"node_modules/bluebird/js/release/props.js","./race.js":"node_modules/bluebird/js/release/race.js","./reduce.js":"node_modules/bluebird/js/release/reduce.js","./settle.js":"node_modules/bluebird/js/release/settle.js","./some.js":"node_modules/bluebird/js/release/some.js","./filter.js":"node_modules/bluebird/js/release/filter.js","./each.js":"node_modules/bluebird/js/release/each.js","./any.js":"node_modules/bluebird/js/release/any.js"},"node_modules/bluebird/js/release/util.js":{"./es5":"node_modules/bluebird/js/release/es5.js"},"node_modules/bluebird/js/release/async.js":{"./schedule":"node_modules/bluebird/js/release/schedule.js","./queue":"node_modules/bluebird/js/release/queue.js","./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/schedule.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/errors.js":{"./es5":"node_modules/bluebird/js/release/es5.js","./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/thenables.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/promise_array.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/debuggability.js":{"./errors":"node_modules/bluebird/js/release/errors.js","./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/finally.js":{"./util":"node_modules/bluebird/js/release/util.js","./catch_filter":"node_modules/bluebird/js/release/catch_filter.js"},"node_modules/bluebird/js/release/catch_filter.js":{"./util":"node_modules/bluebird/js/release/util.js","./es5":"node_modules/bluebird/js/release/es5.js"},"node_modules/bluebird/js/release/nodeback.js":{"./util":"node_modules/bluebird/js/release/util.js","./errors":"node_modules/bluebird/js/release/errors.js","./es5":"node_modules/bluebird/js/release/es5.js"},"node_modules/bluebird/js/release/method.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/cancel.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/join.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/map.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/call_get.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/using.js":{"./util":"node_modules/bluebird/js/release/util.js","./errors":"node_modules/bluebird/js/release/errors.js"},"node_modules/bluebird/js/release/timers.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/generators.js":{"./errors":"node_modules/bluebird/js/release/errors.js","./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/nodeify.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/promisify.js":{"./util":"node_modules/bluebird/js/release/util.js","./nodeback":"node_modules/bluebird/js/release/nodeback.js","./errors":"node_modules/bluebird/js/release/errors.js"},"node_modules/bluebird/js/release/props.js":{"./util":"node_modules/bluebird/js/release/util.js","./es5":"node_modules/bluebird/js/release/es5.js"},"node_modules/bluebird/js/release/race.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/reduce.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/settle.js":{"./util":"node_modules/bluebird/js/release/util.js"},"node_modules/bluebird/js/release/some.js":{"./util":"node_modules/bluebird/js/release/util.js","./errors":"node_modules/bluebird/js/release/errors.js"},"node_modules/mongoose/lib/error/index.js":{"./mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","./messages":"node_modules/mongoose/lib/error/messages.js","./notFound":"node_modules/mongoose/lib/error/notFound.js","./cast":"node_modules/mongoose/lib/error/cast.js","./validation":"node_modules/mongoose/lib/error/validation.js","./validator":"node_modules/mongoose/lib/error/validator.js","./version":"node_modules/mongoose/lib/error/version.js","./parallelSave":"node_modules/mongoose/lib/error/parallelSave.js","./overwriteModel":"node_modules/mongoose/lib/error/overwriteModel.js","./missingSchema":"node_modules/mongoose/lib/error/missingSchema.js","./divergentArray":"node_modules/mongoose/lib/error/divergentArray.js","./strict":"node_modules/mongoose/lib/error/strict.js"},"node_modules/mongoose/lib/error/notFound.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/cast.js":{"./mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/error/validation.js":{"./mongooseError":"node_modules/mongoose/lib/error/mongooseError.js"},"node_modules/mongoose/lib/error/validator.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/version.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/parallelSave.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/overwriteModel.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/missingSchema.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/divergentArray.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/strict.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/schema/mixed.js":{"../schematype":"node_modules/mongoose/lib/schematype.js","./symbols":"node_modules/mongoose/lib/schema/symbols.js","../helpers/isObject":"node_modules/mongoose/lib/helpers/isObject.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/schematype.js":{"./error/index":"node_modules/mongoose/lib/error/index.js","./options/SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./schema/operators/exists":"node_modules/mongoose/lib/schema/operators/exists.js","./schema/operators/type":"node_modules/mongoose/lib/schema/operators/type.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/schematype/handleImmutable":"node_modules/mongoose/lib/helpers/schematype/handleImmutable.js","./helpers/immediate":"node_modules/mongoose/lib/helpers/immediate.js","./helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js","./utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/options/SchemaTypeOptions.js":{"../helpers/clone":"node_modules/mongoose/lib/helpers/clone.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/schema/operators/exists.js":{"../../cast/boolean":"node_modules/mongoose/lib/cast/boolean.js"},"node_modules/mongoose/lib/cast/boolean.js":{"../error/cast":"node_modules/mongoose/lib/error/cast.js"},"node_modules/mongoose/lib/helpers/schematype/handleImmutable.js":{"../../error/strict":"node_modules/mongoose/lib/error/strict.js"},"node_modules/mongoose/lib/error/objectExpected.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/objectParameter.js":{"./":"node_modules/mongoose/lib/error/index.js"},"node_modules/mongoose/lib/error/parallelValidate.js":{"./mongooseError":"node_modules/mongoose/lib/error/mongooseError.js"},"node_modules/mongoose/lib/schema.js":{"kareem":"node_modules/kareem/index.js","./error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","./schematype":"node_modules/mongoose/lib/schematype.js","./options/SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./options/VirtualOptions":"node_modules/mongoose/lib/options/VirtualOptions.js","./virtualtype":"node_modules/mongoose/lib/virtualtype.js","./helpers/schema/addAutoId":"node_modules/mongoose/lib/helpers/schema/addAutoId.js","./helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/schema/getIndexes":"node_modules/mongoose/lib/helpers/schema/getIndexes.js","./helpers/schema/merge":"node_modules/mongoose/lib/helpers/schema/merge.js","mpath":"node_modules/mpath/index.js","./driver":"node_modules/mongoose/lib/driver.js","./helpers/timestamps/setupTimestamps":"node_modules/mongoose/lib/helpers/timestamps/setupTimestamps.js","./utils":"node_modules/mongoose/lib/utils.js","./helpers/populate/validateRef":"node_modules/mongoose/lib/helpers/populate/validateRef.js","./helpers/query/applyQueryMiddleware":"node_modules/mongoose/lib/helpers/query/applyQueryMiddleware.js","./helpers/model/applyHooks":"node_modules/mongoose/lib/helpers/model/applyHooks.js","./schema/index":"node_modules/mongoose/lib/schema/index.js"},"node_modules/mongoose/lib/options/VirtualOptions.js":{"./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/virtualtype.js":{"./utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/schema/getIndexes.js":{"../get":"node_modules/mongoose/lib/helpers/get.js","../isObject":"node_modules/mongoose/lib/helpers/isObject.js"},"node_modules/mongoose/lib/helpers/timestamps/setupTimestamps.js":{"../update/applyTimestampsToChildren":"node_modules/mongoose/lib/helpers/update/applyTimestampsToChildren.js","../update/applyTimestampsToUpdate":"node_modules/mongoose/lib/helpers/update/applyTimestampsToUpdate.js","../get":"node_modules/mongoose/lib/helpers/get.js","../schema/handleTimestampOption":"node_modules/mongoose/lib/helpers/schema/handleTimestampOption.js","../../schema/symbols":"node_modules/mongoose/lib/schema/symbols.js"},"node_modules/mongoose/lib/helpers/update/applyTimestampsToChildren.js":{"../schema/cleanPositionalOperators":"node_modules/mongoose/lib/helpers/schema/cleanPositionalOperators.js","../schema/handleTimestampOption":"node_modules/mongoose/lib/helpers/schema/handleTimestampOption.js"},"node_modules/mongoose/lib/helpers/update/applyTimestampsToUpdate.js":{"../get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/populate/validateRef.js":{"../../error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js"},"node_modules/mongoose/lib/helpers/model/applyHooks.js":{"../../schema/symbols":"node_modules/mongoose/lib/schema/symbols.js","../promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js"},"node_modules/mongoose/lib/schema/index.js":{"./string":"node_modules/mongoose/lib/schema/string.js","./number":"node_modules/mongoose/lib/schema/number.js","./boolean":"node_modules/mongoose/lib/schema/boolean.js","./documentarray":"node_modules/mongoose/lib/schema/documentarray.js","./SingleNestedPath":"node_modules/mongoose/lib/schema/SingleNestedPath.js","./array":"node_modules/mongoose/lib/schema/array.js","./buffer":"node_modules/mongoose/lib/schema/buffer.js","./date":"node_modules/mongoose/lib/schema/date.js","./objectid":"node_modules/mongoose/lib/schema/objectid.js","./mixed":"node_modules/mongoose/lib/schema/mixed.js","./decimal128":"node_modules/mongoose/lib/schema/decimal128.js","./map":"node_modules/mongoose/lib/schema/map.js"},"node_modules/mongoose/lib/schema/string.js":{"../schematype":"node_modules/mongoose/lib/schematype.js","../error/index":"node_modules/mongoose/lib/error/index.js","../options/SchemaStringOptions":"node_modules/mongoose/lib/options/SchemaStringOptions.js","../cast/string":"node_modules/mongoose/lib/cast/string.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/options/SchemaStringOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/cast/string.js":{"../error/cast":"node_modules/mongoose/lib/error/cast.js"},"node_modules/mongoose/lib/schema/number.js":{"../error/index":"node_modules/mongoose/lib/error/index.js","../options/SchemaNumberOptions":"node_modules/mongoose/lib/options/SchemaNumberOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","../cast/number":"node_modules/mongoose/lib/cast/number.js","./operators/bitwise":"node_modules/mongoose/lib/schema/operators/bitwise.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/options/SchemaNumberOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/cast/number.js":{},"node_modules/mongoose/lib/schema/operators/bitwise.js":{"../../error/cast":"node_modules/mongoose/lib/error/cast.js"},"node_modules/mongoose/lib/schema/boolean.js":{"../error/cast":"node_modules/mongoose/lib/error/cast.js","../schematype":"node_modules/mongoose/lib/schematype.js","../cast/boolean":"node_modules/mongoose/lib/cast/boolean.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/schema/documentarray.js":{"./array":"node_modules/mongoose/lib/schema/array.js","../error/cast":"node_modules/mongoose/lib/error/cast.js","../options/SchemaDocumentArrayOptions":"node_modules/mongoose/lib/options/SchemaDocumentArrayOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","../error/validation":"node_modules/mongoose/lib/error/validation.js","../helpers/model/discriminator":"node_modules/mongoose/lib/helpers/model/discriminator.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../helpers/schema/handleIdOption":"node_modules/mongoose/lib/helpers/schema/handleIdOption.js","../utils":"node_modules/mongoose/lib/utils.js","../helpers/discriminator/getConstructor":"node_modules/mongoose/lib/helpers/discriminator/getConstructor.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/schema/array.js":{"./operators/exists":"node_modules/mongoose/lib/schema/operators/exists.js","./operators/type":"node_modules/mongoose/lib/schema/operators/type.js","../error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","../options/SchemaArrayOptions":"node_modules/mongoose/lib/options/SchemaArrayOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","./mixed":"node_modules/mongoose/lib/schema/mixed.js","../helpers/arrayDepth":"node_modules/mongoose/lib/helpers/arrayDepth.js","../cast":"node_modules/mongoose/lib/cast.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../helpers/query/isOperator":"node_modules/mongoose/lib/helpers/query/isOperator.js","../utils":"node_modules/mongoose/lib/utils.js","./operators/helpers":"node_modules/mongoose/lib/schema/operators/helpers.js","./operators/geospatial":"node_modules/mongoose/lib/schema/operators/geospatial.js","../helpers/discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","../types":"node_modules/mongoose/lib/types/index.js","./index.js":"node_modules/mongoose/lib/schema/index.js"},"node_modules/mongoose/lib/options/SchemaArrayOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/cast.js":{"./error/cast":"node_modules/mongoose/lib/error/cast.js","./error/strict":"node_modules/mongoose/lib/error/strict.js","./schema/index":"node_modules/mongoose/lib/schema/index.js","./schema/operators/text":"node_modules/mongoose/lib/schema/operators/text.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/discriminator/getSchemaDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getSchemaDiscriminatorByValue.js","./helpers/query/isOperator":"node_modules/mongoose/lib/helpers/query/isOperator.js","./helpers/isObject":"node_modules/mongoose/lib/helpers/isObject.js","./helpers/isMongooseObject":"node_modules/mongoose/lib/helpers/isMongooseObject.js"},"node_modules/mongoose/lib/schema/operators/text.js":{"../../error/cast":"node_modules/mongoose/lib/error/cast.js","../../cast/boolean":"node_modules/mongoose/lib/cast/boolean.js","../../cast/string":"node_modules/mongoose/lib/cast/string.js"},"node_modules/mongoose/lib/helpers/discriminator/getSchemaDiscriminatorByValue.js":{"./areDiscriminatorValuesEqual":"node_modules/mongoose/lib/helpers/discriminator/areDiscriminatorValuesEqual.js"},"node_modules/mongoose/lib/helpers/discriminator/areDiscriminatorValuesEqual.js":{"../../types/objectid":"node_modules/mongoose/lib/types/objectid.js"},"node_modules/mongoose/lib/schema/operators/helpers.js":{"../number":"node_modules/mongoose/lib/schema/number.js"},"node_modules/mongoose/lib/schema/operators/geospatial.js":{"./helpers":"node_modules/mongoose/lib/schema/operators/helpers.js"},"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js":{"./areDiscriminatorValuesEqual":"node_modules/mongoose/lib/helpers/discriminator/areDiscriminatorValuesEqual.js"},"node_modules/mongoose/lib/options/SchemaDocumentArrayOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/helpers/model/discriminator.js":{"../../schema/mixed":"node_modules/mongoose/lib/schema/mixed.js","../../types/objectid":"node_modules/mongoose/lib/types/objectid.js","../document/compile":"node_modules/mongoose/lib/helpers/document/compile.js","../get":"node_modules/mongoose/lib/helpers/get.js","../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/document/compile.js":{"../../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js","../../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../../options":"node_modules/mongoose/lib/options.js","../../utils":"node_modules/mongoose/lib/utils.js","../../document":"node_modules/mongoose/lib/document.js"},"node_modules/mongoose/lib/helpers/schema/handleIdOption.js":{"./addAutoId":"node_modules/mongoose/lib/helpers/schema/addAutoId.js"},"node_modules/mongoose/lib/helpers/discriminator/getConstructor.js":{"./getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js"},"node_modules/mongoose/lib/schema/SingleNestedPath.js":{"../error/cast":"node_modules/mongoose/lib/error/cast.js","../error/objectExpected":"node_modules/mongoose/lib/error/objectExpected.js","../options/SchemaSingleNestedOptions":"node_modules/mongoose/lib/options/SchemaSingleNestedOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","./operators/exists":"node_modules/mongoose/lib/schema/operators/exists.js","./operators/helpers":"node_modules/mongoose/lib/schema/operators/helpers.js","../helpers/model/discriminator":"node_modules/mongoose/lib/helpers/model/discriminator.js","./operators/geospatial":"node_modules/mongoose/lib/schema/operators/geospatial.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../helpers/discriminator/getConstructor":"node_modules/mongoose/lib/helpers/discriminator/getConstructor.js","../helpers/schema/handleIdOption":"node_modules/mongoose/lib/helpers/schema/handleIdOption.js","../options":"node_modules/mongoose/lib/options.js"},"node_modules/mongoose/lib/options/SchemaSingleNestedOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/schema/buffer.js":{"../types/buffer":"node_modules/mongoose/lib/types/buffer.js","../options/SchemaBufferOptions":"node_modules/mongoose/lib/options/SchemaBufferOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","./operators/bitwise":"node_modules/mongoose/lib/schema/operators/bitwise.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/types/buffer.js":{"../driver":"node_modules/mongoose/lib/driver.js","../utils":"node_modules/mongoose/lib/utils.js","safe-buffer":"node_modules/mongoose/node_modules/safe-buffer/index.js"},"node_modules/mongoose/lib/options/SchemaBufferOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/schema/date.js":{"../error/index":"node_modules/mongoose/lib/error/index.js","../options/SchemaDateOptions":"node_modules/mongoose/lib/options/SchemaDateOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","../cast/date":"node_modules/mongoose/lib/cast/date.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/options/SchemaDateOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/cast/date.js":{},"node_modules/mongoose/lib/schema/objectid.js":{"../options/SchemaObjectIdOptions":"node_modules/mongoose/lib/options/SchemaObjectIdOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js","../cast/objectid":"node_modules/mongoose/lib/cast/objectid.js","../types/objectid":"node_modules/mongoose/lib/types/objectid.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/options/SchemaObjectIdOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/cast/objectid.js":{"../driver":"node_modules/mongoose/lib/driver.js"},"node_modules/mongoose/lib/schema/decimal128.js":{"../schematype":"node_modules/mongoose/lib/schematype.js","../types/decimal128":"node_modules/mongoose/lib/types/decimal128.js","../cast/decimal128":"node_modules/mongoose/lib/cast/decimal128.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/cast/decimal128.js":{"../types/decimal128":"node_modules/mongoose/lib/types/decimal128.js"},"node_modules/mongoose/lib/schema/map.js":{"../types/map":"node_modules/mongoose/lib/types/map.js","../options/SchemaMapOptions":"node_modules/mongoose/lib/options/SchemaMapOptions.js","../schematype":"node_modules/mongoose/lib/schematype.js"},"node_modules/mongoose/lib/types/map.js":{"../schema/mixed":"node_modules/mongoose/lib/schema/mixed.js","./objectid":"node_modules/mongoose/lib/types/objectid.js","../utils":"node_modules/mongoose/lib/utils.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../helpers/document/handleSpreadDoc":"node_modules/mongoose/lib/helpers/document/handleSpreadDoc.js","../helpers/specialProperties":"node_modules/mongoose/lib/helpers/specialProperties.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/helpers/document/handleSpreadDoc.js":{"../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/options/SchemaMapOptions.js":{"./SchemaTypeOptions":"node_modules/mongoose/lib/options/SchemaTypeOptions.js","./propertyOptions":"node_modules/mongoose/lib/options/propertyOptions.js"},"node_modules/mongoose/lib/helpers/common.js":{"../driver":"node_modules/mongoose/lib/driver.js","../types/decimal128":"node_modules/mongoose/lib/types/decimal128.js","../types/objectid":"node_modules/mongoose/lib/types/objectid.js","./isMongooseObject":"node_modules/mongoose/lib/helpers/isMongooseObject.js"},"node_modules/mongoose/lib/helpers/document/getEmbeddedDiscriminatorPath.js":{"../get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/projection/isExclusive.js":{"./isDefiningProjection":"node_modules/mongoose/lib/helpers/projection/isDefiningProjection.js"},"node_modules/mongoose/lib/queryhelpers.js":{"./helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection":"node_modules/mongoose/lib/helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","./helpers/projection/isDefiningProjection":"node_modules/mongoose/lib/helpers/projection/isDefiningProjection.js","./helpers/clone":"node_modules/mongoose/lib/helpers/clone.js"},"node_modules/mongoose/lib/types/index.js":{"./array":"node_modules/mongoose/lib/types/array.js","./buffer":"node_modules/mongoose/lib/types/buffer.js","./embedded":"node_modules/mongoose/lib/types/embedded.js","./documentarray":"node_modules/mongoose/lib/types/documentarray.js","./decimal128":"node_modules/mongoose/lib/types/decimal128.js","./objectid":"node_modules/mongoose/lib/types/objectid.js","./map":"node_modules/mongoose/lib/types/map.js","./subdocument":"node_modules/mongoose/lib/types/subdocument.js"},"node_modules/mongoose/lib/types/array.js":{"./core_array":"node_modules/mongoose/lib/types/core_array.js","../document":"node_modules/mongoose/lib/document.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/types/core_array.js":{"../document":"node_modules/mongoose/lib/document.js","./embedded":"node_modules/mongoose/lib/types/embedded.js","../error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","./objectid":"node_modules/mongoose/lib/types/objectid.js","../helpers/document/cleanModifiedSubpaths":"node_modules/mongoose/lib/helpers/document/cleanModifiedSubpaths.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../options":"node_modules/mongoose/lib/options.js","../utils":"node_modules/mongoose/lib/utils.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/types/embedded.js":{"../document_provider":"node_modules/mongoose/lib/document_provider.js","../error/validation":"node_modules/mongoose/lib/error/validation.js","../helpers/immediate":"node_modules/mongoose/lib/helpers/immediate.js","../options":"node_modules/mongoose/lib/options.js","../helpers/get":"node_modules/mongoose/lib/helpers/get.js","../helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/document_provider.js":{"./document.js":"node_modules/mongoose/lib/document.js","./browserDocument.js":"node_modules/mongoose/lib/browserDocument.js"},"node_modules/mongoose/lib/browserDocument.js":{"./document":"node_modules/mongoose/lib/document.js","./error/index":"node_modules/mongoose/lib/error/index.js","./schema":"node_modules/mongoose/lib/schema.js","./types/objectid":"node_modules/mongoose/lib/types/objectid.js","./helpers/model/applyHooks":"node_modules/mongoose/lib/helpers/model/applyHooks.js","./helpers/isObject":"node_modules/mongoose/lib/helpers/isObject.js"},"node_modules/mongoose/lib/types/documentarray.js":{"./core_array":"node_modules/mongoose/lib/types/core_array.js","../document":"node_modules/mongoose/lib/document.js","./objectid":"node_modules/mongoose/lib/types/objectid.js","../cast/objectid":"node_modules/mongoose/lib/cast/objectid.js","../helpers/discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","../options":"node_modules/mongoose/lib/options.js","../utils":"node_modules/mongoose/lib/utils.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/types/subdocument.js":{"../document":"node_modules/mongoose/lib/document.js","../helpers/immediate":"node_modules/mongoose/lib/helpers/immediate.js","../options":"node_modules/mongoose/lib/options.js","../helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/query.js":{"./error/cast":"node_modules/mongoose/lib/error/cast.js","./error/notFound":"node_modules/mongoose/lib/error/notFound.js","kareem":"node_modules/kareem/index.js","./error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","./error/objectParameter":"node_modules/mongoose/lib/error/objectParameter.js","./cursor/QueryCursor":"node_modules/mongoose/lib/cursor/QueryCursor.js","./driver":"node_modules/mongoose/lib/driver.js","./helpers/query/applyGlobalMaxTimeMS":"node_modules/mongoose/lib/helpers/query/applyGlobalMaxTimeMS.js","./helpers/schema/applyWriteConcern":"node_modules/mongoose/lib/helpers/schema/applyWriteConcern.js","./cast":"node_modules/mongoose/lib/cast.js","./helpers/update/castArrayFilters":"node_modules/mongoose/lib/helpers/update/castArrayFilters.js","./helpers/query/castUpdate":"node_modules/mongoose/lib/helpers/query/castUpdate.js","./helpers/query/completeMany":"node_modules/mongoose/lib/helpers/query/completeMany.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","./helpers/discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","./helpers/query/hasDollarKeys":"node_modules/mongoose/lib/helpers/query/hasDollarKeys.js","./queryhelpers":"node_modules/mongoose/lib/queryhelpers.js","./helpers/projection/isExclusive":"node_modules/mongoose/lib/helpers/projection/isExclusive.js","./helpers/projection/isInclusive":"node_modules/mongoose/lib/helpers/projection/isInclusive.js","mquery":"node_modules/mquery/lib/mquery.js","./helpers/projection/parseProjection":"node_modules/mongoose/lib/helpers/projection/parseProjection.js","./helpers/update/removeUnusedArrayFilters":"node_modules/mongoose/lib/helpers/update/removeUnusedArrayFilters.js","./helpers/query/selectPopulatedFields":"node_modules/mongoose/lib/helpers/query/selectPopulatedFields.js","./helpers/setDefaultsOnInsert":"node_modules/mongoose/lib/helpers/setDefaultsOnInsert.js","sliced":"node_modules/sliced/index.js","./helpers/updateValidators":"node_modules/mongoose/lib/helpers/updateValidators.js","./utils":"node_modules/mongoose/lib/utils.js","./helpers/query/wrapThunk":"node_modules/mongoose/lib/helpers/query/wrapThunk.js"},"node_modules/mongoose/lib/cursor/QueryCursor.js":{"../helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","../helpers/cursor/eachAsync":"node_modules/mongoose/lib/helpers/cursor/eachAsync.js","../queryhelpers":"node_modules/mongoose/lib/queryhelpers.js"},"node_modules/mongoose/lib/helpers/cursor/eachAsync.js":{"../promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js"},"node_modules/mongoose/lib/helpers/query/applyGlobalMaxTimeMS.js":{"../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/schema/applyWriteConcern.js":{"../get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/update/castArrayFilters.js":{"../query/castFilterPath":"node_modules/mongoose/lib/helpers/query/castFilterPath.js","../schema/cleanPositionalOperators":"node_modules/mongoose/lib/helpers/schema/cleanPositionalOperators.js","../schema/getPath":"node_modules/mongoose/lib/helpers/schema/getPath.js","./updatedPathsByArrayFilter":"node_modules/mongoose/lib/helpers/update/updatedPathsByArrayFilter.js"},"node_modules/mongoose/lib/helpers/query/castFilterPath.js":{"./isOperator":"node_modules/mongoose/lib/helpers/query/isOperator.js"},"node_modules/mongoose/lib/helpers/update/updatedPathsByArrayFilter.js":{"./modifiedPaths":"node_modules/mongoose/lib/helpers/update/modifiedPaths.js"},"node_modules/mongoose/lib/helpers/update/modifiedPaths.js":{"../common":"node_modules/mongoose/lib/helpers/common.js"},"node_modules/mongoose/lib/helpers/query/castUpdate.js":{"../../error/cast":"node_modules/mongoose/lib/error/cast.js","../../error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","../../error/strict":"node_modules/mongoose/lib/error/strict.js","../../error/validation":"node_modules/mongoose/lib/error/validation.js","../../cast/number":"node_modules/mongoose/lib/cast/number.js","../../cast":"node_modules/mongoose/lib/cast.js","./getEmbeddedDiscriminatorPath":"node_modules/mongoose/lib/helpers/query/getEmbeddedDiscriminatorPath.js","./handleImmutable":"node_modules/mongoose/lib/helpers/query/handleImmutable.js","../update/moveImmutableProperties":"node_modules/mongoose/lib/helpers/update/moveImmutableProperties.js","../../schema/symbols":"node_modules/mongoose/lib/schema/symbols.js","../path/setDottedPath":"node_modules/mongoose/lib/helpers/path/setDottedPath.js","../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/query/getEmbeddedDiscriminatorPath.js":{"../schema/cleanPositionalOperators":"node_modules/mongoose/lib/helpers/schema/cleanPositionalOperators.js","../get":"node_modules/mongoose/lib/helpers/get.js","../discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","../update/updatedPathsByArrayFilter":"node_modules/mongoose/lib/helpers/update/updatedPathsByArrayFilter.js"},"node_modules/mongoose/lib/helpers/query/handleImmutable.js":{"../../error/strict":"node_modules/mongoose/lib/error/strict.js"},"node_modules/mongoose/lib/helpers/update/moveImmutableProperties.js":{"../get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/query/completeMany.js":{"../../queryhelpers":"node_modules/mongoose/lib/queryhelpers.js"},"node_modules/mongoose/lib/helpers/projection/isInclusive.js":{"./isDefiningProjection":"node_modules/mongoose/lib/helpers/projection/isDefiningProjection.js"},"node_modules/mongoose/lib/helpers/query/selectPopulatedFields.js":{"../projection/isExclusive":"node_modules/mongoose/lib/helpers/projection/isExclusive.js","../projection/isInclusive":"node_modules/mongoose/lib/helpers/projection/isInclusive.js"},"node_modules/mongoose/lib/helpers/setDefaultsOnInsert.js":{"./common":"node_modules/mongoose/lib/helpers/common.js","./get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/updateValidators.js":{"../error/validation":"node_modules/mongoose/lib/error/validation.js","./schema/cleanPositionalOperators":"node_modules/mongoose/lib/helpers/schema/cleanPositionalOperators.js","./common":"node_modules/mongoose/lib/helpers/common.js"},"node_modules/mongoose/lib/model.js":{"./aggregate":"node_modules/mongoose/lib/aggregate.js","./cursor/ChangeStream":"node_modules/mongoose/lib/cursor/ChangeStream.js","./document":"node_modules/mongoose/lib/document.js","./error/notFound":"node_modules/mongoose/lib/error/notFound.js","./error/divergentArray":"node_modules/mongoose/lib/error/divergentArray.js","./types/buffer":"node_modules/mongoose/lib/types/buffer.js","./error/index":"node_modules/mongoose/lib/error/index.js","./error/overwriteModel":"node_modules/mongoose/lib/error/overwriteModel.js","./promise_provider":"node_modules/mongoose/lib/promise_provider.js","./query":"node_modules/mongoose/lib/query.js","./options/removeOptions":"node_modules/mongoose/lib/options/removeOptions.js","./options/saveOptions":"node_modules/mongoose/lib/options/saveOptions.js","./schema":"node_modules/mongoose/lib/schema.js","./error/serverSelection":"node_modules/mongoose/lib/error/serverSelection.js","./error/validation":"node_modules/mongoose/lib/error/validation.js","./error/version":"node_modules/mongoose/lib/error/version.js","./error/parallelSave":"node_modules/mongoose/lib/error/parallelSave.js","./helpers/query/applyQueryMiddleware":"node_modules/mongoose/lib/helpers/query/applyQueryMiddleware.js","./helpers/model/applyHooks":"node_modules/mongoose/lib/helpers/model/applyHooks.js","./helpers/model/applyMethods":"node_modules/mongoose/lib/helpers/model/applyMethods.js","./helpers/model/applyStaticHooks":"node_modules/mongoose/lib/helpers/model/applyStaticHooks.js","./helpers/model/applyStatics":"node_modules/mongoose/lib/helpers/model/applyStatics.js","./helpers/schema/applyWriteConcern":"node_modules/mongoose/lib/helpers/schema/applyWriteConcern.js","./helpers/populate/assignVals":"node_modules/mongoose/lib/helpers/populate/assignVals.js","./helpers/model/castBulkWrite":"node_modules/mongoose/lib/helpers/model/castBulkWrite.js","./helpers/populate/createPopulateQueryFilter":"node_modules/mongoose/lib/helpers/populate/createPopulateQueryFilter.js","./helpers/getDefaultBulkwriteResult":"node_modules/mongoose/lib/helpers/getDefaultBulkwriteResult.js","./helpers/model/discriminator":"node_modules/mongoose/lib/helpers/model/discriminator.js","./helpers/each":"node_modules/mongoose/lib/helpers/each.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","./helpers/populate/getModelsMapForPopulate":"node_modules/mongoose/lib/helpers/populate/getModelsMapForPopulate.js","./helpers/immediate":"node_modules/mongoose/lib/helpers/immediate.js","./options":"node_modules/mongoose/lib/options.js","./helpers/indexes/isDefaultIdIndex":"node_modules/mongoose/lib/helpers/indexes/isDefaultIdIndex.js","./helpers/indexes/isIndexEqual":"node_modules/mongoose/lib/helpers/indexes/isIndexEqual.js","./helpers/projection/isPathSelectedInclusive":"node_modules/mongoose/lib/helpers/projection/isPathSelectedInclusive.js","./helpers/populate/leanPopulateMap":"node_modules/mongoose/lib/helpers/populate/leanPopulateMap.js","./helpers/update/modifiedPaths":"node_modules/mongoose/lib/helpers/update/modifiedPaths.js","./helpers/parallelLimit":"node_modules/mongoose/lib/helpers/parallelLimit.js","./helpers/populate/removeDeselectedForeignField":"node_modules/mongoose/lib/helpers/populate/removeDeselectedForeignField.js","./utils":"node_modules/mongoose/lib/utils.js","./helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/aggregate.js":{"./cursor/AggregationCursor":"node_modules/mongoose/lib/cursor/AggregationCursor.js","./query":"node_modules/mongoose/lib/query.js","./helpers/query/applyGlobalMaxTimeMS":"node_modules/mongoose/lib/helpers/query/applyGlobalMaxTimeMS.js","./helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","./helpers/aggregate/stringifyFunctionOperators":"node_modules/mongoose/lib/helpers/aggregate/stringifyFunctionOperators.js","./utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/cursor/AggregationCursor.js":{"../error/mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","../helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","../helpers/cursor/eachAsync":"node_modules/mongoose/lib/helpers/cursor/eachAsync.js"},"node_modules/mongoose/lib/cursor/ChangeStream.js":{},"node_modules/mongoose/lib/options/removeOptions.js":{"../helpers/clone":"node_modules/mongoose/lib/helpers/clone.js"},"node_modules/mongoose/lib/options/saveOptions.js":{"../helpers/clone":"node_modules/mongoose/lib/helpers/clone.js"},"node_modules/mongoose/lib/error/serverSelection.js":{"./mongooseError":"node_modules/mongoose/lib/error/mongooseError.js","../helpers/topology/allServersUnknown":"node_modules/mongoose/lib/helpers/topology/allServersUnknown.js","../helpers/topology/isAtlas":"node_modules/mongoose/lib/helpers/topology/isAtlas.js","../helpers/topology/isSSLError":"node_modules/mongoose/lib/helpers/topology/isSSLError.js"},"node_modules/mongoose/lib/helpers/model/applyMethods.js":{"../get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/model/applyStaticHooks.js":{"../query/applyQueryMiddleware":"node_modules/mongoose/lib/helpers/query/applyQueryMiddleware.js","../promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js"},"node_modules/mongoose/lib/helpers/populate/assignVals.js":{"./SkipPopulateValue":"node_modules/mongoose/lib/helpers/populate/SkipPopulateValue.js","./assignRawDocsToIdStructure":"node_modules/mongoose/lib/helpers/populate/assignRawDocsToIdStructure.js","../get":"node_modules/mongoose/lib/helpers/get.js","./getVirtual":"node_modules/mongoose/lib/helpers/populate/getVirtual.js","./leanPopulateMap":"node_modules/mongoose/lib/helpers/populate/leanPopulateMap.js","./lookupLocalFields":"node_modules/mongoose/lib/helpers/populate/lookupLocalFields.js","mpath":"node_modules/mpath/index.js","sift":"node_modules/sift/index.js","../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/populate/assignRawDocsToIdStructure.js":{"./leanPopulateMap":"node_modules/mongoose/lib/helpers/populate/leanPopulateMap.js","../symbols":"node_modules/mongoose/lib/helpers/symbols.js","../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/sift/index.js":{"./lib":"node_modules/sift/lib/index.js"},"node_modules/mongoose/lib/helpers/model/castBulkWrite.js":{"../../helpers/discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","../update/applyTimestampsToChildren":"node_modules/mongoose/lib/helpers/update/applyTimestampsToChildren.js","../update/applyTimestampsToUpdate":"node_modules/mongoose/lib/helpers/update/applyTimestampsToUpdate.js","../../cast":"node_modules/mongoose/lib/cast.js","../query/castUpdate":"node_modules/mongoose/lib/helpers/query/castUpdate.js","../setDefaultsOnInsert":"node_modules/mongoose/lib/helpers/setDefaultsOnInsert.js"},"node_modules/mongoose/lib/helpers/populate/createPopulateQueryFilter.js":{"./SkipPopulateValue":"node_modules/mongoose/lib/helpers/populate/SkipPopulateValue.js","../path/parentPaths":"node_modules/mongoose/lib/helpers/path/parentPaths.js"},"node_modules/mongoose/lib/helpers/populate/getModelsMapForPopulate.js":{"../../error/index":"node_modules/mongoose/lib/error/index.js","./SkipPopulateValue":"node_modules/mongoose/lib/helpers/populate/SkipPopulateValue.js","../get":"node_modules/mongoose/lib/helpers/get.js","../discriminator/getDiscriminatorByValue":"node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js","../projection/isPathExcluded":"node_modules/mongoose/lib/helpers/projection/isPathExcluded.js","./getSchemaTypes":"node_modules/mongoose/lib/helpers/populate/getSchemaTypes.js","./getVirtual":"node_modules/mongoose/lib/helpers/populate/getVirtual.js","./lookupLocalFields":"node_modules/mongoose/lib/helpers/populate/lookupLocalFields.js","mpath":"node_modules/mpath/index.js","./normalizeRefPath":"node_modules/mongoose/lib/helpers/populate/normalizeRefPath.js","../../utils":"node_modules/mongoose/lib/utils.js","../symbols":"node_modules/mongoose/lib/helpers/symbols.js","../../schema/symbols":"node_modules/mongoose/lib/schema/symbols.js"},"node_modules/mongoose/lib/helpers/projection/isPathExcluded.js":{"./isDefiningProjection":"node_modules/mongoose/lib/helpers/projection/isDefiningProjection.js"},"node_modules/mongoose/lib/helpers/populate/getSchemaTypes.js":{"../../schema/mixed":"node_modules/mongoose/lib/schema/mixed.js","../get":"node_modules/mongoose/lib/helpers/get.js","./leanPopulateMap":"node_modules/mongoose/lib/helpers/populate/leanPopulateMap.js","mpath":"node_modules/mpath/index.js","../symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/helpers/indexes/isDefaultIdIndex.js":{"../get":"node_modules/mongoose/lib/helpers/get.js"},"node_modules/mongoose/lib/helpers/indexes/isIndexEqual.js":{"../get":"node_modules/mongoose/lib/helpers/get.js","../../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/helpers/populate/removeDeselectedForeignField.js":{"../get":"node_modules/mongoose/lib/helpers/get.js","mpath":"node_modules/mpath/index.js","../projection/parseProjection":"node_modules/mongoose/lib/helpers/projection/parseProjection.js"},"node_modules/mongoose/lib/plugins/removeSubdocs.js":{"../helpers/each":"node_modules/mongoose/lib/helpers/each.js"},"node_modules/mongoose/lib/plugins/saveSubdocs.js":{"../helpers/each":"node_modules/mongoose/lib/helpers/each.js"},"node_modules/mongoose/lib/plugins/trackTransaction.js":{"../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"node_modules/mongoose/lib/plugins/sharding.js":{"../helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js","../utils":"node_modules/mongoose/lib/utils.js"},"node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js":{"../../connection":"node_modules/mongoose/lib/connection.js","../../connectionstate":"node_modules/mongoose/lib/connectionstate.js"},"node_modules/mongoose/lib/connection.js":{"./cursor/ChangeStream":"node_modules/mongoose/lib/cursor/ChangeStream.js","./schema":"node_modules/mongoose/lib/schema.js","./driver":"node_modules/mongoose/lib/driver.js","./connectionstate":"node_modules/mongoose/lib/connectionstate.js","./error/index":"node_modules/mongoose/lib/error/index.js","./promise_provider":"node_modules/mongoose/lib/promise_provider.js","./error/serverSelection":"node_modules/mongoose/lib/error/serverSelection.js","./helpers/schema/applyPlugins":"node_modules/mongoose/lib/helpers/schema/applyPlugins.js","./helpers/promiseOrCallback":"node_modules/mongoose/lib/helpers/promiseOrCallback.js","./helpers/get":"node_modules/mongoose/lib/helpers/get.js","./helpers/immediate":"node_modules/mongoose/lib/helpers/immediate.js","mongodb":"node_modules/mongodb/index.js","../package.json":"node_modules/mongoose/package.json","./utils":"node_modules/mongoose/lib/utils.js","mongodb/lib/core":"node_modules/mongodb/lib/core/index.js","./helpers/symbols":"node_modules/mongoose/lib/helpers/symbols.js"},"backend/node_modules/h5-mongoose/expressMiddleware.js":{"mongoose":"node_modules/mongoose/index.js"},"backend/node_modules/events/index.js":{"lodash":"node_modules/lodash/lodash.js","./models/event":"backend/node_modules/events/models/event.js","./routes":"backend/node_modules/events/routes.js"},"backend/node_modules/modbus/index.js":{"lodash":"node_modules/lodash/lodash.js","csv":"node_modules/csv/lib/index.js","deep-equal":"node_modules/deep-equal/index.js","h5.modbus":"node_modules/h5.modbus/lib/index.js","./Tag":"backend/node_modules/modbus/Tag.js","./virtuals":"backend/node_modules/modbus/virtuals.js","./safeGuards":"backend/node_modules/modbus/safeGuards.js"},"node_modules/csv/lib/index.js":{"csv-generate":"node_modules/csv-generate/lib/index.js","csv-parse":"node_modules/csv-parse/lib/index.js","stream-transform":"node_modules/stream-transform/lib/index.js","csv-stringify":"node_modules/csv-stringify/lib/index.js"},"node_modules/csv-generate/lib/index.js":{},"node_modules/csv-parse/lib/index.js":{},"node_modules/stream-transform/lib/index.js":{},"node_modules/csv-stringify/lib/index.js":{"lodash.get":"node_modules/lodash.get/index.js"},"node_modules/deep-equal/index.js":{"object-keys":"node_modules/object-keys/index.js","is-arguments":"node_modules/is-arguments/index.js","object-is":"node_modules/object-is/index.js","is-regex":"node_modules/is-regex/index.js","regexp.prototype.flags":"node_modules/regexp.prototype.flags/index.js","isarray":"node_modules/isarray/index.js","is-date-object":"node_modules/is-date-object/index.js","which-boxed-primitive":"node_modules/which-boxed-primitive/index.js","get-intrinsic":"node_modules/get-intrinsic/index.js","call-bind/callBound":"node_modules/call-bind/callBound.js","which-collection":"node_modules/which-collection/index.js","es-get-iterator":"node_modules/es-get-iterator/node.js","side-channel":"node_modules/side-channel/index.js","which-typed-array":"node_modules/which-typed-array/index.js","object.assign":"node_modules/object.assign/index.js"},"node_modules/object-keys/index.js":{"./isArguments":"node_modules/object-keys/isArguments.js"},"node_modules/is-arguments/index.js":{"has-tostringtag/shams":"node_modules/has-tostringtag/shams.js","call-bind/callBound":"node_modules/call-bind/callBound.js"},"node_modules/has-tostringtag/shams.js":{"has-symbols/shams":"node_modules/has-symbols/shams.js"},"node_modules/call-bind/callBound.js":{"get-intrinsic":"node_modules/get-intrinsic/index.js","./":"node_modules/call-bind/index.js"},"node_modules/get-intrinsic/index.js":{"has-symbols":"node_modules/has-symbols/index.js","function-bind":"node_modules/function-bind/index.js","has":"node_modules/has/src/index.js"},"node_modules/has-symbols/index.js":{"./shams":"node_modules/has-symbols/shams.js"},"node_modules/function-bind/index.js":{"./implementation":"node_modules/function-bind/implementation.js"},"node_modules/has/src/index.js":{"function-bind":"node_modules/function-bind/index.js"},"node_modules/call-bind/index.js":{"function-bind":"node_modules/function-bind/index.js","get-intrinsic":"node_modules/get-intrinsic/index.js"},"node_modules/object-is/index.js":{"define-properties":"node_modules/define-properties/index.js","call-bind":"node_modules/call-bind/index.js","./implementation":"node_modules/object-is/implementation.js","./polyfill":"node_modules/object-is/polyfill.js","./shim":"node_modules/object-is/shim.js"},"node_modules/define-properties/index.js":{"object-keys":"node_modules/object-keys/index.js"},"node_modules/object-is/polyfill.js":{"./implementation":"node_modules/object-is/implementation.js"},"node_modules/object-is/shim.js":{"./polyfill":"node_modules/object-is/polyfill.js","define-properties":"node_modules/define-properties/index.js"},"node_modules/is-regex/index.js":{"call-bind/callBound":"node_modules/call-bind/callBound.js","has-tostringtag/shams":"node_modules/has-tostringtag/shams.js"},"node_modules/regexp.prototype.flags/index.js":{"define-properties":"node_modules/define-properties/index.js","call-bind":"node_modules/call-bind/index.js","./implementation":"node_modules/regexp.prototype.flags/implementation.js","./polyfill":"node_modules/regexp.prototype.flags/polyfill.js","./shim":"node_modules/regexp.prototype.flags/shim.js"},"node_modules/regexp.prototype.flags/polyfill.js":{"./implementation":"node_modules/regexp.prototype.flags/implementation.js","define-properties":"node_modules/define-properties/index.js"},"node_modules/regexp.prototype.flags/shim.js":{"define-properties":"node_modules/define-properties/index.js","./polyfill":"node_modules/regexp.prototype.flags/polyfill.js"},"node_modules/is-date-object/index.js":{"has-tostringtag/shams":"node_modules/has-tostringtag/shams.js"},"node_modules/which-boxed-primitive/index.js":{"is-string":"node_modules/is-string/index.js","is-number-object":"node_modules/is-number-object/index.js","is-boolean-object":"node_modules/is-boolean-object/index.js","is-symbol":"node_modules/is-symbol/index.js","is-bigint":"node_modules/is-bigint/index.js"},"node_modules/is-string/index.js":{"has-tostringtag/shams":"node_modules/has-tostringtag/shams.js"},"node_modules/is-number-object/index.js":{"has-tostringtag/shams":"node_modules/has-tostringtag/shams.js"},"node_modules/is-boolean-object/index.js":{"call-bind/callBound":"node_modules/call-bind/callBound.js","has-tostringtag/shams":"node_modules/has-tostringtag/shams.js"},"node_modules/is-symbol/index.js":{"has-symbols":"node_modules/has-symbols/index.js"},"node_modules/is-bigint/index.js":{"has-bigints":"node_modules/has-bigints/index.js"},"node_modules/which-collection/index.js":{"is-map":"node_modules/is-map/index.js","is-set":"node_modules/is-set/index.js","is-weakmap":"node_modules/is-weakmap/index.js","is-weakset":"node_modules/is-weakset/index.js"},"node_modules/side-channel/index.js":{"get-intrinsic":"node_modules/get-intrinsic/index.js","call-bind/callBound":"node_modules/call-bind/callBound.js","object-inspect":"node_modules/object-inspect/index.js"},"node_modules/object-inspect/index.js":{"./util.inspect":"node_modules/object-inspect/util.inspect.js"},"node_modules/object-inspect/util.inspect.js":{},"node_modules/which-typed-array/index.js":{"foreach":"node_modules/foreach/index.js","available-typed-arrays":"node_modules/available-typed-arrays/index.js","call-bind/callBound":"node_modules/call-bind/callBound.js","has-tostringtag/shams":"node_modules/has-tostringtag/shams.js","es-abstract/helpers/getOwnPropertyDescriptor":"node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js","is-typed-array":"node_modules/is-typed-array/index.js"},"node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js":{"get-intrinsic":"node_modules/get-intrinsic/index.js"},"node_modules/is-typed-array/index.js":{"foreach":"node_modules/foreach/index.js","available-typed-arrays":"node_modules/available-typed-arrays/index.js","call-bind/callBound":"node_modules/call-bind/callBound.js","has-tostringtag/shams":"node_modules/has-tostringtag/shams.js","es-abstract/helpers/getOwnPropertyDescriptor":"node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js"},"node_modules/object.assign/index.js":{"define-properties":"node_modules/define-properties/index.js","call-bind":"node_modules/call-bind/index.js","./implementation":"node_modules/object.assign/implementation.js","./polyfill":"node_modules/object.assign/polyfill.js","./shim":"node_modules/object.assign/shim.js"},"node_modules/object.assign/implementation.js":{"object-keys":"node_modules/object-keys/index.js","has-symbols/shams":"node_modules/has-symbols/shams.js","call-bind/callBound":"node_modules/call-bind/callBound.js"},"node_modules/object.assign/polyfill.js":{"./implementation":"node_modules/object.assign/implementation.js"},"node_modules/object.assign/shim.js":{"define-properties":"node_modules/define-properties/index.js","./polyfill":"node_modules/object.assign/polyfill.js"},"node_modules/h5.modbus/lib/index.js":{"./Master":"node_modules/h5.modbus/lib/Master.js","./Slave":"node_modules/h5.modbus/lib/Slave.js","./ExceptionCode":"node_modules/h5.modbus/lib/ExceptionCode.js","./FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","./helpers":"node_modules/h5.modbus/lib/helpers.js","./ApplicationDataUnit":"node_modules/h5.modbus/lib/ApplicationDataUnit.js","./RemoteClient":"node_modules/h5.modbus/lib/RemoteClient.js","./Transaction":"node_modules/h5.modbus/lib/Transaction.js","./InvalidFrameError":"node_modules/h5.modbus/lib/InvalidFrameError.js","./ResponseTimeoutError":"node_modules/h5.modbus/lib/ResponseTimeoutError.js","./Transport":"node_modules/h5.modbus/lib/Transport.js","./transports/IpTransport":"node_modules/h5.modbus/lib/transports/IpTransport.js","./transports/AsciiTransport":"node_modules/h5.modbus/lib/transports/AsciiTransport.js","./transports/RtuTransport":"node_modules/h5.modbus/lib/transports/RtuTransport.js","./Connection":"node_modules/h5.modbus/lib/Connection.js","./connections/TcpConnection":"node_modules/h5.modbus/lib/connections/TcpConnection.js","./connections/UdpConnection":"node_modules/h5.modbus/lib/connections/UdpConnection.js","./connections/SerialConnection":"node_modules/h5.modbus/lib/connections/SerialConnection.js","./connections/WebSocketConnection":"node_modules/h5.modbus/lib/connections/WebSocketConnection.js","./Listener":"node_modules/h5.modbus/lib/Listener.js","./listeners/TcpListener":"node_modules/h5.modbus/lib/listeners/TcpListener.js","./listeners/UdpListener":"node_modules/h5.modbus/lib/listeners/UdpListener.js","./listeners/SerialListener":"node_modules/h5.modbus/lib/listeners/SerialListener.js","./listeners/WebSocketListener":"node_modules/h5.modbus/lib/listeners/WebSocketListener.js","./messages":"node_modules/h5.modbus/lib/messages/index.js","./Message":"node_modules/h5.modbus/lib/Message.js","./Request":"node_modules/h5.modbus/lib/Request.js","./Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/Master.js":{"./InvalidFrameError":"node_modules/h5.modbus/lib/InvalidFrameError.js","./ResponseTimeoutError":"node_modules/h5.modbus/lib/ResponseTimeoutError.js","./Transaction":"node_modules/h5.modbus/lib/Transaction.js","./messages":"node_modules/h5.modbus/lib/messages/index.js"},"node_modules/h5.modbus/lib/Transaction.js":{"./messages":"node_modules/h5.modbus/lib/messages/index.js"},"node_modules/h5.modbus/lib/messages/index.js":{"../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","./ReadDiscreteInputsRequest":"node_modules/h5.modbus/lib/messages/ReadDiscreteInputsRequest.js","./ReadDiscreteInputsResponse":"node_modules/h5.modbus/lib/messages/ReadDiscreteInputsResponse.js","./ReadCoilsRequest":"node_modules/h5.modbus/lib/messages/ReadCoilsRequest.js","./ReadCoilsResponse":"node_modules/h5.modbus/lib/messages/ReadCoilsResponse.js","./WriteSingleCoilRequest":"node_modules/h5.modbus/lib/messages/WriteSingleCoilRequest.js","./WriteSingleCoilResponse":"node_modules/h5.modbus/lib/messages/WriteSingleCoilResponse.js","./WriteMultipleCoilsRequest":"node_modules/h5.modbus/lib/messages/WriteMultipleCoilsRequest.js","./WriteMultipleCoilsResponse":"node_modules/h5.modbus/lib/messages/WriteMultipleCoilsResponse.js","./ReadInputRegistersRequest":"node_modules/h5.modbus/lib/messages/ReadInputRegistersRequest.js","./ReadInputRegistersResponse":"node_modules/h5.modbus/lib/messages/ReadInputRegistersResponse.js","./ReadHoldingRegistersRequest":"node_modules/h5.modbus/lib/messages/ReadHoldingRegistersRequest.js","./ReadHoldingRegistersResponse":"node_modules/h5.modbus/lib/messages/ReadHoldingRegistersResponse.js","./WriteSingleRegisterRequest":"node_modules/h5.modbus/lib/messages/WriteSingleRegisterRequest.js","./WriteSingleRegisterResponse":"node_modules/h5.modbus/lib/messages/WriteSingleRegisterResponse.js","./WriteMultipleRegistersRequest":"node_modules/h5.modbus/lib/messages/WriteMultipleRegistersRequest.js","./WriteMultipleRegistersResponse":"node_modules/h5.modbus/lib/messages/WriteMultipleRegistersResponse.js","./ReadWriteMultipleRegistersRequest":"node_modules/h5.modbus/lib/messages/ReadWriteMultipleRegistersRequest.js","./ReadWriteMultipleRegistersResponse":"node_modules/h5.modbus/lib/messages/ReadWriteMultipleRegistersResponse.js","./ExceptionResponse":"node_modules/h5.modbus/lib/messages/ExceptionResponse.js"},"node_modules/h5.modbus/lib/messages/ReadDiscreteInputsRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/helpers.js":{},"node_modules/h5.modbus/lib/Request.js":{"./Message":"node_modules/h5.modbus/lib/Message.js"},"node_modules/h5.modbus/lib/messages/ReadDiscreteInputsResponse.js":{"h5.buffers":"node_modules/h5.buffers/lib/index.js","../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.buffers/lib/index.js":{"./BufferQueueReader":"node_modules/h5.buffers/lib/BufferQueueReader.js","./BufferReader":"node_modules/h5.buffers/lib/BufferReader.js","./BufferBuilder":"node_modules/h5.buffers/lib/BufferBuilder.js"},"node_modules/h5.buffers/lib/BufferQueueReader.js":{"./helpers":"node_modules/h5.buffers/lib/helpers.js"},"node_modules/h5.buffers/lib/BufferReader.js":{"./helpers":"node_modules/h5.buffers/lib/helpers.js"},"node_modules/h5.modbus/lib/Response.js":{"./Message":"node_modules/h5.modbus/lib/Message.js"},"node_modules/h5.modbus/lib/messages/ReadCoilsRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/ReadCoilsResponse.js":{"h5.buffers":"node_modules/h5.buffers/lib/index.js","../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/WriteSingleCoilRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/WriteSingleCoilResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/WriteMultipleCoilsRequest.js":{"h5.buffers":"node_modules/h5.buffers/lib/index.js","../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/WriteMultipleCoilsResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/ReadInputRegistersRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/ReadInputRegistersResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/ReadHoldingRegistersRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/ReadHoldingRegistersResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/WriteSingleRegisterRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/WriteSingleRegisterResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/WriteMultipleRegistersRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/WriteMultipleRegistersResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/ReadWriteMultipleRegistersRequest.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Request":"node_modules/h5.modbus/lib/Request.js"},"node_modules/h5.modbus/lib/messages/ReadWriteMultipleRegistersResponse.js":{"../helpers":"node_modules/h5.modbus/lib/helpers.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js"},"node_modules/h5.modbus/lib/messages/ExceptionResponse.js":{"../ExceptionCode":"node_modules/h5.modbus/lib/ExceptionCode.js","../FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","../Response":"node_modules/h5.modbus/lib/Response.js","../helpers":"node_modules/h5.modbus/lib/helpers.js"},"node_modules/h5.modbus/lib/Slave.js":{"./ExceptionCode":"node_modules/h5.modbus/lib/ExceptionCode.js","./FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","./Response":"node_modules/h5.modbus/lib/Response.js","./messages/ExceptionResponse":"node_modules/h5.modbus/lib/messages/ExceptionResponse.js","./messages":"node_modules/h5.modbus/lib/messages/index.js"},"node_modules/h5.modbus/lib/ApplicationDataUnit.js":{"./InvalidFrameError":"node_modules/h5.modbus/lib/InvalidFrameError.js","./FunctionCode":"node_modules/h5.modbus/lib/FunctionCode.js","./messages":"node_modules/h5.modbus/lib/messages/index.js"},"node_modules/h5.modbus/lib/RemoteClient.js":{},"node_modules/h5.modbus/lib/transports/IpTransport.js":{"h5.buffers":"node_modules/h5.buffers/lib/index.js","../InvalidFrameError":"node_modules/h5.modbus/lib/InvalidFrameError.js","../ApplicationDataUnit":"node_modules/h5.modbus/lib/ApplicationDataUnit.js","../Transport":"node_modules/h5.modbus/lib/Transport.js"},"node_modules/h5.modbus/lib/transports/AsciiTransport.js":{"h5.buffers":"node_modules/h5.buffers/lib/index.js","../InvalidFrameError":"node_modules/h5.modbus/lib/InvalidFrameError.js","../ApplicationDataUnit":"node_modules/h5.modbus/lib/ApplicationDataUnit.js","../Transport":"node_modules/h5.modbus/lib/Transport.js"},"node_modules/h5.modbus/lib/transports/RtuTransport.js":{"h5.buffers":"node_modules/h5.buffers/lib/index.js","../InvalidFrameError":"node_modules/h5.modbus/lib/InvalidFrameError.js","../ApplicationDataUnit":"node_modules/h5.modbus/lib/ApplicationDataUnit.js","../Transport":"node_modules/h5.modbus/lib/Transport.js"},"node_modules/h5.modbus/lib/Connection.js":{},"node_modules/h5.modbus/lib/connections/TcpConnection.js":{"../Connection":"node_modules/h5.modbus/lib/Connection.js"},"node_modules/h5.modbus/lib/connections/UdpConnection.js":{"../Connection":"node_modules/h5.modbus/lib/Connection.js"},"node_modules/h5.modbus/lib/connections/SerialConnection.js":{"../Connection":"node_modules/h5.modbus/lib/Connection.js"},"node_modules/h5.modbus/lib/connections/WebSocketConnection.js":{"../Connection":"node_modules/h5.modbus/lib/Connection.js"},"node_modules/h5.modbus/lib/Listener.js":{},"node_modules/h5.modbus/lib/listeners/TcpListener.js":{"../Listener":"node_modules/h5.modbus/lib/Listener.js","../RemoteClient":"node_modules/h5.modbus/lib/RemoteClient.js","./monkeyPatch":"node_modules/h5.modbus/lib/listeners/monkeyPatch.js"},"node_modules/h5.modbus/lib/listeners/monkeyPatch.js":{},"node_modules/h5.modbus/lib/listeners/UdpListener.js":{"../Listener":"node_modules/h5.modbus/lib/Listener.js","../RemoteClient":"node_modules/h5.modbus/lib/RemoteClient.js"},"node_modules/h5.modbus/lib/listeners/SerialListener.js":{"../Listener":"node_modules/h5.modbus/lib/Listener.js","../RemoteClient":"node_modules/h5.modbus/lib/RemoteClient.js"},"node_modules/h5.modbus/lib/listeners/WebSocketListener.js":{"../Listener":"node_modules/h5.modbus/lib/Listener.js","../RemoteClient":"node_modules/h5.modbus/lib/RemoteClient.js","./monkeyPatch":"node_modules/h5.modbus/lib/listeners/monkeyPatch.js"},"backend/node_modules/modbus/Tag.js":{"lodash":"node_modules/lodash/lodash.js","deep-equal":"node_modules/deep-equal/index.js","./deltaUtils":"backend/node_modules/modbus/deltaUtils.js","./scaleFunctions":"backend/node_modules/modbus/scaleFunctions.js"},"backend/node_modules/modbus/scaleFunctions.js":{"lodash":"node_modules/lodash/lodash.js"},"backend/node_modules/messenger/server.js":{"lodash":"node_modules/lodash/lodash.js","axon":"node_modules/axon/index.js","amp-message":"node_modules/amp-message/index.js"},"node_modules/axon/index.js":{"./lib":"node_modules/axon/lib/index.js"},"node_modules/axon/lib/index.js":{"./sockets/pub-emitter":"node_modules/axon/lib/sockets/pub-emitter.js","./sockets/sub-emitter":"node_modules/axon/lib/sockets/sub-emitter.js","./sockets/push":"node_modules/axon/lib/sockets/push.js","./sockets/pull":"node_modules/axon/lib/sockets/pull.js","./sockets/pub":"node_modules/axon/lib/sockets/pub.js","./sockets/sub":"node_modules/axon/lib/sockets/sub.js","./sockets/req":"node_modules/axon/lib/sockets/req.js","./sockets/rep":"node_modules/axon/lib/sockets/rep.js","./sockets/sock":"node_modules/axon/lib/sockets/sock.js"},"node_modules/axon/lib/sockets/pub-emitter.js":{"./pub":"node_modules/axon/lib/sockets/pub.js"},"node_modules/axon/lib/sockets/pub.js":{"./sock":"node_modules/axon/lib/sockets/sock.js","../utils":"node_modules/axon/lib/utils.js"},"node_modules/axon/lib/sockets/sock.js":{"configurable":"node_modules/configurable/index.js","debug":"node_modules/debug/src/index.js","amp-message":"node_modules/amp-message/index.js","amp":"node_modules/amp/index.js"},"node_modules/configurable/index.js":{"./lib/configurable":"node_modules/configurable/lib/configurable.js"},"node_modules/debug/src/index.js":{"./node.js":"node_modules/debug/src/node.js"},"node_modules/debug/src/node.js":{"supports-color":"C:/Workspace/node_modules/supports-color/index.js","./common":"node_modules/debug/src/common.js"},"node_modules/debug/src/common.js":{"ms":"node_modules/ms/index.js"},"node_modules/amp-message/index.js":{"amp":"node_modules/amp/index.js"},"node_modules/amp/index.js":{"./lib/stream":"node_modules/amp/lib/stream.js","./lib/encode":"node_modules/amp/lib/encode.js","./lib/decode":"node_modules/amp/lib/decode.js"},"node_modules/amp/lib/stream.js":{"./encode":"node_modules/amp/lib/encode.js"},"node_modules/axon/lib/sockets/sub-emitter.js":{"amp-message":"node_modules/amp-message/index.js","./sub":"node_modules/axon/lib/sockets/sub.js"},"node_modules/axon/lib/sockets/sub.js":{"debug":"node_modules/debug/src/index.js","escape-regexp":"node_modules/escape-regexp/index.js","amp-message":"node_modules/amp-message/index.js","./sock":"node_modules/axon/lib/sockets/sock.js"},"node_modules/axon/lib/sockets/push.js":{"../plugins/round-robin":"node_modules/axon/lib/plugins/round-robin.js","../plugins/queue":"node_modules/axon/lib/plugins/queue.js","./sock":"node_modules/axon/lib/sockets/sock.js"},"node_modules/axon/lib/plugins/round-robin.js":{"../utils":"node_modules/axon/lib/utils.js"},"node_modules/axon/lib/plugins/queue.js":{"debug":"node_modules/debug/src/index.js"},"node_modules/axon/lib/sockets/pull.js":{"./sock":"node_modules/axon/lib/sockets/sock.js"},"node_modules/axon/lib/sockets/req.js":{"debug":"node_modules/debug/src/index.js","../plugins/queue":"node_modules/axon/lib/plugins/queue.js","../utils":"node_modules/axon/lib/utils.js","amp-message":"node_modules/amp-message/index.js","./sock":"node_modules/axon/lib/sockets/sock.js"},"node_modules/axon/lib/sockets/rep.js":{"../utils":"node_modules/axon/lib/utils.js","debug":"node_modules/debug/src/index.js","amp-message":"node_modules/amp-message/index.js","./sock":"node_modules/axon/lib/sockets/sock.js"},"backend/node_modules/messenger/client.js":{"lodash":"node_modules/lodash/lodash.js","axon":"node_modules/axon/index.js","amp-message":"node_modules/amp-message/index.js"},"backend/node_modules/horti-program/index.js":{"lodash":"node_modules/lodash/lodash.js","./Watchdog":"backend/node_modules/horti-program/Watchdog.js","./ZoneManager":"backend/node_modules/horti-program/ZoneManager.js","horti-tests/models/hortiTest":"backend/node_modules/horti-tests/models/hortiTest.js"},"backend/node_modules/horti-program/Watchdog.js":{"./ControlUnit":"backend/node_modules/horti-program/ControlUnit.js"},"backend/node_modules/horti-program/ControlUnit.js":{"lodash":"node_modules/lodash/lodash.js","util/jsonDeepEqual":"backend/node_modules/util/jsonDeepEqual.js","./Lock":"backend/node_modules/horti-program/Lock.js"},"backend/node_modules/horti-program/ZoneManager.js":{"lodash":"node_modules/lodash/lodash.js","h5.step":"node_modules/h5.step/lib/index.js","./ControlUnit":"backend/node_modules/horti-program/ControlUnit.js","../../../config/horti-frontend":"config/horti-frontend.js"},"config/horti-frontend.js":{"./horti-mongodb":"config/horti-mongodb.js","./horti-common":"config/horti-common.js","../backend/routes/core":"backend/routes/core.js"},"backend/routes/core.js":{"lodash":"node_modules/lodash/lodash.js"},"backend/node_modules/modbus/virtuals.js":{"lodash":"node_modules/lodash/lodash.js"}},"sources":{"backend/helpers.js":"\"use strict\";","node_modules/moment/moment.js":"!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){\"use strict\";var e,t;function n(){return e.apply(null,arguments)}function s(e){return e instanceof Array||\"[object Array]\"===Object.prototype.toString.call(e)}function i(e){return null!=e&&\"[object Object]\"===Object.prototype.toString.call(e)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(r(e,t))return!1;return!0}function o(e){return void 0===e}function u(e){return\"number\"==typeof e||\"[object Number]\"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||\"[object Date]\"===Object.prototype.toString.call(e)}function h(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function d(e,t){for(var n in t)r(t,n)&&(e[n]=t[n]);return r(t,\"toString\")&&(e.toString=t.toString),r(t,\"valueOf\")&&(e.valueOf=t.valueOf),e}function c(e,t,n,s){return Tt(e,t,n,s,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var n=f(e),s=t.call(n.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&s);if(e._strict&&(i=i&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function _(e){var t=c(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),s=n.length>>>0;for(t=0;t<s;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=n.momentProperties=[],g=!1;function w(e,t){var n,s,i;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)o(i=t[s=y[n]])||(e[s]=i);return e}function p(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,n.updateOffset(this),g=!1)}function v(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function k(e){!1===n.suppressDeprecationWarnings&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"Deprecation warning: \"+e)}function M(e,t){var s=!0;return d(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),s){var i,a,o,u=[];for(a=0;a<arguments.length;a++){if(i=\"\",\"object\"==typeof arguments[a]){for(o in i+=\"\\n[\"+a+\"] \",arguments[0])r(arguments[0],o)&&(i+=o+\": \"+arguments[0][o]+\", \");i=i.slice(0,-2)}else i=arguments[a];u.push(i)}k(e+\"\\nArguments: \"+Array.prototype.slice.call(u).join(\"\")+\"\\n\"+(new Error).stack),s=!1}return t.apply(this,arguments)},t)}var D,S={};function Y(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),S[e]||(k(t),S[e]=!0)}function O(e){return\"undefined\"!=typeof Function&&e instanceof Function||\"[object Function]\"===Object.prototype.toString.call(e)}function b(e,t){var n,s=d({},e);for(n in t)r(t,n)&&(i(e[n])&&i(t[n])?(s[n]={},d(s[n],e[n]),d(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)r(e,n)&&!r(t,n)&&i(e[n])&&(s[n]=d({},s[n]));return s}function x(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,D=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)r(e,t)&&n.push(t);return n};function T(e,t,n){var s=\"\"+Math.abs(e),i=t-s.length;return(e>=0?n?\"+\":\"\":\"-\")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i=s;\"string\"==typeof s&&(i=function(){return this[s]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(e){var t,n,s,i=e.match(N);for(t=0,n=i.length;t<n;t++)W[i[t]]?i[t]=W[i[t]]:i[t]=(s=i[t]).match(/\\[[\\s\\S]/)?s.replace(/^\\[|\\]$/g,\"\"):s.replace(/\\\\/g,\"\");return function(t){var s,r=\"\";for(s=0;s<n;s++)r+=O(i[s])?i[s].call(t,e):i[s];return r}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,n-=1;return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+\"s\"]=F[t]=e}function V(e){return\"string\"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e)r(e,n)&&(t=V(n))&&(s[t]=e[n]);return s}var E={};function A(e,t){E[e]=t}function j(e){return e%4==0&&e%100!=0||e%400==0}function I(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=I(t)),n}function z(e,t){return function(s){return null!=s?(q(this,e,s),n.updateOffset(this,t),this):$(this,e)}}function $(e,t){return e.isValid()?e._d[\"get\"+(e._isUTC?\"UTC\":\"\")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&(\"FullYear\"===t&&j(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d[\"set\"+(e._isUTC?\"UTC\":\"\")+t](n,e.month(),Te(n,e.month()))):e._d[\"set\"+(e._isUTC?\"UTC\":\"\")+t](n))}var B,J=/\\d/,Q=/\\d\\d/,X=/\\d{3}/,K=/\\d{4}/,ee=/[+-]?\\d{6}/,te=/\\d\\d?/,ne=/\\d\\d\\d\\d?/,se=/\\d\\d\\d\\d\\d\\d?/,ie=/\\d{1,3}/,re=/\\d{1,4}/,ae=/[+-]?\\d{1,6}/,oe=/\\d+/,ue=/[+-]?\\d+/,le=/Z|[+-]\\d\\d:?\\d\\d/gi,he=/Z|[+-]\\d\\d(?::?\\d\\d)?/gi,de=/[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i;function ce(e,t,n){B[e]=O(t)?t:function(e,s){return e&&n?n:t}}function fe(e,t){return r(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace(\"\\\\\",\"\").replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function me(e){return e.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")}B={};var _e={};function ye(e,t){var n,s=t;for(\"string\"==typeof e&&(e=[e]),u(t)&&(s=function(e,n){n[t]=Z(e)}),n=0;n<e.length;n++)_e[e[n]]=s}function ge(e,t){ye(e,function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)})}function we(e,t,n){null!=t&&r(_e,e)&&_e[e](t,n._a,n,e)}var pe,ve=0,ke=1,Me=2,De=3,Se=4,Ye=5,Oe=6,be=7,xe=8;function Te(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?j(e)?29:28:31-s%7%2}pe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C(\"M\",[\"MM\",2],\"Mo\",function(){return this.month()+1}),C(\"MMM\",0,0,function(e){return this.localeData().monthsShort(this,e)}),C(\"MMMM\",0,0,function(e){return this.localeData().months(this,e)}),L(\"month\",\"M\"),A(\"month\",8),ce(\"M\",te),ce(\"MM\",te,Q),ce(\"MMM\",function(e,t){return t.monthsShortRegex(e)}),ce(\"MMMM\",function(e,t){return t.monthsRegex(e)}),ye([\"M\",\"MM\"],function(e,t){t[ke]=Z(e)-1}),ye([\"MMM\",\"MMMM\"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ke]=i:f(n).invalidMonth=e});var Ne=\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),Pe=\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),Re=/D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,We=de,Ce=de;function Ue(e,t){var n;if(!e.isValid())return e;if(\"string\"==typeof t)if(/^\\d+$/.test(t))t=Z(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Te(e.year(),t)),e._d[\"set\"+(e._isUTC?\"UTC\":\"\")+\"Month\"](t,n),e}function He(e){return null!=e?(Ue(this,e),n.updateOffset(this,!0),this):$(this,\"Month\")}function Fe(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=c([2e3,t]),s.push(this.monthsShort(n,\"\")),i.push(this.months(n,\"\")),r.push(this.months(n,\"\")),r.push(this.monthsShort(n,\"\"));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=me(s[t]),i[t]=me(i[t]);for(t=0;t<24;t++)r[t]=me(r[t]);this._monthsRegex=new RegExp(\"^(\"+r.join(\"|\")+\")\",\"i\"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(\"^(\"+i.join(\"|\")+\")\",\"i\"),this._monthsShortStrictRegex=new RegExp(\"^(\"+s.join(\"|\")+\")\",\"i\")}function Le(e){return j(e)?366:365}C(\"Y\",0,0,function(){var e=this.year();return e<=9999?T(e,4):\"+\"+e}),C(0,[\"YY\",2],0,function(){return this.year()%100}),C(0,[\"YYYY\",4],0,\"year\"),C(0,[\"YYYYY\",5],0,\"year\"),C(0,[\"YYYYYY\",6,!0],0,\"year\"),L(\"year\",\"y\"),A(\"year\",1),ce(\"Y\",ue),ce(\"YY\",te,Q),ce(\"YYYY\",re,K),ce(\"YYYYY\",ae,ee),ce(\"YYYYYY\",ae,ee),ye([\"YYYYY\",\"YYYYYY\"],ve),ye(\"YYYY\",function(e,t){t[ve]=2===e.length?n.parseTwoDigitYear(e):Z(e)}),ye(\"YY\",function(e,t){t[ve]=n.parseTwoDigitYear(e)}),ye(\"Y\",function(e,t){t[ve]=parseInt(e,10)}),n.parseTwoDigitYear=function(e){return Z(e)+(Z(e)>68?1900:2e3)};var Ve=z(\"FullYear\",!0);function Ge(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ee(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ae(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ee(e,s,i);return o<=0?a=Le(r=e-1)+o:o>Le(e)?(r=e+1,a=o-Le(e)):(r=e,a=o),{year:r,dayOfYear:a}}function je(e,t,n){var s,i,r=Ee(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ie(i=e.year()-1,t,n):a>Ie(e.year(),t,n)?(s=a-Ie(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ie(e,t,n){var s=Ee(e,t,n),i=Ee(e+1,t,n);return(Le(e)-s+i)/7}C(\"w\",[\"ww\",2],\"wo\",\"week\"),C(\"W\",[\"WW\",2],\"Wo\",\"isoWeek\"),L(\"week\",\"w\"),L(\"isoWeek\",\"W\"),A(\"week\",5),A(\"isoWeek\",5),ce(\"w\",te),ce(\"ww\",te,Q),ce(\"W\",te),ce(\"WW\",te,Q),ge([\"w\",\"ww\",\"W\",\"WW\"],function(e,t,n,s){t[s.substr(0,1)]=Z(e)});function Ze(e,t){return e.slice(t,7).concat(e.slice(0,t))}C(\"d\",0,\"do\",\"day\"),C(\"dd\",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),C(\"ddd\",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C(\"dddd\",0,0,function(e){return this.localeData().weekdays(this,e)}),C(\"e\",0,0,\"weekday\"),C(\"E\",0,0,\"isoWeekday\"),L(\"day\",\"d\"),L(\"weekday\",\"e\"),L(\"isoWeekday\",\"E\"),A(\"day\",11),A(\"weekday\",11),A(\"isoWeekday\",11),ce(\"d\",te),ce(\"e\",te),ce(\"E\",te),ce(\"dd\",function(e,t){return t.weekdaysMinRegex(e)}),ce(\"ddd\",function(e,t){return t.weekdaysShortRegex(e)}),ce(\"dddd\",function(e,t){return t.weekdaysRegex(e)}),ge([\"dd\",\"ddd\",\"dddd\"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),ge([\"d\",\"e\",\"E\"],function(e,t,n,s){t[s]=Z(e)});var ze=\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),$e=\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),qe=\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),Be=de,Je=de,Qe=de;function Xe(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),s=me(this.weekdaysMin(n,\"\")),i=me(this.weekdaysShort(n,\"\")),r=me(this.weekdays(n,\"\")),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);a.sort(e),o.sort(e),u.sort(e),l.sort(e),this._weekdaysRegex=new RegExp(\"^(\"+l.join(\"|\")+\")\",\"i\"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(\"^(\"+u.join(\"|\")+\")\",\"i\"),this._weekdaysShortStrictRegex=new RegExp(\"^(\"+o.join(\"|\")+\")\",\"i\"),this._weekdaysMinStrictRegex=new RegExp(\"^(\"+a.join(\"|\")+\")\",\"i\")}function Ke(){return this.hours()%12||12}function et(e,t){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function tt(e,t){return t._meridiemParse}C(\"H\",[\"HH\",2],0,\"hour\"),C(\"h\",[\"hh\",2],0,Ke),C(\"k\",[\"kk\",2],0,function(){return this.hours()||24}),C(\"hmm\",0,0,function(){return\"\"+Ke.apply(this)+T(this.minutes(),2)}),C(\"hmmss\",0,0,function(){return\"\"+Ke.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),C(\"Hmm\",0,0,function(){return\"\"+this.hours()+T(this.minutes(),2)}),C(\"Hmmss\",0,0,function(){return\"\"+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),et(\"a\",!0),et(\"A\",!1),L(\"hour\",\"h\"),A(\"hour\",13),ce(\"a\",tt),ce(\"A\",tt),ce(\"H\",te),ce(\"h\",te),ce(\"k\",te),ce(\"HH\",te,Q),ce(\"hh\",te,Q),ce(\"kk\",te,Q),ce(\"hmm\",ne),ce(\"hmmss\",se),ce(\"Hmm\",ne),ce(\"Hmmss\",se),ye([\"H\",\"HH\"],De),ye([\"k\",\"kk\"],function(e,t,n){var s=Z(e);t[De]=24===s?0:s}),ye([\"a\",\"A\"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ye([\"h\",\"hh\"],function(e,t,n){t[De]=Z(e),f(n).bigHour=!0}),ye(\"hmm\",function(e,t,n){var s=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s)),f(n).bigHour=!0}),ye(\"hmmss\",function(e,t,n){var s=e.length-4,i=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s,2)),t[Ye]=Z(e.substr(i)),f(n).bigHour=!0}),ye(\"Hmm\",function(e,t,n){var s=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s))}),ye(\"Hmmss\",function(e,t,n){var s=e.length-4,i=e.length-2;t[De]=Z(e.substr(0,s)),t[Se]=Z(e.substr(s,2)),t[Ye]=Z(e.substr(i))});var nt=z(\"Hours\",!0);var st,it={calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},longDateFormat:{LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"},invalidDate:\"Invalid date\",ordinal:\"%d\",dayOfMonthOrdinalParse:/\\d{1,2}/,relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",ss:\"%d seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",w:\"a week\",ww:\"%d weeks\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},months:Ne,monthsShort:Pe,week:{dow:0,doy:6},weekdays:ze,weekdaysMin:qe,weekdaysShort:$e,meridiemParse:/[ap]\\.?m?\\.?/i},rt={},at={};function ot(e,t){var n,s=Math.min(e.length,t.length);for(n=0;n<s;n+=1)if(e[n]!==t[n])return n;return s}function ut(e){return e?e.toLowerCase().replace(\"_\",\"-\"):e}function lt(e){var t=null;if(void 0===rt[e]&&\"undefined\"!=typeof module&&module&&module.exports)try{t=st._abbr,require(\"./locale/\"+e),ht(t)}catch(t){rt[e]=null}return rt[e]}function ht(e,t){var n;return e&&((n=o(t)?ct(e):dt(e,t))?st=n:\"undefined\"!=typeof console&&console.warn&&console.warn(\"Locale \"+e+\" not found. Did you forget to load it?\")),st._abbr}function dt(e,t){if(null!==t){var n,s=it;if(t.abbr=e,null!=rt[e])Y(\"defineLocaleOverride\",\"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.\"),s=rt[e]._config;else if(null!=t.parentLocale)if(null!=rt[t.parentLocale])s=rt[t.parentLocale]._config;else{if(null==(n=lt(t.parentLocale)))return at[t.parentLocale]||(at[t.parentLocale]=[]),at[t.parentLocale].push({name:e,config:t}),null;s=n._config}return rt[e]=new x(b(s,t)),at[e]&&at[e].forEach(function(e){dt(e.name,e.config)}),ht(e),rt[e]}return delete rt[e],null}function ct(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return st;if(!s(e)){if(t=lt(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=ut(e[r]).split(\"-\")).length,n=(n=ut(e[r+1]))?n.split(\"-\"):null;t>0;){if(s=lt(i.slice(0,t).join(\"-\")))return s;if(n&&n.length>=t&&ot(i,n)>=t-1)break;t--}r++}return st}(e)}function ft(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ke]<0||n[ke]>11?ke:n[Me]<1||n[Me]>Te(n[ve],n[ke])?Me:n[De]<0||n[De]>24||24===n[De]&&(0!==n[Se]||0!==n[Ye]||0!==n[Oe])?De:n[Se]<0||n[Se]>59?Se:n[Ye]<0||n[Ye]>59?Ye:n[Oe]<0||n[Oe]>999?Oe:-1,f(e)._overflowDayOfYear&&(t<ve||t>Me)&&(t=Me),f(e)._overflowWeeks&&-1===t&&(t=be),f(e)._overflowWeekday&&-1===t&&(t=xe),f(e).overflow=t),e}var mt=/^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,_t=/^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d|))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,yt=/Z|[+-]\\d\\d(?::?\\d\\d)?/,gt=[[\"YYYYYY-MM-DD\",/[+-]\\d{6}-\\d\\d-\\d\\d/],[\"YYYY-MM-DD\",/\\d{4}-\\d\\d-\\d\\d/],[\"GGGG-[W]WW-E\",/\\d{4}-W\\d\\d-\\d/],[\"GGGG-[W]WW\",/\\d{4}-W\\d\\d/,!1],[\"YYYY-DDD\",/\\d{4}-\\d{3}/],[\"YYYY-MM\",/\\d{4}-\\d\\d/,!1],[\"YYYYYYMMDD\",/[+-]\\d{10}/],[\"YYYYMMDD\",/\\d{8}/],[\"GGGG[W]WWE\",/\\d{4}W\\d{3}/],[\"GGGG[W]WW\",/\\d{4}W\\d{2}/,!1],[\"YYYYDDD\",/\\d{7}/],[\"YYYYMM\",/\\d{6}/,!1],[\"YYYY\",/\\d{4}/,!1]],wt=[[\"HH:mm:ss.SSSS\",/\\d\\d:\\d\\d:\\d\\d\\.\\d+/],[\"HH:mm:ss,SSSS\",/\\d\\d:\\d\\d:\\d\\d,\\d+/],[\"HH:mm:ss\",/\\d\\d:\\d\\d:\\d\\d/],[\"HH:mm\",/\\d\\d:\\d\\d/],[\"HHmmss.SSSS\",/\\d\\d\\d\\d\\d\\d\\.\\d+/],[\"HHmmss,SSSS\",/\\d\\d\\d\\d\\d\\d,\\d+/],[\"HHmmss\",/\\d\\d\\d\\d\\d\\d/],[\"HHmm\",/\\d\\d\\d\\d/],[\"HH\",/\\d\\d/]],pt=/^\\/?Date\\((-?\\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/,kt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Mt(e){var t,n,s,i,r,a,o=e._i,u=mt.exec(o)||_t.exec(o);if(u){for(f(e).iso=!0,t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[1])){i=gt[t][0],s=!1!==gt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=wt.length;t<n;t++)if(wt[t][1].exec(u[3])){r=(u[2]||\" \")+wt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!yt.exec(u[4]))return void(e._isValid=!1);a=\"Z\"}e._f=i+(r||\"\")+(a||\"\"),bt(e)}else e._isValid=!1}function Dt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);if(t<=49)return 2e3+t;if(t<=999)return 1900+t;return t}(e),Pe.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function St(e){var t,n=vt.exec(e._i.replace(/\\([^)]*\\)|[\\n\\t]/g,\" \").replace(/(\\s\\s+)/g,\" \").replace(/^\\s\\s*/,\"\").replace(/\\s\\s*$/,\"\"));if(n){if(t=Dt(n[4],n[3],n[2],n[5],n[6],n[7]),!function(e,t,n){return!e||$e.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}(n[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return kt[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(n[8],n[9],n[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function Yt(e,t,n){return null!=e?e:null!=t?t:n}function Ot(e){var t,s,i,r,a,o=[];if(!e._d){for(i=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Me]&&null==e._a[ke]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=Yt(t.GG,e._a[ve],je(Nt(),1,4).year),s=Yt(t.W,1),((i=Yt(t.E,1))<1||i>7)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=je(Nt(),r,a),n=Yt(t.gg,e._a[ve],l.year),s=Yt(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(u=!0)):i=r);s<1||s>Ie(n,r,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(o=Ae(n,s,i,r,a),e._a[ve]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(a=Yt(e._a[ve],i[ve]),(e._dayOfYear>Le(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),s=Ge(a,0,e._dayOfYear),e._a[ke]=s.getUTCMonth(),e._a[Me]=s.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&0===e._a[Oe]&&(e._nextDay=!0,e._a[De]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,o),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[De]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(f(e).weekdayMismatch=!0)}}function bt(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,s,i,r,a,o,u=\"\"+e._i,l=u.length,h=0;for(i=H(e._f,e._locale).match(N)||[],t=0;t<i.length;t++)r=i[t],(s=(u.match(fe(r,e))||[])[0])&&((a=u.substr(0,u.indexOf(s))).length>0&&f(e).unusedInput.push(a),u=u.slice(u.indexOf(s)+s.length),h+=s.length),W[r]?(s?f(e).empty=!1:f(e).unusedTokens.push(r),we(r,s,e)):e._strict&&!s&&f(e).unusedTokens.push(r);f(e).charsLeftOver=l-h,u.length>0&&f(e).unusedInput.push(u),e._a[De]<=12&&!0===f(e).bigHour&&e._a[De]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[De]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}(e._locale,e._a[De],e._meridiem),null!==(o=f(e).era)&&(e._a[ve]=e._locale.erasConvertYear(o,e._a[ve])),Ot(e),ft(e)}else St(e);else Mt(e)}function xt(e){var t=e._i,r=e._f;return e._locale=e._locale||ct(e._l),null===t||void 0===r&&\"\"===t?_({nullInput:!0}):(\"string\"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new p(ft(t)):(l(t)?e._d=t:s(r)?function(e){var t,n,s,i,r,a,o=!1;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)r=0,a=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],bt(t),m(t)&&(a=!0),r+=f(t).charsLeftOver,r+=10*f(t).unusedTokens.length,f(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));d(e,n||t)}(e):r?bt(e):function(e){var t=e._i;o(t)?e._d=new Date(n.now()):l(t)?e._d=new Date(t.valueOf()):\"string\"==typeof t?function(e){var t=pt.exec(e._i);null===t?(Mt(e),!1===e._isValid&&(delete e._isValid,St(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):s(t)?(e._a=h(t.slice(0),function(e){return parseInt(e,10)}),Ot(e)):i(t)?function(e){if(!e._d){var t=G(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ot(e)}}(e):u(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Tt(e,t,n,r,o){var u,l={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(i(e)&&a(e)||s(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=n,l._i=e,l._f=t,l._strict=r,(u=new p(ft(xt(l))))._nextDay&&(u.add(1,\"d\"),u._nextDay=void 0),u}function Nt(e,t,n,s){return Tt(e,t,n,s,!1)}n.createFromInputFallback=M(\"value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.\",function(e){e._d=new Date(e._i+(e._useUTC?\" UTC\":\"\"))}),n.ISO_8601=function(){},n.RFC_2822=function(){};var Pt=M(\"moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Rt=M(\"moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/\",function(){var e=Nt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function Wt(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Nt();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Ct=[\"year\",\"quarter\",\"month\",\"week\",\"day\",\"hour\",\"minute\",\"second\",\"millisecond\"];function Ut(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,u=t.hour||0,l=t.minute||0,h=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,s=!1;for(t in e)if(r(e,t)&&(-1===pe.call(Ct,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Ct.length;++n)if(e[Ct[n]]){if(s)return!1;parseFloat(e[Ct[n]])!==Z(e[Ct[n]])&&(s=!0)}return!0}(t),this._milliseconds=+d+1e3*h+6e4*l+1e3*u*60*60,this._days=+o+7*a,this._months=+i+3*s+12*n,this._data={},this._locale=ct(),this._bubble()}function Ht(e){return e instanceof Ut}function Ft(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Lt(e,t){C(e,0,0,function(){var e=this.utcOffset(),n=\"+\";return e<0&&(e=-e,n=\"-\"),n+T(~~(e/60),2)+t+T(~~e%60,2)})}Lt(\"Z\",\":\"),Lt(\"ZZ\",\"\"),ce(\"Z\",he),ce(\"ZZ\",he),ye([\"Z\",\"ZZ\"],function(e,t,n){n._useUTC=!0,n._tzm=Gt(he,e)});var Vt=/([\\+\\-]|\\d\\d)/gi;function Gt(e,t){var n,s,i=(t||\"\").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+\"\").match(Vt)||[\"-\",0,0])[1]+Z(n[2]))?0:\"+\"===n[0]?s:-s}function Et(e,t){var s,i;return t._isUTC?(s=t.clone(),i=(v(e)||l(e)?e.valueOf():Nt(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),n.updateOffset(s,!1),s):Nt(e).local()}function At(e){return-Math.round(e._d.getTimezoneOffset())}function jt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}n.updateOffset=function(){};var It=/^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,Zt=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function zt(e,t){var n,s,i,a=e,o=null;return Ht(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(o=It.exec(e))?(n=\"-\"===o[1]?-1:1,a={y:0,d:Z(o[Me])*n,h:Z(o[De])*n,m:Z(o[Se])*n,s:Z(o[Ye])*n,ms:Z(Ft(1e3*o[Oe]))*n}):(o=Zt.exec(e))?(n=\"-\"===o[1]?-1:1,a={y:$t(o[2],n),M:$t(o[3],n),w:$t(o[4],n),d:$t(o[5],n),h:$t(o[6],n),m:$t(o[7],n),s:$t(o[8],n)}):null==a?a={}:\"object\"==typeof a&&(\"from\"in a||\"to\"in a)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Et(t,e),e.isBefore(t)?n=qt(e,t):((n=qt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Nt(a.from),Nt(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),s=new Ut(a),Ht(e)&&r(e,\"_locale\")&&(s._locale=e._locale),Ht(e)&&r(e,\"_isValid\")&&(s._isValid=e._isValid),s}function $t(e,t){var n=e&&parseFloat(e.replace(\",\",\".\"));return(isNaN(n)?0:n)*t}function qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,\"M\").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,\"M\"),n}function Bt(e,t){return function(n,s){var i;return null===s||isNaN(+s)||(Y(t,\"moment().\"+t+\"(period, number) is deprecated. Please use moment().\"+t+\"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.\"),i=n,n=s,s=i),Jt(this,zt(n,s),e),this}}function Jt(e,t,s,i){var r=t._milliseconds,a=Ft(t._days),o=Ft(t._months);e.isValid()&&(i=null==i||i,o&&Ue(e,$(e,\"Month\")+o*s),a&&q(e,\"Date\",$(e,\"Date\")+a*s),r&&e._d.setTime(e._d.valueOf()+r*s),i&&n.updateOffset(e,a||o))}zt.fn=Ut.prototype,zt.invalid=function(){return zt(NaN)};var Qt=Bt(1,\"add\"),Xt=Bt(-1,\"subtract\");function Kt(e){return\"string\"==typeof e||e instanceof String}function en(e){return v(e)||l(e)||Kt(e)||u(e)||function(e){var t=s(e),n=!1;t&&(n=0===e.filter(function(t){return!u(t)&&Kt(e)}).length);return t&&n}(e)||function(e){var t,n=i(e)&&!a(e),s=!1,o=[\"years\",\"year\",\"y\",\"months\",\"month\",\"M\",\"days\",\"day\",\"d\",\"dates\",\"date\",\"D\",\"hours\",\"hour\",\"h\",\"minutes\",\"minute\",\"m\",\"seconds\",\"second\",\"s\",\"milliseconds\",\"millisecond\",\"ms\"];for(t=0;t<o.length;t+=1)s=s||r(e,o[t]);return n&&s}(e)||null===e||void 0===e}function tn(e,t){if(e.date()<t.date())return-tn(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,\"months\");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,\"months\")):(t-s)/(e.clone().add(n+1,\"months\")-s)))||0}function nn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ct(e))&&(this._locale=t),this)}n.defaultFormat=\"YYYY-MM-DDTHH:mm:ssZ\",n.defaultFormatUtc=\"YYYY-MM-DDTHH:mm:ss[Z]\";var sn=M(\"moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.\",function(e){return void 0===e?this.localeData():this.locale(e)});function rn(){return this._locale}var an=1e3,on=60*an,un=60*on,ln=3506328*un;function hn(e,t){return(e%t+t)%t}function dn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-ln:new Date(e,t,n).valueOf()}function cn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-ln:Date.UTC(e,t,n)}function fn(e,t){return t.erasAbbrRegex(e)}function mn(){var e,t,n=[],s=[],i=[],r=[],a=this.eras();for(e=0,t=a.length;e<t;++e)s.push(me(a[e].name)),n.push(me(a[e].abbr)),i.push(me(a[e].narrow)),r.push(me(a[e].name)),r.push(me(a[e].abbr)),r.push(me(a[e].narrow));this._erasRegex=new RegExp(\"^(\"+r.join(\"|\")+\")\",\"i\"),this._erasNameRegex=new RegExp(\"^(\"+s.join(\"|\")+\")\",\"i\"),this._erasAbbrRegex=new RegExp(\"^(\"+n.join(\"|\")+\")\",\"i\"),this._erasNarrowRegex=new RegExp(\"^(\"+i.join(\"|\")+\")\",\"i\")}function _n(e,t){C(0,[e,e.length],0,t)}function yn(e,t,n,s,i){var r;return null==e?je(this,s,i).year:(t>(r=Ie(e,s,i))&&(t=r),function(e,t,n,s,i){var r=Ae(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C(\"N\",0,0,\"eraAbbr\"),C(\"NN\",0,0,\"eraAbbr\"),C(\"NNN\",0,0,\"eraAbbr\"),C(\"NNNN\",0,0,\"eraName\"),C(\"NNNNN\",0,0,\"eraNarrow\"),C(\"y\",[\"y\",1],\"yo\",\"eraYear\"),C(\"y\",[\"yy\",2],0,\"eraYear\"),C(\"y\",[\"yyy\",3],0,\"eraYear\"),C(\"y\",[\"yyyy\",4],0,\"eraYear\"),ce(\"N\",fn),ce(\"NN\",fn),ce(\"NNN\",fn),ce(\"NNNN\",function(e,t){return t.erasNameRegex(e)}),ce(\"NNNNN\",function(e,t){return t.erasNarrowRegex(e)}),ye([\"N\",\"NN\",\"NNN\",\"NNNN\",\"NNNNN\"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?f(n).era=i:f(n).invalidEra=e}),ce(\"y\",oe),ce(\"yy\",oe),ce(\"yyy\",oe),ce(\"yyyy\",oe),ce(\"yo\",function(e,t){return t._eraYearOrdinalRegex||oe}),ye([\"y\",\"yy\",\"yyy\",\"yyyy\"],ve),ye([\"yo\"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ve]=n._locale.eraYearOrdinalParse(e,i):t[ve]=parseInt(e,10)}),C(0,[\"gg\",2],0,function(){return this.weekYear()%100}),C(0,[\"GG\",2],0,function(){return this.isoWeekYear()%100}),_n(\"gggg\",\"weekYear\"),_n(\"ggggg\",\"weekYear\"),_n(\"GGGG\",\"isoWeekYear\"),_n(\"GGGGG\",\"isoWeekYear\"),L(\"weekYear\",\"gg\"),L(\"isoWeekYear\",\"GG\"),A(\"weekYear\",1),A(\"isoWeekYear\",1),ce(\"G\",ue),ce(\"g\",ue),ce(\"GG\",te,Q),ce(\"gg\",te,Q),ce(\"GGGG\",re,K),ce(\"gggg\",re,K),ce(\"GGGGG\",ae,ee),ce(\"ggggg\",ae,ee),ge([\"gggg\",\"ggggg\",\"GGGG\",\"GGGGG\"],function(e,t,n,s){t[s.substr(0,2)]=Z(e)}),ge([\"gg\",\"GG\"],function(e,t,s,i){t[i]=n.parseTwoDigitYear(e)}),C(\"Q\",0,\"Qo\",\"quarter\"),L(\"quarter\",\"Q\"),A(\"quarter\",7),ce(\"Q\",J),ye(\"Q\",function(e,t){t[ke]=3*(Z(e)-1)}),C(\"D\",[\"DD\",2],\"Do\",\"date\"),L(\"date\",\"D\"),A(\"date\",9),ce(\"D\",te),ce(\"DD\",te,Q),ce(\"Do\",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ye([\"D\",\"DD\"],Me),ye(\"Do\",function(e,t){t[Me]=Z(e.match(te)[0])});var gn=z(\"Date\",!0);C(\"DDD\",[\"DDDD\",3],\"DDDo\",\"dayOfYear\"),L(\"dayOfYear\",\"DDD\"),A(\"dayOfYear\",4),ce(\"DDD\",ie),ce(\"DDDD\",X),ye([\"DDD\",\"DDDD\"],function(e,t,n){n._dayOfYear=Z(e)}),C(\"m\",[\"mm\",2],0,\"minute\"),L(\"minute\",\"m\"),A(\"minute\",14),ce(\"m\",te),ce(\"mm\",te,Q),ye([\"m\",\"mm\"],Se);var wn=z(\"Minutes\",!1);C(\"s\",[\"ss\",2],0,\"second\"),L(\"second\",\"s\"),A(\"second\",15),ce(\"s\",te),ce(\"ss\",te,Q),ye([\"s\",\"ss\"],Ye);var pn,vn,kn=z(\"Seconds\",!1);for(C(\"S\",0,0,function(){return~~(this.millisecond()/100)}),C(0,[\"SS\",2],0,function(){return~~(this.millisecond()/10)}),C(0,[\"SSS\",3],0,\"millisecond\"),C(0,[\"SSSS\",4],0,function(){return 10*this.millisecond()}),C(0,[\"SSSSS\",5],0,function(){return 100*this.millisecond()}),C(0,[\"SSSSSS\",6],0,function(){return 1e3*this.millisecond()}),C(0,[\"SSSSSSS\",7],0,function(){return 1e4*this.millisecond()}),C(0,[\"SSSSSSSS\",8],0,function(){return 1e5*this.millisecond()}),C(0,[\"SSSSSSSSS\",9],0,function(){return 1e6*this.millisecond()}),L(\"millisecond\",\"ms\"),A(\"millisecond\",16),ce(\"S\",ie,J),ce(\"SS\",ie,Q),ce(\"SSS\",ie,X),pn=\"SSSS\";pn.length<=9;pn+=\"S\")ce(pn,oe);function Mn(e,t){t[Oe]=Z(1e3*(\"0.\"+e))}for(pn=\"S\";pn.length<=9;pn+=\"S\")ye(pn,Mn);vn=z(\"Milliseconds\",!1),C(\"z\",0,0,\"zoneAbbr\"),C(\"zz\",0,0,\"zoneName\");var Dn=p.prototype;function Sn(e){return e}Dn.add=Qt,Dn.calendar=function(e,t){1===arguments.length&&(arguments[0]?en(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=i(e)&&!a(e),s=!1,o=[\"sameDay\",\"nextDay\",\"lastDay\",\"nextWeek\",\"lastWeek\",\"sameElse\"];for(t=0;t<o.length;t+=1)s=s||r(e,o[t]);return n&&s}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||Nt(),o=Et(s,this).startOf(\"day\"),u=n.calendarFormat(this,o)||\"sameElse\",l=t&&(O(t[u])?t[u].call(this,s):t[u]);return this.format(l||this.localeData().calendar(u,this,Nt(s)))},Dn.clone=function(){return new p(this)},Dn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Et(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=V(t)){case\"year\":r=tn(this,s)/12;break;case\"month\":r=tn(this,s);break;case\"quarter\":r=tn(this,s)/3;break;case\"second\":r=(this-s)/1e3;break;case\"minute\":r=(this-s)/6e4;break;case\"hour\":r=(this-s)/36e5;break;case\"day\":r=(this-s-i)/864e5;break;case\"week\":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:I(r)},Dn.endOf=function(e){var t,s;if(void 0===(e=V(e))||\"millisecond\"===e||!this.isValid())return this;switch(s=this._isUTC?cn:dn,e){case\"year\":t=s(this.year()+1,0,1)-1;break;case\"quarter\":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case\"month\":t=s(this.year(),this.month()+1,1)-1;break;case\"week\":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case\"isoWeek\":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case\"day\":case\"date\":t=s(this.year(),this.month(),this.date()+1)-1;break;case\"hour\":t=this._d.valueOf(),t+=un-hn(t+(this._isUTC?0:this.utcOffset()*on),un)-1;break;case\"minute\":t=this._d.valueOf(),t+=on-hn(t,on)-1;break;case\"second\":t=this._d.valueOf(),t+=an-hn(t,an)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},Dn.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},Dn.from=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Nt(e).isValid())?zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Dn.fromNow=function(e){return this.from(Nt(),e)},Dn.to=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Nt(e).isValid())?zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Dn.toNow=function(e){return this.to(Nt(),e)},Dn.get=function(e){return O(this[e=V(e)])?this[e]():this},Dn.invalidAt=function(){return f(this).overflow},Dn.isAfter=function(e,t){var n=v(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&(\"millisecond\"===(t=V(t)||\"millisecond\")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Dn.isBefore=function(e,t){var n=v(e)?e:Nt(e);return!(!this.isValid()||!n.isValid())&&(\"millisecond\"===(t=V(t)||\"millisecond\")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Dn.isBetween=function(e,t,n,s){var i=v(e)?e:Nt(e),r=v(t)?t:Nt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&(\"(\"===(s=s||\"()\")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(\")\"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))},Dn.isSame=function(e,t){var n,s=v(e)?e:Nt(e);return!(!this.isValid()||!s.isValid())&&(\"millisecond\"===(t=V(t)||\"millisecond\")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Dn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Dn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Dn.isValid=function(){return m(this)},Dn.lang=sn,Dn.locale=nn,Dn.localeData=rn,Dn.max=Rt,Dn.min=Pt,Dn.parsingFlags=function(){return d({},f(this))},Dn.set=function(e,t){if(\"object\"==typeof e){var n,s=function(e){var t,n=[];for(t in e)r(e,t)&&n.push({unit:t,priority:E[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=G(e));for(n=0;n<s.length;n++)this[s[n].unit](e[s[n].unit])}else if(O(this[e=V(e)]))return this[e](t);return this},Dn.startOf=function(e){var t,s;if(void 0===(e=V(e))||\"millisecond\"===e||!this.isValid())return this;switch(s=this._isUTC?cn:dn,e){case\"year\":t=s(this.year(),0,1);break;case\"quarter\":t=s(this.year(),this.month()-this.month()%3,1);break;case\"month\":t=s(this.year(),this.month(),1);break;case\"week\":t=s(this.year(),this.month(),this.date()-this.weekday());break;case\"isoWeek\":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case\"day\":case\"date\":t=s(this.year(),this.month(),this.date());break;case\"hour\":t=this._d.valueOf(),t-=hn(t+(this._isUTC?0:this.utcOffset()*on),un);break;case\"minute\":t=this._d.valueOf(),t-=hn(t,on);break;case\"second\":t=this._d.valueOf(),t-=hn(t,an)}return this._d.setTime(t),n.updateOffset(this,!0),this},Dn.subtract=Xt,Dn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Dn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Dn.toDate=function(){return new Date(this.valueOf())},Dn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?U(n,t?\"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]\":\"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ\"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace(\"Z\",U(n,\"Z\")):U(n,t?\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\":\"YYYY-MM-DD[T]HH:mm:ss.SSSZ\")},Dn.inspect=function(){if(!this.isValid())return\"moment.invalid(/* \"+this._i+\" */)\";var e,t,n,s=\"moment\",i=\"\";return this.isLocal()||(s=0===this.utcOffset()?\"moment.utc\":\"moment.parseZone\",i=\"Z\"),e=\"[\"+s+'(\"]',t=0<=this.year()&&this.year()<=9999?\"YYYY\":\"YYYYYY\",n=i+'[\")]',this.format(e+t+\"-MM-DD[T]HH:mm:ss.SSS\"+n)},\"undefined\"!=typeof Symbol&&null!=Symbol.for&&(Dn[Symbol.for(\"nodejs.util.inspect.custom\")]=function(){return\"Moment<\"+this.format()+\">\"}),Dn.toJSON=function(){return this.isValid()?this.toISOString():null},Dn.toString=function(){return this.clone().locale(\"en\").format(\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\")},Dn.unix=function(){return Math.floor(this.valueOf()/1e3)},Dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Dn.eraName=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf(\"day\").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].name;if(s[e].until<=n&&n<=s[e].since)return s[e].name}return\"\"},Dn.eraNarrow=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf(\"day\").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].narrow;if(s[e].until<=n&&n<=s[e].since)return s[e].narrow}return\"\"},Dn.eraAbbr=function(){var e,t,n,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e){if(n=this.clone().startOf(\"day\").valueOf(),s[e].since<=n&&n<=s[e].until)return s[e].abbr;if(s[e].until<=n&&n<=s[e].since)return s[e].abbr}return\"\"},Dn.eraYear=function(){var e,t,s,i,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(s=r[e].since<=r[e].until?1:-1,i=this.clone().startOf(\"day\").valueOf(),r[e].since<=i&&i<=r[e].until||r[e].until<=i&&i<=r[e].since)return(this.year()-n(r[e].since).year())*s+r[e].offset;return this.year()},Dn.year=Ve,Dn.isLeapYear=function(){return j(this.year())},Dn.weekYear=function(e){return yn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Dn.isoWeekYear=function(e){return yn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Dn.quarter=Dn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Dn.month=He,Dn.daysInMonth=function(){return Te(this.year(),this.month())},Dn.week=Dn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),\"d\")},Dn.isoWeek=Dn.isoWeeks=function(e){var t=je(this,1,4).week;return null==e?t:this.add(7*(e-t),\"d\")},Dn.weeksInYear=function(){var e=this.localeData()._week;return Ie(this.year(),e.dow,e.doy)},Dn.weeksInWeekYear=function(){var e=this.localeData()._week;return Ie(this.weekYear(),e.dow,e.doy)},Dn.isoWeeksInYear=function(){return Ie(this.year(),1,4)},Dn.isoWeeksInISOWeekYear=function(){return Ie(this.isoWeekYear(),1,4)},Dn.date=gn,Dn.day=Dn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return\"string\"!=typeof e?e:isNaN(e)?\"number\"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,\"d\")):t},Dn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,\"d\")},Dn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return\"string\"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Dn.dayOfYear=function(e){var t=Math.round((this.clone().startOf(\"day\")-this.clone().startOf(\"year\"))/864e5)+1;return null==e?t:this.add(e-t,\"d\")},Dn.hour=Dn.hours=nt,Dn.minute=Dn.minutes=wn,Dn.second=Dn.seconds=kn,Dn.millisecond=Dn.milliseconds=vn,Dn.utcOffset=function(e,t,s){var i,r=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if(\"string\"==typeof e){if(null===(e=Gt(he,e)))return this}else Math.abs(e)<16&&!s&&(e*=60);return!this._isUTC&&t&&(i=At(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,\"m\"),r!==e&&(!t||this._changeInProgress?Jt(this,zt(e-r,\"m\"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:At(this)},Dn.utc=function(e){return this.utcOffset(0,e)},Dn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(At(this),\"m\")),this},Dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if(\"string\"==typeof this._i){var e=Gt(le,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Dn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Nt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Dn.isUtc=jt,Dn.isUTC=jt,Dn.zoneAbbr=function(){return this._isUTC?\"UTC\":\"\"},Dn.zoneName=function(){return this._isUTC?\"Coordinated Universal Time\":\"\"},Dn.dates=M(\"dates accessor is deprecated. Use date instead.\",gn),Dn.months=M(\"months accessor is deprecated. Use month instead\",He),Dn.years=M(\"years accessor is deprecated. Use year instead\",Ve),Dn.zone=M(\"moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/\",function(e,t){return null!=e?(\"string\"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Dn.isDSTShifted=M(\"isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information\",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=xt(t))._a?(e=t._isUTC?c(t._a):Nt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&Z(e[s])!==Z(t[s]))&&a++;return a+r}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var Yn=x.prototype;function On(e,t,n,s){var i=ct(),r=c().set(s,t);return i[n](r,e)}function bn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||\"\",null!=t)return On(e,t,n,\"month\");var s,i=[];for(s=0;s<12;s++)i[s]=On(e,s,n,\"month\");return i}function xn(e,t,n,s){\"boolean\"==typeof e?(u(t)&&(n=t,t=void 0),t=t||\"\"):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||\"\");var i,r=ct(),a=e?r._week.dow:0,o=[];if(null!=n)return On(t,(n+a)%7,s,\"day\");for(i=0;i<7;i++)o[i]=On(t,(i+a)%7,s,\"day\");return o}Yn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},Yn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return\"MMMM\"===e||\"MM\"===e||\"DD\"===e||\"dddd\"===e?e.slice(1):e}).join(\"\"),this._longDateFormat[e])},Yn.invalidDate=function(){return this._invalidDate},Yn.ordinal=function(e){return this._ordinal.replace(\"%d\",e)},Yn.preparse=Sn,Yn.postformat=Sn,Yn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},Yn.pastFuture=function(e,t){var n=this._relativeTime[e>0?\"future\":\"past\"];return O(n)?n(t):n.replace(/%s/i,t)},Yn.set=function(e){var t,n;for(n in e)r(e,n)&&(O(t=e[n])?this[n]=t:this[\"_\"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+\"|\"+/\\d{1,2}/.source)},Yn.eras=function(e,t){var s,i,r,a=this._eras||ct(\"en\")._eras;for(s=0,i=a.length;s<i;++s){switch(typeof a[s].since){case\"string\":r=n(a[s].since).startOf(\"day\"),a[s].since=r.valueOf()}switch(typeof a[s].until){case\"undefined\":a[s].until=1/0;break;case\"string\":r=n(a[s].until).startOf(\"day\").valueOf(),a[s].until=r.valueOf()}}return a},Yn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case\"N\":case\"NN\":case\"NNN\":if(a===e)return u[s];break;case\"NNNN\":if(r===e)return u[s];break;case\"NNNNN\":if(o===e)return u[s]}else if([r,a,o].indexOf(e)>=0)return u[s]},Yn.erasConvertYear=function(e,t){var s=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*s},Yn.erasAbbrRegex=function(e){return r(this,\"_erasAbbrRegex\")||mn.call(this),e?this._erasAbbrRegex:this._erasRegex},Yn.erasNameRegex=function(e){return r(this,\"_erasNameRegex\")||mn.call(this),e?this._erasNameRegex:this._erasRegex},Yn.erasNarrowRegex=function(e){return r(this,\"_erasNarrowRegex\")||mn.call(this),e?this._erasNarrowRegex:this._erasRegex},Yn.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Re).test(t)?\"format\":\"standalone\"][e.month()]:s(this._months)?this._months:this._months.standalone},Yn.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Re.test(t)?\"format\":\"standalone\"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Yn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=c([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,\"\").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,\"\").toLocaleLowerCase();return n?\"MMM\"===t?-1!==(i=pe.call(this._shortMonthsParse,a))?i:null:-1!==(i=pe.call(this._longMonthsParse,a))?i:null:\"MMM\"===t?-1!==(i=pe.call(this._shortMonthsParse,a))?i:-1!==(i=pe.call(this._longMonthsParse,a))?i:null:-1!==(i=pe.call(this._longMonthsParse,a))?i:-1!==(i=pe.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=c([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp(\"^\"+this.months(i,\"\").replace(\".\",\"\")+\"$\",\"i\"),this._shortMonthsParse[s]=new RegExp(\"^\"+this.monthsShort(i,\"\").replace(\".\",\"\")+\"$\",\"i\")),n||this._monthsParse[s]||(r=\"^\"+this.months(i,\"\")+\"|^\"+this.monthsShort(i,\"\"),this._monthsParse[s]=new RegExp(r.replace(\".\",\"\"),\"i\")),n&&\"MMMM\"===t&&this._longMonthsParse[s].test(e))return s;if(n&&\"MMM\"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},Yn.monthsRegex=function(e){return this._monthsParseExact?(r(this,\"_monthsRegex\")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(r(this,\"_monthsRegex\")||(this._monthsRegex=Ce),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Yn.monthsShortRegex=function(e){return this._monthsParseExact?(r(this,\"_monthsRegex\")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(r(this,\"_monthsShortRegex\")||(this._monthsShortRegex=We),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Yn.week=function(e){return je(e,this._week.dow,this._week.doy).week},Yn.firstDayOfYear=function(){return this._week.doy},Yn.firstDayOfWeek=function(){return this._week.dow},Yn.weekdays=function(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?\"format\":\"standalone\"];return!0===e?Ze(n,this._week.dow):e?n[e.day()]:n},Yn.weekdaysMin=function(e){return!0===e?Ze(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Yn.weekdaysShort=function(e){return!0===e?Ze(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Yn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=c([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,\"\").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,\"\").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,\"\").toLocaleLowerCase();return n?\"dddd\"===t?-1!==(i=pe.call(this._weekdaysParse,a))?i:null:\"ddd\"===t?-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:\"dddd\"===t?-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:\"ddd\"===t?-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:null:-1!==(i=pe.call(this._minWeekdaysParse,a))?i:-1!==(i=pe.call(this._weekdaysParse,a))?i:-1!==(i=pe.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=c([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp(\"^\"+this.weekdays(i,\"\").replace(\".\",\"\\\\.?\")+\"$\",\"i\"),this._shortWeekdaysParse[s]=new RegExp(\"^\"+this.weekdaysShort(i,\"\").replace(\".\",\"\\\\.?\")+\"$\",\"i\"),this._minWeekdaysParse[s]=new RegExp(\"^\"+this.weekdaysMin(i,\"\").replace(\".\",\"\\\\.?\")+\"$\",\"i\")),this._weekdaysParse[s]||(r=\"^\"+this.weekdays(i,\"\")+\"|^\"+this.weekdaysShort(i,\"\")+\"|^\"+this.weekdaysMin(i,\"\"),this._weekdaysParse[s]=new RegExp(r.replace(\".\",\"\"),\"i\")),n&&\"dddd\"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&\"ddd\"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&\"dd\"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},Yn.weekdaysRegex=function(e){return this._weekdaysParseExact?(r(this,\"_weekdaysRegex\")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(r(this,\"_weekdaysRegex\")||(this._weekdaysRegex=Be),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Yn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(r(this,\"_weekdaysRegex\")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(r(this,\"_weekdaysShortRegex\")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Yn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(r(this,\"_weekdaysRegex\")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(r(this,\"_weekdaysMinRegex\")||(this._weekdaysMinRegex=Qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Yn.isPM=function(e){return\"p\"===(e+\"\").toLowerCase().charAt(0)},Yn.meridiem=function(e,t,n){return e>11?n?\"pm\":\"PM\":n?\"am\":\"AM\"},ht(\"en\",{eras:[{since:\"0001-01-01\",until:1/0,offset:1,name:\"Anno Domini\",narrow:\"AD\",abbr:\"AD\"},{since:\"0000-12-31\",until:-1/0,offset:1,name:\"Before Christ\",narrow:\"BC\",abbr:\"BC\"}],dayOfMonthOrdinalParse:/\\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Z(e%100/10)?\"th\":1===t?\"st\":2===t?\"nd\":3===t?\"rd\":\"th\")}}),n.lang=M(\"moment.lang is deprecated. Use moment.locale instead.\",ht),n.langData=M(\"moment.langData is deprecated. Use moment.localeData instead.\",ct);var Tn=Math.abs;function Nn(e,t,n,s){var i=zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function Pn(e){return e<0?Math.floor(e):Math.ceil(e)}function Rn(e){return 4800*e/146097}function Wn(e){return 146097*e/4800}function Cn(e){return function(){return this.as(e)}}var Un=Cn(\"ms\"),Hn=Cn(\"s\"),Fn=Cn(\"m\"),Ln=Cn(\"h\"),Vn=Cn(\"d\"),Gn=Cn(\"w\"),En=Cn(\"M\"),An=Cn(\"Q\"),jn=Cn(\"y\");function In(e){return function(){return this.isValid()?this._data[e]:NaN}}var Zn=In(\"milliseconds\"),zn=In(\"seconds\"),$n=In(\"minutes\"),qn=In(\"hours\"),Bn=In(\"days\"),Jn=In(\"months\"),Qn=In(\"years\");var Xn=Math.round,Kn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};var es=Math.abs;function ts(e){return(e>0)-(e<0)||+e}function ns(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,u=es(this._milliseconds)/1e3,l=es(this._days),h=es(this._months),d=this.asSeconds();return d?(t=I((e=I(u/60))/60),u%=60,e%=60,n=I(h/12),h%=12,s=u?u.toFixed(3).replace(/\\.?0+$/,\"\"):\"\",i=d<0?\"-\":\"\",r=ts(this._months)!==ts(d)?\"-\":\"\",a=ts(this._days)!==ts(d)?\"-\":\"\",o=ts(this._milliseconds)!==ts(d)?\"-\":\"\",i+\"P\"+(n?r+n+\"Y\":\"\")+(h?r+h+\"M\":\"\")+(l?a+l+\"D\":\"\")+(t||e||u?\"T\":\"\")+(t?o+t+\"H\":\"\")+(e?o+e+\"M\":\"\")+(u?o+s+\"S\":\"\")):\"P0D\"}var ss=Ut.prototype;return ss.isValid=function(){return this._isValid},ss.abs=function(){var e=this._data;return this._milliseconds=Tn(this._milliseconds),this._days=Tn(this._days),this._months=Tn(this._months),e.milliseconds=Tn(e.milliseconds),e.seconds=Tn(e.seconds),e.minutes=Tn(e.minutes),e.hours=Tn(e.hours),e.months=Tn(e.months),e.years=Tn(e.years),this},ss.add=function(e,t){return Nn(this,e,t,1)},ss.subtract=function(e,t){return Nn(this,e,t,-1)},ss.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if(\"month\"===(e=V(e))||\"quarter\"===e||\"year\"===e)switch(t=this._days+s/864e5,n=this._months+Rn(t),e){case\"month\":return n;case\"quarter\":return n/3;case\"year\":return n/12}else switch(t=this._days+Math.round(Wn(this._months)),e){case\"week\":return t/7+s/6048e5;case\"day\":return t+s/864e5;case\"hour\":return 24*t+s/36e5;case\"minute\":return 1440*t+s/6e4;case\"second\":return 86400*t+s/1e3;case\"millisecond\":return Math.floor(864e5*t)+s;default:throw new Error(\"Unknown unit \"+e)}},ss.asMilliseconds=Un,ss.asSeconds=Hn,ss.asMinutes=Fn,ss.asHours=Ln,ss.asDays=Vn,ss.asWeeks=Gn,ss.asMonths=En,ss.asQuarters=An,ss.asYears=jn,ss.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Z(this._months/12):NaN},ss._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return r>=0&&a>=0&&o>=0||r<=0&&a<=0&&o<=0||(r+=864e5*Pn(Wn(o)+a),a=0,o=0),u.milliseconds=r%1e3,e=I(r/1e3),u.seconds=e%60,t=I(e/60),u.minutes=t%60,n=I(t/60),u.hours=n%24,o+=i=I(Rn(a+=I(n/24))),a-=Pn(Wn(i)),s=I(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},ss.clone=function(){return zt(this)},ss.get=function(e){return e=V(e),this.isValid()?this[e+\"s\"]():NaN},ss.milliseconds=Zn,ss.seconds=zn,ss.minutes=$n,ss.hours=qn,ss.days=Bn,ss.weeks=function(){return I(this.days()/7)},ss.months=Jn,ss.years=Qn,ss.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=Kn;return\"object\"==typeof e&&(t=e,e=!1),\"boolean\"==typeof e&&(i=e),\"object\"==typeof t&&(r=Object.assign({},Kn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),s=function(e,t,n,s){var i=zt(e).abs(),r=Xn(i.as(\"s\")),a=Xn(i.as(\"m\")),o=Xn(i.as(\"h\")),u=Xn(i.as(\"d\")),l=Xn(i.as(\"M\")),h=Xn(i.as(\"w\")),d=Xn(i.as(\"y\")),c=r<=n.ss&&[\"s\",r]||r<n.s&&[\"ss\",r]||a<=1&&[\"m\"]||a<n.m&&[\"mm\",a]||o<=1&&[\"h\"]||o<n.h&&[\"hh\",o]||u<=1&&[\"d\"]||u<n.d&&[\"dd\",u];return null!=n.w&&(c=c||h<=1&&[\"w\"]||h<n.w&&[\"ww\",h]),(c=c||l<=1&&[\"M\"]||l<n.M&&[\"MM\",l]||d<=1&&[\"y\"]||[\"yy\",d])[2]=t,c[3]=+e>0,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}(this,!i,r,n=this.localeData()),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},ss.toISOString=ns,ss.toString=ns,ss.toJSON=ns,ss.locale=nn,ss.localeData=rn,ss.toIsoString=M(\"toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)\",ns),ss.lang=sn,C(\"X\",0,0,\"unix\"),C(\"x\",0,0,\"valueOf\"),ce(\"x\",ue),ce(\"X\",/[+-]?\\d+(\\.\\d{1,3})?/),ye(\"X\",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),ye(\"x\",function(e,t,n){n._d=new Date(Z(e))}),n.version=\"2.29.1\",e=Nt,n.fn=Dn,n.min=function(){return Wt(\"isBefore\",[].slice.call(arguments,0))},n.max=function(){return Wt(\"isAfter\",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=c,n.unix=function(e){return Nt(1e3*e)},n.months=function(e,t){return bn(e,t,\"months\")},n.isDate=l,n.locale=ht,n.invalid=_,n.duration=zt,n.isMoment=v,n.weekdays=function(e,t,n){return xn(e,t,n,\"weekdays\")},n.parseZone=function(){return Nt.apply(null,arguments).parseZone()},n.localeData=ct,n.isDuration=Ht,n.monthsShort=function(e,t){return bn(e,t,\"monthsShort\")},n.weekdaysMin=function(e,t,n){return xn(e,t,n,\"weekdaysMin\")},n.defineLocale=dt,n.updateLocale=function(e,t){if(null!=t){var n,s,i=it;null!=rt[e]&&null!=rt[e].parentLocale?rt[e].set(b(rt[e]._config,t)):(null!=(s=lt(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=rt[e],rt[e]=n),ht(e)}else null!=rt[e]&&(null!=rt[e].parentLocale?(rt[e]=rt[e].parentLocale,e===ht()&&ht(e)):null!=rt[e]&&delete rt[e]);return rt[e]},n.locales=function(){return D(rt)},n.weekdaysShort=function(e,t,n){return xn(e,t,n,\"weekdaysShort\")},n.normalizeUnits=V,n.relativeTimeRounding=function(e){return void 0===e?Xn:\"function\"==typeof e&&(Xn=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==Kn[e]&&(void 0===t?Kn[e]:(Kn[e]=t,\"s\"===e&&(Kn.ss=t-1),!0))},n.calendarFormat=function(e,t){var n=e.diff(t,\"days\",!0);return n<-6?\"sameElse\":n<-1?\"lastWeek\":n<0?\"lastDay\":n<1?\"sameDay\":n<2?\"nextDay\":n<7?\"nextWeek\":\"sameElse\"},n.prototype=Dn,n.HTML5_FMT={DATETIME_LOCAL:\"YYYY-MM-DDTHH:mm\",DATETIME_LOCAL_SECONDS:\"YYYY-MM-DDTHH:mm:ss\",DATETIME_LOCAL_MS:\"YYYY-MM-DDTHH:mm:ss.SSS\",DATE:\"YYYY-MM-DD\",TIME:\"HH:mm\",TIME_SECONDS:\"HH:mm:ss\",TIME_MS:\"HH:mm:ss.SSS\",WEEK:\"GGGG-[W]WW\",MONTH:\"YYYY-MM\"},n});","node_modules/h5.main/lib/index.js":"\"use strict\";const DEFAULT_OPTIONS={moduleStartTimeout:2e3,rootPath:process.cwd(),env:process.env.NODE_ENV||\"development\",startTime:Date.now(),id:\"nonameapp\"},step=require(\"h5.step\"),{MessageBroker:MessageBroker}=require(\"h5.pubsub\"),appUtils=require(\"./utils/app\"),logUtils=require(\"./utils/log\");module.exports=((e,o)=>{function t(o,t){const s=\"string\"==typeof t.requiredModules?t.requiredModules.split(\" \"):t.requiredModules;Array.isArray(s)&&s.forEach(t=>{const s=o.config[`${t}Id`],p=e[s];if(!p)throw new Error(`[${o.name}] module requires the [${t}] module!`);o[t]=p})}function s(o,t){Object.keys(t.optionalModules||{}).forEach(s=>{const p=t.optionalModules[s],n=new Map;s.split(\" \").forEach(e=>{n.set(e,o.config[`${e}Id`])}),e.onModuleReady(Array.from(n.values()),()=>{n.forEach((t,s)=>{o[s]=e[t]}),Array.isArray(p)?p.forEach(t=>t(e,o)):\"function\"==typeof p&&p(e,o)})})}function p(o,p,n){return function(){p.info(\"Starting...\"),e.main.startedModules.push(p.name),e[p.name]=p,e.broker.publish(\"app.modules.starting\",{module:p,appModule:n}),n.start&&3===n.start.length?function(o,p,n){const u=setTimeout(()=>{throw new Error(`[${o.name}] module failed to start in the allowed time!`)},e.options.moduleStartTimeout);t(o,p),s(o,p),p.start(e,o,t=>{if(clearTimeout(u),t)throw t;e.broker.publish(\"app.modules.started\",{module:o,appModule:p}),setImmediate(n)})}(p,n,this.next()):function(o,p,n){t(o,p),s(o,p),p.start&&p.start(e,o),e.broker.publish(\"app.modules.started\",{module:o,appModule:p}),setImmediate(n)}(p,n,this.next())}}null!==e&&\"object\"==typeof e||(e={}),null!==e.options&&\"object\"==typeof e.options||(e.options={}),e.options={...DEFAULT_OPTIONS,...e.options},e.broker=new MessageBroker,e.main={modules:{},appModules:{},setUpModules:[],startedModules:[]},appUtils.extend(e),logUtils.extend(e,{appId:e.options.id}),step(function(){e.info(\"Starting...\");const t=[];o.forEach(function(o,t){const s=t.name;e.logger.extend(t,{module:s}),t.info(\"Setting up...\");const n=require(t.path);null!==n&&\"object\"==typeof n?(t.config||(t.config={}),null!=n.DEFAULT_CONFIG&&Object.keys(n.DEFAULT_CONFIG).forEach(e=>{void 0===t.config[e]&&(t.config[e]=n.DEFAULT_CONFIG[e])}),e.main.modules[s]=t,e.main.appModules[s]=n,e.broker.publish(\"app.modules.settingUp\",{module:t,appModule:n}),\"function\"==typeof n.setUp&&n.setUp(e,t),e.broker.publish(\"app.modules.setUp\",{module:t,appModule:n}),\"function\"==typeof n.onModuleSetUp&&(e.main.setUpModules.forEach(o=>{n.onModuleSetUp(e,{moduleName:o,module:t,appModule:n,setUpModule:e.main.modules[o],setUpAppModule:e.main.appModules[o]})}),e.broker.subscribe(\"app.modules.setUp\",o=>{n.onModuleSetUp(e,{module:t,appModule:n,setUpModule:o.module,setUpAppModule:o.appModule})})),e.main.setUpModules.push(s),o.push(p(0,t,n))):t.info(\"Skipping empty module.\")}.bind(null,t)),t.push(this.next()),step(t)},function(){const o=e.options.env,t=Date.now()-e.options.startTime;e.info(\"Started.\",{env:o,startTime:t}),e.broker.publish(\"app.started\",{id:e.options.id,env:o,time:t})})});","config/up/horti-controller.js":"\"use strict\";const fs=require(\"fs\"),config=module.exports=require(\"../horti-controller\");config.modbus.writeAllTheThings=null,config.modbus.controlMasters=[\"moxa\"];let master=process.env.HORTI_MASTER_ADDRESS;!master&&fs.existsSync(`${__dirname}/master.txt`)&&(master=fs.readFileSync(`${__dirname}/master.txt`,\"utf8\").trim()),config.modbus.masters={moxa:{connection:{type:\"tcp\",socketOptions:{host:master||\"192.168.1.5\",port:502},autoOpen:!0,autoReconnect:!0,minConnectTime:2500,maxReconnectTime:5e3,noActivityTime:3e4,closeOnDestroy:!0,suppressErrorsAfterDestroy:!0},transport:{type:\"development\"===process.env.NODE_ENV?\"ip\":\"rtu\",eofTimeout:100},suppressTransactionErrors:!0,retryOnException:!1,maxConcurrentTransactions:1,defaultUnit:0,defaultMaxRetries:0,defaultTimeout:400,interval:100}},config[\"messenger/server\"]={...config[\"messenger/server\"],pubPort:5060,repPort:5061},config[\"messenger/client:frontend\"]={...config[\"messenger/client:frontend\"],pubPort:5062,repPort:5063};","backend/extensions.js":"\"use strict\";const{inspect:inspect}=require(\"util\"),{formatDateTime:formatDateTime}=require(\"util/dateFormatter\");Object.defineProperty(Error.prototype,\"toJSON\",{configurable:!1,enumerable:!1,writable:!0,value:function(){const e=this,t={message:e.message,stack:e.stack},r=Object.keys(e);for(let o=0;o<r.length;++o){const l=r[o];t[l]=e[l]}return t}}),console.inspect=function(e,t,r){console.log(inspect(e,{depth:t||null,colors:!1!==r}))},console.bench=function(e,t,r){const o=process.hrtime(),l=r.call(t),s=process.hrtime(o);return console.log(`[bench] ${e} ${(1e9*s[0]+s[1])/1e6} ms`),l};let chalk=null;try{chalk=require(\"chalk\")}catch(e){}if(chalk&&\"development\"===process.env.NODE_ENV){const e={debug:chalk.bgRgb(255,255,255).rgb(0,0,0),info:chalk.bgRgb(0,0,255).rgb(255,255,255),warn:chalk.bgYellowBright.rgb(0,0,0),error:chalk.bgRgb(255,0,0).rgb(255,255,255)};Object.assign(inspect.styles,{name:\"white\",date:\"yellow\"}),require(\"h5.main/lib/utils/log\").write=(t=>{let r=`>>> ${t.severity.padEnd(5)} ${formatDateTime(t.time,!0)}`;t.module&&(r+=` [${t.module}]`),t.submodule&&(r+=` [${t.submodule}]`);let o=t.error?t.error.stack:\"\";if(t.message)r+=` ${String(t.message).toString().trim()}`;else if(o){const e=o.match(/^(?:Error:\\s*)?(.*?)(\\s{2,}at .*?)?$/s);e?(r+=` ${e[1].trim()}`,(o=(e[2]||\"\").trim())&&(o=`    ${o}`)):(r+=` ${o.trim()}`,o=\"\")}const l=e[t.severity];chalk&&l?console.log(l(r)):console.log(r),t.error&&(delete t.error.message,delete t.error.stack,delete t.error.code,delete t.error.statusCode,Object.keys(t.error).length||delete t.error),o&&console.log(o),delete t.appId,delete t.severity,delete t.time,delete t.module,delete t.submodule,delete t.message,Object.keys(t).length&&console.log(chalk.rgb(255,255,255)(inspect(t,{colors:!0})))})}","node_modules/h5.step/lib/index.js":"module.exports=step;var ACTION_NONE=\"none\",ACTION_NEXT=\"next\",ACTION_SKIP=\"skip\",ACTION_DONE=\"done\",ACTION_GROUP=\"group\",ACTION_PARALLEL=\"parallel\",slice=Array.prototype.slice;function step(){var n=Array.isArray(arguments[0])?arguments[0]:arguments,r=n.length;if(0!==r){var e=-1,l=ACTION_NONE,t=null,u=!1,a=null,N=0,c=0,A=null,O={};Object.defineProperties(O,{next:{value:function(){return-1!==e&&(assertAction(ACTION_NEXT,l),l=ACTION_NEXT),i}},skip:{value:function(){assertAction(ACTION_SKIP,l),l=ACTION_SKIP,t=arguments}},done:{value:function(){assertAction(ACTION_DONE,l),l=ACTION_DONE,t=arguments}},parallel:{value:function(){l===ACTION_PARALLEL?++N:(assertAction(ACTION_PARALLEL,l),l=ACTION_PARALLEL,N=1,c=0,A=[]);var n=N-1;return function(){A[n]=slice.call(arguments),++c,l===ACTION_NONE&&c===N&&s()}}},group:{value:function(){l===ACTION_GROUP?++N:(assertAction(ACTION_GROUP,l),l=ACTION_GROUP,N=1,c=0,A=[]);var n=N-1;return function(){A[n]=slice.call(arguments),++c,l===ACTION_NONE&&c===N&&T()}}}}),i()}function i(){if(l!==ACTION_NONE){if(u)return;return u=!0,a=slice.call(arguments),process.nextTick(function(){l=ACTION_NONE;var n=a;return u=!1,a=null,i.apply(null,n)})}if(!(++e>=r)){var t=n[e].apply(O,arguments);t&&t.then&&t.catch?t.then(function(n){o(null,n)}).catch(function(n){o(n,null)}):o()}}function o(n,u){var a=l,A=t;switch(l=ACTION_NONE,t=null,a){case ACTION_NEXT:return;case ACTION_NONE:return i(n,u);case ACTION_SKIP:var O=r-1;if(e<O)return e=O-1,i.apply(null,slice.call(A));break;case ACTION_DONE:if(0===A.length)return;var o=A[0];if(\"function\"!=typeof o)return;return o.apply(null,slice.call(A,1));case ACTION_PARALLEL:if(N===c)return s();break;case ACTION_GROUP:if(N===c)return T()}}function s(){for(var n=[null],r=0;r<N;++r){var e=A[r];null===n[0]&&e[0]&&(n[0]=e[0]),n.push(e[1])}i.apply(null,n)}function T(){for(var n=null,r=[],e=0;e<N;++e){var l=A[e];null===n&&l[0]&&(n=l[0]),r.push(l[1])}i.call(null,n,r)}}function assertAction(n,r){if(r!==ACTION_NONE)throw new Error(n+\"() cannot be used because \"+r+\"() was already invoked.\")}","node_modules/h5.pubsub/lib/index.js":"\"use strict\";exports.MessageBroker=require(\"./MessageBroker\");","node_modules/h5.main/lib/utils/app.js":"\"use strict\";const path=require(\"path\");exports.extend=(t=>{t.createError=((t,...e)=>{const o=new Error(t);for(let t=0;t<e.length;++t){const n=e[t];switch(typeof n){case\"string\":o.code=n;break;case\"number\":o.statusCode=n;break;case\"object\":Object.assign(o,n)}}return o}),t.pathTo=((...e)=>path.join.apply(null,t.options&&t.options.rootPath?[t.options.rootPath].concat(e):e)),t.onModuleReady=((e,o)=>{const n=[].concat(e);if(n.some(t=>!t))return;const s=t.broker.subscribe(\"app.modules.started\",({module:t})=>c(t.name));function c(e){if(t.main.startedModules.includes(e)){const t=n.indexOf(e);-1!==t&&(n.splice(t,1),0===n.length&&(s.cancel(),setImmediate(o)))}}[].concat(n).forEach(c)})});","node_modules/h5.main/lib/utils/log.js":"\"use strict\";const util=require(\"util\"),ENABLED={debug:!0,info:!0,warn:!0,error:!0},getCircularReplacer=()=>{const e=new WeakSet;return(t,r)=>{if(\"object\"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}};function extend(e,t){Object.keys(ENABLED).forEach(r=>{e[r]=((...e)=>{if(!ENABLED[r])return;const n={severity:r,time:new Date,...t};for(let t=0;t<e.length;++t){const r=e[t];if(r){if(t>0&&\"string\"==typeof n.message&&n.message.includes(\"%\")){n.message=util.format.apply(util,[n.message,...e.slice(t)]);break}\"string\"==typeof r?n.message=r:r instanceof Error?n.error={stack:r.stack||r.message,...r}:Object.assign(n,r)}}exports.write(n)})})}function create(e){return t=>{const r={...e,...t},n={enabled:ENABLED,extend:(e,t)=>exports.extend(e,{...r,...t}),create:create(r)};return extend(n,r),n}}exports.write=(e=>console.log(JSON.stringify(e,getCircularReplacer()))),exports.extend=((e,t)=>(e.logger={enabled:ENABLED,extend:(e,r)=>exports.extend(e,{...t,...r}),create:create(t)},extend(e,t),e));","backend/node_modules/updater/index.js":"\"use strict\";const dgram=require(\"dgram\"),fs=require(\"fs\"),_=require(\"lodash\"),expressMiddleware=require(\"./expressMiddleware\");exports.DEFAULT_CONFIG={expressId:\"express\",sioId:\"sio\",packageJsonPath:\"package.json\",versionsKey:\"wmes\",backendVersionKey:\"backend\",frontendVersionKey:\"frontend\",manifestPath:null,restartDelay:15e3,errorTemplate:\"error503\",pull:{exe:\"git\",cwd:process.cwd(),timeout:6e4},manifests:[],captureSigint:!0,restartBroadcastPort:1337},exports.republishTopics=[\"updater.newVersion\"],exports.optionalModules={express:require(\"./routes\"),sio:require(\"./commands\")},exports.start=((e,n)=>{let r=null,t=null;function o(){return delete require.cache[n.config.packageJsonPath],n.package=require(n.config.packageJsonPath),n.package}function s(){r=null;const t=n.getVersions(!0),s=n.getBackendVersion(),a=n.getFrontendVersion();o();const c=n.getVersions(!1),d=n.getBackendVersion(),p=n.getFrontendVersion();let f=!1,g=!1;d!==s?(n.info(\"Backend version changed.\",{oldBackendVersion:s,newBackendVersion:d}),i(s,d),f=!0):p!==a&&(n.info(\"Frontend version changed.\",{oldFrontendVersion:a,newFrontendVersion:p}),function(n,r){e.broker.publish(\"updater.newVersion\",{service:\"frontend\",oldVersion:n,newVersion:r})}(a,p),g=!0),_.forEach(c,(n,r)=>{if(f&&\"backend\"===r||g&&\"frontend\"===r)return;const o=t[r]||0;n!==o&&e.broker.publish(\"updater.newVersion\",{service:r,oldVersion:o,newVersion:n})})}function i(r,o){return null===t&&(n.restarting=Date.now(),n.info(\"Restarting...\",{restartDelay:n.config.restartDelay/1e3}),e.broker.publish(\"updater.newVersion\",{service:\"backend\",oldVersion:r,newVersion:o,delay:n.config.restartDelay}),e.broker.publish(\"updater.restarting\",{appId:e.options.id,delay:n.config.restartDelay}),function(){const r=n.config.restartBroadcastPort;if(r<=0)return;const t=dgram.createSocket(\"udp4\");t.on(\"error\",e=>{n.error(e,\"Broadcast error.\")}),t.once(\"listening\",()=>{t.setBroadcast(!0);const o=Buffer.from(JSON.stringify({topic:\"updater.restarting\",payload:{appId:e.options.id,delay:n.config.restartDelay}}),\"utf8\");t.send(o,0,o.length,r,\"255.255.255.255\",e=>{e?n.error(e,\"Failed to broadcast restarting message.\"):n.info(\"Broadcasted restarting message!\"),t.close()})}),t.bind()}(),t=setTimeout(a,n.config.restartDelay),!0)}function a(){n.info(\"Exiting the process...\"),setImmediate(process.exit.bind(process))}n.config.packageJsonPath=require.resolve(n.config.packageJsonPath),n.package=o(),n.restarting=0,n.manifest=n.config.manifestPath?fs.readFileSync(n.config.manifestPath,\"utf8\"):null,n.config.manifests.forEach(e=>_.defaults(e,{frontendVersionKey:n.config.frontendVersionKey,template:n.manifest})),n.getManifest=(e=>n.config.manifests.find(r=>{return(r.frontendVersionKey||n.config.frontendVersionKey)===e})),n.getAppTemplateData=((r,t,o)=>{const s=n.getManifest(r);if(!s)throw new Error(`Manifest not found for app [${r}]!`);t||(t={session:null,secure:!1});const i=t.session&&t.session.user,a=i&&i.locale?i.locale:\"pl\",c=(t.headers[\"user-agent\"]||\"\").match(/Chrome\\/([0-9]+)/),d=c?+c[1]:99;return{appCacheManifest:\"development\"!==e.options.env&&(d<70||t.secure)?s.path:\"\",appData:n.extendAppData(r,{LOCALE:JSON.stringify(a),...o}),mainJsFile:s.mainJsFile,mainCssFile:s.mainCssFile}}),n.extendAppData=((r,t)=>{t||(t={});const o=n.getManifest(r);return Object.assign(t,{ENV:JSON.stringify(e.options.env),VERSIONS:JSON.stringify(n.getVersions()),TIME:JSON.stringify(Date.now()),FRONTEND_SERVICE:JSON.stringify(r)}),e.broker.publish(\"app.prepareAppData\",{appId:r,appData:t}),o?(_.forEach(o.dictionaryModules,(n,r)=>{const o=e[r];if(!o)return;const s=o.models;0!==s.length?\"function\"==typeof s[0].toDictionaryObject?t[n]=JSON.stringify(_.invokeMap(s,\"toDictionaryObject\")):t[n]=JSON.stringify(s):t[n]=\"[]\"}),_.forEach(o.frontendAppData,(n,r)=>{t[r]=JSON.stringify(_.isFunction(n)?n(e):n)}),t):t}),n.getVersions=(e=>{n.package.updater||(n.package.updater={});const r=n.package.updater,t=n.config.versionsKey;return r[t]||(r[t]={},r[t][n.config.backendVersionKey]=-1,r[t][n.config.frontendVersionKey]=-1),r[t].package=n.package.version,!1===e?r[t]:_.cloneDeep(r[t])}),n.getBackendVersion=(e=>n.getVersions(!1)[e||n.config.backendVersionKey]),n.getFrontendVersion=(e=>n.getVersions(!1)[e||n.config.frontendVersionKey]),n.updateFrontendVersion=(e=>{const r=n.getVersions(!1);void 0===r[e]&&(e=n.config.frontendVersionKey),r[e]=Date.now()}),e.broker.subscribe(\"express.beforeMiddleware\").setLimit(1).on(\"message\",r=>{r.module.app.use(expressMiddleware.bind(null,e,n))}),fs.watch(n.config.packageJsonPath,()=>{null!==r&&clearTimeout(r),r=setTimeout(s,1e3)}),n.config.captureSigint&&process.on(\"SIGINT\",function(){const e=n.getBackendVersion();i(e,e)||(n.info(\"Forcing shutdown...\"),a())})});","backend/node_modules/h5-mongoose/index.js":"\"use strict\";const mongoose=require(\"mongoose\"),expressMiddleware=require(\"./expressMiddleware\");exports.DEFAULT_CONFIG={maxConnectTries:10,connectAttemptDelay:500,uri:\"mongodb://localhost/test\",mongoClient:{},models:null,keepAliveQueryInterval:3e4,stopOnConnectError:!0},exports.onModuleSetUp=((e,{module:o,setUpModule:n,setUpAppModule:t})=>{t.models&&\"object\"==typeof t.models&&(o.modelsToLoad||(o.modelsToLoad=[]),o.modelsToLoad.push({setUpModule:n,setUpModels:t.models})),t.modelPlugins&&\"object\"==typeof t.modelPlugins&&(o.modelPlugins||(o.modelPlugins=[]),o.modelPlugins.push({setUpModule:n,setUpPlugins:t.modelPlugins}))}),exports.start=((e,o,n)=>{const t={lastMinuteCount:0,totalCount:0,interval:null};let s=!1,i=!1;function c(e){o.connection.readyState!==mongoose.Connection.STATES.connected&&o.connection.readyState!==mongoose.Connection.STATES.connecting&&o.connect(o.config.uri,o.config.mongoClient).then(()=>setImmediate(r)).catch(n=>{e>=o.config.maxConnectTries?r(n):setTimeout(c.bind(null,e+1),o.config.connectAttemptDelay)})}function r(t){if(t){if(o.config.stopOnConnectError)return n(t);o.error(t),setTimeout(c,1e4,0)}i||(i=!0,function(){o.debug(\"Loading models...\"),o.modelPlugins||(o.modelPlugins=[]);o.modelsToLoad||(o.modelsToLoad=[]);const t={\"*\":[]};o.modelPlugins.forEach(({setUpModule:o,setUpPlugins:n})=>{Array.isArray(n)?n.forEach(n=>t[\"*\"].push(n.bind(null,e,o))):Object.keys(n).forEach(s=>{t[s]||(t[s]=[]),Array.isArray(n[s])?n[s].forEach(n=>{t[s].push(n.bind(null,e,o))}):t[s].push(n[s].bind(null,e,o))})});const s=new Set,i=new Map;o.modelsToLoad.forEach(({setUpModels:e})=>{(Array.isArray(e)?e:Object.values(e)).forEach(e=>s.add(e))}),s.forEach(({name:n,setUp:s})=>{i.set(s,n);const c=s(e,o);c&&(t[\"*\"].concat(t[n]||[]).forEach(e=>{e(c,{name:n})}),o.model(n,c))}),o.modelsToLoad.forEach(({setUpModule:e,setUpModels:n})=>{(Array.isArray(n)?n:Object.values(n)).forEach(({setUp:n})=>{const t=i.get(n);e[t]=o.model(t)})}),o.modelsToLoad=[],o.info(\"Loaded models.\",{modelCount:s.size}),setImmediate(n)}())}function l(){t.totalCount+=1,t.lastMinuteCount+=1}function d(){t.lastMinuteCount&&(o.warn(\"No free connections.\",{totalCount:t.totalCount,lastMinuteCount:t.lastMinuteCount}),t.lastMinuteCount=0)}(o=e[o.name]=Object.assign(mongoose,o)).Promise=global.Promise,o.set(\"objectIdGetter\",!1),o.set(\"strict\",!0),o.set(\"debug\",!1),o.connection.on(\"connecting\",()=>o.info(\"Connecting...\")),o.connection.on(\"connected\",()=>o.info(\"Connected.\")),o.connection.on(\"open\",function(){o.info(\"Open.\");const{topology:e}=o.connection.db.s;if(!e||e.listenerCount(\"noFreeConnection\"))return;e.on(\"noFreeConnection\",l),t.interval||(t.interval=setInterval(d,6e4))}),o.connection.on(\"reconnected\",()=>o.info(\"Reconnected.\")),o.connection.on(\"disconnecting\",()=>o.warn(\"Disconnecting...\")),o.connection.on(\"disconnected\",()=>o.warn(\"Disconnected.\")),o.connection.on(\"close\",()=>o.warn(\"Closed.\")),o.connection.on(\"unauthorized\",()=>o.warn(\"Unauthorized.\")),o.connection.on(\"error\",e=>o.error(e)),e.broker.subscribe(\"app.started\",function e(){if(!o.config.keepAliveQueryInterval)return;if(!o.connection.db)return setTimeout(e,o.config.keepAliveQueryInterval);o.connection.db.stats((n,t)=>{n?(s||o.error(n,\"Keep alive query failed.\"),s=!0):(s&&o.info(\"Kept alive.\",{stats:t}),s=!1),setTimeout(e,o.config.keepAliveQueryInterval)})}).setLimit(1),e.broker.subscribe(\"express.beforeMiddleware\",function(n){n.module.app.use(expressMiddleware.bind(null,e,o))}).setLimit(1),c(0)});","backend/node_modules/events/index.js":"\"use strict\";const _=require(\"lodash\");exports.DEFAULT_CONFIG={mongooseId:\"mongoose\",userId:\"user\",expressId:\"express\",collection:e=>{if(e.mongoose)return e.mongoose.model(\"Event\").collectio;if(e.mongodb)return e.mongodb.db.collection(\"events\");throw new Error(\"No mongoose or mongodb module!\")},insertDelay:1e3,topics:[\"events.**\"],blacklist:[],print:[]},exports.models=[require(\"./models/event\")],exports.recordTopics=[\"events.**\"],exports.republishTopics=[\"events.saved\"],exports.userPrivileges=[\"EVENTS:VIEW\",\"EVENTS:MANAGE\"],exports.optionalModules={\"mongoose user express\":require(\"./routes\")},exports.onModuleSetUp=((e,{module:o,setUpAppModule:s})=>{s.recordTopics&&(Array.isArray(s.recordTopics)?Array.isArray(o.config.topics)&&s.recordTopics.forEach(e=>o.config.topics.push(e)):Object.keys(s.recordTopics).forEach(e=>{let t=o.config.topics;t=\"blacklist\"===e||\"print\"===e?o.config[e]:t[e]?t[e]:t[e]=[],s.recordTopics[e].forEach(e=>t.push(e))}))}),exports.start=((e,o)=>{const{config:s}=o,t=s.collection(e);let r=null,n=0,i=null,c=0;const l={};function u(){const e=Date.now()-n;e<6e4?null===i&&(i=setTimeout(u,e)):t.distinct(\"type\",null,null,(e,s)=>{e?o.error(e,\"Failed to fetch event types.\"):s.forEach(e=>o.types[e]=1),n=Date.now(),i=null})}function p(e,s){o.info({topic:s,message:e})}function a(e,s,t){if(\"events.saved\"===t)return void u();if(l[t])return;const n=(s=_.isObject(s)?JSON.parse(JSON.stringify(s)):{}).user,i=_.isObject(n)?{_id:String(n._id||n.id),name:n.lastName&&n.firstName?`${n.lastName} ${n.firstName}`:n.login||n.label,login:n.login||n.label,ipAddress:n.ipAddress||n.ip}:null,p=t.replace(/^events\\./,\"\");_.isString(s.severity)&&(e=s.severity,delete s.severity),null!==i&&delete s.user;const a={type:p,severity:e,time:Date.now(),user:i,data:s};null===r&&(r=[],setTimeout(d,o.config.insertDelay),c=a.time),r.push(a),o.types[p]=1}function d(){if(null===r)return;const s=r;r=null,t.insertMany(s,t=>{t?o.error(t,`Failed to save ${s.length} events.`):e.broker.publish(\"events.saved\",s)})}function f(){null!==r&&Date.now()-c>3333&&(o.warn(`Blocked! Forcing insert of ${r.length} pending events!`),d())}o.types={},o.getPendingEvents=function(){return r||[]},o.insertEvents=d,s.blacklist.forEach(e=>l[e]=!0),function(){if(Array.isArray(s.topics)){const o=a.bind(null,\"info\");_.uniq(s.topics).forEach(s=>{e.broker.subscribe(s,o)})}else Object.keys(s.topics).forEach(o=>{const t=a.bind(null,o);_.uniq(s.topics[o]).forEach(o=>{e.broker.subscribe(o,t)})});_.uniq(o.config.print).forEach(o=>{e.broker.subscribe(o,p)})}(),e.broker.subscribe(\"app.started\").setLimit(1).on(\"message\",()=>{u(),setInterval(f,5e3)})});","backend/node_modules/modbus/index.js":"\"use strict\";const fs=require(\"fs\"),_=require(\"lodash\"),csv=require(\"csv\"),deepEqual=require(\"deep-equal\"),modbus=require(\"h5.modbus\"),Tag=require(\"./Tag\");exports.DEFAULT_CONFIG={messengerServerId:\"messenger/server\",programId:\"program\",settingsCollection:e=>e.mongodb.db.collection(\"tags.settings\"),broadcastDelay:100,broadcastFilter:[],writeAllTheThings:null,maxReadQuantity:100,ignoredErrors:[],controlMasters:[],masters:{},tagsFile:null,tags:{},ignoreRe:null,resetTagsDelay:1337},exports.start=((e,t,n)=>{function s(){Object.keys(t.config.masters).forEach(a),function(){const n=t.config;_.forEach(Object.keys(t.masters),e=>{const s=`masters.${e}`;let r=n.tags[s];null!==r&&\"object\"==typeof r||(r=n.tags[s]={}),r.master=e,r.kind=\"virtual\",r.type=\"bool\",r.address=null,r.unit=null,r.readable=!1,r.writable=!1,t.values[s]=!1});let s=0;_.forEach(n.tags,(r,a)=>{let o=t.masters[r.master];!n.writeAllTheThings||o&&!1===o.writeAllTheThings||\"virtual\"===r.kind||\"setting\"===r.kind||\"memory\"===r.kind||(Object.assign(r,{kind:\"register\",address:s,master:n.writeAllTheThings,writable:!0}),o=t.masters[n.writeAllTheThings],s+=u(r.type));const i=new Tag(e.broker,t,a,r);o&&o.tags.push(i),t.tags[a]=i,null==t.values[a]&&(t.values[a]=null)})}(),Object.keys(t.masters).forEach(o),t.config.settingsCollection().find().toArray((e,n)=>{if(e)return t.error(e,\"Failed to read the setting tags.\");const s=Date.now();_.forEach(n,e=>{const n=t.tags[e._id];n&&\"setting\"===n.kind&&n.setValue(e.value,s)})}),require(\"./virtuals\")(e,t),require(\"./safeGuards\")(e,t),n()}function r(e,n){t.setTagValue(e.name,e.value,n)}function a(n){const s=t.config,r=modbus.createMaster(s.masters[n]);r.tags=[],r.on(\"error\",t=>{s.ignoredErrors.includes(t.code)||e.broker.publish(\"modbus.error\",{severity:\"debug\",master:n,unit:-1,message:t.stack,code:t.code})});const a=`masters.${n}`;let o=!1,i=null;r.on(\"transaction complete\",e=>{o||e||(t.debug(\"Master really connected.\",{masterName:n}),o=!0,t.tags[a].setValue(o),null!==i&&(clearTimeout(i),i=null))}),r.on(\"open\",()=>{t.debug(\"Master maybe connected.\",{masterName:n})}),r.on(\"close\",()=>{t.debug(\"Master disconnected.\",{masterName:n}),o=!1,t.tags[a].setValue(o),null===i&&(i=setTimeout(()=>{i=null,_.forEach(r.tags,e=>e.setValue(null))},t.config.resetTagsDelay||1337))}),t.masters[n]=r}function o(n){const s=t.masters[n],r=function(e){const t={};return _.forEach(e,e=>{e.isReadable()&&(null==t[e.unit]&&(t[e.unit]={}),Array.isArray(t[e.unit][e.code])||(t[e.unit][e.code]=[]),t[e.unit][e.code].push(e))}),t}(s.tags),a=[];_.forEach(r,e=>{_.forEach(e,e=>{!function(e,n){const s=n.length-1;let r,a;function o(e,t,n){n===s&&(e.quantity+=u(t.type)-1)}n.sort((e,t)=>e.address-t.address),_.forEach(n,(s,c)=>{if(0===c)return r=i(s),a=s.address,o(r,s,c),void e.push(r);const l=s.address-a;if(r.quantity+l>function(e){const n=t.config.masters[e];return n&&n.maxReadQuantity||t.config.maxReadQuantity}(s.master))return r.quantity+=u(n[c-1].type)-1,r=i(s),a=s.address,o(r,s,c),void e.push(r);r.quantity+=l,o(r,s,c),r.tags.push(s.name),a=s.address})}(a,e)})}),s.once(\"open\",()=>{_.forEach(a,r=>{const a={functionCode:r.functionCode,startingAddress:r.startingAddress,quantity:r.quantity},o=r.unit,i=s.execute({request:a,unit:o,maxRetries:0,interval:t.config.masters[n].interval||25+Math.round(25*Math.random())});i.on(\"complete\",(e,t)=>{s.emit(\"transaction complete\",e,t)}),i.on(\"error\",s=>{const r=(s.code||s.name).replace(\"Error\",\"\");t.config.ignoredErrors.includes(r)||e.broker.publish(\"modbus.error\",{severity:\"debug\",message:s.stack,master:n,unit:o,request:a})}),i.on(\"response\",function(n,s){const r=s.functionCode===modbus.FunctionCode.ReadDiscreteInputs||s.functionCode===modbus.FunctionCode.ReadCoils;return function(a){if(a.isException())return a.exceptionCode===modbus.ExceptionCode.GatewayTargetDeviceFailedToRespond?(o=s.tags,void _.forEach(o,e=>{const n=t.tags[e];n&&n.setValue(null)})):void e.broker.publish(\"modbus.exception\",{severity:\"debug\",master:n,unit:s.unit,functionCode:a.functionCode,exceptionCode:a.exceptionCode,message:a.toString()});var o;if(a.quantity<s.quantity)return void e.broker.publish(\"modbus.incompleteResponse\",{severity:\"debug\",master:n,unit:s.unit,expectedQuantity:s.quantity,actualQuantity:a.quantity});const i=r?a.states:a.data;for(let e=0,n=s.tags.length;e<n;++e){const n=t.tags[s.tags[e]],a=r?i[n.address-s.startingAddress]:c(s,n,i);n.setValue(a)}}}(n,r))})})}function i(e){return{functionCode:e.code,startingAddress:e.address,unit:e.unit,quantity:1,tags:[e.name]}}function u(e){switch(e){case\"double\":return 4;case\"float\":case\"uint32\":case\"int32\":return 2;default:return 1}}function c(e,t,n){const s=2*(t.address-e.startingAddress);switch(t.type){case\"double\":return n.readDoubleBE(s,!0);case\"float\":return n.readFloatBE(s,!0);case\"uint32\":return n.readUInt32BE(s,!0);case\"int32\":return n.readInt32BE(s,!0);case\"int16\":case\"int8\":return n.readInt16BE(s,!0);case\"bool\":return 0===n.readInt16BE(s,!0)?0:1;case\"string\":return n.toString();default:return n.readUInt16BE(s,!0)}}t.config.settingsCollection=t.config.settingsCollection.bind(null,e),t.masters={},t.tags={},t.values={},t.getTagValue=(e=>t.values[e]),t.setTagValue=((e,n,s)=>{if(s||(s=(()=>{})),t.config.ignoreRe&&t.config.ignoreRe.test(e))return t.warn(\"Tried to set ignored tag.\",{tagName:e}),s();const r=t.tags[e];return void 0===r?(t.warn(\"Tried to set unknown tag.\",{tagName:e}),s(Object.assign(new Error(\"UNKNOWN_TAG\"),{tagName:e}))):deepEqual(n,r.getValue())?s():void r.writeValue(n,s)}),e.onModuleReady(t.config.messengerServerId,function(){const n=e[t.config.messengerServerId];n.handle(\"modbus.sync\",(e,n)=>{n(null,{tags:t.tags,values:t.values})}),n.handle(\"modbus.setTagValue\",r),function(){const n=e[t.config.messengerServerId];let s=null;e.broker.subscribe(\"tagValueChanged.**\",r=>{r.tag.broadcastable&&(null===s&&(s={},setTimeout(()=>{e.broker.publish(\"tagValuesChanged\",s),n.broadcast(\"modbus.tagValuesChanged\",s),s=null},t.config.broadcastDelay)),s[r.tag.name]=r.newValue)})}()}),t.config.tagsFile?function(e,t,n){let s;try{s=fs.readFileSync(e,\"utf8\")}catch(e){return void n()}const r=csv.parse(s,{delimiter:\",\",rowDelimiter:\"\\n\",quote:'\"',trim:!0,columns:!0}),a=_.once(n);r.on(\"error\",a),r.on(\"finish\",a),r.on(\"readable\",()=>{let e;for(;e=r.read();)_.isEmpty(e.name)||\"-\"===e.name||\"?\"===e.name||t[e.name]||(_.forEach(e,(t,n)=>{/^[A-Z]/.test(n)?delete e[n]:\"-\"===t||\"?\"===t?e[n]=null:/^[0-9]+(\\.[0-9]+)?$/.test(t)&&(e[n]=parseFloat(t))}),t[e.name]=e)})}(t.config.tagsFile,t.config.tags,s):s()});","backend/node_modules/messenger/server.js":"\"use strict\";const _=require(\"lodash\"),axon=require(\"axon\"),Message=require(\"amp-message\");function monkeyPatch(){axon.RepSocket.prototype.onmessage=function(o){const n=this;return e=>{const t=new Message(e).args,r=t.pop();t.unshift(\"message\"),t.push(function(...e){e[0]=e[0]||null;let t=()=>{};\"function\"==typeof e[e.length-1]&&(t=e.pop());if(e.push(r),o.writable)return o.write(n.pack(e),()=>{t(!0)}),!0;return process.nextTick(()=>{t(!1)}),!1},o),n.emit.apply(n,t)}}}exports.DEFAULT_CONFIG={pubHost:\"0.0.0.0\",pubPort:5050,repHost:\"0.0.0.0\",repPort:5051,pullHost:null,pullPort:5052,broadcastTopics:[]},exports.onModuleSetUp=(o=>{monkeyPatch(o)}),exports.start=function(o,n,e){const t={\"@broadcast\":function(n,e){o.broker.publish(n.topic,n.message,n.meta),e()},\"@subscribe\":function({sock:n,topics:e},t){n.broker||(n.broker=o.broker.sandbox()),_.forEach(e,o=>{n.broker.subscribe(o,(o,e,t)=>{if(n.writable){const r=new Message([{topic:e,message:o,meta:t},\"@publish\"]);n.write(r.toBuffer())}})}),t()}};let r=null,s=null,c=null;function i(o,n,e,r){if(!_.isString(o))return;const s=t[o];_.isFunction(s)&&s({...n,sock:r},(...o)=>{if(o.length&&o[0]instanceof Error){const n=o[0],e={message:n.message,stack:n.stack};Object.keys(n).forEach(o=>e[o]=n[o]),o[0]=e}_.isFunction(e)&&e(...o)})}_.forEach(n.config.broadcastTopics,function(e){o.broker.subscribe(e,function(o,e){n.broadcast(e,void 0===o?null:o)})}),function(){if(!n.config.pullHost)return n.info(\"pull socket not used.\");let e=!1;(c=axon.socket(\"rep\")).set(\"hwm\",10),c.connect(n.config.pullPort,n.config.pullHost),c.on(\"error\",function(o){n.error(o,\"pull socket error\")}),c.on(\"connect\",function(){e=!0,n.info(`pull socket connected on port ${n.config.pullPort}.`),o.broker.publish(\"messenger.client.connected\",{moduleName:n.name,socketType:\"pull\",host:n.config.pullHost,port:n.config.pullPort})}),c.on(\"reconnect attempt\",function(){e&&(n.info(\"pull socket disconnected. Reconnecting...\"),e=!1)}),c.on(\"message\",i)}(),function(o){const e=axon.socket(\"pub\");e.set(\"hwm\",10),e.bind(n.config.pubPort,n.config.pubHost),e.once(\"error\",o),e.on(\"bind\",function(){e.removeListener(\"error\",o),o(null,e)})}(function(o,t){if(o)return e(o);r=t,n.info(`pub socket listening on port ${n.config.pubPort}.`),function(o){const e=axon.socket(\"rep\");e.set(\"hwm\",10),e.bind(n.config.repPort,n.config.repHost),e.once(\"error\",o),e.on(\"disconnect\",o=>{o.broker&&(o.broker.destroy(),o.broker=null)}),e.on(\"bind\",function(){e.removeListener(\"error\",o),e.on(\"message\",i),o(null,e)})}(function(o,t){if(o)return e(o);s=t,n.info(`rep socket listening on port ${n.config.repPort}`),e()})}),n.handle=function(o,n){t[o]=n},n.broadcast=function(o,n){r&&r.send(o,n)}};","backend/node_modules/messenger/client.js":"\"use strict\";const _=require(\"lodash\"),axon=require(\"axon\"),Message=require(\"amp-message\");function monkeyPatch(e){axon.ReqSocket.prototype.onmessage=function(){const o=this;return function(n){const t=new Message(n),s=t.pop(),c=o.callbacks[s],r=t.args;c?(c.apply(null,t.args),delete o.callbacks[s]):\"@publish\"===s&&r.length&&r[0].topic&&e.broker.publish(r[0].topic,r[0].message,r[0].meta)}}}exports.DEFAULT_CONFIG={pubHost:\"127.0.0.1\",pubPort:5050,repHost:\"127.0.0.1\",repPort:5051,pushHost:null,pushPort:5052,responseTimeout:5e3,broadcastTopics:[],subscribeTopics:[]},exports.onModuleSetUp=(e=>{monkeyPatch(e)}),exports.start=((e,o,n)=>{let t,s,c=null;function r(e,n,t,s){s=_.isFunction(s)?_.once(s):function(){};let c=null,r=null;if(r=_.once(function(e){null!==c&&clearTimeout(c),_.isString(e)&&(arguments[0]={message:e}),s.apply(null,arguments)}),\"client\"===e.type&&!e.connected||\"server\"===e.type&&0===e.socks.length)return r({code:\"NO_CONNECTION\",message:\"client\"===e.type?\"Not connected to the server.\":\"No clients connected.\"});e.send(n,t,r);const i=t&&t.responseTimeout||o.config.responseTimeout;c=setTimeout(()=>{c=null,r({code:\"RESPONSE_TIMEOUT\",message:\"Response timeout.\"})},i)}function i(o,n){e.broker.publish(o,n)}function u(){_.isEmpty(o.config.subscribeTopics)||o.request(\"@subscribe\",{topics:o.config.subscribeTopics},e=>{e&&o.error(e,\"Failed to subscribe.\")})}_.forEach(o.config.broadcastTopics,n=>{e.broker.subscribe(n,(e,n,t)=>{o.request(\"@broadcast\",{topic:n,message:e,meta:t})})}),function(){let n=!1;(t=axon.socket(\"sub\")).set(\"hwm\",10),t.connect(o.config.pubPort,o.config.pubHost),t.on(\"error\",function(e){o.error(e,\"sub socket error\")}),t.on(\"connect\",function(){n=!0,o.info(`sub socket connected on port ${o.config.pubPort}.`),e.broker.publish(\"messenger.client.connected\",{moduleName:o.name,socketType:\"sub\",host:o.config.pubHost,port:o.config.pubPort})}),t.on(\"reconnect attempt\",function(){n&&(o.info(\"sub socket disconnected. Reconnecting...\"),n=!1)}),t.on(\"message\",i)}(),function(){let n=!1;(s=axon.socket(\"req\")).set(\"hwm\",10),s.connect(o.config.repPort,o.config.repHost),s.on(\"error\",function(e){o.error(e,\"req socket error\")}),s.on(\"connect\",function(){n=!0,o.info(`req socket connected on port ${o.config.repPort}.`),e.broker.publish(\"messenger.client.connected\",{moduleName:o.name,socketType:\"req\",host:o.config.repHost,port:o.config.repPort}),setImmediate(u)}),s.on(\"reconnect attempt\",function(){n&&(o.info(\"req socket disconnected. Reconnecting...\"),n=!1,e.broker.publish(\"messenger.client.disconnected\",{moduleName:o.name,socketType:\"req\",host:o.config.repHost,port:o.config.repPort}))})}(),function(e){if(!o.config.pushHost)return e(null,null);const n=axon.socket(\"req\");n.set(\"hwm\",10),n.bind(o.config.pushPort,o.config.pushHost),n.once(\"error\",e),n.on(\"bind\",function(){n.removeListener(\"error\",e),e(null,n)})}(function(e,t){if(e)return setImmediate(n,e);null===(c=t)?o.info(\"push socket not used.\"):o.info(`push socket listening on port ${o.config.pushPort}.`),setImmediate(n)}),o.isConnected=function(){return t&&t.connected&&s&&s.connected},o.request=function(e,o,n){r(s,e,o,n)},o.push=function(e,o,n){if(null===c)return n(new Error(\"NO_PUSH_SOCKET\"));r(c,e,o,n)}});","backend/node_modules/horti-program/index.js":"\"use strict\";const _=require(\"lodash\"),Watchdog=require(\"./Watchdog\"),ZoneManager=require(\"./ZoneManager\");exports.DEFAULT_CONFIG={modbusId:\"modbus\",messengerServerId:\"messenger/server\"},exports.models=[require(\"horti-tests/models/hortiTest\")],exports.requiredModules=\"modbus\",exports.start=((e,s)=>{const o=e[s.config.modbusId];let r=null;s.zones={},s.exec=((e,s)=>{null===r&&(r={},process.nextTick(()=>{const e=r;r=null,_.forEach(e,e=>{e()})})),r[s||e.name]=e});let t=null;function n(){if(s.watchdog=new Watchdog(e),o.values.watchdog)return a();t=e.broker.subscribe(\"tagValueChanged.watchdog\",a)}function a(r){if(!r||r.newValue){t&&(t.cancel(),t=null);for(let r=1;r<=o.values.zoneCount;++r)s.zones[r]=new ZoneManager(e,r)}}o.tags.watchdog?s.config.simulate||o.values[\"masters.controlProcess\"]?n():e.broker.subscribe(\"tagValueChanged.masters.controlProcess\",n).setLimit(1):a()});","node_modules/h5.pubsub/lib/MessageBroker.js":"\"use strict\";var Subscriptions=require(\"./Subscriptions\"),Subscription=require(\"./Subscription\"),Sandbox=require(\"./Sandbox\");function MessageBroker(){this.subscriptions=new Subscriptions(this),this.nextSubscriptionId=0,this.listeners={subscribe:[],cancel:[],\"new topic\":[],\"empty topic\":[],message:[]}}module.exports=MessageBroker,MessageBroker.prototype.destroy=function(){this.subscriptions.destroy(),this.subscriptions=null,this.listeners=null},MessageBroker.prototype.sandbox=function(){return new Sandbox(this)},MessageBroker.prototype.publish=function(e,t,s){return void 0===s&&(s={}),this.emit(\"message\",e,t,s),this.subscriptions.send(e,t,s),this},MessageBroker.prototype.subscribe=function(e,t){var s=new Subscription(this.getNextSubscriptionId(),e);return\"function\"==typeof t&&s.on(\"message\",t),this.subscriptions.add(s),this.emit(\"subscribe\",s),s},MessageBroker.prototype.unsubscribe=function(e){return this.subscriptions.remove(e),this},MessageBroker.prototype.count=function(){var e={};if(null===this.subscriptions)return e;return this.subscriptions.count(\"\",e),e},MessageBroker.prototype.on=function(e,t){var s=this.listeners[e];if(\"undefined\"===typeof s)throw new Error(\"Unknown event: \"+e);return s.push(t),this},MessageBroker.prototype.off=function(e,t){var s=this.listeners[e];if(\"undefined\"===typeof s)throw new Error(\"Unknown event: \"+e);var r=s.indexOf(t);return-1!==r&&s.splice(r,1),this},MessageBroker.prototype.emit=function(e,t){var s=this.listeners[e];if(\"undefined\"===typeof s)throw new Error(\"Unknown event: \"+e);if(!s.length)return this;var r=arguments.length;r>4&&(t=Array.prototype.slice.call(arguments)).shift();for(var i=0,n=s.length;i<n;++i){var o=s[i];switch(r){case 4:o(arguments[1],arguments[2],arguments[3]);break;case 3:o(arguments[1],arguments[2]);break;case 2:o(arguments[1]);break;default:o.apply(null,t)}}return this},MessageBroker.prototype.getNextSubscriptionId=function(){return(this.nextSubscriptionId++).toString(36)};","node_modules/h5.pubsub/lib/Subscriptions.js":"\"use strict\";module.exports=Subscriptions;var EMPTY_TOPIC_PARTS=[];function Subscriptions(i){this.messageBroker=i,this.children={},this.subscriptions=[],this.subscriptionsPendingRemoval=[],this.sendingMessagesCount=0,this.removeSubscription=this.removeSubscription.bind(this)}Subscriptions.TOKEN={SEPARATOR:\".\",ANY:\"*\",ALL:\"**\"},Subscriptions.prototype.destroy=function(){for(var i=this.children,s=Object.keys(i),t=0,e=s.length;t<e;++t)i[s[t]].destroy();this.children=null,this.removeSubscriptions(),this.subscriptionsPendingRemoval=null,this.messageBroker=null},Subscriptions.prototype.count=function(i,s){this.subscriptions.length&&(s[i]=this.subscriptions.length);var t=Object.keys(this.children),e=t.length;if(e){0!==i.length&&(i+=Subscriptions.TOKEN.SEPARATOR);for(var n=0;n<e;++n){var o=t[n];this.children[o].count(i+o,s)}}},Subscriptions.prototype.add=function(i){var s=this.splitTopic(i.getTopic());this.addSubscription(s,i)},Subscriptions.prototype.remove=function(i){this.removeSubscriptions(this.splitTopic(i))},Subscriptions.prototype.send=function(i,s,t){var e=this.splitTopic(i);this.sendMessage(e,i,s,t)},Subscriptions.prototype.addSubscription=function(i,s){if(0===i.length)return this.subscriptions.push(s),s.on(\"cancel\",this.removeSubscription),void(1===this.subscriptions.length&&this.messageBroker.emit(\"new topic\",s.getTopic()));var t=this.children,e=i.shift();void 0===t[e]&&(t[e]=new Subscriptions(this.messageBroker)),t[e].addSubscription(i,s)},Subscriptions.prototype.removeSubscriptions=function(i){var s,t;if(void 0!==i&&0!==i.length){var e=i.shift();void 0!==this.children[e]&&this.children[e].removeSubscriptions(i)}else{var n=this.subscriptions;if(!n.length)return;this.subscriptions=[];var o=n[0].getTopic();for(s=0,t=n.length;s<t;++s)n[s].cancel();this.messageBroker.emit(\"empty topic\",o)}},Subscriptions.prototype.sendMessage=function(i,s,t,e){if(++this.sendingMessagesCount,void 0!==this.children[Subscriptions.TOKEN.ALL]&&this.children[Subscriptions.TOKEN.ALL].sendMessage(EMPTY_TOPIC_PARTS,s,t,e),0===i.length)for(var n=0,o=this.subscriptions.length;n<o;++n)this.subscriptions[n].send(s,t,e);else{var r=i.shift();void 0!==this.children[Subscriptions.TOKEN.ANY]&&this.children[Subscriptions.TOKEN.ANY].sendMessage([].concat(i),s,t,e),void 0!==this.children[r]&&this.children[r].sendMessage(i,s,t,e)}--this.sendingMessagesCount,this.removePendingSubscriptions()},Subscriptions.prototype.splitTopic=function(i){var s=i.split(Subscriptions.TOKEN.SEPARATOR).filter(function(i){return 0!==i.length});if(0===s.length)throw new Error(\"Invalid subscription topic: \"+i);return s},Subscriptions.prototype.removeSubscription=function(i){if(this.messageBroker.emit(\"cancel\",i),0!==this.subscriptions.length)return 1===this.subscriptions.length&&this.subscriptions[0]===i?(this.subscriptions.length=0,void this.messageBroker.emit(\"empty topic\",i.getTopic())):void this.removeOrQueueRemoval(i)},Subscriptions.prototype.removeOrQueueRemoval=function(i){0===this.sendingMessagesCount?this.subscriptions.splice(this.subscriptions.indexOf(i),1):this.subscriptionsPendingRemoval.push(i)},Subscriptions.prototype.removePendingSubscriptions=function(){var i=this.subscriptionsPendingRemoval,s=i.length;if(s&&!this.sendingMessagesCount){var t=this.subscriptions;if(s===t.length)return i.length=0,void(t.length=0);var e,n,o=[];for(e=0;e<s;++e)o.push(t.indexOf(i[e]));for(o.sort(function(i,s){return s-i}),e=0,n=o.length;e<n;++e)t.splice(o[e],1);i.length=0}};","node_modules/h5.pubsub/lib/Subscription.js":"\"use strict\";function Subscription(t,i){this.cancelled=!1,this.id=t,this.topic=i,this.messageFilter=null,this.messageLimit=0,this.messageCount=0,this.doFilter=null,this.listeners={cancel:null,message:null}}module.exports=Subscription,Subscription.compileFilter=function(){throw new Error(\"Subscription.compileFilter() is not implemented!\")},Subscription.prototype.toJSON=function(){var t=this.getFilter();return\"function\"==typeof t&&(t=t.toString()),{id:this.getId(),topic:this.getTopic(),limit:this.getLimit(),filter:t}},Subscription.prototype.getId=function(){return this.id},Subscription.prototype.getTopic=function(){return this.topic},Subscription.prototype.getFilter=function(){return this.messageFilter},Subscription.prototype.setFilter=function(t){if(this.messageFilter=t,\"function\"==typeof t)this.doFilter=t;else if(this.doFilter=Subscription.compileFilter(t),\"function\"!=typeof this.doFilter)throw new Error(\"Subscription.compileFilter() must return a function.\");return this},Subscription.prototype.getLimit=function(){return this.messageLimit},Subscription.prototype.setLimit=function(t){if(t<1)throw new Error(\"Subscription limit must be greater than 0.\");return this.messageLimit=t,this},Subscription.prototype.getMessageCount=function(){return this.messageCount},Subscription.prototype.on=function(t,i){if(this.cancelled)return this;var e=this.listeners[t],n=typeof e;if(\"undefined\"===n)throw new Error(\"Unknown event: \"+t);return\"function\"===n?this.listeners[t]=[e,i]:null===e?this.listeners[t]=i:this.listeners[t].push(i),this},Subscription.prototype.off=function(t,i){if(this.cancelled)return this;var e=this.listeners[t],n=typeof e;if(\"undefined\"===n)throw new Error(\"Unknown event: \"+t);if(\"function\"===n&&e===i)this.listeners[t]=null;else if(\"object\"===n&&null!==e){for(var s=-1,r=e.length,o=0;o<r;++o)if(e[o]===i){s=o;break}-1!==s&&(e.splice(s,1),2===r&&(this.listeners[t]=e[0]))}return this},Subscription.prototype.cancel=function(){this.cancelled||(this.cancelled=!0,this.emit(\"cancel\",this),this.listeners=null,this.doFilter=null)},Subscription.prototype.send=function(t,i,e){this.cancelled||null!==this.doFilter&&!this.doFilter(i,t,e,this)||(++this.messageCount,this.emit(\"message\",i,t,e,this),this.messageCount===this.messageLimit&&this.cancel())},Subscription.prototype.emit=function(t){var i=this.listeners[t];if(null!==i){var e=arguments.length;if(\"function\"!=typeof i)for(var n=0,s=i.length;n<s;++n)5===e?i[n](arguments[1],arguments[2],arguments[3],arguments[4]):i[n](arguments[1]);else 5===e?i(arguments[1],arguments[2],arguments[3],arguments[4]):i(arguments[1])}};","node_modules/h5.pubsub/lib/Sandbox.js":"\"use strict\";function Sandbox(t){this.broker=t,this.subscriptions={},this.removeSubscription=this.removeSubscription.bind(this)}module.exports=Sandbox,Sandbox.prototype.destroy=function(){var t=this.subscriptions;null!==t&&Object.keys(t).forEach(function(o){t[o].cancel()}),this.subscriptions=null,this.broker=null},Sandbox.prototype.sandbox=function(){return new Sandbox(this)},Sandbox.prototype.publish=function(t,o,s){return this.broker.publish(t,o,s),this},Sandbox.prototype.subscribe=function(t,o){var s=this.broker.subscribe(t,o);return s.on(\"cancel\",this.removeSubscription),this.subscriptions[s.getId()]=s,s},Sandbox.prototype.unsubscribe=function(t){var o=[],s=this.subscriptions;for(var i in s)s.hasOwnProperty(i)&&s[i].getTopic()===t&&o.push(i);for(var n=0,r=o.length;n<r;++n)s[o[n]].cancel();return this},Sandbox.prototype.removeSubscription=function(t){delete this.subscriptions[t.getId()]};","config/horti-controller.js":"\"use strict\";const mongodb=require(\"./horti-mongodb\");exports.id=\"horti-controller\",Object.assign(exports,require(\"./horti-common\")),exports.modules=[\"updater\",{id:\"h5-mongoose\",name:\"mongoose\"},\"events\",\"modbus\",\"messenger/server\",{id:\"messenger/client\",name:\"messenger/client:frontend\"},\"horti-program\"],exports.updater={expressId:null,sioId:null,packageJsonPath:`${__dirname}/../package.json`,restartDelay:2e3,versionsKey:\"horti\",backendVersionKey:\"controller\",frontendVersionKey:null},exports.events={collection:e=>e.mongoose.model(\"Event\").collection,userId:null,expressId:null,insertDelay:1e3,topics:{debug:[],info:[\"events.**\"],success:[],error:[\"app.started\"]},print:[\"modbus.error\"]},exports[\"messenger/server\"]={pubHost:\"0.0.0.0\",pubPort:5050,repHost:\"0.0.0.0\",repPort:5051,broadcastTopics:[\"events.saved\",\"horti.tests.added\"]},exports[\"messenger/client:frontend\"]={pubHost:\"127.0.0.1\",pubPort:5052,repHost:\"127.0.0.1\",repPort:5053,responseTimeout:15e3},exports.mongoose={uri:mongodb.uri,mongoClient:Object.assign(mongodb.mongoClient,{poolSize:5}),maxConnectTries:10,connectAttemptDelay:500},exports[\"horti-program\"]={},exports.modbus={dbId:\"mongoose\",settingsCollection:e=>e.mongoose.connection.db.collection(\"settings\"),writeAllTheThings:\"sim\",maxReadQuantity:25,ignoredErrors:[\"ECONNREFUSED\",\"EHOSTUNREACH\",\"ResponseTimeout\"],broadcastFilter:[\"health\"],controlMasters:[\"sim\"],masters:{sim:{defaultTimeout:100,interval:100,suppressTransactionErrors:!0,transport:{type:\"ip\"},connection:{type:\"tcp\",socketOptions:{host:\"127.0.0.2\",port:502},noActivityTime:2e3}}},tagsFile:`${__dirname}/tags.csv`,tags:{}};","config/horti-mongodb.js":"\"use strict\";module.exports={uri:process.env.HORTI_MONGODB_URI||\"mongodb://127.0.0.1:27017/walkner-horti\",keepAliveQueryInterval:15e3,mongoClient:{poolSize:5,noDelay:!0,keepAlive:1e3,connectTimeoutMS:3e4,socketTimeoutMS:0,forceServerObjectId:!1,writeConcern:{w:1,wtimeout:5e3},promiseLibrary:global.Promise,useNewUrlParser:!0,useCreateIndex:!0,useFindAndModify:!1,useUnifiedTopology:!0,autoIndex:!0}},process.env.HORTI_MONGODB_REPLICA_SET&&(module.exports.mongoClient.replicaSet=process.env.HORTI_MONGODB_REPLICA_SET);","config/horti-common.js":"\"use strict\";module.exports={serverTimezone:\"Europe/Warsaw\"};","backend/node_modules/util/dateFormatter.js":"\"use strict\";function rpad0(t,e){for(t=String(t);t.length<e;)t=\"0\"+t;return t}exports.formatDate=(t=>{if(!t)return\"\";t instanceof Date||(t=new Date(t));const e=t.getMonth()+1,r=t.getDate();let n=t.getFullYear()+\"-\";return n+=e<10?\"0\"+e:e,n+=r<10?\"-0\"+r:\"-\"+r}),exports.formatTime=((t,e)=>{if(!t)return\"\";t instanceof Date||(t=new Date(t));const r=t.getHours(),n=t.getMinutes(),o=t.getSeconds();let a=r<10?\"0\"+r:r;return a+=n<10?\":0\"+n:\":\"+n,a+=o<10?\":0\"+o:\":\"+o,e&&(a+=\".\"+t.getMilliseconds().toString().padStart(3,\"0\")),a}),exports.formatDateTime=((t,e)=>{if(!t)return\"\";t instanceof Date||(t=new Date(t));const r=t.getMonth()+1,n=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds();let i=t.getFullYear();return i+=r<10?\"-0\"+r:\"-\"+r,i+=n<10?\"-0\"+n:\"-\"+n,i+=o<10?\" 0\"+o:\" \"+o,i+=a<10?\":0\"+a:\":\"+a,i+=s<10?\":0\"+s:\":\"+s,e&&(i+=\".\"+t.getMilliseconds().toString().padStart(3,\"0\")),i}),exports.formatDateUtc=(t=>{if(!t)return\"\";t instanceof Date||(t=new Date(t));const e=t.getUTCMonth()+1,r=t.getUTCDate();let n=t.getUTCFullYear()+\"-\";return n+=e<10?\"0\"+e:e,n+=r<10?\"-0\"+r:\"-\"+r}),exports.formatTimeUtc=((t,e)=>{if(!t)return\"\";t instanceof Date||(t=new Date(t));const r=t.getUTCHours(),n=t.getUTCMinutes(),o=t.getUTCSeconds();let a=r<10?\"0\"+r:r;return a+=n<10?\":0\"+n:\":\"+n,a+=o<10?\":0\"+o:\":\"+o,e&&(a+=\".\"+t.getUTCMilliseconds().toString().padStart(3,\"0\")),a}),exports.formatDateTimeUtc=((t,e)=>{if(!t)return\"\";t instanceof Date||(t=new Date(t));const r=t.getUTCMonth()+1,n=t.getUTCDate(),o=t.getUTCHours(),a=t.getUTCMinutes(),s=t.getUTCSeconds();let i=t.getUTCFullYear();return i+=r<10?\"-0\"+r:\"-\"+r,i+=n<10?\"-0\"+n:\"-\"+n,i+=o<10?\" 0\"+o:\" \"+o,i+=a<10?\":0\"+a:\":\"+a,i+=s<10?\":0\"+s:\":\"+s,e&&(i+=\".\"+t.getUTCMilliseconds().toString().padStart(3,\"0\")),i}),exports.formatDuration=((t,e,r)=>{if(\"number\"!=typeof t||t<=0||isNaN(t))return e?\"00:00:00\":\"0s\";t=Math.round(1e3*t)/1e3;const n=Math.floor(t/3600);let o=\"\";n>0?(o+=e?rpad0(n,2)+\":\":\" \"+n+\"h\",t%=3600):e&&(o+=\"00:\");const a=Math.floor(t/60);a>0?(o+=e?rpad0(a,2)+\":\":\" \"+a+\"min\",t%=60):e&&(o+=\"00:\");const s=t;return s>=1?(o+=e?rpad0(Math[r?\"floor\":\"round\"](s),2):\" \"+Math[r?\"floor\":\"round\"](s)+\"s\",r&&s%1!=0&&(o+=e?\".\"+rpad0(Math.round(s%1*1e3),3):\" \"+Math.round(s%1*1e3)+\"ms\")):s>0&&\"\"===o?o+=\" \"+1e3*s+\"ms\":e&&(o+=\"00\"),e?o:o.substr(1)});","node_modules/moment/locale/pl.js":"!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module&&\"function\"==typeof require?t(require(\"../moment\")):\"function\"==typeof define&&define.amd?define([\"../moment\"],t):t(e.moment)}(this,function(e){\"use strict\";var t=\"stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie\".split(\"_\"),i=\"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia\".split(\"_\"),n=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function s(e,t,i){var n=e+\" \";switch(i){case\"ss\":return n+(r(e)?\"sekundy\":\"sekund\");case\"m\":return t?\"minuta\":\"minut\";case\"mm\":return n+(r(e)?\"minuty\":\"minut\");case\"h\":return t?\"godzina\":\"godzin\";case\"hh\":return n+(r(e)?\"godziny\":\"godzin\");case\"ww\":return n+(r(e)?\"tygodnie\":\"tygodni\");case\"MM\":return n+(r(e)?\"miesice\":\"miesicy\");case\"yy\":return n+(r(e)?\"lata\":\"lat\")}}return e.defineLocale(\"pl\",{months:function(e,n){return e?/D MMMM/.test(n)?i[e.month()]:t[e.month()]:t},monthsShort:\"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru\".split(\"_\"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:\"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota\".split(\"_\"),weekdaysShort:\"ndz_pon_wt_r_czw_pt_sob\".split(\"_\"),weekdaysMin:\"Nd_Pn_Wt_r_Cz_Pt_So\".split(\"_\"),longDateFormat:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"DD.MM.YYYY\",LL:\"D MMMM YYYY\",LLL:\"D MMMM YYYY HH:mm\",LLLL:\"dddd, D MMMM YYYY HH:mm\"},calendar:{sameDay:\"[Dzi o] LT\",nextDay:\"[Jutro o] LT\",nextWeek:function(){switch(this.day()){case 0:return\"[W niedziel o] LT\";case 2:return\"[We wtorek o] LT\";case 3:return\"[W rod o] LT\";case 6:return\"[W sobot o] LT\";default:return\"[W] dddd [o] LT\"}},lastDay:\"[Wczoraj o] LT\",lastWeek:function(){switch(this.day()){case 0:return\"[W zesz niedziel o] LT\";case 3:return\"[W zesz rod o] LT\";case 6:return\"[W zesz sobot o] LT\";default:return\"[W zeszy] dddd [o] LT\"}},sameElse:\"L\"},relativeTime:{future:\"za %s\",past:\"%s temu\",s:\"kilka sekund\",ss:s,m:s,mm:s,h:s,hh:s,d:\"1 dzie\",dd:\"%d dni\",w:\"tydzie\",ww:s,M:\"miesic\",MM:s,y:\"rok\",yy:s},dayOfMonthOrdinalParse:/\\d{1,2}\\./,ordinal:\"%d.\",week:{dow:1,doy:4}})});","node_modules/lodash/lodash.js":"(function(){var n,t=200,r=\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\",e=\"Expected a function\",u=\"Invalid `variable` option passed into `_.template`\",i=\"__lodash_hash_undefined__\",o=500,f=\"__lodash_placeholder__\",a=1,c=2,l=4,s=1,h=2,p=1,v=2,_=4,g=8,y=16,d=32,b=64,w=128,m=256,x=512,j=30,A=\"...\",k=800,O=16,I=1,R=2,E=1/0,z=9007199254740991,S=1.7976931348623157e308,L=NaN,W=4294967295,C=W-1,U=W>>>1,B=[[\"ary\",w],[\"bind\",p],[\"bindKey\",v],[\"curry\",g],[\"curryRight\",y],[\"flip\",x],[\"partial\",d],[\"partialRight\",b],[\"rearg\",m]],T=\"[object Arguments]\",D=\"[object Array]\",$=\"[object AsyncFunction]\",M=\"[object Boolean]\",F=\"[object Date]\",N=\"[object DOMException]\",P=\"[object Error]\",q=\"[object Function]\",Z=\"[object GeneratorFunction]\",K=\"[object Map]\",V=\"[object Number]\",G=\"[object Null]\",H=\"[object Object]\",J=\"[object Proxy]\",Y=\"[object RegExp]\",Q=\"[object Set]\",X=\"[object String]\",nn=\"[object Symbol]\",tn=\"[object Undefined]\",rn=\"[object WeakMap]\",en=\"[object WeakSet]\",un=\"[object ArrayBuffer]\",on=\"[object DataView]\",fn=\"[object Float32Array]\",an=\"[object Float64Array]\",cn=\"[object Int8Array]\",ln=\"[object Int16Array]\",sn=\"[object Int32Array]\",hn=\"[object Uint8Array]\",pn=\"[object Uint8ClampedArray]\",vn=\"[object Uint16Array]\",_n=\"[object Uint32Array]\",gn=/\\b__p \\+= '';/g,yn=/\\b(__p \\+=) '' \\+/g,dn=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,bn=/&(?:amp|lt|gt|quot|#39);/g,wn=/[&<>\"']/g,mn=RegExp(bn.source),xn=RegExp(wn.source),jn=/<%-([\\s\\S]+?)%>/g,An=/<%([\\s\\S]+?)%>/g,kn=/<%=([\\s\\S]+?)%>/g,On=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,In=/^\\w*$/,Rn=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,En=/[\\\\^$.*+?()[\\]{}|]/g,zn=RegExp(En.source),Sn=/^\\s+/,Ln=/\\s/,Wn=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Cn=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,Un=/,? & /,Bn=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Tn=/[()=,{}\\[\\]\\/\\s]/,Dn=/\\\\(\\\\)?/g,$n=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Mn=/\\w*$/,Fn=/^[-+]0x[0-9a-f]+$/i,Nn=/^0b[01]+$/i,Pn=/^\\[object .+?Constructor\\]$/,qn=/^0o[0-7]+$/i,Zn=/^(?:0|[1-9]\\d*)$/,Kn=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,Vn=/($^)/,Gn=/['\\n\\r\\u2028\\u2029\\\\]/g,Hn=\"\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\",Jn=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",Yn=\"[\\\\ud800-\\\\udfff]\",Qn=\"[\"+Jn+\"]\",Xn=\"[\"+Hn+\"]\",nt=\"\\\\d+\",tt=\"[\\\\u2700-\\\\u27bf]\",rt=\"[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]\",et=\"[^\\\\ud800-\\\\udfff\"+Jn+nt+\"\\\\u2700-\\\\u27bfa-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xffA-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",ut=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",it=\"[^\\\\ud800-\\\\udfff]\",ot=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",ft=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",at=\"[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",ct=\"(?:\"+rt+\"|\"+et+\")\",lt=\"(?:\"+at+\"|\"+et+\")\",st=\"(?:\"+Xn+\"|\"+ut+\")\"+\"?\",ht=\"[\\\\ufe0e\\\\ufe0f]?\"+st+(\"(?:\\\\u200d(?:\"+[it,ot,ft].join(\"|\")+\")[\\\\ufe0e\\\\ufe0f]?\"+st+\")*\"),pt=\"(?:\"+[tt,ot,ft].join(\"|\")+\")\"+ht,vt=\"(?:\"+[it+Xn+\"?\",Xn,ot,ft,Yn].join(\"|\")+\")\",_t=RegExp(\"[']\",\"g\"),gt=RegExp(Xn,\"g\"),yt=RegExp(ut+\"(?=\"+ut+\")|\"+vt+ht,\"g\"),dt=RegExp([at+\"?\"+rt+\"+(?:['](?:d|ll|m|re|s|t|ve))?(?=\"+[Qn,at,\"$\"].join(\"|\")+\")\",lt+\"+(?:['](?:D|LL|M|RE|S|T|VE))?(?=\"+[Qn,at+ct,\"$\"].join(\"|\")+\")\",at+\"?\"+ct+\"+(?:['](?:d|ll|m|re|s|t|ve))?\",at+\"+(?:['](?:D|LL|M|RE|S|T|VE))?\",\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",nt,pt].join(\"|\"),\"g\"),bt=RegExp(\"[\\\\u200d\\\\ud800-\\\\udfff\"+Hn+\"\\\\ufe0e\\\\ufe0f]\"),wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mt=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],xt=-1,jt={};jt[fn]=jt[an]=jt[cn]=jt[ln]=jt[sn]=jt[hn]=jt[pn]=jt[vn]=jt[_n]=!0,jt[T]=jt[D]=jt[un]=jt[M]=jt[on]=jt[F]=jt[P]=jt[q]=jt[K]=jt[V]=jt[H]=jt[Y]=jt[Q]=jt[X]=jt[rn]=!1;var At={};At[T]=At[D]=At[un]=At[on]=At[M]=At[F]=At[fn]=At[an]=At[cn]=At[ln]=At[sn]=At[K]=At[V]=At[H]=At[Y]=At[Q]=At[X]=At[nn]=At[hn]=At[pn]=At[vn]=At[_n]=!0,At[P]=At[q]=At[rn]=!1;var kt={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Ot=parseFloat,It=parseInt,Rt=\"object\"==typeof global&&global&&global.Object===Object&&global,Et=\"object\"==typeof self&&self&&self.Object===Object&&self,zt=Rt||Et||Function(\"return this\")(),St=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,Lt=St&&\"object\"==typeof module&&module&&!module.nodeType&&module,Wt=Lt&&Lt.exports===St,Ct=Wt&&Rt.process,Ut=function(){try{var n=Lt&&Lt.require&&Lt.require(\"util\").types;return n||Ct&&Ct.binding&&Ct.binding(\"util\")}catch(n){}}(),Bt=Ut&&Ut.isArrayBuffer,Tt=Ut&&Ut.isDate,Dt=Ut&&Ut.isMap,$t=Ut&&Ut.isRegExp,Mt=Ut&&Ut.isSet,Ft=Ut&&Ut.isTypedArray;function Nt(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function Pt(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function qt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&!1!==t(n[r],r,n););return n}function Zt(n,t){for(var r=null==n?0:n.length;r--&&!1!==t(n[r],r,n););return n}function Kt(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Vt(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function Gt(n,t){return!!(null==n?0:n.length)&&ur(n,t,0)>-1}function Ht(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function Jt(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function Yt(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function Qt(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function Xt(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function nr(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}var tr=ar(\"length\");function rr(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function er(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function ur(n,t,r){return t==t?function(n,t,r){var e=r-1,u=n.length;for(;++e<u;)if(n[e]===t)return e;return-1}(n,t,r):er(n,or,r)}function ir(n,t,r,e){for(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function or(n){return n!=n}function fr(n,t){var r=null==n?0:n.length;return r?sr(n,t)/r:L}function ar(t){return function(r){return null==r?n:r[t]}}function cr(t){return function(r){return null==t?n:t[r]}}function lr(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function sr(t,r){for(var e,u=-1,i=t.length;++u<i;){var o=r(t[u]);o!==n&&(e=e===n?o:e+o)}return e}function hr(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function pr(n){return n?n.slice(0,zr(n)+1).replace(Sn,\"\"):n}function vr(n){return function(t){return n(t)}}function _r(n,t){return Jt(t,function(t){return n[t]})}function gr(n,t){return n.has(t)}function yr(n,t){for(var r=-1,e=n.length;++r<e&&ur(t,n[r],0)>-1;);return r}function dr(n,t){for(var r=n.length;r--&&ur(t,n[r],0)>-1;);return r}var br=cr({\"\":\"A\",\"\":\"A\",\"\":\"A\",\"\":\"A\",\"\":\"A\",\"\":\"A\",\"\":\"a\",\"\":\"a\",\"\":\"a\",\"\":\"a\",\"\":\"a\",\"\":\"a\",\"\":\"C\",\"\":\"c\",\"\":\"D\",\"\":\"d\",\"\":\"E\",\"\":\"E\",\"\":\"E\",\"\":\"E\",\"\":\"e\",\"\":\"e\",\"\":\"e\",\"\":\"e\",\"\":\"I\",\"\":\"I\",\"\":\"I\",\"\":\"I\",\"\":\"i\",\"\":\"i\",\"\":\"i\",\"\":\"i\",\"\":\"N\",\"\":\"n\",\"\":\"O\",\"\":\"O\",\"\":\"O\",\"\":\"O\",\"\":\"O\",\"\":\"O\",\"\":\"o\",\"\":\"o\",\"\":\"o\",\"\":\"o\",\"\":\"o\",\"\":\"o\",\"\":\"U\",\"\":\"U\",\"\":\"U\",\"\":\"U\",\"\":\"u\",\"\":\"u\",\"\":\"u\",\"\":\"u\",\"\":\"Y\",\"\":\"y\",\"\":\"y\",\"\":\"Ae\",\"\":\"ae\",\"\":\"Th\",\"\":\"th\",\"\":\"ss\",\"\":\"A\",\"\":\"A\",\"\":\"A\",\"\":\"a\",\"\":\"a\",\"\":\"a\",\"\":\"C\",\"\":\"C\",\"\":\"C\",\"\":\"C\",\"\":\"c\",\"\":\"c\",\"\":\"c\",\"\":\"c\",\"\":\"D\",\"\":\"D\",\"\":\"d\",\"\":\"d\",\"\":\"E\",\"\":\"E\",\"\":\"E\",\"\":\"E\",\"\":\"E\",\"\":\"e\",\"\":\"e\",\"\":\"e\",\"\":\"e\",\"\":\"e\",\"\":\"G\",\"\":\"G\",\"\":\"G\",\"\":\"G\",\"\":\"g\",\"\":\"g\",\"\":\"g\",\"\":\"g\",\"\":\"H\",\"\":\"H\",\"\":\"h\",\"\":\"h\",\"\":\"I\",\"\":\"I\",\"\":\"I\",\"\":\"I\",\"\":\"I\",\"\":\"i\",\"\":\"i\",\"\":\"i\",\"\":\"i\",\"\":\"i\",\"\":\"J\",\"\":\"j\",\"\":\"K\",\"\":\"k\",\"\":\"k\",\"\":\"L\",\"\":\"L\",\"\":\"L\",\"\":\"L\",\"\":\"L\",\"\":\"l\",\"\":\"l\",\"\":\"l\",\"\":\"l\",\"\":\"l\",\"\":\"N\",\"\":\"N\",\"\":\"N\",\"\":\"N\",\"\":\"n\",\"\":\"n\",\"\":\"n\",\"\":\"n\",\"\":\"O\",\"\":\"O\",\"\":\"O\",\"\":\"o\",\"\":\"o\",\"\":\"o\",\"\":\"R\",\"\":\"R\",\"\":\"R\",\"\":\"r\",\"\":\"r\",\"\":\"r\",\"\":\"S\",\"\":\"S\",\"\":\"S\",\"\":\"S\",\"\":\"s\",\"\":\"s\",\"\":\"s\",\"\":\"s\",\"\":\"T\",\"\":\"T\",\"\":\"T\",\"\":\"t\",\"\":\"t\",\"\":\"t\",\"\":\"U\",\"\":\"U\",\"\":\"U\",\"\":\"U\",\"\":\"U\",\"\":\"U\",\"\":\"u\",\"\":\"u\",\"\":\"u\",\"\":\"u\",\"\":\"u\",\"\":\"u\",\"\":\"W\",\"\":\"w\",\"\":\"Y\",\"\":\"y\",\"\":\"Y\",\"\":\"Z\",\"\":\"Z\",\"\":\"Z\",\"\":\"z\",\"\":\"z\",\"\":\"z\",\"\":\"IJ\",\"\":\"ij\",\"\":\"Oe\",\"\":\"oe\",\"\":\"'n\",\"\":\"s\"}),wr=cr({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"});function mr(n){return\"\\\\\"+kt[n]}function xr(n){return bt.test(n)}function jr(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function Ar(n,t){return function(r){return n(t(r))}}function kr(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==f||(n[r]=f,i[u++]=r)}return i}function Or(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function Ir(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function Rr(n){return xr(n)?function(n){var t=yt.lastIndex=0;for(;yt.test(n);)++t;return t}(n):tr(n)}function Er(n){return xr(n)?function(n){return n.match(yt)||[]}(n):function(n){return n.split(\"\")}(n)}function zr(n){for(var t=n.length;t--&&Ln.test(n.charAt(t)););return t}var Sr=cr({\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"});var Lr=function Ln(Hn){var Jn,Yn=(Hn=null==Hn?zt:Lr.defaults(zt.Object(),Hn,Lr.pick(zt,mt))).Array,Qn=Hn.Date,Xn=Hn.Error,nt=Hn.Function,tt=Hn.Math,rt=Hn.Object,et=Hn.RegExp,ut=Hn.String,it=Hn.TypeError,ot=Yn.prototype,ft=nt.prototype,at=rt.prototype,ct=Hn[\"__core-js_shared__\"],lt=ft.toString,st=at.hasOwnProperty,ht=0,pt=(Jn=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+Jn:\"\",vt=at.toString,yt=lt.call(rt),bt=zt._,kt=et(\"^\"+lt.call(st).replace(En,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),Rt=Wt?Hn.Buffer:n,Et=Hn.Symbol,St=Hn.Uint8Array,Lt=Rt?Rt.allocUnsafe:n,Ct=Ar(rt.getPrototypeOf,rt),Ut=rt.create,tr=at.propertyIsEnumerable,cr=ot.splice,Wr=Et?Et.isConcatSpreadable:n,Cr=Et?Et.iterator:n,Ur=Et?Et.toStringTag:n,Br=function(){try{var n=Mi(rt,\"defineProperty\");return n({},\"\",{}),n}catch(n){}}(),Tr=Hn.clearTimeout!==zt.clearTimeout&&Hn.clearTimeout,Dr=Qn&&Qn.now!==zt.Date.now&&Qn.now,$r=Hn.setTimeout!==zt.setTimeout&&Hn.setTimeout,Mr=tt.ceil,Fr=tt.floor,Nr=rt.getOwnPropertySymbols,Pr=Rt?Rt.isBuffer:n,qr=Hn.isFinite,Zr=ot.join,Kr=Ar(rt.keys,rt),Vr=tt.max,Gr=tt.min,Hr=Qn.now,Jr=Hn.parseInt,Yr=tt.random,Qr=ot.reverse,Xr=Mi(Hn,\"DataView\"),ne=Mi(Hn,\"Map\"),te=Mi(Hn,\"Promise\"),re=Mi(Hn,\"Set\"),ee=Mi(Hn,\"WeakMap\"),ue=Mi(rt,\"create\"),ie=ee&&new ee,oe={},fe=ho(Xr),ae=ho(ne),ce=ho(te),le=ho(re),se=ho(ee),he=Et?Et.prototype:n,pe=he?he.valueOf:n,ve=he?he.toString:n;function _e(n){if(Sf(n)&&!wf(n)&&!(n instanceof be)){if(n instanceof de)return n;if(st.call(n,\"__wrapped__\"))return po(n)}return new de(n)}var ge=function(){function t(){}return function(r){if(!zf(r))return{};if(Ut)return Ut(r);t.prototype=r;var e=new t;return t.prototype=n,e}}();function ye(){}function de(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=n}function be(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function we(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function me(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function xe(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function je(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new xe;++t<r;)this.add(n[t])}function Ae(n){var t=this.__data__=new me(n);this.size=t.size}function ke(n,t){var r=wf(n),e=!r&&bf(n),u=!r&&!e&&Af(n),i=!r&&!e&&!u&&$f(n),o=r||e||u||i,f=o?hr(n.length,ut):[],a=f.length;for(var c in n)!t&&!st.call(n,c)||o&&(\"length\"==c||u&&(\"offset\"==c||\"parent\"==c)||i&&(\"buffer\"==c||\"byteLength\"==c||\"byteOffset\"==c)||Vi(c,a))||f.push(c);return f}function Oe(t){var r=t.length;return r?t[ju(0,r-1)]:n}function Ie(n,t){return co(ui(n),Be(t,0,n.length))}function Re(n){return co(ui(n))}function Ee(t,r,e){(e===n||gf(t[r],e))&&(e!==n||r in t)||Ce(t,r,e)}function ze(t,r,e){var u=t[r];st.call(t,r)&&gf(u,e)&&(e!==n||r in t)||Ce(t,r,e)}function Se(n,t){for(var r=n.length;r--;)if(gf(n[r][0],t))return r;return-1}function Le(n,t,r,e){return Fe(n,function(n,u,i){t(e,n,r(n),i)}),e}function We(n,t){return n&&ii(t,fa(t),n)}function Ce(n,t,r){\"__proto__\"==t&&Br?Br(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Ue(t,r){for(var e=-1,u=r.length,i=Yn(u),o=null==t;++e<u;)i[e]=o?n:ra(t,r[e]);return i}function Be(t,r,e){return t==t&&(e!==n&&(t=t<=e?t:e),r!==n&&(t=t>=r?t:r)),t}function Te(t,r,e,u,i,o){var f,s=r&a,h=r&c,p=r&l;if(e&&(f=i?e(t,u,i,o):e(t)),f!==n)return f;if(!zf(t))return t;var v=wf(t);if(v){if(f=function(n){var t=n.length,r=new n.constructor(t);return t&&\"string\"==typeof n[0]&&st.call(n,\"index\")&&(r.index=n.index,r.input=n.input),r}(t),!s)return ui(t,f)}else{var _=Pi(t),g=_==q||_==Z;if(Af(t))return Qu(t,s);if(_==H||_==T||g&&!i){if(f=h||g?{}:Zi(t),!s)return h?function(n,t){return ii(n,Ni(n),t)}(t,function(n,t){return n&&ii(t,aa(t),n)}(f,t)):function(n,t){return ii(n,Fi(n),t)}(t,We(f,t))}else{if(!At[_])return i?t:{};f=function(n,t,r){var e,u,i,o=n.constructor;switch(t){case un:return Xu(n);case M:case F:return new o(+n);case on:return function(n,t){var r=t?Xu(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}(n,r);case fn:case an:case cn:case ln:case sn:case hn:case pn:case vn:case _n:return ni(n,r);case K:return new o;case V:case X:return new o(n);case Y:return(i=new(u=n).constructor(u.source,Mn.exec(u))).lastIndex=u.lastIndex,i;case Q:return new o;case nn:return e=n,pe?rt(pe.call(e)):{}}}(t,_,s)}}o||(o=new Ae);var y=o.get(t);if(y)return y;o.set(t,f),Bf(t)?t.forEach(function(n){f.add(Te(n,r,e,n,t,o))}):Lf(t)&&t.forEach(function(n,u){f.set(u,Te(n,r,e,u,t,o))});var d=v?n:(p?h?Wi:Li:h?aa:fa)(t);return qt(d||t,function(n,u){d&&(n=t[u=n]),ze(f,u,Te(n,r,e,u,t,o))}),f}function De(t,r,e){var u=e.length;if(null==t)return!u;for(t=rt(t);u--;){var i=e[u],o=r[i],f=t[i];if(f===n&&!(i in t)||!o(f))return!1}return!0}function $e(t,r,u){if(\"function\"!=typeof t)throw new it(e);return io(function(){t.apply(n,u)},r)}function Me(n,r,e,u){var i=-1,o=Gt,f=!0,a=n.length,c=[],l=r.length;if(!a)return c;e&&(r=Jt(r,vr(e))),u?(o=Ht,f=!1):r.length>=t&&(o=gr,f=!1,r=new je(r));n:for(;++i<a;){var s=n[i],h=null==e?s:e(s);if(s=u||0!==s?s:0,f&&h==h){for(var p=l;p--;)if(r[p]===h)continue n;c.push(s)}else o(r,h,u)||c.push(s)}return c}_e.templateSettings={escape:jn,evaluate:An,interpolate:kn,variable:\"\",imports:{_:_e}},_e.prototype=ye.prototype,_e.prototype.constructor=_e,de.prototype=ge(ye.prototype),de.prototype.constructor=de,be.prototype=ge(ye.prototype),be.prototype.constructor=be,we.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},we.prototype.delete=function(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},we.prototype.get=function(t){var r=this.__data__;if(ue){var e=r[t];return e===i?n:e}return st.call(r,t)?r[t]:n},we.prototype.has=function(t){var r=this.__data__;return ue?r[t]!==n:st.call(r,t)},we.prototype.set=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ue&&r===n?i:r,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(n){var t=this.__data__,r=Se(t,n);return!(r<0||(r==t.length-1?t.pop():cr.call(t,r,1),--this.size,0))},me.prototype.get=function(t){var r=this.__data__,e=Se(r,t);return e<0?n:r[e][1]},me.prototype.has=function(n){return Se(this.__data__,n)>-1},me.prototype.set=function(n,t){var r=this.__data__,e=Se(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this},xe.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(ne||me),string:new we}},xe.prototype.delete=function(n){var t=Di(this,n).delete(n);return this.size-=t?1:0,t},xe.prototype.get=function(n){return Di(this,n).get(n)},xe.prototype.has=function(n){return Di(this,n).has(n)},xe.prototype.set=function(n,t){var r=Di(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},je.prototype.add=je.prototype.push=function(n){return this.__data__.set(n,i),this},je.prototype.has=function(n){return this.__data__.has(n)},Ae.prototype.clear=function(){this.__data__=new me,this.size=0},Ae.prototype.delete=function(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r},Ae.prototype.get=function(n){return this.__data__.get(n)},Ae.prototype.has=function(n){return this.__data__.has(n)},Ae.prototype.set=function(n,r){var e=this.__data__;if(e instanceof me){var u=e.__data__;if(!ne||u.length<t-1)return u.push([n,r]),this.size=++e.size,this;e=this.__data__=new xe(u)}return e.set(n,r),this.size=e.size,this};var Fe=ai(He),Ne=ai(Je,!0);function Pe(n,t){var r=!0;return Fe(n,function(n,e,u){return r=!!t(n,e,u)}),r}function qe(t,r,e){for(var u=-1,i=t.length;++u<i;){var o=t[u],f=r(o);if(null!=f&&(a===n?f==f&&!Df(f):e(f,a)))var a=f,c=o}return c}function Ze(n,t){var r=[];return Fe(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Ke(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Ki),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?Ke(f,t-1,r,e,u):Yt(u,f):e||(u[u.length]=f)}return u}var Ve=ci(),Ge=ci(!0);function He(n,t){return n&&Ve(n,t,fa)}function Je(n,t){return n&&Ge(n,t,fa)}function Ye(n,t){return Vt(t,function(t){return If(n[t])})}function Qe(t,r){for(var e=0,u=(r=Gu(r,t)).length;null!=t&&e<u;)t=t[so(r[e++])];return e&&e==u?t:n}function Xe(n,t,r){var e=t(n);return wf(n)?e:Yt(e,r(n))}function nu(t){return null==t?t===n?tn:G:Ur&&Ur in rt(t)?function(t){var r=st.call(t,Ur),e=t[Ur];try{t[Ur]=n;var u=!0}catch(n){}var i=vt.call(t);return u&&(r?t[Ur]=e:delete t[Ur]),i}(t):function(n){return vt.call(n)}(t)}function tu(n,t){return n>t}function ru(n,t){return null!=n&&st.call(n,t)}function eu(n,t){return null!=n&&t in rt(n)}function uu(t,r,e){for(var u=e?Ht:Gt,i=t[0].length,o=t.length,f=o,a=Yn(o),c=1/0,l=[];f--;){var s=t[f];f&&r&&(s=Jt(s,vr(r))),c=Gr(s.length,c),a[f]=!e&&(r||i>=120&&s.length>=120)?new je(f&&s):n}s=t[0];var h=-1,p=a[0];n:for(;++h<i&&l.length<c;){var v=s[h],_=r?r(v):v;if(v=e||0!==v?v:0,!(p?gr(p,_):u(l,_,e))){for(f=o;--f;){var g=a[f];if(!(g?gr(g,_):u(t[f],_,e)))continue n}p&&p.push(_),l.push(v)}}return l}function iu(t,r,e){var u=null==(t=ro(t,r=Gu(r,t)))?t:t[so(ko(r))];return null==u?n:Nt(u,t,e)}function ou(n){return Sf(n)&&nu(n)==T}function fu(t,r,e,u,i){return t===r||(null==t||null==r||!Sf(t)&&!Sf(r)?t!=t&&r!=r:function(t,r,e,u,i,o){var f=wf(t),a=wf(r),c=f?D:Pi(t),l=a?D:Pi(r),p=(c=c==T?H:c)==H,v=(l=l==T?H:l)==H,_=c==l;if(_&&Af(t)){if(!Af(r))return!1;f=!0,p=!1}if(_&&!p)return o||(o=new Ae),f||$f(t)?zi(t,r,e,u,i,o):function(n,t,r,e,u,i,o){switch(r){case on:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case un:return!(n.byteLength!=t.byteLength||!i(new St(n),new St(t)));case M:case F:case V:return gf(+n,+t);case P:return n.name==t.name&&n.message==t.message;case Y:case X:return n==t+\"\";case K:var f=jr;case Q:var a=e&s;if(f||(f=Or),n.size!=t.size&&!a)return!1;var c=o.get(n);if(c)return c==t;e|=h,o.set(n,t);var l=zi(f(n),f(t),e,u,i,o);return o.delete(n),l;case nn:if(pe)return pe.call(n)==pe.call(t)}return!1}(t,r,c,e,u,i,o);if(!(e&s)){var g=p&&st.call(t,\"__wrapped__\"),y=v&&st.call(r,\"__wrapped__\");if(g||y){var d=g?t.value():t,b=y?r.value():r;return o||(o=new Ae),i(d,b,e,u,o)}}return!!_&&(o||(o=new Ae),function(t,r,e,u,i,o){var f=e&s,a=Li(t),c=a.length,l=Li(r).length;if(c!=l&&!f)return!1;for(var h=c;h--;){var p=a[h];if(!(f?p in r:st.call(r,p)))return!1}var v=o.get(t),_=o.get(r);if(v&&_)return v==r&&_==t;var g=!0;o.set(t,r),o.set(r,t);for(var y=f;++h<c;){p=a[h];var d=t[p],b=r[p];if(u)var w=f?u(b,d,p,r,t,o):u(d,b,p,t,r,o);if(!(w===n?d===b||i(d,b,e,u,o):w)){g=!1;break}y||(y=\"constructor\"==p)}if(g&&!y){var m=t.constructor,x=r.constructor;m!=x&&\"constructor\"in t&&\"constructor\"in r&&!(\"function\"==typeof m&&m instanceof m&&\"function\"==typeof x&&x instanceof x)&&(g=!1)}return o.delete(t),o.delete(r),g}(t,r,e,u,i,o))}(t,r,e,u,fu,i))}function au(t,r,e,u){var i=e.length,o=i,f=!u;if(null==t)return!o;for(t=rt(t);i--;){var a=e[i];if(f&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var c=(a=e[i])[0],l=t[c],p=a[1];if(f&&a[2]){if(l===n&&!(c in t))return!1}else{var v=new Ae;if(u)var _=u(l,p,c,t,r,v);if(!(_===n?fu(p,l,s|h,u,v):_))return!1}}return!0}function cu(n){return!(!zf(n)||pt&&pt in n)&&(If(n)?kt:Pn).test(ho(n))}function lu(n){return\"function\"==typeof n?n:null==n?Wa:\"object\"==typeof n?wf(n)?gu(n[0],n[1]):_u(n):Na(n)}function su(n){if(!Qi(n))return Kr(n);var t=[];for(var r in rt(n))st.call(n,r)&&\"constructor\"!=r&&t.push(r);return t}function hu(n){if(!zf(n))return function(n){var t=[];if(null!=n)for(var r in rt(n))t.push(r);return t}(n);var t=Qi(n),r=[];for(var e in n)(\"constructor\"!=e||!t&&st.call(n,e))&&r.push(e);return r}function pu(n,t){return n<t}function vu(n,t){var r=-1,e=xf(n)?Yn(n.length):[];return Fe(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function _u(n){var t=$i(n);return 1==t.length&&t[0][2]?no(t[0][0],t[0][1]):function(r){return r===n||au(r,n,t)}}function gu(t,r){return Hi(t)&&Xi(r)?no(so(t),r):function(e){var u=ra(e,t);return u===n&&u===r?ea(e,t):fu(r,u,s|h)}}function yu(t,r,e,u,i){t!==r&&Ve(r,function(o,f){if(i||(i=new Ae),zf(o))!function(t,r,e,u,i,o,f){var a=eo(t,e),c=eo(r,e),l=f.get(c);if(l)Ee(t,e,l);else{var s=o?o(a,c,e+\"\",t,r,f):n,h=s===n;if(h){var p=wf(c),v=!p&&Af(c),_=!p&&!v&&$f(c);s=c,p||v||_?wf(a)?s=a:jf(a)?s=ui(a):v?(h=!1,s=Qu(c,!0)):_?(h=!1,s=ni(c,!0)):s=[]:Cf(c)||bf(c)?(s=a,bf(a)?s=Vf(a):zf(a)&&!If(a)||(s=Zi(c))):h=!1}h&&(f.set(c,s),i(s,c,u,o,f),f.delete(c)),Ee(t,e,s)}}(t,r,f,e,yu,u,i);else{var a=u?u(eo(t,f),o,f+\"\",t,r,i):n;a===n&&(a=o),Ee(t,f,a)}},aa)}function du(t,r){var e=t.length;if(e)return Vi(r+=r<0?e:0,e)?t[r]:n}function bu(n,t,r){var e=-1;return t=Jt(t=t.length?Jt(t,function(n){return wf(n)?function(t){return Qe(t,1===n.length?n[0]:n)}:n}):[Wa],vr(Ti())),function(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}(vu(n,function(n,r,u){return{criteria:Jt(t,function(t){return t(n)}),index:++e,value:n}}),function(n,t){return function(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var a=ti(u[e],i[e]);if(a){if(e>=f)return a;var c=r[e];return a*(\"desc\"==c?-1:1)}}return n.index-t.index}(n,t,r)})}function wu(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=Qe(n,o);r(f,o)&&Ru(i,Gu(o,n),f)}return i}function mu(n,t,r,e){var u=e?ir:ur,i=-1,o=t.length,f=n;for(n===t&&(t=ui(t)),r&&(f=Jt(n,vr(r)));++i<o;)for(var a=0,c=t[i],l=r?r(c):c;(a=u(f,l,a,e))>-1;)f!==n&&cr.call(f,a,1),cr.call(n,a,1);return n}function xu(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Vi(u)?cr.call(n,u,1):Mu(n,u)}}return n}function ju(n,t){return n+Fr(Yr()*(t-n+1))}function Au(n,t){var r=\"\";if(!n||t<1||t>z)return r;do{t%2&&(r+=n),(t=Fr(t/2))&&(n+=n)}while(t);return r}function ku(n,t){return oo(to(n,t,Wa),n+\"\")}function Ou(n){return Oe(ga(n))}function Iu(n,t){var r=ga(n);return co(r,Be(t,0,r.length))}function Ru(t,r,e,u){if(!zf(t))return t;for(var i=-1,o=(r=Gu(r,t)).length,f=o-1,a=t;null!=a&&++i<o;){var c=so(r[i]),l=e;if(\"__proto__\"===c||\"constructor\"===c||\"prototype\"===c)return t;if(i!=f){var s=a[c];(l=u?u(s,c,a):n)===n&&(l=zf(s)?s:Vi(r[i+1])?[]:{})}ze(a,c,l),a=a[c]}return t}var Eu=ie?function(n,t){return ie.set(n,t),n}:Wa,zu=Br?function(n,t){return Br(n,\"toString\",{configurable:!0,enumerable:!1,value:za(t),writable:!0})}:Wa;function Su(n){return co(ga(n))}function Lu(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),(r=r>u?u:r)<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Yn(u);++e<u;)i[e]=n[e+t];return i}function Wu(n,t){var r;return Fe(n,function(n,e,u){return!(r=t(n,e,u))}),!!r}function Cu(n,t,r){var e=0,u=null==n?e:n.length;if(\"number\"==typeof t&&t==t&&u<=U){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!Df(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return Uu(n,t,Wa,r)}function Uu(t,r,e,u){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var f=(r=e(r))!=r,a=null===r,c=Df(r),l=r===n;i<o;){var s=Fr((i+o)/2),h=e(t[s]),p=h!==n,v=null===h,_=h==h,g=Df(h);if(f)var y=u||_;else y=l?_&&(u||p):a?_&&p&&(u||!v):c?_&&p&&!v&&(u||!g):!v&&!g&&(u?h<=r:h<r);y?i=s+1:o=s}return Gr(o,C)}function Bu(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r],f=t?t(o):o;if(!r||!gf(f,a)){var a=f;i[u++]=0===o?0:o}}return i}function Tu(n){return\"number\"==typeof n?n:Df(n)?L:+n}function Du(n){if(\"string\"==typeof n)return n;if(wf(n))return Jt(n,Du)+\"\";if(Df(n))return ve?ve.call(n):\"\";var t=n+\"\";return\"0\"==t&&1/n==-E?\"-0\":t}function $u(n,r,e){var u=-1,i=Gt,o=n.length,f=!0,a=[],c=a;if(e)f=!1,i=Ht;else if(o>=t){var l=r?null:Ai(n);if(l)return Or(l);f=!1,i=gr,c=new je}else c=r?[]:a;n:for(;++u<o;){var s=n[u],h=r?r(s):s;if(s=e||0!==s?s:0,f&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue n;r&&c.push(h),a.push(s)}else i(c,h,e)||(c!==a&&c.push(h),a.push(s))}return a}function Mu(n,t){return null==(n=ro(n,t=Gu(t,n)))||delete n[so(ko(t))]}function Fu(n,t,r,e){return Ru(n,t,r(Qe(n,t)),e)}function Nu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Lu(n,e?0:i,e?i+1:u):Lu(n,e?i+1:0,e?u:i)}function Pu(n,t){var r=n;return r instanceof be&&(r=r.value()),Qt(t,function(n,t){return t.func.apply(t.thisArg,Yt([n],t.args))},r)}function qu(n,t,r){var e=n.length;if(e<2)return e?$u(n[0]):[];for(var u=-1,i=Yn(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Me(i[u]||o,n[f],t,r));return $u(Ke(i,1),t,r)}function Zu(t,r,e){for(var u=-1,i=t.length,o=r.length,f={};++u<i;){var a=u<o?r[u]:n;e(f,t[u],a)}return f}function Ku(n){return jf(n)?n:[]}function Vu(n){return\"function\"==typeof n?n:Wa}function Gu(n,t){return wf(n)?n:Hi(n,t)?[n]:lo(Gf(n))}var Hu=ku;function Ju(t,r,e){var u=t.length;return e=e===n?u:e,!r&&e>=u?t:Lu(t,r,e)}var Yu=Tr||function(n){return zt.clearTimeout(n)};function Qu(n,t){if(t)return n.slice();var r=n.length,e=Lt?Lt(r):new n.constructor(r);return n.copy(e),e}function Xu(n){var t=new n.constructor(n.byteLength);return new St(t).set(new St(n)),t}function ni(n,t){var r=t?Xu(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}function ti(t,r){if(t!==r){var e=t!==n,u=null===t,i=t==t,o=Df(t),f=r!==n,a=null===r,c=r==r,l=Df(r);if(!a&&!l&&!o&&t>r||o&&f&&c&&!a&&!l||u&&f&&c||!e&&c||!i)return 1;if(!u&&!o&&!l&&t<r||l&&e&&i&&!u&&!o||a&&e&&i||!f&&i||!c)return-1}return 0}function ri(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,a=t.length,c=Vr(i-o,0),l=Yn(a+c),s=!e;++f<a;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;c--;)l[f++]=n[u++];return l}function ei(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,a=-1,c=t.length,l=Vr(i-f,0),s=Yn(l+c),h=!e;++u<l;)s[u]=n[u];for(var p=u;++a<c;)s[p+a]=t[a];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function ui(n,t){var r=-1,e=n.length;for(t||(t=Yn(e));++r<e;)t[r]=n[r];return t}function ii(t,r,e,u){var i=!e;e||(e={});for(var o=-1,f=r.length;++o<f;){var a=r[o],c=u?u(e[a],t[a],a,e,t):n;c===n&&(c=t[a]),i?Ce(e,a,c):ze(e,a,c)}return e}function oi(n,t){return function(r,e){var u=wf(r)?Pt:Le,i=t?t():{};return u(r,n,Ti(e,2),i)}}function fi(t){return ku(function(r,e){var u=-1,i=e.length,o=i>1?e[i-1]:n,f=i>2?e[2]:n;for(o=t.length>3&&\"function\"==typeof o?(i--,o):n,f&&Gi(e[0],e[1],f)&&(o=i<3?n:o,i=1),r=rt(r);++u<i;){var a=e[u];a&&t(r,a,u,o)}return r})}function ai(n,t){return function(r,e){if(null==r)return r;if(!xf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=rt(r);(t?i--:++i<u)&&!1!==e(o[i],i,o););return r}}function ci(n){return function(t,r,e){for(var u=-1,i=rt(t),o=e(t),f=o.length;f--;){var a=o[n?f:++u];if(!1===r(i[a],a,i))break}return t}}function li(t){return function(r){var e=xr(r=Gf(r))?Er(r):n,u=e?e[0]:r.charAt(0),i=e?Ju(e,1).join(\"\"):r.slice(1);return u[t]()+i}}function si(n){return function(t){return Qt(Ia(ba(t).replace(_t,\"\")),n,\"\")}}function hi(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ge(n.prototype),e=n.apply(r,t);return zf(e)?e:r}}function pi(t){return function(r,e,u){var i=rt(r);if(!xf(r)){var o=Ti(e,3);r=fa(r),e=function(n){return o(i[n],n,i)}}var f=t(r,e,u);return f>-1?i[o?r[f]:f]:n}}function vi(t){return Si(function(r){var u=r.length,i=u,o=de.prototype.thru;for(t&&r.reverse();i--;){var f=r[i];if(\"function\"!=typeof f)throw new it(e);if(o&&!a&&\"wrapper\"==Ui(f))var a=new de([],!0)}for(i=a?i:u;++i<u;){var c=Ui(f=r[i]),l=\"wrapper\"==c?Ci(f):n;a=l&&Ji(l[0])&&l[1]==(w|g|d|m)&&!l[4].length&&1==l[9]?a[Ui(l[0])].apply(a,l[3]):1==f.length&&Ji(f)?a[c]():a.thru(f)}return function(){var n=arguments,t=n[0];if(a&&1==n.length&&wf(t))return a.plant(t).value();for(var e=0,i=u?r[e].apply(this,n):t;++e<u;)i=r[e].call(this,i);return i}})}function _i(t,r,e,u,i,o,f,a,c,l){var s=r&w,h=r&p,_=r&v,d=r&(g|y),b=r&x,m=_?n:hi(t);return function p(){for(var v=arguments.length,g=Yn(v),y=v;y--;)g[y]=arguments[y];if(d)var w=Bi(p),x=function(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;return e}(g,w);if(u&&(g=ri(g,u,i,d)),o&&(g=ei(g,o,f,d)),v-=x,d&&v<l){var j=kr(g,w);return xi(t,r,_i,p.placeholder,e,g,j,a,c,l-v)}var A=h?e:this,k=_?A[t]:t;return v=g.length,a?g=function(t,r){for(var e=t.length,u=Gr(r.length,e),i=ui(t);u--;){var o=r[u];t[u]=Vi(o,e)?i[o]:n}return t}(g,a):b&&v>1&&g.reverse(),s&&c<v&&(g.length=c),this&&this!==zt&&this instanceof p&&(k=m||hi(k)),k.apply(A,g)}}function gi(n,t){return function(r,e){return function(n,t,r,e){return He(n,function(n,u,i){t(e,r(n),u,i)}),e}(r,n,t(e),{})}}function yi(t,r){return function(e,u){var i;if(e===n&&u===n)return r;if(e!==n&&(i=e),u!==n){if(i===n)return u;\"string\"==typeof e||\"string\"==typeof u?(e=Du(e),u=Du(u)):(e=Tu(e),u=Tu(u)),i=t(e,u)}return i}}function di(n){return Si(function(t){return t=Jt(t,vr(Ti())),ku(function(r){var e=this;return n(t,function(n){return Nt(n,e,r)})})})}function bi(t,r){var e=(r=r===n?\" \":Du(r)).length;if(e<2)return e?Au(r,t):r;var u=Au(r,Mr(t/Rr(r)));return xr(r)?Ju(Er(u),0,t).join(\"\"):u.slice(0,t)}function wi(t){return function(r,e,u){return u&&\"number\"!=typeof u&&Gi(r,e,u)&&(e=u=n),r=Pf(r),e===n?(e=r,r=0):e=Pf(e),function(n,t,r,e){for(var u=-1,i=Vr(Mr((t-n)/(r||1)),0),o=Yn(i);i--;)o[e?i:++u]=n,n+=r;return o}(r,e,u=u===n?r<e?1:-1:Pf(u),t)}}function mi(n){return function(t,r){return\"string\"==typeof t&&\"string\"==typeof r||(t=Kf(t),r=Kf(r)),n(t,r)}}function xi(t,r,e,u,i,o,f,a,c,l){var s=r&g;r|=s?d:b,(r&=~(s?b:d))&_||(r&=~(p|v));var h=[t,r,i,s?o:n,s?f:n,s?n:o,s?n:f,a,c,l],y=e.apply(n,h);return Ji(t)&&uo(y,h),y.placeholder=u,fo(y,t,r)}function ji(n){var t=tt[n];return function(n,r){if(n=Kf(n),(r=null==r?0:Gr(qf(r),292))&&qr(n)){var e=(Gf(n)+\"e\").split(\"e\");return+((e=(Gf(t(e[0]+\"e\"+(+e[1]+r)))+\"e\").split(\"e\"))[0]+\"e\"+(+e[1]-r))}return t(n)}}var Ai=re&&1/Or(new re([,-0]))[1]==E?function(n){return new re(n)}:Da;function ki(n){return function(t){var r=Pi(t);return r==K?jr(t):r==Q?Ir(t):function(n,t){return Jt(t,function(t){return[t,n[t]]})}(t,n(t))}}function Oi(t,r,u,i,o,a,c,l){var s=r&v;if(!s&&\"function\"!=typeof t)throw new it(e);var h=i?i.length:0;if(h||(r&=~(d|b),i=o=n),c=c===n?c:Vr(qf(c),0),l=l===n?l:qf(l),h-=o?o.length:0,r&b){var x=i,j=o;i=o=n}var A=s?n:Ci(t),k=[t,r,u,i,o,x,j,a,c,l];if(A&&function(n,t){var r=n[1],e=t[1],u=r|e,i=u<(p|v|w),o=e==w&&r==g||e==w&&r==m&&n[7].length<=t[8]||e==(w|m)&&t[7].length<=t[8]&&r==g;if(!i&&!o)return n;e&p&&(n[2]=t[2],u|=r&p?0:_);var a=t[3];if(a){var c=n[3];n[3]=c?ri(c,a,t[4]):a,n[4]=c?kr(n[3],f):t[4]}(a=t[5])&&(c=n[5],n[5]=c?ei(c,a,t[6]):a,n[6]=c?kr(n[5],f):t[6]),(a=t[7])&&(n[7]=a),e&w&&(n[8]=null==n[8]?t[8]:Gr(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u}(k,A),t=k[0],r=k[1],u=k[2],i=k[3],o=k[4],!(l=k[9]=k[9]===n?s?0:t.length:Vr(k[9]-h,0))&&r&(g|y)&&(r&=~(g|y)),r&&r!=p)O=r==g||r==y?function(t,r,e){var u=hi(t);return function i(){for(var o=arguments.length,f=Yn(o),a=o,c=Bi(i);a--;)f[a]=arguments[a];var l=o<3&&f[0]!==c&&f[o-1]!==c?[]:kr(f,c);return(o-=l.length)<e?xi(t,r,_i,i.placeholder,n,f,l,n,n,e-o):Nt(this&&this!==zt&&this instanceof i?u:t,this,f)}}(t,r,l):r!=d&&r!=(p|d)||o.length?_i.apply(n,k):function(n,t,r,e){var u=t&p,i=hi(n);return function t(){for(var o=-1,f=arguments.length,a=-1,c=e.length,l=Yn(c+f),s=this&&this!==zt&&this instanceof t?i:n;++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++o];return Nt(s,u?r:this,l)}}(t,r,u,i);else var O=function(n,t,r){var e=t&p,u=hi(n);return function t(){return(this&&this!==zt&&this instanceof t?u:n).apply(e?r:this,arguments)}}(t,r,u);return fo((A?Eu:uo)(O,k),t,r)}function Ii(t,r,e,u){return t===n||gf(t,at[e])&&!st.call(u,e)?r:t}function Ri(t,r,e,u,i,o){return zf(t)&&zf(r)&&(o.set(r,t),yu(t,r,n,Ri,o),o.delete(r)),t}function Ei(t){return Cf(t)?n:t}function zi(t,r,e,u,i,o){var f=e&s,a=t.length,c=r.length;if(a!=c&&!(f&&c>a))return!1;var l=o.get(t),p=o.get(r);if(l&&p)return l==r&&p==t;var v=-1,_=!0,g=e&h?new je:n;for(o.set(t,r),o.set(r,t);++v<a;){var y=t[v],d=r[v];if(u)var b=f?u(d,y,v,r,t,o):u(y,d,v,t,r,o);if(b!==n){if(b)continue;_=!1;break}if(g){if(!nr(r,function(n,t){if(!gr(g,t)&&(y===n||i(y,n,e,u,o)))return g.push(t)})){_=!1;break}}else if(y!==d&&!i(y,d,e,u,o)){_=!1;break}}return o.delete(t),o.delete(r),_}function Si(t){return oo(to(t,n,wo),t+\"\")}function Li(n){return Xe(n,fa,Fi)}function Wi(n){return Xe(n,aa,Ni)}var Ci=ie?function(n){return ie.get(n)}:Da;function Ui(n){for(var t=n.name+\"\",r=oe[t],e=st.call(oe,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function Bi(n){return(st.call(_e,\"placeholder\")?_e:n).placeholder}function Ti(){var n=_e.iteratee||Ca;return n=n===Ca?lu:n,arguments.length?n(arguments[0],arguments[1]):n}function Di(n,t){var r,e,u=n.__data__;return(\"string\"==(e=typeof(r=t))||\"number\"==e||\"symbol\"==e||\"boolean\"==e?\"__proto__\"!==r:null===r)?u[\"string\"==typeof t?\"string\":\"hash\"]:u.map}function $i(n){for(var t=fa(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Xi(u)]}return t}function Mi(t,r){var e=function(t,r){return null==t?n:t[r]}(t,r);return cu(e)?e:n}var Fi=Nr?function(n){return null==n?[]:(n=rt(n),Vt(Nr(n),function(t){return tr.call(n,t)}))}:Za,Ni=Nr?function(n){for(var t=[];n;)Yt(t,Fi(n)),n=Ct(n);return t}:Za,Pi=nu;function qi(n,t,r){for(var e=-1,u=(t=Gu(t,n)).length,i=!1;++e<u;){var o=so(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:!!(u=null==n?0:n.length)&&Ef(u)&&Vi(o,u)&&(wf(n)||bf(n))}function Zi(n){return\"function\"!=typeof n.constructor||Qi(n)?{}:ge(Ct(n))}function Ki(n){return wf(n)||bf(n)||!!(Wr&&n&&n[Wr])}function Vi(n,t){var r=typeof n;return!!(t=null==t?z:t)&&(\"number\"==r||\"symbol\"!=r&&Zn.test(n))&&n>-1&&n%1==0&&n<t}function Gi(n,t,r){if(!zf(r))return!1;var e=typeof t;return!!(\"number\"==e?xf(r)&&Vi(t,r.length):\"string\"==e&&t in r)&&gf(r[t],n)}function Hi(n,t){if(wf(n))return!1;var r=typeof n;return!(\"number\"!=r&&\"symbol\"!=r&&\"boolean\"!=r&&null!=n&&!Df(n))||In.test(n)||!On.test(n)||null!=t&&n in rt(t)}function Ji(n){var t=Ui(n),r=_e[t];if(\"function\"!=typeof r||!(t in be.prototype))return!1;if(n===r)return!0;var e=Ci(r);return!!e&&n===e[0]}(Xr&&Pi(new Xr(new ArrayBuffer(1)))!=on||ne&&Pi(new ne)!=K||te&&\"[object Promise]\"!=Pi(te.resolve())||re&&Pi(new re)!=Q||ee&&Pi(new ee)!=rn)&&(Pi=function(t){var r=nu(t),e=r==H?t.constructor:n,u=e?ho(e):\"\";if(u)switch(u){case fe:return on;case ae:return K;case ce:return\"[object Promise]\";case le:return Q;case se:return rn}return r});var Yi=ct?If:Ka;function Qi(n){var t=n&&n.constructor;return n===(\"function\"==typeof t&&t.prototype||at)}function Xi(n){return n==n&&!zf(n)}function no(t,r){return function(e){return null!=e&&e[t]===r&&(r!==n||t in rt(e))}}function to(t,r,e){return r=Vr(r===n?t.length-1:r,0),function(){for(var n=arguments,u=-1,i=Vr(n.length-r,0),o=Yn(i);++u<i;)o[u]=n[r+u];u=-1;for(var f=Yn(r+1);++u<r;)f[u]=n[u];return f[r]=e(o),Nt(t,this,f)}}function ro(n,t){return t.length<2?n:Qe(n,Lu(t,0,-1))}function eo(n,t){if((\"constructor\"!==t||\"function\"!=typeof n[t])&&\"__proto__\"!=t)return n[t]}var uo=ao(Eu),io=$r||function(n,t){return zt.setTimeout(n,t)},oo=ao(zu);function fo(n,t,r){var e=t+\"\";return oo(n,function(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?\"& \":\"\")+t[e],t=t.join(r>2?\", \":\" \"),n.replace(Wn,\"{\\n/* [wrapped with \"+t+\"] */\\n\")}(e,function(n,t){return qt(B,function(r){var e=\"_.\"+r[0];t&r[1]&&!Gt(n,e)&&n.push(e)}),n.sort()}(function(n){var t=n.match(Cn);return t?t[1].split(Un):[]}(e),r)))}function ao(t){var r=0,e=0;return function(){var u=Hr(),i=O-(u-e);if(e=u,i>0){if(++r>=k)return arguments[0]}else r=0;return t.apply(n,arguments)}}function co(t,r){var e=-1,u=t.length,i=u-1;for(r=r===n?u:r;++e<r;){var o=ju(e,i),f=t[o];t[o]=t[e],t[e]=f}return t.length=r,t}var lo=function(n){var t=lf(n,function(n){return r.size===o&&r.clear(),n}),r=t.cache;return t}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(\"\"),n.replace(Rn,function(n,r,e,u){t.push(e?u.replace(Dn,\"$1\"):r||n)}),t});function so(n){if(\"string\"==typeof n||Df(n))return n;var t=n+\"\";return\"0\"==t&&1/n==-E?\"-0\":t}function ho(n){if(null!=n){try{return lt.call(n)}catch(n){}try{return n+\"\"}catch(n){}}return\"\"}function po(n){if(n instanceof be)return n.clone();var t=new de(n.__wrapped__,n.__chain__);return t.__actions__=ui(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var vo=ku(function(n,t){return jf(n)?Me(n,Ke(t,1,jf,!0)):[]}),_o=ku(function(t,r){var e=ko(r);return jf(e)&&(e=n),jf(t)?Me(t,Ke(r,1,jf,!0),Ti(e,2)):[]}),go=ku(function(t,r){var e=ko(r);return jf(e)&&(e=n),jf(t)?Me(t,Ke(r,1,jf,!0),n,e):[]});function yo(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:qf(r);return u<0&&(u=Vr(e+u,0)),er(n,Ti(t,3),u)}function bo(t,r,e){var u=null==t?0:t.length;if(!u)return-1;var i=u-1;return e!==n&&(i=qf(e),i=e<0?Vr(u+i,0):Gr(i,u-1)),er(t,Ti(r,3),i,!0)}function wo(n){return null!=n&&n.length?Ke(n,1):[]}function mo(t){return t&&t.length?t[0]:n}var xo=ku(function(n){var t=Jt(n,Ku);return t.length&&t[0]===n[0]?uu(t):[]}),jo=ku(function(t){var r=ko(t),e=Jt(t,Ku);return r===ko(e)?r=n:e.pop(),e.length&&e[0]===t[0]?uu(e,Ti(r,2)):[]}),Ao=ku(function(t){var r=ko(t),e=Jt(t,Ku);return(r=\"function\"==typeof r?r:n)&&e.pop(),e.length&&e[0]===t[0]?uu(e,n,r):[]});function ko(t){var r=null==t?0:t.length;return r?t[r-1]:n}var Oo=ku(Io);function Io(n,t){return n&&n.length&&t&&t.length?mu(n,t):n}var Ro=Si(function(n,t){var r=null==n?0:n.length,e=Ue(n,t);return xu(n,Jt(t,function(n){return Vi(n,r)?+n:n}).sort(ti)),e});function Eo(n){return null==n?n:Qr.call(n)}var zo=ku(function(n){return $u(Ke(n,1,jf,!0))}),So=ku(function(t){var r=ko(t);return jf(r)&&(r=n),$u(Ke(t,1,jf,!0),Ti(r,2))}),Lo=ku(function(t){var r=ko(t);return r=\"function\"==typeof r?r:n,$u(Ke(t,1,jf,!0),n,r)});function Wo(n){if(!n||!n.length)return[];var t=0;return n=Vt(n,function(n){if(jf(n))return t=Vr(n.length,t),!0}),hr(t,function(t){return Jt(n,ar(t))})}function Co(t,r){if(!t||!t.length)return[];var e=Wo(t);return null==r?e:Jt(e,function(t){return Nt(r,n,t)})}var Uo=ku(function(n,t){return jf(n)?Me(n,t):[]}),Bo=ku(function(n){return qu(Vt(n,jf))}),To=ku(function(t){var r=ko(t);return jf(r)&&(r=n),qu(Vt(t,jf),Ti(r,2))}),Do=ku(function(t){var r=ko(t);return r=\"function\"==typeof r?r:n,qu(Vt(t,jf),n,r)}),$o=ku(Wo);var Mo=ku(function(t){var r=t.length,e=r>1?t[r-1]:n;return Co(t,e=\"function\"==typeof e?(t.pop(),e):n)});function Fo(n){var t=_e(n);return t.__chain__=!0,t}function No(n,t){return t(n)}var Po=Si(function(t){var r=t.length,e=r?t[0]:0,u=this.__wrapped__,i=function(n){return Ue(n,t)};return!(r>1||this.__actions__.length)&&u instanceof be&&Vi(e)?((u=u.slice(e,+e+(r?1:0))).__actions__.push({func:No,args:[i],thisArg:n}),new de(u,this.__chain__).thru(function(t){return r&&!t.length&&t.push(n),t})):this.thru(i)});var qo=oi(function(n,t,r){st.call(n,r)?++n[r]:Ce(n,r,1)});var Zo=pi(yo),Ko=pi(bo);function Vo(n,t){return(wf(n)?qt:Fe)(n,Ti(t,3))}function Go(n,t){return(wf(n)?Zt:Ne)(n,Ti(t,3))}var Ho=oi(function(n,t,r){st.call(n,r)?n[r].push(t):Ce(n,r,[t])});var Jo=ku(function(n,t,r){var e=-1,u=\"function\"==typeof t,i=xf(n)?Yn(n.length):[];return Fe(n,function(n){i[++e]=u?Nt(t,n,r):iu(n,t,r)}),i}),Yo=oi(function(n,t,r){Ce(n,r,t)});function Qo(n,t){return(wf(n)?Jt:vu)(n,Ti(t,3))}var Xo=oi(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]});var nf=ku(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Gi(n,t[0],t[1])?t=[]:r>2&&Gi(t[0],t[1],t[2])&&(t=[t[0]]),bu(n,Ke(t,1),[])}),tf=Dr||function(){return zt.Date.now()};function rf(t,r,e){return r=e?n:r,r=t&&null==r?t.length:r,Oi(t,w,n,n,n,n,r)}function ef(t,r){var u;if(\"function\"!=typeof r)throw new it(e);return t=qf(t),function(){return--t>0&&(u=r.apply(this,arguments)),t<=1&&(r=n),u}}var uf=ku(function(n,t,r){var e=p;if(r.length){var u=kr(r,Bi(uf));e|=d}return Oi(n,e,t,r,u)}),of=ku(function(n,t,r){var e=p|v;if(r.length){var u=kr(r,Bi(of));e|=d}return Oi(t,e,n,r,u)});function ff(t,r,u){var i,o,f,a,c,l,s=0,h=!1,p=!1,v=!0;if(\"function\"!=typeof t)throw new it(e);function _(r){var e=i,u=o;return i=o=n,s=r,a=t.apply(u,e)}function g(t){var e=t-l;return l===n||e>=r||e<0||p&&t-s>=f}function y(){var n=tf();if(g(n))return d(n);c=io(y,function(n){var t=r-(n-l);return p?Gr(t,f-(n-s)):t}(n))}function d(t){return c=n,v&&i?_(t):(i=o=n,a)}function b(){var t=tf(),e=g(t);if(i=arguments,o=this,l=t,e){if(c===n)return function(n){return s=n,c=io(y,r),h?_(n):a}(l);if(p)return Yu(c),c=io(y,r),_(l)}return c===n&&(c=io(y,r)),a}return r=Kf(r)||0,zf(u)&&(h=!!u.leading,f=(p=\"maxWait\"in u)?Vr(Kf(u.maxWait)||0,r):f,v=\"trailing\"in u?!!u.trailing:v),b.cancel=function(){c!==n&&Yu(c),s=0,i=l=o=c=n},b.flush=function(){return c===n?a:d(tf())},b}var af=ku(function(n,t){return $e(n,1,t)}),cf=ku(function(n,t,r){return $e(n,Kf(t)||0,r)});function lf(n,t){if(\"function\"!=typeof n||null!=t&&\"function\"!=typeof t)throw new it(e);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(lf.Cache||xe),r}function sf(n){if(\"function\"!=typeof n)throw new it(e);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}lf.Cache=xe;var hf=Hu(function(n,t){var r=(t=1==t.length&&wf(t[0])?Jt(t[0],vr(Ti())):Jt(Ke(t,1),vr(Ti()))).length;return ku(function(e){for(var u=-1,i=Gr(e.length,r);++u<i;)e[u]=t[u].call(this,e[u]);return Nt(n,this,e)})}),pf=ku(function(t,r){var e=kr(r,Bi(pf));return Oi(t,d,n,r,e)}),vf=ku(function(t,r){var e=kr(r,Bi(vf));return Oi(t,b,n,r,e)}),_f=Si(function(t,r){return Oi(t,m,n,n,n,r)});function gf(n,t){return n===t||n!=n&&t!=t}var yf=mi(tu),df=mi(function(n,t){return n>=t}),bf=ou(function(){return arguments}())?ou:function(n){return Sf(n)&&st.call(n,\"callee\")&&!tr.call(n,\"callee\")},wf=Yn.isArray,mf=Bt?vr(Bt):function(n){return Sf(n)&&nu(n)==un};function xf(n){return null!=n&&Ef(n.length)&&!If(n)}function jf(n){return Sf(n)&&xf(n)}var Af=Pr||Ka,kf=Tt?vr(Tt):function(n){return Sf(n)&&nu(n)==F};function Of(n){if(!Sf(n))return!1;var t=nu(n);return t==P||t==N||\"string\"==typeof n.message&&\"string\"==typeof n.name&&!Cf(n)}function If(n){if(!zf(n))return!1;var t=nu(n);return t==q||t==Z||t==$||t==J}function Rf(n){return\"number\"==typeof n&&n==qf(n)}function Ef(n){return\"number\"==typeof n&&n>-1&&n%1==0&&n<=z}function zf(n){var t=typeof n;return null!=n&&(\"object\"==t||\"function\"==t)}function Sf(n){return null!=n&&\"object\"==typeof n}var Lf=Dt?vr(Dt):function(n){return Sf(n)&&Pi(n)==K};function Wf(n){return\"number\"==typeof n||Sf(n)&&nu(n)==V}function Cf(n){if(!Sf(n)||nu(n)!=H)return!1;var t=Ct(n);if(null===t)return!0;var r=st.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof r&&r instanceof r&&lt.call(r)==yt}var Uf=$t?vr($t):function(n){return Sf(n)&&nu(n)==Y};var Bf=Mt?vr(Mt):function(n){return Sf(n)&&Pi(n)==Q};function Tf(n){return\"string\"==typeof n||!wf(n)&&Sf(n)&&nu(n)==X}function Df(n){return\"symbol\"==typeof n||Sf(n)&&nu(n)==nn}var $f=Ft?vr(Ft):function(n){return Sf(n)&&Ef(n.length)&&!!jt[nu(n)]};var Mf=mi(pu),Ff=mi(function(n,t){return n<=t});function Nf(n){if(!n)return[];if(xf(n))return Tf(n)?Er(n):ui(n);if(Cr&&n[Cr])return function(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}(n[Cr]());var t=Pi(n);return(t==K?jr:t==Q?Or:ga)(n)}function Pf(n){return n?(n=Kf(n))===E||n===-E?(n<0?-1:1)*S:n==n?n:0:0===n?n:0}function qf(n){var t=Pf(n),r=t%1;return t==t?r?t-r:t:0}function Zf(n){return n?Be(qf(n),0,W):0}function Kf(n){if(\"number\"==typeof n)return n;if(Df(n))return L;if(zf(n)){var t=\"function\"==typeof n.valueOf?n.valueOf():n;n=zf(t)?t+\"\":t}if(\"string\"!=typeof n)return 0===n?n:+n;n=pr(n);var r=Nn.test(n);return r||qn.test(n)?It(n.slice(2),r?2:8):Fn.test(n)?L:+n}function Vf(n){return ii(n,aa(n))}function Gf(n){return null==n?\"\":Du(n)}var Hf=fi(function(n,t){if(Qi(t)||xf(t))ii(t,fa(t),n);else for(var r in t)st.call(t,r)&&ze(n,r,t[r])}),Jf=fi(function(n,t){ii(t,aa(t),n)}),Yf=fi(function(n,t,r,e){ii(t,aa(t),n,e)}),Qf=fi(function(n,t,r,e){ii(t,fa(t),n,e)}),Xf=Si(Ue);var na=ku(function(t,r){t=rt(t);var e=-1,u=r.length,i=u>2?r[2]:n;for(i&&Gi(r[0],r[1],i)&&(u=1);++e<u;)for(var o=r[e],f=aa(o),a=-1,c=f.length;++a<c;){var l=f[a],s=t[l];(s===n||gf(s,at[l])&&!st.call(t,l))&&(t[l]=o[l])}return t}),ta=ku(function(t){return t.push(n,Ri),Nt(la,n,t)});function ra(t,r,e){var u=null==t?n:Qe(t,r);return u===n?e:u}function ea(n,t){return null!=n&&qi(n,t,eu)}var ua=gi(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=vt.call(t)),n[t]=r},za(Wa)),ia=gi(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=vt.call(t)),st.call(n,t)?n[t].push(r):n[t]=[r]},Ti),oa=ku(iu);function fa(n){return xf(n)?ke(n):su(n)}function aa(n){return xf(n)?ke(n,!0):hu(n)}var ca=fi(function(n,t,r){yu(n,t,r)}),la=fi(function(n,t,r,e){yu(n,t,r,e)}),sa=Si(function(n,t){var r={};if(null==n)return r;var e=!1;t=Jt(t,function(t){return t=Gu(t,n),e||(e=t.length>1),t}),ii(n,Wi(n),r),e&&(r=Te(r,a|c|l,Ei));for(var u=t.length;u--;)Mu(r,t[u]);return r});var ha=Si(function(n,t){return null==n?{}:function(n,t){return wu(n,t,function(t,r){return ea(n,r)})}(n,t)});function pa(n,t){if(null==n)return{};var r=Jt(Wi(n),function(n){return[n]});return t=Ti(t),wu(n,r,function(n,r){return t(n,r[0])})}var va=ki(fa),_a=ki(aa);function ga(n){return null==n?[]:_r(n,fa(n))}var ya=si(function(n,t,r){return t=t.toLowerCase(),n+(r?da(t):t)});function da(n){return Oa(Gf(n).toLowerCase())}function ba(n){return(n=Gf(n))&&n.replace(Kn,br).replace(gt,\"\")}var wa=si(function(n,t,r){return n+(r?\"-\":\"\")+t.toLowerCase()}),ma=si(function(n,t,r){return n+(r?\" \":\"\")+t.toLowerCase()}),xa=li(\"toLowerCase\");var ja=si(function(n,t,r){return n+(r?\"_\":\"\")+t.toLowerCase()});var Aa=si(function(n,t,r){return n+(r?\" \":\"\")+Oa(t)});var ka=si(function(n,t,r){return n+(r?\" \":\"\")+t.toUpperCase()}),Oa=li(\"toUpperCase\");function Ia(t,r,e){return t=Gf(t),(r=e?n:r)===n?function(n){return wt.test(n)}(t)?function(n){return n.match(dt)||[]}(t):function(n){return n.match(Bn)||[]}(t):t.match(r)||[]}var Ra=ku(function(t,r){try{return Nt(t,n,r)}catch(n){return Of(n)?n:new Xn(n)}}),Ea=Si(function(n,t){return qt(t,function(t){t=so(t),Ce(n,t,uf(n[t],n))}),n});function za(n){return function(){return n}}var Sa=vi(),La=vi(!0);function Wa(n){return n}function Ca(n){return lu(\"function\"==typeof n?n:Te(n,a))}var Ua=ku(function(n,t){return function(r){return iu(r,n,t)}}),Ba=ku(function(n,t){return function(r){return iu(n,r,t)}});function Ta(n,t,r){var e=fa(t),u=Ye(t,e);null!=r||zf(t)&&(u.length||!e.length)||(r=t,t=n,n=this,u=Ye(t,fa(t)));var i=!(zf(r)&&\"chain\"in r&&!r.chain),o=If(n);return qt(u,function(r){var e=t[r];n[r]=e,o&&(n.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=n(this.__wrapped__);return(r.__actions__=ui(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,Yt([this.value()],arguments))})}),n}function Da(){}var $a=di(Jt),Ma=di(Kt),Fa=di(nr);function Na(n){return Hi(n)?ar(so(n)):function(n){return function(t){return Qe(t,n)}}(n)}var Pa=wi(),qa=wi(!0);function Za(){return[]}function Ka(){return!1}var Va=yi(function(n,t){return n+t},0),Ga=ji(\"ceil\"),Ha=yi(function(n,t){return n/t},1),Ja=ji(\"floor\");var Ya,Qa=yi(function(n,t){return n*t},1),Xa=ji(\"round\"),nc=yi(function(n,t){return n-t},0);return _e.after=function(n,t){if(\"function\"!=typeof t)throw new it(e);return n=qf(n),function(){if(--n<1)return t.apply(this,arguments)}},_e.ary=rf,_e.assign=Hf,_e.assignIn=Jf,_e.assignInWith=Yf,_e.assignWith=Qf,_e.at=Xf,_e.before=ef,_e.bind=uf,_e.bindAll=Ea,_e.bindKey=of,_e.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return wf(n)?n:[n]},_e.chain=Fo,_e.chunk=function(t,r,e){r=(e?Gi(t,r,e):r===n)?1:Vr(qf(r),0);var u=null==t?0:t.length;if(!u||r<1)return[];for(var i=0,o=0,f=Yn(Mr(u/r));i<u;)f[o++]=Lu(t,i,i+=r);return f},_e.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u},_e.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Yn(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return Yt(wf(r)?ui(r):[r],Ke(t,1))},_e.cond=function(n){var t=null==n?0:n.length,r=Ti();return n=t?Jt(n,function(n){if(\"function\"!=typeof n[1])throw new it(e);return[r(n[0]),n[1]]}):[],ku(function(r){for(var e=-1;++e<t;){var u=n[e];if(Nt(u[0],this,r))return Nt(u[1],this,r)}})},_e.conforms=function(n){return function(n){var t=fa(n);return function(r){return De(r,n,t)}}(Te(n,a))},_e.constant=za,_e.countBy=qo,_e.create=function(n,t){var r=ge(n);return null==t?r:We(r,t)},_e.curry=function t(r,e,u){var i=Oi(r,g,n,n,n,n,n,e=u?n:e);return i.placeholder=t.placeholder,i},_e.curryRight=function t(r,e,u){var i=Oi(r,y,n,n,n,n,n,e=u?n:e);return i.placeholder=t.placeholder,i},_e.debounce=ff,_e.defaults=na,_e.defaultsDeep=ta,_e.defer=af,_e.delay=cf,_e.difference=vo,_e.differenceBy=_o,_e.differenceWith=go,_e.drop=function(t,r,e){var u=null==t?0:t.length;return u?Lu(t,(r=e||r===n?1:qf(r))<0?0:r,u):[]},_e.dropRight=function(t,r,e){var u=null==t?0:t.length;return u?Lu(t,0,(r=u-(r=e||r===n?1:qf(r)))<0?0:r):[]},_e.dropRightWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3),!0,!0):[]},_e.dropWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3),!0):[]},_e.fill=function(t,r,e,u){var i=null==t?0:t.length;return i?(e&&\"number\"!=typeof e&&Gi(t,r,e)&&(e=0,u=i),function(t,r,e,u){var i=t.length;for((e=qf(e))<0&&(e=-e>i?0:i+e),(u=u===n||u>i?i:qf(u))<0&&(u+=i),u=e>u?0:Zf(u);e<u;)t[e++]=r;return t}(t,r,e,u)):[]},_e.filter=function(n,t){return(wf(n)?Vt:Ze)(n,Ti(t,3))},_e.flatMap=function(n,t){return Ke(Qo(n,t),1)},_e.flatMapDeep=function(n,t){return Ke(Qo(n,t),E)},_e.flatMapDepth=function(t,r,e){return e=e===n?1:qf(e),Ke(Qo(t,r),e)},_e.flatten=wo,_e.flattenDeep=function(n){return null!=n&&n.length?Ke(n,E):[]},_e.flattenDepth=function(t,r){return null!=t&&t.length?Ke(t,r=r===n?1:qf(r)):[]},_e.flip=function(n){return Oi(n,x)},_e.flow=Sa,_e.flowRight=La,_e.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},_e.functions=function(n){return null==n?[]:Ye(n,fa(n))},_e.functionsIn=function(n){return null==n?[]:Ye(n,aa(n))},_e.groupBy=Ho,_e.initial=function(n){return null!=n&&n.length?Lu(n,0,-1):[]},_e.intersection=xo,_e.intersectionBy=jo,_e.intersectionWith=Ao,_e.invert=ua,_e.invertBy=ia,_e.invokeMap=Jo,_e.iteratee=Ca,_e.keyBy=Yo,_e.keys=fa,_e.keysIn=aa,_e.map=Qo,_e.mapKeys=function(n,t){var r={};return t=Ti(t,3),He(n,function(n,e,u){Ce(r,t(n,e,u),n)}),r},_e.mapValues=function(n,t){var r={};return t=Ti(t,3),He(n,function(n,e,u){Ce(r,e,t(n,e,u))}),r},_e.matches=function(n){return _u(Te(n,a))},_e.matchesProperty=function(n,t){return gu(n,Te(t,a))},_e.memoize=lf,_e.merge=ca,_e.mergeWith=la,_e.method=Ua,_e.methodOf=Ba,_e.mixin=Ta,_e.negate=sf,_e.nthArg=function(n){return n=qf(n),ku(function(t){return du(t,n)})},_e.omit=sa,_e.omitBy=function(n,t){return pa(n,sf(Ti(t)))},_e.once=function(n){return ef(2,n)},_e.orderBy=function(t,r,e,u){return null==t?[]:(wf(r)||(r=null==r?[]:[r]),wf(e=u?n:e)||(e=null==e?[]:[e]),bu(t,r,e))},_e.over=$a,_e.overArgs=hf,_e.overEvery=Ma,_e.overSome=Fa,_e.partial=pf,_e.partialRight=vf,_e.partition=Xo,_e.pick=ha,_e.pickBy=pa,_e.property=Na,_e.propertyOf=function(t){return function(r){return null==t?n:Qe(t,r)}},_e.pull=Oo,_e.pullAll=Io,_e.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?mu(n,t,Ti(r,2)):n},_e.pullAllWith=function(t,r,e){return t&&t.length&&r&&r.length?mu(t,r,n,e):t},_e.pullAt=Ro,_e.range=Pa,_e.rangeRight=qa,_e.rearg=_f,_e.reject=function(n,t){return(wf(n)?Vt:Ze)(n,sf(Ti(t,3)))},_e.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=Ti(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return xu(n,u),r},_e.rest=function(t,r){if(\"function\"!=typeof t)throw new it(e);return ku(t,r=r===n?r:qf(r))},_e.reverse=Eo,_e.sampleSize=function(t,r,e){return r=(e?Gi(t,r,e):r===n)?1:qf(r),(wf(t)?Ie:Iu)(t,r)},_e.set=function(n,t,r){return null==n?n:Ru(n,t,r)},_e.setWith=function(t,r,e,u){return u=\"function\"==typeof u?u:n,null==t?t:Ru(t,r,e,u)},_e.shuffle=function(n){return(wf(n)?Re:Su)(n)},_e.slice=function(t,r,e){var u=null==t?0:t.length;return u?(e&&\"number\"!=typeof e&&Gi(t,r,e)?(r=0,e=u):(r=null==r?0:qf(r),e=e===n?u:qf(e)),Lu(t,r,e)):[]},_e.sortBy=nf,_e.sortedUniq=function(n){return n&&n.length?Bu(n):[]},_e.sortedUniqBy=function(n,t){return n&&n.length?Bu(n,Ti(t,2)):[]},_e.split=function(t,r,e){return e&&\"number\"!=typeof e&&Gi(t,r,e)&&(r=e=n),(e=e===n?W:e>>>0)?(t=Gf(t))&&(\"string\"==typeof r||null!=r&&!Uf(r))&&!(r=Du(r))&&xr(t)?Ju(Er(t),0,e):t.split(r,e):[]},_e.spread=function(n,t){if(\"function\"!=typeof n)throw new it(e);return t=null==t?0:Vr(qf(t),0),ku(function(r){var e=r[t],u=Ju(r,0,t);return e&&Yt(u,e),Nt(n,this,u)})},_e.tail=function(n){var t=null==n?0:n.length;return t?Lu(n,1,t):[]},_e.take=function(t,r,e){return t&&t.length?Lu(t,0,(r=e||r===n?1:qf(r))<0?0:r):[]},_e.takeRight=function(t,r,e){var u=null==t?0:t.length;return u?Lu(t,(r=u-(r=e||r===n?1:qf(r)))<0?0:r,u):[]},_e.takeRightWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3),!1,!0):[]},_e.takeWhile=function(n,t){return n&&n.length?Nu(n,Ti(t,3)):[]},_e.tap=function(n,t){return t(n),n},_e.throttle=function(n,t,r){var u=!0,i=!0;if(\"function\"!=typeof n)throw new it(e);return zf(r)&&(u=\"leading\"in r?!!r.leading:u,i=\"trailing\"in r?!!r.trailing:i),ff(n,t,{leading:u,maxWait:t,trailing:i})},_e.thru=No,_e.toArray=Nf,_e.toPairs=va,_e.toPairsIn=_a,_e.toPath=function(n){return wf(n)?Jt(n,so):Df(n)?[n]:ui(lo(Gf(n)))},_e.toPlainObject=Vf,_e.transform=function(n,t,r){var e=wf(n),u=e||Af(n)||$f(n);if(t=Ti(t,4),null==r){var i=n&&n.constructor;r=u?e?new i:[]:zf(n)&&If(i)?ge(Ct(n)):{}}return(u?qt:He)(n,function(n,e,u){return t(r,n,e,u)}),r},_e.unary=function(n){return rf(n,1)},_e.union=zo,_e.unionBy=So,_e.unionWith=Lo,_e.uniq=function(n){return n&&n.length?$u(n):[]},_e.uniqBy=function(n,t){return n&&n.length?$u(n,Ti(t,2)):[]},_e.uniqWith=function(t,r){return r=\"function\"==typeof r?r:n,t&&t.length?$u(t,n,r):[]},_e.unset=function(n,t){return null==n||Mu(n,t)},_e.unzip=Wo,_e.unzipWith=Co,_e.update=function(n,t,r){return null==n?n:Fu(n,t,Vu(r))},_e.updateWith=function(t,r,e,u){return u=\"function\"==typeof u?u:n,null==t?t:Fu(t,r,Vu(e),u)},_e.values=ga,_e.valuesIn=function(n){return null==n?[]:_r(n,aa(n))},_e.without=Uo,_e.words=Ia,_e.wrap=function(n,t){return pf(Vu(t),n)},_e.xor=Bo,_e.xorBy=To,_e.xorWith=Do,_e.zip=$o,_e.zipObject=function(n,t){return Zu(n||[],t||[],ze)},_e.zipObjectDeep=function(n,t){return Zu(n||[],t||[],Ru)},_e.zipWith=Mo,_e.entries=va,_e.entriesIn=_a,_e.extend=Jf,_e.extendWith=Yf,Ta(_e,_e),_e.add=Va,_e.attempt=Ra,_e.camelCase=ya,_e.capitalize=da,_e.ceil=Ga,_e.clamp=function(t,r,e){return e===n&&(e=r,r=n),e!==n&&(e=(e=Kf(e))==e?e:0),r!==n&&(r=(r=Kf(r))==r?r:0),Be(Kf(t),r,e)},_e.clone=function(n){return Te(n,l)},_e.cloneDeep=function(n){return Te(n,a|l)},_e.cloneDeepWith=function(t,r){return Te(t,a|l,r=\"function\"==typeof r?r:n)},_e.cloneWith=function(t,r){return Te(t,l,r=\"function\"==typeof r?r:n)},_e.conformsTo=function(n,t){return null==t||De(n,t,fa(t))},_e.deburr=ba,_e.defaultTo=function(n,t){return null==n||n!=n?t:n},_e.divide=Ha,_e.endsWith=function(t,r,e){t=Gf(t),r=Du(r);var u=t.length,i=e=e===n?u:Be(qf(e),0,u);return(e-=r.length)>=0&&t.slice(e,i)==r},_e.eq=gf,_e.escape=function(n){return(n=Gf(n))&&xn.test(n)?n.replace(wn,wr):n},_e.escapeRegExp=function(n){return(n=Gf(n))&&zn.test(n)?n.replace(En,\"\\\\$&\"):n},_e.every=function(t,r,e){var u=wf(t)?Kt:Pe;return e&&Gi(t,r,e)&&(r=n),u(t,Ti(r,3))},_e.find=Zo,_e.findIndex=yo,_e.findKey=function(n,t){return rr(n,Ti(t,3),He)},_e.findLast=Ko,_e.findLastIndex=bo,_e.findLastKey=function(n,t){return rr(n,Ti(t,3),Je)},_e.floor=Ja,_e.forEach=Vo,_e.forEachRight=Go,_e.forIn=function(n,t){return null==n?n:Ve(n,Ti(t,3),aa)},_e.forInRight=function(n,t){return null==n?n:Ge(n,Ti(t,3),aa)},_e.forOwn=function(n,t){return n&&He(n,Ti(t,3))},_e.forOwnRight=function(n,t){return n&&Je(n,Ti(t,3))},_e.get=ra,_e.gt=yf,_e.gte=df,_e.has=function(n,t){return null!=n&&qi(n,t,ru)},_e.hasIn=ea,_e.head=mo,_e.identity=Wa,_e.includes=function(n,t,r,e){n=xf(n)?n:ga(n),r=r&&!e?qf(r):0;var u=n.length;return r<0&&(r=Vr(u+r,0)),Tf(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&ur(n,t,r)>-1},_e.indexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:qf(r);return u<0&&(u=Vr(e+u,0)),ur(n,t,u)},_e.inRange=function(t,r,e){return r=Pf(r),e===n?(e=r,r=0):e=Pf(e),function(n,t,r){return n>=Gr(t,r)&&n<Vr(t,r)}(t=Kf(t),r,e)},_e.invoke=oa,_e.isArguments=bf,_e.isArray=wf,_e.isArrayBuffer=mf,_e.isArrayLike=xf,_e.isArrayLikeObject=jf,_e.isBoolean=function(n){return!0===n||!1===n||Sf(n)&&nu(n)==M},_e.isBuffer=Af,_e.isDate=kf,_e.isElement=function(n){return Sf(n)&&1===n.nodeType&&!Cf(n)},_e.isEmpty=function(n){if(null==n)return!0;if(xf(n)&&(wf(n)||\"string\"==typeof n||\"function\"==typeof n.splice||Af(n)||$f(n)||bf(n)))return!n.length;var t=Pi(n);if(t==K||t==Q)return!n.size;if(Qi(n))return!su(n).length;for(var r in n)if(st.call(n,r))return!1;return!0},_e.isEqual=function(n,t){return fu(n,t)},_e.isEqualWith=function(t,r,e){var u=(e=\"function\"==typeof e?e:n)?e(t,r):n;return u===n?fu(t,r,n,e):!!u},_e.isError=Of,_e.isFinite=function(n){return\"number\"==typeof n&&qr(n)},_e.isFunction=If,_e.isInteger=Rf,_e.isLength=Ef,_e.isMap=Lf,_e.isMatch=function(n,t){return n===t||au(n,t,$i(t))},_e.isMatchWith=function(t,r,e){return e=\"function\"==typeof e?e:n,au(t,r,$i(r),e)},_e.isNaN=function(n){return Wf(n)&&n!=+n},_e.isNative=function(n){if(Yi(n))throw new Xn(r);return cu(n)},_e.isNil=function(n){return null==n},_e.isNull=function(n){return null===n},_e.isNumber=Wf,_e.isObject=zf,_e.isObjectLike=Sf,_e.isPlainObject=Cf,_e.isRegExp=Uf,_e.isSafeInteger=function(n){return Rf(n)&&n>=-z&&n<=z},_e.isSet=Bf,_e.isString=Tf,_e.isSymbol=Df,_e.isTypedArray=$f,_e.isUndefined=function(t){return t===n},_e.isWeakMap=function(n){return Sf(n)&&Pi(n)==rn},_e.isWeakSet=function(n){return Sf(n)&&nu(n)==en},_e.join=function(n,t){return null==n?\"\":Zr.call(n,t)},_e.kebabCase=wa,_e.last=ko,_e.lastIndexOf=function(t,r,e){var u=null==t?0:t.length;if(!u)return-1;var i=u;return e!==n&&(i=(i=qf(e))<0?Vr(u+i,0):Gr(i,u-1)),r==r?function(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}(t,r,i):er(t,or,i,!0)},_e.lowerCase=ma,_e.lowerFirst=xa,_e.lt=Mf,_e.lte=Ff,_e.max=function(t){return t&&t.length?qe(t,Wa,tu):n},_e.maxBy=function(t,r){return t&&t.length?qe(t,Ti(r,2),tu):n},_e.mean=function(n){return fr(n,Wa)},_e.meanBy=function(n,t){return fr(n,Ti(t,2))},_e.min=function(t){return t&&t.length?qe(t,Wa,pu):n},_e.minBy=function(t,r){return t&&t.length?qe(t,Ti(r,2),pu):n},_e.stubArray=Za,_e.stubFalse=Ka,_e.stubObject=function(){return{}},_e.stubString=function(){return\"\"},_e.stubTrue=function(){return!0},_e.multiply=Qa,_e.nth=function(t,r){return t&&t.length?du(t,qf(r)):n},_e.noConflict=function(){return zt._===this&&(zt._=bt),this},_e.noop=Da,_e.now=tf,_e.pad=function(n,t,r){n=Gf(n);var e=(t=qf(t))?Rr(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return bi(Fr(u),r)+n+bi(Mr(u),r)},_e.padEnd=function(n,t,r){n=Gf(n);var e=(t=qf(t))?Rr(n):0;return t&&e<t?n+bi(t-e,r):n},_e.padStart=function(n,t,r){n=Gf(n);var e=(t=qf(t))?Rr(n):0;return t&&e<t?bi(t-e,r)+n:n},_e.parseInt=function(n,t,r){return r||null==t?t=0:t&&(t=+t),Jr(Gf(n).replace(Sn,\"\"),t||0)},_e.random=function(t,r,e){if(e&&\"boolean\"!=typeof e&&Gi(t,r,e)&&(r=e=n),e===n&&(\"boolean\"==typeof r?(e=r,r=n):\"boolean\"==typeof t&&(e=t,t=n)),t===n&&r===n?(t=0,r=1):(t=Pf(t),r===n?(r=t,t=0):r=Pf(r)),t>r){var u=t;t=r,r=u}if(e||t%1||r%1){var i=Yr();return Gr(t+i*(r-t+Ot(\"1e-\"+((i+\"\").length-1))),r)}return ju(t,r)},_e.reduce=function(n,t,r){var e=wf(n)?Qt:lr,u=arguments.length<3;return e(n,Ti(t,4),r,u,Fe)},_e.reduceRight=function(n,t,r){var e=wf(n)?Xt:lr,u=arguments.length<3;return e(n,Ti(t,4),r,u,Ne)},_e.repeat=function(t,r,e){return r=(e?Gi(t,r,e):r===n)?1:qf(r),Au(Gf(t),r)},_e.replace=function(){var n=arguments,t=Gf(n[0]);return n.length<3?t:t.replace(n[1],n[2])},_e.result=function(t,r,e){var u=-1,i=(r=Gu(r,t)).length;for(i||(i=1,t=n);++u<i;){var o=null==t?n:t[so(r[u])];o===n&&(u=i,o=e),t=If(o)?o.call(t):o}return t},_e.round=Xa,_e.runInContext=Ln,_e.sample=function(n){return(wf(n)?Oe:Ou)(n)},_e.size=function(n){if(null==n)return 0;if(xf(n))return Tf(n)?Rr(n):n.length;var t=Pi(n);return t==K||t==Q?n.size:su(n).length},_e.snakeCase=ja,_e.some=function(t,r,e){var u=wf(t)?nr:Wu;return e&&Gi(t,r,e)&&(r=n),u(t,Ti(r,3))},_e.sortedIndex=function(n,t){return Cu(n,t)},_e.sortedIndexBy=function(n,t,r){return Uu(n,t,Ti(r,2))},_e.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=Cu(n,t);if(e<r&&gf(n[e],t))return e}return-1},_e.sortedLastIndex=function(n,t){return Cu(n,t,!0)},_e.sortedLastIndexBy=function(n,t,r){return Uu(n,t,Ti(r,2),!0)},_e.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var r=Cu(n,t,!0)-1;if(gf(n[r],t))return r}return-1},_e.startCase=Aa,_e.startsWith=function(n,t,r){return n=Gf(n),r=null==r?0:Be(qf(r),0,n.length),t=Du(t),n.slice(r,r+t.length)==t},_e.subtract=nc,_e.sum=function(n){return n&&n.length?sr(n,Wa):0},_e.sumBy=function(n,t){return n&&n.length?sr(n,Ti(t,2)):0},_e.template=function(t,r,e){var i=_e.templateSettings;e&&Gi(t,r,e)&&(r=n),t=Gf(t),r=Yf({},r,i,Ii);var o,f,a=Yf({},r.imports,i.imports,Ii),c=fa(a),l=_r(a,c),s=0,h=r.interpolate||Vn,p=\"__p += '\",v=et((r.escape||Vn).source+\"|\"+h.source+\"|\"+(h===kn?$n:Vn).source+\"|\"+(r.evaluate||Vn).source+\"|$\",\"g\"),_=\"//# sourceURL=\"+(st.call(r,\"sourceURL\")?(r.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++xt+\"]\")+\"\\n\";t.replace(v,function(n,r,e,u,i,a){return e||(e=u),p+=t.slice(s,a).replace(Gn,mr),r&&(o=!0,p+=\"' +\\n__e(\"+r+\") +\\n'\"),i&&(f=!0,p+=\"';\\n\"+i+\";\\n__p += '\"),e&&(p+=\"' +\\n((__t = (\"+e+\")) == null ? '' : __t) +\\n'\"),s=a+n.length,n}),p+=\"';\\n\";var g=st.call(r,\"variable\")&&r.variable;if(g){if(Tn.test(g))throw new Xn(u)}else p=\"with (obj) {\\n\"+p+\"\\n}\\n\";p=(f?p.replace(gn,\"\"):p).replace(yn,\"$1\").replace(dn,\"$1;\"),p=\"function(\"+(g||\"obj\")+\") {\\n\"+(g?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(o?\", __e = _.escape\":\"\")+(f?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+p+\"return __p\\n}\";var y=Ra(function(){return nt(c,_+\"return \"+p).apply(n,l)});if(y.source=p,Of(y))throw y;return y},_e.times=function(n,t){if((n=qf(n))<1||n>z)return[];var r=W,e=Gr(n,W);t=Ti(t),n-=W;for(var u=hr(e,t);++r<n;)t(r);return u},_e.toFinite=Pf,_e.toInteger=qf,_e.toLength=Zf,_e.toLower=function(n){return Gf(n).toLowerCase()},_e.toNumber=Kf,_e.toSafeInteger=function(n){return n?Be(qf(n),-z,z):0===n?n:0},_e.toString=Gf,_e.toUpper=function(n){return Gf(n).toUpperCase()},_e.trim=function(t,r,e){if((t=Gf(t))&&(e||r===n))return pr(t);if(!t||!(r=Du(r)))return t;var u=Er(t),i=Er(r);return Ju(u,yr(u,i),dr(u,i)+1).join(\"\")},_e.trimEnd=function(t,r,e){if((t=Gf(t))&&(e||r===n))return t.slice(0,zr(t)+1);if(!t||!(r=Du(r)))return t;var u=Er(t);return Ju(u,0,dr(u,Er(r))+1).join(\"\")},_e.trimStart=function(t,r,e){if((t=Gf(t))&&(e||r===n))return t.replace(Sn,\"\");if(!t||!(r=Du(r)))return t;var u=Er(t);return Ju(u,yr(u,Er(r))).join(\"\")},_e.truncate=function(t,r){var e=j,u=A;if(zf(r)){var i=\"separator\"in r?r.separator:i;e=\"length\"in r?qf(r.length):e,u=\"omission\"in r?Du(r.omission):u}var o=(t=Gf(t)).length;if(xr(t)){var f=Er(t);o=f.length}if(e>=o)return t;var a=e-Rr(u);if(a<1)return u;var c=f?Ju(f,0,a).join(\"\"):t.slice(0,a);if(i===n)return c+u;if(f&&(a+=c.length-a),Uf(i)){if(t.slice(a).search(i)){var l,s=c;for(i.global||(i=et(i.source,Gf(Mn.exec(i))+\"g\")),i.lastIndex=0;l=i.exec(s);)var h=l.index;c=c.slice(0,h===n?a:h)}}else if(t.indexOf(Du(i),a)!=a){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+u},_e.unescape=function(n){return(n=Gf(n))&&mn.test(n)?n.replace(bn,Sr):n},_e.uniqueId=function(n){var t=++ht;return Gf(n)+t},_e.upperCase=ka,_e.upperFirst=Oa,_e.each=Vo,_e.eachRight=Go,_e.first=mo,Ta(_e,(Ya={},He(_e,function(n,t){st.call(_e.prototype,t)||(Ya[t]=n)}),Ya),{chain:!1}),_e.VERSION=\"4.17.21\",qt([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],function(n){_e[n].placeholder=_e}),qt([\"drop\",\"take\"],function(t,r){be.prototype[t]=function(e){e=e===n?1:Vr(qf(e),0);var u=this.__filtered__&&!r?new be(this):this.clone();return u.__filtered__?u.__takeCount__=Gr(e,u.__takeCount__):u.__views__.push({size:Gr(e,W),type:t+(u.__dir__<0?\"Right\":\"\")}),u},be.prototype[t+\"Right\"]=function(n){return this.reverse()[t](n).reverse()}}),qt([\"filter\",\"map\",\"takeWhile\"],function(n,t){var r=t+1,e=r==I||3==r;be.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:Ti(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),qt([\"head\",\"last\"],function(n,t){var r=\"take\"+(t?\"Right\":\"\");be.prototype[n]=function(){return this[r](1).value()[0]}}),qt([\"initial\",\"tail\"],function(n,t){var r=\"drop\"+(t?\"\":\"Right\");be.prototype[n]=function(){return this.__filtered__?new be(this):this[r](1)}}),be.prototype.compact=function(){return this.filter(Wa)},be.prototype.find=function(n){return this.filter(n).head()},be.prototype.findLast=function(n){return this.reverse().find(n)},be.prototype.invokeMap=ku(function(n,t){return\"function\"==typeof n?new be(this):this.map(function(r){return iu(r,n,t)})}),be.prototype.reject=function(n){return this.filter(sf(Ti(n)))},be.prototype.slice=function(t,r){t=qf(t);var e=this;return e.__filtered__&&(t>0||r<0)?new be(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),r!==n&&(e=(r=qf(r))<0?e.dropRight(-r):e.take(r-t)),e)},be.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},be.prototype.toArray=function(){return this.take(W)},He(be.prototype,function(t,r){var e=/^(?:filter|find|map|reject)|While$/.test(r),u=/^(?:head|last)$/.test(r),i=_e[u?\"take\"+(\"last\"==r?\"Right\":\"\"):r],o=u||/^find/.test(r);i&&(_e.prototype[r]=function(){var r=this.__wrapped__,f=u?[1]:arguments,a=r instanceof be,c=f[0],l=a||wf(r),s=function(n){var t=i.apply(_e,Yt([n],f));return u&&h?t[0]:t};l&&e&&\"function\"==typeof c&&1!=c.length&&(a=l=!1);var h=this.__chain__,p=!!this.__actions__.length,v=o&&!h,_=a&&!p;if(!o&&l){r=_?r:new be(this);var g=t.apply(r,f);return g.__actions__.push({func:No,args:[s],thisArg:n}),new de(g,h)}return v&&_?t.apply(this,f):(g=this.thru(s),v?u?g.value()[0]:g.value():g)})}),qt([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){var t=ot[n],r=/^(?:push|sort|unshift)$/.test(n)?\"tap\":\"thru\",e=/^(?:pop|shift)$/.test(n);_e.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(wf(u)?u:[],n)}return this[r](function(r){return t.apply(wf(r)?r:[],n)})}}),He(be.prototype,function(n,t){var r=_e[t];if(r){var e=r.name+\"\";st.call(oe,e)||(oe[e]=[]),oe[e].push({name:t,func:r})}}),oe[_i(n,v).name]=[{name:\"wrapper\",func:n}],be.prototype.clone=function(){var n=new be(this.__wrapped__);return n.__actions__=ui(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=ui(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=ui(this.__views__),n},be.prototype.reverse=function(){if(this.__filtered__){var n=new be(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},be.prototype.value=function(){var n=this.__wrapped__.value(),t=this.__dir__,r=wf(n),e=t<0,u=r?n.length:0,i=function(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case\"drop\":n+=o;break;case\"dropRight\":t-=o;break;case\"take\":t=Gr(t,n+o);break;case\"takeRight\":n=Vr(n,t-o)}}return{start:n,end:t}}(0,u,this.__views__),o=i.start,f=i.end,a=f-o,c=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Gr(a,this.__takeCount__);if(!r||!e&&u==a&&p==a)return Pu(n,this.__actions__);var v=[];n:for(;a--&&h<p;){for(var _=-1,g=n[c+=t];++_<s;){var y=l[_],d=y.iteratee,b=y.type,w=d(g);if(b==R)g=w;else if(!w){if(b==I)continue n;break n}}v[h++]=g}return v},_e.prototype.at=Po,_e.prototype.chain=function(){return Fo(this)},_e.prototype.commit=function(){return new de(this.value(),this.__chain__)},_e.prototype.next=function(){this.__values__===n&&(this.__values__=Nf(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},_e.prototype.plant=function(t){for(var r,e=this;e instanceof ye;){var u=po(e);u.__index__=0,u.__values__=n,r?i.__wrapped__=u:r=u;var i=u;e=e.__wrapped__}return i.__wrapped__=t,r},_e.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof be){var r=t;return this.__actions__.length&&(r=new be(this)),(r=r.reverse()).__actions__.push({func:No,args:[Eo],thisArg:n}),new de(r,this.__chain__)}return this.thru(Eo)},_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=function(){return Pu(this.__wrapped__,this.__actions__)},_e.prototype.first=_e.prototype.head,Cr&&(_e.prototype[Cr]=function(){return this}),_e}();\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?(zt._=Lr,define(function(){return Lr})):Lt?((Lt.exports=Lr)._=Lr,St._=Lr):zt._=Lr}).call(this);","backend/node_modules/updater/expressMiddleware.js":"\"use strict\";module.exports=((e,t,r,n,a)=>{if(!t.restarting)return a();const s=t.config.restartDelay-(Date.now()-t.restarting)+5e3;n.status(503).format({text:function(){n.send(\"503 - Service Unavailable - Restarting... try again in \"+Math.ceil(s/1e3)+\"s\")},html:function(){n.render(t.config.errorTemplate,{restartDelay:s})},json:function(){n.send({error:{message:\"503\"},restartDelay:s})}})});","backend/node_modules/updater/routes.js":"\"use strict\";module.exports=((e,s)=>{const t=e[s.config.expressId];s.config.manifests.forEach(n=>{n.path&&t.get(n.path,(t,i)=>{const a=n.template||s.manifest,r=(t.headers[\"user-agent\"]||\"\").match(/Chrome\\/([0-9]+)/),o=r?+r[1]:99;if(!t.secure&&o>=70||\"development\"===e.options.env||\"string\"!=typeof a)return i.sendStatus(404);const c=a.replace(\"{version}\",\"v\"+s.getFrontendVersion(n.frontendVersionKey)).replace(\"{mainJsFile}\",n.mainJsFile).replace(\"{mainCssFile}\",n.mainCssFile);i.type(\"text/cache-manifest\"),i.send(c)})})});","backend/node_modules/updater/commands.js":"\"use strict\";const{exec:exec}=require(\"child_process\");module.exports=((e,t)=>{e[t.config.sioId].sockets.on(\"connection\",e=>{e.emit(\"updater.versions\",t.getVersions()),e.on(\"updater.pull\",n=>{\"function\"!=typeof n&&(n=function(){});const o=e.handshake.user;if(!o||!o.super)return t.warn(\"Unauthorized pull attempt.\",{socket:e.handshake}),n(new Error(\"AUTH\"));const l='\"'+t.config.pull.exe+'\" pull';t.info(\"Attempting a pull...\"),exec(l,t.config.pull,function(e,o,l){e?t.error(e,\"Failed the pull.\"):l&&l.length?t.info(\"Failed the pull.\"):t.info(\"Pull succeeded.\"),n(e,{stdout:o,stderr:l})})})})});","package.json":{"name":"walkner-horti","version":"1.1.0","updater":{"horti":{"backend":1,"frontend":1,"controller":1}},"description":"Application for Horti tester.","license":"CC-BY-NC-SA-4.0","homepage":"https://github.com/morkai/walkner-horti","author":{"name":"ukasz Walukiewicz","email":"lukasz@miracle.systems","url":"http://miracle.systems/"},"bugs":"https://github.com/morkai/walkner-horti/issues","repository":{"type":"git","url":"http://github.com/morkai/walkner-horti.git"},"engines":{"node":">=12.0.0"},"main":"./backend/main","dependencies":{"axios":"^0.21.1","axon":"^2.0.3","bcrypt":"5.0.1","body-parser":"^1.19.0","check-disk-space":"^3.0.1","cookie":"^0.4.1","cookie-parser":"^1.4.5","csv":"1.1.1","deep-equal":"^2.0.5","ejs":"~2.7.4","ejs-amd":"morkai/ejs-amd","express":"^4.17.1","express-session":"^1.17.2","fs-extra":"^10.0.0","h5.buffers":"morkai/h5.buffers","h5.main":"morkai/h5.main","h5.modbus":"morkai/h5.modbus","h5.pubsub":"morkai/h5.pubsub","h5.rql":"morkai/h5.rql","h5.step":"morkai/h5.step","lodash":"^4.17.21","messageformat":"0.2.2","messageformat-amd":"morkai/messageformat-amd","moment":"^2.29.1","mongodb":"3.6.8","mongoose":"5.12.12","multer":"^1.4.2","request":"^2.88.2","socket.io":"1.7.4","transliteration":"^2.2.0","uuid":"^8.3.2"},"devDependencies":{"chalk":"^4.1.1","csso":"^4.2.0","grunt":"^1.4.1","grunt-contrib-clean":"^2.0.0","grunt-contrib-concat":"^1.0.1","grunt-contrib-copy":"^1.0.0","grunt-contrib-requirejs":"^1.0.0","grunt-uglify-es-multicore":"morkai/grunt-uglify-es-multicore","grunt-ejs-amd":"morkai/grunt-ejs-amd","grunt-eslint":"^23.0.0","grunt-messageformat-amd":"morkai/grunt-messageformat-amd","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0"}},"node_modules/mongoose/index.js":"\"use strict\";module.exports=require(\"./lib/\");","backend/node_modules/h5-mongoose/expressMiddleware.js":"\"use strict\";const mongoose=require(\"mongoose\");module.exports=((e,n,o,t,a)=>{if(n.connection.readyState===mongoose.Connection.STATES.connected)return a();t.status(503).format({text:function(){t.send(\"503 - Service Unavailable - No database connection. Please try again later.\")},html:function(){t.render(\"mongoose:unavailable\")},json:function(){t.json({error:{message:\"503\"}})}})});","node_modules/mongoose/lib/index.js":"\"use strict\";if(global.MONGOOSE_DRIVER_PATH){const e=\"The `MONGOOSE_DRIVER_PATH` global property is deprecated. Use `mongoose.driver.set()` instead.\";require(\"util\").deprecate(function(){require(\"./driver\").set(require(global.MONGOOSE_DRIVER_PATH))},e)()}else require(\"./driver\").set(require(\"./drivers/node-mongodb-native\"));const Document=require(\"./document\"),EventEmitter=require(\"events\").EventEmitter,Schema=require(\"./schema\"),SchemaType=require(\"./schematype\"),SchemaTypes=require(\"./schema/index\"),VirtualType=require(\"./virtualtype\"),STATES=require(\"./connectionstate\"),VALID_OPTIONS=require(\"./validoptions\"),Types=require(\"./types\"),Query=require(\"./query\"),Model=require(\"./model\"),applyPlugins=require(\"./helpers/schema/applyPlugins\"),driver=require(\"./driver\"),get=require(\"./helpers/get\"),promiseOrCallback=require(\"./helpers/promiseOrCallback\"),legacyPluralize=require(\"mongoose-legacy-pluralize\"),utils=require(\"./utils\"),pkg=require(\"../package.json\"),cast=require(\"./cast\"),removeSubdocs=require(\"./plugins/removeSubdocs\"),saveSubdocs=require(\"./plugins/saveSubdocs\"),trackTransaction=require(\"./plugins/trackTransaction\"),validateBeforeSave=require(\"./plugins/validateBeforeSave\"),Aggregate=require(\"./aggregate\"),PromiseProvider=require(\"./promise_provider\"),shardingPlugin=require(\"./plugins/sharding\"),defaultMongooseSymbol=Symbol.for(\"mongoose:default\");function Mongoose(e){if(this.connections=[],this.models={},this.modelSchemas={},this.events=new EventEmitter,this.options=Object.assign({pluralization:!0,autoIndex:!0,useCreateIndex:!1},e),this.createConnection().models=this.models,this.options.pluralization&&(this._pluralize=legacyPluralize),e&&e[defaultMongooseSymbol])for(const e of[\"Schema\",\"model\"])this[e]=Mongoose.prototype[e];else{const e=this;this.Schema=function(){return this.base=e,Schema.apply(this,arguments)},this.Schema.prototype=Object.create(Schema.prototype),Object.assign(this.Schema,Schema),this.Schema.base=this,this.Schema.Types=Object.assign({},Schema.Types)}this.Schema.prototype.base=this,Object.defineProperty(this,\"plugins\",{configurable:!1,enumerable:!0,writable:!1,value:[[saveSubdocs,{deduplicate:!0}],[validateBeforeSave,{deduplicate:!0}],[shardingPlugin,{deduplicate:!0}],[removeSubdocs,{deduplicate:!0}],[trackTransaction,{deduplicate:!0}]]})}require(\"./helpers/printJestWarning\"),Mongoose.prototype.cast=cast,Mongoose.prototype.STATES=STATES,Mongoose.prototype.driver=driver,Mongoose.prototype.set=function(e,o){const t=this instanceof Mongoose?this:mongoose;if(-1===VALID_OPTIONS.indexOf(e))throw new Error(`\\`${e}\\` is an invalid option.`);return 1===arguments.length?t.options[e]:(t.options[e]=o,\"objectIdGetter\"===e&&(o?Object.defineProperty(mongoose.Types.ObjectId.prototype,\"_id\",{enumerable:!1,configurable:!0,get:function(){return this}}):delete mongoose.Types.ObjectId.prototype._id),t)},Mongoose.prototype.get=Mongoose.prototype.set,Mongoose.prototype.createConnection=function(e,o,t){const n=this instanceof Mongoose?this:mongoose,r=new Connection(n);return\"function\"==typeof o&&(t=o,o=null),n.connections.push(r),n.events.emit(\"createConnection\",r),arguments.length>0?r.openUri(e,o,t):r},Mongoose.prototype.connect=function(e,o,t){const n=this instanceof Mongoose?this:mongoose,r=n.connection;return n._promiseOrCallback(t,t=>{r.openUri(e,o,e=>null!=e?t(e):t(null,n))})},Mongoose.prototype.disconnect=function(e){const o=this instanceof Mongoose?this:mongoose;return o._promiseOrCallback(e,e=>{let t=o.connections.length;if(t<=0)return e(null);o.connections.forEach(o=>{o.close(function(o){if(o)return e(o);--t||e(null)})})})},Mongoose.prototype.startSession=function(){const e=this instanceof Mongoose?this:mongoose;return e.connection.startSession.apply(e.connection,arguments)},Mongoose.prototype.pluralize=function(e){const o=this instanceof Mongoose?this:mongoose;return arguments.length>0&&(o._pluralize=e),o._pluralize},Mongoose.prototype.model=function(e,o,t,n){const r=this instanceof Mongoose?this:mongoose;let s,i;if(\"function\"==typeof e&&(e=(s=e).name,!(s.prototype instanceof Model)))throw new r.Error(\"The provided class \"+e+\" must extend Model\");if(\"string\"==typeof o&&(t=o,o=!1),!utils.isObject(o)||o instanceof Schema||(o=new Schema(o)),o&&!(o instanceof Schema))throw new Error(\"The 2nd parameter to `mongoose.model()` should be a schema or a POJO\");if(\"boolean\"==typeof t&&(n=t,t=null),n&&utils.isObject(n)?(i=n,n=!0):i={},!r.modelSchemas[e]){if(!o)throw new mongoose.Error.MissingSchemaError(e);r.modelSchemas[e]=o}const c=o;let p;o&&(r.get(\"cloneSchemas\")&&(o=o.clone()),r._applyPlugins(o));const a=r.options.hasOwnProperty(\"overwriteModels\")?r.options.overwriteModels:i.overwriteModels;if(r.models[e]&&!1!==i.cache&&!0!==a){if(c&&c.instanceOfSchema&&c!==r.models[e].schema)throw new r.Error.OverwriteModelError(e);return t&&t!==r.models[e].collection.name?(o=(s=r.models[e]).prototype.schema,p=s.__subclass(r.connection,o,t)):r.models[e]}if(!o&&!(o=this.modelSchemas[e]))throw new mongoose.Error.MissingSchemaError(e);\"pluralization\"in o.options||(o.options.pluralization=r.options.pluralization),t||(t=o.get(\"collection\")||utils.toCollectionName(e,r.pluralize()));const l=i.connection||r.connection;return s=r.Model.compile(s||e,o,t,l,r),n||s.init(function(){}),l.emit(\"model\",s),!1===i.cache?s:(r.models[e]=s,r.models[e])},Mongoose.prototype.deleteModel=function(e){const o=this instanceof Mongoose?this:mongoose;return o.connection.deleteModel(e),o},Mongoose.prototype.modelNames=function(){const e=this instanceof Mongoose?this:mongoose;return Object.keys(e.models)},Mongoose.prototype._applyPlugins=function(e,o){const t=this instanceof Mongoose?this:mongoose;(o=o||{}).applyPluginsToDiscriminators=get(t,\"options.applyPluginsToDiscriminators\",!1),o.applyPluginsToChildSchemas=get(t,\"options.applyPluginsToChildSchemas\",!0),applyPlugins(e,t.plugins,o,\"$globalPluginsApplied\")},Mongoose.prototype.plugin=function(e,o){const t=this instanceof Mongoose?this:mongoose;return t.plugins.push([e,o]),t},Mongoose.prototype.__defineGetter__(\"connection\",function(){return this.connections[0]}),Mongoose.prototype.__defineSetter__(\"connection\",function(e){e instanceof Connection&&(this.connections[0]=e,this.models=e.models)}),Mongoose.prototype.connections;const Connection=driver.get().getConnection(),Collection=driver.get().Collection;Mongoose.prototype.Aggregate=Aggregate,Mongoose.prototype.Collection=Collection,Mongoose.prototype.Connection=Connection,Mongoose.prototype.version=pkg.version,Mongoose.prototype.Mongoose=Mongoose,Mongoose.prototype.Schema=Schema,Mongoose.prototype.SchemaType=SchemaType,Mongoose.prototype.SchemaTypes=Schema.Types,Mongoose.prototype.VirtualType=VirtualType,Mongoose.prototype.Types=Types,Mongoose.prototype.Query=Query,Object.defineProperty(Mongoose.prototype,\"Promise\",{get:function(){return PromiseProvider.get()},set:function(e){PromiseProvider.set(e)}}),Mongoose.prototype.PromiseProvider=PromiseProvider,Mongoose.prototype.Model=Model,Mongoose.prototype.Document=Document,Mongoose.prototype.DocumentProvider=require(\"./document_provider\"),Mongoose.prototype.ObjectId=SchemaTypes.ObjectId,Mongoose.prototype.isValidObjectId=function(e){if(null==e)return!0;const o=(this||mongoose).driver.get().ObjectId;if(e instanceof o)return!0;if(null!=e._id){if(e._id instanceof o)return!0;if(e._id.toString instanceof Function)return\"string\"==typeof(e=e._id.toString())&&12===e.length||!(\"string\"!=typeof e||24!==e.length||!/^[a-f0-9]*$/.test(e))}return e.toString instanceof Function&&(e=e.toString()),\"string\"==typeof e&&12===e.length||!(\"string\"!=typeof e||24!==e.length||!/^[a-f0-9]*$/.test(e))},Mongoose.prototype.Decimal128=SchemaTypes.Decimal128,Mongoose.prototype.Mixed=SchemaTypes.Mixed,Mongoose.prototype.Date=SchemaTypes.Date,Mongoose.prototype.Number=SchemaTypes.Number,Mongoose.prototype.Error=require(\"./error/index\"),Mongoose.prototype.now=function(){return new Date},Mongoose.prototype.CastError=require(\"./error/cast\"),Mongoose.prototype.SchemaTypeOptions=require(\"./options/SchemaTypeOptions\"),Mongoose.prototype.mongo=require(\"mongodb\"),Mongoose.prototype.mquery=require(\"mquery\"),Mongoose.prototype._promiseOrCallback=function(e,o,t){return promiseOrCallback(e,o,t,this.Promise)};const mongoose=module.exports=exports=new Mongoose({[defaultMongooseSymbol]:!0});","node_modules/mongoose/lib/driver.js":"\"use strict\";let driver=null;module.exports.get=function(){return driver},module.exports.set=function(e){driver=e};","node_modules/mongoose/lib/drivers/node-mongodb-native/index.js":"\"use strict\";exports.Binary=require(\"./binary\"),exports.Collection=require(\"./collection\"),exports.Decimal128=require(\"./decimal128\"),exports.ObjectId=require(\"./objectid\"),exports.ReadPreference=require(\"./ReadPreference\"),exports.getConnection=(()=>require(\"./connection\"));","node_modules/mongoose/lib/document.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,InternalCache=require(\"./internal\"),MongooseError=require(\"./error/index\"),MixedSchema=require(\"./schema/mixed\"),ObjectExpectedError=require(\"./error/objectExpected\"),ObjectParameterError=require(\"./error/objectParameter\"),ParallelValidateError=require(\"./error/parallelValidate\"),Schema=require(\"./schema\"),StrictModeError=require(\"./error/strict\"),ValidationError=require(\"./error/validation\"),ValidatorError=require(\"./error/validator\"),VirtualType=require(\"./virtualtype\"),promiseOrCallback=require(\"./helpers/promiseOrCallback\"),cleanModifiedSubpaths=require(\"./helpers/document/cleanModifiedSubpaths\"),compile=require(\"./helpers/document/compile\").compile,defineKey=require(\"./helpers/document/compile\").defineKey,flatten=require(\"./helpers/common\").flatten,get=require(\"./helpers/get\"),getEmbeddedDiscriminatorPath=require(\"./helpers/document/getEmbeddedDiscriminatorPath\"),handleSpreadDoc=require(\"./helpers/document/handleSpreadDoc\"),idGetter=require(\"./plugins/idGetter\"),isDefiningProjection=require(\"./helpers/projection/isDefiningProjection\"),isExclusive=require(\"./helpers/projection/isExclusive\"),inspect=require(\"util\").inspect,internalToObjectOptions=require(\"./options\").internalToObjectOptions,mpath=require(\"mpath\"),queryhelpers=require(\"./queryhelpers\"),utils=require(\"./utils\"),isPromise=require(\"./helpers/isPromise\"),clone=utils.clone,deepEqual=utils.deepEqual,isMongooseObject=utils.isMongooseObject,arrayAtomicsBackupSymbol=Symbol(\"mongoose.Array#atomicsBackup\"),arrayAtomicsSymbol=require(\"./helpers/symbols\").arrayAtomicsSymbol,documentArrayParent=require(\"./helpers/symbols\").documentArrayParent,documentIsModified=require(\"./helpers/symbols\").documentIsModified,documentModifiedPaths=require(\"./helpers/symbols\").documentModifiedPaths,documentSchemaSymbol=require(\"./helpers/symbols\").documentSchemaSymbol,getSymbol=require(\"./helpers/symbols\").getSymbol,populateModelSymbol=require(\"./helpers/symbols\").populateModelSymbol,scopeSymbol=require(\"./helpers/symbols\").scopeSymbol,schemaMixedSymbol=require(\"./schema/symbols\").schemaMixedSymbol;let DocumentArray,MongooseArray,Embedded;const specialProperties=utils.specialProperties;function Document(t,e,i,o){\"object\"==typeof i&&null!=i&&(i=(o=i).skipId),o=Object.assign({},o);const s=get(o,\"defaults\",!0);if(o.defaults=s,null==this.$__schema){const t=utils.isObject(e)&&!e.instanceOfSchema?new Schema(e):e;this.$__setSchema(t),e=i,i=o,o=arguments[4]||{}}if(this.$__=new InternalCache,this.$__.emitter=new EventEmitter,this.isNew=!(\"isNew\"in o)||o.isNew,this.errors=void 0,this.$__.$options=o||{},this.$locals={},this.$op=null,null!=t&&\"object\"!=typeof t)throw new ObjectParameterError(t,\"obj\",\"Document\");const r=this.$__schema;\"boolean\"==typeof e||\"throw\"===e?(this.$__.strictMode=e,e=void 0):(this.$__.strictMode=r.options.strict,this.$__.selected=e);const n=r.requiredPaths(!0);for(const t of n)this.$__.activePaths.require(t);this.$__.emitter.setMaxListeners(0);let a=null;utils.isPOJO(e)&&(a=isExclusive(e));const c=!1===a&&e?$__hasIncludedChildren(e):{};if(null==this._doc&&(this.$__buildDoc(t,e,i,a,c,!1),s&&$__applyDefaults(this,e,i,a,c,!0,{isNew:this.isNew})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0):this.$set(t,void 0,!0),t instanceof Document&&(this.isNew=t.isNew)),o.willInit&&s?EventEmitter.prototype.once.call(this,\"init\",()=>{$__applyDefaults(this,e,i,a,c,!1,o.skipDefaults,{isNew:this.isNew})}):s&&$__applyDefaults(this,e,i,a,c,!1,o.skipDefaults,{isNew:this.isNew}),this.$__._id=this._id,!this.$__.strictMode&&t){const t=this;Object.keys(this._doc).forEach(function(e){e in r.tree||defineKey(e,null,t)})}applyQueue(this)}utils.each([\"on\",\"once\",\"emit\",\"listeners\",\"removeListener\",\"setMaxListeners\",\"removeAllListeners\",\"addListener\"],function(t){Document.prototype[t]=function(){return this.$__.emitter[t].apply(this.$__.emitter,arguments)}}),Document.prototype.constructor=Document;for(const t in EventEmitter.prototype)Document[t]=EventEmitter.prototype[t];function $__hasIncludedChildren(t){const e={},i=Object.keys(t);for(const t of i){const i=t.split(\".\"),o=[];for(const t of i)o.push(t),e[o.join(\".\")]=1}return e}function $__applyDefaults(t,e,i,o,s,r,n){const a=Object.keys(t.$__schema.paths),c=a.length;for(let l=0;l<c;++l){let c,u=\"\";const h=a[l];if(\"_id\"===h&&i)continue;const p=t.$__schema.paths[h],d=-1===h.indexOf(\".\")?[h]:h.split(\".\"),_=d.length;let f=!1,m=t._doc;for(let i=0;i<_&&null!=m;++i){const a=d[i];if(u+=(u.length?\".\":\"\")+a,!0===o){if(u in e)break}else if(!1===o&&e&&!f)if(u in e)f=!0;else if(!s[u])break;if(i===_-1){if(void 0!==m[a])break;if(\"function\"==typeof p.defaultValue){if(!p.defaultValue.$runBeforeSetters&&r)break;if(p.defaultValue.$runBeforeSetters&&!r)break}else if(!r)continue;if(n&&n[u])break;if(e&&null!==o){if(!0===o){if(h in e)continue;try{c=p.getDefault(t,!1)}catch(e){t.invalidate(h,e);break}void 0!==c&&(m[a]=c,t.$__.activePaths.default(h))}else if(f){try{c=p.getDefault(t,!1)}catch(e){t.invalidate(h,e);break}void 0!==c&&(m[a]=c,t.$__.activePaths.default(h))}}else{try{c=p.getDefault(t,!1)}catch(e){t.invalidate(h,e);break}void 0!==c&&(m[a]=c,t.$__.activePaths.default(h))}}else m=m[a]}}}function markArraySubdocsPopulated(t,e){if(null==t._id||null==e||0===e.length)return;const i=String(t._id);for(const o of e){if(o.isVirtual)continue;const e=o.path.split(\".\");for(let s=0;s<e.length-1;++s){const r=e.slice(0,s+1).join(\".\"),n=e.slice(s+1).join(\".\"),a=t.get(r);if(null!=a&&a.isMongooseDocumentArray){for(let t=0;t<a.length;++t)a[t].populated(n,null==o._docs[i]?[]:o._docs[i][t],o);break}}}}function init(t,e,i,o,s){s=s||\"\";const r=Object.keys(e),n=r.length;let a,c,l,u=0;for(;u<n;)h(u++);function h(n){if(l=r[n],c=s+l,a=t.$__schema.path(c),!t.$__schema.$isRootDiscriminator||t.$__isSelected(c))if(!a&&utils.isPOJO(e[l]))i[l]||(i[l]={}),init(t,e[l],i[l],o,c+\".\");else if(a){if(null===e[l])i[l]=a._castNullish(null);else if(void 0!==e[l]){const o=(e[l].$__||{}).wasPopulated||null;if(a&&!o)try{i[l]=a.cast(e[l],t,!0)}catch(e){t.invalidate(e.path,new ValidatorError({path:e.path,message:e.message,type:\"cast\",value:e.value,reason:e}))}else i[l]=e[l]}t.isModified(c)||t.$__.activePaths.init(c)}else i[l]=e[l]}}function _isManuallyPopulatedArray(t,e){if(!Array.isArray(t))return!1;if(0===t.length)return!1;for(const i of t){if(!(i instanceof Document))return!1;if(null==i.constructor.modelName)return!1;if(i.constructor.modelName!=e&&i.constructor.baseModelName!=e)return!1}return!0}function _isEmpty(t){if(null==t)return!0;if(\"object\"!=typeof t||Array.isArray(t))return!1;for(const e of Object.keys(t))if(!_isEmpty(t[e]))return!1;return!0}function _evaluateRequiredFunctions(t){Object.keys(t.$__.activePaths.states.require).forEach(e=>{const i=t.$__schema.path(e);null!=i&&\"function\"==typeof i.originalRequiredValue&&(t.$__.cachedRequired[e]=i.originalRequiredValue.call(t,t))})}function _getPathsToValidate(t){const e={};_evaluateRequiredFunctions(t);let i=new Set(Object.keys(t.$__.activePaths.states.require).filter(function(e){return!(!t.$__isSelected(e)&&!t.isModified(e))&&(!(e in t.$__.cachedRequired)||t.$__.cachedRequired[e])}));function o(t){i.add(t)}Object.keys(t.$__.activePaths.states.init).forEach(o),Object.keys(t.$__.activePaths.states.modify).forEach(o),Object.keys(t.$__.activePaths.states.default).forEach(o);const s=t.$getAllSubdocs(),r=t.modifiedPaths();for(const o of s)if(o.$basePath){for(const t of i)(null===t||t.startsWith(o.$basePath+\".\"))&&i.delete(t);!t.isModified(o.$basePath,r)||t.isDirectModified(o.$basePath)||t.$isDefault(o.$basePath)||(i.add(o.$basePath),e[o.$basePath]=!0)}for(const e of i){const o=t.$__schema.path(e);o&&o.$isMongooseArray&&(!o.$isMongooseDocumentArray||get(o,\"schemaOptions.required\"))&&n(t.$__getValue(e),i,e)}function n(t,e,i){if(null!=t){const o=t.length;for(let s=0;s<o;++s)Array.isArray(t[s])?n(t[s],e,i+\".\"+s):e.add(i+\".\"+s)}}const a={skipArrays:!0};for(const e of i)if(t.$__schema.nested[e]){let i=t.$__getValue(e);isMongooseObject(i)&&(i=i.toObject({transform:!1}));const s=flatten(i,e,a,t.$__schema);Object.keys(s).forEach(o)}for(const e of i){if(t.$__schema.singleNestedPaths.hasOwnProperty(e)){i.delete(e);continue}const o=t.$__schema.path(e);if(!o||!o.$isSchemaMap)continue;const s=t.$__getValue(e);if(null!=s)for(const t of s.keys())i.add(e+\".\"+t)}return[i=Array.from(i),e]}function _handlePathsToValidate(t,e){const i=new Set(e),o=new Map([]);for(const t of e){if(-1===t.indexOf(\".\"))continue;const e=t.split(\".\");let i=e[0];for(let s=1;s<e.length;++s)o.set(i,t),i=i+\".\"+e[s]}const s=[];for(const e of t)i.has(e)?s.push(e):o.has(e)&&s.push(o.get(e));return s}function _markValidSubpaths(t,e){if(!t.$__.validationError)return;const i=Object.keys(t.$__.validationError.errors);for(const o of i)o.startsWith(e+\".\")&&delete t.$__.validationError.errors[o];0===Object.keys(t.$__.validationError.errors).length&&(t.$__.validationError=null)}function _checkImmutableSubpaths(t,e,i){const o=e.schema;if(null!=o)for(const e of Object.keys(o.paths)){const s=o.paths[e];if(null==s.$immutableSetter)continue;const r=null==i?void 0:i.$__getValue(e);s.$immutableSetter.call(t,r)}}function applyQueue(t){const e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(const i of e)\"pre\"!==i[0]&&\"post\"!==i[0]&&\"on\"!==i[0]&&t[i[0]].apply(t,i[1])}function minimize(t){const e=Object.keys(t);let i,o,s,r=e.length;for(;r--;)s=t[o=e[r]],utils.isObject(s)&&!Buffer.isBuffer(s)&&(t[o]=minimize(s)),void 0!==t[o]?i=!0:delete t[o];return i?t:void 0}function applyVirtuals(t,e,i,o){const s=t.$__schema,r=Object.keys(s.virtuals);let n=r.length;const a=n;let c,l,u,h=t._doc;const p=get(o,\"aliases\",!0);if(!h)return e;for(i=i||{},n=0;n<a;++n){if(c=r[n],!p&&s.aliases.hasOwnProperty(c))continue;if(l=c,null!=i.path){if(!c.startsWith(i.path+\".\"))continue;l=c.substr(i.path.length+1)}const o=l.split(\".\");if(void 0===(u=clone(t.get(c),i)))continue;const a=o.length;h=e;for(let t=0;t<a-1;++t)h[o[t]]=h[o[t]]||{},h=h[o[t]];h[o[a-1]]=u}return e}function applyGetters(t,e,i){const o=t.$__schema,s=Object.keys(o.paths);let r,n,a=s.length,c=t._doc;if(!c)return e;for(;a--;){const o=(r=s[a]).split(\".\"),l=o.length,u=l-1;let h,p=e;if(c=t._doc,t.$__isSelected(r))for(let e=0;e<l;++e){if(n=c[h=o[e]],e===u){const e=t.get(r);p[h]=clone(e,i)}else{if(null==n){h in c&&(p[h]=n);break}p=p[h]||(p[h]={})}c=n}}return e}function applySchemaTypeTransforms(t,e){const i=t.$__schema,o=Object.keys(i.paths||{});if(!t._doc)return e;for(const s of o){const o=i.paths[s];if(\"function\"==typeof o.options.transform){const i=t.get(s),r=o.options.transform.call(t,i);throwErrorIfPromise(s,r),utils.setValue(s,r,e)}else if(null!=o.$embeddedSchemaType&&\"function\"==typeof o.$embeddedSchemaType.options.transform){const i=[].concat(t.get(s)),r=o.$embeddedSchemaType.options.transform;for(let e=0;e<i.length;++e){const o=r.call(t,i[e]);i[e]=o,throwErrorIfPromise(s,o)}e[s]=i}}return e}function throwErrorIfPromise(t,e){if(isPromise(e))throw new Error(\"`transform` function must be synchronous, but the transform on path `\"+t+\"` returned a promise.\")}function omitDeselectedFields(t,e){const i=t.$__schema,o=Object.keys(i.paths||{});if(!t._doc)return e;let s=t.$__.selected;if(void 0===s&&(s={},queryhelpers.applyPaths(s,i)),null==s||0===Object.keys(s).length)return e;for(const t of o)null==s[t]||s[t]||delete e[t];return e}Document.prototype.$__schema,Document.prototype.schema,Object.defineProperty(Document.prototype,\"$locals\",{configurable:!1,enumerable:!1,writable:!0}),Document.prototype.isNew,Document.prototype.id,Document.prototype.errors,Document.prototype.$op,Document.prototype.$__buildDoc=function(t,e,i,o,s){const r={},n=Object.keys(this.$__schema.paths).filter(t=>!t.includes(\"$*\")),a=n.length;let c=0;for(;c<a;++c){const a=n[c];if(\"_id\"===a){if(i)continue;if(t&&\"_id\"in t)continue}const l=a.split(\".\"),u=l.length,h=u-1;let p=\"\",d=r,_=!1;for(let t=0;t<u;++t){const i=l[t];if(p+=(p.length?\".\":\"\")+i,!0===o){if(p in e)break}else if(!1===o&&e&&!_)if(p in e)_=!0;else if(!s[p])break;t<h&&(d=d[i]||(d[i]={}))}}this._doc=r},Document.prototype.toBSON=function(){return this.toObject(internalToObjectOptions)},Document.prototype.init=function(t,e,i){return\"function\"==typeof e&&(i=e,e=null),this.$__init(t,e),i&&i(null,this),this},Document.prototype.$__init=function(t,e){if(this.isNew=!1,this.$init=!0,e=e||{},null!=t._id&&e.populated&&e.populated.length){const i=String(t._id);for(const o of e.populated)if(o.isVirtual?this.populated(o.path,utils.getValue(o.path,t),o):this.populated(o.path,o._docs[i],o),null!=o._childDocs){for(const t of o._childDocs)null!=t&&null!=t.$__&&(t.$__.parent=this);o._childDocs=[]}}return init(this,t,this._doc,e),markArraySubdocsPopulated(this,e.populated),this.emit(\"init\",this),this.constructor.emit(\"init\",this),this.$__._id=this._id,this},Document.prototype.update=function(){const t=utils.args(arguments);t.unshift({_id:this._id});const e=this.constructor.update.apply(this.constructor,t);return null!=this.$session()&&(\"session\"in e.options||(e.options.session=this.$session())),e},Document.prototype.updateOne=function(t,e,i){const o=this.constructor.updateOne({_id:this._id},t,e);return o.pre(t=>{this.constructor._middleware.execPre(\"updateOne\",this,[this],t)}),o.post(t=>{this.constructor._middleware.execPost(\"updateOne\",this,[this],{},t)}),null!=this.$session()&&(\"session\"in o.options||(o.options.session=this.$session())),null!=i?o.exec(i):o},Document.prototype.replaceOne=function(){const t=utils.args(arguments);return t.unshift({_id:this._id}),this.constructor.replaceOne.apply(this.constructor,t)},Document.prototype.$session=function(t){if(0===arguments.length)return this.$__.session;if(this.$__.session=t,!this.ownerDocument){const e=this.$getAllSubdocs();for(const i of e)i.$session(t)}return t},Document.prototype.overwrite=function(t){const e=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(t))));for(const i of e)\"_id\"!==i&&(this.$__schema.options.versionKey&&i===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&i===this.$__schema.options.discriminatorKey||this.$set(i,t[i]));return this},Document.prototype.$set=function(t,e,i,o){utils.isPOJO(i)&&(o=i,i=void 0);const s=(o=o||{}).merge,r=i&&!0!==i,n=!0===i;let a,c,l,u,h,p=0;const d=\"strict\"in o?o.strict:this.$__.strictMode;if(r&&((a=this.$__.adhocPaths||(this.$__.adhocPaths={}))[t]=this.$__schema.interpretAsType(t,i,this.$__schema.options)),null==t){const i=t;t=e,e=i}else{if(\"string\"!=typeof t){if(t instanceof Document&&(t=t.$__isNested?t.toObject():t._doc),null==t){const i=t;t=e,e=i}h=e?e+\".\":\"\";const s=(c=Object.keys(t)).length,r=get(o,\"_skipMinimizeTopLevel\",!1);if(0===s&&r)return delete o._skipMinimizeTopLevel,e&&this.$set(e,{}),this;for(let e=0;e<s;++e){const s=h+(u=c[e]);if(l=this.$__schema.pathType(s),!0!==i||h||null==t[u]||\"nested\"!==l||null==this._doc[u]||0!==Object.keys(this._doc[u]).length||(delete this._doc[u],o=Object.assign({},o,{_skipMinimizeTopLevel:!0})),!(\"object\"!=typeof t[u]||utils.isNativeObject(t[u])||utils.isMongooseType(t[u])||null==t[u]||\"virtual\"===l||\"real\"===l||\"adhocOrUndefined\"===l||this.$__path(s)instanceof MixedSchema||this.$__schema.paths[s]&&this.$__schema.paths[s].options&&this.$__schema.paths[s].options.ref))this.$__.$setCalled.add(h+u),this.$set(t[u],h+u,n,o);else if(d){if(n&&void 0===t[u]&&void 0!==this.get(s))continue;if(\"adhocOrUndefined\"===l&&(l=getEmbeddedDiscriminatorPath(this,s,{typeOnly:!0})),\"real\"===l||\"virtual\"===l){let e=t[u];this.$__schema.paths[s]&&this.$__schema.paths[s].$isSingleNested&&t[u]instanceof Document&&(e=e.toObject({virtuals:!1,transform:!1})),this.$set(h+u,e,n,o)}else if(\"nested\"===l&&t[u]instanceof Document)this.$set(h+u,t[u].toObject({transform:!1}),n,o);else if(\"throw\"===d)throw\"nested\"===l?new ObjectExpectedError(u,t[u]):new StrictModeError(u)}else void 0!==t[u]&&this.$set(h+u,t[u],n,o)}return this}this.$__.$setCalled.add(t)}let _,f=this.$__schema.pathType(t);if(\"adhocOrUndefined\"===f&&(f=getEmbeddedDiscriminatorPath(this,t,{typeOnly:!0})),e=handleSpreadDoc(e),\"nested\"===f&&e){if(\"object\"==typeof e&&null!=e){const i=null!=this.$__.savedState&&this.$__.savedState.hasOwnProperty(t);if(null!=this.$__.savedState&&!this.isNew&&!this.$__.savedState.hasOwnProperty(t)){const e=this.$__getValue(t);this.$__.savedState[t]=e;const i=Object.keys(e||{});for(const o of i)this.$__.savedState[t+\".\"+o]=e[o]}if(s)return this.$set(e,t,n);this.$__setValue(t,null),cleanModifiedSubpaths(this,t);const o=Object.keys(e);this.$__setValue(t,{});for(const i of o)this.$set(t+\".\"+i,e[i],n);return i&&utils.deepEqual(this.$__.savedState[t],e)?this.unmarkModified(t):this.markModified(t),cleanModifiedSubpaths(this,t,{skipDocArrays:!0}),this}return this.invalidate(t,new MongooseError.CastError(\"Object\",e,t)),this}const m=-1===t.indexOf(\".\")?[t]:t.split(\".\");if(\"string\"==typeof this.$__schema.aliases[m[0]]&&(m[0]=this.$__schema.aliases[m[0]]),\"adhocOrUndefined\"===f&&d){let i;for(p=0;p<m.length;++p){const o=m.slice(0,p+1).join(\".\");if(p+1<m.length&&\"virtual\"===this.$__schema.pathType(o))return mpath.set(t,e,this),this;if(null!=(_=this.$__schema.path(o))&&_ instanceof MixedSchema){i=!0;break}}if(null==_&&(_=getEmbeddedDiscriminatorPath(this,t)),!i&&!_){if(\"throw\"===d)throw new StrictModeError(t);return this}}else{if(\"virtual\"===f)return(_=this.$__schema.virtualpath(t)).applySetters(e,this),this;_=this.$__path(t)}let y,$=this._doc,b=\"\";for(p=0;p<m.length-1;++p)$=$[m[p]],b+=(b.length>0?\".\":\"\")+m[p],$||(this.$set(b,{}),this.$__isSelected(b)||this.unmarkModified(b),$=this.$__getValue(b));if(m.length<=1)y=t;else{for(p=0;p<m.length;++p){const t=m.slice(0,p+1).join(\".\");if(null===this.get(t,null,{getters:!1})){y=t;break}}y||(y=t)}const g=(()=>null!=this.$__.$options.priorDoc?this.$__.$options.priorDoc.$__getValue(t):n?void 0:this.$__getValue(t))();if(!_)return this.$__set(y,t,n,m,_,e,g),this;if((_.$isSingleNested||_.$isMongooseArray)&&_markValidSubpaths(this,t),_.$isSingleNested&&null!=e&&s){e instanceof Document&&(e=e.toObject({virtuals:!1,transform:!1}));const i=Object.keys(e);for(const s of i)this.$set(t+\".\"+s,e[s],n,o);return this}let v=!0;try{const i=(()=>{if(null==_.options)return!1;if(!(e instanceof Document))return!1;const t=e.constructor,i=_.options.ref;if(null!=i&&(i===t.modelName||i===t.baseModelName))return!0;const o=_.options.refPath;if(null==o)return!1;const s=e.get(o);return s===t.modelName||s===t.baseModelName})();let o,s=!1;if(i&&e instanceof Document&&(this.populated(t,e._id,{[populateModelSymbol]:e.constructor}),e.$__.wasPopulated=!0,s=!0),_.options&&Array.isArray(_.options[this.$__schema.options.typeKey])&&_.options[this.$__schema.options.typeKey].length&&_.options[this.$__schema.options.typeKey][0].ref&&_isManuallyPopulatedArray(e,_.options[this.$__schema.options.typeKey][0].ref)){this.ownerDocument?(o={[populateModelSymbol]:e[0].constructor},this.ownerDocument().populated(this.$__fullPath(t),e.map(function(t){return t._id}),o)):(o={[populateModelSymbol]:e[0].constructor},this.populated(t,e.map(function(t){return t._id}),o));for(const t of e)t.$__.wasPopulated=!0;s=!0}if(null==this.$__schema.singleNestedPaths[t]&&(e=_.applySetters(e,this,!1,g)),_.$isMongooseDocumentArray&&Array.isArray(e)&&e.length>0&&null!=e[0]&&null!=e[0].$__&&null!=e[0].$__.populated){const i=Object.keys(e[0].$__.populated);for(const o of i)this.populated(t+\".\"+o,e.map(t=>t.populated(o)),e[0].$__.populated[o].options);s=!0}if(!s&&this.$__.populated){if(Array.isArray(e)&&this.$__.populated[t])for(let t=0;t<e.length;++t)e[t]instanceof Document&&(e[t]=e[t]._id);delete this.$__.populated[t]}_.$isSingleNested&&null!=e&&_checkImmutableSubpaths(e,_,g),this.$markValid(t)}catch(i){i instanceof MongooseError.StrictModeError&&i.isImmutableError?this.invalidate(t,i):i instanceof MongooseError.CastError?(this.invalidate(i.path,i),i.$originalErrorPath&&this.invalidate(t,new MongooseError.CastError(_.instance,e,t,i.$originalErrorPath))):this.invalidate(t,new MongooseError.CastError(_.instance,e,t,i)),v=!1}return v&&(this.$__set(y,t,n,m,_,e,g),null!=this.$__.savedState&&(this.isNew||this.$__.savedState.hasOwnProperty(t)?this.$__.savedState.hasOwnProperty(t)&&utils.deepEqual(e,this.$__.savedState[t])&&this.unmarkModified(t):this.$__.savedState[t]=g)),_.$isSingleNested&&(this.isDirectModified(t)||null==e)&&cleanModifiedSubpaths(this,t),this},Document.prototype.set=Document.prototype.$set,Document.prototype.$__shouldModify=function(t,e,i,o,s,r,n){return!!this.isNew||null==this.$__schema.singleNestedPaths[e]&&(void 0===r&&!this.$__isSelected(e)||!(void 0===r&&e in this.$__.activePaths.states.default)&&(!(this.populated(e)&&r instanceof Document&&deepEqual(r._id,n))&&(!deepEqual(r,n||utils.getValue(e,this))||!!(!i&&null!==r&&void 0!==r&&e in this.$__.activePaths.states.default&&deepEqual(r,s.getDefault(this,i))))))},Document.prototype.$__set=function(t,e,i,o,s,r,n){Embedded=Embedded||require(\"./types/embedded\");const a=this;this.$__shouldModify(t,e,i,o,s,r,n)&&(this.markModified(t),MongooseArray||(MongooseArray=require(\"./types/array\")),r&&r.isMongooseArray&&(r._registerAtomic(\"$set\",r),r.isMongooseDocumentArray&&r.forEach(function(t){t&&t.__parentArray&&(t.__parentArray=r)}),this.$__.activePaths.forEach(function(t){t.startsWith(e+\".\")&&a.$__.activePaths.ignore(t)})));let c=this._doc,l=0;const u=o.length;let h=\"\";for(;l<u;l++){const t=l+1===u;if(h+=h?\".\"+o[l]:o[l],specialProperties.has(o[l]))return;t?c instanceof Map?c.set(o[l],r):c[o[l]]=r:utils.isPOJO(c[o[l]])?c=c[o[l]]:c[o[l]]&&c[o[l]]instanceof Embedded?c=c[o[l]]:c[o[l]]&&c[o[l]].$isSingleNested?c=c[o[l]]:c[o[l]]&&Array.isArray(c[o[l]])?c=c[o[l]]:(c[o[l]]=c[o[l]]||{},c=c[o[l]])}},Document.prototype.$__getValue=function(t){return utils.getValue(t,this._doc)},Document.prototype.$__setValue=function(t,e){return utils.setValue(t,e,this._doc),this},Document.prototype.get=function(t,e,i){let o;i=i||{},e&&(o=this.$__schema.interpretAsType(t,e,this.$__schema.options));let s=this.$__path(t);if(null==s&&(s=this.$__schema.virtualpath(t)),s instanceof MixedSchema){const e=this.$__schema.virtualpath(t);null!=e&&(s=e)}const r=t.split(\".\");let n=this._doc;if(s instanceof VirtualType)return s.applyGetters(void 0,this);\"string\"==typeof this.$__schema.aliases[r[0]]&&(r[0]=this.$__schema.aliases[r[0]]);for(let t=0,e=r.length;t<e;t++)n&&n._doc&&(n=n._doc),n=null==n?void 0:n instanceof Map?n.get(r[t],{getters:!1}):t===e-1?utils.getValue(r[t],n):n[r[t]];if(o&&(n=o.cast(n)),null!=s&&!1!==i.getters)n=s.applyGetters(n,this);else if(this.$__schema.nested[t]&&i.virtuals)return applyVirtuals(this,utils.clone(n)||{},{path:t});return n},Document.prototype[getSymbol]=Document.prototype.get,Document.prototype.$__path=function(t){const e=this.$__.adhocPaths,i=e&&e.hasOwnProperty(t)?e[t]:null;return i||this.$__schema.path(t)},Document.prototype.markModified=function(t,e){this.$__.activePaths.modify(t),null==e||this.ownerDocument||(this.$__.pathsToScopes[t]=e)},Document.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),delete this.$__.pathsToScopes[t]},Document.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)},Document.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.states.modify)},Document.prototype.$isEmpty=function(t){const e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length>0){const i=this.get(t);return null==i||\"object\"==typeof i&&(utils.isPOJO(i)?_isEmpty(i):0===Object.keys(i.toObject(e)).length)}return 0===Object.keys(this.toObject(e)).length},Document.prototype.modifiedPaths=function(t){t=t||{};const e=this;return Object.keys(this.$__.activePaths.states.modify).reduce(function(i,o){const s=o.split(\".\");if(i=i.concat(s.reduce(function(t,e,i){return t.concat(s.slice(0,i).concat(e).join(\".\"))},[]).filter(function(t){return-1===i.indexOf(t)})),!t.includeChildren)return i;let r=e.get(o);if(null!=r&&\"object\"==typeof r)if(r._doc&&(r=r._doc),Array.isArray(r)){const t=r.length;for(let e=0;e<t;++e)if(-1===i.indexOf(o+\".\"+e)&&(i.push(o+\".\"+e),null!=r[e]&&r[e].$__)){const t=r[e].modifiedPaths();for(const s of t)i.push(o+\".\"+e+\".\"+s)}}else Object.keys(r).filter(function(t){return-1===i.indexOf(o+\".\"+t)}).forEach(function(t){i.push(o+\".\"+t)});return i},[])},Document.prototype[documentModifiedPaths]=Document.prototype.modifiedPaths,Document.prototype.isModified=function(t,e){if(t){Array.isArray(t)||(t=t.split(\" \"));const i=e||this[documentModifiedPaths](),o=Object.keys(this.$__.activePaths.states.modify);return t.some(function(t){return!!~i.indexOf(t)})||t.some(function(t){return o.some(function(e){return e===t||t.startsWith(e+\".\")})})}return this.$__.activePaths.some(\"modify\")},Document.prototype[documentIsModified]=Document.prototype.isModified,Document.prototype.$isDefault=function(t){if(null==t)return this.$__.activePaths.some(\"default\");if(\"string\"==typeof t&&-1===t.indexOf(\" \"))return this.$__.activePaths.states.default.hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(\" \")),e.some(t=>this.$__.activePaths.states.default.hasOwnProperty(t))},Document.prototype.$isDeleted=function(t){return 0===arguments.length?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)},Document.prototype.isDirectModified=function(t){if(null==t)return this.$__.activePaths.some(\"modify\");if(\"string\"==typeof t&&-1===t.indexOf(\" \"))return this.$__.activePaths.states.modify.hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(\" \")),e.some(t=>this.$__.activePaths.states.modify.hasOwnProperty(t))},Document.prototype.isInit=function(t){if(null==t)return this.$__.activePaths.some(\"init\");if(\"string\"==typeof t&&-1===t.indexOf(\" \"))return this.$__.activePaths.states.init.hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(\" \")),e.some(t=>this.$__.activePaths.states.init.hasOwnProperty(t))},Document.prototype.isSelected=function(t){if(null==this.$__.selected)return!0;if(\"_id\"===t)return 0!==this.$__.selected._id;if(-1!==t.indexOf(\" \")&&(t=t.split(\" \")),Array.isArray(t))return t.some(t=>this.$__isSelected(t));const e=Object.keys(this.$__.selected);let i=null;if(1===e.length&&\"_id\"===e[0])return 0===this.$__.selected._id;for(const t of e)if(\"_id\"!==t&&isDefiningProjection(this.$__.selected[t])){i=!!this.$__.selected[t];break}if(null===i)return!0;if(t in this.$__.selected)return i;const o=t+\".\";for(const t of e)if(\"_id\"!==t){if(t.startsWith(o))return i||t!==o;if(o.startsWith(t+\".\"))return i}return!i},Document.prototype.$__isSelected=Document.prototype.isSelected,Document.prototype.isDirectSelected=function(t){if(null==this.$__.selected)return!0;if(\"_id\"===t)return 0!==this.$__.selected._id;if(-1!==t.indexOf(\" \")&&(t=t.split(\" \")),Array.isArray(t))return t.some(t=>this.isDirectSelected(t));const e=Object.keys(this.$__.selected);let i=null;if(1===e.length&&\"_id\"===e[0])return 0===this.$__.selected._id;for(const t of e)if(\"_id\"!==t&&isDefiningProjection(this.$__.selected[t])){i=!!this.$__.selected[t];break}return null===i||(this.$__.selected.hasOwnProperty(t)?i:!i)},Document.prototype.validate=function(t,e,i){let o;return this.$op=\"validate\",null!=this.ownerDocument||(this.$__.validating?o=new ParallelValidateError(this,{parentStack:e&&e.parentStack,conflictStack:this.$__.validating.stack}):this.$__.validating=new ParallelValidateError(this,{parentStack:e&&e.parentStack})),1===arguments.length?\"object\"!=typeof arguments[0]||Array.isArray(arguments[0])?\"function\"==typeof arguments[0]&&(i=arguments[0],e=null,t=null):(e=arguments[0],i=null,t=null):\"function\"==typeof t?(i=t,e=null,t=null):\"function\"==typeof e&&(i=e,e=t,t=null),promiseOrCallback(i,i=>{if(null!=o)return i(o);this.$__validate(t,e,t=>{this.$op=null,i(t)})},this.constructor.events)},Document.prototype.$__validate=function(t,e,i){let o;\"function\"==typeof t?(i=t,e=null,t=null):\"function\"==typeof e&&(i=e,e=null),o=e&&\"object\"==typeof e&&\"validateModifiedOnly\"in e?!!e.validateModifiedOnly:this.$__schema.options.validateModifiedOnly;const s=this,r=()=>{let t=this.$__.validationError;if(this.$__.validationError=void 0,o&&null!=t){const e=Object.keys(t.errors);for(const i of e)this.isModified(i)||delete t.errors[i];0===Object.keys(t.errors).length&&(t=void 0)}if(this.$__.cachedRequired={},this.emit(\"validate\",s),this.constructor.emit(\"validate\",s),this.$__.validating=null,t){for(const e in t.errors)!this[documentArrayParent]&&t.errors[e]instanceof MongooseError.CastError&&this.invalidate(e,t.errors[e]);return t}},n=_getPathsToValidate(this);let a=o?n[0].filter(t=>this.isModified(t)):n[0];const c=n[1];if(\"string\"==typeof t&&(t=t.split(\" \")),Array.isArray(t)&&(a=_handlePathsToValidate(a,t)),0===a.length)return process.nextTick(function(){const t=r();if(t)return s.$__schema.s.hooks.execPost(\"validate:error\",s,[s],{error:t},function(t){i(t)});i(null,s)});const l={};let u=0;const h=function(){const t=r();if(t)return s.$__schema.s.hooks.execPost(\"validate:error\",s,[s],{error:t},function(t){i(t)});i(null,s)},p=function(t){null==t||l[t]||(l[t]=!0,u++,process.nextTick(function(){const e=s.$__schema.path(t);if(!e)return--u||h();if(!s.$isValid(t))return void(--u||h());if(null!=e[schemaMixedSymbol]&&t!==e.path)return--u||h();let i,r=s.$__getValue(t);null==r&&(i=s.populated(t))&&(r=i);const n=t in s.$__.pathsToScopes?s.$__.pathsToScopes[t]:s,a={skipSchemaValidators:c[t],path:t,validateModifiedOnly:o};e.doValidate(r,function(i){if(i&&(!e.$isMongooseDocumentArray||i.$isArrayValidatorError)){if(e.$isSingleNested&&i instanceof ValidationError&&!1===e.schema.options.storeSubdocValidationError)return--u||h();s.invalidate(t,i,void 0,!0)}--u||h()},n,a)}))},d=a.length;for(let t=0;t<d;++t)p(a[t])},Document.prototype.validateSync=function(t,e){const i=this;let o;1!==arguments.length||\"object\"!=typeof arguments[0]||Array.isArray(arguments[0])||(e=arguments[0],t=null),o=e&&\"object\"==typeof e&&\"validateModifiedOnly\"in e?!!e.validateModifiedOnly:this.$__schema.options.validateModifiedOnly,\"string\"==typeof t&&(t=t.split(\" \"));const s=_getPathsToValidate(this);let r=o?s[0].filter(t=>this.isModified(t)):s[0];const n=s[1];\"string\"==typeof t&&(t=t.split(\" \")),Array.isArray(t)&&(r=_handlePathsToValidate(r,t));const a={};r.forEach(function(t){if(a[t])return;a[t]=!0;const e=i.$__schema.path(t);if(!e)return;if(!i.$isValid(t))return;const s=i.$__getValue(t),r=e.doValidateSync(s,i,{skipSchemaValidators:n[t],path:t,validateModifiedOnly:o});if(r&&(!e.$isMongooseDocumentArray||r.$isArrayValidatorError)){if(e.$isSingleNested&&r instanceof ValidationError&&!1===e.schema.options.storeSubdocValidationError)return;i.invalidate(t,r,void 0,!0)}});const c=i.$__.validationError;if(i.$__.validationError=void 0,i.emit(\"validate\",i),i.constructor.emit(\"validate\",i),c)for(const t in c.errors)c.errors[t]instanceof MongooseError.CastError&&i.invalidate(t,c.errors[t]);return c},Document.prototype.invalidate=function(t,e,i,o){if(this.$__.validationError||(this.$__.validationError=new ValidationError(this)),!this.$__.validationError.errors[t])return e&&\"string\"!=typeof e||(e=new ValidatorError({path:t,message:e,type:o||\"user defined\",value:i})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)},Document.prototype.$markValid=function(t){this.$__.validationError&&this.$__.validationError.errors[t]&&(delete this.$__.validationError.errors[t],0===Object.keys(this.$__.validationError.errors).length&&(this.$__.validationError=null))},Document.prototype.$isValid=function(t){return null==this.$__.validationError||0===Object.keys(this.$__.validationError.errors).length||null!=t&&(-1!==t.indexOf(\" \")&&(t=t.split(\" \")),Array.isArray(t)?t.some(t=>null==this.$__.validationError.errors[t]):null==this.$__.validationError.errors[t])},Document.prototype.$__reset=function(){let t=this;return DocumentArray||(DocumentArray=require(\"./types/documentarray\")),this.$__.activePaths.map(\"init\",\"modify\",function(e){return t.$__getValue(e)}).filter(function(t){return t&&t instanceof Array&&t.isMongooseDocumentArray&&t.length}).forEach(function(e){let i=e.length;for(;i--;){const t=e[i];t&&t.$__reset()}t.$__.activePaths.init(e.$path()),e[arrayAtomicsBackupSymbol]=e[arrayAtomicsSymbol],e[arrayAtomicsSymbol]={}}),this.$__.activePaths.map(\"init\",\"modify\",function(e){return t.$__getValue(e)}).filter(function(t){return t&&t.$isSingleNested}).forEach(function(e){e.$__reset(),t.$__.activePaths.init(e.$basePath)}),this.$__dirty().forEach(function(t){const e=t.value;e&&e[arrayAtomicsSymbol]&&(e[arrayAtomicsBackupSymbol]=e[arrayAtomicsSymbol],e[arrayAtomicsSymbol]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.states.modify),default:Object.assign({},this.$__.activePaths.states.default)},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.errors,this.$__.activePaths.clear(\"modify\"),this.$__.activePaths.clear(\"default\"),this.$__.validationError=void 0,this.errors=void 0,t=this,this.$__schema.requiredPaths().forEach(function(e){t.$__.activePaths.require(e)}),this},Document.prototype.$__undoReset=function(){if(null!=this.$__.backup&&null!=this.$__.backup.activePaths){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.errors=this.$__.backup.errors;for(const t of this.$__dirty()){const e=t.value;e&&e[arrayAtomicsSymbol]&&e[arrayAtomicsBackupSymbol]&&(e[arrayAtomicsSymbol]=e[arrayAtomicsBackupSymbol])}for(const t of this.$getAllSubdocs())t.$__undoReset()}},Document.prototype.$__dirty=function(){const t=this;let e=this.$__.activePaths.map(\"modify\",function(e){return{path:e,value:t.$__getValue(e),schema:t.$__path(e)}});(e=e.concat(this.$__.activePaths.map(\"default\",function(e){if(\"_id\"!==e&&null!=t.$__getValue(e))return{path:e,value:t.$__getValue(e),schema:t.$__path(e)}}))).sort(function(t,e){return t.path<e.path?-1:t.path>e.path?1:0});const i=[];let o,s;return e.forEach(function(t){t&&(null==o||0!==t.path.indexOf(o)?(o=t.path+\".\",i.push(t),s=t):null!=s&&null!=s.value&&null!=s.value[arrayAtomicsSymbol]&&s.value.hasAtomics()&&(s.value[arrayAtomicsSymbol]={},s.value[arrayAtomicsSymbol].$set=s.value))}),s=o=null,i},Document.prototype.$__setSchema=function(t){t.plugin(idGetter,{deduplicate:!0}),compile(t.tree,this,void 0,t.options);for(const e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();null==t.path(\"schema\")&&(this.schema=t),this.$__schema=t,this[documentSchemaSymbol]=t},Document.prototype.$__getArrayPathsToValidate=function(){return DocumentArray||(DocumentArray=require(\"./types/documentarray\")),this.$__.activePaths.map(\"init\",\"modify\",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&t instanceof Array&&t.isMongooseDocumentArray&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})},Document.prototype.$getAllSubdocs=function(){DocumentArray||(DocumentArray=require(\"./types/documentarray\")),Embedded=Embedded||require(\"./types/embedded\");const t=this;return Object.keys(this._doc).reduce(function(e,i){return function t(e,i,o){let s=e;return o&&(s=e instanceof Document&&e[documentSchemaSymbol].paths[o]?e._doc[o]:e[o]),s instanceof Embedded?i.push(s):s instanceof Map?i=Array.from(s.keys()).reduce(function(e,i){return t(s.get(i),e,null)},i):s&&s.$isSingleNested?(i=Object.keys(s._doc).reduce(function(e,i){return t(s._doc,e,i)},i)).push(s):s&&s.isMongooseDocumentArray?s.forEach(function(e){e&&e._doc&&(i=Object.keys(e._doc).reduce(function(i,o){return t(e._doc,i,o)},i),e instanceof Embedded&&i.push(e))}):s instanceof Document&&s.$__isNested&&(i=Object.keys(s).reduce(function(e,i){return t(s,e,i)},i)),i}(t,e,i)},[])},Document.prototype.$__handleReject=function(t){this.listeners(\"error\").length?this.emit(\"error\",t):this.constructor.listeners&&this.constructor.listeners(\"error\").length&&this.constructor.emit(\"error\",t)},Document.prototype.$toObject=function(t,e){let i={transform:!0,flattenDecimals:!0};const o=e?\"toJSON\":\"toObject\",s=get(this,\"constructor.base.options.\"+o,{}),r=get(this,\"$__schema.options\",{});let n,a;i=utils.options(i,clone(s)),i=utils.options(i,clone(r[o]||{})),(t=utils.isPOJO(t)?clone(t):{})._calledWithOptions=t._calledWithOptions||clone(t),n=null!=t._calledWithOptions.minimize?t.minimize:null!=i.minimize?i.minimize:r.minimize,a=null!=t._calledWithOptions.flattenMaps?t.flattenMaps:null!=i.flattenMaps?i.flattenMaps:r.flattenMaps;const c=Object.assign(utils.clone(t),{_isNested:!0,json:e,minimize:n,flattenMaps:a});if(utils.hasUserDefinedProperty(t,\"getters\")&&(c.getters=t.getters),utils.hasUserDefinedProperty(t,\"virtuals\")&&(c.virtuals=t.virtuals),(t.depopulate||get(t,\"_parentOptions.depopulate\",!1))&&t._isNested&&this.$__.wasPopulated)return clone(this._id,c);(t=utils.options(i,t))._isNested=!0,t.json=e,t.minimize=n,c._parentOptions=t,c._skipSingleNestedGetters=!0;const l=Object.assign({},c);l._skipSingleNestedGetters=!1;const u=t.transform;let h=clone(this._doc,c)||{};t.getters&&(applyGetters(this,h,l),t.minimize&&(h=minimize(h)||{})),(t.virtuals||t.getters&&!1!==t.virtuals)&&applyVirtuals(this,h,l,t),!1===t.versionKey&&this.$__schema.options.versionKey&&delete h[this.$__schema.options.versionKey];let p=t.transform;if(p&&applySchemaTypeTransforms(this,h),t.useProjection&&omitDeselectedFields(this,h),!0===p||r.toObject&&p){const e=t.json?r.toJSON:r.toObject;e&&(p=\"function\"==typeof t.transform?t.transform:e.transform)}else t.transform=u;if(\"function\"==typeof p){const e=p(this,h,t);void 0!==e&&(h=e)}return h},Document.prototype.toObject=function(t){return this.$toObject(t)},Document.prototype.toJSON=function(t){return this.$toObject(t,!0)},Document.prototype.parent=function(){return this.$__.parent},Document.prototype.$parent=Document.prototype.parent,Document.prototype.inspect=function(t){let e;utils.isPOJO(t)&&((e=t).minimize=!1);const i=this.toObject(e);return null==i?\"MongooseDocument { \"+i+\" }\":i},inspect.custom&&(Document.prototype[inspect.custom]=Document.prototype.inspect),Document.prototype.toString=function(){const t=this.inspect();return\"string\"==typeof t?t:inspect(t)},Document.prototype.equals=function(t){if(!t)return!1;const e=this.$__getValue(\"_id\"),i=null!=t.$__?t.$__getValue(\"_id\"):t;return e||i?e&&e.equals?e.equals(i):e===i:deepEqual(this,t)},Document.prototype.populate=function(){if(0===arguments.length)return this;const t=this.$__.populate||(this.$__.populate={}),e=utils.args(arguments);let i;if(\"function\"==typeof e[e.length-1]&&(i=e.pop()),e.length){const i=utils.populate.apply(null,e);for(const e of i)t[e.path]=e}if(i){const e=utils.object.vals(t);this.$__.populate=void 0;let o=this.constructor;if(this.$__isNested){o=this.$__[scopeSymbol].constructor;const t=this.$__.nestedPath;e.forEach(function(e){e.path=t+\".\"+e.path})}if(null!=this.$session()){const t=this.$session();e.forEach(e=>{null!=e.options?\"session\"in e.options||(e.options.session=t):e.options={session:t}})}o.populate(this,e,i)}return this},Document.prototype.$getPopulatedDocs=function(){let t=[];null!=this.$__.populated&&(t=t.concat(Object.keys(this.$__.populated))),null!=this.$$populatedVirtuals&&(t=t.concat(Object.keys(this.$$populatedVirtuals)));let e=[];for(const i of t){const t=this.get(i);Array.isArray(t)?e=e.concat(t):t instanceof Document&&e.push(t)}return e},Document.prototype.execPopulate=function(t){return null!=t&&\"function\"!=typeof t?this.populate.apply(this,arguments).execPopulate():promiseOrCallback(t,t=>{this.populate(t)},this.constructor.events)},Document.prototype.populated=function(t,e,i){if(null==e||!0===e){if(!this.$__.populated)return;const i=t.endsWith(\".$*\")?t.replace(/\\.\\$\\*$/,\"\"):t,o=this.$__.populated[i];return o?!0===e?o:o.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:i};const o=t.split(\".\");for(let t=0;t<o.length-1;++t){const s=o.slice(0,t+1).join(\".\"),r=this.get(s);if(null!=r&&null!=r.$__&&this.populated(s)){const s=o.slice(t+1).join(\".\");r.populated(s,e,i);break}}return e},Document.prototype.depopulate=function(t){let e;\"string\"==typeof t&&(t=t.split(\" \"));const i=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],o=get(this,\"$__.populated\",{});if(0===arguments.length){for(const t of i)delete this.$$populatedVirtuals[t],delete this._doc[t],delete o[t];const t=Object.keys(o);for(const i of t)(e=this.populated(i))&&(delete o[i],this.$set(i,e));return this}for(const s of t)e=this.populated(s),delete o[s],-1!==i.indexOf(s)?(delete this.$$populatedVirtuals[s],delete this._doc[s]):e&&this.$set(s,e);return this},Document.prototype.$__fullPath=function(t){return t||\"\"},Document.prototype.getChanges=function(){const t=this.$__delta();return t?t[1]:{}},Document.ValidationError=ValidationError,module.exports=exports=Document;","node_modules/mongoose/lib/schema.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,Kareem=require(\"kareem\"),MongooseError=require(\"./error/mongooseError\"),SchemaType=require(\"./schematype\"),SchemaTypeOptions=require(\"./options/SchemaTypeOptions\"),VirtualOptions=require(\"./options/VirtualOptions\"),VirtualType=require(\"./virtualtype\"),addAutoId=require(\"./helpers/schema/addAutoId\"),arrayParentSymbol=require(\"./helpers/symbols\").arrayParentSymbol,get=require(\"./helpers/get\"),getIndexes=require(\"./helpers/schema/getIndexes\"),merge=require(\"./helpers/schema/merge\"),mpath=require(\"mpath\"),readPref=require(\"./driver\").get().ReadPreference,setupTimestamps=require(\"./helpers/timestamps/setupTimestamps\"),util=require(\"util\"),utils=require(\"./utils\"),validateRef=require(\"./helpers/populate/validateRef\");let MongooseTypes;const queryHooks=require(\"./helpers/query/applyQueryMiddleware\").middlewareFunctions,documentHooks=require(\"./helpers/model/applyHooks\").middlewareFunctions,hookNames=queryHooks.concat(documentHooks).reduce((e,t)=>e.add(t),new Set);let id=0;function Schema(e,t){if(!(this instanceof Schema))return new Schema(e,t);if(this.obj=e,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this.methods={},this.methodOptions={},this.statics={},this.tree={},this.query={},this.childSchemas=[],this.plugins=[],this.$id=++id,this.s={hooks:new Kareem},this.options=this.defaultOptions(t),Array.isArray(e))for(const t of e)this.add(t);else e&&this.add(e);const s=e&&e._id&&utils.isObject(e._id);!this.paths._id&&!this.options.noId&&this.options._id&&!s&&addAutoId(this),this.setupTimestamp(this.options.timestamps)}function aliasFields(e,t){t=t||Object.keys(e.paths);for(const s of t){const t=get(e.paths[s],\"options\");if(null==t)continue;const i=e.paths[s].path,r=t.alias;if(r){if(\"string\"!=typeof r)throw new Error(\"Invalid value for alias option on \"+i+\", got \"+r);e.aliases[r]=i,e.virtual(r).get(function(e){return function(){return\"function\"==typeof this.get?this.get(e):this[e]}}(i)).set(function(e){return function(t){return this.$set(e,t)}}(i))}}}Schema.prototype=Object.create(EventEmitter.prototype),Schema.prototype.constructor=Schema,Schema.prototype.instanceOfSchema=!0,Object.defineProperty(Schema.prototype,\"$schemaType\",{configurable:!1,enumerable:!1,writable:!0}),Object.defineProperty(Schema.prototype,\"childSchemas\",{configurable:!1,enumerable:!0,writable:!0}),Schema.prototype.obj,Schema.prototype.paths,Schema.prototype.tree,Schema.prototype.clone=function(){const e=new(null==this.base?Schema:this.base.Schema)({},this._userProvidedOptions);return e.base=this.base,e.obj=this.obj,e.options=utils.clone(this.options),e.callQueue=this.callQueue.map(function(e){return e}),e.methods=utils.clone(this.methods),e.methodOptions=utils.clone(this.methodOptions),e.statics=utils.clone(this.statics),e.query=utils.clone(this.query),e.plugins=Array.prototype.slice.call(this.plugins),e._indexes=utils.clone(this._indexes),e.s.hooks=this.s.hooks.clone(),e.tree=utils.clone(this.tree),e.paths=utils.clone(this.paths),e.nested=utils.clone(this.nested),e.subpaths=utils.clone(this.subpaths),e.singleNestedPaths=utils.clone(this.singleNestedPaths),e.childSchemas=gatherChildSchemas(e),e.virtuals=utils.clone(this.virtuals),e.$globalPluginsApplied=this.$globalPluginsApplied,e.$isRootDiscriminator=this.$isRootDiscriminator,e.$implicitlyCreated=this.$implicitlyCreated,null!=this.discriminatorMapping&&(e.discriminatorMapping=Object.assign({},this.discriminatorMapping)),null!=this.discriminators&&(e.discriminators=Object.assign({},this.discriminators)),e.aliases=Object.assign({},this.aliases),e.on(\"init\",e=>this.emit(\"init\",e)),e},Schema.prototype.pick=function(e,t){const s=new Schema({},t||this.options);if(!Array.isArray(e))throw new MongooseError('Schema#pick() only accepts an array argument, got \"'+typeof e+'\"');for(const t of e)if(this.nested[t])s.add({[t]:get(this.tree,t)});else{const e=this.path(t);if(null==e)throw new MongooseError(\"Path `\"+t+\"` is not in the schema\");s.add({[t]:e})}return s},Schema.prototype.defaultOptions=function(e){e&&!1===e.safe&&(e.safe={w:0}),e&&e.safe&&0===e.safe.w&&(e.versionKey=!1),this._userProvidedOptions=null==e?{}:utils.clone(e);const t=get(this,\"base.options\",{});if((e=utils.options({strict:!(\"strict\"in t)||t.strict,strictQuery:\"strictQuery\"in t&&t.strictQuery,bufferCommands:!0,capped:!1,versionKey:\"__v\",optimisticConcurrency:!1,discriminatorKey:\"__t\",minimize:!0,autoIndex:null,shardKey:null,read:null,validateBeforeSave:!0,noId:!1,_id:!0,noVirtualId:!1,id:!0,typeKey:\"type\",typePojoToMixed:!(\"typePojoToMixed\"in t)||t.typePojoToMixed},utils.clone(e))).read&&(e.read=readPref(e.read)),e.optimisticConcurrency&&!e.versionKey)throw new MongooseError(\"Must set `versionKey` if using `optimisticConcurrency`\");return e},Schema.prototype.add=function(e,t){if(e instanceof Schema||null!=e&&e.instanceOfSchema)return merge(this,e),this;if(!1===e._id&&null==t&&(this.options._id=!1),\"__proto__.\"===(t=t||\"\")||\"constructor.\"===t||\"prototype.\"===t)return this;const s=Object.keys(e);for(const i of s){const s=t+i;if(null==e[i])throw new TypeError(\"Invalid value for schema path `\"+s+'`, got value \"'+e[i]+'\"');if(\"_id\"!==i||!1!==e[i])if(e[i]instanceof VirtualType||\"VirtualType\"===get(e[i],\"constructor.name\",null))this.virtual(e[i]);else{if(Array.isArray(e[i])&&1===e[i].length&&null==e[i][0])throw new TypeError(\"Invalid value for schema Array path `\"+s+'`, got value \"'+e[i][0]+'\"');if(utils.isPOJO(e[i])||e[i]instanceof SchemaTypeOptions)if(Object.keys(e[i]).length<1)t&&(this.nested[t.substr(0,t.length-1)]=!0),this.path(s,e[i]);else if(!e[i][this.options.typeKey]||\"type\"===this.options.typeKey&&e[i].type.type)this.nested[s]=!0,this.add(e[i],s+\".\");else if(!this.options.typePojoToMixed&&utils.isPOJO(e[i][this.options.typeKey])){t&&(this.nested[t.substr(0,t.length-1)]=!0);const s={typePojoToMixed:!1},r=new Schema(e[i][this.options.typeKey],s),o=Object.assign({},e[i],{[this.options.typeKey]:r});this.path(t+i,o)}else t&&(this.nested[t.substr(0,t.length-1)]=!0),this.path(t+i,e[i]);else t&&(this.nested[t.substr(0,t.length-1)]=!0),this.path(t+i,e[i])}}return aliasFields(this,Object.keys(e).map(e=>t?t+e:e)),this},Schema.reserved=Object.create(null),Schema.prototype.reserved=Schema.reserved;const reserved=Schema.reserved;function gatherChildSchemas(e){const t=[];for(const s of Object.keys(e.paths)){const i=e.paths[s];(i.$isMongooseDocumentArray||i.$isSingleNested)&&t.push({schema:i.schema,model:i.caster})}return t}function _getPath(e,t,s){return e.paths.hasOwnProperty(t)?e.paths[t]:e.subpaths.hasOwnProperty(s)?e.subpaths[s]:e.singleNestedPaths.hasOwnProperty(s)&&\"object\"==typeof e.singleNestedPaths[s]?e.singleNestedPaths[s]:null}function _pathToPositionalSyntax(e){return/\\.\\d+/.test(e)?e.replace(/\\.\\d+\\./g,\".$.\").replace(/\\.\\d+$/,\".$\"):e}function getMapPath(e,t){for(const s of Object.keys(e.paths)){if(!s.includes(\".$*\"))continue;if(new RegExp(\"^\"+s.replace(/\\.\\$\\*/g,\"\\\\.[^.]+\")+\"$\").test(t))return e.paths[s]}return null}function getPositionalPathType(e,t){const s=t.split(/\\.(\\d+)\\.|\\.(\\d+)$/).filter(Boolean);if(s.length<2)return e.paths.hasOwnProperty(s[0])?e.paths[s[0]]:\"adhocOrUndefined\";let i=e.path(s[0]),r=!1;if(!i)return\"adhocOrUndefined\";const o=s.length-1;for(let e=1;e<s.length;++e){r=!1;const t=s[e];if(e===o&&i&&!/\\D/.test(t)){i=i.$isMongooseDocumentArray?i.$embeddedSchemaType:i instanceof MongooseTypes.Array?i.caster:void 0;break}if(/\\D/.test(t)){if(!i||!i.schema){i=void 0;break}r=\"nested\"===i.schema.pathType(t),i=i.schema.path(t)}else i instanceof MongooseTypes.Array&&e!==o&&(i=i.caster)}return e.subpaths[t]=i,i?\"real\":r?\"nested\":\"adhocOrUndefined\"}function getPositionalPath(e,t){return getPositionalPathType(e,t),e.subpaths[t]}reserved.prototype=reserved.emit=reserved.listeners=reserved.on=reserved.removeListener=reserved.collection=reserved.errors=reserved.get=reserved.init=reserved.isModified=reserved.isNew=reserved.populated=reserved.remove=reserved.save=reserved.toObject=reserved.validate=1,Schema.prototype.path=function(e,t){const s=_pathToPositionalSyntax(e);if(void 0===t){let t=_getPath(this,e,s);if(null!=t)return t;const i=getMapPath(this,e);return null!=i?i:null!=(t=this.hasMixedParent(s))?t:/\\.\\d+\\.?.*$/.test(e)?getPositionalPath(this,e):void 0}const i=e.split(\".\")[0];if(reserved[i])throw new Error(\"`\"+i+\"` may not be used as a schema pathname\");\"object\"==typeof t&&utils.hasUserDefinedProperty(t,\"ref\")&&validateRef(t.ref,e);const r=e.split(/\\./),o=r.pop();let n=this.tree,a=\"\";for(const t of r){if(a=a+=(a.length>0?\".\":\"\")+t,n[t]||(this.nested[a]=!0,n[t]={}),\"object\"!=typeof n[t]){const s=\"Cannot set nested path `\"+e+\"`. Parent path `\"+a+\"` already set to type \"+n[t].name+\".\";throw new Error(s)}n=n[t]}n[o]=utils.clone(t),this.paths[e]=this.interpretAsType(e,t,this.options);const h=this.paths[e];if(h.$isSchemaMap){const s=e+\".$*\";let i={type:{}};if(utils.hasUserDefinedProperty(t,\"of\")){i=utils.isPOJO(t.of)&&Object.keys(t.of).length>0&&!utils.hasUserDefinedProperty(t.of,this.options.typeKey)?new Schema(t.of):t.of}this.paths[s]=this.interpretAsType(s,i,this.options),h.$__schemaType=this.paths[s]}if(h.$isSingleNested){for(const t of Object.keys(h.schema.paths))this.singleNestedPaths[e+\".\"+t]=h.schema.paths[t];for(const t of Object.keys(h.schema.singleNestedPaths))this.singleNestedPaths[e+\".\"+t]=h.schema.singleNestedPaths[t];for(const t of Object.keys(h.schema.subpaths))this.singleNestedPaths[e+\".\"+t]=h.schema.subpaths[t];for(const t of Object.keys(h.schema.nested))this.singleNestedPaths[e+\".\"+t]=\"nested\";Object.defineProperty(h.schema,\"base\",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),h.caster.base=this.base,this.childSchemas.push({schema:h.schema,model:h.caster})}else h.$isMongooseDocumentArray&&(Object.defineProperty(h.schema,\"base\",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),h.casterConstructor.base=this.base,this.childSchemas.push({schema:h.schema,model:h.casterConstructor}));if(h.$isMongooseArray&&h.caster instanceof SchemaType){let t=e,s=h;const i=[];for(;s.$isMongooseArray;)t+=\".$\",s.$isMongooseDocumentArray?(s.$embeddedSchemaType._arrayPath=t,s.$embeddedSchemaType._arrayParentPath=e,s=s.$embeddedSchemaType.clone()):(s.caster._arrayPath=t,s.caster._arrayParentPath=e,s=s.caster.clone()),s.path=t,i.push(s);for(const e of i)this.subpaths[e.path]=e}if(h.$isMongooseDocumentArray){for(const t of Object.keys(h.schema.paths))this.subpaths[e+\".\"+t]=h.schema.paths[t],h.schema.paths[t].$isUnderneathDocArray=!0;for(const t of Object.keys(h.schema.subpaths))this.subpaths[e+\".\"+t]=h.schema.subpaths[t],h.schema.subpaths[t].$isUnderneathDocArray=!0;for(const t of Object.keys(h.schema.singleNestedPaths)){const s=h.schema.singleNestedPaths[t];this.subpaths[e+\".\"+t]=s,\"object\"==typeof s&&null!=s&&(s.$isUnderneathDocArray=!0)}}return this},Object.defineProperty(Schema.prototype,\"base\",{configurable:!0,enumerable:!1,writable:!0,value:null}),Schema.prototype.interpretAsType=function(e,t,s){if(t instanceof SchemaType){if(t.path===e)return t;const s=t.clone();return s.path=e,s}const i=null!=this.base?this.base.Schema.Types:Schema.Types;if(!(utils.isPOJO(t)||t instanceof SchemaTypeOptions)){if(\"Object\"!==utils.getFunctionName(t.constructor)){const e=t;(t={})[s.typeKey]=e}}let r,o=!t[s.typeKey]||\"type\"===s.typeKey&&t.type.type?{}:t[s.typeKey];if(utils.isPOJO(o)||\"mixed\"===o)return new i.Mixed(e,t);if(Array.isArray(o)||o===Array||\"array\"===o||o===i.Array){let n=o===Array||\"array\"===o?t.cast||t.of:o[0];if(n&&n.instanceOfSchema)return new i.DocumentArray(e,n,t);if(n&&n[s.typeKey]&&n[s.typeKey].instanceOfSchema)return new i.DocumentArray(e,n[s.typeKey],t,n);if(Array.isArray(n))return new i.Array(e,this.interpretAsType(e,n,s),t);if(\"string\"==typeof n)n=i[n.charAt(0).toUpperCase()+n.substring(1)];else if(n&&(!n[s.typeKey]||\"type\"===s.typeKey&&n.type.type)&&utils.isPOJO(n)){if(Object.keys(n).length){const r={minimize:s.minimize};s.typeKey&&(r.typeKey=s.typeKey),s.hasOwnProperty(\"strict\")&&(r.strict=s.strict),s.hasOwnProperty(\"typePojoToMixed\")&&(r.typePojoToMixed=s.typePojoToMixed),this._userProvidedOptions.hasOwnProperty(\"_id\")?r._id=this._userProvidedOptions._id:Schema.Types.DocumentArray.defaultOptions&&null!=Schema.Types.DocumentArray.defaultOptions._id&&(r._id=Schema.Types.DocumentArray.defaultOptions._id);const o=new Schema(n,r);return o.$implicitlyCreated=!0,new i.DocumentArray(e,o,t)}return new i.Array(e,i.Mixed,t)}if(n&&(r=\"string\"==typeof(o=!n[s.typeKey]||\"type\"===s.typeKey&&n.type.type?n:n[s.typeKey])?o:o.schemaName||utils.getFunctionName(o),!i.hasOwnProperty(r)))throw new TypeError(\"Invalid schema configuration: \"+`\\`${r}\\` is not a valid type within the array \\`${e}\\`.`+\"See http://bit.ly/mongoose-schematypes for a list of valid schema types.\");return new i.Array(e,n||i.Mixed,t,s)}if(o&&o.instanceOfSchema)return new i.Embedded(o,e,t);if((r=Buffer.isBuffer(o)?\"Buffer\":\"function\"==typeof o||\"object\"==typeof o?o.schemaName||utils.getFunctionName(o):null==o?\"\"+o:o.toString())&&(r=r.charAt(0).toUpperCase()+r.substring(1)),\"ObjectID\"===r&&(r=\"ObjectId\"),null==i[r])throw new TypeError(`Invalid schema configuration: \\`${r}\\` is not `+`a valid type at path \\`${e}\\`. See `+\"http://bit.ly/mongoose-schematypes for a list of valid schema types.\");return new i[r](e,t)},Schema.prototype.eachPath=function(e){const t=Object.keys(this.paths),s=t.length;for(let i=0;i<s;++i)e(t[i],this.paths[t[i]]);return this},Schema.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;const t=Object.keys(this.paths);let s=t.length;const i=[];for(;s--;){const e=t[s];this.paths[e].isRequired&&i.push(e)}return this._requiredpaths=i,this._requiredpaths},Schema.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)},Schema.prototype.pathType=function(e){const t=_pathToPositionalSyntax(e);if(this.paths.hasOwnProperty(e))return\"real\";if(this.virtuals.hasOwnProperty(e))return\"virtual\";if(this.nested.hasOwnProperty(e))return\"nested\";if(this.subpaths.hasOwnProperty(t)||this.subpaths.hasOwnProperty(e))return\"real\";const s=this.singleNestedPaths.hasOwnProperty(t)||this.singleNestedPaths.hasOwnProperty(e);return s?\"nested\"===s?\"nested\":\"real\":null!=getMapPath(this,e)?\"real\":/\\.\\d+\\.|\\.\\d+$/.test(e)?getPositionalPathType(this,e):\"adhocOrUndefined\"},Schema.prototype.hasMixedParent=function(e){const t=e.split(/\\./g);e=\"\";for(let s=0;s<t.length;++s)if(e=s>0?e+\".\"+t[s]:t[s],this.paths.hasOwnProperty(e)&&this.paths[e]instanceof MongooseTypes.Mixed)return this.paths[e];return null},Schema.prototype.setupTimestamp=function(e){return setupTimestamps(this,e)},Schema.prototype.queue=function(e,t){return this.callQueue.push([e,t]),this},Schema.prototype.pre=function(e){if(e instanceof RegExp){const t=Array.prototype.slice.call(arguments,1);for(const s of hookNames)e.test(s)&&this.pre.apply(this,[s].concat(t));return this}if(Array.isArray(e)){const t=Array.prototype.slice.call(arguments,1);for(const s of e)this.pre.apply(this,[s].concat(t));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this},Schema.prototype.post=function(e){if(e instanceof RegExp){const t=Array.prototype.slice.call(arguments,1);for(const s of hookNames)e.test(s)&&this.post.apply(this,[s].concat(t));return this}if(Array.isArray(e)){const t=Array.prototype.slice.call(arguments,1);for(const s of e)this.post.apply(this,[s].concat(t));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this},Schema.prototype.plugin=function(e,t){if(\"function\"!=typeof e)throw new Error('First param to `schema.plugin()` must be a function, got \"'+typeof e+'\"');if(t&&t.deduplicate)for(const t of this.plugins)if(t.fn===e)return this;return this.plugins.push({fn:e,opts:t}),e(this,t),this},Schema.prototype.method=function(e,t,s){if(\"string\"!=typeof e)for(const t in e)this.methods[t]=e[t],this.methodOptions[t]=utils.clone(s);else this.methods[e]=t,this.methodOptions[e]=utils.clone(s);return this},Schema.prototype.static=function(e,t){if(\"string\"!=typeof e)for(const t in e)this.statics[t]=e[t];else this.statics[e]=t;return this},Schema.prototype.index=function(e,t){return e||(e={}),t||(t={}),t.expires&&utils.expires(t),this._indexes.push([e,t]),this},Schema.prototype.set=function(e,t,s){if(1===arguments.length)return this.options[e];switch(e){case\"read\":this.options[e]=readPref(t,s),this._userProvidedOptions[e]=this.options[e];break;case\"safe\":setSafe(this.options,t),this._userProvidedOptions[e]=this.options[e];break;case\"timestamps\":this.setupTimestamp(t),this.options[e]=t,this._userProvidedOptions[e]=this.options[e];break;case\"_id\":this.options[e]=t,this._userProvidedOptions[e]=this.options[e],t&&!this.paths._id?addAutoId(this):!t&&null!=this.paths._id&&this.paths._id.auto&&this.remove(\"_id\");break;default:this.options[e]=t,this._userProvidedOptions[e]=this.options[e]}return this};const safeDeprecationWarning=\"Mongoose: The `safe` option for schemas is deprecated. Use the `writeConcern` option instead: http://bit.ly/mongoose-write-concern\",setSafe=util.deprecate(function(e,t){e.safe=!1===t?{w:0}:t},safeDeprecationWarning);Schema.prototype.get=function(e){return this.options[e]};const indexTypes=\"2d 2dsphere hashed text\".split(\" \");function _deletePath(e,t){const s=t.split(\".\"),i=s.pop();let r=e.tree;for(const e of s)r=r[e];delete r[i]}function isArrayFilter(e){return e.startsWith(\"$[\")&&e.endsWith(\"]\")}Object.defineProperty(Schema,\"indexTypes\",{get:function(){return indexTypes},set:function(){throw new Error(\"Cannot overwrite Schema.indexTypes\")}}),Schema.prototype.indexes=function(){return getIndexes(this)},Schema.prototype.virtual=function(e,t){if(e instanceof VirtualType||null!=e&&\"VirtualType\"===e.constructor.name)return this.virtual(e.path,e.options);if(t=new VirtualOptions(t),utils.hasUserDefinedProperty(t,[\"ref\",\"refPath\"])){if(null==t.localField)throw new Error(\"Reference virtuals require `localField` option\");if(null==t.foreignField)throw new Error(\"Reference virtuals require `foreignField` option\");this.pre(\"init\",function(s){if(mpath.has(e,s)){const i=mpath.get(e,s);this.$$populatedVirtuals||(this.$$populatedVirtuals={}),t.justOne||t.count?this.$$populatedVirtuals[e]=Array.isArray(i)?i[0]:i:this.$$populatedVirtuals[e]=Array.isArray(i)?i:null==i?[]:[i],mpath.unset(e,s)}});const s=this.virtual(e);return s.options=t,s.set(function(s){this.$$populatedVirtuals||(this.$$populatedVirtuals={}),t.justOne||t.count?(this.$$populatedVirtuals[e]=Array.isArray(s)?s[0]:s,\"object\"!=typeof this.$$populatedVirtuals[e]&&(this.$$populatedVirtuals[e]=t.count?s:null)):(this.$$populatedVirtuals[e]=Array.isArray(s)?s:null==s?[]:[s],this.$$populatedVirtuals[e]=this.$$populatedVirtuals[e].filter(function(e){return e&&\"object\"==typeof e}))}),\"function\"==typeof t.get&&s.get(t.get),s}const s=this.virtuals,i=e.split(\".\");if(\"real\"===this.pathType(e))throw new Error('Virtual path \"'+e+'\" conflicts with a real path in the schema');s[e]=i.reduce(function(s,r,o){return s[r]||(s[r]=o===i.length-1?new VirtualType(t,e):{}),s[r]},this.tree);let r=i[0];for(let e=0;e<i.length-1;++e){if(null!=this.paths[r]&&this.paths[r].$isMongooseDocumentArray){const t=i.slice(e+1).join(\".\");this.paths[r].schema.virtual(t).get((e,s,i)=>{const o=i.__parentArray[arrayParentSymbol],n=r+\".\"+i.__index+\".\"+t;return o.get(n)});break}r+=\".\"+i[e+1]}return s[e]},Schema.prototype.virtualpath=function(e){return this.virtuals.hasOwnProperty(e)?this.virtuals[e]:null},Schema.prototype.remove=function(e){return\"string\"==typeof e&&(e=[e]),Array.isArray(e)&&e.forEach(function(e){if(null!=this.path(e)||this.nested[e]){if(this.nested[e]){const t=Object.keys(this.paths).concat(Object.keys(this.nested));for(const s of t)s.startsWith(e+\".\")&&(delete this.paths[s],delete this.nested[s],_deletePath(this,s));return delete this.nested[e],void _deletePath(this,e)}delete this.paths[e],_deletePath(this,e)}},this),this},Schema.prototype.loadClass=function(e,t){return e===Object.prototype||e===Function.prototype||e.prototype.hasOwnProperty(\"$isMongooseModelPrototype\")?this:(this.loadClass(Object.getPrototypeOf(e),t),t||Object.getOwnPropertyNames(e).forEach(function(t){if(t.match(/^(length|name|prototype|constructor|__proto__)$/))return;const s=Object.getOwnPropertyDescriptor(e,t);this.static(t,s.value)},this),Object.getOwnPropertyNames(e.prototype).forEach(function(s){if(s.match(/^(constructor)$/))return;const i=Object.getOwnPropertyDescriptor(e.prototype,s);t||\"function\"==typeof i.value&&this.method(s,i.value),\"function\"==typeof i.get&&(this.virtuals[s]&&(this.virtuals[s].getters=[]),this.virtual(s).get(i.get)),\"function\"==typeof i.set&&(this.virtuals[s]&&(this.virtuals[s].setters=[]),this.virtual(s).set(i.set))},this),this)},Schema.prototype._getSchema=function(e){const t=this.path(e),s=[];if(t)return t.$fullPath=e,t;const i=e.split(\".\");for(let e=0;e<i.length;++e)(\"$\"===i[e]||isArrayFilter(i[e]))&&(i[e]=\"0\");return function e(t,i){let r,o,n=t.length+1;for(;n--;)if(o=t.slice(0,n).join(\".\"),r=i.path(o)){if(s.push(o),r.caster){if(r.caster instanceof MongooseTypes.Mixed)return r.caster.$fullPath=s.join(\".\"),r.caster;if(n!==t.length&&r.schema){let s;return\"$\"===t[n]||isArrayFilter(t[n])?n+1===t.length?r:((s=e(t.slice(n+1),r.schema))&&(s.$isUnderneathDocArray=s.$isUnderneathDocArray||!r.schema.$isSingleNested),s):((s=e(t.slice(n),r.schema))&&(s.$isUnderneathDocArray=s.$isUnderneathDocArray||!r.schema.$isSingleNested),s)}}else if(r.$isSchemaMap)return n+1>=t.length?r.$__schemaType:e(t.slice(n+1),r.$__schemaType.schema);return r.$fullPath=s.join(\".\"),r}}(i,this)},Schema.prototype._getPathType=function(e){if(this.path(e))return\"real\";return function e(t,s){let i,r,o=t.length+1;for(;o--;){if(r=t.slice(0,o).join(\".\"),i=s.path(r))return i.caster?i.caster instanceof MongooseTypes.Mixed?{schema:i,pathType:\"mixed\"}:o!==t.length&&i.schema?\"$\"===t[o]||isArrayFilter(t[o])?o===t.length-1?{schema:i,pathType:\"nested\"}:e(t.slice(o+1),i.schema):e(t.slice(o),i.schema):{schema:i,pathType:i.$isSingleNested?\"nested\":\"array\"}:{schema:i,pathType:\"real\"};if(o===t.length&&s.nested[r])return{schema:s,pathType:\"nested\"}}return{schema:i||s,pathType:\"undefined\"}}(e.split(\".\"),this)},module.exports=exports=Schema,Schema.Types=MongooseTypes=require(\"./schema/index\"),exports.ObjectId=MongooseTypes.ObjectId;","node_modules/mongoose/lib/schematype.js":"\"use strict\";const MongooseError=require(\"./error/index\"),SchemaTypeOptions=require(\"./options/SchemaTypeOptions\"),$exists=require(\"./schema/operators/exists\"),$type=require(\"./schema/operators/type\"),get=require(\"./helpers/get\"),handleImmutable=require(\"./helpers/schematype/handleImmutable\"),immediate=require(\"./helpers/immediate\"),schemaTypeSymbol=require(\"./helpers/symbols\").schemaTypeSymbol,util=require(\"util\"),utils=require(\"./utils\"),validatorErrorSymbol=require(\"./helpers/symbols\").validatorErrorSymbol,documentIsModified=require(\"./helpers/symbols\").documentIsModified,populateModelSymbol=require(\"./helpers/symbols\").populateModelSymbol,CastError=MongooseError.CastError,ValidatorError=MongooseError.ValidatorError;function SchemaType(t,e,i){this[schemaTypeSymbol]=!0,this.path=t,this.instance=i,this.validators=[],this.getters=this.constructor.hasOwnProperty(\"getters\")?this.constructor.getters.slice():[],this.setters=[],e=e||{};const s=this.constructor.defaultOptions||{},r=Object.keys(s);for(const t of r)s.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=s[t]);null==e.select&&delete e.select;const o=this.OptionsConstructor||SchemaTypeOptions;this.options=new o(e),this._index=null,utils.hasUserDefinedProperty(this.options,\"immutable\")&&(this.$immutable=this.options.immutable,handleImmutable(this));const n=Object.keys(this.options);for(const t of n)if(\"cast\"!==t){if(utils.hasUserDefinedProperty(this.options,t)&&\"function\"==typeof this[t]){if(\"index\"===t&&this._index){if(!1===e.index){const t=this._index;if(\"object\"==typeof t&&null!=t){if(t.unique)throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `unique` set to true');if(t.sparse)throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}const i=e[t];if(\"default\"===t){this.default(i);continue}const s=Array.isArray(i)?i:[i];this[t].apply(this,s)}}else this.castFunction(this.options[t]);Object.defineProperty(this,\"$$context\",{enumerable:!1,configurable:!1,writable:!0,value:null})}SchemaType.prototype.OptionsConstructor=SchemaTypeOptions,SchemaType.cast=function(t){return 0===arguments.length?this._cast:(!1===t&&(t=(t=>t)),this._cast=t,this._cast)},SchemaType.prototype.castFunction=function(t){return 0===arguments.length?this._castFunction:(!1===t&&(t=this.constructor._defaultCaster||(t=>t)),this._castFunction=t,this._castFunction)},SchemaType.prototype.cast=function(){throw new Error(\"Base SchemaType class does not implement a `cast()` function\")},SchemaType.set=function(t,e){this.hasOwnProperty(\"defaultOptions\")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[t]=e},SchemaType.get=function(t){this.getters=this.hasOwnProperty(\"getters\")?this.getters:[],this.getters.push(t)},SchemaType.prototype.default=function(t){if(1===arguments.length){if(void 0===t)return void(this.defaultValue=void 0);if(null!=t&&t.instanceOfSchema)throw new MongooseError(\"Cannot set default value of path `\"+this.path+\"` to a mongoose Schema instance.\");return this.defaultValue=t,this.defaultValue}return arguments.length>1&&(this.defaultValue=utils.args(arguments)),this.defaultValue},SchemaType.prototype.index=function(t){return this._index=t,utils.expires(this._index),this},SchemaType.prototype.unique=function(t){if(!1===this._index){if(!t)return;throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `unique` set to true')}return null==this._index||!0===this._index?this._index={}:\"string\"==typeof this._index&&(this._index={type:this._index}),this._index.unique=t,this},SchemaType.prototype.text=function(t){if(!1===this._index){if(!t)return;throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `text` set to true')}return null===this._index||void 0===this._index||\"boolean\"==typeof this._index?this._index={}:\"string\"==typeof this._index&&(this._index={type:this._index}),this._index.text=t,this},SchemaType.prototype.sparse=function(t){if(!1===this._index){if(!t)return;throw new Error('Path \"'+this.path+'\" may not have `index` set to false and `sparse` set to true')}return null==this._index||\"boolean\"==typeof this._index?this._index={}:\"string\"==typeof this._index&&(this._index={type:this._index}),this._index.sparse=t,this},SchemaType.prototype.immutable=function(t){return this.$immutable=t,handleImmutable(this),this},SchemaType.prototype.transform=function(t){return this.options.transform=t,this},SchemaType.prototype.set=function(t){if(\"function\"!=typeof t)throw new TypeError(\"A setter must be a function.\");return this.setters.push(t),this},SchemaType.prototype.get=function(t){if(\"function\"!=typeof t)throw new TypeError(\"A getter must be a function.\");return this.getters.push(t),this},SchemaType.prototype.validate=function(t,e,i){if(\"function\"==typeof t||t&&\"RegExp\"===utils.getFunctionName(t.constructor)){let s;return\"function\"==typeof e?(s={validator:t,message:e}).type=i||\"user defined\":e instanceof Object&&!i?((s=utils.clone(e)).message||(s.message=s.msg),s.validator=t,s.type=s.type||\"user defined\"):(null==e&&(e=MongooseError.messages.general.default),i||(i=\"user defined\"),s={message:e,type:i,validator:t}),s.isAsync&&handleIsAsync(),this.validators.push(s),this}let s,r,o;for(s=0,r=arguments.length;s<r;s++){if(o=arguments[s],!utils.isPOJO(o)){throw new Error(\"Invalid validator. Received (\"+typeof o+\") \"+o+\". See http://mongoosejs.com/docs/api.html#schematype_SchemaType-validate\")}this.validate(o.validator,o)}return this};const handleIsAsync=util.deprecate(function(){},\"Mongoose: the `isAsync` option for custom validators is deprecated. Make your async validators return a promise instead: https://mongoosejs.com/docs/validation.html#async-custom-validators\");function asyncValidate(t,e,i,s,r){let o=!1;const n=t.call(e,i,function(t,e){o||(o=!0,e&&(s.message=e),r(t,s))});\"boolean\"==typeof n?(o=!0,r(n,s)):n&&\"function\"==typeof n.then&&n.then(function(t){o||(o=!0,r(t,s))},function(t){o||(o=!0,s.reason=t,s.message=t.message,r(!1,s))})}function handleSingle(t){return this.castForQuery(t)}function handleArray(t){const e=this;return Array.isArray(t)?t.map(function(t){return e.castForQuery(t)}):[this.castForQuery(t)]}function handle$in(t){const e=this;return Array.isArray(t)?t.map(function(t){return Array.isArray(t)&&0===t.length?t:e.castForQuery(t)}):[this.castForQuery(t)]}SchemaType.prototype.required=function(t,e){let i={};if(arguments.length>0&&null==t)return this.validators=this.validators.filter(function(t){return t.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(\"object\"==typeof t&&(e=(i=t).message||e,t=t.isRequired),!1===t)return this.validators=this.validators.filter(function(t){return t.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;const s=this;this.isRequired=!0,this.requiredValidator=function(e){const i=get(this,\"$__.cachedRequired\");if(null!=i&&!this.$__isSelected(s.path)&&!this[documentIsModified](s.path))return!0;if(null!=i&&s.path in i){const t=!i[s.path]||s.checkRequired(e,this);return delete i[s.path],t}return\"function\"==typeof t&&!t.apply(this)||s.checkRequired(e,this)},this.originalRequiredValue=t,\"string\"==typeof t&&(e=t,t=void 0);const r=e||MongooseError.messages.general.required;return this.validators.unshift(Object.assign({},i,{validator:this.requiredValidator,message:r,type:\"required\"})),this},SchemaType.prototype.ref=function(t){return this.options.ref=t,this},SchemaType.prototype.getDefault=function(t,e){let i=\"function\"==typeof this.defaultValue?this.defaultValue.call(t):this.defaultValue;if(null!==i&&void 0!==i){\"object\"!=typeof i||this.options&&this.options.shared||(i=utils.clone(i));const s=this.applySetters(i,t,e);return s&&s.$isSingleNested&&(s.$__parent=t),s}return i},SchemaType.prototype._applySetters=function(t,e,i){let s=t;if(i)return s;const r=this.setters;for(let t=r.length-1;t>=0;t--)s=r[t].call(e,s,this);return s},SchemaType.prototype._castNullish=function(t){return t},SchemaType.prototype.applySetters=function(t,e,i,s,r){let o=this._applySetters(t,e,i,s,r);return null==o?this._castNullish(o):o=this.cast(o,e,i,s,r)},SchemaType.prototype.applyGetters=function(t,e){let i=t;const s=this.getters,r=s.length;if(0===r)return i;for(let t=0;t<r;++t)i=s[t].call(e,i,this);return i},SchemaType.prototype.select=function(t){return this.selected=!!t,this},SchemaType.prototype.doValidate=function(t,e,i,s){let r=!1;const o=this.path,n=this.validators.filter(t=>null!=t&&\"object\"==typeof t);let a=n.length;if(!a)return e(null);const l=this;function u(t,i){if(!r)if(void 0===t||t)--a<=0&&immediate(function(){e(null)});else{const t=i.ErrorConstructor||ValidatorError;(r=new t(i))[validatorErrorSymbol]=!0,immediate(function(){e(r)})}}n.forEach(function(e){if(r)return;const n=e.validator;let a;const h=utils.clone(e);if(h.path=s&&s.path?s.path:o,h.value=t,n instanceof RegExp)u(n.test(t),h);else if(\"function\"==typeof n)if(void 0!==t||n===l.requiredValidator)if(h.isAsync)asyncValidate(n,i,t,h,u);else{try{a=h.propsParameter?n.call(i,t,h):n.call(i,t)}catch(t){a=!1,h.reason=t,t.message&&(h.message=t.message)}null!=a&&\"function\"==typeof a.then?a.then(function(t){u(t,h)},function(t){h.reason=t,h.message=t.message,u(a=!1,h)}):u(a,h)}else u(!0,h)})},SchemaType.prototype.doValidateSync=function(t,e,i){const s=this.path;if(!this.validators.length)return null;let r=this.validators;if(void 0===t){if(!(this.validators.length>0&&\"required\"===this.validators[0].type))return null;r=[this.validators[0]]}let o=null;return r.forEach(function(r){if(o)return;if(null==r||\"object\"!=typeof r)return;const a=r.validator,l=utils.clone(r);let u;if(l.path=i&&i.path?i.path:s,l.value=t,!a.isAsync)if(a instanceof RegExp)n(a.test(t),l);else if(\"function\"==typeof a){try{u=l.propsParameter?a.call(e,t,l):a.call(e,t)}catch(t){u=!1,l.reason=t}null!=u&&\"function\"==typeof u.then||n(u,l)}}),o;function n(t,e){if(!o&&void 0!==t&&!t){const t=e.ErrorConstructor||ValidatorError;(o=new t(e))[validatorErrorSymbol]=!0}}},SchemaType._isRef=function(t,e,i,s){let r=s&&t.options&&(t.options.ref||t.options.refPath);if(!r&&i&&null!=i.$__){const e=i.$__fullPath(t.path);r=(i.ownerDocument?i.ownerDocument():i).populated(e)||i.populated(t.path)}return!!r&&(null==e||(!(Buffer.isBuffer(e)||\"Binary\"===e._bsontype||!utils.isObject(e))||s))},SchemaType.prototype._castRef=function(t,e,i){if(null==t)return t;if(null!=t.$__)return t.$__.wasPopulated=!0,t;if(Buffer.isBuffer(t)||!utils.isObject(t)){if(i)return t;throw new CastError(this.instance,t,this.path,null,this)}const s=e.$__fullPath(this.path),r=(e.ownerDocument?e.ownerDocument():e).populated(s,!0);let o=t;return e.$__.populated&&e.$__.populated[s]&&e.$__.populated[s].options&&e.$__.populated[s].options.options&&e.$__.populated[s].options.options.lean||((o=new r.options[populateModelSymbol](t)).$__.wasPopulated=!0),o},SchemaType.prototype.$conditionalHandlers={$all:handleArray,$eq:handleSingle,$in:handle$in,$ne:handleSingle,$nin:handle$in,$exists:$exists,$type:$type},SchemaType.prototype.castForQueryWrapper=function(t){if(this.$$context=t.context,\"$conditional\"in t){const e=this.castForQuery(t.$conditional,t.val);return this.$$context=null,e}if(t.$skipQueryCastForUpdate||t.$applySetters){const e=this._castForQuery(t.val);return this.$$context=null,e}const e=this.castForQuery(t.val);return this.$$context=null,e},SchemaType.prototype.castForQuery=function(t,e){let i;if(2===arguments.length){if(!(i=this.$conditionalHandlers[t]))throw new Error(\"Can't use \"+t);return i.call(this,e)}return e=t,this._castForQuery(e)},SchemaType.prototype._castForQuery=function(t){return this.applySetters(t,this.$$context)},SchemaType.checkRequired=function(t){return arguments.length>0&&(this._checkRequired=t),this._checkRequired},SchemaType.prototype.checkRequired=function(t){return null!=t},SchemaType.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),void 0!==this.defaultValue&&(e.defaultValue=this.defaultValue),void 0!==this.$immutable&&void 0===this.options.immutable&&(e.$immutable=this.$immutable,handleImmutable(e)),void 0!==this._index&&(e._index=this._index),void 0!==this.selected&&(e.selected=this.selected),void 0!==this.isRequired&&(e.isRequired=this.isRequired),void 0!==this.originalRequiredValue&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e},module.exports=exports=SchemaType,exports.CastError=CastError,exports.ValidatorError=ValidatorError;","node_modules/mongoose/lib/schema/index.js":"\"use strict\";exports.String=require(\"./string\"),exports.Number=require(\"./number\"),exports.Boolean=require(\"./boolean\"),exports.DocumentArray=require(\"./documentarray\"),exports.Embedded=require(\"./SingleNestedPath\"),exports.Array=require(\"./array\"),exports.Buffer=require(\"./buffer\"),exports.Date=require(\"./date\"),exports.ObjectId=require(\"./objectid\"),exports.Mixed=require(\"./mixed\"),exports.Decimal128=exports.Decimal=require(\"./decimal128\"),exports.Map=require(\"./map\"),exports.Oid=exports.ObjectId,exports.Object=exports.Mixed,exports.Bool=exports.Boolean,exports.ObjectID=exports.ObjectId;","node_modules/mongoose/lib/virtualtype.js":"\"use strict\";const utils=require(\"./utils\");function VirtualType(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}VirtualType.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;const t=\"$\"+this.path;this.getters.push(function(){return this[t]}),this.setters.push(function(e){this[t]=e})},VirtualType.prototype.clone=function(){const t=new VirtualType(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t},VirtualType.prototype.get=function(t){return this.getters.push(t),this},VirtualType.prototype.set=function(t){return this.setters.push(t),this},VirtualType.prototype.applyGetters=function(t,e){utils.hasUserDefinedProperty(this.options,[\"ref\",\"refPath\"])&&e.$$populatedVirtuals&&e.$$populatedVirtuals.hasOwnProperty(this.path)&&(t=e.$$populatedVirtuals[this.path]);let s=t;for(let t=this.getters.length-1;t>=0;t--)s=this.getters[t].call(e,s,this,e);return s},VirtualType.prototype.applySetters=function(t,e){let s=t;for(let t=this.setters.length-1;t>=0;t--)s=this.setters[t].call(e,s,this,e);return s},module.exports=VirtualType;","node_modules/mongoose/lib/connectionstate.js":"\"use strict\";const STATES=module.exports=exports=Object.create(null),disconnected=\"disconnected\",connected=\"connected\",connecting=\"connecting\",disconnecting=\"disconnecting\",uninitialized=\"uninitialized\";STATES[0]=disconnected,STATES[1]=connected,STATES[2]=connecting,STATES[3]=disconnecting,STATES[99]=uninitialized,STATES.disconnected=0,STATES.connected=1,STATES.connecting=2,STATES.disconnecting=3,STATES.uninitialized=99;","node_modules/mongoose/lib/validoptions.js":"\"use strict\";const VALID_OPTIONS=Object.freeze([\"applyPluginsToChildSchemas\",\"applyPluginsToDiscriminators\",\"autoCreate\",\"autoIndex\",\"bufferCommands\",\"bufferTimeoutMS\",\"cloneSchemas\",\"debug\",\"maxTimeMS\",\"objectIdGetter\",\"overwriteModels\",\"returnOriginal\",\"runValidators\",\"selectPopulatedPaths\",\"setDefaultsOnInsert\",\"strict\",\"strictQuery\",\"toJSON\",\"toObject\",\"typePojoToMixed\",\"useCreateIndex\",\"useFindAndModify\",\"useNewUrlParser\",\"usePushEach\",\"useUnifiedTopology\"]);module.exports=VALID_OPTIONS;","node_modules/mongoose/lib/types/index.js":"\"use strict\";exports.Array=require(\"./array\"),exports.Buffer=require(\"./buffer\"),exports.Document=exports.Embedded=require(\"./embedded\"),exports.DocumentArray=require(\"./documentarray\"),exports.Decimal128=require(\"./decimal128\"),exports.ObjectId=require(\"./objectid\"),exports.Map=require(\"./map\"),exports.Subdocument=require(\"./subdocument\");","node_modules/mongoose/lib/query.js":"\"use strict\";const CastError=require(\"./error/cast\"),DocumentNotFoundError=require(\"./error/notFound\"),Kareem=require(\"kareem\"),MongooseError=require(\"./error/mongooseError\"),ObjectParameterError=require(\"./error/objectParameter\"),QueryCursor=require(\"./cursor/QueryCursor\"),ReadPreference=require(\"./driver\").get().ReadPreference,applyGlobalMaxTimeMS=require(\"./helpers/query/applyGlobalMaxTimeMS\"),applyWriteConcern=require(\"./helpers/schema/applyWriteConcern\"),cast=require(\"./cast\"),castArrayFilters=require(\"./helpers/update/castArrayFilters\"),castUpdate=require(\"./helpers/query/castUpdate\"),completeMany=require(\"./helpers/query/completeMany\"),get=require(\"./helpers/get\"),promiseOrCallback=require(\"./helpers/promiseOrCallback\"),getDiscriminatorByValue=require(\"./helpers/discriminator/getDiscriminatorByValue\"),hasDollarKeys=require(\"./helpers/query/hasDollarKeys\"),helpers=require(\"./queryhelpers\"),isExclusive=require(\"./helpers/projection/isExclusive\"),isInclusive=require(\"./helpers/projection/isInclusive\"),mquery=require(\"mquery\"),parseProjection=require(\"./helpers/projection/parseProjection\"),removeUnusedArrayFilters=require(\"./helpers/update/removeUnusedArrayFilters\"),selectPopulatedFields=require(\"./helpers/query/selectPopulatedFields\"),setDefaultsOnInsert=require(\"./helpers/setDefaultsOnInsert\"),slice=require(\"sliced\"),updateValidators=require(\"./helpers/updateValidators\"),util=require(\"util\"),utils=require(\"./utils\"),wrapThunk=require(\"./helpers/query/wrapThunk\");function Query(t,e,i,o){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new Kareem,this._executionCount=0;const r=Object.keys(e);for(const t of r)this._mongooseOptions[t]=e[t];o&&(this.mongooseCollection=o),i&&(this.model=i,this.schema=i.schema),this.model&&this.model._mapreduce&&this.lean(),mquery.call(this,this.mongooseCollection,e),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;const n=get(this,\"schema.options.collation\",null);null!=n&&(this.options.collation=n)}Query.prototype=new mquery,Query.prototype.constructor=Query,Query.base=mquery.prototype,Query.use$geoWithin=mquery.use$geoWithin,Query.prototype.toConstructor=function(){const t=this.model,e=this.mongooseCollection,i=function(r,n){if(!(this instanceof i))return new i(r,n);this._mongooseOptions=utils.clone(o._mongooseOptions),Query.call(this,r,n||null,t,e)};util.inherits(i,t.Query);const o=i.prototype;o.options={};const r=Object.assign({},this.options);return null!=r.sort&&(o.sort(r.sort),delete r.sort),o.setOptions(r),o.op=this.op,o._conditions=utils.clone(this._conditions),o._fields=utils.clone(this._fields),o._update=utils.clone(this._update,{flattenDecimals:!1}),o._path=this._path,o._distinct=this._distinct,o._collection=this._collection,o._mongooseOptions=this._mongooseOptions,i},Query.prototype.slice=function(){if(0===arguments.length)return this;let t,e;if(this._validate(\"slice\"),1===arguments.length){const i=arguments[0];if(\"object\"==typeof i&&!Array.isArray(i)){const t=Object.keys(i),e=t.length;for(let o=0;o<e;++o)this.slice(t[o],i[t[o]]);return this}this._ensurePath(\"slice\"),t=this._path,e=arguments[0]}else 2===arguments.length?\"number\"==typeof arguments[0]?(this._ensurePath(\"slice\"),t=this._path,e=slice(arguments)):(t=arguments[0],e=arguments[1]):3===arguments.length&&(t=arguments[0],e=slice(arguments,1));const i={};return i[t]={$slice:e},this.select(i),this},Query.prototype.mod=function(){let t,e;return 1===arguments.length?(this._ensurePath(\"mod\"),t=arguments[0],e=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(t=slice(arguments,1),e=arguments[0]):(t=arguments[1],e=arguments[0]):(this._ensurePath(\"mod\"),t=slice(arguments),e=this._path),(this._conditions[e]||(this._conditions[e]={})).$mod=t,this},Query.prototype.projection=function(t){return 0===arguments.length?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)},Query.prototype.select=function(){let t=arguments[0];if(!t)return this;if(1!==arguments.length)throw new Error(\"Invalid select: select only takes 1 argument\");this._validate(\"select\");const e=this._fields||(this._fields={}),i=this._userProvidedFields||(this._userProvidedFields={});if(t=parseProjection(t),utils.isObject(t)){const o=Object.keys(t);for(let r=0;r<o.length;++r){const n=t[o[r]];e[o[r]]=n,i[o[r]]=n}return this}throw new TypeError(\"Invalid select() argument. Must be string or object.\")},Query.prototype.read=function(t,e){const i=new ReadPreference(t,e);return this.options.readPreference=i,this},Query.prototype.session=function(t){return null==t&&delete this.options.session,this.options.session=t,this},Query.prototype.writeConcern=function(t){return null==t?(delete this.options.writeConcern,this):(this.options.writeConcern=t,this)},Query.prototype.w=function(t){return null==t&&delete this.options.w,null!=this.options.writeConcern?this.options.writeConcern.w=t:this.options.w=t,this},Query.prototype.j=function(t){return null==t&&delete this.options.j,null!=this.options.writeConcern?this.options.writeConcern.j=t:this.options.j=t,this},Query.prototype.wtimeout=function(t){return null==t&&delete this.options.wtimeout,null!=this.options.writeConcern?this.options.writeConcern.wtimeout=t:this.options.wtimeout=t,this},Query.prototype.getOptions=function(){return this.options},Query.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&utils.clone(t)||{},this.options=t||{},\"populate\"in t&&this.populate(this._mongooseOptions),this;if(null==t)return this;if(\"object\"!=typeof t)throw new Error('Options must be an object, got \"'+t+'\"');if(Array.isArray(t.populate)){const e=t.populate;delete t.populate;const i=e.length;for(let t=0;t<i;++t)this.populate(e[t])}return\"useFindAndModify\"in t&&(this._mongooseOptions.useFindAndModify=t.useFindAndModify,delete t.useFindAndModify),\"omitUndefined\"in t&&(this._mongooseOptions.omitUndefined=t.omitUndefined,delete t.omitUndefined),\"setDefaultsOnInsert\"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),\"overwriteDiscriminatorKey\"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),\"defaults\"in t&&(this._mongooseOptions.defaults=t.defaults),Query.base.setOptions.call(this,t)},Query.prototype.explain=function(t){return 0===arguments.length?this.options.explain=!0:!1===t?delete this.options.explain:this.options.explain=t,this},Query.prototype.allowDiskUse=function(t){return 0===arguments.length?this.options.allowDiskUse=!0:!1===t?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this},Query.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this},Query.prototype.getFilter=function(){return this._conditions},Query.prototype.getQuery=function(){return this._conditions},Query.prototype.setQuery=function(t){this._conditions=t},Query.prototype.getUpdate=function(){return this._update},Query.prototype.setUpdate=function(t){this._update=t},Query.prototype._fieldsForExec=function(){return utils.clone(this._fields)},Query.prototype._updateForExec=function(){const t=utils.clone(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t);let i=e.length;const o={};for(;i--;){const r=e[i];this.options.overwrite?o[r]=t[r]:\"$\"!==r[0]?(o.$set||(t.$set?o.$set=t.$set:o.$set={}),o.$set[r]=t[r],e.splice(i,1),~e.indexOf(\"$set\")||e.push(\"$set\")):\"$set\"===r&&o.$set||(o[r]=t[r])}return o},Query.prototype._optionsForExec=function(t){const e=utils.clone(this.options);if(delete e.populate,!(t=t||this.model))return e;const i=get(t,\"schema.options.safe\",null);\"safe\"in e||null==i||setSafe(e,i),applyWriteConcern(t.schema,e);const o=get(t,\"schema.options.read\");return\"readPreference\"in e||!o||(e.readPreference=o),void 0!==e.upsert&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),e};const safeDeprecationWarning=\"Mongoose: the `safe` option is deprecated. Use write concerns instead: http://bit.ly/mongoose-w\",setSafe=util.deprecate(function(t,e){t.safe=e},safeDeprecationWarning);function _castArrayFilters(t){try{castArrayFilters(t)}catch(e){t.error(e)}}function completeOne(t,e,i,o,r,n,s,u){const l=s?{populated:s}:void 0;if(o.rawResult&&null==e)return c(null),null;const a=helpers.createModel(t,e,r,n,o);try{a.init(e,l,c)}catch(t){c(t)}function c(t){return t?process.nextTick(()=>u(t)):o.rawResult?(e&&a?(a.$session(o.session),i.value=a):i.value=null,process.nextTick(()=>u(null,i))):(a.$session(o.session),void process.nextTick(()=>u(null,a)))}}function prepareDiscriminatorCriteria(t){if(!t||!t.model||!t.model.schema)return;const e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}function convertNewToReturnDocument(t){\"new\"in t&&(t.returnDocument=t.new?\"after\":\"before\",delete t.new),\"returnOriginal\"in t&&(t.returnDocument=t.returnOriginal?\"before\":\"after\",delete t.returnOriginal)}function _getOption(t,e,i){const o=t._optionsForExec(t.model);return e in o?o[e]:e in t.model.base.options?t.model.base.options[e]:i}function _completeOneLean(t,e,i,o){return i.rawResult?o(null,e):o(null,t)}Query.prototype.lean=function(t){return this._mongooseOptions.lean=!arguments.length||t,this},Query.prototype.set=function(t,e){if(\"object\"==typeof t){const e=Object.keys(t);for(const i of e)this.set(i,t[i]);return this}return this._update=this._update||{},this._update.$set=this._update.$set||{},this._update.$set[t]=e,this},Query.prototype.get=function(t){const e=this._update;if(null==e)return;const i=e.$set;return null==i?e[t]:utils.hasUserDefinedProperty(e,t)?e[t]:utils.hasUserDefinedProperty(i,t)?i[t]:void 0},Query.prototype.error=function(t){return 0===arguments.length?this._error:(this._error=t,this)},Query.prototype._unsetCastError=function(){if(null==this._error||this._error instanceof CastError)return this.error(null)},Query.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions},Query.prototype._castConditions=function(){try{this.cast(this.model),this._unsetCastError()}catch(t){this.error(t)}},Query.prototype._find=wrapThunk(function(t){if(this._castConditions(),null!=this.error())return t(this.error()),null;t=_wrapThunkCallback(this,t),this._applyPaths(),this._fields=this._castFields(this._fields);const e=this._fieldsForExec(),i=this._mongooseOptions,o=this,r=o._userProvidedFields||{};applyGlobalMaxTimeMS(this.options,this.model);const n=Object.assign({},{session:get(this,\"options.session\",null)}),s=this._optionsForExec();s.projection=this._fieldsForExec();const u=this._conditions;return this._collection.find(u,s,(s,u)=>{if(s)return t(s);if(0===u.length)return t(null,u);if(this.options.explain)return t(null,u);if(!i.populate)return i.lean?t(null,u):completeMany(o.model,u,e,r,n,t);const l=helpers.preparePopulationOptionsMQ(o,i);n.populated=l,o.model.populate(u,l,function(s,u){return s?t(s):i.lean?t(null,u):completeMany(o.model,u,e,r,n,t)})}),null}),Query.prototype.find=function(t,e){return this.op=\"find\",\"function\"==typeof t&&(e=t,t={}),t=utils.toObject(t),mquery.canMerge(t)?(this.merge(t),prepareDiscriminatorCriteria(this)):null!=t&&this.error(new ObjectParameterError(t,\"filter\",\"find\")),e?(this.exec(e),this):Query.base.find.call(this)},Query.prototype.merge=function(t){if(!t)return this;const e={overwrite:!0};return t instanceof Query?(t._conditions&&utils.merge(this._conditions,t._conditions,e),t._fields&&(this._fields||(this._fields={}),utils.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),utils.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),utils.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),utils.merge(this._mongooseOptions,t._mongooseOptions),this):(utils.merge(this._conditions,t,e),this)},Query.prototype.collation=function(t){return null==this.options&&(this.options={}),this.options.collation=t,this},Query.prototype._completeOne=function(t,e,i){if(!t&&!this.options.rawResult)return i(null,null);const o=this.model,r=utils.clone(this._fields),n=this._userProvidedFields||{},s=this._mongooseOptions,u=this.options;if(u.explain)return i(null,t);if(!s.populate)return s.lean?_completeOneLean(t,e,u,i):completeOne(o,t,e,u,r,n,null,i);const l=helpers.preparePopulationOptionsMQ(this,this._mongooseOptions);o.populate(t,l,(t,a)=>t?i(t):s.lean?_completeOneLean(a,e,u,i):completeOne(o,a,e,u,r,n,l,i))},Query.prototype._findOne=wrapThunk(function(t){if(this._castConditions(),this.error())return t(this.error()),null;this._applyPaths(),this._fields=this._castFields(this._fields),applyGlobalMaxTimeMS(this.options,this.model),Query.base.findOne.call(this,{},(e,i)=>{if(e)return t(e),null;this._completeOne(i,null,_wrapThunkCallback(this,t))})}),Query.prototype.findOne=function(t,e,i,o){return this.op=\"findOne\",\"function\"==typeof t?(o=t,t=null,e=null,i=null):\"function\"==typeof e?(o=e,i=null,e=null):\"function\"==typeof i&&(o=i,i=null),t=utils.toObject(t),i&&this.setOptions(i),e&&this.select(e),mquery.canMerge(t)?(this.merge(t),prepareDiscriminatorCriteria(this)):null!=t&&this.error(new ObjectParameterError(t,\"filter\",\"findOne\")),o?(this.exec(o),this):Query.base.findOne.call(this)},Query.prototype._count=wrapThunk(function(t){try{this.cast(this.model)}catch(t){this.error(t)}if(this.error())return t(this.error());applyGlobalMaxTimeMS(this.options,this.model);const e=this._conditions,i=this._optionsForExec();this._collection.count(e,i,utils.tick(t))}),Query.prototype._countDocuments=wrapThunk(function(t){try{this.cast(this.model)}catch(t){this.error(t)}if(this.error())return t(this.error());applyGlobalMaxTimeMS(this.options,this.model);const e=this._conditions,i=this._optionsForExec();this._collection.collection.countDocuments(e,i,utils.tick(t))}),Query.prototype._estimatedDocumentCount=wrapThunk(function(t){if(this.error())return t(this.error());const e=this._optionsForExec();this._collection.collection.estimatedDocumentCount(e,utils.tick(t))}),Query.prototype.count=function(t,e){return this.op=\"count\",\"function\"==typeof t&&(e=t,t=void 0),t=utils.toObject(t),mquery.canMerge(t)&&this.merge(t),e?(this.exec(e),this):this},Query.prototype.estimatedDocumentCount=function(t,e){return this.op=\"estimatedDocumentCount\",\"function\"==typeof t&&(e=t,t=void 0),\"object\"==typeof t&&null!=t&&this.setOptions(t),e?(this.exec(e),this):this},Query.prototype.countDocuments=function(t,e){return this.op=\"countDocuments\",\"function\"==typeof t&&(e=t,t=void 0),t=utils.toObject(t),mquery.canMerge(t)&&this.merge(t),e?(this.exec(e),this):this},Query.prototype.__distinct=wrapThunk(function(t){if(this._castConditions(),this.error())return t(this.error()),null;applyGlobalMaxTimeMS(this.options,this.model);const e=this._optionsForExec();this._collection.collection.distinct(this._distinct,this._conditions,e,t)}),Query.prototype.distinct=function(t,e,i){return this.op=\"distinct\",i||(\"function\"==typeof e?(i=e,e=void 0):\"function\"==typeof t&&(i=t,t=void 0,e=void 0)),e=utils.toObject(e),mquery.canMerge(e)?(this.merge(e),prepareDiscriminatorCriteria(this)):null!=e&&this.error(new ObjectParameterError(e,\"filter\",\"distinct\")),null!=t&&(this._distinct=t),null!=i&&this.exec(i),this},Query.prototype.sort=function(t){if(arguments.length>1)throw new Error(\"sort() only takes 1 Argument\");return Query.base.sort.call(this,t)},Query.prototype.remove=function(t,e){return this.op=\"remove\",\"function\"==typeof t&&(e=t,t=null),t=utils.toObject(t),mquery.canMerge(t)?(this.merge(t),prepareDiscriminatorCriteria(this)):null!=t&&this.error(new ObjectParameterError(t,\"filter\",\"remove\")),e?(this.exec(e),this):Query.base.remove.call(this)},Query.prototype._remove=wrapThunk(function(t){return this._castConditions(),null!=this.error()?(t(this.error()),this):(t=_wrapThunkCallback(this,t),Query.base.remove.call(this,helpers.handleDeleteWriteOpResult(t)))}),Query.prototype.deleteOne=function(t,e,i){return this.op=\"deleteOne\",\"function\"==typeof t?(i=t,t=null,e=null):\"function\"==typeof e?(i=e,e=null):this.setOptions(e),t=utils.toObject(t),mquery.canMerge(t)?(this.merge(t),prepareDiscriminatorCriteria(this)):null!=t&&this.error(new ObjectParameterError(t,\"filter\",\"deleteOne\")),i?(this.exec.call(this,i),this):Query.base.deleteOne.call(this)},Query.prototype._deleteOne=wrapThunk(function(t){return this._castConditions(),null!=this.error()?(t(this.error()),this):(t=_wrapThunkCallback(this,t),Query.base.deleteOne.call(this,helpers.handleDeleteWriteOpResult(t)))}),Query.prototype.deleteMany=function(t,e,i){return this.op=\"deleteMany\",\"function\"==typeof t?(i=t,t=null,e=null):\"function\"==typeof e?(i=e,e=null):this.setOptions(e),t=utils.toObject(t),mquery.canMerge(t)?(this.merge(t),prepareDiscriminatorCriteria(this)):null!=t&&this.error(new ObjectParameterError(t,\"filter\",\"deleteMany\")),i?(this.exec.call(this,i),this):Query.base.deleteMany.call(this)},Query.prototype._deleteMany=wrapThunk(function(t){return this._castConditions(),null!=this.error()?(t(this.error()),this):(t=_wrapThunkCallback(this,t),Query.base.deleteMany.call(this,helpers.handleDeleteWriteOpResult(t)))}),Query.prototype.findOneAndUpdate=function(t,e,i,o){switch(this.op=\"findOneAndUpdate\",this._validate(),arguments.length){case 3:\"function\"==typeof i&&(o=i,i={});break;case 2:\"function\"==typeof e&&(o=e,e=t,t=void 0),i=void 0;break;case 1:\"function\"==typeof t?(o=t,t=i=e=void 0):(e=t,t=i=void 0)}mquery.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),(i=i?utils.clone(i):{}).projection&&(this.select(i.projection),delete i.projection),i.fields&&(this.select(i.fields),delete i.fields);const r=get(this,\"model.base.options.returnOriginal\");return null==i.new&&null==i.returnDocument&&null==i.returnOriginal&&null!=r&&(i.returnOriginal=r),this.setOptions(i),o?(this.exec(o),this):this},Query.prototype._findOneAndUpdate=wrapThunk(function(t){if(null!=this.error())return t(this.error());this._findAndModify(\"update\",t)}),Query.prototype.findOneAndRemove=function(t,e,i){switch(this.op=\"findOneAndRemove\",this._validate(),arguments.length){case 2:\"function\"==typeof e&&(i=e,e={});break;case 1:\"function\"==typeof t&&(i=t,t=void 0,e=void 0)}return mquery.canMerge(t)&&this.merge(t),e&&this.setOptions(e),i?(this.exec(i),this):this},Query.prototype.findOneAndDelete=function(t,e,i){switch(this.op=\"findOneAndDelete\",this._validate(),arguments.length){case 2:\"function\"==typeof e&&(i=e,e={});break;case 1:\"function\"==typeof t&&(i=t,t=void 0,e=void 0)}return mquery.canMerge(t)&&this.merge(t),e&&this.setOptions(e),i?(this.exec(i),this):this},Query.prototype._findOneAndDelete=wrapThunk(function(t){if(this._castConditions(),null!=this.error())return t(this.error()),null;const e=this._conditions,i=this._optionsForExec();let o=null;if(null!=this._fields&&(i.projection=this._castFields(utils.clone(this._fields)),(o=i.projection)instanceof Error))return t(o),null;this._collection.collection.findOneAndDelete(e,i,_wrapThunkCallback(this,(e,i)=>{if(e)return t(e);const o=i.value;return this._completeOne(o,i,t)}))}),Query.prototype.findOneAndReplace=function(t,e,i,o){switch(this.op=\"findOneAndReplace\",this._validate(),arguments.length){case 3:\"function\"==typeof i&&(o=i,i=void 0);break;case 2:\"function\"==typeof e&&(o=e,e=void 0);break;case 1:\"function\"==typeof t&&(o=t,t=void 0,e=void 0,i=void 0)}if(mquery.canMerge(t)&&this.merge(t),null!=e){if(hasDollarKeys(e))throw new Error(\"The replacement document must not contain atomic operators.\");this._mergeUpdate(e)}i=i||{};const r=get(this,\"model.base.options.returnOriginal\");return null==i.new&&null==i.returnDocument&&null==i.returnOriginal&&null!=r&&(i.returnOriginal=r),this.setOptions(i),this.setOptions({overwrite:!0}),o?(this.exec(o),this):this},Query.prototype._findOneAndReplace=wrapThunk(function(t){if(this._castConditions(),null!=this.error())return t(this.error()),null;const e=this._conditions,i=this._optionsForExec();convertNewToReturnDocument(i);let o=null,r=new this.model(this._update,null,!0);if(this._update=r,this._applyPaths(),null!=this._fields&&(i.projection=this._castFields(utils.clone(this._fields)),(o=i.projection)instanceof Error))return t(o),null;r.validate(o=>{if(null!=o)return t(o);r.toBSON&&(r=r.toBSON()),this._collection.collection.findOneAndReplace(e,r,i,_wrapThunkCallback(this,(e,i)=>{if(e)return t(e);const o=i.value;return this._completeOne(o,i,t)}))})}),Query.prototype._findOneAndRemove=wrapThunk(function(t){null==this.error()?this._findAndModify(\"remove\",t):t(this.error())}),Query.prototype._findAndModify=function(t,e){if(\"function\"!=typeof e)throw new Error(\"Expected callback in _findAndModify\");const i=this.model,o=i.schema,r=this;let n;const s=castQuery(this);if(s instanceof Error)return e(s);_castArrayFilters(this);const u=this._optionsForExec(i);\"strict\"in u&&(this._mongooseOptions.strict=u.strict);const l=this.options.overwrite&&!hasDollarKeys(this._update);if(l&&(this._update=new this.model(this._update,null,!0)),\"remove\"===t)u.remove=!0;else{if(\"new\"in u||\"returnOriginal\"in u||(u.new=!1),\"upsert\"in u||(u.upsert=!1),(u.upsert||u.new)&&(u.remove=!1),!l){this._update=castDoc(this,u.overwrite);const t=Object.assign({},u,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=setDefaultsOnInsert(this._conditions,o,this._update,t),this._update&&0!==Object.keys(this._update).length){if(this._update instanceof Error)return e(this._update);this._update.$set&&0===Object.keys(this._update.$set).length&&delete this._update.$set}else{if(!u.upsert)return this.findOne(e),this;{const t=utils.clone(s);delete t._id,this._update={$set:t}}}}Array.isArray(u.arrayFilters)&&(u.arrayFilters=removeUnusedArrayFilters(this._update,u.arrayFilters))}this._applyPaths();const a=this._mongooseOptions;if(this._fields&&(n=utils.clone(this._fields),u.projection=this._castFields(n),u.projection instanceof Error))return e(u.projection);u.sort&&convertSortToArray(u);const c=function(t,i,o){if(t)return e(t);r._completeOne(i,o,e)};let p=!0;const h=_getOption(this,\"runValidators\",!1),d=r.model&&r.model.base,f=get(i,\"collection.conn\",{});if(\"useFindAndModify\"in d.options&&(p=d.get(\"useFindAndModify\")),\"useFindAndModify\"in f.config&&(p=f.config.useFindAndModify),\"useFindAndModify\"in a&&(p=a.useFindAndModify),!1===p){const i=r._collection.collection;if(convertNewToReturnDocument(u),\"remove\"===t)return i.findOneAndDelete(s,u,_wrapThunkCallback(r,function(t,e){return c(t,e?e.value:e,e)})),this;const o=l?\"findOneAndReplace\":\"findOneAndUpdate\";return h?this.validate(this._update,u,l,t=>{if(t)return e(t);this._update&&this._update.toBSON&&(this._update=this._update.toBSON()),i[o](s,this._update,u,_wrapThunkCallback(r,function(t,e){return c(t,e?e.value:e,e)}))}):(this._update&&this._update.toBSON&&(this._update=this._update.toBSON()),i[o](s,this._update,u,_wrapThunkCallback(r,function(t,e){return c(t,e?e.value:e,e)}))),this}return h?this.validate(this._update,u,l,function(t){if(t)return e(t);_legacyFindAndModify.call(r,s,r._update,u,c)}):_legacyFindAndModify.call(r,s,r._update,u,c),this};const _legacyFindAndModify=util.deprecate(function(t,e,i,o){e&&e.toBSON&&(e=e.toBSON());const r=this._collection,n=null!=i&&Array.isArray(i.sort)?i.sort:[],s=_wrapThunkCallback(this,function(t,e){return o(t,e?e.value:e,e)});r.collection._findAndModify(t,n,e,i,s)},\"Mongoose: `findOneAndUpdate()` and `findOneAndDelete()` without the `useFindAndModify` option set to false are deprecated. See: https://mongoosejs.com/docs/deprecations.html#findandmodify\");function convertSortToArray(t){if(Array.isArray(t.sort))return;if(!utils.isObject(t.sort))return;const e=[];for(const i in t.sort)utils.object.hasOwnProperty(t.sort,i)&&e.push([i,t.sort[i]]);t.sort=e}function _updateThunk(t,e){if(this._castConditions(),_castArrayFilters(this),null!=this.error())return e(this.error()),null;const i=e=_wrapThunkCallback(this,e);e=function(t,e){i(t,e?e.result:{ok:0,n:0,nModified:0})};const o=this._conditions,r=this._optionsForExec(this.model);++this._executionCount,this._update=utils.clone(this._update,r);const n=this.options.overwrite&&!hasDollarKeys(this._update);if(n){if(\"updateOne\"===t||\"updateMany\"===t)return e(new MongooseError(\"The MongoDB server disallows overwriting documents using `\"+t+\"`. See: https://mongoosejs.com/docs/deprecations.html#update\"));this._update=new this.model(this._update,null,!0)}else{if(this._update=castDoc(this,r.overwrite),this._update instanceof Error)return e(this._update),null;if(null==this._update||0===Object.keys(this._update).length)return e(null,0),null;const t=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=setDefaultsOnInsert(this._conditions,this.model.schema,this._update,t)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=removeUnusedArrayFilters(this._update,r.arrayFilters)),_getOption(this,\"runValidators\",!1)?(this.validate(this._update,r,n,i=>{if(i)return e(i);this._update.toBSON&&(this._update=this._update.toBSON()),this._collection[t](o,this._update,r,e)}),null):(this._update.toBSON&&(this._update=this._update.toBSON()),this._collection[t](o,this._update,r,e),null)}function _update(t,e,i,o,r,n){return t.op=e,i=utils.toObject(i),o=o||{},null!=r&&\"strict\"in r&&(t._mongooseOptions.strict=r.strict),i instanceof Query||null==i||\"[object Object]\"===i.toString()?t.merge(i):t.error(new ObjectParameterError(i,\"filter\",e)),utils.isObject(r)&&t.setOptions(r),t._mergeUpdate(o),n?(t.exec(n),t):Query.base[e].call(t,i,void 0,r,n)}function _orFailError(t,e){return\"function\"==typeof t&&(t=t.call(e)),null==t&&(t=new DocumentNotFoundError(e.getQuery(),e.model.modelName)),t}function _cleanCastErrorStack(t,e){return e instanceof CastError?(t.copy(e),t):e}function _wrapThunkCallback(t,e){return function(i,o){if(null!=i)return e(i);for(const r of t._transforms)try{o=r(o)}catch(i){return e(i)}return e(null,o)}}function castQuery(t){try{return t.cast(t.model)}catch(t){return t}}function castDoc(t,e){try{return t._castUpdate(t._update,e)}catch(t){return t}}function _getPopulatedPaths(t,e,i){for(const o of e)t.push(i+o.path),Array.isArray(o.populate)&&_getPopulatedPaths(t,o.populate,i+o.path+\".\")}Query.prototype._mergeUpdate=function(t){if(null!=t&&(\"object\"!=typeof t||0!==Object.keys(t).length))if(this._update||(this._update=Array.isArray(t)?[]:{}),t instanceof Query){if(Array.isArray(this._update))throw new Error(\"Cannot mix array and object updates\");t._update&&utils.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error(\"Cannot mix array and object updates\");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error(\"Cannot mix array and object updates\");utils.mergeClone(this._update,t)}},Query.prototype.validate=function(t,e,i,o){return promiseOrCallback(o,o=>{try{i?t.validate(o):updateValidators(this,this.model.schema,t,e,o)}catch(t){process.nextTick(function(){o(t)})}})},Query.prototype._execUpdate=wrapThunk(function(t){return _updateThunk.call(this,\"update\",t)}),Query.prototype._updateMany=wrapThunk(function(t){return _updateThunk.call(this,\"updateMany\",t)}),Query.prototype._updateOne=wrapThunk(function(t){return _updateThunk.call(this,\"updateOne\",t)}),Query.prototype._replaceOne=wrapThunk(function(t){return _updateThunk.call(this,\"replaceOne\",t)}),Query.prototype.update=function(t,e,i,o){return\"function\"==typeof i?(o=i,i=null):\"function\"==typeof e?(o=e,e=t,t={},i=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,i=void 0):\"object\"!=typeof t||e||i||o||(e=t,t=void 0,i=void 0,o=void 0),_update(this,\"update\",t,e,i,o)},Query.prototype.updateMany=function(t,e,i,o){return\"function\"==typeof i?(o=i,i=null):\"function\"==typeof e?(o=e,e=t,t={},i=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,i=void 0):\"object\"!=typeof t||e||i||o||(e=t,t=void 0,i=void 0,o=void 0),_update(this,\"updateMany\",t,e,i,o)},Query.prototype.updateOne=function(t,e,i,o){return\"function\"==typeof i?(o=i,i=null):\"function\"==typeof e?(o=e,e=t,t={},i=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,i=void 0):\"object\"!=typeof t||e||i||o||(e=t,t=void 0,i=void 0,o=void 0),_update(this,\"updateOne\",t,e,i,o)},Query.prototype.replaceOne=function(t,e,i,o){return\"function\"==typeof i?(o=i,i=null):\"function\"==typeof e?(o=e,e=t,t={},i=null):\"function\"==typeof t?(o=t,t=void 0,e=void 0,i=void 0):\"object\"!=typeof t||e||i||o||(e=t,t=void 0,i=void 0,o=void 0),this.setOptions({overwrite:!0}),_update(this,\"replaceOne\",t,e,i,o)},Query.prototype.map=function(t){return this._transforms.push(t),this},Query.prototype.orFail=function(t){return this.map(e=>{switch(this.op){case\"find\":if(0===e.length)throw _orFailError(t,this);break;case\"findOne\":if(null==e)throw _orFailError(t,this);break;case\"update\":case\"updateMany\":case\"updateOne\":if(0===get(e,\"nModified\"))throw _orFailError(t,this);break;case\"findOneAndDelete\":case\"findOneAndRemove\":if(0===get(e,\"lastErrorObject.n\"))throw _orFailError(t,this);break;case\"findOneAndUpdate\":case\"findOneAndReplace\":if(!1===get(e,\"lastErrorObject.updatedExisting\"))throw _orFailError(t,this);break;case\"deleteMany\":case\"deleteOne\":case\"remove\":if(0===e.n)throw _orFailError(t,this)}return e}),this},Query.prototype.exec=function(t,e){const i=this,o=new CastError;return\"function\"==typeof t?(e=t,t=null):\"string\"==typeof t&&(this.op=t),e=this.model.$handleCallbackError(e),promiseOrCallback(e,t=>{t=this.model.$wrapCallback(t),i.op?this._hooks.execPre(\"exec\",this,[],e=>{if(null!=e)return t(_cleanCastErrorStack(o,e));let i=\"_\"+this.op;\"update\"===this.op?i=\"_execUpdate\":\"distinct\"===this.op&&(i=\"__distinct\"),this[i].call(this,(e,i)=>{if(e)return t(_cleanCastErrorStack(o,e));this._hooks.execPost(\"exec\",this,[],{},e=>{if(e)return t(_cleanCastErrorStack(o,e));t(null,i)})})}):t()},this.model.events)},Query.prototype.then=function(t,e){return this.exec().then(t,e)},Query.prototype.catch=function(t){return this.exec().then(null,t)},Query.prototype.pre=function(t){return this._hooks.pre(\"exec\",t),this},Query.prototype.post=function(t){return this._hooks.post(\"exec\",t),this},Query.prototype._castUpdate=function(t,e){let i,o=this.schema;const r=o.options.discriminatorKey,n=o._baseSchema?o._baseSchema:o;if(this._mongooseOptions.overwriteDiscriminatorKey&&null!=t[r]&&n.discriminators){const e=n.discriminators[t[r]];null!=e&&(o=e)}i=\"strict\"in this._mongooseOptions?this._mongooseOptions.strict:!this.schema||!this.schema.options||this.schema.options.strict;let s,u,l=!1;\"omitUndefined\"in this._mongooseOptions&&(l=this._mongooseOptions.omitUndefined),\"useNestedStrict\"in this.options&&(s=this.options.useNestedStrict),\"upsert\"in this.options&&(u=this.options.upsert);const a=this._conditions;if(null!=o&&utils.hasUserDefinedProperty(a,o.options.discriminatorKey)&&\"object\"!=typeof a[o.options.discriminatorKey]&&null!=o.discriminators){const t=a[o.options.discriminatorKey],e=getDiscriminatorByValue(this.model.discriminators,t);o=o.discriminators[t]||e&&e.schema||o}return castUpdate(o,t,{overwrite:e,strict:i,omitUndefined:l,useNestedStrict:s,upsert:u,arrayFilters:this.options.arrayFilters},this,this._conditions)},Query.prototype.populate=function(){if(!Array.from(arguments).some(Boolean))return this;const t=utils.populate.apply(null,arguments);if(null!=this.options){const e=this.options.readConcern,i=this.options.readPreference;for(const o of t)null!=e&&null==get(o,\"options.readConcern\")&&(o.options=o.options||{},o.options.readConcern=e),null!=i&&null==get(o,\"options.readPreference\")&&(o.options=o.options||{},o.options.readPreference=i)}const e=this._mongooseOptions;if(null!=e.lean){const i=e.lean;for(const e of t)null==get(e,\"options.lean\")&&(e.options=e.options||{},e.options.lean=i)}utils.isObject(e.populate)||(e.populate={});const i=e.populate;for(const e of t){const t=e.path;i[t]&&i[t].populate&&e.populate&&(e.populate=i[t].populate.concat(e.populate)),i[e.path]=e}return this},Query.prototype.getPopulatedPaths=function(){const t=this._mongooseOptions.populate||{},e=Object.keys(t);for(const i of Object.keys(t)){const o=t[i];Array.isArray(o.populate)&&_getPopulatedPaths(e,o.populate,i+\".\")}return e},Query.prototype.cast=function(t,e){e||(e=this._conditions);const i=(t=t||this.model).schema.options.discriminatorKey;null!=e&&e.hasOwnProperty(i)&&(t=getDiscriminatorByValue(t.discriminators,e[i])||t);try{return cast(t.schema,e,{upsert:this.options&&this.options.upsert,strict:this.options&&\"strict\"in this.options?this.options.strict:get(t,\"schema.options.strict\",null),strictQuery:this.options&&this.options.strictQuery||get(t,\"schema.options.strictQuery\",null)},this)}catch(e){throw\"function\"==typeof e.setModel&&e.setModel(t),e}},Query.prototype._castFields=function(t){let e,i,o,r,n,s;if(t)for(i=[],s=(o=Object.keys(t)).length;s--;)t[r=o[s]].$elemMatch&&(e||(e={}),e[r]=t[r],i.push(r));if(e){try{n=this.cast(this.model,e)}catch(t){return t}for(s=i.length;s--;)t[r=i[s]]=n[r]}return t},Query.prototype._applyPaths=function(){this._fields=this._fields||{},helpers.applyPaths(this._fields,this.model.schema);let t=!0;\"selectPopulatedPaths\"in this.model.base.options&&(t=this.model.base.options.selectPopulatedPaths),\"selectPopulatedPaths\"in this.model.schema.options&&(t=this.model.schema.options.selectPopulatedPaths),t&&selectPopulatedFields(this._fields,this._userProvidedFields,this._mongooseOptions.populate)},Query.prototype.cursor=function(t){this._applyPaths(),this._fields=this._castFields(this._fields),this.setOptions({projection:this._fieldsForExec()}),t&&this.setOptions(t);const e=Object.assign({},this._optionsForExec(),{projection:this.projection()});try{this.cast(this.model)}catch(t){return new QueryCursor(this,e)._markError(t)}return new QueryCursor(this,e)},Query.prototype.maxscan=Query.base.maxScan,Query.prototype.tailable=function(t,e){if(t&&\"Object\"===t.constructor.name&&(e=t,t=!0),void 0===t&&(t=!0),e&&\"object\"==typeof e)for(const t of Object.keys(e))this.options[t]=\"awaitdata\"===t?!!e[t]:e[t];return Query.base.tailable.call(this,t)},Query.prototype.near=function(){const t=[],e=this._mongooseOptions.nearSphere;if(1===arguments.length)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(\"string\"==typeof arguments[0])t.push(arguments[0]);else{if(!utils.isObject(arguments[0]))throw new TypeError(\"invalid argument\");\"boolean\"!=typeof arguments[0].spherical&&(arguments[0].spherical=e),t.push(arguments[0])}else if(2===arguments.length)if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1])t.push({center:[arguments[0],arguments[1]],spherical:e});else if(\"string\"==typeof arguments[0]&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else{if(\"string\"!=typeof arguments[0]||!utils.isObject(arguments[1]))throw new TypeError(\"invalid argument\");t.push(arguments[0]),\"boolean\"!=typeof arguments[1].spherical&&(arguments[1].spherical=e),t.push(arguments[1])}else{if(3!==arguments.length)throw new TypeError(\"invalid argument\");if(\"string\"!=typeof arguments[0]||\"number\"!=typeof arguments[1]||\"number\"!=typeof arguments[2])throw new TypeError(\"invalid argument\");t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e})}return Query.base.near.apply(this,t)},Query.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this},null!=Symbol.asyncIterator&&(Query.prototype[Symbol.asyncIterator]=function(){return this.cursor().transformNull()._transformForAsyncIterator()}),Query.prototype.box=function(t,e){return!Array.isArray(t)&&utils.isObject(t)&&(e=t.ur,t=t.ll),Query.base.box.call(this,t,e)},Query.prototype.center=Query.base.circle,Query.prototype.centerSphere=function(){arguments[0]&&\"Object\"===arguments[0].constructor.name&&(arguments[0].spherical=!0),arguments[1]&&\"Object\"===arguments[1].constructor.name&&(arguments[1].spherical=!0),Query.base.circle.apply(this,arguments)},Query.prototype.selectedInclusively=function(){return isInclusive(this._fields)},Query.prototype.selectedExclusively=function(){return isExclusive(this._fields)},module.exports=Query;","node_modules/mongoose/lib/model.js":"\"use strict\";const Aggregate=require(\"./aggregate\"),ChangeStream=require(\"./cursor/ChangeStream\"),Document=require(\"./document\"),DocumentNotFoundError=require(\"./error/notFound\"),DivergentArrayError=require(\"./error/divergentArray\"),EventEmitter=require(\"events\").EventEmitter,MongooseBuffer=require(\"./types/buffer\"),MongooseError=require(\"./error/index\"),OverwriteModelError=require(\"./error/overwriteModel\"),PromiseProvider=require(\"./promise_provider\"),Query=require(\"./query\"),RemoveOptions=require(\"./options/removeOptions\"),SaveOptions=require(\"./options/saveOptions\"),Schema=require(\"./schema\"),ServerSelectionError=require(\"./error/serverSelection\"),ValidationError=require(\"./error/validation\"),VersionError=require(\"./error/version\"),ParallelSaveError=require(\"./error/parallelSave\"),applyQueryMiddleware=require(\"./helpers/query/applyQueryMiddleware\"),applyHooks=require(\"./helpers/model/applyHooks\"),applyMethods=require(\"./helpers/model/applyMethods\"),applyStaticHooks=require(\"./helpers/model/applyStaticHooks\"),applyStatics=require(\"./helpers/model/applyStatics\"),applyWriteConcern=require(\"./helpers/schema/applyWriteConcern\"),assignVals=require(\"./helpers/populate/assignVals\"),castBulkWrite=require(\"./helpers/model/castBulkWrite\"),createPopulateQueryFilter=require(\"./helpers/populate/createPopulateQueryFilter\"),getDefaultBulkwriteResult=require(\"./helpers/getDefaultBulkwriteResult\"),discriminator=require(\"./helpers/model/discriminator\"),each=require(\"./helpers/each\"),get=require(\"./helpers/get\"),getDiscriminatorByValue=require(\"./helpers/discriminator/getDiscriminatorByValue\"),getModelsMapForPopulate=require(\"./helpers/populate/getModelsMapForPopulate\"),immediate=require(\"./helpers/immediate\"),internalToObjectOptions=require(\"./options\").internalToObjectOptions,isDefaultIdIndex=require(\"./helpers/indexes/isDefaultIdIndex\"),isIndexEqual=require(\"./helpers/indexes/isIndexEqual\"),isPathSelectedInclusive=require(\"./helpers/projection/isPathSelectedInclusive\"),leanPopulateMap=require(\"./helpers/populate/leanPopulateMap\"),modifiedPaths=require(\"./helpers/update/modifiedPaths\"),parallelLimit=require(\"./helpers/parallelLimit\"),removeDeselectedForeignField=require(\"./helpers/populate/removeDeselectedForeignField\"),util=require(\"util\"),utils=require(\"./utils\"),VERSION_WHERE=1,VERSION_INC=2,VERSION_ALL=VERSION_WHERE|VERSION_INC,arrayAtomicsSymbol=require(\"./helpers/symbols\").arrayAtomicsSymbol,modelCollectionSymbol=Symbol(\"mongoose#Model#collection\"),modelDbSymbol=Symbol(\"mongoose#Model#db\"),modelSymbol=require(\"./helpers/symbols\").modelSymbol,subclassedSymbol=Symbol(\"mongoose#Model#subclassed\"),saveToObjectOptions=Object.assign({},internalToObjectOptions,{bson:!0});function Model(e,t,o){if(t instanceof Schema)throw new TypeError(\"2nd argument to `Model` must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.\");Document.call(this,e,t,o)}function _applyCustomWhere(e,t){if(null==e.$where)return;const o=Object.keys(e.$where),n=o.length;for(let i=0;i<n;++i)t[o[i]]=e.$where[o[i]]}function generateVersionError(e,t){const o=e.$__schema.options.versionKey;if(!o)return null;const n=e.$__getValue(o)||0;return new VersionError(e,n,t)}function shouldSkipVersioning(e,t){const o=e.$__schema.options.skipVersioning;return!!o&&o[t=t.replace(/\\.\\d+\\./,\".\")]}function operand(e,t,o,n,i,s){if(s||(s=\"$set\"),o[s]||(o[s]={}),o[s][n.path]=i,!1!==e.$__schema.options.versionKey&&!shouldSkipVersioning(e,n.path)&&VERSION_ALL!==(VERSION_ALL&e.$__.version))if(e.$__schema.options.optimisticConcurrency)e.$__.version=VERSION_ALL;else{switch(s){case\"$set\":case\"$unset\":case\"$pop\":case\"$pull\":case\"$pullAll\":case\"$push\":case\"$addToSet\":break;default:return}\"$push\"===s||\"$addToSet\"===s||\"$pullAll\"===s||\"$pull\"===s?e.$__.version=VERSION_INC:/^\\$p/.test(s)?increment.call(e):Array.isArray(i)?increment.call(e):/\\.\\d+\\.|\\.\\d+$/.test(n.path)&&(e.$__.version=VERSION_WHERE)}}function handleAtomics(e,t,o,n,i){if(o.$set&&o.$set[n.path])return;if(\"function\"==typeof i.$__getAtomics)return void i.$__getAtomics().forEach(function(i){const s=i[0],r=i[1];operand(e,t,o,n,r,s)});const s=i[arrayAtomicsSymbol],r=Object.keys(s);let l,c,a=r.length;if(0===a)return utils.isMongooseObject(i)?i=i.toObject({depopulate:1,_isNested:!0}):i.valueOf&&(i=i.valueOf()),operand(e,t,o,n,i);function u(e){return utils.isMongooseObject(e)?e.toObject({depopulate:1,_isNested:!0}):e}for(;a--;)l=s[c=r[a]],utils.isMongooseObject(l)?l=l.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(l)?l=l.map(u):l.valueOf&&(l=l.valueOf()),\"$addToSet\"===c&&(l={$each:l}),operand(e,t,o,n,l,c)}function checkDivergentArray(e,t,o){const n=e.populated(t,!0);if(!n&&e.$__.selected){const o=t.split(\".\")[0];if(e.$__.selected[o+\".$\"])return o}if(n&&o&&o.isMongooseArray&&(n.options.match||n.options.options&&utils.object.hasOwnProperty(n.options.options,\"limit\")||n.options.options&&n.options.options.skip||n.options.select&&(0===n.options.select._id||/\\s?-_id\\s?/.test(n.options.select)))){const e=o[arrayAtomicsSymbol];if(0===Object.keys(e).length||e.$set||e.$pop)return t}}function increment(){return this.$__.version=VERSION_ALL,this}function _checkContext(e,t){if(null==e||e===global)throw new MongooseError(\"`Model.\"+t+\"()` cannot run without a model as `this`. Make sure you are calling `MyModel.\"+t+\"()` where `MyModel` is a Mongoose model.\");if(null==e[modelSymbol])throw new MongooseError(\"`Model.\"+t+\"()` cannot run without a model as `this`. Make sure you are not calling `new Model.\"+t+\"()`\")}Model.prototype.__proto__=Document.prototype,Model.prototype.$isMongooseModelPrototype=!0,Model.prototype.db,Model.prototype.collection,Model.prototype.$__collection,Model.prototype.modelName,Model.prototype.$where,Model.prototype.baseModelName,Model.events,Model._middleware,Model.prototype.$__handleSave=function(e,t){const o=this;let n={};\"safe\"in e&&_handleSafe(e),applyWriteConcern(this.$__schema,e),void 0!==e.writeConcern?(n.writeConcern={},\"w\"in e.writeConcern&&(n.writeConcern.w=e.writeConcern.w),\"j\"in e.writeConcern&&(n.writeConcern.j=e.writeConcern.j),\"wtimeout\"in e.writeConcern&&(n.writeConcern.wtimeout=e.writeConcern.wtimeout)):(\"w\"in e&&(n.w=e.w),\"j\"in e&&(n.j=e.j),\"wtimeout\"in e&&(n.wtimeout=e.wtimeout)),\"checkKeys\"in e&&(n.checkKeys=e.checkKeys);const i=this.$session();if(n.hasOwnProperty(\"session\")||(n.session=i),0===Object.keys(n).length&&(n=null),this.isNew){const e=this.toObject(saveToObjectOptions);if(void 0===(e||{})._id)return void setTimeout(function(){t(new MongooseError(\"document must have an _id before saving\"))},0);this.$__version(!0,e),this[modelCollectionSymbol].insertOne(e,n,function(e,n){if(e)return _setIsNew(o,!0),void t(e,null);t(null,n)}),this.$__reset(),_setIsNew(this,!1),this.$__.inserting=!0}else{this.$__.inserting=!1;const o=this.$__delta();if(!o){const o=Object.assign({},e,n),i=this.$__where();if(this.$__schema.options.optimisticConcurrency){const e=this.$__schema.options.versionKey,t=this.$__getValue(e);null!=t&&(i[e]=t)}return void this.constructor.exists(i,o).then(e=>{if(!e)throw new DocumentNotFoundError(this.$__where(),this.constructor.modelName);t()}).catch(t)}{if(o instanceof MongooseError)return void t(o);const e=this.$__where(o[0]);if(e instanceof MongooseError)return void t(e);_applyCustomWhere(this,e),this[modelCollectionSymbol].updateOne(e,o[1],n,(o,n)=>{if(o)return this.$__undoReset(),void t(o);n.$where=e,t(null,n)})}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),_setIsNew(this,!1)}},Model.prototype.$__save=function(e,t){this.$__handleSave(e,(o,n)=>{const i=this.$__schema.s.hooks;if(o)return i.execPost(\"save:error\",this,[this],{error:o},e=>{t(e,this)});let s=0;if(0!==get(e,\"safe.w\")&&0!==get(e,\"w\")){if(n&&(s=Array.isArray(n)?n.length:n.result&&void 0!==n.result.n?n.result.n:n.result&&void 0!==n.result.nModified?n.result.nModified:n),this.$__.version&&!this.$__.inserting){const e=VERSION_INC===(VERSION_INC&this.$__.version);this.$__.version=void 0;const o=this.$__schema.options.versionKey,n=this.$__getValue(o)||0;if(s<=0){this.$__undoReset();const e=this.$__.$versionError||new VersionError(this,n,this.$__.modifiedPaths);return t(e)}e&&this.$__setValue(o,n+1)}if(null!=n&&s<=0)return this.$__undoReset(),o=new DocumentNotFoundError(n.$where,this.constructor.modelName,s,n),i.execPost(\"save:error\",this,[this],{error:o},e=>{t(e,this)})}this.$__.saving=void 0,this.$__.savedState={},this.emit(\"save\",this,s),this.constructor.emit(\"save\",this,s),t(null,this)})},Model.prototype.save=function(e,t){let o;return this.$op=\"save\",this.$__.saving?o=new ParallelSaveError(this):this.$__.saving=new ParallelSaveError(this),\"function\"==typeof e&&(t=e,e=void 0),(e=new SaveOptions(e)).hasOwnProperty(\"session\")&&this.$session(e.session),this.$__.$versionError=generateVersionError(this,this.modifiedPaths()),t=this.constructor.$handleCallbackError(t),this.constructor.db.base._promiseOrCallback(t,t=>{if(t=this.constructor.$wrapCallback(t),o)return this.$__handleReject(o),t(o);this.$__.saveOptions=e,this.$__save(e,e=>{if(this.$__.saving=void 0,delete this.$__.saveOptions,delete this.$__.$versionError,this.$op=null,e)return this.$__handleReject(e),t(e);t(null,this)})},this.constructor.events)},Model.prototype.$__delta=function(){const e=this.$__dirty();if(!e.length&&VERSION_ALL!==this.$__.version)return;const t={},o={},n=e.length,i=[];let s=0;for(t._id=this._doc._id,null!=get(t,\"_id.$__\",null)&&(t._id=t._id.toObject({transform:!1,depopulate:!0}));s<n;++s){const n=e[s];let r=n.value;const l=checkDivergentArray(this,n.path,r);if(l)i.push(l);else{if(!this.populated(n.path,!0)&&this.$__.selected){const e=n.path.split(\".\"),o=e[0];if(this.$__.selected[o]&&this.$__.selected[o].$elemMatch){if(!(e.length>1&&0==e[1]&&void 0===t[o])){i.push(n.path);continue}t[o]=this.$__.selected[o],e[1]=\"$\",n.path=e.join(\".\")}}i.length||(void 0===r?operand(this,t,o,n,1,\"$unset\"):null===r?operand(this,t,o,n,null):r.isMongooseArray&&r.$path()&&r[arrayAtomicsSymbol]?handleAtomics(this,t,o,n,r):r[MongooseBuffer.pathSymbol]&&Buffer.isBuffer(r)?operand(this,t,o,n,r=r.toObject()):operand(this,t,o,n,r=utils.clone(r,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,_isNested:!0})))}}return i.length?new DivergentArrayError(i):(this.$__.version&&this.$__version(t,o),[t,o])},Model.prototype.$__version=function(e,t){const o=this.$__schema.options.versionKey;if(!0!==e){if(this.$__isSelected(o)){if(VERSION_WHERE===(VERSION_WHERE&this.$__.version)){const t=this.$__getValue(o);null!=t&&(e[o]=t)}VERSION_INC===(VERSION_INC&this.$__.version)&&(null!=get(t.$set,o,null)?++t.$set[o]:(t.$inc=t.$inc||{},t.$inc[o]=1))}}else o&&this.$__setValue(o,t[o]=0)},Model.prototype.increment=increment,Model.prototype.$__where=function(e){return e||(e={}),e._id||(e._id=this._doc._id),void 0===this._doc._id?new MongooseError(\"No _id found on document!\"):e},Model.prototype.remove=function(e,t){return\"function\"==typeof e&&(t=e,e=void 0),(e=new RemoveOptions(e)).hasOwnProperty(\"session\")&&this.$session(e.session),this.$op=\"remove\",t=this.constructor.$handleCallbackError(t),this.constructor.db.base._promiseOrCallback(t,t=>{t=this.constructor.$wrapCallback(t),this.$__remove(e,(e,o)=>{this.$op=null,t(e,o)})},this.constructor.events)},Model.prototype.delete=Model.prototype.remove,Model.prototype.deleteOne=function(e,t){return\"function\"==typeof e&&(t=e,e=void 0),e||(e={}),t=this.constructor.$handleCallbackError(t),this.constructor.db.base._promiseOrCallback(t,t=>{t=this.constructor.$wrapCallback(t),this.$__deleteOne(e,t)},this.constructor.events)},Model.prototype.$__remove=function(e,t){if(this.$__.isDeleted)return immediate(()=>t(null,this));const o=this.$__where();if(o instanceof MongooseError)return t(o);_applyCustomWhere(this,o);const n=this.$session();e.hasOwnProperty(\"session\")||(e.session=n),this[modelCollectionSymbol].deleteOne(o,e,e=>{if(!e)return this.$__.isDeleted=!0,this.emit(\"remove\",this),this.constructor.emit(\"remove\",this),t(null,this);this.$__.isDeleted=!1,t(e)})},Model.prototype.$__deleteOne=Model.prototype.$__remove,Model.prototype.model=function(e){return this[modelDbSymbol].model(e)},Model.exists=function(e,t,o){_checkContext(this,\"exists\"),\"function\"==typeof t&&(o=t,t=null);const n=this.findOne(e).select({_id:1}).lean().setOptions(t);if(\"function\"!=typeof o)return(t=t||{}).explain?n.exec():n.then(e=>!!e);n.exec(function(e,t){if(null!=e)return o(e);o(null,!!t)})},Model.discriminator=function(e,t,o){let n;if(\"function\"==typeof e&&(n=e,e=utils.getFunctionName(n),!(n.prototype instanceof Model)))throw new MongooseError(\"The provided class \"+e+\" must extend Model\");if(_checkContext(this,\"discriminator\"),utils.isObject(t)&&!t.instanceOfSchema&&(t=new Schema(t)),t=discriminator(this,e,t,o,!0),this.db.models[e])throw new OverwriteModelError(e);t.$isRootDiscriminator=!0,t.$globalPluginsApplied=!0,n=this.db.model(n||e,t,this.$__collection.name),this.discriminators[e]=n;const i=this.discriminators[e];if(i.prototype.__proto__=this.prototype,Object.defineProperty(i,\"baseModelName\",{value:this.modelName,configurable:!0,writable:!1}),applyMethods(i,t),applyStatics(i,t),null!=this[subclassedSymbol])for(const o of this[subclassedSymbol])o.discriminators=o.discriminators||{},o.discriminators[e]=n.__subclass(n.db,t,o.collection.name);return i};for(const e in EventEmitter.prototype)Model[e]=EventEmitter.prototype[e];function _ensureIndexes(e,t,o){const n=e.schema.indexes();let i;t=t||{};const s=function(t){t&&!e.$caught&&e.emit(\"error\",t),e.emit(\"index\",t||i),o&&o(t||i)};for(const t of n)isDefaultIdIndex(t)&&console.warn('mongoose: Cannot specify a custom index on `_id` for model name \"'+e.modelName+'\", MongoDB does not allow overwriting the default `_id` index. See http://bit.ly/mongodb-id-index');if(!n.length)return void immediate(function(){s()});const r=e.schema._baseSchema,l=r?r.indexes():[],c=function(){if(t._automatic&&(!1===e.schema.options.autoIndex||null==e.schema.options.autoIndex&&!1===e.db.config.autoIndex))return s();const o=n.shift();if(!o)return s();if(t._automatic&&!1===o[1]._autoIndex)return c();if(l.find(e=>utils.deepEqual(e,o)))return c();const r=utils.clone(o[0]),a=utils.clone(o[1]);let u=!1;for(const e of Object.keys(r))\"text\"===r[e]&&(u=!0);delete a._autoIndex,_decorateDiscriminatorIndexOptions(e,a),\"safe\"in t&&_handleSafe(t),applyWriteConcern(e.schema,a),function(t,o){e.emit(\"index-single-start\",t,o)}(r,t);let d=!!e.base.options.useCreateIndex;\"useCreateIndex\"in e.db.config&&(d=!!e.db.config.useCreateIndex),\"createIndex\"in t&&(d=!!t.createIndex),\"background\"in t&&(a.background=t.background),!e.schema.options.hasOwnProperty(\"collation\")||a.hasOwnProperty(\"collation\")||u||(a.collation=e.schema.options.collation);const h=d?\"createIndex\":\"ensureIndex\";e.collection[h](r,a,utils.tick(function(t,o){!function(t,o,n,i){e.emit(\"index-single-done\",t,o,n,i)}(t,r,a,o),t&&(i||(i=t),e.$caught||e.emit(\"error\",t)),c()}))};immediate(function(){t._automatic&&!e.collection.collection?e.collection.addQueue(c,[]):c()})}function _decorateDiscriminatorIndexOptions(e,t){if(!(null==e.baseModelName||\"partialFilterExpression\"in t||\"sparse\"in t)){const o=e.schema.discriminatorMapping&&e.schema.discriminatorMapping.value||e.modelName,n=e.schema.options.discriminatorKey;t.partialFilterExpression={[n]:o}}return t}Model.init=function(e){if(_checkContext(this,\"init\"),this.schema.emit(\"init\",this),null!=this.$init)return e?(this.$init.then(()=>e(),t=>e(t)),null):this.$init;const t=PromiseProvider.get(),o=utils.getOption(\"autoIndex\",this.schema.options,this.db.config,this.db.base.options),n=utils.getOption(\"autoCreate\",this.schema.options,this.db.config,this.db.base.options),i=o?e=>this.ensureIndexes({_automatic:!0},e):e=>e(),s=n?e=>this.createCollection({},e):e=>e();if(this.$init=new t((e,t)=>{s(o=>{if(o)return t(o);i(o=>{if(o)return t(o);e(this)})})}),e)return this.$init.then(()=>e(),t=>e(t)),this.$caught=!0,null;{const e=this.$init.catch,t=this;this.$init.catch=function(){return this.$caught=!0,e.apply(t.$init,arguments)}}return this.$init},Model.createCollection=function(e,t){if(_checkContext(this,\"createCollection\"),\"string\"==typeof e)throw new MongooseError(\"You can't specify a new collection name in Model.createCollection.This is not like Connection.createCollection. Only options are accepted here.\");\"function\"==typeof e&&(t=e,e=null);const o=get(this,\"schema.options.collation\",null);return null!=o&&(e=Object.assign({collation:o},e)),t=this.$handleCallbackError(t),this.db.base._promiseOrCallback(t,t=>{t=this.$wrapCallback(t),this.db.createCollection(this.$__collection.collectionName,e,utils.tick(o=>{if(null!=o&&\"NamespaceExists\"!==o.codeName)return t(o);this.$__collection=this.db.collection(this.$__collection.collectionName,e),t(null,this.$__collection)}))},this.events)},Model.syncIndexes=function(e,t){return _checkContext(this,\"syncIndexes\"),t=this.$handleCallbackError(t),this.db.base._promiseOrCallback(t,t=>{t=this.$wrapCallback(t),this.createCollection(o=>{if(null!=o&&\"NamespaceExists\"!==o.codeName)return t(o);this.cleanIndexes((o,n)=>{if(null!=o)return t(o);this.createIndexes(e,e=>{if(null!=e)return t(e);t(null,n)})})})},this.events)},Model.cleanIndexes=function(e){return _checkContext(this,\"cleanIndexes\"),e=this.$handleCallbackError(e),this.db.base._promiseOrCallback(e,e=>{const t=this.$__collection;this.listIndexes((o,n)=>{if(null!=o)return e(o);const i=this.schema.indexes(),s=[];for(const e of n){let t=!1;if(!isDefaultIdIndex(e)){for(const o of i){const n=o[0],i=_decorateDiscriminatorIndexOptions(this,utils.clone(o[1]));isIndexEqual(n,i,e)&&(t=!0)}t||s.push(e.name)}}if(0===s.length)return e(null,[]);!function(e,o){let n=e.length,i=!1;e.forEach(s=>{t.dropIndex(s,t=>{if(null!=t)return i=!0,o(t);i||--n||o(null,e)})})}(s,e)})})},Model.listIndexes=function(e){_checkContext(this,\"listIndexes\");const t=e=>{this.$__collection.listIndexes().toArray(e)};return e=this.$handleCallbackError(e),this.db.base._promiseOrCallback(e,e=>{e=this.$wrapCallback(e),this.$__collection.buffer?this.$__collection.addQueue(t,[e]):t(e)},this.events)},Model.ensureIndexes=function(e,t){return _checkContext(this,\"ensureIndexes\"),\"function\"==typeof e&&(t=e,e=null),t=this.$handleCallbackError(t),this.db.base._promiseOrCallback(t,t=>{t=this.$wrapCallback(t),_ensureIndexes(this,e||{},e=>{if(e)return t(e);t(null)})},this.events)},Model.createIndexes=function(e,t){return _checkContext(this,\"createIndexes\"),\"function\"==typeof e&&(t=e,e={}),(e=e||{}).createIndex=!0,this.ensureIndexes(e,t)};const safeDeprecationWarning=\"Mongoose: the `safe` option for `save()` is deprecated. Use the `w` option instead: http://bit.ly/mongoose-save\",_handleSafe=util.deprecate(function(e){e.safe&&(\"boolean\"==typeof e.safe&&(e.w=e.safe,delete e.safe),\"object\"==typeof e.safe&&(e.w=e.safe.w,e.j=e.safe.j,e.wtimeout=e.safe.wtimeout,delete e.safe))},safeDeprecationWarning);function _decorateUpdateWithVersionKey(e,t,o){if(!o||!get(t,\"upsert\",!1))return;modifiedPaths(e)[o]||(t.overwrite?e[o]=0:(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[o]=0))}function _setIsNew(e,t){e.isNew=t,e.emit(\"isNew\",t),e.constructor.emit(\"isNew\",t);const o=e.$getAllSubdocs();for(const e of o)e.isNew=t}function _update(e,t,o,n,i,s){const r=new e.Query({},{},e,e.collection);return s=e.$handleCallbackError(s),o=o instanceof Document?o.toObject():utils.clone(o),_decorateUpdateWithVersionKey(n,i=\"function\"==typeof i?i:utils.clone(i),get(e,\"schema.options.versionKey\",null)),r[t](o,n,i,s)}function _populate(e,t,o,n,i){let s=o.length;if(0===o.length)return i(null,t);for(const n of o)populate(e,t,n,r);function r(e){if(e)return i(e,null);--s||i(null,t)}}Model.schema,Model.db,Model.collection,Model.$__collection,Model.base,Model.discriminators,Model.translateAliases=function(e){_checkContext(this,\"translateAliases\");const t=(t,o)=>{let n;const i=[],s=t.split(\".\");let r=this.schema;for(const e in s){const t=s[e];r&&r.aliases[t]?(n=r.aliases[t],i.push(n)):i.push(t),r=r&&r.paths[n]?r.paths[n].schema:null}const l=i.join(\".\");return e instanceof Map?e.set(l,o):e[l]=o,l!==t&&(e instanceof Map?e.delete(t):delete e[t]),e};if(\"object\"==typeof e){if(e instanceof Map)for(const o of new Map(e))e=t(o[0],o[1]);else for(const o of Object.keys(e))if(e=t(o,e[o]),\"$\"===o[0]&&Array.isArray(e[o]))for(const t in e[o])e[o][t]=this.translateAliases(e[o][t]);return e}return e},Model.remove=function(e,t,o){_checkContext(this,\"remove\"),\"function\"==typeof e?(o=e,e={},t=null):\"function\"==typeof t&&(o=t,t=null);const n=new this.Query({},{},this,this.$__collection);return n.setOptions(t),o=this.$handleCallbackError(o),n.remove(e,o)},Model.deleteOne=function(e,t,o){_checkContext(this,\"deleteOne\"),\"function\"==typeof e?(o=e,e={},t=null):\"function\"==typeof t&&(o=t,t=null);const n=new this.Query({},{},this,this.$__collection);return n.setOptions(t),o=this.$handleCallbackError(o),n.deleteOne(e,o)},Model.deleteMany=function(e,t,o){_checkContext(this,\"deleteMany\"),\"function\"==typeof e?(o=e,e={},t=null):\"function\"==typeof t&&(o=t,t=null);const n=new this.Query({},{},this,this.$__collection);return n.setOptions(t),o=this.$handleCallbackError(o),n.deleteMany(e,o)},Model.find=function(e,t,o,n){_checkContext(this,\"find\"),\"function\"==typeof e?(n=e,e={},t=null,o=null):\"function\"==typeof t?(n=t,t=null,o=null):\"function\"==typeof o&&(n=o,o=null);const i=new this.Query({},{},this,this.$__collection);return i.select(t),i.setOptions(o),this.schema.discriminatorMapping&&this.schema.discriminatorMapping.isRoot&&i.selectedInclusively()&&i.select(this.schema.options.discriminatorKey),n=this.$handleCallbackError(n),i.find(e,n)},Model.findById=function(e,t,o,n){return _checkContext(this,\"findById\"),void 0===e&&(e=null),n=this.$handleCallbackError(n),this.findOne({_id:e},t,o,n)},Model.findOne=function(e,t,o,n){_checkContext(this,\"findOne\"),\"function\"==typeof o?(n=o,o=null):\"function\"==typeof t?(n=t,t=null,o=null):\"function\"==typeof e&&(n=e,e={},t=null,o=null);const i=new this.Query({},{},this,this.$__collection);return i.select(t),i.setOptions(o),this.schema.discriminatorMapping&&this.schema.discriminatorMapping.isRoot&&i.selectedInclusively()&&i.select(this.schema.options.discriminatorKey),n=this.$handleCallbackError(n),i.findOne(e,n)},Model.estimatedDocumentCount=function(e,t){_checkContext(this,\"estimatedDocumentCount\");const o=new this.Query({},{},this,this.$__collection);return t=this.$handleCallbackError(t),o.estimatedDocumentCount(e,t)},Model.countDocuments=function(e,t){_checkContext(this,\"countDocuments\"),\"function\"==typeof e&&(t=e,e={});const o=new this.Query({},{},this,this.$__collection);return t=this.$handleCallbackError(t),o.countDocuments(e,t)},Model.count=function(e,t){_checkContext(this,\"count\"),\"function\"==typeof e&&(t=e,e={});const o=new this.Query({},{},this,this.$__collection);return t=this.$handleCallbackError(t),o.count(e,t)},Model.distinct=function(e,t,o){_checkContext(this,\"distinct\");const n=new this.Query({},{},this,this.$__collection);return\"function\"==typeof t&&(o=t,t={}),o=this.$handleCallbackError(o),n.distinct(e,t,o)},Model.where=function(e,t){_checkContext(this,\"where\");const o=new this.Query({},{},this,this.$__collection).find({});return o.where.apply(o,arguments)},Model.$where=function(){_checkContext(this,\"$where\");const e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)},Model.findOneAndUpdate=function(e,t,o,n){if(_checkContext(this,\"findOneAndUpdate\"),\"function\"==typeof o)n=o,o=null;else if(1===arguments.length){if(\"function\"==typeof e){const e=\"Model.findOneAndUpdate(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findOneAndUpdate(conditions, update, options, callback)\\n  \"+this.modelName+\".findOneAndUpdate(conditions, update, options)\\n  \"+this.modelName+\".findOneAndUpdate(conditions, update)\\n  \"+this.modelName+\".findOneAndUpdate(update)\\n  \"+this.modelName+\".findOneAndUpdate()\\n\";throw new TypeError(e)}t=e,e=void 0}let i;n=this.$handleCallbackError(n),o&&(i=o.fields||o.projection),_decorateUpdateWithVersionKey(t=utils.clone(t,{depopulate:!0,_isNested:!0}),o,this.schema.options.versionKey);const s=new this.Query({},{},this,this.$__collection);return s.select(i),s.findOneAndUpdate(e,t,o,n)},Model.findByIdAndUpdate=function(e,t,o,n){if(_checkContext(this,\"findByIdAndUpdate\"),n=this.$handleCallbackError(n),1===arguments.length){if(\"function\"==typeof e){const e=\"Model.findByIdAndUpdate(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findByIdAndUpdate(id, callback)\\n  \"+this.modelName+\".findByIdAndUpdate(id)\\n  \"+this.modelName+\".findByIdAndUpdate()\\n\";throw new TypeError(e)}return this.findOneAndUpdate({_id:e},void 0)}return e instanceof Document&&(e=e._id),this.findOneAndUpdate.call(this,{_id:e},t,o,n)},Model.findOneAndDelete=function(e,t,o){if(_checkContext(this,\"findOneAndDelete\"),1===arguments.length&&\"function\"==typeof e){const e=\"Model.findOneAndDelete(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findOneAndDelete(conditions, callback)\\n  \"+this.modelName+\".findOneAndDelete(conditions)\\n  \"+this.modelName+\".findOneAndDelete()\\n\";throw new TypeError(e)}let n;\"function\"==typeof t&&(o=t,t=void 0),o=this.$handleCallbackError(o),t&&(n=t.select,t.select=void 0);const i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndDelete(e,t,o)},Model.findByIdAndDelete=function(e,t,o){if(_checkContext(this,\"findByIdAndDelete\"),1===arguments.length&&\"function\"==typeof e){const e=\"Model.findByIdAndDelete(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findByIdAndDelete(id, callback)\\n  \"+this.modelName+\".findByIdAndDelete(id)\\n  \"+this.modelName+\".findByIdAndDelete()\\n\";throw new TypeError(e)}return o=this.$handleCallbackError(o),this.findOneAndDelete({_id:e},t,o)},Model.findOneAndReplace=function(e,t,o,n){if(_checkContext(this,\"findOneAndReplace\"),1===arguments.length&&\"function\"==typeof e){const e=\"Model.findOneAndReplace(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findOneAndReplace(conditions, callback)\\n  \"+this.modelName+\".findOneAndReplace(conditions)\\n  \"+this.modelName+\".findOneAndReplace()\\n\";throw new TypeError(e)}let i;3===arguments.length&&\"function\"==typeof o&&(n=o,o=t,t=void 0),2===arguments.length&&\"function\"==typeof t&&(n=t,t=void 0,o=void 0),n=this.$handleCallbackError(n),o&&(i=o.select,o.select=void 0);const s=new this.Query({},{},this,this.$__collection);return s.select(i),s.findOneAndReplace(e,t,o,n)},Model.findOneAndRemove=function(e,t,o){if(_checkContext(this,\"findOneAndRemove\"),1===arguments.length&&\"function\"==typeof e){const e=\"Model.findOneAndRemove(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findOneAndRemove(conditions, callback)\\n  \"+this.modelName+\".findOneAndRemove(conditions)\\n  \"+this.modelName+\".findOneAndRemove()\\n\";throw new TypeError(e)}let n;\"function\"==typeof t&&(o=t,t=void 0),o=this.$handleCallbackError(o),t&&(n=t.select,t.select=void 0);const i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndRemove(e,t,o)},Model.findByIdAndRemove=function(e,t,o){if(_checkContext(this,\"findByIdAndRemove\"),1===arguments.length&&\"function\"==typeof e){const e=\"Model.findByIdAndRemove(): First argument must not be a function.\\n\\n  \"+this.modelName+\".findByIdAndRemove(id, callback)\\n  \"+this.modelName+\".findByIdAndRemove(id)\\n  \"+this.modelName+\".findByIdAndRemove()\\n\";throw new TypeError(e)}return o=this.$handleCallbackError(o),this.findOneAndRemove({_id:e},t,o)},Model.create=function(e,t,o){let n,i;_checkContext(this,\"create\");const s=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,i=\"function\"==typeof t?t:o,t=null!=t&&\"object\"==typeof t?t:{};else{const e=arguments[arguments.length-1];t={},\"function\"==typeof e||arguments.length>1&&!e?(i=e,n=utils.args(arguments,0,arguments.length-1)):n=utils.args(arguments),2!==n.length||null==n[0]||null==n[1]||null!=n[0].session||null==e.session||\"ClientSession\"!==e.session.constructor.name||this.schema.path(\"session\")||console.warn(\"WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api.html#model_Model.create\")}return this.db.base._promiseOrCallback(i,o=>{if(o=this.$wrapCallback(o),0===n.length)return o(null);const i=[];let r;n.forEach(e=>{i.push(o=>{const n=this.discriminators&&null!=e[s]?this.discriminators[e[s]]||getDiscriminatorByValue(this.discriminators,e[s]):this;if(null==n)throw new MongooseError(`Discriminator \"${e[s]}\" not `+`found for model \"${this.modelName}\"`);let i=e;const l=(e,t)=>{if(e)return r||(r=e),o(null,{error:e});o(null,{doc:t})};if(!(i instanceof n))try{i=new n(i)}catch(e){return l(e)}i.save(t,l)})});let l=i.length;if(0===l)return o(null,[]);const c=(t,n)=>{const i=[],s=n.length;for(let e=0;e<s;++e)n[e].doc&&i.push(n[e].doc);if(r)return o(r,i);e instanceof Array?o(null,i):o.apply(this,[null].concat(i))},a=[];i.forEach((e,t)=>{e((e,o)=>{if(a[t]=o,--l<=0)return c(0,a)})})},this.events)},Model.watch=function(e,t){_checkContext(this,\"watch\");return new ChangeStream(o=>{if(this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;const n=this.$__collection.watch(e,t);o(null,n)});else{const n=this.$__collection.watch(e,t);o(null,n)}},e,t)},Model.startSession=function(){return _checkContext(this,\"startSession\"),this.db.startSession.apply(this.db,arguments)},Model.insertMany=function(e,t,o){return _checkContext(this,\"insertMany\"),\"function\"==typeof t&&(o=t,t=null),this.db.base._promiseOrCallback(o,o=>{this.$__insertMany(e,t,o)},this.events)},Model.$__insertMany=function(e,t,o){const n=this;\"function\"==typeof t&&(o=t,t=null),o&&(o=this.$handleCallbackError(o),o=this.$wrapCallback(o)),o=o||utils.noop;const i=get(t=t||{},\"limit\",1e3),s=get(t,\"rawResult\",!1),r=get(t,\"ordered\",!0),l=get(t,\"lean\",!1);Array.isArray(e)||(e=[e]);const c=[],a=e.map(e=>o=>{if(!(e instanceof n))try{e=new n(e)}catch(e){return o(e)}if(null!=t.session&&e.$session(t.session),l)return process.nextTick(()=>o(null,e));e.validate({__noPromise:!0},function(t){if(t)return!1===r?(c.push(t),o(null,null)):o(t);o(null,e)})});parallelLimit(a,i,function(e,i){if(e)return void o(e,null);const l=i.filter(function(e){return null!=e});if(l.length<1){if(s){return o(null,{mongoose:{validationErrors:c}})}return void o(null,[])}const a=l.map(function(e){return e.$__schema.options.versionKey&&(e[e.$__schema.options.versionKey]=0),e.initializeTimestamps?e.initializeTimestamps().toObject(internalToObjectOptions):e.toObject(internalToObjectOptions)});n.$__collection.insertMany(a,t,function(e,a){if(e){null==e.writeErrors&&null!=get(e,\"result.result.writeErrors\")&&(e.writeErrors=e.result.result.writeErrors);const t=new Set(get(e,\"writeErrors\",[]).map(e=>e.index));let n=-1;return e.insertedDocs=l.filter((e,o)=>{const i=t.has(o);if(r){if(n>-1)return o<n;i&&(n=o)}return!i}).map(function(e){return e.$__reset(),_setIsNew(e,!1),e}),void o(e,null)}for(const e of l)e.$__reset(),_setIsNew(e,!1);return s?(!1===r&&(a.mongoose={validationErrors:c}),o(null,a)):null!=t.populate?n.populate(l,t.populate,t=>{if(null!=t)return e.insertedDocs=l,o(t);o(null,i)}):void o(null,l)})})},Model.bulkWrite=function(e,t,o){_checkContext(this,\"bulkWrite\"),\"function\"==typeof t&&(o=t,t=null),t=t||{};const n=e.map(e=>castBulkWrite(this,e,t));return o=this.$handleCallbackError(o),this.db.base._promiseOrCallback(o,o=>{o=this.$wrapCallback(o),each(n,(e,t)=>e(t),n=>n?o(n):0===e.length?o(null,getDefaultBulkwriteResult()):void this.$__collection.bulkWrite(e,t,(e,t)=>{if(e)return o(e);o(null,t)}))},this.events)},Model.hydrate=function(e,t){_checkContext(this,\"hydrate\");const o=require(\"./queryhelpers\").createModel(this,e,t);return o.init(e),o},Model.update=function(e,t,o,n){return _checkContext(this,\"update\"),_update(this,\"update\",e,t,o,n)},Model.updateMany=function(e,t,o,n){return _checkContext(this,\"updateMany\"),_update(this,\"updateMany\",e,t,o,n)},Model.updateOne=function(e,t,o,n){return _checkContext(this,\"updateOne\"),_update(this,\"updateOne\",e,t,o,n)},Model.replaceOne=function(e,t,o,n){_checkContext(this,\"replaceOne\");const i=get(this,\"schema.options.versionKey\",null);return i&&!t[i]&&(t[i]=0),_update(this,\"replaceOne\",e,t,o,n)},Model.mapReduce=function(e,t){return _checkContext(this,\"mapReduce\"),t=this.$handleCallbackError(t),this.db.base._promiseOrCallback(t,t=>{if(t=this.$wrapCallback(t),!Model.mapReduce.schema){const e={noId:!0,noVirtualId:!0,strict:!1};Model.mapReduce.schema=new Schema({},e)}if(e.out||(e.out={inline:1}),!1!==e.verbose&&(e.verbose=!0),e.map=String(e.map),e.reduce=String(e.reduce),e.query){let t=new this.Query(e.query);t.cast(this),e.query=t._conditions,t=void 0}this.$__collection.mapReduce(null,null,e,(e,o)=>{if(e)return t(e);if(o.collection){const e=Model.compile(\"_mapreduce_\"+o.collection.collectionName,Model.mapReduce.schema,o.collection.collectionName,this.db,this.base);return e._mapreduce=!0,o.model=e,t(null,o)}t(null,o)})},this.events)},Model.aggregate=function(e,t){if(_checkContext(this,\"aggregate\"),arguments.length>2||\"Object\"===get(e,\"constructor.name\"))throw new MongooseError(\"Mongoose 5.x disallows passing a spread of operators to `Model.aggregate()`. Instead of `Model.aggregate({ $match }, { $skip })`, do `Model.aggregate([{ $match }, { $skip }])`\");\"function\"==typeof e&&(t=e,e=[]);const o=new Aggregate(e||[]);return o.model(this),void 0===t?o:(t=this.$handleCallbackError(t),t=this.$wrapCallback(t),o.exec(t),o)},Model.validate=function(e,t,o,n){return void 0===o&&e instanceof Model&&(o=e),this.db.base._promiseOrCallback(n,n=>{const i=this.schema;let s=Object.keys(i.paths);if(null!=t){const e=new Set(t);s=s.filter(t=>{const o=t.split(\".\");let n=o[0];for(const t of o){if(e.has(n))return!0;n+=\".\"+t}return e.has(t)})}for(const t of s){const o=i.path(t);o&&o.$isMongooseArray&&c(get(e,t),t)}let r=s.length,l=null;for(const t of s){const n=i.path(t);if(null==n){a();continue}const s=t.split(\".\");let r=e;for(let e=0;e<s.length-1;++e)r=r[s[e]];let c=get(e,t,void 0);if(null!=c)try{c=n.cast(c),r[s[s.length-1]]=c}catch(e){(l=l||new ValidationError).addError(t,e),a();continue}n.doValidate(c,e=>{if(e)if(l=l||new ValidationError,e instanceof ValidationError)for(const o of Object.keys(e.errors))l.addError(`${t}.${e.errors[o].path}`,o);else l.addError(e.path,e);a()},o,{path:t})}function c(e,t){if(null!=e)for(let o=0;o<e.length;++o)Array.isArray(e[o])?c(e[o],t+\".\"+o):s.push(t+\".\"+o)}function a(){if(--r<=0)return n(l)}})},Model.geoSearch=function(e,t,o){return _checkContext(this,\"geoSearch\"),\"function\"==typeof t&&(o=t,t={}),o=this.$handleCallbackError(o),this.db.base._promiseOrCallback(o,o=>{let n;if(o=this.$wrapCallback(o),void 0!==e&&utils.isObject(e)?t.near?Array.isArray(t.near)||(n=new MongooseError(\"near option must be an array [x, y]\")):n=new MongooseError(\"Must specify the near option in geoSearch\"):n=new MongooseError(\"Must pass conditions to geoSearch\"),n)return o(n);t.search=e,this.$__collection.geoHaystackSearch(t.near[0],t.near[1],t,(e,n)=>{if(e)return o(e);let i=n.results.length;if(t.lean||0===i)return o(null,n.results);const s=!1;function r(e){if(e&&!s)return o(e);--i||s||o(null,n.results)}for(let e=0;e<n.results.length;++e){const t=n.results[e];n.results[e]=new this,n.results[e].init(t,{},r)}})},this.events)},Model.populate=function(e,t,o){_checkContext(this,\"populate\");const n=this;t=utils.populate(t);const i={};return o=this.$handleCallbackError(o),this.db.base._promiseOrCallback(o,o=>{o=this.$wrapCallback(o),_populate(n,e,t,i,o)},this.events)};const excludeIdReg=/\\s?-_id\\s?/,excludeIdRegGlobal=/\\s?-_id\\s?/g;function populate(e,t,o,n){if(Array.isArray(t)||(t=[t]),0===t.length||t.every(utils.isNullOrUndefined))return n();const i=getModelsMapForPopulate(e,t,o);if(i instanceof MongooseError)return immediate(function(){n(i)});const s=i.length;let r=[];function l(e){return void 0!==e}let c=s,a=!1;const u=[];for(let t=0;t<s;++t){const o=i[t];let n=o.options.select,s=utils.array.flatten(o.ids,l);s=utils.array.unique(s);const r={};if(r.sort=get(o,\"options.options.sort\",void 0),r.excludeId=excludeIdReg.test(n)||n&&0===n._id,0===s.length||s.every(utils.isNullOrUndefined)){--c,(o.count||o.isVirtual)&&_assign(e,[],o,r);continue}a=!0;const h=createPopulateQueryFilter(s,o.match,o.foreignField,o.model,o.options.skipInvalidIds);r.excludeId&&(\"string\"==typeof n?n=n.replace(excludeIdRegGlobal,\" \"):delete(n=utils.object.shallowCopy(n))._id),o.options.options&&null!=o.options.options.limit?r.originalLimit=o.options.options.limit:null!=o.options.limit&&(r.originalLimit=o.options.limit),u.push([o,h,n,r,d])}if(!a){if(null!=o.populate){const i=utils.populate(o.populate).map(e=>Object.assign({},e,{path:o.path+\".\"+e.path}));return e.populate(t,i,n)}return n()}for(const e of u)_execPopulateQuery.apply(null,e);function d(t,o){if(null!=t)return n(t,null);r=r.concat(o),0==--c&&function(){for(const t of u){const o=t[0],n=t[3];for(const e of r)o.options._childDocs.push(e);_assign(e,r,o,n)}for(const e of u)removeDeselectedForeignField(e[0].foreignField,e[0].options,r);n()}()}}function _execPopulateQuery(e,t,o,n,i){const s=utils.clone(e.options.populate),r=Object.assign({skip:e.options.skip,limit:e.options.limit,perDocumentLimit:e.options.perDocumentLimit},e.options.options);e.count&&delete r.skip,null!=r.perDocumentLimit?(r.limit=r.perDocumentLimit,delete r.perDocumentLimit):null!=r.limit&&(r.limit=r.limit*e.ids.length);const l=e.model.find(t,o,r);for(const t of e.foreignField)\"_id\"!==t&&l.selectedInclusively()&&!isPathSelectedInclusive(l._fields,t)&&l.select(t);if(e.count)for(const t of e.foreignField)l.select(t);s&&l.populate(s),l.exec((t,o)=>{if(null!=t)return i(t);for(const t of o)leanPopulateMap.set(t,e.model);i(null,o)})}function _assign(e,t,o,n){const i=o.options,s=o.isVirtual,r=o.justOne;let l;const c=get(i,\"options.lean\",!1),a=t.length,u={},d={};let h,p;const f=utils.clone(o.allIds);for(let e=0;e<a;e++)if(null!=(p=t[e]))for(const t of o.foreignField){if(l=utils.getValue(t,p),Array.isArray(l)){l=utils.array.unique(utils.array.flatten(l));for(let t of l)t instanceof Document&&(t=t._id),d[h=String(t)]?Array.isArray(d[h])?(d[h].push(p),u[h].push(e)):(d[h]=[d[h],p],u[h]=[u[h],e]):s&&!r?(d[h]=[p],u[h]=[e]):(d[h]=p,u[h]=e)}else l instanceof Document&&(l=l._id),d[h=String(l)]?Array.isArray(d[h])?(d[h].push(p),u[h].push(e)):(s||d[h].constructor!==p.constructor||String(d[h]._id)!==String(p._id))&&(d[h]=[d[h],p],u[h]=[u[h],e]):(d[h]=p,u[h]=e);c||(p.$__.wasPopulated=!0)}assignVals({originalModel:e,rawIds:o.isVirtual?f:o.allIds,allIds:f,foreignField:o.foreignField,rawDocs:d,rawOrder:u,docs:o.docs,path:i.path,options:n,justOne:o.justOne,isVirtual:o.isVirtual,allOptions:o,populatedModel:o.model,lean:c,virtual:o.virtual,count:o.count,match:o.match})}function applyQueryMethods(e,t){for(const o in t)e.Query.prototype[o]=t[o]}Model.compile=function(e,t,o,n,i){if(!1!==t.options.versionKey&&!t.paths[t.options.versionKey]){const e={};e[t.options.versionKey]=Number,t.add(e)}let s;\"function\"==typeof e&&e.prototype instanceof Model?(e=(s=e).name,t.loadClass(s,!1),s.prototype.$isMongooseModelPrototype=!0):s=function e(t,o,n){if(e.hooks.execPreSync(\"createModel\",t),!(this instanceof e))return new e(t,o,n);const i=e.schema.options.discriminatorKey;if(null==e.discriminators||null==t||null==t[i])return void Model.call(this,t,o,n);const s=e.discriminators[t[i]]||getDiscriminatorByValue(e.discriminators,t[i]);if(null!=s)return new s(t,o,n);Model.call(this,t,o,n)},s.hooks=t.s.hooks.clone(),s.base=i,s.modelName=e,s.prototype instanceof Model||(s.__proto__=Model,s.prototype.__proto__=Model.prototype),s.model=function(e){return this.db.model(e)},s.db=n,s.prototype.db=n,s.prototype[modelDbSymbol]=n,s.discriminators=s.prototype.discriminators=void 0,s[modelSymbol]=!0,s.events=new EventEmitter,s.prototype.$__setSchema(t);const r={schemaUserProvidedOptions:t._userProvidedOptions||{},capped:t.options.capped,Promise:s.base.Promise};return void 0!==t.options.autoCreate&&(r.autoCreate=t.options.autoCreate),s.prototype.collection=n.collection(o,r),s.prototype[modelCollectionSymbol]=s.prototype.collection,applyMethods(s,t),applyStatics(s,t),applyHooks(s,t),applyStaticHooks(s,t.s.hooks,t.statics),s.schema=s.prototype.$__schema,s.collection=s.prototype.collection,s.$__collection=s.collection,s.Query=function(){Query.apply(this,arguments)},s.Query.prototype=Object.create(Query.prototype),s.Query.base=Query.base,applyQueryMiddleware(s.Query,s),applyQueryMethods(s,t.query),s},Model.__subclass=function(e,t,o){const n=this,i=function e(t,o,i){if(!(this instanceof e))return new e(t,o,i);n.call(this,t,o,i)};if(i.__proto__=n,i.prototype.__proto__=n.prototype,i.db=e,i.prototype.db=e,i.prototype[modelDbSymbol]=e,n[subclassedSymbol]=n[subclassedSymbol]||[],n[subclassedSymbol].push(i),null!=n.discriminators){i.discriminators={};for(const e of Object.keys(n.discriminators))i.discriminators[e]=n.discriminators[e].__subclass(n.db,n.discriminators[e].schema,o)}const s=t&&\"string\"!=typeof t?t:n.prototype.$__schema,r=s.options||{},l=s._userProvidedOptions||{};o||(o=n.prototype.$__schema.get(\"collection\")||utils.toCollectionName(n.modelName,this.base.pluralize()));const c={schemaUserProvidedOptions:l,capped:s&&r.capped};return i.prototype.collection=e.collection(o,c),i.prototype[modelCollectionSymbol]=i.prototype.collection,i.collection=i.prototype.collection,i.$__collection=i.collection,i.init(()=>{}),i},Model.$handleCallbackError=function(e){if(null==e)return e;if(\"function\"!=typeof e)throw new MongooseError(\"Callback must be a function, got \"+e);const t=this;return function(){process.nextTick(()=>{try{e.apply(null,arguments)}catch(e){t.emit(\"error\",e)}})}},Model.$wrapCallback=function(e){const t=new ServerSelectionError,o=this;return function(n){return null!=n&&\"MongoServerSelectionError\"===n.name&&(arguments[0]=t.assimilateError(n)),null!=n&&\"MongoNetworkTimeoutError\"===n.name&&n.message.endsWith(\"timed out\")&&o.db.emit(\"timeout\"),e.apply(null,arguments)}},Model.inspect=function(){return`Model { ${this.modelName} }`},util.inspect.custom&&(Model[util.inspect.custom]=Model.inspect),module.exports=exports=Model;","node_modules/mongoose/lib/helpers/schema/applyPlugins.js":"\"use strict\";module.exports=function s(e,o,t,i){if(e[i])return;if(e[i]=!0,!t||!t.skipTopLevel)for(const s of o)e.plugin(s[0],s[1]);if(delete(t=Object.assign({},t)).skipTopLevel,!1!==t.applyPluginsToChildSchemas)for(const c of Object.keys(e.paths)){const n=e.paths[c];null!=n.schema&&(s(n.schema,o,t,i),n.caster.prototype.$__setSchema(n.schema))}const c=e.discriminators;if(null==c)return;const n=t.applyPluginsToDiscriminators,p=Object.keys(c);for(const e of p){s(c[e],o,{skipTopLevel:!n},i)}};","node_modules/mongoose/lib/helpers/get.js":"\"use strict\";function getProperty(t,e){return null==t?t:t instanceof Map?t.get(e):t[e]}module.exports=function(t,e,n){let r,l=!1;if(\"string\"==typeof e){if(-1===e.indexOf(\".\")){const r=getProperty(t,e);return null==r?n:r}r=e.split(\".\")}else if(l=!0,1===(r=e).length){const e=getProperty(t,r[0]);return null==e?n:e}let u=e,o=t;for(const t of r){if(null==o)return n;if(!l&&null!=o[u])return o[u];o=getProperty(o,t),l||(u=u.substr(t.length+1))}return null==o?n:o};","node_modules/mongoose/lib/helpers/promiseOrCallback.js":"\"use strict\";const PromiseProvider=require(\"../promise_provider\"),emittedSymbol=Symbol.for(\"mongoose:emitted\");module.exports=function(e,r,t,o){return\"function\"==typeof e?r(function(r){if(null==r)e.apply(this,arguments);else{null!=t&&null!=t.listeners&&t.listeners(\"error\").length>0&&!r[emittedSymbol]&&(r[emittedSymbol]=!0,t.emit(\"error\",r));try{e(r)}catch(r){return process.nextTick(()=>{throw r})}}}):new(o=o||PromiseProvider.get())((e,o)=>{r(function(r,l){return null!=r?(null!=t&&null!=t.listeners&&t.listeners(\"error\").length>0&&!r[emittedSymbol]&&(r[emittedSymbol]=!0,t.emit(\"error\",r)),o(r)):arguments.length>2?e(Array.prototype.slice.call(arguments,1)):void e(l)})})};","node_modules/mongoose/node_modules/mongoose-legacy-pluralize/index.js":"module.exports=pluralize,exports.pluralization=[[/(m)an$/gi,\"$1en\"],[/(pe)rson$/gi,\"$1ople\"],[/(child)$/gi,\"$1ren\"],[/^(ox)$/gi,\"$1en\"],[/(ax|test)is$/gi,\"$1es\"],[/(octop|vir)us$/gi,\"$1i\"],[/(alias|status)$/gi,\"$1es\"],[/(bu)s$/gi,\"$1ses\"],[/(buffal|tomat|potat)o$/gi,\"$1oes\"],[/([ti])um$/gi,\"$1a\"],[/sis$/gi,\"ses\"],[/(?:([^f])fe|([lr])f)$/gi,\"$1$2ves\"],[/(hive)$/gi,\"$1s\"],[/([^aeiouy]|qu)y$/gi,\"$1ies\"],[/(x|ch|ss|sh)$/gi,\"$1es\"],[/(matr|vert|ind)ix|ex$/gi,\"$1ices\"],[/([m|l])ouse$/gi,\"$1ice\"],[/(kn|w|l)ife$/gi,\"$1ives\"],[/(quiz)$/gi,\"$1zes\"],[/s$/gi,\"s\"],[/([^a-z])$/,\"$1\"],[/$/gi,\"s\"]];var rules=exports.pluralization;exports.uncountables=[\"advice\",\"energy\",\"excretion\",\"digestion\",\"cooperation\",\"health\",\"justice\",\"labour\",\"machinery\",\"equipment\",\"information\",\"pollution\",\"sewage\",\"paper\",\"money\",\"species\",\"series\",\"rain\",\"rice\",\"fish\",\"sheep\",\"moose\",\"deer\",\"news\",\"expertise\",\"status\",\"media\"];var uncountables=exports.uncountables;function pluralize(e){var i;return e=e.toLowerCase(),!~uncountables.indexOf(e)&&(i=rules.filter(function(i){return e.match(i[0])}))[0]?e.replace(i[0][0],i[0][1]):e}","node_modules/mongoose/lib/utils.js":"\"use strict\";const ms=require(\"ms\"),mpath=require(\"mpath\"),sliced=require(\"sliced\"),Buffer=require(\"safe-buffer\").Buffer,Decimal=require(\"./types/decimal128\"),ObjectId=require(\"./types/objectid\"),PopulateOptions=require(\"./options/PopulateOptions\"),clone=require(\"./helpers/clone\"),isObject=require(\"./helpers/isObject\"),isBsonType=require(\"./helpers/isBsonType\"),getFunctionName=require(\"./helpers/getFunctionName\"),isMongooseObject=require(\"./helpers/isMongooseObject\"),promiseOrCallback=require(\"./helpers/promiseOrCallback\"),schemaMerge=require(\"./helpers/schema/merge\"),specialProperties=require(\"./helpers/specialProperties\");let Document;function _populateObj(e){if(Array.isArray(e.populate)){const t=[];e.populate.forEach(function(e){if(/[\\s]/.test(e.path)){const r=Object.assign({},e);r.path.split(\" \").forEach(function(e){r.path=e,t.push(exports.populate(r)[0])})}else t.push(exports.populate(e)[0])}),e.populate=exports.populate(t)}else null!=e.populate&&\"object\"==typeof e.populate&&(e.populate=exports.populate(e.populate));const t=[],r=e.path.split(\" \");null!=e.options&&(e.options=exports.clone(e.options));for(const o of r)t.push(new PopulateOptions(Object.assign({},e,{path:o})));return t}exports.specialProperties=specialProperties,exports.toCollectionName=function(e,t){return\"system.profile\"===e?e:\"system.indexes\"===e?e:\"function\"==typeof t?t(e):e},exports.deepEqual=function e(t,r){if(t===r)return!0;if(\"object\"!=typeof t&&\"object\"!=typeof r)return t===r;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(isBsonType(t,\"ObjectID\")&&isBsonType(r,\"ObjectID\")||isBsonType(t,\"Decimal128\")&&isBsonType(r,\"Decimal128\"))return t.toString()===r.toString();if(t instanceof RegExp&&r instanceof RegExp)return t.source===r.source&&t.ignoreCase===r.ignoreCase&&t.multiline===r.multiline&&t.global===r.global;if(null==t||null==r)return!1;if(t.prototype!==r.prototype)return!1;if(t instanceof Map&&r instanceof Map)return e(Array.from(t.keys()),Array.from(r.keys()))&&e(Array.from(t.values()),Array.from(r.values()));if(t instanceof Number&&r instanceof Number)return t.valueOf()===r.valueOf();if(Buffer.isBuffer(t))return exports.buffer.areEqual(t,r);if(Array.isArray(t)&&Array.isArray(r)){const o=t.length;if(o!==r.length)return!1;for(let n=0;n<o;++n)if(!e(t[n],r[n]))return!1;return!0}null!=t.$__?t=t._doc:isMongooseObject(t)&&(t=t.toObject()),null!=r.$__?r=r._doc:isMongooseObject(r)&&(r=r.toObject());const o=Object.keys(t),n=Object.keys(r),s=o.length;if(s!==n.length)return!1;o.sort(),n.sort();for(let e=s-1;e>=0;e--)if(o[e]!==n[e])return!1;for(const n of o)if(!e(t[n],r[n]))return!1;return!0},exports.last=function(e){if(e.length>0)return e[e.length-1]},exports.clone=clone,exports.promiseOrCallback=promiseOrCallback,exports.omit=function(e,t){if(null==t)return Object.assign({},e);Array.isArray(t)||(t=[t]);const r=Object.assign({},e);for(const e of t)delete r[e];return r},exports.options=function(e,t){const r=Object.keys(e);let o,n=r.length;for(t=t||{};n--;)(o=r[n])in t||(t[o]=e[o]);return t},exports.random=function(){return Math.random().toString().substr(3)},exports.merge=function e(t,r,o,n){o=o||{};const s=Object.keys(r);let i=0;const c=s.length;let p;n=n||\"\";const u=o.omitNested||{};for(;i<c;)if(p=s[i++],!(o.omit&&o.omit[p]||u[n]||specialProperties.has(p)))if(null==t[p])t[p]=r[p];else if(exports.isObject(r[p])){if(exports.isObject(t[p])||(t[p]={}),null!=r[p]){if(o.isDiscriminatorSchemaMerge&&r[p].$isSingleNested&&t[p].$isMongooseDocumentArray||r[p].$isMongooseDocumentArray&&t[p].$isSingleNested)continue;if(r[p].instanceOfSchema){t[p].instanceOfSchema?schemaMerge(t[p],r[p].clone(),o.isDiscriminatorSchemaMerge):t[p]=r[p].clone();continue}if(r[p]instanceof ObjectId){t[p]=new ObjectId(r[p]);continue}}e(t[p],r[p],o,n?n+\".\"+p:p)}else o.overwrite&&(t[p]=r[p])},exports.toObject=function e(t){let r;if(Document||(Document=require(\"./document\")),null==t)return t;if(t instanceof Document)return t.toObject();if(Array.isArray(t)){r=[];for(const o of t)r.push(e(o));return r}if(exports.isPOJO(t)){r={};for(const o of Object.keys(t))specialProperties.has(o)||(r[o]=e(t[o]));return r}return t},exports.isObject=isObject,exports.isPOJO=function(e){if(null==e||\"object\"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return!t||\"Object\"===t.constructor.name},exports.isNativeObject=function(e){return Array.isArray(e)||e instanceof Date||e instanceof Boolean||e instanceof Number||e instanceof String},exports.isEmptyObject=function(e){return null!=e&&\"object\"==typeof e&&0===Object.keys(e).length},exports.hasKey=function(e,t){const r=Object.keys(e);for(const o of r){if(o===t)return!0;if(exports.isPOJO(e[o])&&exports.hasKey(e[o],t))return!0}return!1},exports.args=sliced,exports.tick=function(e){if(\"function\"==typeof e)return function(){try{e.apply(this,arguments)}catch(e){process.nextTick(function(){throw e})}}},exports.isMongooseType=function(e){return e instanceof ObjectId||e instanceof Decimal||e instanceof Buffer},exports.isMongooseObject=isMongooseObject,exports.expires=function(e){if(!e||\"Object\"!==e.constructor.name)return;if(!(\"expires\"in e))return;let t;t=\"string\"!=typeof e.expires?e.expires:Math.round(ms(e.expires)/1e3),e.expireAfterSeconds=t,delete e.expires},exports.populate=function(e,t,r,o,n,s,i,c){let p=null;if(1===arguments.length){if(e instanceof PopulateOptions)return[e];if(Array.isArray(e)){return function(e){const t=[];return e.forEach(function(e){/[\\s]/.test(e.path)?e.path.split(\" \").forEach(function(r){const o=Object.assign({},e);o.path=r,t.push(o)}):t.push(e)}),t}(e).map(e=>exports.populate(e)[0])}p=exports.isObject(e)?Object.assign({},e):{path:e}}else p=\"object\"==typeof r?{path:e,select:t,match:r,options:o}:{path:e,select:t,model:r,match:o,options:n,populate:s,justOne:i,count:c};if(\"string\"!=typeof p.path)throw new TypeError(\"utils.populate: invalid path. Expected string. Got typeof `\"+typeof e+\"`\");return _populateObj(p)},exports.getValue=function(e,t,r){return mpath.get(e,t,\"_doc\",r)},exports.setValue=function(e,t,r,o,n){mpath.set(e,t,r,\"_doc\",o,n)},exports.object={},exports.object.vals=function(e){const t=Object.keys(e);let r=t.length;const o=[];for(;r--;)o.push(e[t[r]]);return o},exports.object.shallowCopy=exports.options;const hop=Object.prototype.hasOwnProperty;exports.object.hasOwnProperty=function(e,t){return hop.call(e,t)},exports.isNullOrUndefined=function(e){return null===e||void 0===e},exports.array={},exports.array.flatten=function e(t,r,o){return o||(o=[]),t.forEach(function(t){Array.isArray(t)?e(t,r,o):r&&!r(t)||o.push(t)}),o};const _hasOwnProperty=Object.prototype.hasOwnProperty;exports.hasUserDefinedProperty=function(e,t){if(null==e)return!1;if(Array.isArray(t)){for(const r of t)if(exports.hasUserDefinedProperty(e,r))return!0;return!1}if(_hasOwnProperty.call(e,t))return!0;if(\"object\"==typeof e&&t in e){const r=e[t];return r!==Object.prototype[t]&&r!==Array.prototype[t]}return!1};const MAX_ARRAY_INDEX=Math.pow(2,32)-1;exports.isArrayIndex=function(e){return\"number\"==typeof e?e>=0&&e<=MAX_ARRAY_INDEX:\"string\"==typeof e&&(!!/^\\d+$/.test(e)&&((e=+e)>=0&&e<=MAX_ARRAY_INDEX))},exports.array.unique=function(e){const t=new Set,r=new Set,o=[];for(const n of e)if(\"number\"==typeof n||\"string\"==typeof n||null==n){if(t.has(n))continue;o.push(n),t.add(n)}else if(n instanceof ObjectId){if(r.has(n.toString()))continue;o.push(n),r.add(n.toString())}else o.push(n);return o},exports.buffer={},exports.buffer.areEqual=function(e,t){if(!Buffer.isBuffer(e))return!1;if(!Buffer.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(let r=0,o=e.length;r<o;++r)if(e[r]!==t[r])return!1;return!0},exports.getFunctionName=getFunctionName,exports.decorate=function(e,t){for(const r in t)specialProperties.has(r)||(e[r]=t[r])},exports.mergeClone=function(e,t){isMongooseObject(t)&&(t=t.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));const r=Object.keys(t),o=r.length;let n,s=0;for(;s<o;)if(n=r[s++],!specialProperties.has(n))if(void 0===e[n])e[n]=exports.clone(t[n],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let r=t[n];if(null==r||!r.valueOf||r instanceof Date||(r=r.valueOf()),exports.isObject(r)){let t=r;isMongooseObject(r)&&!r.isMongooseBuffer&&(t=t.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),r.isMongooseBuffer&&(t=Buffer.from(t)),exports.mergeClone(e[n],t)}else e[n]=exports.clone(r,{flattenDecimals:!1})}},exports.each=function(e,t){for(const r of e)t(r)},exports.getOption=function(e){const t=Array.prototype.slice.call(arguments,1);for(const r of t)if(null!=r[e])return r[e];return null},exports.noop=function(){},exports.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error(\"`error` must be `instanceof Error`.\");const t={};for(const r of Object.getOwnPropertyNames(e))t[r]=e[r];return t};","node_modules/mongoose/package.json":{"name":"mongoose","description":"Mongoose MongoDB ODM","version":"5.12.12","author":"Guillermo Rauch <guillermo@learnboost.com>","keywords":["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],"license":"MIT","dependencies":{"@types/mongodb":"^3.5.27","bson":"^1.1.4","kareem":"2.3.2","mongodb":"3.6.8","mongoose-legacy-pluralize":"1.0.2","mpath":"0.8.3","mquery":"3.2.5","ms":"2.1.2","regexp-clone":"1.0.0","safe-buffer":"5.2.1","sift":"13.5.2","sliced":"1.0.1"},"devDependencies":{"@babel/core":"7.10.5","@babel/preset-env":"7.10.4","@typescript-eslint/eslint-plugin":"4.10.0","@typescript-eslint/parser":"4.10.0","acquit":"1.x","acquit-ignore":"0.1.x","acquit-require":"0.1.x","async":"2.6.2","babel-loader":"8.1.0","benchmark":"2.1.4","bluebird":"3.5.5","chalk":"2.4.2","cheerio":"1.0.0-rc.2","co":"4.6.0","dox":"0.3.1","eslint":"7.1.0","eslint-plugin-mocha-no-only":"1.1.0","highlight.js":"9.18.2","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","marked":"1.1.1","mocha":"5.x","moment":"2.x","mongodb-topology-manager":"1.0.11","mongoose-long":"0.2.1","node-static":"0.7.11","object-sizeof":"1.3.0","pug":"2.0.3","q":"1.5.1","semver":"5.5.0","typescript":"4.1.x","uuid":"2.0.3","uuid-parse":"1.0.0","validator":"10.8.0","webpack":"4.44.0"},"directories":{"lib":"./lib/mongoose"},"scripts":{"lint":"eslint .","build-browser":"node build-browser.js","prepublishOnly":"npm run build-browser","release":"git pull && git push origin master --tags && npm publish","release-legacy":"git pull origin 4.x && git push origin 4.x --tags && npm publish --tag legacy","test":"mocha --exit ./test/*.test.js ./test/typescript/main.test.js","tdd":"mocha ./test/*.test.js ./test/typescript/main.test.js --watch --recursive --watch-files ./**/*.js","test-cov":"nyc --reporter=html --reporter=text npm test"},"main":"./index.js","engines":{"node":">=4.0.0"},"bugs":{"url":"https://github.com/Automattic/mongoose/issues/new"},"repository":{"type":"git","url":"git://github.com/Automattic/mongoose.git"},"homepage":"https://mongoosejs.com","browser":"./dist/browser.umd.js","mocha":{"extension":["test.js"],"watch-files":["test/**/*.js"]},"eslintConfig":{"extends":["eslint:recommended"],"overrides":[{"files":["**/*.{ts,tsx}"],"extends":["plugin:@typescript-eslint/eslint-recommended","plugin:@typescript-eslint/recommended"],"plugins":["@typescript-eslint"],"rules":{"@typescript-eslint/no-explicit-any":"off","@typescript-eslint/ban-types":"off","@typescript-eslint/no-unused-vars":"off","@typescript-eslint/explicit-module-boundary-types":"off"}}],"plugins":["mocha-no-only"],"parserOptions":{"ecmaVersion":2015},"env":{"node":true,"es6":true},"rules":{"comma-style":"error","indent":["error",2,{"SwitchCase":1,"VariableDeclarator":2}],"keyword-spacing":"error","no-whitespace-before-property":"error","no-buffer-constructor":"warn","no-console":"off","no-multi-spaces":"error","no-constant-condition":"off","func-call-spacing":"error","no-trailing-spaces":"error","no-undef":"error","no-unneeded-ternary":"error","no-const-assign":"error","no-useless-rename":"error","no-dupe-keys":"error","space-in-parens":["error","never"],"spaced-comment":["error","always",{"block":{"markers":["!"],"balanced":true}}],"key-spacing":["error",{"beforeColon":false,"afterColon":true}],"comma-spacing":["error",{"before":false,"after":true}],"array-bracket-spacing":1,"arrow-spacing":["error",{"before":true,"after":true}],"object-curly-spacing":["error","always"],"comma-dangle":["error","never"],"no-unreachable":"error","quotes":["error","single"],"quote-props":["error","as-needed"],"semi":"error","no-extra-semi":"error","semi-spacing":"error","no-spaced-func":"error","no-throw-literal":"error","space-before-blocks":"error","space-before-function-paren":["error","never"],"space-infix-ops":"error","space-unary-ops":"error","no-var":"warn","prefer-const":"warn","strict":["error","global"],"no-restricted-globals":["error",{"name":"context","message":"Don't use Mocha's global context"}],"no-prototype-builtins":"off","mocha-no-only/mocha-no-only":["error"]}},"funding":{"type":"opencollective","url":"https://opencollective.com/mongoose"}},"node_modules/mongoose/lib/cast.js":"\"use strict\";const CastError=require(\"./error/cast\"),StrictModeError=require(\"./error/strict\"),Types=require(\"./schema/index\"),castTextSearch=require(\"./schema/operators/text\"),get=require(\"./helpers/get\"),getSchemaDiscriminatorByValue=require(\"./helpers/discriminator/getSchemaDiscriminatorByValue\"),isOperator=require(\"./helpers/query/isOperator\"),util=require(\"util\"),isObject=require(\"./helpers/isObject\"),isMongooseObject=require(\"./helpers/isMongooseObject\"),ALLOWED_GEOWITHIN_GEOJSON_TYPES=[\"Polygon\",\"MultiPolygon\"];function _cast(e,t,r){if(Array.isArray(e))e.forEach(function(o,i){if(Array.isArray(o)||isObject(o))return _cast(o,t,r);e[i]=t.castForQueryWrapper({val:o,context:r})});else{const o=Object.keys(e);let i=o.length;for(;i--;){const n=o[i],s=e[n];Array.isArray(s)||isObject(s)?(_cast(s,t,r),e[n]=s):e[n]=t.castForQuery({val:s,context:r})}}}module.exports=function e(t,r,o,i){if(Array.isArray(r))throw new Error(\"Query filter must be an object, got an array \",util.inspect(r));if(null==r)return r;r.hasOwnProperty(\"_bsontype\")&&\"ObjectID\"!==r._bsontype&&delete r._bsontype,null!=t&&null!=t.discriminators&&null!=r[t.options.discriminatorKey]&&(t=getSchemaDiscriminatorByValue(t,r[t.options.discriminatorKey])||t);const n=Object.keys(r);let s,a,c,l,u,y,p,f=n.length;for(o=o||{};f--;)if(p=r[u=n[f]],\"$or\"===u||\"$nor\"===u||\"$and\"===u){if(!Array.isArray(p))throw new CastError(\"Array\",p,u);for(let r=0;r<p.length;++r){if(null==p[r]||\"object\"!=typeof p[r])throw new CastError(\"Object\",p[r],u+\".\"+r);p[r]=e(t,p[r],o,i)}}else{if(\"$where\"===u){if(\"string\"!==(y=typeof p)&&\"function\"!==y)throw new Error(\"Must have a string or function for $where\");\"function\"===y&&(r[u]=p.toString());continue}if(\"$elemMatch\"===u)p=e(t,p,o,i);else if(\"$text\"===u)p=castTextSearch(p,u);else{if(!t)continue;if(!(c=t.path(u))){const e=u.split(\".\");let o=e.length;for(;o--;){const i=e.slice(0,o).join(\".\"),n=e.slice(o).join(\".\"),s=t.path(i),a=get(s,\"schema.options.discriminatorKey\");if(null!=s&&null!=get(s,\"schema.discriminators\")&&null!=a&&n!==a){const e=get(r,i+\".\"+a);null!=e&&(c=s.schema.discriminators[e].path(n))}}}if(c){if(null==p)continue;if(\"Object\"===p.constructor.name)if(a=Object.keys(p).some(isOperator)){const r=Object.keys(p);let n,a=r.length;for(;a--;)if(l=p[n=r[a]],\"$not\"===n){if(l&&c&&!c.caster){if((s=Object.keys(l)).length&&isOperator(s[0]))for(const e in l)l[e]=c.castForQueryWrapper({$conditional:e,val:l[e],context:i});else p[n]=c.castForQueryWrapper({$conditional:n,val:l,context:i});continue}e(c.caster?c.caster.schema:t,l,o,i)}else p[n]=c.castForQueryWrapper({$conditional:n,val:l,context:i})}else r[u]=c.castForQueryWrapper({val:p,context:i});else if(Array.isArray(p)&&-1===[\"Buffer\",\"Array\"].indexOf(c.instance)){const e=[],t=p;for(const r of t)e.push(c.castForQueryWrapper({val:r,context:i}));r[u]={$in:e}}else r[u]=c.castForQueryWrapper({val:p,context:i})}else{const n=u.split(\".\");let s,a,l,y=n.length;for(;y--&&(s=n.slice(0,y).join(\".\"),!(c=t.path(s))););if(c){c.caster&&c.caster.schema?((l={})[a=n.slice(y).join(\".\")]=p,r[u]=e(c.caster.schema,l,o,i)[a]):r[u]=p;continue}if(isObject(p)){let e=\"\";if(p.$near?e=\"$near\":p.$nearSphere?e=\"$nearSphere\":p.$within?e=\"$within\":p.$geoIntersects?e=\"$geoIntersects\":p.$geoWithin&&(e=\"$geoWithin\"),e){const t=new Types.Number(\"__QueryCasting__\");let r=p[e];if(null!=p.$maxDistance&&(p.$maxDistance=t.castForQueryWrapper({val:p.$maxDistance,context:i})),null!=p.$minDistance&&(p.$minDistance=t.castForQueryWrapper({val:p.$minDistance,context:i})),\"$within\"===e){const e=r.$center||r.$centerSphere||r.$box||r.$polygon;if(!e)throw new Error(\"Bad $within parameter: \"+JSON.stringify(p));r=e}else if(\"$near\"===e&&\"string\"==typeof r.type&&Array.isArray(r.coordinates))r=r.coordinates;else if((\"$near\"===e||\"$nearSphere\"===e||\"$geoIntersects\"===e)&&r.$geometry&&\"string\"==typeof r.$geometry.type&&Array.isArray(r.$geometry.coordinates))null!=r.$maxDistance&&(r.$maxDistance=t.castForQueryWrapper({val:r.$maxDistance,context:i})),null!=r.$minDistance&&(r.$minDistance=t.castForQueryWrapper({val:r.$minDistance,context:i})),isMongooseObject(r.$geometry)&&(r.$geometry=r.$geometry.toObject({transform:!1,virtuals:!1})),r=r.$geometry.coordinates;else if(\"$geoWithin\"===e)if(r.$geometry){isMongooseObject(r.$geometry)&&(r.$geometry=r.$geometry.toObject({virtuals:!1}));const e=r.$geometry.type;if(-1===ALLOWED_GEOWITHIN_GEOJSON_TYPES.indexOf(e))throw new Error('Invalid geoJSON type for $geoWithin \"'+e+'\", must be \"Polygon\" or \"MultiPolygon\"');r=r.$geometry.coordinates}else r=r.$box||r.$polygon||r.$center||r.$centerSphere,isMongooseObject(r)&&(r=r.toObject({virtuals:!1}));_cast(r,t,i);continue}}if(t.nested[u])continue;if(o.upsert&&o.strict){if(\"throw\"===o.strict)throw new StrictModeError(u);throw new StrictModeError(u,'Path \"'+u+'\" is not in schema, strict mode is `true`, and upsert is `true`.')}if(\"throw\"===o.strictQuery)throw new StrictModeError(u,'Path \"'+u+\"\\\" is not in schema and strictQuery is 'throw'.\");o.strictQuery&&delete r[u]}}}return r};","node_modules/mongoose/lib/plugins/removeSubdocs.js":"\"use strict\";const each=require(\"../helpers/each\");module.exports=function(e){e.s.hooks.pre(\"remove\",!1,function(e){if(this.ownerDocument)return void e();const o=this,r=this.$getAllSubdocs();each(r,function(e,o){e.$__remove(o)},function(r){if(r)return o.$__schema.s.hooks.execPost(\"remove:error\",o,[o],{error:r},function(o){e(o)});e()})},null,!0)};","node_modules/mongoose/lib/plugins/saveSubdocs.js":"\"use strict\";const each=require(\"../helpers/each\");module.exports=function(e){e.s.hooks.pre(\"save\",!1,function(e){if(this.ownerDocument)return void e();const o=this,s=this.$getAllSubdocs();s.length?each(s,function(e,o){e.$__schema.s.hooks.execPre(\"save\",e,function(e){o(e)})},function(s){if(s)return o.$__schema.s.hooks.execPost(\"save:error\",o,[o],{error:s},function(o){e(o)});e()}):e()},null,!0),e.s.hooks.post(\"save\",function(e,o){if(this.ownerDocument)return void o();const s=this,n=this.$getAllSubdocs();n.length?each(n,function(e,o){e.$__schema.s.hooks.execPost(\"save\",e,[e],function(e){o(e)})},function(e){if(e)return s.$__schema.s.hooks.execPost(\"save:error\",s,[s],{error:e},function(e){o(e)});o()}):o()},null,!0)};","node_modules/mongoose/lib/plugins/trackTransaction.js":"\"use strict\";const arrayAtomicsSymbol=require(\"../helpers/symbols\").arrayAtomicsSymbol,sessionNewDocuments=require(\"../helpers/symbols\").sessionNewDocuments;function _getAtomics(s,t){const e=new Map;t=t||new Map;const o=Object.keys(s.$__.activePaths.init).concat(Object.keys(s.$__.activePaths.modify));for(const i of o){const o=s.$__getValue(i);if(null!=o&&o instanceof Array&&o.isMongooseDocumentArray&&o.length&&null!=o[arrayAtomicsSymbol]&&Object.keys(o[arrayAtomicsSymbol]).length>0){const s=t.get(i)||{};e.set(i,mergeAtomics(s,o[arrayAtomicsSymbol]))}}const i=s.$__dirty();for(const s of i){const o=s.path,i=s.value;if(null!=i&&null!=i[arrayAtomicsSymbol]&&Object.keys(i[arrayAtomicsSymbol]).length>0){const s=t.get(o)||{};e.set(o,mergeAtomics(s,i[arrayAtomicsSymbol]))}}return e}function mergeAtomics(s,t){return s=s||{},null!=t.$pullAll&&(s.$pullAll=(s.$pullAll||[]).concat(t.$pullAll)),null!=t.$push&&(s.$push=s.$push||{},s.$push.$each=(s.$push.$each||[]).concat(t.$push.$each)),null!=t.$addToSet&&(s.$addToSet=(s.$addToSet||[]).concat(t.$addToSet)),null!=t.$set&&(s.$set=Object.assign(s.$set||{},t.$set)),s}module.exports=function(s){s.pre(\"save\",function(){const s=this.$session();if(null!=s&&null!=s.transaction&&null!=s[sessionNewDocuments])if(s[sessionNewDocuments].has(this)){const t=s[sessionNewDocuments].get(this);for(const s of Object.keys(this.$__.activePaths.states.modify))t.modifiedPaths.add(s);t.atomics=_getAtomics(this,t.atomics)}else{const t={};this.isNew&&(t.isNew=!0),this.$__schema.options.versionKey&&(t.versionKey=this.get(this.$__schema.options.versionKey)),t.modifiedPaths=new Set(Object.keys(this.$__.activePaths.states.modify)),t.atomics=_getAtomics(this),s[sessionNewDocuments].set(this,t)}})};","node_modules/mongoose/lib/plugins/validateBeforeSave.js":"\"use strict\";module.exports=function(e){e.pre(\"save\",!1,function(e,t){const o=this;if(this.ownerDocument)return e();let i;if(i=t&&\"object\"==typeof t&&\"validateBeforeSave\"in t?!!t.validateBeforeSave:this.$__schema.options.validateBeforeSave){const i=t&&\"object\"==typeof t&&\"validateModifiedOnly\"in t?{validateModifiedOnly:t.validateModifiedOnly}:null;this.validate(i,function(t){return o.$__schema.s.hooks.execPost(\"save:error\",o,[o],{error:t},function(t){o.$op=\"save\",e(t)})})}else e()},null,!0)};","node_modules/mongoose/lib/aggregate.js":"\"use strict\";const AggregationCursor=require(\"./cursor/AggregationCursor\"),Query=require(\"./query\"),applyGlobalMaxTimeMS=require(\"./helpers/query/applyGlobalMaxTimeMS\"),promiseOrCallback=require(\"./helpers/promiseOrCallback\"),stringifyFunctionOperators=require(\"./helpers/aggregate/stringifyFunctionOperators\"),util=require(\"util\"),utils=require(\"./utils\"),read=Query.prototype.read,readConcern=Query.prototype.readConcern;function Aggregate(t){this._pipeline=[],this._model=void 0,this.options={},1===arguments.length&&util.isArray(t)&&this.append.apply(this,t)}function isOperator(t){if(\"object\"!=typeof t)return!1;const e=Object.keys(t);return 1===e.length&&e.some(t=>\"$\"===t[0])}function prepareDiscriminatorPipeline(t){const e=t._model.schema,r=e&&e.discriminatorMapping;if(r&&!r.isRoot){const e=t._pipeline,o=r.key,n=r.value;if(e[0]&&e[0].$match&&!e[0].$match[o])e[0].$match[o]=n;else if(e[0]&&e[0].$geoNear)e[0].$geoNear.query=e[0].$geoNear.query||{},e[0].$geoNear.query[o]=n;else if(e[0]&&e[0].$search)if(e[1]&&null!=e[1].$match)e[1].$match[o]=e[1].$match[o]||n;else{const t={};t[o]=n,e.splice(1,0,{$match:t})}else{const e={};e[o]=n,t._pipeline.unshift({$match:e})}}}Aggregate.prototype.options,Aggregate.prototype.model=function(t){return 0===arguments.length?this._model:(this._model=t,null!=t.schema&&(null==this.options.readPreference&&null!=t.schema.options.read&&(this.options.readPreference=t.schema.options.read),null==this.options.collation&&null!=t.schema.options.collation&&(this.options.collation=t.schema.options.collation)),this)},Aggregate.prototype.append=function(){const t=1===arguments.length&&util.isArray(arguments[0])?arguments[0]:utils.args(arguments);if(!t.every(isOperator))throw new Error(\"Arguments must be aggregate pipeline operators\");return this._pipeline=this._pipeline.concat(t),this},Aggregate.prototype.addFields=function(t){const e={};if(\"object\"!=typeof t||util.isArray(t))throw new Error(\"Invalid addFields() argument. Must be an object\");return Object.keys(t).forEach(function(r){e[r]=t[r]}),this.append({$addFields:e})},Aggregate.prototype.project=function(t){const e={};if(\"object\"!=typeof t||util.isArray(t)){if(1!==arguments.length||\"string\"!=typeof t)throw new Error(\"Invalid project() argument. Must be string or object\");t.split(/\\s+/).forEach(function(t){if(!t)return;const r=\"-\"===t[0]?0:1;0===r&&(t=t.substring(1)),e[t]=r})}else Object.keys(t).forEach(function(r){e[r]=t[r]});return this.append({$project:e})},Aggregate.prototype.near=function(t){const e={};return e.$geoNear=t,this.append(e)},\"group match skip limit out\".split(\" \").forEach(function(t){Aggregate.prototype[t]=function(e){const r={};return r[\"$\"+t]=e,this.append(r)}}),Aggregate.prototype.unwind=function(){const t=utils.args(arguments),e=[];for(const r of t)if(r&&\"object\"==typeof r)e.push({$unwind:r});else{if(\"string\"!=typeof r)throw new Error('Invalid arg \"'+r+'\" to unwind(), must be string or object');e.push({$unwind:r&&r.startsWith(\"$\")?r:\"$\"+r})}return this.append.apply(this,e)},Aggregate.prototype.replaceRoot=function(t){let e;return e=\"string\"==typeof t?t.startsWith(\"$\")?t:\"$\"+t:t,this.append({$replaceRoot:{newRoot:e}})},Aggregate.prototype.count=function(t){return this.append({$count:t})},Aggregate.prototype.sortByCount=function(t){if(t&&\"object\"==typeof t)return this.append({$sortByCount:t});if(\"string\"==typeof t)return this.append({$sortByCount:t&&t.startsWith(\"$\")?t:\"$\"+t});throw new TypeError('Invalid arg \"'+t+'\" to sortByCount(), must be string or object')},Aggregate.prototype.lookup=function(t){return this.append({$lookup:t})},Aggregate.prototype.graphLookup=function(t){const e={};if(t){if(!utils.isObject(t))throw new TypeError(\"Invalid graphLookup() argument. Must be an object.\");utils.mergeClone(e,t);const r=e.startWith;r&&\"string\"==typeof r&&(e.startWith=e.startWith.startsWith(\"$\")?e.startWith:\"$\"+e.startWith)}return this.append({$graphLookup:e})},Aggregate.prototype.sample=function(t){return this.append({$sample:{size:t}})},Aggregate.prototype.sort=function(t){const e={};if(\"Object\"===t.constructor.name){const r=[\"desc\",\"descending\",-1];Object.keys(t).forEach(function(o){t[o]instanceof Object&&t[o].$meta?e[o]=t[o]:e[o]=-1===r.indexOf(t[o])?1:-1})}else{if(1!==arguments.length||\"string\"!=typeof t)throw new TypeError(\"Invalid sort() argument. Must be a string or object.\");t.split(/\\s+/).forEach(function(t){if(!t)return;const r=\"-\"===t[0]?-1:1;-1===r&&(t=t.substring(1)),e[t]=r})}return this.append({$sort:e})},Aggregate.prototype.read=function(t,e){return this.options||(this.options={}),read.call(this,t,e),this},Aggregate.prototype.readConcern=function(t){return this.options||(this.options={}),readConcern.call(this,t),this},Aggregate.prototype.redact=function(t,e,r){if(3===arguments.length){if(\"string\"==typeof e&&!e.startsWith(\"$$\")||\"string\"==typeof r&&!r.startsWith(\"$$\"))throw new Error(\"If thenExpr or elseExpr is string, it must start with $$. e.g. $$DESCEND, $$PRUNE, $$KEEP\");t={$cond:{if:t,then:e,else:r}}}else if(1!==arguments.length)throw new TypeError(\"Invalid arguments\");return this.append({$redact:t})},Aggregate.prototype.explain=function(t){const e=this._model;return promiseOrCallback(t,t=>{if(!this._pipeline.length){const e=new Error(\"Aggregate has empty pipeline\");return t(e)}prepareDiscriminatorPipeline(this),e.hooks.execPre(\"aggregate\",this,r=>{if(r){const o={error:r};return e.hooks.execPost(\"aggregate\",this,[null],o,e=>{t(e)})}this.options.explain=!0,e.collection.aggregate(this._pipeline,this.options||{}).explain((r,o)=>{const n={error:r};return e.hooks.execPost(\"aggregate\",this,[o],n,e=>e?t(e):t(null,o))})})},e.events)},Aggregate.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this},Aggregate.prototype.hint=function(t){return this.options.hint=t,this},Aggregate.prototype.session=function(t){return null==t?delete this.options.session:this.options.session=t,this},Aggregate.prototype.option=function(t){for(const e in t)this.options[e]=t[e];return this},Aggregate.prototype.cursor=function(t){return this.options||(this.options={}),this.options.cursor=t||{},this},Aggregate.prototype.addCursorFlag=util.deprecate(function(t,e){return this.options||(this.options={}),this.options[t]=e,this},\"Mongoose: `Aggregate#addCursorFlag()` is deprecated, use `option()` instead\"),Aggregate.prototype.collation=function(t){return this.options||(this.options={}),this.options.collation=t,this},Aggregate.prototype.facet=function(t){return this.append({$facet:t})},Aggregate.prototype.search=function(t){return this.append({$search:t})},Aggregate.prototype.pipeline=function(){return this._pipeline},Aggregate.prototype.exec=function(t){if(!this._model)throw new Error(\"Aggregate not bound to any Model\");const e=this._model,r=this._model.collection;return applyGlobalMaxTimeMS(this.options,e),this.options&&this.options.cursor?new AggregationCursor(this):promiseOrCallback(t,t=>{prepareDiscriminatorPipeline(this),stringifyFunctionOperators(this._pipeline),e.hooks.execPre(\"aggregate\",this,o=>{if(o){const r={error:o};return e.hooks.execPost(\"aggregate\",this,[null],r,e=>{t(e)})}if(!this._pipeline.length)return t(new Error(\"Aggregate has empty pipeline\"));const n=utils.clone(this.options||{});r.aggregate(this._pipeline,n,(r,o)=>{if(r){const o={error:r};return e.hooks.execPost(\"aggregate\",this,[null],o,e=>t(e||null))}o.toArray((r,o)=>{const n={error:r};e.hooks.execPost(\"aggregate\",this,[o],n,(e,r)=>{if(e)return t(e);t(null,r)})})})})},e.events)},Aggregate.prototype.then=function(t,e){return this.exec().then(t,e)},Aggregate.prototype.catch=function(t){return this.exec().then(null,t)},null!=Symbol.asyncIterator&&(Aggregate.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).exec().transformNull()._transformForAsyncIterator()}),Aggregate._prepareDiscriminatorPipeline=prepareDiscriminatorPipeline,module.exports=Aggregate;","node_modules/mongoose/lib/promise_provider.js":"\"use strict\";const assert=require(\"assert\"),mquery=require(\"mquery\"),store={_promise:null,get:function(){return store._promise},set:function(e){assert.ok(\"function\"==typeof e,`mongoose.Promise must be a function, got ${e}`),store._promise=e,mquery.Promise=e}};store.set(global.Promise),module.exports=store;","node_modules/mongoose/lib/plugins/sharding.js":"\"use strict\";const objectIdSymbol=require(\"../helpers/symbols\").objectIdSymbol,utils=require(\"../utils\");function applyWhere(){let e,t;if(this.$__.shardval){t=(e=Object.keys(this.$__.shardval)).length,this.$where=this.$where||{};for(let s=0;s<t;++s)this.$where[e[s]]=this.$__.shardval[e[s]]}}function storeShard(){const e=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!utils.isPOJO(e))return;const t=this.$__.shardval={},s=Object.keys(e),o=s.length;let i;for(let e=0;e<o;++e)null==(i=this.$__getValue(s[e]))?t[s[e]]=i:utils.isMongooseObject(i)?t[s[e]]=i.toObject({depopulate:!0,_isNested:!0}):i instanceof Date||i[objectIdSymbol]?t[s[e]]=i:\"function\"==typeof i.valueOf?t[s[e]]=i.valueOf():t[s[e]]=i}module.exports=function(e){e.post(\"init\",function(){return storeShard.call(this),this}),e.pre(\"save\",function(e){applyWhere.call(this),e()}),e.pre(\"remove\",function(e){applyWhere.call(this),e()}),e.post(\"save\",function(){storeShard.call(this)})},module.exports.storeShard=storeShard;","node_modules/mongoose/lib/helpers/printJestWarning.js":"\"use strict\";\"undefined\"!=typeof jest&&\"undefined\"!=typeof window&&console.warn(\"Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: http://mongoosejs.com/docs/jest.html\");","node_modules/mongoose/lib/document_provider.js":"\"use strict\";const Document=require(\"./document.js\"),BrowserDocument=require(\"./browserDocument.js\");let isBrowser=!1;module.exports=function(){return isBrowser?BrowserDocument:Document},module.exports.setBrowser=function(e){isBrowser=e};","node_modules/mongoose/lib/error/index.js":"\"use strict\";const MongooseError=require(\"./mongooseError\");module.exports=exports=MongooseError,MongooseError.messages=require(\"./messages\"),MongooseError.Messages=MongooseError.messages,MongooseError.DocumentNotFoundError=require(\"./notFound\"),MongooseError.CastError=require(\"./cast\"),MongooseError.ValidationError=require(\"./validation\"),MongooseError.ValidatorError=require(\"./validator\"),MongooseError.VersionError=require(\"./version\"),MongooseError.ParallelSaveError=require(\"./parallelSave\"),MongooseError.OverwriteModelError=require(\"./overwriteModel\"),MongooseError.MissingSchemaError=require(\"./missingSchema\"),MongooseError.DivergentArrayError=require(\"./divergentArray\"),MongooseError.StrictModeError=require(\"./strict\");","node_modules/mongoose/lib/error/cast.js":"\"use strict\";const MongooseError=require(\"./mongooseError\"),get=require(\"../helpers/get\"),util=require(\"util\");class CastError extends MongooseError{constructor(e,t,s,r,a){if(arguments.length>0){const i=getStringValue(t),o=getValueType(t);super(formatMessage(null,e,i,s,getMessageFormat(a),o)),this.init(e,t,s,r,a)}else super(formatMessage())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,t,s,r,a){this.stringValue=getStringValue(t),this.messageFormat=getMessageFormat(a),this.kind=e,this.value=t,this.path=s,this.reason=r,this.valueType=getValueType(t)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.model=e,this.message=formatMessage(e,this.kind,this.stringValue,this.path,this.messageFormat,this.valueType)}}function getStringValue(e){let t=util.inspect(e);return(t=t.replace(/^'|'$/g,'\"')).startsWith('\"')||(t='\"'+t+'\"'),t}function getValueType(e){if(null==e)return\"\"+e;const t=typeof e;return\"object\"!==t?t:\"function\"!=typeof e.constructor?t:e.constructor.name}function getMessageFormat(e){const t=get(e,\"options.cast\",null);if(\"string\"==typeof t)return t}function formatMessage(e,t,s,r,a,i){if(null!=a){let i=a.replace(\"{KIND}\",t).replace(\"{VALUE}\",s).replace(\"{PATH}\",r);return null!=e&&(i=i.replace(\"{MODEL}\",e.modelName)),i}{let a=\"Cast to \"+t+\" failed for value \"+s+(i?\" (type \"+i+\")\":\"\")+' at path \"'+r+'\"';return null!=e&&(a+=' for model \"'+e.modelName+'\"'),a}}Object.defineProperty(CastError.prototype,\"name\",{value:\"CastError\"}),module.exports=CastError;","node_modules/mongoose/lib/options/SchemaTypeOptions.js":"\"use strict\";const clone=require(\"../helpers/clone\");class SchemaTypeOptions{constructor(e){if(null==e)return this;Object.assign(this,clone(e))}}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaTypeOptions.prototype,\"type\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"validate\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"cast\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"required\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"default\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"ref\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"select\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"index\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"unique\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"immutable\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"sparse\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"text\",opts),Object.defineProperty(SchemaTypeOptions.prototype,\"transform\",opts),module.exports=SchemaTypeOptions;","node_modules/mongodb/index.js":"\"use strict\";const core=require(\"./lib/core\"),Instrumentation=require(\"./lib/apm\"),connect=require(\"./lib/mongo_client\").connect;connect.MongoError=core.MongoError,connect.MongoNetworkError=core.MongoNetworkError,connect.MongoTimeoutError=core.MongoTimeoutError,connect.MongoServerSelectionError=core.MongoServerSelectionError,connect.MongoParseError=core.MongoParseError,connect.MongoWriteConcernError=core.MongoWriteConcernError,connect.MongoBulkWriteError=require(\"./lib/bulk/common\").BulkWriteError,connect.BulkWriteError=connect.MongoBulkWriteError,connect.Admin=require(\"./lib/admin\"),connect.MongoClient=require(\"./lib/mongo_client\"),connect.Db=require(\"./lib/db\"),connect.Collection=require(\"./lib/collection\"),connect.Server=require(\"./lib/topologies/server\"),connect.ReplSet=require(\"./lib/topologies/replset\"),connect.Mongos=require(\"./lib/topologies/mongos\"),connect.ReadPreference=core.ReadPreference,connect.GridStore=require(\"./lib/gridfs/grid_store\"),connect.Chunk=require(\"./lib/gridfs/chunk\"),connect.Logger=core.Logger,connect.AggregationCursor=require(\"./lib/aggregation_cursor\"),connect.CommandCursor=require(\"./lib/command_cursor\"),connect.Cursor=require(\"./lib/cursor\"),connect.GridFSBucket=require(\"./lib/gridfs-stream\"),connect.CoreServer=core.Server,connect.CoreConnection=core.Connection,connect.Binary=core.BSON.Binary,connect.Code=core.BSON.Code,connect.Map=core.BSON.Map,connect.DBRef=core.BSON.DBRef,connect.Double=core.BSON.Double,connect.Int32=core.BSON.Int32,connect.Long=core.BSON.Long,connect.MinKey=core.BSON.MinKey,connect.MaxKey=core.BSON.MaxKey,connect.ObjectID=core.BSON.ObjectID,connect.ObjectId=core.BSON.ObjectID,connect.Symbol=core.BSON.Symbol,connect.Timestamp=core.BSON.Timestamp,connect.BSONRegExp=core.BSON.BSONRegExp,connect.Decimal128=core.BSON.Decimal128,connect.connect=connect,connect.instrument=function(e,o){\"function\"==typeof e&&(o=e,e={});const r=new Instrumentation;return r.instrument(connect.MongoClient,o),r},module.exports=connect;","node_modules/mquery/lib/mquery.js":"\"use strict\";var slice=require(\"sliced\"),assert=require(\"assert\"),util=require(\"util\"),utils=require(\"./utils\"),debug=require(\"debug\")(\"mquery\");function Query(t,e){if(!(this instanceof Query))return new Query(t,e);var i=this.constructor.prototype;this.op=i.op||void 0,this.options=Object.assign({},i.options),this._conditions=i._conditions?utils.clone(i._conditions):{},this._fields=i._fields?utils.clone(i._fields):void 0,this._update=i._update?utils.clone(i._update):void 0,this._path=i._path||void 0,this._distinct=i._distinct||void 0,this._collection=i._collection||void 0,this._traceFunction=i._traceFunction||void 0,e&&this.setOptions(e),t&&(t.find&&t.remove&&t.update?this.collection(t):this.find(t))}var $withinCmd=\"$geoWithin\";Object.defineProperty(Query,\"use$geoWithin\",{get:function(){return\"$geoWithin\"==$withinCmd},set:function(t){$withinCmd=!0===t?\"$geoWithin\":\"$within\"}}),Query.prototype.toConstructor=function(){function t(e,i){if(!(this instanceof t))return new t(e,i);Query.call(this,e,i)}utils.inherits(t,Query);var e=t.prototype;return e.options={},e.setOptions(this.options),e.op=this.op,e._conditions=utils.clone(this._conditions),e._fields=utils.clone(this._fields),e._update=utils.clone(this._update),e._path=this._path,e._distinct=this._distinct,e._collection=this._collection,e._traceFunction=this._traceFunction,t},Query.prototype.setOptions=function(t){if(!t||!utils.isObject(t))return this;for(var e,i=utils.keys(t),o=0;o<i.length;++o)if(\"function\"==typeof this[e=i[o]]){var n=utils.isArray(t[e])?t[e]:[t[e]];this[e].apply(this,n)}else this.options[e]=t[e];return this},Query.prototype.collection=function(t){return this._collection=new Query.Collection(t),this},Query.prototype.collation=function(t){return this.options.collation=t,this},Query.prototype.$where=function(t){return this._conditions.$where=t,this},Query.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op=\"find\");var t=typeof arguments[0];if(\"string\"==t)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if(\"object\"==t&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError(\"path must be a string or object\")},Query.prototype.equals=function(t){this._ensurePath(\"equals\");var e=this._path;return this._conditions[e]=t,this},Query.prototype.eq=function(t){this._ensurePath(\"eq\");var e=this._path;return this._conditions[e]=t,this},Query.prototype.or=function(t){var e=this._conditions.$or||(this._conditions.$or=[]);return utils.isArray(t)||(t=[t]),e.push.apply(e,t),this},Query.prototype.nor=function(t){var e=this._conditions.$nor||(this._conditions.$nor=[]);return utils.isArray(t)||(t=[t]),e.push.apply(e,t),this},Query.prototype.and=function(t){var e=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},\"gt gte lt lte ne in nin all regex size maxDistance minDistance\".split(\" \").forEach(function(t){Query.prototype[t]=function(){var e,i;return 1===arguments.length?(this._ensurePath(t),i=arguments[0],e=this._path):(i=arguments[1],e=arguments[0]),(null===this._conditions[e]||\"object\"==typeof this._conditions[e]?this._conditions[e]:this._conditions[e]={})[\"$\"+t]=i,this}}),Query.prototype.mod=function(){var t,e;return 1===arguments.length?(this._ensurePath(\"mod\"),t=arguments[0],e=this._path):2!==arguments.length||utils.isArray(arguments[1])?3===arguments.length?(t=slice(arguments,1),e=arguments[0]):(t=arguments[1],e=arguments[0]):(this._ensurePath(\"mod\"),t=slice(arguments),e=this._path),(this._conditions[e]||(this._conditions[e]={})).$mod=t,this},Query.prototype.exists=function(){var t,e;return 0===arguments.length?(this._ensurePath(\"exists\"),t=this._path,e=!0):1===arguments.length?\"boolean\"==typeof arguments[0]?(this._ensurePath(\"exists\"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):2===arguments.length&&(t=arguments[0],e=arguments[1]),(this._conditions[t]||(this._conditions[t]={})).$exists=e,this},Query.prototype.elemMatch=function(){if(null==arguments[0])throw new TypeError(\"Invalid argument\");var t,e,i;if(\"function\"==typeof arguments[0])this._ensurePath(\"elemMatch\"),e=this._path,t=arguments[0];else if(utils.isObject(arguments[0]))this._ensurePath(\"elemMatch\"),e=this._path,i=arguments[0];else if(\"function\"==typeof arguments[1])e=arguments[0],t=arguments[1];else{if(!arguments[1]||!utils.isObject(arguments[1]))throw new TypeError(\"Invalid argument\");e=arguments[0],i=arguments[1]}return t&&(t(i=new Query),i=i._conditions),(this._conditions[e]||(this._conditions[e]={})).$elemMatch=i,this},Query.prototype.within=function(){if(this._ensurePath(\"within\"),this._geoComparison=$withinCmd,0===arguments.length)return this;if(2===arguments.length)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);var t=arguments[0];if(!t)throw new TypeError(\"Invalid argument\");if(t.center)return this.circle(t);if(t.box)return this.box.apply(this,t.box);if(t.polygon)return this.polygon.apply(this,t.polygon);if(t.type&&t.coordinates)return this.geometry(t);throw new TypeError(\"Invalid argument\")},Query.prototype.box=function(){var t,e;if(3===arguments.length)t=arguments[0],e=[arguments[1],arguments[2]];else{if(2!==arguments.length)throw new TypeError(\"Invalid argument\");this._ensurePath(\"box\"),t=this._path,e=[arguments[0],arguments[1]]}return(this._conditions[t]||(this._conditions[t]={}))[this._geoComparison||$withinCmd]={$box:e},this},Query.prototype.polygon=function(){var t,e;return\"string\"==typeof arguments[0]?(e=arguments[0],t=slice(arguments,1)):(this._ensurePath(\"polygon\"),e=this._path,t=slice(arguments)),(this._conditions[e]||(this._conditions[e]={}))[this._geoComparison||$withinCmd]={$polygon:t},this},Query.prototype.circle=function(){var t,e;if(1===arguments.length)this._ensurePath(\"circle\"),t=this._path,e=arguments[0];else{if(2!==arguments.length)throw new TypeError(\"Invalid argument\");t=arguments[0],e=arguments[1]}if(!(\"radius\"in e&&e.center))throw new Error(\"center and radius are required\");var i=this._conditions[t]||(this._conditions[t]={}),o=e.spherical?\"$centerSphere\":\"$center\",n=this._geoComparison||$withinCmd;return i[n]={},i[n][o]=[e.center,e.radius],\"unique\"in e&&(i[n].$uniqueDocs=!!e.unique),this},Query.prototype.near=function(){var t,e;if(this._geoComparison=\"$near\",0===arguments.length)return this;if(1===arguments.length)this._ensurePath(\"near\"),t=this._path,e=arguments[0];else{if(2!==arguments.length)throw new TypeError(\"Invalid argument\");t=arguments[0],e=arguments[1]}if(!e.center)throw new Error(\"center is required\");var i=this._conditions[t]||(this._conditions[t]={}),o=e.spherical?\"$nearSphere\":\"$near\";if(Array.isArray(e.center)){i[o]=e.center;var n=\"maxDistance\"in e?e.maxDistance:null;null!=n&&(i.$maxDistance=n),null!=e.minDistance&&(i.$minDistance=e.minDistance)}else{if(\"Point\"!=e.center.type||!Array.isArray(e.center.coordinates))throw new Error(util.format(\"Invalid GeoJSON specified for %s\",o));i[o]={$geometry:e.center},\"maxDistance\"in e&&(i[o].$maxDistance=e.maxDistance),\"minDistance\"in e&&(i[o].$minDistance=e.minDistance)}return this},Query.prototype.intersects=function(){if(this._ensurePath(\"intersects\"),this._geoComparison=\"$geoIntersects\",0===arguments.length)return this;var t=arguments[0];if(null!=t&&t.type&&t.coordinates)return this.geometry(t);throw new TypeError(\"Invalid argument\")},Query.prototype.geometry=function(){if(\"$within\"!=this._geoComparison&&\"$geoWithin\"!=this._geoComparison&&\"$near\"!=this._geoComparison&&\"$geoIntersects\"!=this._geoComparison)throw new Error(\"geometry() must come after `within()`, `intersects()`, or `near()\");var t,e;if(1!==arguments.length)throw new TypeError(\"Invalid argument\");if(this._ensurePath(\"geometry\"),e=this._path,!(t=arguments[0]).type||!Array.isArray(t.coordinates))throw new TypeError(\"Invalid argument\");return(this._conditions[e]||(this._conditions[e]={}))[this._geoComparison]={$geometry:t},this},Query.prototype.select=function(){var t=arguments[0];if(!t)return this;if(1!==arguments.length)throw new Error(\"Invalid select: select only takes 1 argument\");this._validate(\"select\");var e,i,o=this._fields||(this._fields={}),n=typeof t;if((\"string\"==n||utils.isArgumentsObject(t))&&\"number\"==typeof t.length||Array.isArray(t)){for(\"string\"==n&&(t=t.split(/\\s+/)),e=0,i=t.length;e<i;++e){var r=t[e];if(r){var s=\"-\"==r[0]?0:1;0===s&&(r=r.substring(1)),o[r]=s}}return this}if(utils.isObject(t)){var u=utils.keys(t);for(e=0;e<u.length;++e)o[u[e]]=t[u[e]];return this}throw new TypeError(\"Invalid select() argument. Must be string or object.\")},Query.prototype.slice=function(){if(0===arguments.length)return this;var t,e;if(this._validate(\"slice\"),1===arguments.length){var i=arguments[0];if(\"object\"==typeof i&&!Array.isArray(i)){for(var o=Object.keys(i),n=o.length,r=0;r<n;++r)this.slice(o[r],i[o[r]]);return this}this._ensurePath(\"slice\"),t=this._path,e=arguments[0]}else 2===arguments.length?\"number\"==typeof arguments[0]?(this._ensurePath(\"slice\"),t=this._path,e=slice(arguments)):(t=arguments[0],e=arguments[1]):3===arguments.length&&(t=arguments[0],e=slice(arguments,1));return(this._fields||(this._fields={}))[t]={$slice:e},this},Query.prototype.sort=function(t){if(!t)return this;var e,i,o;this._validate(\"sort\");var n=typeof t;if(Array.isArray(t)){for(i=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error(\"Invalid sort() argument, must be array of arrays\");_pushArr(this.options,t[e][0],t[e][1])}return this}if(1===arguments.length&&\"string\"==n){for(i=(t=t.split(/\\s+/)).length,e=0;e<i;++e)if(o=t[e]){var r=\"-\"==o[0]?-1:1;-1===r&&(o=o.substring(1)),push(this.options,o,r)}return this}if(utils.isObject(t)){var s=utils.keys(t);for(e=0;e<s.length;++e)o=s[e],push(this.options,o,t[o]);return this}if(\"undefined\"!=typeof Map&&t instanceof Map)return _pushMap(this.options,t),this;throw new TypeError(\"Invalid sort() argument. Must be a string, object, or array.\")};var _validSortValue={1:1,\"-1\":-1,asc:1,ascending:1,desc:-1,descending:-1};function push(t,e,i){if(Array.isArray(t.sort))throw new TypeError(\"Can't mix sort syntaxes. Use either array or object:\\n- `.sort([['field', 1], ['test', -1]])`\\n- `.sort({ field: 1, test: -1 })`\");var o;if(i&&i.$meta)(o=t.sort||(t.sort={}))[e]={$meta:i.$meta};else{o=t.sort||(t.sort={});var n=String(i||1).toLowerCase();if(!(n=_validSortValue[n]))throw new TypeError(\"Invalid sort value: { \"+e+\": \"+i+\" }\");o[e]=n}}function _pushArr(t,e,i){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError(\"Can't mix sort syntaxes. Use either array or object:\\n- `.sort([['field', 1], ['test', -1]])`\\n- `.sort({ field: 1, test: -1 })`\");var o=String(i||1).toLowerCase();if(!(o=_validSortValue[o]))throw new TypeError(\"Invalid sort value: [ \"+e+\", \"+i+\" ]\");t.sort.push([e,o])}function _pushMap(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError(\"Can't mix sort syntaxes. Use either array or object or map consistently\");e.forEach(function(e,i){var o=String(e||1).toLowerCase();if(!(o=_validSortValue[o]))throw new TypeError(\"Invalid sort value: < \"+i+\": \"+e+\" >\");t.sort.set(i,o)})}function _update(t,e,i,o,n,r,s){return t.op=e,Query.canMerge(i)&&t.merge(i),o&&t._mergeUpdate(o),utils.isObject(n)&&t.setOptions(n),r||s?!t._update||!t.options.overwrite&&0===utils.keys(t._update).length?(s&&utils.soon(s.bind(null,null,0)),t):(n=t._optionsForExec(),s||(n.safe=!1),i=t._conditions,o=t._updateForExec(),debug(\"update\",t._collection.collectionName,i,o,n),s=t._wrapCallback(e,s,{conditions:i,doc:o,options:n}),t._collection[e](i,o,n,utils.tick(s)),t):t}[\"limit\",\"skip\",\"maxScan\",\"batchSize\",\"comment\"].forEach(function(t){Query.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}}),Query.prototype.maxTime=Query.prototype.maxTimeMS=function(t){return this._validate(\"maxTime\"),this.options.maxTimeMS=t,this},Query.prototype.snapshot=function(){return this._validate(\"snapshot\"),this.options.snapshot=!arguments.length||!!arguments[0],this},Query.prototype.hint=function(){if(0===arguments.length)return this;this._validate(\"hint\");var t=arguments[0];if(utils.isObject(t)){var e=this.options.hint||(this.options.hint={});for(var i in t)e[i]=t[i];return this}if(\"string\"==typeof t)return this.options.hint=t,this;throw new TypeError(\"Invalid hint. \"+t)},Query.prototype.j=function(t){return this.options.j=t,this},Query.prototype.slaveOk=function(t){return this.options.slaveOk=!arguments.length||!!t,this},Query.prototype.read=Query.prototype.setReadPreference=function(t){return arguments.length>1&&!Query.prototype.read.deprecationWarningIssued&&(console.error(\"Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead.\"),Query.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=utils.readPref(t),this},Query.prototype.readConcern=Query.prototype.r=function(t){return this.options.readConcern=utils.readConcern(t),this},Query.prototype.tailable=function(){return this._validate(\"tailable\"),this.options.tailable=!arguments.length||!!arguments[0],this},Query.prototype.writeConcern=Query.prototype.w=function(t){return\"object\"==typeof t?(void 0!==t.j&&(this.options.j=t.j),void 0!==t.w&&(this.options.w=t.w),void 0!==t.wtimeout&&(this.options.wtimeout=t.wtimeout)):this.options.w=\"m\"===t?\"majority\":t,this},Query.prototype.wtimeout=Query.prototype.wTimeout=function(t){return this.options.wtimeout=t,this},Query.prototype.merge=function(t){if(!t)return this;if(!Query.canMerge(t))throw new TypeError(\"Invalid argument. Expected instanceof mquery or plain object\");return t instanceof Query?(t._conditions&&utils.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),utils.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),utils.merge(this.options,t.options)),t._update&&(this._update||(this._update={}),utils.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),this):(utils.merge(this._conditions,t),this)},Query.prototype.find=function(t,e){if(this.op=\"find\",\"function\"==typeof t?(e=t,t=void 0):Query.canMerge(t)&&this.merge(t),!e)return this;var i=this._conditions,o=this._optionsForExec();return this.$useProjection?o.projection=this._fieldsForExec():o.fields=this._fieldsForExec(),debug(\"find\",this._collection.collectionName,i,o),e=this._wrapCallback(\"find\",e,{conditions:i,options:o}),this._collection.find(i,o,utils.tick(e)),this},Query.prototype.cursor=function(t){if(this.op){if(\"find\"!==this.op)throw new TypeError(\".cursor only support .find method\")}else this.find(t);var e=this._conditions,i=this._optionsForExec();return this.$useProjection?i.projection=this._fieldsForExec():i.fields=this._fieldsForExec(),debug(\"findCursor\",this._collection.collectionName,e,i),this._collection.findCursor(e,i)},Query.prototype.findOne=function(t,e){if(this.op=\"findOne\",\"function\"==typeof t?(e=t,t=void 0):Query.canMerge(t)&&this.merge(t),!e)return this;var i=this._conditions,o=this._optionsForExec();return this.$useProjection?o.projection=this._fieldsForExec():o.fields=this._fieldsForExec(),debug(\"findOne\",this._collection.collectionName,i,o),e=this._wrapCallback(\"findOne\",e,{conditions:i,options:o}),this._collection.findOne(i,o,utils.tick(e)),this},Query.prototype.count=function(t,e){if(this.op=\"count\",this._validate(),\"function\"==typeof t?(e=t,t=void 0):Query.canMerge(t)&&this.merge(t),!e)return this;var i=this._conditions,o=this._optionsForExec();return debug(\"count\",this._collection.collectionName,i,o),e=this._wrapCallback(\"count\",e,{conditions:i,options:o}),this._collection.count(i,o,utils.tick(e)),this},Query.prototype.distinct=function(t,e,i){if(this.op=\"distinct\",this._validate(),!i){switch(typeof e){case\"function\":i=e,\"string\"==typeof t&&(e=t,t=void 0);break;case\"undefined\":case\"string\":break;default:throw new TypeError(\"Invalid `field` argument. Must be string or function\")}switch(typeof t){case\"function\":i=t,t=e=void 0;break;case\"string\":e=t,t=void 0}}if(\"string\"==typeof e&&(this._distinct=e),Query.canMerge(t)&&this.merge(t),!i)return this;if(!this._distinct)throw new Error(\"No value for `distinct` has been declared\");var o=this._conditions,n=this._optionsForExec();return debug(\"distinct\",this._collection.collectionName,o,n),i=this._wrapCallback(\"distinct\",i,{conditions:o,options:n}),this._collection.distinct(this._distinct,o,n,utils.tick(i)),this},Query.prototype.update=function(t,e,i,o){var n;switch(arguments.length){case 3:\"function\"==typeof i&&(o=i,i=void 0);break;case 2:\"function\"==typeof e&&(o=e,e=t,t=void 0);break;case 1:switch(typeof t){case\"function\":o=t,t=i=e=void 0;break;case\"boolean\":n=t,t=void 0;break;default:e=t,t=i=void 0}}return _update(this,\"update\",t,e,i,n,o)},Query.prototype.updateMany=function(t,e,i,o){var n;switch(arguments.length){case 3:\"function\"==typeof i&&(o=i,i=void 0);break;case 2:\"function\"==typeof e&&(o=e,e=t,t=void 0);break;case 1:switch(typeof t){case\"function\":o=t,t=i=e=void 0;break;case\"boolean\":n=t,t=void 0;break;default:e=t,t=i=void 0}}return _update(this,\"updateMany\",t,e,i,n,o)},Query.prototype.updateOne=function(t,e,i,o){var n;switch(arguments.length){case 3:\"function\"==typeof i&&(o=i,i=void 0);break;case 2:\"function\"==typeof e&&(o=e,e=t,t=void 0);break;case 1:switch(typeof t){case\"function\":o=t,t=i=e=void 0;break;case\"boolean\":n=t,t=void 0;break;default:e=t,t=i=void 0}}return _update(this,\"updateOne\",t,e,i,n,o)},Query.prototype.replaceOne=function(t,e,i,o){var n;switch(arguments.length){case 3:\"function\"==typeof i&&(o=i,i=void 0);break;case 2:\"function\"==typeof e&&(o=e,e=t,t=void 0);break;case 1:switch(typeof t){case\"function\":o=t,t=i=e=void 0;break;case\"boolean\":n=t,t=void 0;break;default:e=t,t=i=void 0}}return this.setOptions({overwrite:!0}),_update(this,\"replaceOne\",t,e,i,n,o)},Query.prototype.remove=function(t,e){var i;if(this.op=\"remove\",\"function\"==typeof t?(e=t,t=void 0):Query.canMerge(t)?this.merge(t):!0===t&&(i=t,t=void 0),!i&&!e)return this;var o=this._optionsForExec();e||(o.safe=!1);var n=this._conditions;return debug(\"remove\",this._collection.collectionName,n,o),e=this._wrapCallback(\"remove\",e,{conditions:n,options:o}),this._collection.remove(n,o,utils.tick(e)),this},Query.prototype.deleteOne=function(t,e){var i;if(this.op=\"deleteOne\",\"function\"==typeof t?(e=t,t=void 0):Query.canMerge(t)?this.merge(t):!0===t&&(i=t,t=void 0),!i&&!e)return this;var o=this._optionsForExec();e||(o.safe=!1),delete o.justOne;var n=this._conditions;return debug(\"deleteOne\",this._collection.collectionName,n,o),e=this._wrapCallback(\"deleteOne\",e,{conditions:n,options:o}),this._collection.deleteOne(n,o,utils.tick(e)),this},Query.prototype.deleteMany=function(t,e){var i;if(this.op=\"deleteMany\",\"function\"==typeof t?(e=t,t=void 0):Query.canMerge(t)?this.merge(t):!0===t&&(i=t,t=void 0),!i&&!e)return this;var o=this._optionsForExec();e||(o.safe=!1),delete o.justOne;var n=this._conditions;return debug(\"deleteOne\",this._collection.collectionName,n,o),e=this._wrapCallback(\"deleteOne\",e,{conditions:n,options:o}),this._collection.deleteMany(n,o,utils.tick(e)),this},Query.prototype.findOneAndUpdate=function(t,e,i,o){switch(this.op=\"findOneAndUpdate\",this._validate(),arguments.length){case 3:\"function\"==typeof i&&(o=i,i={});break;case 2:\"function\"==typeof e&&(o=e,e=t,t=void 0),i=void 0;break;case 1:\"function\"==typeof t?(o=t,t=i=e=void 0):(e=t,t=i=void 0)}return Query.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),i&&this.setOptions(i),o?this._findAndModify(\"update\",o):this},Query.prototype.findOneAndRemove=Query.prototype.findOneAndDelete=function(t,e,i){return this.op=\"findOneAndRemove\",this._validate(),\"function\"==typeof e?(i=e,e=void 0):\"function\"==typeof t&&(i=t,t=void 0),Query.canMerge(t)&&this.merge(t),e&&this.setOptions(e),i?this._findAndModify(\"remove\",i):this},Query.prototype._findAndModify=function(t,e){assert.equal(\"function\",typeof e);var i,o=this._optionsForExec();if(\"remove\"==t)o.remove=!0;else if(\"new\"in o||(o.new=!0),\"upsert\"in o||(o.upsert=!1),!(i=this._updateForExec())){if(!o.upsert)return this.findOne(e);i={$set:{}}}null!=this._fieldsForExec()&&(this.$useProjection?o.projection=this._fieldsForExec():o.fields=this._fieldsForExec());var n=this._conditions;return debug(\"findAndModify\",this._collection.collectionName,n,i,o),e=this._wrapCallback(\"findAndModify\",e,{conditions:n,doc:i,options:o}),this._collection.findAndModify(n,i,o,utils.tick(e)),this},Query.prototype._wrapCallback=function(t,e,i){var o=this._traceFunction||Query.traceFunction;if(o){i.collectionName=this._collection.collectionName;var n=o&&o.call(null,t,i,this),r=(new Date).getTime();return function(t,i){if(n){var o=(new Date).getTime()-r;n.call(null,t,i,o)}e&&e.apply(null,arguments)}}return e},Query.prototype.setTraceFunction=function(t){return this._traceFunction=t,this},Query.prototype.exec=function(t,e){switch(typeof t){case\"function\":e=t,t=null;break;case\"string\":this.op=t}assert.ok(this.op,\"Missing query type: (find, update, etc)\"),\"update\"!=this.op&&\"remove\"!=this.op||e||(e=!0);var i=this;if(\"function\"!=typeof e)return new Query.Promise(function(t,e){i[i.op](function(i,o){i?e(i):t(o),t=e=null})});this[this.op](e)},Query.prototype.thunk=function(){var t=this;return function(e){t.exec(e)}},Query.prototype.then=function(t,e){var i=this;return new Query.Promise(function(t,e){i.exec(function(i,o){i?e(i):t(o),t=e=null})}).then(t,e)},Query.prototype.stream=function(t){if(\"find\"!=this.op)throw new Error(\"stream() is only available for find\");var e=this._conditions,i=this._optionsForExec();return this.$useProjection?i.projection=this._fieldsForExec():i.fields=this._fieldsForExec(),debug(\"stream\",this._collection.collectionName,e,i,t),this._collection.findStream(e,i,t)},Query.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)},Query.prototype.selectedInclusively=function(){if(!this._fields)return!1;var t=Object.keys(this._fields);if(0===t.length)return!1;for(var e=0;e<t.length;++e){var i=t[e];if(0===this._fields[i])return!1;if(this._fields[i]&&\"object\"==typeof this._fields[i]&&this._fields[i].$meta)return!1}return!0},Query.prototype.selectedExclusively=function(){if(!this._fields)return!1;var t=Object.keys(this._fields);if(0===t.length)return!1;for(var e=0;e<t.length;++e){var i=t[e];if(0===this._fields[i])return!0}return!1},Query.prototype._mergeUpdate=function(t){this._update||(this._update={}),t instanceof Query?t._update&&utils.mergeClone(this._update,t._update):utils.mergeClone(this._update,t)},Query.prototype._optionsForExec=function(){return utils.clone(this.options)},Query.prototype._fieldsForExec=function(){return utils.clone(this._fields)},Query.prototype._updateForExec=function(){for(var t=utils.clone(this._update),e=utils.keys(t),i=e.length,o={};i--;){var n=e[i];this.options.overwrite?o[n]=t[n]:\"$\"!==n[0]?(o.$set||(t.$set?o.$set=t.$set:o.$set={}),o.$set[n]=t[n],e.splice(i,1),~e.indexOf(\"$set\")||e.push(\"$set\")):\"$set\"===n&&o.$set||(o[n]=t[n])}return this._compiledUpdate=o,o},Query.prototype._ensurePath=function(t){if(!this._path)throw new Error(t+\"() must be used after where() when called with these arguments\")},Query.permissions=require(\"./permissions\"),Query._isPermitted=function(t,e){var i=Query.permissions[e];return!i||!0!==i[t]},Query.prototype._validate=function(t){var e,i;if(void 0===t){if(\"function\"!=typeof(i=Query.permissions[this.op]))return!0;e=i(this)}else Query._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+\" cannot be used with \"+this.op)},Query.canMerge=function(t){return t instanceof Query||utils.isObject(t)},Query.setGlobalTraceFunction=function(t){Query.traceFunction=t},Query.utils=utils,Query.env=require(\"./env\"),Query.Collection=require(\"./collection\"),Query.BaseCollection=require(\"./collection/collection\"),Query.Promise=require(\"bluebird\"),module.exports=exports=Query;","node_modules/mongoose/lib/drivers/node-mongodb-native/binary.js":"\"use strict\";const Binary=require(\"mongodb\").Binary;module.exports=exports=Binary;","node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js":"\"use strict\";const MongooseCollection=require(\"../../collection\"),MongooseError=require(\"../../error/mongooseError\"),Collection=require(\"mongodb\").Collection,get=require(\"../../helpers/get\"),sliced=require(\"sliced\"),stream=require(\"stream\"),util=require(\"util\");function NativeCollection(t,o){this.collection=null,this.Promise=o.Promise||Promise,this._closed=!1,MongooseCollection.apply(this,arguments)}NativeCollection.prototype.__proto__=MongooseCollection.prototype,NativeCollection.prototype.onOpen=function(){const t=this;return t.opts.capped.size?!1===t.opts.autoCreate?(t.collection=t.conn.db.collection(t.name),MongooseCollection.prototype.onOpen.call(t),t.collection):t.conn.db.collection(t.name,function(e,n){if(e)return o(e);t.conn.db.listCollections({name:t.name}).toArray(function(e,i){if(e)return o(e);const c=i[0];if(!!c)if(c.options&&c.options.capped)o(null,n);else{const n=\"A non-capped collection exists with the name: \"+t.name+\"\\n\\n To use this collection as a capped collection, please first convert it.\\n http://www.mongodb.org/display/DOCS/Capped+Collections#CappedCollections-Convertingacollectiontocapped\";o(e=new Error(n))}else{const e=Object.assign({},t.opts.capped);e.capped=!0,t.conn.db.createCollection(t.name,e,o)}})}):(o(null,t.conn.db.collection(t.name)),t.collection);function o(o,e){o?t.conn.emit(\"error\",o):(t.collection=e,MongooseCollection.prototype.onOpen.call(t))}},NativeCollection.prototype.onClose=function(t){MongooseCollection.prototype.onClose.call(this,t)};const syncCollectionMethods={watch:!0};function iter(t){NativeCollection.prototype[t]=function(){const o=this.collection,e=Array.from(arguments),n=this,i=get(n,\"conn.base.options.debug\"),c=arguments[arguments.length-1];if(this.conn.$wasForceClosed){const t=new MongooseError(\"Connection was force closed\");if(e.length>0&&\"function\"==typeof e[e.length-1])return void e[e.length-1](t);throw t}if(this._shouldBufferCommands()&&this.buffer){if(syncCollectionMethods[t])throw new Error(\"Collection method \"+t+\" is synchronous\");let o,n;this.conn.emit(\"buffer\",{method:t,args:e});let i=null,r=null;\"function\"==typeof c?(o=function(){return null!=r&&clearTimeout(r),c.apply(this,arguments)},n=e.slice(0,e.length-1).concat([o])):i=new this.Promise((i,c)=>{o=function(t,o){if(null!=r&&clearTimeout(r),null!=t)return c(t);i(o)},n=e.concat([o]),this.addQueue(t,n)});const l=this._getBufferTimeoutMS();return r=setTimeout(()=>{if(this.removeQueue(t,n)){const e=\"Operation `\"+this.name+\".\"+t+\"()` buffering timed out after \"+l+\"ms\";o(new MongooseError(e))}},l),\"function\"==typeof c?void this.addQueue(t,n):i}if(i)if(\"function\"==typeof i)i.apply(n,[n.name,t].concat(sliced(e,0,e.length-1)));else if(i instanceof stream.Writable)this.$printToStream(n.name,t,e,i);else{const o=null==i.color||i.color,c=null!=i.shell&&i.shell;this.$print(n.name,t,e,o,c)}try{if(null==o){const o=\"Cannot call `\"+this.name+\".\"+t+\"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.\";throw new MongooseError(o)}return o[t].apply(o,e)}catch(t){if(!(e.length>0&&\"function\"==typeof e[e.length-1]))throw t;e[e.length-1](t)}}}for(const t of Object.keys(Collection.prototype)){void 0===Object.getOwnPropertyDescriptor(Collection.prototype,t).get&&(\"function\"==typeof Collection.prototype[t]&&iter(t))}function inspectable(t){const o={inspect:function(){return t}};return util.inspect.custom&&(o[util.inspect.custom]=o.inspect),o}function map(t){return format(t,!0)}function formatObjectId(t,o){t[o]=inspectable('ObjectId(\"'+t[o].toHexString()+'\")')}function formatDate(t,o,e){t[o]=inspectable(e?'ISODate(\"'+t[o].toUTCString()+'\")':'new Date(\"'+t[o].toUTCString()+'\")')}function format(t,o,e,n){if(t&&\"function\"==typeof t.toBSON&&(t=t.toBSON()),null==t)return t;let i=require(\"../../helpers/clone\")(t,{transform:!1});if(\"Binary\"===i.constructor.name)i=\"BinData(\"+i.sub_type+', \"'+i.toString(\"base64\")+'\")';else if(\"ObjectID\"===i.constructor.name)i=inspectable('ObjectId(\"'+i.toHexString()+'\")');else if(\"Date\"===i.constructor.name)i=inspectable('new Date(\"'+i.toUTCString()+'\")');else if(\"Object\"===i.constructor.name){const t=Object.keys(i),o=t.length;let e;for(let c=0;c<o;++c)if(i[e=t[c]]){let t;if(\"function\"==typeof i[e].toBSON)try{i[e]=i[e].toBSON()}catch(o){t=o}if(\"Binary\"===i[e].constructor.name)i[e]=\"BinData(\"+i[e].sub_type+', \"'+i[e].buffer.toString(\"base64\")+'\")';else if(\"Object\"===i[e].constructor.name)i[e]=format(i[e],!0);else if(\"ObjectID\"===i[e].constructor.name)formatObjectId(i,e);else if(\"Date\"===i[e].constructor.name)formatDate(i,e,n);else if(\"ClientSession\"===i[e].constructor.name)i[e]=inspectable('ClientSession(\"'+get(i[e],\"id.id.buffer\",\"\").toString(\"hex\")+'\")');else if(Array.isArray(i[e]))i[e]=i[e].map(map);else if(null!=t)throw t}}return o?i:util.inspect(i,!1,10,e).replace(/\\n/g,\"\").replace(/\\s{2,}/g,\" \")}NativeCollection.prototype.$print=function(t,o,e,n,i){const c=n?\"\u001b[0;36mMongoose:\u001b[0m \":\"Mongoose: \",r=[t,o].join(\".\"),l=[];for(let t=e.length-1;t>=0;--t)(this.$format(e[t])||l.length)&&l.unshift(this.$format(e[t],n,i));const s=\"(\"+l.join(\", \")+\")\";console.info(c+r+s)},NativeCollection.prototype.$printToStream=function(t,o,e,n){const i=[t,o].join(\".\"),c=[];for(let t=e.length-1;t>=0;--t)(this.$format(e[t])||c.length)&&c.unshift(this.$format(e[t]));const r=\"(\"+c.join(\", \")+\")\";n.write(i+r,\"utf8\")},NativeCollection.prototype.$format=function(t,o,e){const n=typeof t;return\"function\"===n||\"undefined\"===n?\"\":format(t,!1,o,e)},NativeCollection.prototype.getIndexes=NativeCollection.prototype.indexInformation,module.exports=NativeCollection;","node_modules/mongoose/lib/drivers/node-mongodb-native/decimal128.js":"\"use strict\";module.exports=require(\"mongodb\").Decimal128;","node_modules/mongoose/lib/drivers/node-mongodb-native/objectid.js":"\"use strict\";const ObjectId=require(\"mongodb\").ObjectId;module.exports=exports=ObjectId;","node_modules/mongoose/lib/drivers/node-mongodb-native/ReadPreference.js":"\"use strict\";const mongodb=require(\"mongodb\"),ReadPref=mongodb.ReadPreference;module.exports=function(e,r){if(Array.isArray(e)&&(r=e[1],e=e[0]),e instanceof ReadPref)return e;switch(e){case\"p\":e=\"primary\";break;case\"pp\":e=\"primaryPreferred\";break;case\"s\":e=\"secondary\";break;case\"sp\":e=\"secondaryPreferred\";break;case\"n\":e=\"nearest\"}return new ReadPref(e,r)};","node_modules/mongoose/lib/drivers/node-mongodb-native/connection.js":"\"use strict\";const MongooseConnection=require(\"../../connection\"),STATES=require(\"../../connectionstate\");function NativeConnection(){MongooseConnection.apply(this,arguments),this._listening=!1}function listen(e){e._listening||(e._listening=!0,e.client.on(\"close\",function(t){if(!e._closeCalled){if(e._closeCalled=e.client._closeCalled,e.db.serverConfig.autoReconnect)return e.readyState=STATES.disconnected,void e.emit(\"close\");e.onClose(t)}}),e.client.on(\"error\",function(t){e.emit(\"error\",t)}),e.client.s.options.useUnifiedTopology||(e.db.on(\"reconnect\",function(){e.readyState=STATES.connected,e.emit(\"reconnect\"),e.emit(\"reconnected\"),e.onOpen()}),e.db.on(\"open\",function(t,n){STATES.disconnected===e.readyState&&n&&n.databaseName&&(e.readyState=STATES.connected,e.emit(\"reconnect\"),e.emit(\"reconnected\"))})),e.client.on(\"timeout\",function(t){e.emit(\"timeout\",t)}),e.client.on(\"parseError\",function(t){e.emit(\"parseError\",t)}))}NativeConnection.STATES=STATES,NativeConnection.prototype.__proto__=MongooseConnection.prototype,NativeConnection.prototype.useDb=function(e,t){if((t=t||{}).useCache&&this.relatedDbs[e])return this.relatedDbs[e];const n=new this.constructor;n.name=e,n.base=this.base,n.collections={},n.models={},n.replica=this.replica,n.config=Object.assign({},this.config,n.config),n.name=this.name,n.options=this.options,n._readyState=this._readyState,n._closeCalled=this._closeCalled,n._hasOpened=this._hasOpened,n._listening=!1,n.host=this.host,n.port=this.port,n.user=this.user,n.pass=this.pass;const o=this;function i(){n.client=o.client;const i={};t.hasOwnProperty(\"noListener\")&&(i.noListener=t.noListener),n.db=o.client.db(e,i),n.onOpen(),!0!==t.noListener&&listen(n)}return n.client=o.client,this.db&&this._readyState===STATES.connected?i():this.once(\"connected\",i),n.name=e,!0!==t.noListener&&this.otherDbs.push(n),n.otherDbs.push(this),t&&t.useCache&&(this.relatedDbs[n.name]=n,n.relatedDbs=this.relatedDbs),n},NativeConnection.prototype.doClose=function(e,t){return null==this.client?(process.nextTick(()=>t()),this):(this.client.close(e,(e,n)=>{setTimeout(()=>t(e,n),1)}),this)},module.exports=NativeConnection;","node_modules/mongodb/lib/core/index.js":"\"use strict\";let BSON=require(\"bson\");const require_optional=require(\"optional-require\")(require),EJSON=require(\"./utils\").retrieveEJSON();try{const r=require_optional(\"bson-ext\");r&&(BSON=r)}catch(r){}module.exports={MongoError:require(\"./error\").MongoError,MongoNetworkError:require(\"./error\").MongoNetworkError,MongoParseError:require(\"./error\").MongoParseError,MongoTimeoutError:require(\"./error\").MongoTimeoutError,MongoServerSelectionError:require(\"./error\").MongoServerSelectionError,MongoWriteConcernError:require(\"./error\").MongoWriteConcernError,Connection:require(\"./connection/connection\"),Server:require(\"./topologies/server\"),ReplSet:require(\"./topologies/replset\"),Mongos:require(\"./topologies/mongos\"),Logger:require(\"./connection/logger\"),Cursor:require(\"./cursor\").CoreCursor,ReadPreference:require(\"./topologies/read_preference\"),Sessions:require(\"./sessions\"),BSON:BSON,EJSON:EJSON,Topology:require(\"./sdam/topology\").Topology,Query:require(\"./connection/commands\").Query,MongoCredentials:require(\"./auth/mongo_credentials\").MongoCredentials,defaultAuthProviders:require(\"./auth/defaultAuthProviders\").defaultAuthProviders,MongoCR:require(\"./auth/mongocr\"),X509:require(\"./auth/x509\"),Plain:require(\"./auth/plain\"),GSSAPI:require(\"./auth/gssapi\"),ScramSHA1:require(\"./auth/scram\").ScramSHA1,ScramSHA256:require(\"./auth/scram\").ScramSHA256,parseConnectionString:require(\"./uri_parser\")};","node_modules/mongodb/lib/apm.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter;class Instrumentation extends EventEmitter{constructor(){super()}instrument(t,n){this.$MongoClient=t;const e=this.$prototypeConnect=t.prototype.connect,o=this;t.prototype.connect=function(t){return this.s.options.monitorCommands=!0,this.on(\"commandStarted\",t=>o.emit(\"started\",t)),this.on(\"commandSucceeded\",t=>o.emit(\"succeeded\",t)),this.on(\"commandFailed\",t=>o.emit(\"failed\",t)),e.call(this,t)},\"function\"==typeof n&&n(null,this)}uninstrument(){this.$MongoClient.prototype.connect=this.$prototypeConnect}}module.exports=Instrumentation;","node_modules/mongodb/lib/mongo_client.js":"\"use strict\";const ChangeStream=require(\"./change_stream\"),Db=require(\"./db\"),EventEmitter=require(\"events\").EventEmitter,inherits=require(\"util\").inherits,MongoError=require(\"./core\").MongoError,deprecate=require(\"util\").deprecate,WriteConcern=require(\"./write_concern\"),MongoDBNamespace=require(\"./utils\").MongoDBNamespace,ReadPreference=require(\"./core/topologies/read_preference\"),maybePromise=require(\"./utils\").maybePromise,NativeTopology=require(\"./topologies/native_topology\"),connect=require(\"./operations/connect\").connect,validOptions=require(\"./operations/connect\").validOptions;function MongoClient(e,o){if(!(this instanceof MongoClient))return new MongoClient(e,o);EventEmitter.call(this),o&&o.autoEncryption&&require(\"./encrypter\"),this.s={url:e,options:o||{},promiseLibrary:o&&o.promiseLibrary||Promise,dbCache:new Map,sessions:new Set,writeConcern:WriteConcern.fromOptions(o),readPreference:ReadPreference.fromOptions(o)||ReadPreference.primary,namespace:new MongoDBNamespace(\"admin\")}}inherits(MongoClient,EventEmitter),Object.defineProperty(MongoClient.prototype,\"writeConcern\",{enumerable:!0,get:function(){return this.s.writeConcern}}),Object.defineProperty(MongoClient.prototype,\"readPreference\",{enumerable:!0,get:function(){return this.s.readPreference}}),MongoClient.prototype.connect=function(e){if(\"string\"==typeof e)throw new TypeError(\"`connect` only accepts a callback\");const o=this;return maybePromise(this,e,e=>{const t=validOptions(o.s.options);if(t)return e(t);connect(o,o.s.url,o.s.options,t=>{if(t)return e(t);e(null,o)})})},MongoClient.prototype.logout=deprecate(function(e,o){\"function\"==typeof e&&(o=e,e={}),\"function\"==typeof o&&o(null,!0)},\"Multiple authentication is prohibited on a connected client, please only authenticate once per MongoClient\"),MongoClient.prototype.close=function(e,o){\"function\"==typeof e&&(o=e,e=!1);const t=this;return maybePromise(this,o,o=>{const n=e=>{if(t.emit(\"close\",t),!(t.topology instanceof NativeTopology))for(const e of t.s.dbCache)e[1].emit(\"close\",t);t.removeAllListeners(\"close\"),o(e)};null!=t.topology?t.topology.close(e,o=>{const r=t.topology.s.options.encrypter;if(r)return r.close(t,e,e=>{n(o||e)});n(o)}):n()})},MongoClient.prototype.db=function(e,o){o=o||{},e||(e=this.s.options.dbName);const t=Object.assign({},this.s.options,o);if(this.s.dbCache.has(e)&&!0!==t.returnNonCachedInstance)return this.s.dbCache.get(e);if(t.promiseLibrary=this.s.promiseLibrary,!this.topology)throw new MongoError(\"MongoClient must be connected before calling MongoClient.prototype.db\");const n=new Db(e,this.topology,t);return this.s.dbCache.set(e,n),n},MongoClient.prototype.isConnected=function(e){return e=e||{},!!this.topology&&this.topology.isConnected(e)},MongoClient.connect=function(e,o,t){const n=Array.prototype.slice.call(arguments,1);return t=\"function\"==typeof n[n.length-1]?n.pop():void 0,new MongoClient(e,(n.length?n.shift():null)||{}).connect(t)},MongoClient.prototype.startSession=function(e){if(e=Object.assign({explicit:!0},e),!this.topology)throw new MongoError(\"Must connect to a server before calling this method\");return this.topology.startSession(e,this.s.options)},MongoClient.prototype.withSession=function(e,o){\"function\"==typeof e&&(o=e,e=void 0);const t=this.startSession(e);let n=(e,o,r)=>{if(n=(()=>{throw new ReferenceError(\"cleanupHandler was called too many times\")}),r=Object.assign({throw:!0},r),t.endSession(),e){if(r.throw)throw e;return Promise.reject(e)}};try{const e=o(t);return Promise.resolve(e).then(e=>n(null,e)).catch(e=>n(e,null,{throw:!0}))}catch(e){return n(e,null,{throw:!1})}},MongoClient.prototype.watch=function(e,o){return e=e||[],o=o||{},Array.isArray(e)||(o=e,e=[]),new ChangeStream(this,e,o)},MongoClient.prototype.getLogger=function(){return this.s.options.logger},module.exports=MongoClient;","node_modules/mongodb/lib/bulk/common.js":"\"use strict\";const Long=require(\"../core\").BSON.Long,MongoError=require(\"../core\").MongoError,ObjectID=require(\"../core\").BSON.ObjectID,BSON=require(\"../core\").BSON,MongoWriteConcernError=require(\"../core\").MongoWriteConcernError,emitWarningOnce=require(\"../utils\").emitWarningOnce,toError=require(\"../utils\").toError,handleCallback=require(\"../utils\").handleCallback,applyRetryableWrites=require(\"../utils\").applyRetryableWrites,applyWriteConcern=require(\"../utils\").applyWriteConcern,executeLegacyOperation=require(\"../utils\").executeLegacyOperation,isPromiseLike=require(\"../utils\").isPromiseLike,hasAtomicOperators=require(\"../utils\").hasAtomicOperators,maxWireVersion=require(\"../core/utils\").maxWireVersion,WRITE_CONCERN_ERROR=64,INSERT=1,UPDATE=2,REMOVE=3,bson=new BSON([BSON.Binary,BSON.Code,BSON.DBRef,BSON.Decimal128,BSON.Double,BSON.Int32,BSON.Long,BSON.Map,BSON.MaxKey,BSON.MinKey,BSON.ObjectId,BSON.BSONRegExp,BSON.Symbol,BSON.Timestamp]);class Batch{constructor(e,t){this.originalZeroIndex=t,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}}class BulkWriteResult{constructor(e){this.result=e}get insertedCount(){return\"number\"!=typeof this.result.nInserted?0:this.result.nInserted}get matchedCount(){return\"number\"!=typeof this.result.nMatched?0:this.result.nMatched}get modifiedCount(){return\"number\"!=typeof this.result.nModified?0:this.result.nModified}get deletedCount(){return\"number\"!=typeof this.result.nRemoved?0:this.result.nRemoved}get upsertedCount(){return this.result.upserted?this.result.upserted.length:0}get upsertedIds(){const e={};for(const t of this.result.upserted?this.result.upserted:[])e[t.index]=t._id;return e}get insertedIds(){const e={};for(const t of this.result.insertedIds?this.result.insertedIds:[])e[t.index]=t._id;return e}get ok(){return this.result.ok}get nInserted(){return this.result.nInserted}get nUpserted(){return this.result.nUpserted}get nMatched(){return this.result.nMatched}get nModified(){return this.result.nModified}get nRemoved(){return this.result.nRemoved}getInsertedIds(){return this.result.insertedIds}getUpsertedIds(){return this.result.upserted}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:null}getWriteErrors(){return this.result.writeErrors}getLastOp(){return this.result.lastOp}getWriteConcernError(){if(0===this.result.writeConcernErrors.length)return null;if(1===this.result.writeConcernErrors.length)return this.result.writeConcernErrors[0];{let e=\"\";for(let t=0;t<this.result.writeConcernErrors.length;t++){e+=this.result.writeConcernErrors[t].errmsg,0===t&&(e+=\" and \")}return new WriteConcernError({errmsg:e,code:WRITE_CONCERN_ERROR})}}toJSON(){return this.result}toString(){return`BulkWriteResult(${this.toJSON(this.result)})`}isOk(){return 1===this.result.ok}}class WriteConcernError{constructor(e){this.err=e}get code(){return this.err.code}get errmsg(){return this.err.errmsg}toJSON(){return{code:this.err.code,errmsg:this.err.errmsg}}toString(){return`WriteConcernError(${this.err.errmsg})`}}class WriteError{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}}function mergeBatchResults(e,t,r,s){if(r)s=r;else if(s&&s.result)s=s.result;else if(null==s)return;if(0===s.ok&&1===t.ok){t.ok=0;const r={index:0,code:s.code||0,errmsg:s.message,op:e.operations[0]};return void t.writeErrors.push(new WriteError(r))}if(0===s.ok&&0===t.ok)return;if(s.opTime||s.lastOp){const e=s.lastOp||s.opTime;let r=null,n=null;if(e&&\"Timestamp\"===e._bsontype)null==t.lastOp?t.lastOp=e:e.greaterThan(t.lastOp)&&(t.lastOp=e);else{t.lastOp&&(r=\"number\"==typeof t.lastOp.ts?Long.fromNumber(t.lastOp.ts):t.lastOp.ts,n=\"number\"==typeof t.lastOp.t?Long.fromNumber(t.lastOp.t):t.lastOp.t);const s=\"number\"==typeof e.ts?Long.fromNumber(e.ts):e.ts,i=\"number\"==typeof e.t?Long.fromNumber(e.t):e.t;null==t.lastOp?t.lastOp=e:s.greaterThan(r)?t.lastOp=e:s.equals(r)&&i.greaterThan(n)&&(t.lastOp=e)}}e.batchType===INSERT&&s.n&&(t.nInserted=t.nInserted+s.n),e.batchType===REMOVE&&s.n&&(t.nRemoved=t.nRemoved+s.n);let n=0;if(Array.isArray(s.upserted)){n=s.upserted.length;for(let r=0;r<s.upserted.length;r++)t.upserted.push({index:s.upserted[r].index+e.originalZeroIndex,_id:s.upserted[r]._id})}else s.upserted&&(n=1,t.upserted.push({index:e.originalZeroIndex,_id:s.upserted}));if(e.batchType===UPDATE&&s.n){const e=s.nModified;t.nUpserted=t.nUpserted+n,t.nMatched=t.nMatched+(s.n-n),t.nModified=\"number\"==typeof e?t.nModified+e:null}if(Array.isArray(s.writeErrors))for(let r=0;r<s.writeErrors.length;r++){const n={index:e.originalIndexes[s.writeErrors[r].index],code:s.writeErrors[r].code,errmsg:s.writeErrors[r].errmsg,op:e.operations[s.writeErrors[r].index]};t.writeErrors.push(new WriteError(n))}s.writeConcernError&&t.writeConcernErrors.push(new WriteConcernError(s.writeConcernError))}function executeCommands(e,t,r){if(0===e.s.batches.length)return handleCallback(r,null,new BulkWriteResult(e.s.bulkResult));const s=e.s.batches.shift();e.finalOptionsHandler({options:t,batch:s,resultHandler:function(n,i){if((n&&n.driver||n&&n.message)&&!(n instanceof MongoWriteConcernError))return handleCallback(r,n);if(n&&(n.ok=0),n instanceof MongoWriteConcernError)return handleMongoWriteConcernError(s,e.s.bulkResult,n,r);const o=new BulkWriteResult(e.s.bulkResult);if(null!=mergeBatchResults(s,e.s.bulkResult,n,i))return handleCallback(r,null,o);e.handleWriteError(r,o)||executeCommands(e,t,r)}},r)}function handleMongoWriteConcernError(e,t,r,s){mergeBatchResults(e,t,null,r.result);const n=new WriteConcernError({errmsg:r.result.writeConcernError.errmsg,code:r.result.writeConcernError.result});return handleCallback(s,new BulkWriteError(toError(n),new BulkWriteResult(t)),null)}class BulkWriteError extends MongoError{constructor(e,t){super(e.err||e.errmsg||e.errMessage||e),Object.assign(this,e),this.name=\"BulkWriteError\",this.result=t}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}}class FindOperators{constructor(e){this.s=e.s}update(e){const t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return e.hint&&(r.hint=e.hint),this.s.currentOp=null,this.s.options.addToOperationsList(this,UPDATE,r)}updateOne(e){const t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};if(e.hint&&(r.hint=e.hint),!hasAtomicOperators(e))throw new TypeError(\"Update document requires atomic operators\");return this.s.currentOp=null,this.s.options.addToOperationsList(this,UPDATE,r)}replaceOne(e){const t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,r={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};if(e.hint&&(r.hint=e.hint),hasAtomicOperators(e))throw new TypeError(\"Replacement document must not use atomic operators\");return this.s.currentOp=null,this.s.options.addToOperationsList(this,UPDATE,r)}upsert(){return this.s.currentOp.upsert=!0,this}deleteOne(){const e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,this.s.options.addToOperationsList(this,REMOVE,e)}delete(){const e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,this.s.options.addToOperationsList(this,REMOVE,e)}removeOne(){return emitWarningOnce(\"bulk operation `removeOne` has been deprecated, please use `deleteOne`\"),this.deleteOne()}remove(){return emitWarningOnce(\"bulk operation `remove` has been deprecated, please use `delete`\"),this.delete()}}class BulkOperationBase{constructor(e,t,r,s){this.isOrdered=s,r=null==r?{}:r;const n=t.s.namespace,i=e.bson,o=e.lastIsMaster(),u=!(!e.s.options||!e.s.options.autoEncrypter),l=o&&o.maxBsonObjectSize?o.maxBsonObjectSize:16777216,a=u?2097152:l,c=o&&o.maxWriteBatchSize?o.maxWriteBatchSize:1e3,h=(c-1).toString(10).length+2;let d=Object.assign({},r);d=applyRetryableWrites(d,t.s.db);const p=(d=applyWriteConcern(d,{collection:t},r)).writeConcern,O=r.promiseLibrary||Promise;this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,batches:[],writeConcern:p,maxBsonObjectSize:l,maxBatchSizeBytes:a,maxWriteBatchSize:c,maxKeySize:h,namespace:n,bson:i,topology:e,options:d,currentOp:null,executed:!1,collection:t,promiseLibrary:O,err:null,checkKeys:\"boolean\"!=typeof r.checkKeys||r.checkKeys},!0===r.bypassDocumentValidation&&(this.s.bypassDocumentValidation=!0)}insert(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new ObjectID),this.s.options.addToOperationsList(this,INSERT,e)}find(e){if(!e)throw toError(\"Bulk find operation must specify a selector\");return this.s.currentOp={selector:e},new FindOperators(this)}raw(e){const t=Object.keys(e)[0],r=\"boolean\"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,this.s.options.addToOperationsList(this,UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){if(e.replaceOne&&hasAtomicOperators(e[t].replacement))throw new TypeError(\"Replacement document must not use atomic operators\");if((e.updateOne||e.updateMany)&&!hasAtomicOperators(e[t].update))throw new TypeError(\"Update document requires atomic operators\");const r=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:r};if(e[t].hint&&(s.hint=e[t].hint),this.isOrdered?(s.upsert=!!e[t].upsert,e.collation&&(s.collation=e.collation)):e[t].upsert&&(s.upsert=!0),e[t].arrayFilters){if(maxWireVersion(this.s.topology)<6)throw new TypeError(\"arrayFilters are only supported on MongoDB 3.6+\");s.arrayFilters=e[t].arrayFilters}return this.s.options.addToOperationsList(this,UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,this.s.options.addToOperationsList(this,REMOVE,e[t]);if(e.deleteOne||e.deleteMany){const r=e.deleteOne?1:0,s={q:e[t].filter,limit:r};return e[t].hint&&(s.hint=e[t].hint),this.isOrdered&&e.collation&&(s.collation=e.collation),this.s.options.addToOperationsList(this,REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==r&&null==e.insertOne._id&&(e.insertOne._id=new ObjectID),this.s.options.addToOperationsList(this,INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==r&&null==e.insertOne.document._id&&(e.insertOne.document._id=new ObjectID),this.s.options.addToOperationsList(this,INSERT,e.insertOne.document);if(!e.insertMany)throw toError(\"bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany\");emitWarningOnce(\"bulk operation `insertMany` has been deprecated; use multiple `insertOne` ops instead\");for(let t=0;t<e.insertMany.length;t++)!0!==r&&null==e.insertMany[t]._id&&(e.insertMany[t]._id=new ObjectID),this.s.options.addToOperationsList(this,INSERT,e.insertMany[t])}_handleEarlyError(e,t){if(\"function\"!=typeof t)return this.s.promiseLibrary.reject(e);t(e,null)}bulkExecute(e,t,r){if(\"function\"==typeof t&&(r=t,t={}),t=t||{},\"function\"==typeof e?r=e:e&&\"object\"==typeof e&&(this.s.writeConcern=e),this.s.executed){const e=toError(\"batch cannot be re-executed\");return this._handleEarlyError(e,r)}if(this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),0===this.s.batches.length){const e=toError(\"Invalid Operation, no operations specified\");return this._handleEarlyError(e,r)}return{options:t,callback:r}}execute(e,t,r){const s=this.bulkExecute(e,t,r);return!s||isPromiseLike(s)?s:(t=s.options,r=s.callback,executeLegacyOperation(this.s.topology,executeCommands,[this,t,r]))}finalOptionsHandler(e,t){const r=Object.assign({ordered:this.isOrdered},e.options);null!=this.s.writeConcern&&(r.writeConcern=this.s.writeConcern),!0!==r.bypassDocumentValidation&&delete r.bypassDocumentValidation,this.operationId&&(e.resultHandler.operationId=this.operationId),this.s.options.serializeFunctions&&(r.serializeFunctions=!0),this.s.options.ignoreUndefined&&(r.ignoreUndefined=!0),!0===this.s.bypassDocumentValidation&&(r.bypassDocumentValidation=!0),!1===this.s.checkKeys&&(r.checkKeys=!1),r.retryWrites&&(e.batch.batchType===UPDATE&&(r.retryWrites=r.retryWrites&&!e.batch.operations.some(e=>e.multi)),e.batch.batchType===REMOVE&&(r.retryWrites=r.retryWrites&&!e.batch.operations.some(e=>0===e.limit)));try{e.batch.batchType===INSERT?this.s.topology.insert(this.s.namespace,e.batch.operations,r,e.resultHandler):e.batch.batchType===UPDATE?this.s.topology.update(this.s.namespace,e.batch.operations,r,e.resultHandler):e.batch.batchType===REMOVE&&this.s.topology.remove(this.s.namespace,e.batch.operations,r,e.resultHandler)}catch(r){r.ok=0,handleCallback(t,null,mergeBatchResults(e.batch,this.s.bulkResult,r,null))}}handleWriteError(e,t){if(this.s.bulkResult.writeErrors.length>0){const r=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:\"write operation failed\";return handleCallback(e,new BulkWriteError(toError({message:r,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors}),t),null),!0}if(t.getWriteConcernError())return handleCallback(e,new BulkWriteError(toError(t.getWriteConcernError()),t),null),!0}}Object.defineProperty(BulkOperationBase.prototype,\"length\",{enumerable:!0,get:function(){return this.s.currentIndex}}),module.exports={Batch:Batch,BulkOperationBase:BulkOperationBase,bson:bson,INSERT:INSERT,UPDATE:UPDATE,REMOVE:REMOVE,BulkWriteError:BulkWriteError};","node_modules/mongodb/lib/admin.js":"\"use strict\";const applyWriteConcern=require(\"./utils\").applyWriteConcern,AddUserOperation=require(\"./operations/add_user\"),ExecuteDbAdminCommandOperation=require(\"./operations/execute_db_admin_command\"),RemoveUserOperation=require(\"./operations/remove_user\"),ValidateCollectionOperation=require(\"./operations/validate_collection\"),ListDatabasesOperation=require(\"./operations/list_databases\"),executeOperation=require(\"./operations/execute_operation\");function Admin(t,e,o){if(!(this instanceof Admin))return new Admin(t,e);this.s={db:t,topology:e,promiseLibrary:o}}Admin.prototype.command=function(t,e,o){const n=Array.prototype.slice.call(arguments,1);o=\"function\"==typeof n[n.length-1]?n.pop():void 0,e=n.length?n.shift():{};const i=new ExecuteDbAdminCommandOperation(this.s.db,t,e);return executeOperation(this.s.db.s.topology,i,o)},Admin.prototype.buildInfo=function(t,e){\"function\"==typeof t&&(e=t,t={}),t=t||{};const o=new ExecuteDbAdminCommandOperation(this.s.db,{buildinfo:1},t);return executeOperation(this.s.db.s.topology,o,e)},Admin.prototype.serverInfo=function(t,e){\"function\"==typeof t&&(e=t,t={}),t=t||{};const o=new ExecuteDbAdminCommandOperation(this.s.db,{buildinfo:1},t);return executeOperation(this.s.db.s.topology,o,e)},Admin.prototype.serverStatus=function(t,e){\"function\"==typeof t&&(e=t,t={}),t=t||{};const o=new ExecuteDbAdminCommandOperation(this.s.db,{serverStatus:1},t);return executeOperation(this.s.db.s.topology,o,e)},Admin.prototype.ping=function(t,e){\"function\"==typeof t&&(e=t,t={}),t=t||{};const o=new ExecuteDbAdminCommandOperation(this.s.db,{ping:1},t);return executeOperation(this.s.db.s.topology,o,e)},Admin.prototype.addUser=function(t,e,o,n){const i=Array.prototype.slice.call(arguments,2);n=\"function\"==typeof i[i.length-1]?i.pop():void 0,\"string\"==typeof t&&null!=e&&\"object\"==typeof e&&(o=e,e=null),o=i.length?i.shift():{},o=Object.assign({},o),(o=applyWriteConcern(o,{db:this.s.db})).dbName=\"admin\";const r=new AddUserOperation(this.s.db,t,e,o);return executeOperation(this.s.db.s.topology,r,n)},Admin.prototype.removeUser=function(t,e,o){const n=Array.prototype.slice.call(arguments,1);o=\"function\"==typeof n[n.length-1]?n.pop():void 0,e=n.length?n.shift():{},e=Object.assign({},e),(e=applyWriteConcern(e,{db:this.s.db})).dbName=\"admin\";const i=new RemoveUserOperation(this.s.db,t,e);return executeOperation(this.s.db.s.topology,i,o)},Admin.prototype.validateCollection=function(t,e,o){\"function\"==typeof e&&(o=e,e={});const n=new ValidateCollectionOperation(this,t,e=e||{});return executeOperation(this.s.db.s.topology,n,o)},Admin.prototype.listDatabases=function(t,e){return\"function\"==typeof t&&(e=t,t={}),t=t||{},executeOperation(this.s.db.s.topology,new ListDatabasesOperation(this.s.db,t),e)},Admin.prototype.replSetGetStatus=function(t,e){\"function\"==typeof t&&(e=t,t={}),t=t||{};const o=new ExecuteDbAdminCommandOperation(this.s.db,{replSetGetStatus:1},t);return executeOperation(this.s.db.s.topology,o,e)},module.exports=Admin;","node_modules/mongodb/lib/db.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,inherits=require(\"util\").inherits,getSingleProperty=require(\"./utils\").getSingleProperty,CommandCursor=require(\"./command_cursor\"),handleCallback=require(\"./utils\").handleCallback,filterOptions=require(\"./utils\").filterOptions,toError=require(\"./utils\").toError,ReadPreference=require(\"./core\").ReadPreference,MongoError=require(\"./core\").MongoError,ObjectID=require(\"./core\").ObjectID,Logger=require(\"./core\").Logger,Collection=require(\"./collection\"),conditionallyMergeWriteConcern=require(\"./utils\").conditionallyMergeWriteConcern,executeLegacyOperation=require(\"./utils\").executeLegacyOperation,ChangeStream=require(\"./change_stream\"),deprecate=require(\"util\").deprecate,deprecateOptions=require(\"./utils\").deprecateOptions,MongoDBNamespace=require(\"./utils\").MongoDBNamespace,CONSTANTS=require(\"./constants\"),WriteConcern=require(\"./write_concern\"),ReadConcern=require(\"./read_concern\"),AggregationCursor=require(\"./aggregation_cursor\"),createListener=require(\"./operations/db_ops\").createListener,ensureIndex=require(\"./operations/db_ops\").ensureIndex,evaluate=require(\"./operations/db_ops\").evaluate,profilingInfo=require(\"./operations/db_ops\").profilingInfo,validateDatabaseName=require(\"./operations/db_ops\").validateDatabaseName,AggregateOperation=require(\"./operations/aggregate\"),AddUserOperation=require(\"./operations/add_user\"),CollectionsOperation=require(\"./operations/collections\"),CommandOperation=require(\"./operations/command\"),RunCommandOperation=require(\"./operations/run_command\"),CreateCollectionOperation=require(\"./operations/create_collection\"),CreateIndexesOperation=require(\"./operations/create_indexes\"),DropCollectionOperation=require(\"./operations/drop\").DropCollectionOperation,DropDatabaseOperation=require(\"./operations/drop\").DropDatabaseOperation,ExecuteDbAdminCommandOperation=require(\"./operations/execute_db_admin_command\"),IndexInformationOperation=require(\"./operations/index_information\"),ListCollectionsOperation=require(\"./operations/list_collections\"),ProfilingLevelOperation=require(\"./operations/profiling_level\"),RemoveUserOperation=require(\"./operations/remove_user\"),RenameOperation=require(\"./operations/rename\"),SetProfilingLevelOperation=require(\"./operations/set_profiling_level\"),executeOperation=require(\"./operations/execute_operation\"),legalOptionNames=[\"w\",\"wtimeout\",\"fsync\",\"j\",\"writeConcern\",\"readPreference\",\"readPreferenceTags\",\"native_parser\",\"forceServerObjectId\",\"pkFactory\",\"serializeFunctions\",\"raw\",\"bufferMaxEntries\",\"authSource\",\"ignoreUndefined\",\"promoteLongs\",\"promiseLibrary\",\"readConcern\",\"retryMiliSeconds\",\"numberOfRetries\",\"parentDb\",\"noListener\",\"loggerLevel\",\"logger\",\"promoteBuffers\",\"promoteLongs\",\"promoteValues\",\"compression\",\"retryWrites\"];function Db(e,t,r){if(r=r||{},!(this instanceof Db))return new Db(e,t,r);EventEmitter.call(this);const o=r.promiseLibrary||Promise;(r=filterOptions(r,legalOptionNames)).promiseLibrary=o,this.s={dbCache:{},children:[],topology:t,options:r,logger:Logger(\"Db\",r),bson:t?t.bson:null,readPreference:ReadPreference.fromOptions(r),bufferMaxEntries:\"number\"==typeof r.bufferMaxEntries?r.bufferMaxEntries:-1,parentDb:r.parentDb||null,pkFactory:r.pkFactory||ObjectID,nativeParser:r.nativeParser||r.native_parser,promiseLibrary:o,noListener:\"boolean\"==typeof r.noListener&&r.noListener,readConcern:ReadConcern.fromOptions(r),writeConcern:WriteConcern.fromOptions(r),namespace:new MongoDBNamespace(e)},validateDatabaseName(e),getSingleProperty(this,\"serverConfig\",this.s.topology),getSingleProperty(this,\"bufferMaxEntries\",this.s.bufferMaxEntries),getSingleProperty(this,\"databaseName\",this.s.namespace.db),r.parentDb||this.s.noListener||(t.on(\"error\",createListener(this,\"error\",this)),t.on(\"timeout\",createListener(this,\"timeout\",this)),t.on(\"close\",createListener(this,\"close\",this)),t.on(\"parseError\",createListener(this,\"parseError\",this)),t.once(\"open\",createListener(this,\"open\",this)),t.once(\"fullsetup\",createListener(this,\"fullsetup\",this)),t.once(\"all\",createListener(this,\"all\",this)),t.on(\"reconnect\",createListener(this,\"reconnect\",this)))}inherits(Db,EventEmitter),Db.prototype.on=deprecate(function(){return Db.super_.prototype.on.apply(this,arguments)},\"Listening to events on the Db class has been deprecated and will be removed in the next major version.\"),Db.prototype.once=deprecate(function(){return Db.super_.prototype.once.apply(this,arguments)},\"Listening to events on the Db class has been deprecated and will be removed in the next major version.\"),Object.defineProperty(Db.prototype,\"topology\",{enumerable:!0,get:function(){return this.s.topology}}),Object.defineProperty(Db.prototype,\"options\",{enumerable:!0,get:function(){return this.s.options}}),Object.defineProperty(Db.prototype,\"slaveOk\",{enumerable:!0,get:function(){return null!=this.s.options.readPreference&&(\"primary\"!==this.s.options.readPreference||\"primary\"!==this.s.options.readPreference.mode)}}),Object.defineProperty(Db.prototype,\"readConcern\",{enumerable:!0,get:function(){return this.s.readConcern}}),Object.defineProperty(Db.prototype,\"readPreference\",{enumerable:!0,get:function(){return null==this.s.readPreference?ReadPreference.primary:this.s.readPreference}}),Object.defineProperty(Db.prototype,\"writeConcern\",{enumerable:!0,get:function(){return this.s.writeConcern}}),Object.defineProperty(Db.prototype,\"namespace\",{enumerable:!0,get:function(){return this.s.namespace.toString()}}),Db.prototype.command=function(e,t,r){\"function\"==typeof t&&(r=t,t={}),t=Object.assign({},t);const o=new RunCommandOperation(this,e,t);return executeOperation(this.s.topology,o,r)},Db.prototype.aggregate=function(e,t,r){\"function\"==typeof t&&(r=t,t={}),null==t&&null==r&&(t={});const o=new AggregationCursor(this.s.topology,new AggregateOperation(this,e,t),t);if(\"function\"!=typeof r)return o;r(null,o)},Db.prototype.admin=function(){return new(require(\"./admin\"))(this,this.s.topology,this.s.promiseLibrary)};const COLLECTION_OPTION_KEYS=[\"pkFactory\",\"readPreference\",\"serializeFunctions\",\"strict\",\"readConcern\",\"ignoreUndefined\",\"promoteValues\",\"promoteBuffers\",\"promoteLongs\"];Db.prototype.collection=function(e,t,r){\"function\"==typeof t&&(r=t,t={}),t=t||{},(t=Object.assign({},t)).promiseLibrary=this.s.promiseLibrary,t.readConcern=t.readConcern?new ReadConcern(t.readConcern.level):this.readConcern,this.s.options.ignoreUndefined&&(t.ignoreUndefined=this.s.options.ignoreUndefined);for(const e of COLLECTION_OPTION_KEYS)e in t||void 0===this.s.options[e]||(t[e]=this.s.options[e]);if(null==(t=conditionallyMergeWriteConcern(t,this.s.options))||!t.strict)try{const o=new Collection(this,this.s.topology,this.databaseName,e,this.s.pkFactory,t);return r&&r(null,o),o}catch(e){if(e instanceof MongoError&&r)return r(e);throw e}if(\"function\"!=typeof r)throw toError(`A callback is required in strict mode. While getting collection ${e}`);if(this.serverConfig&&this.serverConfig.isDestroyed())return r(new MongoError(\"topology was destroyed\"));const o=Object.assign({},t,{nameOnly:!0});this.listCollections({name:e},o).toArray((o,n)=>{if(null!=o)return handleCallback(r,o,null);if(0===n.length)return handleCallback(r,toError(`Collection ${e} does not exist. Currently in strict mode.`),null);try{return handleCallback(r,null,new Collection(this,this.s.topology,this.databaseName,e,this.s.pkFactory,t))}catch(o){return handleCallback(r,o,null)}})},Db.prototype.createCollection=deprecateOptions({name:\"Db.createCollection\",deprecatedOptions:[\"autoIndexId\",\"strict\",\"w\",\"wtimeout\",\"j\"],optionsIndex:1},function(e,t,r){\"function\"==typeof t&&(r=t,t={}),(t=t||{}).promiseLibrary=t.promiseLibrary||this.s.promiseLibrary,t.readConcern=t.readConcern?new ReadConcern(t.readConcern.level):this.readConcern;const o=new CreateCollectionOperation(this,e,t);return executeOperation(this.s.topology,o,r)}),Db.prototype.stats=function(e,t){\"function\"==typeof e&&(t=e,e={});const r={dbStats:!0};null!=(e=e||{}).scale&&(r.scale=e.scale),null==e.readPreference&&this.s.readPreference&&(e.readPreference=this.s.readPreference);const o=new CommandOperation(this,e,null,r);return executeOperation(this.s.topology,o,t)},Db.prototype.listCollections=function(e,t){return e=e||{},t=t||{},new CommandCursor(this.s.topology,new ListCollectionsOperation(this,e,t),t)},Db.prototype.eval=deprecate(function(e,t,r,o){const n=Array.prototype.slice.call(arguments,1);return o=\"function\"==typeof n[n.length-1]?n.pop():void 0,t=n.length?n.shift():t,r=n.length&&n.shift()||{},executeLegacyOperation(this.s.topology,evaluate,[this,e,t,r,o])},\"Db.eval is deprecated as of MongoDB version 3.2\"),Db.prototype.renameCollection=function(e,t,r,o){\"function\"==typeof r&&(o=r,r={}),(r=Object.assign({},r,{readPreference:ReadPreference.PRIMARY})).new_collection=!0;const n=new RenameOperation(this.collection(e),t,r);return executeOperation(this.s.topology,n,o)},Db.prototype.dropCollection=function(e,t,r){\"function\"==typeof t&&(r=t,t={});const o=new DropCollectionOperation(this,e,t=t||{});return executeOperation(this.s.topology,o,r)},Db.prototype.dropDatabase=function(e,t){\"function\"==typeof e&&(t=e,e={});const r=new DropDatabaseOperation(this,e=e||{});return executeOperation(this.s.topology,r,t)},Db.prototype.collections=function(e,t){\"function\"==typeof e&&(t=e,e={});const r=new CollectionsOperation(this,e=e||{});return executeOperation(this.s.topology,r,t)},Db.prototype.executeDbAdminCommand=function(e,t,r){\"function\"==typeof t&&(r=t,t={}),(t=t||{}).readPreference=ReadPreference.resolve(this,t);const o=new ExecuteDbAdminCommandOperation(this,e,t);return executeOperation(this.s.topology,o,r)},Db.prototype.createIndex=function(e,t,r,o){\"function\"==typeof r&&(o=r,r={}),r=r?Object.assign({},r):{};const n=new CreateIndexesOperation(this,e,t,r);return executeOperation(this.s.topology,n,o)},Db.prototype.ensureIndex=deprecate(function(e,t,r,o){return\"function\"==typeof r&&(o=r,r={}),r=r||{},executeLegacyOperation(this.s.topology,ensureIndex,[this,e,t,r,o])},\"Db.ensureIndex is deprecated as of MongoDB version 3.0 / driver version 2.0\"),Db.prototype.addChild=function(e){if(this.s.parentDb)return this.s.parentDb.addChild(e);this.s.children.push(e)},Db.prototype.addUser=function(e,t,r,o){\"function\"==typeof r&&(o=r,r={}),r=r||{},\"string\"==typeof e&&null!=t&&\"object\"==typeof t&&(r=t,t=null);const n=new AddUserOperation(this,e,t,r);return executeOperation(this.s.topology,n,o)},Db.prototype.removeUser=function(e,t,r){\"function\"==typeof t&&(r=t,t={});const o=new RemoveUserOperation(this,e,t=t||{});return executeOperation(this.s.topology,o,r)},Db.prototype.setProfilingLevel=function(e,t,r){\"function\"==typeof t&&(r=t,t={});const o=new SetProfilingLevelOperation(this,e,t=t||{});return executeOperation(this.s.topology,o,r)},Db.prototype.profilingInfo=deprecate(function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},executeLegacyOperation(this.s.topology,profilingInfo,[this,e,t])},\"Db.profilingInfo is deprecated. Query the system.profile collection directly.\"),Db.prototype.profilingLevel=function(e,t){\"function\"==typeof e&&(t=e,e={});const r=new ProfilingLevelOperation(this,e=e||{});return executeOperation(this.s.topology,r,t)},Db.prototype.indexInformation=function(e,t,r){\"function\"==typeof t&&(r=t,t={});const o=new IndexInformationOperation(this,e,t=t||{});return executeOperation(this.s.topology,o,r)},Db.prototype.unref=function(){this.s.topology.unref()},Db.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new ChangeStream(this,e,t)},Db.prototype.getLogger=function(){return this.s.logger},Db.SYSTEM_NAMESPACE_COLLECTION=CONSTANTS.SYSTEM_NAMESPACE_COLLECTION,Db.SYSTEM_INDEX_COLLECTION=CONSTANTS.SYSTEM_INDEX_COLLECTION,Db.SYSTEM_PROFILE_COLLECTION=CONSTANTS.SYSTEM_PROFILE_COLLECTION,Db.SYSTEM_USER_COLLECTION=CONSTANTS.SYSTEM_USER_COLLECTION,Db.SYSTEM_COMMAND_COLLECTION=CONSTANTS.SYSTEM_COMMAND_COLLECTION,Db.SYSTEM_JS_COLLECTION=CONSTANTS.SYSTEM_JS_COLLECTION,module.exports=Db;","node_modules/mongodb/lib/collection.js":"\"use strict\";const deprecate=require(\"util\").deprecate,deprecateOptions=require(\"./utils\").deprecateOptions,emitWarningOnce=require(\"./utils\").emitWarningOnce,checkCollectionName=require(\"./utils\").checkCollectionName,ObjectID=require(\"./core\").BSON.ObjectID,MongoError=require(\"./core\").MongoError,normalizeHintField=require(\"./utils\").normalizeHintField,decorateCommand=require(\"./utils\").decorateCommand,decorateWithCollation=require(\"./utils\").decorateWithCollation,decorateWithReadConcern=require(\"./utils\").decorateWithReadConcern,formattedOrderClause=require(\"./utils\").formattedOrderClause,ReadPreference=require(\"./core\").ReadPreference,unordered=require(\"./bulk/unordered\"),ordered=require(\"./bulk/ordered\"),ChangeStream=require(\"./change_stream\"),executeLegacyOperation=require(\"./utils\").executeLegacyOperation,WriteConcern=require(\"./write_concern\"),ReadConcern=require(\"./read_concern\"),MongoDBNamespace=require(\"./utils\").MongoDBNamespace,AggregationCursor=require(\"./aggregation_cursor\"),CommandCursor=require(\"./command_cursor\"),ensureIndex=require(\"./operations/collection_ops\").ensureIndex,group=require(\"./operations/collection_ops\").group,parallelCollectionScan=require(\"./operations/collection_ops\").parallelCollectionScan,removeDocuments=require(\"./operations/common_functions\").removeDocuments,save=require(\"./operations/collection_ops\").save,updateDocuments=require(\"./operations/common_functions\").updateDocuments,AggregateOperation=require(\"./operations/aggregate\"),BulkWriteOperation=require(\"./operations/bulk_write\"),CountDocumentsOperation=require(\"./operations/count_documents\"),CreateIndexesOperation=require(\"./operations/create_indexes\"),DeleteManyOperation=require(\"./operations/delete_many\"),DeleteOneOperation=require(\"./operations/delete_one\"),DistinctOperation=require(\"./operations/distinct\"),DropCollectionOperation=require(\"./operations/drop\").DropCollectionOperation,DropIndexOperation=require(\"./operations/drop_index\"),DropIndexesOperation=require(\"./operations/drop_indexes\"),EstimatedDocumentCountOperation=require(\"./operations/estimated_document_count\"),FindOperation=require(\"./operations/find\"),FindOneOperation=require(\"./operations/find_one\"),FindAndModifyOperation=require(\"./operations/find_and_modify\"),FindOneAndDeleteOperation=require(\"./operations/find_one_and_delete\"),FindOneAndReplaceOperation=require(\"./operations/find_one_and_replace\"),FindOneAndUpdateOperation=require(\"./operations/find_one_and_update\"),GeoHaystackSearchOperation=require(\"./operations/geo_haystack_search\"),IndexesOperation=require(\"./operations/indexes\"),IndexExistsOperation=require(\"./operations/index_exists\"),IndexInformationOperation=require(\"./operations/index_information\"),InsertManyOperation=require(\"./operations/insert_many\"),InsertOneOperation=require(\"./operations/insert_one\"),IsCappedOperation=require(\"./operations/is_capped\"),ListIndexesOperation=require(\"./operations/list_indexes\"),MapReduceOperation=require(\"./operations/map_reduce\"),OptionsOperation=require(\"./operations/options_operation\"),RenameOperation=require(\"./operations/rename\"),ReIndexOperation=require(\"./operations/re_index\"),ReplaceOneOperation=require(\"./operations/replace_one\"),StatsOperation=require(\"./operations/stats\"),UpdateManyOperation=require(\"./operations/update_many\"),UpdateOneOperation=require(\"./operations/update_one\"),executeOperation=require(\"./operations/execute_operation\"),mergeKeys=[\"ignoreUndefined\"];function Collection(e,t,o,n,i,r){checkCollectionName(n);const s=null==r||null==r.slaveOk?e.slaveOk:r.slaveOk,p=null==r||null==r.serializeFunctions?e.s.options.serializeFunctions:r.serializeFunctions,a=null==r||null==r.raw?e.s.options.raw:r.raw,c=null==r||null==r.promoteLongs?e.s.options.promoteLongs:r.promoteLongs,l=null==r||null==r.promoteValues?e.s.options.promoteValues:r.promoteValues,d=null==r||null==r.promoteBuffers?e.s.options.promoteBuffers:r.promoteBuffers,u=new MongoDBNamespace(o,n),f=r.promiseLibrary||Promise;i=null==i?ObjectID:i,this.s={pkFactory:i,db:e,topology:t,options:r,namespace:u,readPreference:ReadPreference.fromOptions(r),slaveOk:s,serializeFunctions:p,raw:a,promoteLongs:c,promoteValues:l,promoteBuffers:d,internalHint:null,collectionHint:null,promiseLibrary:f,readConcern:ReadConcern.fromOptions(r),writeConcern:WriteConcern.fromOptions(r)}}Object.defineProperty(Collection.prototype,\"dbName\",{enumerable:!0,get:function(){return this.s.namespace.db}}),Object.defineProperty(Collection.prototype,\"collectionName\",{enumerable:!0,get:function(){return this.s.namespace.collection}}),Object.defineProperty(Collection.prototype,\"namespace\",{enumerable:!0,get:function(){return this.s.namespace.toString()}}),Object.defineProperty(Collection.prototype,\"readConcern\",{enumerable:!0,get:function(){return null==this.s.readConcern?this.s.db.readConcern:this.s.readConcern}}),Object.defineProperty(Collection.prototype,\"readPreference\",{enumerable:!0,get:function(){return null==this.s.readPreference?this.s.db.readPreference:this.s.readPreference}}),Object.defineProperty(Collection.prototype,\"writeConcern\",{enumerable:!0,get:function(){return null==this.s.writeConcern?this.s.db.writeConcern:this.s.writeConcern}}),Object.defineProperty(Collection.prototype,\"hint\",{enumerable:!0,get:function(){return this.s.collectionHint},set:function(e){this.s.collectionHint=normalizeHintField(e)}});const DEPRECATED_FIND_OPTIONS=[\"maxScan\",\"fields\",\"snapshot\",\"oplogReplay\"];function _findAndModify(e,t,o,n,i){const r=Array.prototype.slice.call(arguments,1);return i=\"function\"==typeof r[r.length-1]?r.pop():void 0,t=r.length&&r.shift()||[],o=r.length?r.shift():null,n=r.length&&r.shift()||{},(n=Object.assign({},n)).readPreference=ReadPreference.PRIMARY,executeOperation(this.s.topology,new FindAndModifyOperation(this,e,t,o,n),i)}Collection.prototype.find=deprecateOptions({name:\"collection.find\",deprecatedOptions:DEPRECATED_FIND_OPTIONS,optionsIndex:1},function(e,t,o){\"object\"==typeof o&&emitWarningOnce(\"Third parameter to `find()` must be a callback or undefined\");let n=e;\"function\"!=typeof o&&(\"function\"==typeof t?(o=t,t=void 0):null==t&&(o=\"function\"==typeof n?n:void 0,n=\"object\"==typeof n?n:void 0));const i=n=null==n?{}:n;if(Buffer.isBuffer(i)){const e=i[0]|i[1]<<8|i[2]<<16|i[3]<<24;if(e!==i.length){const t=new Error(\"query selector raw message size does not match message header size [\"+i.length+\"] != [\"+e+\"]\");throw t.name=\"MongoError\",t}}null!=n&&\"ObjectID\"===n._bsontype&&(n={_id:n}),t||(t={});let r=t.projection||t.fields;r&&!Buffer.isBuffer(r)&&Array.isArray(r)&&(r=r.length?r.reduce((e,t)=>(e[t]=1,e),{}):{_id:1});let s=Object.assign({},t);for(let e in this.s.options)-1!==mergeKeys.indexOf(e)&&(s[e]=this.s.options[e]);if(s.skip=t.skip?t.skip:0,s.limit=t.limit?t.limit:0,s.raw=\"boolean\"==typeof t.raw?t.raw:this.s.raw,s.hint=null!=t.hint?normalizeHintField(t.hint):this.s.collectionHint,s.timeout=void 0===t.timeout?void 0:t.timeout,s.slaveOk=null!=t.slaveOk?t.slaveOk:this.s.db.slaveOk,s.readPreference=ReadPreference.resolve(this,s),null==s.readPreference||\"primary\"===s.readPreference&&\"primary\"===s.readPreference.mode||(s.slaveOk=!0),null!=n&&\"object\"!=typeof n)throw MongoError.create({message:\"query selector must be an object\",driver:!0});const p={find:this.s.namespace.toString(),limit:s.limit,skip:s.skip,query:n};\"boolean\"==typeof t.allowDiskUse&&(p.allowDiskUse=t.allowDiskUse),\"boolean\"==typeof s.awaitdata&&(s.awaitData=s.awaitdata),\"boolean\"==typeof s.timeout&&(s.noCursorTimeout=!s.timeout),decorateCommand(p,s,[\"session\",\"collation\"]),r&&(p.fields=r),s.db=this.s.db,s.promiseLibrary=this.s.promiseLibrary,null==s.raw&&\"boolean\"==typeof this.s.raw&&(s.raw=this.s.raw),null==s.promoteLongs&&\"boolean\"==typeof this.s.promoteLongs&&(s.promoteLongs=this.s.promoteLongs),null==s.promoteValues&&\"boolean\"==typeof this.s.promoteValues&&(s.promoteValues=this.s.promoteValues),null==s.promoteBuffers&&\"boolean\"==typeof this.s.promoteBuffers&&(s.promoteBuffers=this.s.promoteBuffers),p.sort&&(p.sort=formattedOrderClause(p.sort)),decorateWithReadConcern(p,this,t);try{decorateWithCollation(p,this,t)}catch(e){if(\"function\"==typeof o)return o(e,null);throw e}const a=this.s.topology.cursor(new FindOperation(this,this.s.namespace,p,s),s);if(\"function\"!=typeof o)return a;o(null,a)}),Collection.prototype.insertOne=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=Object.assign({},t)).ignoreUndefined=this.s.options.ignoreUndefined);const n=new InsertOneOperation(this,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.insertMany=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=t?Object.assign({},t):{ordered:!0};const n=new InsertManyOperation(this,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.bulkWrite=function(e,t,o){if(\"function\"==typeof t&&(o=t,t={}),t=t||{ordered:!0},!Array.isArray(e))throw MongoError.create({message:\"operations must be an array of documents\",driver:!0});const n=new BulkWriteOperation(this,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.insert=deprecate(function(e,t,o){return\"function\"==typeof t&&(o=t,t={}),t=t||{ordered:!1},e=Array.isArray(e)?e:[e],!0===t.keepGoing&&(t.ordered=!1),this.insertMany(e,t,o)},\"collection.insert is deprecated. Use insertOne, insertMany or bulkWrite instead.\"),Collection.prototype.updateOne=function(e,t,o,n){return\"function\"==typeof o&&(n=o,o={}),o=Object.assign({},o),this.s.options.ignoreUndefined&&((o=Object.assign({},o)).ignoreUndefined=this.s.options.ignoreUndefined),executeOperation(this.s.topology,new UpdateOneOperation(this,e,t,o),n)},Collection.prototype.replaceOne=function(e,t,o,n){return\"function\"==typeof o&&(n=o,o={}),o=Object.assign({},o),this.s.options.ignoreUndefined&&((o=Object.assign({},o)).ignoreUndefined=this.s.options.ignoreUndefined),executeOperation(this.s.topology,new ReplaceOneOperation(this,e,t,o),n)},Collection.prototype.updateMany=function(e,t,o,n){return\"function\"==typeof o&&(n=o,o={}),o=Object.assign({},o),this.s.options.ignoreUndefined&&((o=Object.assign({},o)).ignoreUndefined=this.s.options.ignoreUndefined),executeOperation(this.s.topology,new UpdateManyOperation(this,e,t,o),n)},Collection.prototype.update=deprecate(function(e,t,o,n){return\"function\"==typeof o&&(n=o,o={}),o=o||{},this.s.options.ignoreUndefined&&((o=Object.assign({},o)).ignoreUndefined=this.s.options.ignoreUndefined),executeLegacyOperation(this.s.topology,updateDocuments,[this,e,t,o,n])},\"collection.update is deprecated. Use updateOne, updateMany, or bulkWrite instead.\"),Collection.prototype.deleteOne=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=Object.assign({},t),this.s.options.ignoreUndefined&&((t=Object.assign({},t)).ignoreUndefined=this.s.options.ignoreUndefined);const n=new DeleteOneOperation(this,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.removeOne=Collection.prototype.deleteOne,Collection.prototype.deleteMany=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=Object.assign({},t),this.s.options.ignoreUndefined&&((t=Object.assign({},t)).ignoreUndefined=this.s.options.ignoreUndefined);const n=new DeleteManyOperation(this,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.removeMany=Collection.prototype.deleteMany,Collection.prototype.remove=deprecate(function(e,t,o){return\"function\"==typeof t&&(o=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=Object.assign({},t)).ignoreUndefined=this.s.options.ignoreUndefined),executeLegacyOperation(this.s.topology,removeDocuments,[this,e,t,o])},\"collection.remove is deprecated. Use deleteOne, deleteMany, or bulkWrite instead.\"),Collection.prototype.save=deprecate(function(e,t,o){return\"function\"==typeof t&&(o=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=Object.assign({},t)).ignoreUndefined=this.s.options.ignoreUndefined),executeLegacyOperation(this.s.topology,save,[this,e,t,o])},\"collection.save is deprecated. Use insertOne, insertMany, updateOne, or updateMany instead.\"),Collection.prototype.findOne=deprecateOptions({name:\"collection.find\",deprecatedOptions:DEPRECATED_FIND_OPTIONS,optionsIndex:1},function(e,t,o){\"object\"==typeof o&&emitWarningOnce(\"Third parameter to `findOne()` must be a callback or undefined\"),\"function\"==typeof e&&(o=e,e={},t={}),\"function\"==typeof t&&(o=t,t={});const n=new FindOneOperation(this,e=e||{},t=t||{});return executeOperation(this.s.topology,n,o)}),Collection.prototype.rename=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=Object.assign({},t,{readPreference:ReadPreference.PRIMARY});const n=new RenameOperation(this,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.drop=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{};const o=new DropCollectionOperation(this.s.db,this.collectionName,e);return executeOperation(this.s.topology,o,t)},Collection.prototype.options=function(e,t){\"function\"==typeof e&&(t=e,e={});const o=new OptionsOperation(this,e=e||{});return executeOperation(this.s.topology,o,t)},Collection.prototype.isCapped=function(e,t){\"function\"==typeof e&&(t=e,e={});const o=new IsCappedOperation(this,e=e||{});return executeOperation(this.s.topology,o,t)},Collection.prototype.createIndex=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=t||{};const n=new CreateIndexesOperation(this,this.collectionName,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.createIndexes=function(e,t,o){\"function\"==typeof t&&(o=t,t={}),\"number\"!=typeof(t=t?Object.assign({},t):{}).maxTimeMS&&delete t.maxTimeMS;const n=new CreateIndexesOperation(this,this.collectionName,e,t);return executeOperation(this.s.topology,n,o)},Collection.prototype.dropIndex=function(e,t,o){const n=Array.prototype.slice.call(arguments,1);o=\"function\"==typeof n[n.length-1]?n.pop():void 0,(t=n.length&&n.shift()||{}).readPreference=ReadPreference.PRIMARY;const i=new DropIndexOperation(this,e,t);return executeOperation(this.s.topology,i,o)},Collection.prototype.dropIndexes=function(e,t){\"function\"==typeof e&&(t=e,e={}),\"number\"!=typeof(e=e?Object.assign({},e):{}).maxTimeMS&&delete e.maxTimeMS;const o=new DropIndexesOperation(this,e);return executeOperation(this.s.topology,o,t)},Collection.prototype.dropAllIndexes=deprecate(Collection.prototype.dropIndexes,\"collection.dropAllIndexes is deprecated. Use dropIndexes instead.\"),Collection.prototype.reIndex=deprecate(function(e,t){\"function\"==typeof e&&(t=e,e={});const o=new ReIndexOperation(this,e=e||{});return executeOperation(this.s.topology,o,t)},\"collection.reIndex is deprecated. Use db.command instead.\"),Collection.prototype.listIndexes=function(e){return new CommandCursor(this.s.topology,new ListIndexesOperation(this,e),e)},Collection.prototype.ensureIndex=deprecate(function(e,t,o){return\"function\"==typeof t&&(o=t,t={}),t=t||{},executeLegacyOperation(this.s.topology,ensureIndex,[this,e,t,o])},\"collection.ensureIndex is deprecated. Use createIndexes instead.\"),Collection.prototype.indexExists=function(e,t,o){\"function\"==typeof t&&(o=t,t={});const n=new IndexExistsOperation(this,e,t=t||{});return executeOperation(this.s.topology,n,o)},Collection.prototype.indexInformation=function(e,t){const o=Array.prototype.slice.call(arguments,0);t=\"function\"==typeof o[o.length-1]?o.pop():void 0,e=o.length&&o.shift()||{};const n=new IndexInformationOperation(this.s.db,this.collectionName,e);return executeOperation(this.s.topology,n,t)},Collection.prototype.count=deprecate(function(e,t,o){const n=Array.prototype.slice.call(arguments,0);return o=\"function\"==typeof n[n.length-1]?n.pop():void 0,e=n.length&&n.shift()||{},\"function\"==typeof(t=n.length&&n.shift()||{})&&(o=t,t={}),t=t||{},executeOperation(this.s.topology,new EstimatedDocumentCountOperation(this,e,t),o)},\"collection.count is deprecated, and will be removed in a future version. Use Collection.countDocuments or Collection.estimatedDocumentCount instead\"),Collection.prototype.estimatedDocumentCount=function(e,t){\"function\"==typeof e&&(t=e,e={});const o=new EstimatedDocumentCountOperation(this,e=e||{});return executeOperation(this.s.topology,o,t)},Collection.prototype.countDocuments=function(e,t,o){const n=Array.prototype.slice.call(arguments,0);o=\"function\"==typeof n[n.length-1]?n.pop():void 0,e=n.length&&n.shift()||{},t=n.length&&n.shift()||{};const i=new CountDocumentsOperation(this,e,t);return executeOperation(this.s.topology,i,o)},Collection.prototype.distinct=function(e,t,o,n){const i=Array.prototype.slice.call(arguments,1);n=\"function\"==typeof i[i.length-1]?i.pop():void 0;const r=i.length&&i.shift()||{},s=i.length&&i.shift()||{},p=new DistinctOperation(this,e,r,s);return executeOperation(this.s.topology,p,n)},Collection.prototype.indexes=function(e,t){\"function\"==typeof e&&(t=e,e={});const o=new IndexesOperation(this,e=e||{});return executeOperation(this.s.topology,o,t)},Collection.prototype.stats=function(e,t){const o=Array.prototype.slice.call(arguments,0);t=\"function\"==typeof o[o.length-1]?o.pop():void 0,e=o.length&&o.shift()||{};const n=new StatsOperation(this,e);return executeOperation(this.s.topology,n,t)},Collection.prototype.findOneAndDelete=function(e,t,o){return\"function\"==typeof t&&(o=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=Object.assign({},t)).ignoreUndefined=this.s.options.ignoreUndefined),executeOperation(this.s.topology,new FindOneAndDeleteOperation(this,e,t),o)},Collection.prototype.findOneAndReplace=deprecateOptions({name:\"collection.findOneAndReplace\",deprecatedOptions:[\"returnOriginal\"],optionsIndex:2},function(e,t,o,n){return\"function\"==typeof o&&(n=o,o={}),o=o||{},this.s.options.ignoreUndefined&&((o=Object.assign({},o)).ignoreUndefined=this.s.options.ignoreUndefined),executeOperation(this.s.topology,new FindOneAndReplaceOperation(this,e,t,o),n)}),Collection.prototype.findOneAndUpdate=deprecateOptions({name:\"collection.findOneAndUpdate\",deprecatedOptions:[\"returnOriginal\"],optionsIndex:2},function(e,t,o,n){return\"function\"==typeof o&&(n=o,o={}),o=o||{},this.s.options.ignoreUndefined&&((o=Object.assign({},o)).ignoreUndefined=this.s.options.ignoreUndefined),executeOperation(this.s.topology,new FindOneAndUpdateOperation(this,e,t,o),n)}),Collection.prototype.findAndModify=deprecate(_findAndModify,\"collection.findAndModify is deprecated. Use findOneAndUpdate, findOneAndReplace or findOneAndDelete instead.\"),Collection.prototype._findAndModify=_findAndModify,Collection.prototype.findAndRemove=deprecate(function(e,t,o,n){const i=Array.prototype.slice.call(arguments,1);return n=\"function\"==typeof i[i.length-1]?i.pop():void 0,t=i.length&&i.shift()||[],(o=i.length&&i.shift()||{}).remove=!0,executeOperation(this.s.topology,new FindAndModifyOperation(this,e,t,null,o),n)},\"collection.findAndRemove is deprecated. Use findOneAndDelete instead.\"),Collection.prototype.aggregate=function(e,t,o){if(Array.isArray(e))\"function\"==typeof t&&(o=t,t={}),null==t&&null==o&&(t={});else{const n=Array.prototype.slice.call(arguments,0);o=n.pop();const i=n[n.length-1];t=i&&(i.readPreference||i.explain||i.cursor||i.out||i.maxTimeMS||i.hint||i.allowDiskUse)?n.pop():{},e=n}const n=new AggregationCursor(this.s.topology,new AggregateOperation(this,e,t),t);if(\"function\"!=typeof o)return n;o(null,n)},Collection.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new ChangeStream(this,e,t)},Collection.prototype.parallelCollectionScan=deprecate(function(e,t){return\"function\"==typeof e&&(t=e,e={numCursors:1}),e.numCursors=e.numCursors||1,e.batchSize=e.batchSize||1e3,(e=Object.assign({},e)).readPreference=ReadPreference.resolve(this,e),e.promiseLibrary=this.s.promiseLibrary,e.session&&(e.session=void 0),executeLegacyOperation(this.s.topology,parallelCollectionScan,[this,e,t],{skipSessions:!0})},\"parallelCollectionScan is deprecated in MongoDB v4.1\"),Collection.prototype.geoHaystackSearch=deprecate(function(e,t,o,n){const i=Array.prototype.slice.call(arguments,2);n=\"function\"==typeof i[i.length-1]?i.pop():void 0,o=i.length&&i.shift()||{};const r=new GeoHaystackSearchOperation(this,e,t,o);return executeOperation(this.s.topology,r,n)},\"geoHaystackSearch is deprecated, and will be removed in a future version.\"),Collection.prototype.group=deprecate(function(e,t,o,n,i,r,s,p){const a=Array.prototype.slice.call(arguments,3);return p=\"function\"==typeof a[a.length-1]?a.pop():void 0,n=a.length?a.shift():null,i=a.length?a.shift():null,r=a.length?a.shift():null,s=a.length&&a.shift()||{},\"function\"!=typeof i&&(r=i,i=null),!Array.isArray(e)&&e instanceof Object&&\"function\"!=typeof e&&\"Code\"!==e._bsontype&&(e=Object.keys(e)),\"function\"==typeof n&&(n=n.toString()),\"function\"==typeof i&&(i=i.toString()),r=null==r||r,executeLegacyOperation(this.s.topology,group,[this,e,t,o,n,i,r,s,p])},\"MongoDB 3.6 or higher no longer supports the group command. We recommend rewriting using the aggregation framework.\"),Collection.prototype.mapReduce=function(e,t,o,n){if(\"function\"==typeof o&&(n=o,o={}),null==o.out)throw new Error(\"the out option parameter must be defined, see mongodb docs for possible values\");\"function\"==typeof e&&(e=e.toString()),\"function\"==typeof t&&(t=t.toString()),\"function\"==typeof o.finalize&&(o.finalize=o.finalize.toString());const i=new MapReduceOperation(this,e,t,o);return executeOperation(this.s.topology,i,n)},Collection.prototype.initializeUnorderedBulkOp=function(e){return null==(e=e||{}).ignoreUndefined&&(e.ignoreUndefined=this.s.options.ignoreUndefined),e.promiseLibrary=this.s.promiseLibrary,unordered(this.s.topology,this,e)},Collection.prototype.initializeOrderedBulkOp=function(e){return null==(e=e||{}).ignoreUndefined&&(e.ignoreUndefined=this.s.options.ignoreUndefined),e.promiseLibrary=this.s.promiseLibrary,ordered(this.s.topology,this,e)},Collection.prototype.getLogger=function(){return this.s.db.s.logger},module.exports=Collection;","node_modules/mongodb/lib/topologies/server.js":"\"use strict\";const CServer=require(\"../core\").Server,Cursor=require(\"../cursor\"),TopologyBase=require(\"./topology_base\").TopologyBase,Store=require(\"./topology_base\").Store,MongoError=require(\"../core\").MongoError,MAX_JS_INT=require(\"../utils\").MAX_JS_INT,translateOptions=require(\"../utils\").translateOptions,filterOptions=require(\"../utils\").filterOptions,mergeOptions=require(\"../utils\").mergeOptions;var legalOptionNames=[\"ha\",\"haInterval\",\"acceptableLatencyMS\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCRL\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"family\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"reconnectInterval\",\"monitoring\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"compression\",\"promiseLibrary\",\"monitorCommands\"];class Server extends TopologyBase{constructor(e,o,r){super();const t=(r=filterOptions(r,legalOptionNames)).promiseLibrary;var n={force:!1,bufferMaxEntries:\"number\"==typeof r.bufferMaxEntries?r.bufferMaxEntries:MAX_JS_INT},s=r.store||new Store(this,n);if(-1!==e.indexOf(\"/\"))null!=o&&\"object\"==typeof o&&(r=o,o=null);else if(null==o)throw MongoError.create({message:\"port must be specified\",driver:!0});var c=\"boolean\"!=typeof r.auto_reconnect||r.auto_reconnect;c=\"boolean\"==typeof r.autoReconnect?r.autoReconnect:c;var i=mergeOptions({},{host:e,port:o,disconnectHandler:s,cursorFactory:Cursor,reconnect:c,emitError:\"boolean\"!=typeof r.emitError||r.emitError,size:\"number\"==typeof r.poolSize?r.poolSize:5,monitorCommands:\"boolean\"==typeof r.monitorCommands&&r.monitorCommands});i=translateOptions(i,r);var l=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;i=translateOptions(i,l),this.s={coreTopology:new CServer(i),sCapabilities:null,clonedOptions:i,reconnect:i.reconnect,emitError:i.emitError,poolSize:i.size,storeOptions:n,store:s,host:e,port:o,options:r,sessionPool:null,sessions:new Set,promiseLibrary:t||Promise}}connect(e,o){var r=this;\"function\"==typeof e&&(o=e,e={}),null==e&&(e=this.s.clonedOptions),\"function\"!=typeof o&&(o=null),e=Object.assign({},this.s.clonedOptions,e),r.s.options=e,r.s.storeOptions.bufferMaxEntries=\"number\"==typeof e.bufferMaxEntries?e.bufferMaxEntries:-1;var t=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){r.s.coreTopology.removeListener(e,i[e])}),r.s.coreTopology.removeListener(\"connect\",t);try{o(e)}catch(e){process.nextTick(function(){throw e})}}},n=function(e){return function(o){\"error\"!==e&&r.emit(e,o)}},s=function(){r.s.store.flush()},c=function(e){return function(o,t){r.emit(e,o,t)}},i={timeout:t(\"timeout\"),error:t(\"error\"),close:t(\"close\")};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"commandStarted\",\"commandSucceeded\",\"commandFailed\"].forEach(function(e){r.s.coreTopology.removeAllListeners(e)}),r.s.coreTopology.once(\"timeout\",i.timeout),r.s.coreTopology.once(\"error\",i.error),r.s.coreTopology.once(\"close\",i.close),r.s.coreTopology.once(\"connect\",function(){[\"timeout\",\"error\",\"close\",\"destroy\"].forEach(function(e){r.s.coreTopology.removeAllListeners(e)}),r.s.coreTopology.on(\"timeout\",n(\"timeout\")),r.s.coreTopology.once(\"error\",n(\"error\")),r.s.coreTopology.on(\"close\",n(\"close\")),r.s.coreTopology.on(\"destroy\",s),r.emit(\"open\",null,r);try{o(null,r)}catch(e){process.nextTick(function(){throw e})}}),r.s.coreTopology.on(\"reconnect\",function(){r.emit(\"reconnect\",r),r.s.store.execute()}),r.s.coreTopology.on(\"reconnectFailed\",function(e){r.emit(\"reconnectFailed\",e),r.s.store.flush(e)}),r.s.coreTopology.on(\"serverDescriptionChanged\",c(\"serverDescriptionChanged\")),r.s.coreTopology.on(\"serverHeartbeatStarted\",c(\"serverHeartbeatStarted\")),r.s.coreTopology.on(\"serverHeartbeatSucceeded\",c(\"serverHeartbeatSucceeded\")),r.s.coreTopology.on(\"serverHeartbeatFailed\",c(\"serverHeartbeatFailed\")),r.s.coreTopology.on(\"serverOpening\",c(\"serverOpening\")),r.s.coreTopology.on(\"serverClosed\",c(\"serverClosed\")),r.s.coreTopology.on(\"topologyOpening\",c(\"topologyOpening\")),r.s.coreTopology.on(\"topologyClosed\",c(\"topologyClosed\")),r.s.coreTopology.on(\"topologyDescriptionChanged\",c(\"topologyDescriptionChanged\")),r.s.coreTopology.on(\"commandStarted\",c(\"commandStarted\")),r.s.coreTopology.on(\"commandSucceeded\",c(\"commandSucceeded\")),r.s.coreTopology.on(\"commandFailed\",c(\"commandFailed\")),r.s.coreTopology.on(\"attemptReconnect\",c(\"attemptReconnect\")),r.s.coreTopology.on(\"monitoring\",c(\"monitoring\")),r.s.coreTopology.connect(e)}}Object.defineProperty(Server.prototype,\"poolSize\",{enumerable:!0,get:function(){return this.s.coreTopology.connections().length}}),Object.defineProperty(Server.prototype,\"autoReconnect\",{enumerable:!0,get:function(){return this.s.reconnect}}),Object.defineProperty(Server.prototype,\"host\",{enumerable:!0,get:function(){return this.s.host}}),Object.defineProperty(Server.prototype,\"port\",{enumerable:!0,get:function(){return this.s.port}}),module.exports=Server;","node_modules/mongodb/lib/topologies/replset.js":"\"use strict\";const Server=require(\"./server\"),Cursor=require(\"../cursor\"),MongoError=require(\"../core\").MongoError,TopologyBase=require(\"./topology_base\").TopologyBase,Store=require(\"./topology_base\").Store,CReplSet=require(\"../core\").ReplSet,MAX_JS_INT=require(\"../utils\").MAX_JS_INT,translateOptions=require(\"../utils\").translateOptions,filterOptions=require(\"../utils\").filterOptions,mergeOptions=require(\"../utils\").mergeOptions;var legalOptionNames=[\"ha\",\"haInterval\",\"replicaSet\",\"rs_name\",\"secondaryAcceptableLatencyMS\",\"connectWithNoPrimary\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslCRL\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"strategy\",\"debug\",\"family\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"maxStalenessSeconds\",\"promiseLibrary\",\"minSize\",\"monitorCommands\"];class ReplSet extends TopologyBase{constructor(e,o){super();var r=this;o=filterOptions(o=o||{},legalOptionNames);for(var t=0;t<e.length;t++)if(!(e[t]instanceof Server))throw MongoError.create({message:\"all seed list instances must be of the Server type\",driver:!0});var n={force:!1,bufferMaxEntries:\"number\"==typeof o.bufferMaxEntries?o.bufferMaxEntries:MAX_JS_INT},s=o.store||new Store(r,n),i=e.map(function(e){return{host:e.host,port:e.port}}),c=mergeOptions({},{disconnectHandler:s,cursorFactory:Cursor,reconnect:!1,emitError:\"boolean\"!=typeof o.emitError||o.emitError,size:\"number\"==typeof o.poolSize?o.poolSize:5,monitorCommands:\"boolean\"==typeof o.monitorCommands&&o.monitorCommands});c=translateOptions(c,o);var l=o.socketOptions&&Object.keys(o.socketOptions).length>0?o.socketOptions:o;c=translateOptions(c,l);var a=new CReplSet(i,c);a.on(\"reconnect\",function(){r.emit(\"reconnect\"),s.execute()}),this.s={coreTopology:a,sCapabilities:null,tag:o.tag,storeOptions:n,clonedOptions:c,store:s,options:o,sessionPool:null,sessions:new Set,promiseLibrary:o.promiseLibrary||Promise},c.debug&&Object.defineProperty(this,\"replset\",{enumerable:!0,get:function(){return a}})}connect(e,o){var r=this;\"function\"==typeof e&&(o=e,e={}),null==e&&(e={}),\"function\"!=typeof o&&(o=null),e=Object.assign({},this.s.clonedOptions,e),r.s.options=e,r.s.storeOptions.bufferMaxEntries=\"number\"==typeof e.bufferMaxEntries?e.bufferMaxEntries:-1;var t=function(e){return function(o){\"error\"!==e&&r.emit(e,o)}};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"commandStarted\",\"commandSucceeded\",\"commandFailed\",\"joined\",\"left\",\"ping\",\"ha\"].forEach(function(e){r.s.coreTopology.removeAllListeners(e)});var n,s=function(e){return function(o,t){r.emit(e,o,t)}};r.s.coreTopology.on(\"joined\",(n=\"joined\",function(e,o){r.emit(n,e,o.lastIsMaster(),o)})),r.s.coreTopology.on(\"left\",s(\"left\")),r.s.coreTopology.on(\"ping\",s(\"ping\")),r.s.coreTopology.on(\"ha\",function(e,o){r.emit(\"ha\",e,o),\"start\"===e?r.emit(\"ha_connect\",e,o):\"end\"===e&&r.emit(\"ha_ismaster\",e,o)}),r.s.coreTopology.on(\"serverDescriptionChanged\",s(\"serverDescriptionChanged\")),r.s.coreTopology.on(\"serverHeartbeatStarted\",s(\"serverHeartbeatStarted\")),r.s.coreTopology.on(\"serverHeartbeatSucceeded\",s(\"serverHeartbeatSucceeded\")),r.s.coreTopology.on(\"serverHeartbeatFailed\",s(\"serverHeartbeatFailed\")),r.s.coreTopology.on(\"serverOpening\",s(\"serverOpening\")),r.s.coreTopology.on(\"serverClosed\",s(\"serverClosed\")),r.s.coreTopology.on(\"topologyOpening\",s(\"topologyOpening\")),r.s.coreTopology.on(\"topologyClosed\",s(\"topologyClosed\")),r.s.coreTopology.on(\"topologyDescriptionChanged\",s(\"topologyDescriptionChanged\")),r.s.coreTopology.on(\"commandStarted\",s(\"commandStarted\")),r.s.coreTopology.on(\"commandSucceeded\",s(\"commandSucceeded\")),r.s.coreTopology.on(\"commandFailed\",s(\"commandFailed\")),r.s.coreTopology.on(\"fullsetup\",function(){r.emit(\"fullsetup\",r,r)}),r.s.coreTopology.on(\"all\",function(){r.emit(\"all\",null,r)});var i=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){r.s.coreTopology.removeListener(e,i)}),r.s.coreTopology.removeListener(\"connect\",i),r.s.coreTopology.destroy();try{o(e)}catch(e){r.s.coreTopology.isConnected()||process.nextTick(function(){throw e})}}};r.s.coreTopology.once(\"timeout\",i(\"timeout\")),r.s.coreTopology.once(\"error\",i(\"error\")),r.s.coreTopology.once(\"close\",i(\"close\")),r.s.coreTopology.once(\"connect\",function(){r.s.coreTopology.once(\"timeout\",t(\"timeout\")),r.s.coreTopology.once(\"error\",t(\"error\")),r.s.coreTopology.once(\"close\",t(\"close\")),r.emit(\"open\",null,r);try{o(null,r)}catch(e){process.nextTick(function(){throw e})}}),r.s.coreTopology.connect(e)}close(e,o){[\"timeout\",\"error\",\"close\",\"joined\",\"left\"].forEach(e=>this.removeAllListeners(e)),super.close(e,o)}}Object.defineProperty(ReplSet.prototype,\"haInterval\",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}}),module.exports=ReplSet;","node_modules/mongodb/lib/topologies/mongos.js":"\"use strict\";const TopologyBase=require(\"./topology_base\").TopologyBase,MongoError=require(\"../core\").MongoError,CMongos=require(\"../core\").Mongos,Cursor=require(\"../cursor\"),Server=require(\"./server\"),Store=require(\"./topology_base\").Store,MAX_JS_INT=require(\"../utils\").MAX_JS_INT,translateOptions=require(\"../utils\").translateOptions,filterOptions=require(\"../utils\").filterOptions,mergeOptions=require(\"../utils\").mergeOptions;var legalOptionNames=[\"ha\",\"haInterval\",\"acceptableLatencyMS\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCRL\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"promiseLibrary\",\"monitorCommands\"];class Mongos extends TopologyBase{constructor(e,o){super();o=filterOptions(o=o||{},legalOptionNames);for(var r=0;r<e.length;r++)if(!(e[r]instanceof Server))throw MongoError.create({message:\"all seed list instances must be of the Server type\",driver:!0});var t={force:!1,bufferMaxEntries:\"number\"==typeof o.bufferMaxEntries?o.bufferMaxEntries:MAX_JS_INT},n=o.store||new Store(this,t),s=e.map(function(e){return{host:e.host,port:e.port}}),c=\"boolean\"!=typeof o.auto_reconnect||o.auto_reconnect;c=\"boolean\"==typeof o.autoReconnect?o.autoReconnect:c;var i=mergeOptions({},{disconnectHandler:n,cursorFactory:Cursor,reconnect:c,emitError:\"boolean\"!=typeof o.emitError||o.emitError,size:\"number\"==typeof o.poolSize?o.poolSize:5,monitorCommands:\"boolean\"==typeof o.monitorCommands&&o.monitorCommands});i=translateOptions(i,o);var l=o.socketOptions&&Object.keys(o.socketOptions).length>0?o.socketOptions:o;i=translateOptions(i,l),this.s={coreTopology:new CMongos(s,i),sCapabilities:null,debug:i.debug,storeOptions:t,clonedOptions:i,store:n,options:o,sessionPool:null,sessions:new Set,promiseLibrary:o.promiseLibrary||Promise}}connect(e,o){var r=this;\"function\"==typeof e&&(o=e,e={}),null==e&&(e={}),\"function\"!=typeof o&&(o=null),e=Object.assign({},this.s.clonedOptions,e),r.s.options=e,r.s.storeOptions.bufferMaxEntries=\"number\"==typeof e.bufferMaxEntries?e.bufferMaxEntries:-1;var t=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){r.removeListener(e,t)}),r.s.coreTopology.removeListener(\"connect\",t),r.close(!0);try{o(e)}catch(e){process.nextTick(function(){throw e})}}},n=function(e){return function(o){\"error\"!==e&&r.emit(e,o)}},s=function(e){return function(o,t){r.emit(e,o,t)}};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"commandStarted\",\"commandSucceeded\",\"commandFailed\"].forEach(function(e){r.s.coreTopology.removeAllListeners(e)}),r.s.coreTopology.on(\"serverDescriptionChanged\",s(\"serverDescriptionChanged\")),r.s.coreTopology.on(\"serverHeartbeatStarted\",s(\"serverHeartbeatStarted\")),r.s.coreTopology.on(\"serverHeartbeatSucceeded\",s(\"serverHeartbeatSucceeded\")),r.s.coreTopology.on(\"serverHeartbeatFailed\",s(\"serverHeartbeatFailed\")),r.s.coreTopology.on(\"serverOpening\",s(\"serverOpening\")),r.s.coreTopology.on(\"serverClosed\",s(\"serverClosed\")),r.s.coreTopology.on(\"topologyOpening\",s(\"topologyOpening\")),r.s.coreTopology.on(\"topologyClosed\",s(\"topologyClosed\")),r.s.coreTopology.on(\"topologyDescriptionChanged\",s(\"topologyDescriptionChanged\")),r.s.coreTopology.on(\"commandStarted\",s(\"commandStarted\")),r.s.coreTopology.on(\"commandSucceeded\",s(\"commandSucceeded\")),r.s.coreTopology.on(\"commandFailed\",s(\"commandFailed\")),r.s.coreTopology.once(\"timeout\",t(\"timeout\")),r.s.coreTopology.once(\"error\",t(\"error\")),r.s.coreTopology.once(\"close\",t(\"close\")),r.s.coreTopology.once(\"connect\",function(){[\"timeout\",\"error\",\"close\",\"fullsetup\"].forEach(function(e){r.s.coreTopology.removeAllListeners(e)}),r.s.coreTopology.on(\"timeout\",n(\"timeout\")),r.s.coreTopology.on(\"error\",n(\"error\")),r.s.coreTopology.on(\"close\",n(\"close\")),r.s.coreTopology.on(\"fullsetup\",function(){r.emit(\"fullsetup\",r)}),r.emit(\"open\",null,r);try{o(null,r)}catch(e){process.nextTick(function(){throw e})}}),r.s.coreTopology.on(\"joined\",s(\"joined\")),r.s.coreTopology.on(\"left\",s(\"left\")),r.s.coreTopology.on(\"reconnect\",function(){r.emit(\"reconnect\"),r.s.store.execute()}),r.s.coreTopology.connect(e)}}Object.defineProperty(Mongos.prototype,\"haInterval\",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}}),module.exports=Mongos;","node_modules/mongodb/lib/gridfs/grid_store.js":"\"use strict\";const Chunk=require(\"./chunk\"),ObjectID=require(\"../core\").BSON.ObjectID,ReadPreference=require(\"../core\").ReadPreference,Buffer=require(\"safe-buffer\").Buffer,fs=require(\"fs\"),f=require(\"util\").format,util=require(\"util\"),MongoError=require(\"../core\").MongoError,inherits=util.inherits,Duplex=require(\"stream\").Duplex,shallowClone=require(\"../utils\").shallowClone,executeLegacyOperation=require(\"../utils\").executeLegacyOperation,deprecate=require(\"util\").deprecate;var REFERENCE_BY_FILENAME=0,REFERENCE_BY_ID=1;const deprecationFn=deprecate(()=>{},\"GridStore is deprecated, and will be removed in a future version. Please use GridFSBucket instead\");var GridStore=function e(n,t,i,o,r){if(deprecationFn(),!(this instanceof e))return new e(n,t,i,o,r);this.db=n,void 0===r&&(r={}),void 0===o?(o=i,i=void 0):\"object\"==typeof o&&(r=o,o=i,i=void 0),t&&\"ObjectID\"===t._bsontype?(this.referenceBy=REFERENCE_BY_ID,this.fileId=t,this.filename=i):void 0===i?(this.referenceBy=REFERENCE_BY_FILENAME,this.filename=t,null!=o.indexOf(\"w\")&&(this.fileId=new ObjectID)):(this.referenceBy=REFERENCE_BY_ID,this.fileId=t,this.filename=i),this.mode=null==o?\"r\":o,this.options=r||{},this.isOpen=!1,this.root=null==this.options.root?e.DEFAULT_ROOT_COLLECTION:this.options.root,this.position=0,this.readPreference=this.options.readPreference||n.options.readPreference||ReadPreference.primary,this.writeConcern=_getWriteConcern(n,this.options),this.internalChunkSize=null==this.options.chunkSize?Chunk.DEFAULT_CHUNK_SIZE:this.options.chunkSize;var l=this.options.promiseLibrary||Promise;this.promiseLibrary=l,Object.defineProperty(this,\"chunkSize\",{enumerable:!0,get:function(){return this.internalChunkSize},set:function(e){\"w\"!==this.mode[0]||0!==this.position||null!=this.uploadDate?this.internalChunkSize=this.internalChunkSize:this.internalChunkSize=e}}),Object.defineProperty(this,\"md5\",{enumerable:!0,get:function(){return this.internalMd5}}),Object.defineProperty(this,\"chunkNumber\",{enumerable:!0,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})};GridStore.prototype.open=function(e,n){if(\"function\"==typeof e&&(n=e,e={}),e=e||{},\"w\"!==this.mode&&\"w+\"!==this.mode&&\"r\"!==this.mode)throw MongoError.create({message:\"Illegal mode \"+this.mode,driver:!0});return executeLegacyOperation(this.db.s.topology,open,[this,e,n],{skipSessions:!0})};var open=function(e,n,t){var i=_getWriteConcern(e.db,e.options);\"w\"===e.mode||\"w+\"===e.mode?e.collection().ensureIndex([[\"filename\",1]],i,function(){var n=e.chunkCollection(),o=shallowClone(i);o.unique=!0,n.ensureIndex([[\"files_id\",1],[\"n\",1]],o,function(){_open(e,i,function(n,i){if(n)return t(n);e.isOpen=!0,t(n,i)})})}):_open(e,i,function(n,i){if(n)return t(n);e.isOpen=!0,t(n,i)})};GridStore.prototype.eof=function(){return this.position===this.length},GridStore.prototype.getc=function(e,n){return\"function\"==typeof e&&(n=e,e={}),e=e||{},executeLegacyOperation(this.db.s.topology,getc,[this,e,n],{skipSessions:!0})};var getc=function(e,n,t){e.eof()?t(null,null):e.currentChunk.eof()?nthChunk(e,e.currentChunk.chunkNumber+1,function(n,i){e.currentChunk=i,e.position=e.position+1,t(n,e.currentChunk.getc())}):(e.position=e.position+1,t(null,e.currentChunk.getc()))};GridStore.prototype.puts=function(e,n,t){\"function\"==typeof n&&(t=n,n={}),n=n||{};var i=null==e.match(/\\n$/)?e+\"\\n\":e;return executeLegacyOperation(this.db.s.topology,this.write.bind(this),[i,n,t],{skipSessions:!0})},GridStore.prototype.stream=function(){return new GridStoreStream(this)},GridStore.prototype.write=function(e,n,t,i){return\"function\"==typeof t&&(i=t,t={}),t=t||{},executeLegacyOperation(this.db.s.topology,_writeNormal,[this,e,n,t,i],{skipSessions:!0})},GridStore.prototype.destroy=function(){this.writable&&(this.readable=!1,this.writable&&(this.writable=!1,this._q.length=0,this.emit(\"close\")))},GridStore.prototype.writeFile=function(e,n,t){return\"function\"==typeof n&&(t=n,n={}),n=n||{},executeLegacyOperation(this.db.s.topology,writeFile,[this,e,n,t],{skipSessions:!0})};var writeFile=function(e,n,t,i){\"string\"!=typeof n?e.open(function(e,t){if(e)return i(e,t);fs.fstat(n,function(e,o){if(e)return i(e,t);var r=0,l=0,u=function(){var e=Buffer.alloc(t.chunkSize);fs.read(n,e,0,e.length,r,function(e,s,a){if(e)return i(e,t);r+=s,new Chunk(t,{n:l++},t.writeConcern).write(a.slice(0,s),function(e,l){if(e)return i(e,t);l.save({},function(e){return e?i(e,t):(t.position=t.position+s,t.currentChunk=l,r>=o.size?void fs.close(n,function(e){if(e)return i(e);t.close(function(e){return i(e||null,t)})}):process.nextTick(u))})})})};process.nextTick(u)})}):fs.open(n,\"r\",function(n,t){if(n)return i(n);e.writeFile(t,i)})};GridStore.prototype.close=function(e,n){return\"function\"==typeof e&&(n=e,e={}),e=e||{},executeLegacyOperation(this.db.s.topology,close,[this,e,n],{skipSessions:!0})};var close=function(e,n,t){\"w\"===e.mode[0]?(n=Object.assign({},e.writeConcern,n),null!=e.currentChunk&&e.currentChunk.position>0?e.currentChunk.save({},function(i){if(i&&\"function\"==typeof t)return t(i);e.collection(function(i,o){if(i&&\"function\"==typeof t)return t(i);null!=e.uploadDate?buildMongoObject(e,function(e,i){if(e){if(\"function\"==typeof t)return t(e);throw e}o.save(i,n,function(e){\"function\"==typeof t&&t(e,i)})}):(e.uploadDate=new Date,buildMongoObject(e,function(e,i){if(e){if(\"function\"==typeof t)return t(e);throw e}o.save(i,n,function(e){\"function\"==typeof t&&t(e,i)})}))})}):e.collection(function(i,o){if(i&&\"function\"==typeof t)return t(i);e.uploadDate=new Date,buildMongoObject(e,function(e,i){if(e){if(\"function\"==typeof t)return t(e);throw e}o.save(i,n,function(e){\"function\"==typeof t&&t(e,i)})})})):\"r\"===e.mode[0]?\"function\"==typeof t&&t(null,null):\"function\"==typeof t&&t(MongoError.create({message:f(\"Illegal mode %s\",e.mode),driver:!0}))};GridStore.prototype.chunkCollection=function(e){return\"function\"==typeof e?this.db.collection(this.root+\".chunks\",e):this.db.collection(this.root+\".chunks\")},GridStore.prototype.unlink=function(e,n){return\"function\"==typeof e&&(n=e,e={}),e=e||{},executeLegacyOperation(this.db.s.topology,unlink,[this,e,n],{skipSessions:!0})};var unlink=function(e,n,t){deleteChunks(e,function(n){if(null!==n)return n.message=\"at deleteChunks: \"+n.message,t(n);e.collection(function(n,i){if(null!==n)return n.message=\"at collection: \"+n.message,t(n);i.remove({_id:e.fileId},e.writeConcern,function(n){t(n,e)})})})};GridStore.prototype.collection=function(e){return\"function\"==typeof e&&this.db.collection(this.root+\".files\",e),this.db.collection(this.root+\".files\")},GridStore.prototype.readlines=function(e,n,t){var i=Array.prototype.slice.call(arguments,0);return t=\"function\"==typeof i[i.length-1]?i.pop():void 0,e=(e=i.length?i.shift():\"\\n\")||\"\\n\",n=i.length?i.shift():{},executeLegacyOperation(this.db.s.topology,readlines,[this,e,n,t],{skipSessions:!0})};var readlines=function(e,n,t,i){e.read(function(e,t){if(e)return i(e);var o=t.toString().split(n);o=o.length>0?o.splice(0,o.length-1):[];for(var r=0;r<o.length;r++)o[r]=o[r]+n;i(null,o)})};GridStore.prototype.rewind=function(e,n){return\"function\"==typeof e&&(n=e,e={}),e=e||{},executeLegacyOperation(this.db.s.topology,rewind,[this,e,n],{skipSessions:!0})};var rewind=function(e,n,t){0!==e.currentChunk.chunkNumber?\"w\"===e.mode[0]?deleteChunks(e,function(n){if(n)return t(n);e.currentChunk=new Chunk(e,{n:0},e.writeConcern),e.position=0,t(null,e)}):e.currentChunk(0,function(n,i){if(n)return t(n);e.currentChunk=i,e.currentChunk.rewind(),e.position=0,t(null,e)}):(e.currentChunk.rewind(),e.position=0,t(null,e))};GridStore.prototype.read=function(e,n,t,i){var o=Array.prototype.slice.call(arguments,0);return i=\"function\"==typeof o[o.length-1]?o.pop():void 0,e=o.length?o.shift():null,n=o.length?o.shift():null,t=o.length?o.shift():{},executeLegacyOperation(this.db.s.topology,read,[this,e,n,t,i],{skipSessions:!0})};var read=function(e,n,t,i,o){var r=null==n?e.length-e.position:n,l=null==t?Buffer.alloc(r):t;if(l._index=null!=t&&null!=t._index?t._index:0,e.currentChunk.length()-e.currentChunk.position+l._index>=r){var u=e.currentChunk.readSlice(r-l._index);return u.copy(l,l._index),e.position=e.position+l.length,0===r&&0===l.length?o(MongoError.create({message:\"File does not exist\",driver:!0}),null):o(null,l)}(u=e.currentChunk.readSlice(e.currentChunk.length()-e.currentChunk.position)).copy(l,l._index),l._index+=u.length,nthChunk(e,e.currentChunk.chunkNumber+1,function(t,i){if(t)return o(t);i.length()>0?(e.currentChunk=i,e.read(n,l,o)):l._index>0?o(null,l):o(MongoError.create({message:\"no chunks found for file, possibly corrupt\",driver:!0}),null)})};GridStore.prototype.tell=function(e){var n=this;return\"function\"==typeof e?e(null,this.position):new n.promiseLibrary(function(e){e(n.position)})},GridStore.prototype.seek=function(e,n,t,i){var o=Array.prototype.slice.call(arguments,1);return i=\"function\"==typeof o[o.length-1]?o.pop():void 0,n=o.length?o.shift():null,t=o.length?o.shift():{},executeLegacyOperation(this.db.s.topology,seek,[this,e,n,t,i],{skipSessions:!0})};var seek=function(e,n,t,i,o){if(\"r\"!==e.mode)return o(MongoError.create({message:\"seek is only supported for mode r\",driver:!0}));var r=null==t?GridStore.IO_SEEK_SET:t,l=n,u=0;u=r===GridStore.IO_SEEK_CUR?e.position+l:r===GridStore.IO_SEEK_END?e.length+l:l;var s=Math.floor(u/e.chunkSize);nthChunk(e,s,function(n,t){return n?o(n,null):null==t?o(new Error(\"no chunk found\")):(e.currentChunk=t,e.position=u,e.currentChunk.position=e.position%e.chunkSize,void o(n,e))})},_open=function(e,n,t){var i=e.collection(),o=e.referenceBy===REFERENCE_BY_ID?{_id:e.fileId}:{filename:e.filename};function r(e){r.err||t(r.err=e)}o=null==e.fileId&&null==e.filename?null:o,n.readPreference=e.readPreference,null!=o?i.findOne(o,n,function(i,o){if(i)return r(i);if(null!=o)e.fileId=o._id,e.filename=\"r\"===e.mode||void 0===e.filename?o.filename:e.filename,e.contentType=o.contentType,e.internalChunkSize=o.chunkSize,e.uploadDate=o.uploadDate,e.aliases=o.aliases,e.length=o.length,e.metadata=o.metadata,e.internalMd5=o.md5;else{if(\"r\"===e.mode){e.length=0;var l=\"ObjectID\"===e.fileId._bsontype?e.fileId.toHexString():e.fileId;return r(MongoError.create({message:f(\"file with id %s not opened for writing\",e.referenceBy===REFERENCE_BY_ID?l:e.filename),driver:!0}))}e.fileId=null==e.fileId?new ObjectID:e.fileId,e.contentType=GridStore.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?Chunk.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0}\"r\"===e.mode?nthChunk(e,0,n,function(n,i){if(n)return r(n);e.currentChunk=i,e.position=0,t(null,e)}):\"w\"===e.mode&&o?deleteChunks(e,n,function(n){if(n)return r(n);e.currentChunk=new Chunk(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,t(null,e)}):\"w\"===e.mode?(e.currentChunk=new Chunk(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,t(null,e)):\"w+\"===e.mode&&nthChunk(e,lastChunkNumber(e),n,function(n,i){if(n)return r(n);e.currentChunk=null==i?new Chunk(e,{n:0},e.writeConcern):i,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,t(null,e)})}):(e.fileId=null==e.fileId?new ObjectID:e.fileId,e.contentType=GridStore.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?Chunk.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0,\"w\"===e.mode?deleteChunks(e,n,function(n){if(n)return r(n);e.currentChunk=new Chunk(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,t(null,e)}):\"w+\"===e.mode&&nthChunk(e,lastChunkNumber(e),n,function(n,i){if(n)return r(n);e.currentChunk=null==i?new Chunk(e,{n:0},e.writeConcern):i,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,t(null,e)}))},writeBuffer=function(e,n,t,i){\"function\"==typeof t&&(i=t,t=null);var o=\"boolean\"==typeof t&&t;if(\"w\"!==e.mode)i(MongoError.create({message:f(\"file with id %s not opened for writing\",e.referenceBy===REFERENCE_BY_ID?e.referenceBy:e.filename),driver:!0}),null);else{if(!(e.currentChunk.position+n.length>=e.chunkSize))return e.position=e.position+n.length,e.currentChunk.write(n),o?e.close(function(n){i(n,e)}):i(null,e);for(var r=e.currentChunk.chunkNumber,l=e.chunkSize-e.currentChunk.position,u=n.slice(0,l),s=n.slice(l),a=[e.currentChunk.write(u)];s.length>=e.chunkSize;){var c=new Chunk(e,{n:r+1},e.writeConcern);u=s.slice(0,e.chunkSize),s=s.slice(e.chunkSize),r+=1,c.write(u),a.push(c)}e.currentChunk=new Chunk(e,{n:r+1},e.writeConcern),s.length>0&&e.currentChunk.write(s),e.position=e.position+n.length;for(var p=a.length,h=0;h<a.length;h++)a[h].save({},function(n){return n?i(n):(p-=1)<=0?o?e.close(function(n){i(n,e)}):i(null,e):void 0})}},buildMongoObject=function(e,n){var t={_id:e.fileId,filename:e.filename,contentType:e.contentType,length:e.position?e.position:0,chunkSize:e.chunkSize,uploadDate:e.uploadDate,aliases:e.aliases,metadata:e.metadata},i={filemd5:e.fileId,root:e.root};e.db.command(i,function(e,i){if(e)return n(e);t.md5=i.md5,n(null,t)})},nthChunk=function(e,n,t,i){\"function\"==typeof t&&(i=t,t={}),(t=t||e.writeConcern).readPreference=e.readPreference,e.chunkCollection().findOne({files_id:e.fileId,n:n},t,function(n,t){if(n)return i(n);i(null,new Chunk(e,null==t?{}:t,e.writeConcern))})},lastChunkNumber=function(e){return Math.floor((e.length?e.length-1:0)/e.chunkSize)},deleteChunks=function(e,n,t){\"function\"==typeof n&&(t=n,n={}),n=n||e.writeConcern,null!=e.fileId?e.chunkCollection().remove({files_id:e.fileId},n,function(e){if(e)return t(e,!1);t(null,!0)}):t(null,!0)};GridStore.DEFAULT_ROOT_COLLECTION=\"fs\",GridStore.DEFAULT_CONTENT_TYPE=\"binary/octet-stream\",GridStore.IO_SEEK_SET=0,GridStore.IO_SEEK_CUR=1,GridStore.IO_SEEK_END=2,GridStore.exist=function(e,n,t,i,o){var r=Array.prototype.slice.call(arguments,2);return o=\"function\"==typeof r[r.length-1]?r.pop():void 0,t=r.length?r.shift():null,i=(i=r.length?r.shift():{})||{},executeLegacyOperation(e.s.topology,exists,[e,n,t,i,o],{skipSessions:!0})};var exists=function(e,n,t,i,o){var r=i.readPreference||ReadPreference.PRIMARY,l=null!=t?t:GridStore.DEFAULT_ROOT_COLLECTION;e.collection(l+\".files\",function(e,t){if(e)return o(e);var i=\"string\"==typeof n||\"[object RegExp]\"===Object.prototype.toString.call(n)?{filename:n}:{_id:n};null!=n&&\"object\"==typeof n&&\"[object RegExp]\"!==Object.prototype.toString.call(n)&&(i=n),t.findOne(i,{readPreference:r},function(e,n){if(e)return o(e);o(null,null!=n)})})};GridStore.list=function(e,n,t,i){var o=Array.prototype.slice.call(arguments,1);return i=\"function\"==typeof o[o.length-1]?o.pop():void 0,n=o.length?o.shift():null,t=(t=o.length?o.shift():{})||{},executeLegacyOperation(e.s.topology,list,[e,n,t,i],{skipSessions:!0})};var list=function(e,n,t,i){null!=n&&\"object\"==typeof n&&(t=n,n=null);var o=t.readPreference||ReadPreference.primary,r=null!=t.id&&t.id,l=null!=n?n:GridStore.DEFAULT_ROOT_COLLECTION,u=[];e.collection(l+\".files\",function(e,n){if(e)return i(e);n.find({},{readPreference:o},function(e,n){if(e)return i(e);n.each(function(e,n){null!=n?u.push(r?n._id:n.filename):i(e,u)})})})};GridStore.read=function(e,n,t,i,o,r){var l=Array.prototype.slice.call(arguments,2);return r=\"function\"==typeof l[l.length-1]?l.pop():void 0,t=l.length?l.shift():null,i=l.length?l.shift():null,o=(o=l.length?l.shift():null)||{},executeLegacyOperation(e.s.topology,readStatic,[e,n,t,i,o,r],{skipSessions:!0})};var readStatic=function(e,n,t,i,o,r){new GridStore(e,n,\"r\",o).open(function(e,n){return e?r(e):i&&i>=n.length?r(\"offset larger than size of file\",null):t&&t>n.length?r(\"length is larger than the size of the file\",null):i&&t&&i+t>n.length?r(\"offset and length is larger than the size of the file\",null):void(null!=i?n.seek(i,function(e,n){if(e)return r(e);n.read(t,r)}):n.read(t,r))})};GridStore.readlines=function(e,n,t,i,o){var r=Array.prototype.slice.call(arguments,2);return o=\"function\"==typeof r[r.length-1]?r.pop():void 0,t=r.length?r.shift():null,i=(i=r.length?r.shift():null)||{},executeLegacyOperation(e.s.topology,readlinesStatic,[e,n,t,i,o],{skipSessions:!0})};var readlinesStatic=function(e,n,t,i,o){var r=null==t?\"\\n\":t;new GridStore(e,n,\"r\",i).open(function(e,n){if(e)return o(e);n.readlines(r,o)})};GridStore.unlink=function(e,n,t,i){var o=Array.prototype.slice.call(arguments,2);return i=\"function\"==typeof o[o.length-1]?o.pop():void 0,t=(t=o.length?o.shift():{})||{},executeLegacyOperation(e.s.topology,unlinkStatic,[this,e,n,t,i],{skipSessions:!0})};var unlinkStatic=function(e,n,t,i,o){var r=_getWriteConcern(n,i);if(t.constructor===Array)for(var l=0,u=0;u<t.length;u++)++l,GridStore.unlink(n,t[u],i,function(){0==--l&&o(null,e)});else new GridStore(n,t,\"w\",i).open(function(n,t){if(n)return o(n);deleteChunks(t,function(n){if(n)return o(n);t.collection(function(n,i){if(n)return o(n);i.remove({_id:t.fileId},r,function(n){o(n,e)})})})})},_writeNormal=function(e,n,t,i,o){return Buffer.isBuffer(n)?writeBuffer(e,n,t,o):writeBuffer(e,Buffer.from(n,\"binary\"),t,o)},_setWriteConcernHash=function(e){const n=Object.assign(e,e.writeConcern);var t={};return null!=n.w&&(t.w=n.w),!0===n.journal&&(t.j=n.journal),!0===n.j&&(t.j=n.j),!0===n.fsync&&(t.fsync=n.fsync),null!=n.wtimeout&&(t.wtimeout=n.wtimeout),t},_getWriteConcern=function(e,n){var t={w:1};if(null!=(n=n||{}).writeConcern||null!=n.w||\"boolean\"==typeof n.j||\"boolean\"==typeof n.journal||\"boolean\"==typeof n.fsync?t=_setWriteConcernHash(n):null!=n.safe&&\"object\"==typeof n.safe?t=_setWriteConcernHash(n.safe):\"boolean\"==typeof n.safe?t={w:n.safe?1:0}:null!=e.options.writeConcern||null!=e.options.w||\"boolean\"==typeof e.options.j||\"boolean\"==typeof e.options.journal||\"boolean\"==typeof e.options.fsync?t=_setWriteConcernHash(e.options):!e.safe||null==e.safe.w&&\"boolean\"!=typeof e.safe.j&&\"boolean\"!=typeof e.safe.journal&&\"boolean\"!=typeof e.safe.fsync?\"boolean\"==typeof e.safe&&(t={w:e.safe?1:0}):t=_setWriteConcernHash(e.safe),t.w<1&&(!0===t.journal||!0===t.j||!0===t.fsync))throw MongoError.create({message:\"No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true\",driver:!0});return t},GridStoreStream=function(e){Duplex.call(this),this.gs=e,this.endCalled=!1,this.totalBytesToRead=this.gs.length-this.gs.position,this.seekPosition=this.gs.position};inherits(GridStoreStream,Duplex),GridStoreStream.prototype._pipe=GridStoreStream.prototype.pipe,GridStoreStream.prototype.pipe=function(e){var n=this;return n.gs.isOpen?(n.totalBytesToRead=n.gs.length-n.gs.position,n._pipe.apply(n,[e])):n.gs.open(function(t){if(t)return n.emit(\"error\",t);n.totalBytesToRead=n.gs.length-n.gs.position,n._pipe.apply(n,[e])}),e},GridStoreStream.prototype._read=function(){var e=this,n=function(){e.gs.read(t,function(n,t){return n&&!e.endCalled?e.emit(\"error\",n):e.endCalled||null==t?e.push(null):(t.length<=e.totalBytesToRead?(e.totalBytesToRead=e.totalBytesToRead-t.length,e.push(t)):t.length>e.totalBytesToRead&&(e.totalBytesToRead=e.totalBytesToRead-t._index,e.push(t.slice(0,t._index))),void(e.totalBytesToRead<=0&&(e.endCalled=!0)))})},t=e.gs.length<e.gs.chunkSize?e.gs.length-e.seekPosition:e.gs.chunkSize;e.gs.isOpen?n():e.gs.open(function(t){if(e.totalBytesToRead=e.gs.length-e.gs.position,t)return e.emit(\"error\",t);n()})},GridStoreStream.prototype.destroy=function(){this.pause(),this.endCalled=!0,this.gs.close(),this.emit(\"end\")},GridStoreStream.prototype.write=function(e){var n=this;return n.endCalled?n.emit(\"error\",MongoError.create({message:\"attempting to write to stream after end called\",driver:!0})):n.gs.isOpen?(n.gs.write(e,function(){n.emit(\"drain\")}),!0):(n.gs.open(function(){n.gs.isOpen=!0,n.gs.write(e,function(){process.nextTick(function(){n.emit(\"drain\")})})}),!1)},GridStoreStream.prototype.end=function(e,n,t){var i=this,o=Array.prototype.slice.call(arguments,0);t=\"function\"==typeof o[o.length-1]?o.pop():void 0,e=o.length?o.shift():null,o.length&&o.shift(),i.endCalled=!0,e&&i.gs.write(e,function(){i.gs.close(function(){\"function\"==typeof t&&t(),i.emit(\"end\")})}),i.gs.close(function(){\"function\"==typeof t&&t(),i.emit(\"end\")})},module.exports=GridStore;","node_modules/mongodb/lib/gridfs/chunk.js":"\"use strict\";var Binary=require(\"../core\").BSON.Binary,ObjectID=require(\"../core\").BSON.ObjectID,Buffer=require(\"safe-buffer\").Buffer,Chunk=function(t,n,i){if(!(this instanceof Chunk))return new Chunk(t,n);this.file=t;var e=null==n?{}:n;if(this.writeConcern=i||{w:1},this.objectId=null==e._id?new ObjectID:e._id,this.chunkNumber=null==e.n?0:e.n,this.data=new Binary,\"string\"==typeof e.data){var r=Buffer.alloc(e.data.length);r.write(e.data,0,e.data.length,\"binary\"),this.data=new Binary(r)}else if(Array.isArray(e.data)){r=Buffer.alloc(e.data.length);var a=e.data.join(\"\");r.write(a,0,a.length,\"binary\"),this.data=new Binary(r)}else if(e.data&&\"Binary\"===e.data._bsontype)this.data=e.data;else if(!Buffer.isBuffer(e.data)&&null!=e.data)throw Error(\"Illegal chunk format\");this.internalPosition=0};Chunk.prototype.write=function(t,n){return this.data.write(t,this.internalPosition,t.length,\"binary\"),this.internalPosition=this.data.length(),null!=n?n(null,this):this},Chunk.prototype.read=function(t){if(t=null==t||0===t?this.length():t,this.length()-this.internalPosition+1>=t){var n=this.data.read(this.internalPosition,t);return this.internalPosition=this.internalPosition+t,n}return\"\"},Chunk.prototype.readSlice=function(t){if(this.length()-this.internalPosition>=t){var n=null;return null!=this.data.buffer?n=this.data.buffer.slice(this.internalPosition,this.internalPosition+t):(n=Buffer.alloc(t),t=this.data.readInto(n,this.internalPosition)),this.internalPosition=this.internalPosition+t,n}return null},Chunk.prototype.eof=function(){return this.internalPosition===this.length()},Chunk.prototype.getc=function(){return this.read(1)},Chunk.prototype.rewind=function(){this.internalPosition=0,this.data=new Binary},Chunk.prototype.save=function(t,n){var i=this;\"function\"==typeof t&&(n=t,t={}),i.file.chunkCollection(function(e,r){if(e)return n(e);var a={upsert:!0};for(var o in t)a[o]=t[o];for(o in i.writeConcern)a[o]=i.writeConcern[o];i.data.length()>0?i.buildMongoObject(function(t){var e={forceServerObjectId:!0};for(var o in i.writeConcern)e[o]=i.writeConcern[o];r.replaceOne({_id:i.objectId},t,a,function(t){n(t,i)})}):n(null,i)})},Chunk.prototype.buildMongoObject=function(t){var n={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};null!=this.objectId&&(n._id=this.objectId),t(n)},Chunk.prototype.length=function(){return this.data.length()},Object.defineProperty(Chunk.prototype,\"position\",{enumerable:!0,get:function(){return this.internalPosition},set:function(t){this.internalPosition=t}}),Chunk.DEFAULT_CHUNK_SIZE=261120,module.exports=Chunk;","node_modules/mongodb/lib/aggregation_cursor.js":"\"use strict\";const MongoError=require(\"./core\").MongoError,Cursor=require(\"./cursor\"),CursorState=require(\"./core/cursor\").CursorState;class AggregationCursor extends Cursor{constructor(r,e,t){super(r,e,t)}batchSize(r){if(this.s.state===CursorState.CLOSED||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof r)throw MongoError.create({message:\"batchSize requires an integer\",driver:!0});return this.operation.options.batchSize=r,this.setCursorBatchSize(r),this}geoNear(r){return this.operation.addToPipeline({$geoNear:r}),this}group(r){return this.operation.addToPipeline({$group:r}),this}limit(r){return this.operation.addToPipeline({$limit:r}),this}match(r){return this.operation.addToPipeline({$match:r}),this}maxTimeMS(r){return this.operation.options.maxTimeMS=r,this}out(r){return this.operation.addToPipeline({$out:r}),this}project(r){return this.operation.addToPipeline({$project:r}),this}lookup(r){return this.operation.addToPipeline({$lookup:r}),this}redact(r){return this.operation.addToPipeline({$redact:r}),this}skip(r){return this.operation.addToPipeline({$skip:r}),this}sort(r){return this.operation.addToPipeline({$sort:r}),this}unwind(r){return this.operation.addToPipeline({$unwind:r}),this}getLogger(){return this.logger}}AggregationCursor.prototype.get=AggregationCursor.prototype.toArray,module.exports=AggregationCursor;","node_modules/mongodb/lib/command_cursor.js":"\"use strict\";const ReadPreference=require(\"./core\").ReadPreference,MongoError=require(\"./core\").MongoError,Cursor=require(\"./cursor\"),CursorState=require(\"./core/cursor\").CursorState;class CommandCursor extends Cursor{constructor(r,e,s,o){super(r,e,s,o)}setReadPreference(r){if(this.s.state===CursorState.CLOSED||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(this.s.state!==CursorState.INIT)throw MongoError.create({message:\"cannot change cursor readPreference after cursor has been accessed\",driver:!0});if(r instanceof ReadPreference)this.options.readPreference=r;else{if(\"string\"!=typeof r)throw new TypeError(\"Invalid read preference: \"+r);this.options.readPreference=new ReadPreference(r)}return this}batchSize(r){if(this.s.state===CursorState.CLOSED||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof r)throw MongoError.create({message:\"batchSize requires an integer\",driver:!0});return this.cmd.cursor&&(this.cmd.cursor.batchSize=r),this.setCursorBatchSize(r),this}maxTimeMS(r){return this.topology.lastIsMaster().minWireVersion>2&&(this.cmd.maxTimeMS=r),this}getLogger(){return this.logger}}CommandCursor.prototype.get=CommandCursor.prototype.toArray,module.exports=CommandCursor;","node_modules/mongodb/lib/cursor.js":"\"use strict\";const Transform=require(\"stream\").Transform,PassThrough=require(\"stream\").PassThrough,deprecate=require(\"util\").deprecate,handleCallback=require(\"./utils\").handleCallback,ReadPreference=require(\"./core\").ReadPreference,MongoError=require(\"./core\").MongoError,CoreCursor=require(\"./core/cursor\").CoreCursor,CursorState=require(\"./core/cursor\").CursorState,Map=require(\"./core\").BSON.Map,maybePromise=require(\"./utils\").maybePromise,executeOperation=require(\"./operations/execute_operation\"),formattedOrderClause=require(\"./utils\").formattedOrderClause,Explain=require(\"./explain\").Explain,Aspect=require(\"./operations/operation\").Aspect,each=require(\"./operations/cursor_ops\").each,CountOperation=require(\"./operations/count\"),flags=[\"tailable\",\"oplogReplay\",\"noCursorTimeout\",\"awaitData\",\"exhaust\",\"partial\"],fields=[\"numberOfRetries\",\"tailableRetryInterval\"];class Cursor extends CoreCursor{constructor(r,e,t,s){super(r,e,t,s),this.operation&&(s=this.operation.options);const o=s.numberOfRetries||5,i=s.tailableRetryInterval||500,a=o,n=s.promiseLibrary||Promise;this.s={numberOfRetries:o,tailableRetryInterval:i,currentNumberOfRetries:a,state:CursorState.INIT,promiseLibrary:n,explicitlyIgnoreSession:!!s.explicitlyIgnoreSession},!s.explicitlyIgnoreSession&&s.session&&(this.cursorState.session=s.session),!0===this.options.noCursorTimeout&&this.addCursorFlag(\"noCursorTimeout\",!0);let u=1e3;this.cmd.cursor&&this.cmd.cursor.batchSize?u=this.cmd.cursor.batchSize:s.cursor&&s.cursor.batchSize?u=s.cursor.batchSize:\"number\"==typeof s.batchSize&&(u=s.batchSize),this.setCursorBatchSize(u)}get readPreference(){return this.operation?this.operation.readPreference:this.options.readPreference}get sortValue(){return this.cmd.sort}_initializeCursor(r){this.operation&&null!=this.operation.session?this.cursorState.session=this.operation.session:this.s.explicitlyIgnoreSession||this.cursorState.session||!this.topology.hasSessionSupport()||(this.cursorState.session=this.topology.startSession({owner:this}),this.operation&&(this.operation.session=this.cursorState.session)),super._initializeCursor(r)}hasNext(r){if(this.s.state===CursorState.CLOSED||this.isDead&&this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return maybePromise(this,r,r=>{const e=this;if(e.isNotified())return r(null,!1);e._next((t,s)=>t?r(t):null==s||e.s.state===Cursor.CLOSED||e.isDead()?r(null,!1):(e.s.state=CursorState.OPEN,e.cursorState.cursorIndex--,e.cursorState.limit>0&&e.cursorState.currentLimit--,void r(null,!0)))})}next(r){return maybePromise(this,r,r=>{const e=this;if(e.s.state===CursorState.CLOSED||e.isDead&&e.isDead())r(MongoError.create({message:\"Cursor is closed\",driver:!0}));else{if(e.s.state===CursorState.INIT&&e.cmd.sort)try{e.cmd.sort=formattedOrderClause(e.cmd.sort)}catch(e){return r(e)}e._next((t,s)=>{if(t)return r(t);e.s.state=CursorState.OPEN,r(null,s)})}})}filter(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.query=r,this}maxScan(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.maxScan=r,this}hint(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.hint=r,this}min(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.min=r,this}max(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.max=r,this}returnKey(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.returnKey=r,this}showRecordId(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.showDiskLoc=r,this}snapshot(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.snapshot=r,this}setCursorOption(r,e){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(-1===fields.indexOf(r))throw MongoError.create({message:`option ${r} is not a supported option ${fields}`,driver:!0});return this.s[r]=e,\"numberOfRetries\"===r&&(this.s.currentNumberOfRetries=e),this}addCursorFlag(r,e){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(-1===flags.indexOf(r))throw MongoError.create({message:`flag ${r} is not a supported flag ${flags}`,driver:!0});if(\"boolean\"!=typeof e)throw MongoError.create({message:`flag ${r} must be a boolean value`,driver:!0});return this.cmd[r]=e,this}addQueryModifier(r,e){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(\"$\"!==r[0])throw MongoError.create({message:`${r} is not a valid query modifier`,driver:!0});const t=r.substr(1);return this.cmd[t]=e,\"orderby\"===t&&(this.cmd.sort=this.cmd[t]),this}comment(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.comment=r,this}maxAwaitTimeMS(r){if(\"number\"!=typeof r)throw MongoError.create({message:\"maxAwaitTimeMS must be a number\",driver:!0});if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.maxAwaitTimeMS=r,this}maxTimeMS(r){if(\"number\"!=typeof r)throw MongoError.create({message:\"maxTimeMS must be a number\",driver:!0});if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.maxTimeMS=r,this}project(r){if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});return this.cmd.fields=r,this}sort(r,e){if(this.options.tailable)throw MongoError.create({message:\"Tailable cursor doesn't support sorting\",driver:!0});if(this.s.state===CursorState.CLOSED||this.s.state===CursorState.OPEN||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});let t=r;return Array.isArray(t)&&Array.isArray(t[0])&&(t=new Map(t.map(r=>{const e=[r[0],null];if(\"asc\"===r[1])e[1]=1;else if(\"desc\"===r[1])e[1]=-1;else{if(1!==r[1]&&-1!==r[1]&&!r[1].$meta)throw new MongoError(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\");e[1]=r[1]}return e}))),null!=e&&(t=[[r,e]]),this.cmd.sort=t,this}batchSize(r){if(this.options.tailable)throw MongoError.create({message:\"Tailable cursor doesn't support batchSize\",driver:!0});if(this.s.state===CursorState.CLOSED||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof r)throw MongoError.create({message:\"batchSize requires an integer\",driver:!0});return this.cmd.batchSize=r,this.setCursorBatchSize(r),this}collation(r){return this.cmd.collation=r,this}limit(r){if(this.options.tailable)throw MongoError.create({message:\"Tailable cursor doesn't support limit\",driver:!0});if(this.s.state===CursorState.OPEN||this.s.state===CursorState.CLOSED||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof r)throw MongoError.create({message:\"limit requires an integer\",driver:!0});return this.cmd.limit=r,this.setCursorLimit(r),this}skip(r){if(this.options.tailable)throw MongoError.create({message:\"Tailable cursor doesn't support skip\",driver:!0});if(this.s.state===CursorState.OPEN||this.s.state===CursorState.CLOSED||this.isDead())throw MongoError.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof r)throw MongoError.create({message:\"skip requires an integer\",driver:!0});return this.cmd.skip=r,this.setCursorSkip(r),this}each(r){this.rewind(),this.s.state=CursorState.INIT,each(this,r)}forEach(r,e){if(this.rewind(),this.s.state=CursorState.INIT,\"function\"!=typeof e)return new this.s.promiseLibrary((e,t)=>{each(this,(s,o)=>s?(t(s),!1):null==o?(e(null),!1):(r(o),!0))});each(this,(t,s)=>{if(t)return e(t),!1;if(null!=s)return r(s),!0;if(null==s&&e){const r=e;return e=null,r(null),!1}})}setReadPreference(r){if(this.s.state!==CursorState.INIT)throw MongoError.create({message:\"cannot change cursor readPreference after cursor has been accessed\",driver:!0});if(r instanceof ReadPreference)this.options.readPreference=r;else{if(\"string\"!=typeof r)throw new TypeError(\"Invalid read preference: \"+r);this.options.readPreference=new ReadPreference(r)}return this}toArray(r){if(this.options.tailable)throw MongoError.create({message:\"Tailable cursor cannot be converted to array\",driver:!0});return maybePromise(this,r,r=>{const e=this,t=[];e.rewind(),e.s.state=CursorState.INIT;const s=()=>{e._next((o,i)=>{if(o)return handleCallback(r,o);if(null==i)return e.close({skipKillCursors:!0},()=>handleCallback(r,null,t));if(t.push(i),e.bufferedCount()>0){let r=e.readBufferedDocuments(e.bufferedCount());Array.prototype.push.apply(t,r)}s()})};s()})}count(r,e,t){if(null==this.cmd.query)throw MongoError.create({message:\"count can only be used with find command\",driver:!0});\"function\"==typeof e&&(t=e,e={}),e=e||{},\"function\"==typeof r&&(t=r,r=!0),this.cursorState.session&&(e=Object.assign({},e,{session:this.cursorState.session}));const s=new CountOperation(this,r,e);return executeOperation(this.topology,s,t)}close(r,e){return\"function\"==typeof r&&(e=r,r={}),r=Object.assign({},{skipKillCursors:!1},r),maybePromise(this,e,e=>{this.s.state=CursorState.CLOSED,r.skipKillCursors||this.kill(),this._endSession(()=>{this.emit(\"close\"),e(null,this)})})}map(r){if(this.cursorState.transforms&&this.cursorState.transforms.doc){const e=this.cursorState.transforms.doc;this.cursorState.transforms.doc=(t=>r(e(t)))}else this.cursorState.transforms={doc:r};return this}isClosed(){return this.isDead()}destroy(r){r&&this.emit(\"error\",r),this.pause(),this.close()}stream(r){return this.cursorState.streamOptions=r||{},this}transformStream(r){const e=r||{};if(\"function\"==typeof e.transform){const r=new Transform({objectMode:!0,transform:function(r,t,s){this.push(e.transform(r)),s()}});return this.pipe(r)}return this.pipe(new PassThrough({objectMode:!0}))}explain(r,e){if(\"function\"==typeof r&&(e=r,r=!0),void 0===r&&(r=!0),!this.operation||!this.operation.hasAspect(Aspect.EXPLAINABLE))throw new MongoError(\"This command cannot be explained\");return this.operation.explain=new Explain(r),maybePromise(this,e,r=>{CoreCursor.prototype._next.apply(this,[r])})}getLogger(){return this.logger}}Cursor.prototype.maxTimeMs=Cursor.prototype.maxTimeMS,deprecate(Cursor.prototype.each,\"Cursor.each is deprecated. Use Cursor.forEach instead.\"),deprecate(Cursor.prototype.maxScan,\"Cursor.maxScan is deprecated, and will be removed in a later version\"),deprecate(Cursor.prototype.snapshot,\"Cursor Snapshot is deprecated, and will be removed in a later version\"),module.exports=Cursor;","node_modules/mongodb/lib/gridfs-stream/index.js":"\"use strict\";var Emitter=require(\"events\").EventEmitter,GridFSBucketReadStream=require(\"./download\"),GridFSBucketWriteStream=require(\"./upload\"),shallowClone=require(\"../utils\").shallowClone,toError=require(\"../utils\").toError,util=require(\"util\"),executeLegacyOperation=require(\"../utils\").executeLegacyOperation,DEFAULT_GRIDFS_BUCKET_OPTIONS={bucketName:\"fs\",chunkSizeBytes:261120};function GridFSBucket(e,t){if(Emitter.apply(this),this.setMaxListeners(0),t&&\"object\"==typeof t){t=shallowClone(t);for(var i=Object.keys(DEFAULT_GRIDFS_BUCKET_OPTIONS),o=0;o<i.length;++o)t[i[o]]||(t[i[o]]=DEFAULT_GRIDFS_BUCKET_OPTIONS[i[o]])}else t=DEFAULT_GRIDFS_BUCKET_OPTIONS;this.s={db:e,options:t,_chunksCollection:e.collection(t.bucketName+\".chunks\"),_filesCollection:e.collection(t.bucketName+\".files\"),checkedIndexes:!1,calledOpenUploadStream:!1,promiseLibrary:e.s.promiseLibrary||Promise}}function _delete(e,t,i){e.s._filesCollection.deleteOne({_id:t},function(o,r){if(o)return i(o);e.s._chunksCollection.deleteMany({files_id:t},function(e){return e?i(e):r.result.n?void i():i(new Error(\"FileNotFound: no file with id \"+t+\" found\"))})})}function _rename(e,t,i,o){var r={_id:t},n={$set:{filename:i}};e.s._filesCollection.updateOne(r,n,function(e,i){return e?o(e):i.result.n?void o():o(toError(\"File with id \"+t+\" not found\"))})}function _drop(e,t){e.s._filesCollection.drop(function(i){if(i)return t(i);e.s._chunksCollection.drop(function(e){return e?t(e):t()})})}module.exports=GridFSBucket,util.inherits(GridFSBucket,Emitter),GridFSBucket.prototype.openUploadStream=function(e,t){return(t=t?shallowClone(t):{}).chunkSizeBytes||(t.chunkSizeBytes=this.s.options.chunkSizeBytes),new GridFSBucketWriteStream(this,e,t)},GridFSBucket.prototype.openUploadStreamWithId=function(e,t,i){return(i=i?shallowClone(i):{}).chunkSizeBytes||(i.chunkSizeBytes=this.s.options.chunkSizeBytes),i.id=e,new GridFSBucketWriteStream(this,t,i)},GridFSBucket.prototype.openDownloadStream=function(e,t){var i={_id:e};return t={start:t&&t.start,end:t&&t.end},new GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,i,t)},GridFSBucket.prototype.delete=function(e,t){return executeLegacyOperation(this.s.db.s.topology,_delete,[this,e,t],{skipSessions:!0})},GridFSBucket.prototype.find=function(e,t){e=e||{},t=t||{};var i=this.s._filesCollection.find(e);return null!=t.batchSize&&i.batchSize(t.batchSize),null!=t.limit&&i.limit(t.limit),null!=t.maxTimeMS&&i.maxTimeMS(t.maxTimeMS),null!=t.noCursorTimeout&&i.addCursorFlag(\"noCursorTimeout\",t.noCursorTimeout),null!=t.skip&&i.skip(t.skip),null!=t.sort&&i.sort(t.sort),i},GridFSBucket.prototype.openDownloadStreamByName=function(e,t){var i={uploadDate:-1},o=null;t&&null!=t.revision&&(t.revision>=0?(i={uploadDate:1},o=t.revision):o=-t.revision-1);var r={filename:e};return t={sort:i,skip:o,start:t&&t.start,end:t&&t.end},new GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,r,t)},GridFSBucket.prototype.rename=function(e,t,i){return executeLegacyOperation(this.s.db.s.topology,_rename,[this,e,t,i],{skipSessions:!0})},GridFSBucket.prototype.drop=function(e){return executeLegacyOperation(this.s.db.s.topology,_drop,[this,e],{skipSessions:!0})},GridFSBucket.prototype.getLogger=function(){return this.s.db.s.logger};","node_modules/bson/index.js":"var BSON=require(\"./lib/bson/bson\"),Binary=require(\"./lib/bson/binary\"),Code=require(\"./lib/bson/code\"),DBRef=require(\"./lib/bson/db_ref\"),Decimal128=require(\"./lib/bson/decimal128\"),Double=require(\"./lib/bson/double\"),Int32=require(\"./lib/bson/int_32\"),Long=require(\"./lib/bson/long\"),Map=require(\"./lib/bson/map\"),MaxKey=require(\"./lib/bson/max_key\"),MinKey=require(\"./lib/bson/min_key\"),ObjectId=require(\"./lib/bson/objectid\"),BSONRegExp=require(\"./lib/bson/regexp\"),Symbol=require(\"./lib/bson/symbol\"),Timestamp=require(\"./lib/bson/timestamp\");BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992,BSON.Binary=Binary,BSON.Code=Code,BSON.DBRef=DBRef,BSON.Decimal128=Decimal128,BSON.Double=Double,BSON.Int32=Int32,BSON.Long=Long,BSON.Map=Map,BSON.MaxKey=MaxKey,BSON.MinKey=MinKey,BSON.ObjectId=ObjectId,BSON.ObjectID=ObjectId,BSON.BSONRegExp=BSONRegExp,BSON.Symbol=Symbol,BSON.Timestamp=Timestamp,module.exports=BSON;","node_modules/optional-require/index.js":"\"use strict\";const lib=require(\"./dist\");let __defaultLog;module.exports=function(){return lib.makeOptionalRequire.apply(lib,arguments)},module.exports.tryRequire=lib.tryRequire,module.exports.tryResolve=lib.tryResolve,module.exports.try=lib.tryRequire,module.exports.resolve=lib.tryResolve,module.exports.makeOptionalRequire=lib.makeOptionalRequire,module.exports.optionalRequire=lib.optionalRequire,module.exports.optionalRequireCwd=lib.optionalRequireCwd,module.exports.optionalRequireTop=lib.optionalRequireTop,Object.defineProperty(module.exports,\"log\",{set(e){__defaultLog=e,lib.setDefaultLog(e)},get:()=>__defaultLog});","node_modules/mongodb/lib/core/utils.js":"\"use strict\";const os=require(\"os\"),crypto=require(\"crypto\"),requireOptional=require(\"optional-require\")(require),uuidV4=()=>{const e=crypto.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e};function relayEvents(e,r,t){t.forEach(t=>e.on(t,e=>r.emit(t,e)))}function retrieveKerberos(){let e;try{e=requireOptional(\"kerberos\")}catch(e){if(\"MODULE_NOT_FOUND\"===e.code)throw new Error(\"The `kerberos` module was not found. Please install it and try again.\");throw e}return e}const noEJSONError=function(){throw new Error(\"The `mongodb-extjson` module was not found. Please install it and try again.\")};function retrieveEJSON(){let e=requireOptional(\"mongodb-extjson\");return e||(e={parse:noEJSONError,deserialize:noEJSONError,serialize:noEJSONError,stringify:noEJSONError,setBSONModule:noEJSONError,BSON:noEJSONError}),e}function maxWireVersion(e){if(e){if(e.ismaster)return e.ismaster.maxWireVersion;if(\"function\"==typeof e.lastIsMaster){const r=e.lastIsMaster();if(r)return r.maxWireVersion}if(e.description)return e.description.maxWireVersion}return 0}function collationNotSupported(e,r){return r&&r.collation&&maxWireVersion(e)<5}function isPromiseLike(e){return e&&\"function\"==typeof e.then}function eachAsync(e,r,t){e=e||[];let n=0,o=0;for(n=0;n<e.length;++n)o++,r(e[n],i);function i(r){o--,r?t(r):n===e.length&&o<=0&&t()}0!==o||t()}function eachAsyncSeries(e,r,t){let n=0,o=(e=e||[]).length;0!==o?r(e[n],function i(a){n++,o--,a?t(a):n===e.length&&o<=0?t():r(e[n],i)}):t()}function isUnifiedTopology(e){return null!=e.description}function arrayStrictEqual(e,r){return!(!Array.isArray(e)||!Array.isArray(r))&&(e.length===r.length&&e.every((e,t)=>e===r[t]))}function tagsStrictEqual(e,r){const t=Object.keys(e),n=Object.keys(r);return t.length===n.length&&t.every(t=>r[t]===e[t])}function errorStrictEqual(e,r){return e===r||!(null==e&&null!=r||null!=e&&null==r)&&(e.constructor.name===r.constructor.name&&e.message===r.message)}function makeStateMachine(e){return function(r,t){const n=e[r.s.state];if(n&&n.indexOf(t)<0)throw new TypeError(`illegal state transition from [${r.s.state}] => [${t}], allowed: [${n}]`);r.emit(\"stateChanged\",r.s.state,t),r.s.state=t}}function makeClientMetadata(e){e=e||{};const r={driver:{name:\"nodejs\",version:require(\"../../package.json\").version},os:{type:os.type(),name:process.platform,architecture:process.arch,version:os.release()},platform:`'Node.js ${process.version}, ${os.endianness} (${e.useUnifiedTopology?\"unified\":\"legacy\"})`};if(e.driverInfo&&(e.driverInfo.name&&(r.driver.name=`${r.driver.name}|${e.driverInfo.name}`),e.driverInfo.version&&(r.version=`${r.driver.version}|${e.driverInfo.version}`),e.driverInfo.platform&&(r.platform=`${r.platform}|${e.driverInfo.platform}`)),e.appname){const t=Buffer.from(e.appname);r.application={name:t.length>128?t.slice(0,128).toString(\"utf8\"):e.appname}}return r}const noop=()=>{};module.exports={uuidV4:uuidV4,relayEvents:relayEvents,collationNotSupported:collationNotSupported,retrieveEJSON:retrieveEJSON,retrieveKerberos:retrieveKerberos,maxWireVersion:maxWireVersion,isPromiseLike:isPromiseLike,eachAsync:eachAsync,eachAsyncSeries:eachAsyncSeries,isUnifiedTopology:isUnifiedTopology,arrayStrictEqual:arrayStrictEqual,tagsStrictEqual:tagsStrictEqual,errorStrictEqual:errorStrictEqual,makeStateMachine:makeStateMachine,makeClientMetadata:makeClientMetadata,noop:noop};","node_modules/mongodb/lib/core/error.js":"\"use strict\";const kErrorLabels=Symbol(\"errorLabels\");class MongoError extends Error{constructor(r){if(r instanceof Error)super(r.message),this.stack=r.stack;else{if(\"string\"==typeof r)super(r);else for(var e in super(r.message||r.errmsg||r.$err||\"n/a\"),r.errorLabels&&(this[kErrorLabels]=new Set(r.errorLabels)),r)\"errorLabels\"!==e&&\"errmsg\"!==e&&(this[e]=r[e]);Error.captureStackTrace(this,this.constructor)}this.name=\"MongoError\"}get errmsg(){return this.message}static create(r){return new MongoError(r)}hasErrorLabel(r){return null!=this[kErrorLabels]&&this[kErrorLabels].has(r)}addErrorLabel(r){null==this[kErrorLabels]&&(this[kErrorLabels]=new Set),this[kErrorLabels].add(r)}get errorLabels(){return this[kErrorLabels]?Array.from(this[kErrorLabels]):[]}}const kBeforeHandshake=Symbol(\"beforeHandshake\");function isNetworkErrorBeforeHandshake(r){return!0===r[kBeforeHandshake]}class MongoNetworkError extends MongoError{constructor(r,e){super(r),this.name=\"MongoNetworkError\",e&&\"boolean\"==typeof e.beforeHandshake&&(this[kBeforeHandshake]=e.beforeHandshake)}}class MongoNetworkTimeoutError extends MongoNetworkError{constructor(r,e){super(r,e),this.name=\"MongoNetworkTimeoutError\"}}class MongoParseError extends MongoError{constructor(r){super(r),this.name=\"MongoParseError\"}}class MongoTimeoutError extends MongoError{constructor(r,e){e&&e.error?super(e.error.message||e.error):super(r),this.name=\"MongoTimeoutError\",e&&(this.reason=e)}}class MongoServerSelectionError extends MongoTimeoutError{constructor(r,e){super(r,e),this.name=\"MongoServerSelectionError\"}}function makeWriteConcernResultObject(r){const e=Object.assign({},r);return 0===e.ok&&(e.ok=1,delete e.errmsg,delete e.code,delete e.codeName),e}class MongoWriteConcernError extends MongoError{constructor(r,e){super(r),this.name=\"MongoWriteConcernError\",e&&Array.isArray(e.errorLabels)&&(this[kErrorLabels]=new Set(e.errorLabels)),null!=e&&(this.result=makeWriteConcernResultObject(e))}}const RETRYABLE_ERROR_CODES=new Set([6,7,89,91,189,9001,10107,11600,11602,13435,13436]),RETRYABLE_WRITE_ERROR_CODES=new Set([11600,11602,10107,13435,13436,189,91,7,6,89,9001,262]);function isRetryableWriteError(r){return r instanceof MongoWriteConcernError?RETRYABLE_WRITE_ERROR_CODES.has(r.code)||RETRYABLE_WRITE_ERROR_CODES.has(r.result.code):RETRYABLE_WRITE_ERROR_CODES.has(r.code)}function isRetryableError(r){return RETRYABLE_ERROR_CODES.has(r.code)||r instanceof MongoNetworkError||r.message.match(/not master/)||r.message.match(/node is recovering/)}const SDAM_RECOVERING_CODES=new Set([91,189,11600,11602,13436]),SDAM_NOTMASTER_CODES=new Set([10107,13435]),SDAM_NODE_SHUTTING_DOWN_ERROR_CODES=new Set([11600,91]);function isRecoveringError(r){return!(!r.code||!SDAM_RECOVERING_CODES.has(r.code))||(r.message.match(/not master or secondary/)||r.message.match(/node is recovering/))}function isNotMasterError(r){return!(!r.code||!SDAM_NOTMASTER_CODES.has(r.code))||!isRecoveringError(r)&&r.message.match(/not master/)}function isNodeShuttingDownError(r){return r.code&&SDAM_NODE_SHUTTING_DOWN_ERROR_CODES.has(r.code)}function isSDAMUnrecoverableError(r){return r instanceof MongoParseError||null==r||!(!isRecoveringError(r)&&!isNotMasterError(r))}module.exports={MongoError:MongoError,MongoNetworkError:MongoNetworkError,MongoNetworkTimeoutError:MongoNetworkTimeoutError,MongoParseError:MongoParseError,MongoTimeoutError:MongoTimeoutError,MongoServerSelectionError:MongoServerSelectionError,MongoWriteConcernError:MongoWriteConcernError,isRetryableError:isRetryableError,isSDAMUnrecoverableError:isSDAMUnrecoverableError,isNodeShuttingDownError:isNodeShuttingDownError,isRetryableWriteError:isRetryableWriteError,isNetworkErrorBeforeHandshake:isNetworkErrorBeforeHandshake};","node_modules/mongodb/lib/core/connection/connection.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,crypto=require(\"crypto\"),debugOptions=require(\"./utils\").debugOptions,parseHeader=require(\"../wireprotocol/shared\").parseHeader,decompress=require(\"../wireprotocol/compression\").decompress,Response=require(\"./commands\").Response,BinMsg=require(\"./msg\").BinMsg,MongoNetworkError=require(\"../error\").MongoNetworkError,MongoNetworkTimeoutError=require(\"../error\").MongoNetworkTimeoutError,MongoError=require(\"../error\").MongoError,Logger=require(\"./logger\"),OP_COMPRESSED=require(\"../wireprotocol/shared\").opcodes.OP_COMPRESSED,OP_MSG=require(\"../wireprotocol/shared\").opcodes.OP_MSG,MESSAGE_HEADER_SIZE=require(\"../wireprotocol/shared\").MESSAGE_HEADER_SIZE,Buffer=require(\"safe-buffer\").Buffer,Query=require(\"./commands\").Query,CommandResult=require(\"./command_result\");let _id=0;const DEFAULT_MAX_BSON_MESSAGE_SIZE=67108864,DEBUG_FIELDS=[\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"socketTimeout\",\"ssl\",\"ca\",\"crl\",\"cert\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"checkServerIdentity\"];let connectionAccountingSpy=void 0,connectionAccounting=!1,connections={};class Connection extends EventEmitter{constructor(e,o){if(super(),!(o=o||{}).bson)throw new TypeError(\"must pass in valid bson parser\");this.id=_id++,this.options=o,this.logger=Logger(\"Connection\",o),this.bson=o.bson,this.tag=o.tag,this.maxBsonMessageSize=o.maxBsonMessageSize||DEFAULT_MAX_BSON_MESSAGE_SIZE,this.port=o.port||27017,this.host=o.host||\"localhost\",this.socketTimeout=\"number\"==typeof o.socketTimeout?o.socketTimeout:0,this.keepAlive=\"boolean\"!=typeof o.keepAlive||o.keepAlive,this.keepAliveInitialDelay=\"number\"==typeof o.keepAliveInitialDelay?o.keepAliveInitialDelay:12e4,this.connectionTimeout=\"number\"==typeof o.connectionTimeout?o.connectionTimeout:3e4,this.keepAliveInitialDelay>this.socketTimeout&&(this.keepAliveInitialDelay=Math.round(this.socketTimeout/2)),this.logger.isDebug()&&this.logger.debug(`creating connection ${this.id} with options [${JSON.stringify(debugOptions(DEBUG_FIELDS,o))}]`),this.responseOptions={promoteLongs:\"boolean\"!=typeof o.promoteLongs||o.promoteLongs,promoteValues:\"boolean\"!=typeof o.promoteValues||o.promoteValues,promoteBuffers:\"boolean\"==typeof o.promoteBuffers&&o.promoteBuffers},this.flushing=!1,this.queue=[],this.writeStream=null,this.destroyed=!1,this.timedOut=!1;const t=crypto.createHash(\"sha1\");t.update(this.address),this.hashedName=t.digest(\"hex\"),this.workItems=[],this.socket=e,this.socket.once(\"error\",errorHandler(this)),this.socket.once(\"timeout\",timeoutHandler(this)),this.socket.once(\"close\",closeHandler(this)),this.socket.on(\"data\",dataHandler(this)),connectionAccounting&&addConnection(this.id,this)}setSocketTimeout(e){this.socket&&this.socket.setTimeout(e)}resetSocketTimeout(){this.socket&&this.socket.setTimeout(this.socketTimeout)}static enableConnectionAccounting(e){e&&(connectionAccountingSpy=e),connectionAccounting=!0,connections={}}static disableConnectionAccounting(){connectionAccounting=!1,connectionAccountingSpy=void 0}static connections(){return connections}get address(){return`${this.host}:${this.port}`}unref(){null!=this.socket?this.socket.unref():this.once(\"connect\",()=>this.socket.unref())}flush(e){for(;this.workItems.length>0;){const o=this.workItems.shift();o.cb&&o.cb(e)}}destroy(e,o){if(\"function\"==typeof e&&(o=e,e={}),e=Object.assign({force:!1},e),connectionAccounting&&deleteConnection(this.id),null!=this.socket)return e.force||this.timedOut?(this.socket.destroy(),this.destroyed=!0,void(\"function\"==typeof o&&o(null,null))):void this.socket.end(e=>{this.destroyed=!0,\"function\"==typeof o&&o(e,null)});this.destroyed=!0}write(e){if(this.logger.isDebug())if(Array.isArray(e))for(let o=0;o<e.length;o++)this.logger.debug(`writing buffer [${e[o].toString(\"hex\")}] to ${this.address}`);else this.logger.debug(`writing buffer [${e.toString(\"hex\")}] to ${this.address}`);if(!1===this.socket.destroyed){if(!Array.isArray(e))return this.socket.write(e,\"binary\"),!0;for(let o=0;o<e.length;o++)this.socket.write(e[o],\"binary\");return!0}return!1}toString(){return\"\"+this.id}toJSON(){return{id:this.id,host:this.host,port:this.port}}isConnected(){return!this.destroyed&&(!this.socket.destroyed&&this.socket.writable)}command(e,o,t,s){\"function\"==typeof t&&(s=t,t={});const n=this,r=\"number\"==typeof t.socketTimeout?t.socketTimeout:0,i=n.options.bson,c=new Query(i,e,o,{numberToSkip:0,numberToReturn:1}),u=()=>{};function l(e,o){s(e,o),s=u}function f(e){n.resetSocketTimeout(),CONNECTION_ERROR_EVENTS.forEach(e=>n.removeListener(e,f)),n.removeListener(\"message\",a),null==e&&(e=new MongoError(`runCommand failed for connection to '${n.address}'`)),n.on(\"error\",u),l(e)}function a(e){if(e.responseTo!==c.requestId)return;n.resetSocketTimeout(),CONNECTION_ERROR_EVENTS.forEach(e=>n.removeListener(e,f)),n.removeListener(\"message\",a),e.parse({promoteValues:!0});const o=e.documents[0];0===o.ok||o.$err||o.errmsg||o.code?l(new MongoError(o)):l(void 0,new CommandResult(o,this,e))}n.setSocketTimeout(r),CONNECTION_ERROR_EVENTS.forEach(e=>n.once(e,f)),n.on(\"message\",a),n.write(c.toBin())}}const CONNECTION_ERROR_EVENTS=[\"error\",\"close\",\"timeout\",\"parseError\"];function deleteConnection(e){delete connections[e],connectionAccountingSpy&&connectionAccountingSpy.deleteConnection(e)}function addConnection(e,o){connections[e]=o,connectionAccountingSpy&&connectionAccountingSpy.addConnection(e,o)}function errorHandler(e){return function(o){connectionAccounting&&deleteConnection(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} for [${e.address}] errored out with [${JSON.stringify(o)}]`),e.emit(\"error\",new MongoNetworkError(o),e)}}function timeoutHandler(e){return function(){connectionAccounting&&deleteConnection(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} for [${e.address}] timed out`),e.timedOut=!0,e.emit(\"timeout\",new MongoNetworkTimeoutError(`connection ${e.id} to ${e.address} timed out`,{beforeHandshake:null==e.ismaster}),e)}}function closeHandler(e){return function(o){connectionAccounting&&deleteConnection(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} with for [${e.address}] closed`),o||e.emit(\"close\",new MongoNetworkError(`connection ${e.id} to ${e.address} closed`),e)}}function processMessage(e,o){const t=parseHeader(o);if(t.opCode!==OP_COMPRESSED){const s=t.opCode===OP_MSG?BinMsg:Response;return void e.emit(\"message\",new s(e.bson,o,t,o.slice(MESSAGE_HEADER_SIZE),e.responseOptions),e)}t.fromCompressed=!0;let s=MESSAGE_HEADER_SIZE;t.opCode=o.readInt32LE(s),s+=4,t.length=o.readInt32LE(s);const n=o[s+=4];s++,decompress(n,o.slice(s),(s,n)=>{if(s)return void e.emit(\"error\",s);if(n.length!==t.length)return void e.emit(\"error\",new MongoError(\"Decompressing a compressed message from the server failed. The message is corrupt.\"));const r=t.opCode===OP_MSG?BinMsg:Response;e.emit(\"message\",new r(e.bson,o,t,n,e.responseOptions),e)})}function dataHandler(e){return function(o){for(;o.length>0;)if(e.bytesRead>0&&e.sizeOfMessage>0){const t=e.sizeOfMessage-e.bytesRead;if(t>o.length)o.copy(e.buffer,e.bytesRead),e.bytesRead=e.bytesRead+o.length,o=Buffer.alloc(0);else{o.copy(e.buffer,e.bytesRead,0,t),o=o.slice(t);const s=e.buffer;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,processMessage(e,s)}}else if(null!=e.stubBuffer&&e.stubBuffer.length>0)if(e.stubBuffer.length+o.length>4){const t=Buffer.alloc(e.stubBuffer.length+o.length);e.stubBuffer.copy(t,0),o.copy(t,e.stubBuffer.length),o=t,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null}else{const t=Buffer.alloc(e.stubBuffer.length+o.length);e.stubBuffer.copy(t,0),o.copy(t,e.stubBuffer.length),o=Buffer.alloc(0)}else if(o.length>4){const t=o[0]|o[1]<<8|o[2]<<16|o[3]<<24;if(t<0||t>e.maxBsonMessageSize){const o={err:\"socketHandler\",trace:\"\",bin:e.buffer,parseState:{sizeOfMessage:t,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}};return void e.emit(\"parseError\",o,e)}if(t>4&&t<e.maxBsonMessageSize&&t>o.length)e.buffer=Buffer.alloc(t),o.copy(e.buffer,0),e.bytesRead=o.length,e.sizeOfMessage=t,e.stubBuffer=null,o=Buffer.alloc(0);else if(t>4&&t<e.maxBsonMessageSize&&t===o.length){const t=o;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,o=Buffer.alloc(0),processMessage(e,t)}else if(t<=4||t>e.maxBsonMessageSize){const s={err:\"socketHandler\",trace:null,bin:o,parseState:{sizeOfMessage:t,bytesRead:0,buffer:null,stubBuffer:null}};e.emit(\"parseError\",s,e),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,o=Buffer.alloc(0)}else{const s=o.slice(0,t);e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,o=o.slice(t),processMessage(e,s)}}else e.stubBuffer=Buffer.alloc(o.length),o.copy(e.stubBuffer,0),o=Buffer.alloc(0)}}module.exports=Connection;","node_modules/mongodb/lib/core/topologies/server.js":"\"use strict\";var inherits=require(\"util\").inherits,f=require(\"util\").format,EventEmitter=require(\"events\").EventEmitter,ReadPreference=require(\"./read_preference\"),Logger=require(\"../connection/logger\"),debugOptions=require(\"../connection/utils\").debugOptions,retrieveBSON=require(\"../connection/utils\").retrieveBSON,Pool=require(\"../connection/pool\"),MongoError=require(\"../error\").MongoError,MongoNetworkError=require(\"../error\").MongoNetworkError,wireProtocol=require(\"../wireprotocol\"),CoreCursor=require(\"../cursor\").CoreCursor,sdam=require(\"./shared\"),createCompressionInfo=require(\"./shared\").createCompressionInfo,resolveClusterTime=require(\"./shared\").resolveClusterTime,SessionMixins=require(\"./shared\").SessionMixins,relayEvents=require(\"../utils\").relayEvents;const collationNotSupported=require(\"../utils\").collationNotSupported,makeClientMetadata=require(\"../utils\").makeClientMetadata;var debugFields=[\"reconnect\",\"reconnectTries\",\"reconnectInterval\",\"emitError\",\"cursorFactory\",\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"checkServerIdentity\",\"socketTimeout\",\"ssl\",\"ca\",\"crl\",\"cert\",\"key\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"servername\"],id=0,serverAccounting=!1,servers={},BSON=retrieveBSON();function topologyId(e){return null==e.s.parent?e.id:e.s.parent.id}var Server=function(e){e=e||{},EventEmitter.call(this),this.id=id++,this.s={options:Object.assign({metadata:makeClientMetadata(e)},e),logger:Logger(\"Server\",e),Cursor:e.cursorFactory||CoreCursor,bson:e.bson||new BSON([BSON.Binary,BSON.Code,BSON.DBRef,BSON.Decimal128,BSON.Double,BSON.Int32,BSON.Long,BSON.Map,BSON.MaxKey,BSON.MinKey,BSON.ObjectId,BSON.BSONRegExp,BSON.Symbol,BSON.Timestamp]),pool:null,disconnectHandler:e.disconnectHandler,monitoring:\"boolean\"!=typeof e.monitoring||e.monitoring,inTopology:!!e.parent,monitoringInterval:\"number\"==typeof e.monitoringInterval?e.monitoringInterval:5e3,compression:{compressors:createCompressionInfo(e)},parent:e.parent},this.s.parent||(this.s.clusterTime=null),this.ismaster=null,this.lastIsMasterMS=-1,this.monitoringProcessId=null,this.initialConnect=!0,this._type=\"server\",this.lastUpdateTime=0,this.lastWriteDate=0,this.staleness=0};function disconnectHandler(e,o,r,t,s,n){return e.s.pool.isConnected()||!e.s.options.reconnect||null==e.s.disconnectHandler||s.monitoring?e.s.pool.isConnected()?void 0:(n(new MongoError(f(\"no connection available to server %s\",e.name))),!0):(e.s.disconnectHandler.add(o,r,t,s,n),!0)}function monitoringProcess(e){return function(){if(!e.s.pool.isDestroyed()){e.emit(\"monitoring\",e);var o=(new Date).getTime();e.command(\"admin.$cmd\",{ismaster:!0},{socketTimeout:\"number\"!=typeof e.s.options.connectionTimeout?2e3:e.s.options.connectionTimeout,monitoring:!0},(r,t)=>{e.lastIsMasterMS=(new Date).getTime()-o,e.s.pool.isDestroyed()||(t&&(e.ismaster=t.result),e.monitoringProcessId=setTimeout(monitoringProcess(e),e.s.monitoringInterval))})}}}inherits(Server,EventEmitter),Object.assign(Server.prototype,SessionMixins),Object.defineProperty(Server.prototype,\"type\",{enumerable:!0,get:function(){return this._type}}),Object.defineProperty(Server.prototype,\"parserType\",{enumerable:!0,get:function(){return BSON.native?\"c++\":\"js\"}}),Object.defineProperty(Server.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}}),Object.defineProperty(Server.prototype,\"clientMetadata\",{enumerable:!0,get:function(){return this.s.options.metadata}}),Object.defineProperty(Server.prototype,\"clusterTime\",{enumerable:!0,set:function(e){const o=this.s.parent?this.s.parent:this.s;resolveClusterTime(o,e)},get:function(){return(this.s.parent?this.s.parent:this.s).clusterTime||null}}),Server.enableServerAccounting=function(){serverAccounting=!0,servers={}},Server.disableServerAccounting=function(){serverAccounting=!1},Server.servers=function(){return servers},Object.defineProperty(Server.prototype,\"name\",{enumerable:!0,get:function(){return this.s.options.host+\":\"+this.s.options.port}});var eventHandler=function(e,o){return function(r,t){if(e.s.logger.isInfo()){var s=r instanceof MongoError?JSON.stringify(r):{};e.s.logger.info(f(\"server %s fired event %s out with message %s\",e.name,o,s))}if(\"connect\"===o){if(e.initialConnect=!1,e.ismaster=t.ismaster,e.lastIsMasterMS=t.lastIsMasterMS,t.agreedCompressor&&(e.s.pool.options.agreedCompressor=t.agreedCompressor),t.zlibCompressionLevel&&(e.s.pool.options.zlibCompressionLevel=t.zlibCompressionLevel),t.ismaster.$clusterTime){const o=t.ismaster.$clusterTime;e.clusterTime=o}\"isdbgrid\"===e.ismaster.msg&&(e._type=\"mongos\"),e.s.monitoring&&(e.monitoringProcessId=setTimeout(monitoringProcess(e),e.s.monitoringInterval)),sdam.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:sdam.getTopologyType(e)}),e.s.inTopology||sdam.emitTopologyDescriptionChanged(e,{topologyType:\"Single\",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:sdam.getTopologyType(e)}]}),e.s.logger.isInfo()&&e.s.logger.info(f(\"server %s connected with ismaster [%s]\",e.name,JSON.stringify(e.ismaster))),e.emit(\"connect\",e)}else if(\"error\"===o||\"parseError\"===o||\"close\"===o||\"timeout\"===o||\"reconnect\"===o||\"attemptReconnect\"===o||\"reconnectFailed\"===o){if(serverAccounting&&-1!==[\"close\",\"timeout\",\"error\",\"parseError\",\"reconnectFailed\"].indexOf(o)&&(e.s.inTopology||e.emit(\"topologyOpening\",{topologyId:e.id}),delete servers[e.id]),\"close\"===o&&sdam.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}),\"reconnectFailed\"===o)return e.emit(\"reconnectFailed\",r),void(e.listeners(\"error\").length>0&&e.emit(\"error\",r));if(-1!==[\"disconnected\",\"connecting\"].indexOf(e.s.pool.state)&&e.initialConnect&&-1!==[\"close\",\"timeout\",\"error\",\"parseError\"].indexOf(o))return e.initialConnect=!1,e.emit(\"error\",new MongoNetworkError(f(\"failed to connect to server [%s] on first connect [%s]\",e.name,r)));if(\"reconnect\"===o)return sdam.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:sdam.getTopologyType(e)}),e.emit(o,e);e.emit(o,r)}}};function basicWriteValidations(e){return e.s.pool?e.s.pool.isDestroyed()?new MongoError(\"server instance pool was destroyed\"):void 0:new MongoError(\"server instance is not connected\")}function basicReadValidations(e,o){if(basicWriteValidations(e,o),o.readPreference&&!(o.readPreference instanceof ReadPreference))throw new Error(\"readPreference must be an instance of ReadPreference\")}Server.prototype.connect=function(e){if(e=e||{},serverAccounting&&(servers[this.id]=this),this.s.pool&&!this.s.pool.isDisconnected()&&!this.s.pool.isDestroyed())throw new MongoError(f(\"server instance in invalid state %s\",this.s.pool.state));this.s.pool=new Pool(this,Object.assign(this.s.options,e,{bson:this.s.bson})),this.s.pool.on(\"close\",eventHandler(this,\"close\")),this.s.pool.on(\"error\",eventHandler(this,\"error\")),this.s.pool.on(\"timeout\",eventHandler(this,\"timeout\")),this.s.pool.on(\"parseError\",eventHandler(this,\"parseError\")),this.s.pool.on(\"connect\",eventHandler(this,\"connect\")),this.s.pool.on(\"reconnect\",eventHandler(this,\"reconnect\")),this.s.pool.on(\"reconnectFailed\",eventHandler(this,\"reconnectFailed\")),relayEvents(this.s.pool,this,[\"commandStarted\",\"commandSucceeded\",\"commandFailed\"]),this.s.inTopology||this.emit(\"topologyOpening\",{topologyId:topologyId(this)}),this.emit(\"serverOpening\",{topologyId:topologyId(this),address:this.name}),this.s.pool.connect()},Server.prototype.auth=function(e,o){\"function\"==typeof o&&o(null,null)},Server.prototype.getDescription=function(){var e=this.ismaster||{},o={type:sdam.getTopologyType(this),address:this.name};return e.hosts&&(o.hosts=e.hosts),e.arbiters&&(o.arbiters=e.arbiters),e.passives&&(o.passives=e.passives),e.setName&&(o.setName=e.setName),o},Server.prototype.lastIsMaster=function(){return this.ismaster},Server.prototype.unref=function(){this.s.pool.unref()},Server.prototype.isConnected=function(){return!!this.s.pool&&this.s.pool.isConnected()},Server.prototype.isDestroyed=function(){return!!this.s.pool&&this.s.pool.isDestroyed()},Server.prototype.command=function(e,o,r,t){\"function\"==typeof r&&(t=r,r=(r={})||{});var s=basicReadValidations(this,r);return s?t(s):(r=Object.assign({},r,{wireProtocolCommand:!1}),this.s.logger.isDebug()&&this.s.logger.debug(f(\"executing command [%s] against %s\",JSON.stringify({ns:e,cmd:o,options:debugOptions(debugFields,r)}),this.name)),disconnectHandler(this,\"command\",e,o,r,t)?void 0:collationNotSupported(this,o)?t(new MongoError(`server ${this.name} does not support collation`)):void wireProtocol.command(this,e,o,r,t))},Server.prototype.query=function(e,o,r,t,s){wireProtocol.query(this,e,o,r,t,s)},Server.prototype.getMore=function(e,o,r,t,s){wireProtocol.getMore(this,e,o,r,t,s)},Server.prototype.killCursors=function(e,o,r){wireProtocol.killCursors(this,e,o,r)},Server.prototype.insert=function(e,o,r,t){\"function\"==typeof r&&(t=r,r=(r={})||{});var s=basicWriteValidations(this,r);return s?t(s):disconnectHandler(this,\"insert\",e,o,r,t)?void 0:(o=Array.isArray(o)?o:[o],wireProtocol.insert(this,e,o,r,t))},Server.prototype.update=function(e,o,r,t){\"function\"==typeof r&&(t=r,r=(r={})||{});var s=basicWriteValidations(this,r);return s?t(s):disconnectHandler(this,\"update\",e,o,r,t)?void 0:collationNotSupported(this,r)?t(new MongoError(`server ${this.name} does not support collation`)):(o=Array.isArray(o)?o:[o],wireProtocol.update(this,e,o,r,t))},Server.prototype.remove=function(e,o,r,t){\"function\"==typeof r&&(t=r,r=(r={})||{});var s=basicWriteValidations(this,r);return s?t(s):disconnectHandler(this,\"remove\",e,o,r,t)?void 0:collationNotSupported(this,r)?t(new MongoError(`server ${this.name} does not support collation`)):(o=Array.isArray(o)?o:[o],wireProtocol.remove(this,e,o,r,t))},Server.prototype.cursor=function(e,o,r){const t=(r=r||{}).topology||this;return new(r.cursorFactory||this.s.Cursor)(t,e,o,r)},Server.prototype.equals=function(e){return\"string\"==typeof e?this.name.toLowerCase()===e.toLowerCase():!!e.name&&this.name.toLowerCase()===e.name.toLowerCase()},Server.prototype.connections=function(){return this.s.pool.allConnections()},Server.prototype.selectServer=function(e,o,r){\"function\"==typeof e&&void 0===r&&(r=e,e=void 0,o={}),\"function\"==typeof o&&(r=o,o=e,e=void 0),r(null,this)};var listeners=[\"close\",\"error\",\"timeout\",\"parseError\",\"connect\"];Server.prototype.destroy=function(e,o){if(this._destroyed)\"function\"==typeof o&&o(null,null);else{\"function\"==typeof e&&(o=e,e={}),e=e||{};var r=this;if(serverAccounting&&delete servers[this.id],this.monitoringProcessId&&clearTimeout(this.monitoringProcessId),!r.s.pool||this._destroyed)return this._destroyed=!0,void(\"function\"==typeof o&&o(null,null));this._destroyed=!0,e.emitClose&&r.emit(\"close\",r),e.emitDestroy&&r.emit(\"destroy\",r),listeners.forEach(function(e){r.s.pool.removeAllListeners(e)}),r.listeners(\"serverClosed\").length>0&&r.emit(\"serverClosed\",{topologyId:topologyId(r),address:r.name}),r.listeners(\"topologyClosed\").length>0&&!r.s.inTopology&&r.emit(\"topologyClosed\",{topologyId:topologyId(r)}),r.s.logger.isDebug()&&r.s.logger.debug(f(\"destroy called on server %s\",r.name)),this.s.pool.destroy(e.force,o)}},module.exports=Server;","node_modules/mongodb/lib/core/topologies/replset.js":"\"use strict\";const inherits=require(\"util\").inherits,f=require(\"util\").format,EventEmitter=require(\"events\").EventEmitter,ReadPreference=require(\"./read_preference\"),CoreCursor=require(\"../cursor\").CoreCursor,retrieveBSON=require(\"../connection/utils\").retrieveBSON,Logger=require(\"../connection/logger\"),MongoError=require(\"../error\").MongoError,Server=require(\"./server\"),ReplSetState=require(\"./replset_state\"),Timeout=require(\"./shared\").Timeout,Interval=require(\"./shared\").Interval,SessionMixins=require(\"./shared\").SessionMixins,isRetryableWritesSupported=require(\"./shared\").isRetryableWritesSupported,relayEvents=require(\"../utils\").relayEvents,BSON=retrieveBSON(),getMMAPError=require(\"./shared\").getMMAPError,makeClientMetadata=require(\"../utils\").makeClientMetadata,legacyIsRetryableWriteError=require(\"./shared\").legacyIsRetryableWriteError,now=require(\"../../utils\").now,calculateDurationInMs=require(\"../../utils\").calculateDurationInMs;var DISCONNECTED=\"disconnected\",CONNECTING=\"connecting\",CONNECTED=\"connected\",UNREFERENCED=\"unreferenced\",DESTROYED=\"destroyed\";function stateTransition(e,t){var r={disconnected:[CONNECTING,DESTROYED,DISCONNECTED],connecting:[CONNECTING,DESTROYED,CONNECTED,DISCONNECTED],connected:[CONNECTED,DISCONNECTED,DESTROYED,UNREFERENCED],unreferenced:[UNREFERENCED,DESTROYED],destroyed:[DESTROYED]}[e.state];r&&-1!==r.indexOf(t)?e.state=t:e.s.logger.error(f(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,r))}var id=1,handlers=[\"connect\",\"close\",\"error\",\"timeout\",\"parseError\"],ReplSet=function(e,t){var r=this;if(t=t||{},!Array.isArray(e))throw new MongoError(\"seedlist must be an array\");if(0===e.length)throw new MongoError(\"seedlist must contain at least one entry\");e.forEach(function(e){if(\"string\"!=typeof e.host||\"number\"!=typeof e.port)throw new MongoError(\"seedlist entry must contain a host and port\")}),EventEmitter.call(this),this.id=id++;var n=t.localThresholdMS||15;t.acceptableLatency&&(n=t.acceptableLatency);var s=Logger(\"ReplSet\",t);this.s={options:Object.assign({metadata:makeClientMetadata(t)},t),bson:t.bson||new BSON([BSON.Binary,BSON.Code,BSON.DBRef,BSON.Decimal128,BSON.Double,BSON.Int32,BSON.Long,BSON.Map,BSON.MaxKey,BSON.MinKey,BSON.ObjectId,BSON.BSONRegExp,BSON.Symbol,BSON.Timestamp]),Cursor:t.cursorFactory||CoreCursor,logger:s,seedlist:e,replicaSetState:new ReplSetState({id:this.id,setName:t.setName,acceptableLatency:n,heartbeatFrequencyMS:t.haInterval?t.haInterval:1e4,logger:s}),connectingServers:[],haInterval:t.haInterval?t.haInterval:1e4,minHeartbeatFrequencyMS:500,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:\"boolean\"==typeof t.debug&&t.debug},this.s.replicaSetState.on(\"topologyDescriptionChanged\",function(e){r.emit(\"topologyDescriptionChanged\",e)}),this.s.logger.isWarn()&&0!==this.s.options.socketTimeout&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(f(\"warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts\",this.s.options.socketTimeout,this.s.haInterval));[\"joined\",\"left\"].forEach(function(e){r.s.replicaSetState.on(e,function(t,n){r.emit(e,t,n)})}),this.initialConnectState={connect:!1,fullsetup:!1,all:!1},this.state=DISCONNECTED,this.haTimeoutId=null,this.ismaster=null,this.intervalIds=[],this.clusterTime=null};function rexecuteOperations(e){e.s.replicaSetState.hasPrimaryAndSecondary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute():e.s.replicaSetState.hasPrimary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute({executePrimary:!0}):e.s.replicaSetState.hasSecondary()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute({executeSecondary:!0})}function connectNewServers(e,t,r){if(0===t.length)return r();var n=t.length,s=null;function i(){0===(n-=1)&&r(s)}var o=function(e,t){return function(r){if(e.state===DESTROYED||e.state===UNREFERENCED)return this.destroy({force:!0}),i();if(\"connect\"===t)if(e.s.replicaSetState.update(this)){this.lastIsMaster()&&this.lastIsMaster().ismaster&&(e.ismaster=this.lastIsMaster());for(let e=0;e<handlers.length;e++)this.removeAllListeners(handlers[e]);this.on(\"error\",handleEvent(e,\"error\")),this.on(\"close\",handleEvent(e,\"close\")),this.on(\"timeout\",handleEvent(e,\"timeout\")),this.on(\"parseError\",handleEvent(e,\"parseError\")),monitorServer(this.lastIsMaster().me,e,{}),rexecuteOperations(e)}else this.destroy({force:!0});else\"error\"===t&&(s=r);rexecuteOperations(e),i()}};function a(t,r){setTimeout(function(){if(e.state===DESTROYED||e.state===UNREFERENCED)return;const r=e.s.connectingServers.findIndex(e=>e.name===t);if(r>=0){return e.s.connectingServers[r].destroy({force:!0}),e.s.connectingServers.splice(r,1),i()}var n=new Server(Object.assign({},e.s.options,{host:t.split(\":\")[0],port:parseInt(t.split(\":\")[1],10),reconnect:!1,monitoring:!1,parent:e}));n.once(\"connect\",o(e,\"connect\")),n.once(\"close\",o(e,\"close\")),n.once(\"timeout\",o(e,\"timeout\")),n.once(\"error\",o(e,\"error\")),n.once(\"parseError\",o(e,\"parseError\")),n.on(\"serverOpening\",t=>e.emit(\"serverOpening\",t)),n.on(\"serverDescriptionChanged\",t=>e.emit(\"serverDescriptionChanged\",t)),n.on(\"serverClosed\",t=>e.emit(\"serverClosed\",t)),relayEvents(n,e,[\"commandStarted\",\"commandSucceeded\",\"commandFailed\"]),e.s.connectingServers.push(n),n.connect(e.s.connectOptions)},r)}for(var c=0;c<t.length;c++)a(t[c],c)}inherits(ReplSet,EventEmitter),Object.assign(ReplSet.prototype,SessionMixins),Object.defineProperty(ReplSet.prototype,\"type\",{enumerable:!0,get:function(){return\"replset\"}}),Object.defineProperty(ReplSet.prototype,\"parserType\",{enumerable:!0,get:function(){return BSON.native?\"c++\":\"js\"}}),Object.defineProperty(ReplSet.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.s.replicaSetState.logicalSessionTimeoutMinutes||null}});var pingServer=function(e,t,r){var n=(new Date).getTime();emitSDAMEvent(e,\"serverHeartbeatStarted\",{connectionId:t.name}),t.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(s,i){if(e.state===DESTROYED||e.state===UNREFERENCED)return t.destroy({force:!0}),r(s,i);var o=(new Date).getTime()-n;t.lastUpdateTime=now(),s?(emitSDAMEvent(e,\"serverHeartbeatFailed\",{durationMS:o,failure:s,connectionId:t.name}),e.s.replicaSetState.remove(t)):(t.ismaster=i.result,t.ismaster.lastWrite&&t.ismaster.lastWrite.lastWriteDate&&(t.lastWriteDate=t.ismaster.lastWrite.lastWriteDate.getTime()),-1===t.lastIsMasterMS?t.lastIsMasterMS=o:t.lastIsMasterMS&&(t.lastIsMasterMS=.2*o+.8*t.lastIsMasterMS),e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),emitSDAMEvent(e,\"serverHeartbeatSucceeded\",{durationMS:o,reply:i.result,connectionId:t.name})),e.s.replicaSetState.updateServerMaxStaleness(t,e.s.haInterval),r(s,i)})},monitorServer=function(e,t,r){if(!r.haInterval)for(var n=0;n<t.intervalIds.length;n++)if(t.intervalIds[n].__host===e)return;var s=r.haInterval?Timeout:Interval,i=r.haInterval?r.haInterval:t.s.haInterval,o=new s(function(){if(t.state!==DESTROYED&&t.state!==UNREFERENCED){var r=t.s.replicaSetState.get(e);return r?pingServer(t,r,function(e){e||(t.state!==DESTROYED&&t.state!==UNREFERENCED?(t.intervalIds=t.intervalIds.filter(function(e){return e.isRunning()}),s===Timeout?t.state===CONNECTING&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(stateTransition(t,CONNECTED),process.nextTick(function(){t.emit(\"connect\",t)}),topologyMonitor(t,{})):t.state===DISCONNECTED&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(stateTransition(t,CONNECTING),rexecuteOperations(t),process.nextTick(function(){t.emit(\"reconnect\",t)})),t.initialConnectState.connect&&!t.initialConnectState.fullsetup&&t.s.replicaSetState.hasPrimaryAndSecondary()&&(t.initialConnectState.fullsetup=!0,t.initialConnectState.all=!0,process.nextTick(function(){t.emit(\"fullsetup\",t),t.emit(\"all\",t)}))):o.stop())}):void 0}o.stop()},i);o.start(),o.__host=e,t.intervalIds.push(o)};function topologyMonitor(e,t){if(e.state!==DESTROYED&&e.state!==UNREFERENCED){t=t||{};var r=Object.keys(e.s.replicaSetState.set),n=t.haInterval?Timeout:Interval,s=t.haInterval?t.haInterval:e.s.haInterval;if(n===Timeout)return connectNewServers(e,e.s.replicaSetState.unknownServers,function(n){if(e.state!==DESTROYED&&e.state!==UNREFERENCED){if(!e.s.replicaSetState.hasPrimary()&&!e.s.options.secondaryOnlyConnectionAllowed)return n?e.emit(\"error\",n):(e.emit(\"error\",new MongoError(\"no primary found in replicaset or invalid replica set name\")),e.destroy({force:!0}));if(!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed)return n?e.emit(\"error\",n):(e.emit(\"error\",new MongoError(\"no secondary found in replicaset or invalid replica set name\")),e.destroy({force:!0}));for(var s=0;s<r.length;s++)monitorServer(r[s],e,t)}});for(var i=0;i<r.length;i++)monitorServer(r[i],e,t);var o=e.s.replicaSetState.hasPrimary()?s:e.s.minHeartbeatFrequencyMS;e.intervalIds.push(new Timeout(function e(t){return function(){t.state!==DESTROYED&&t.state!==UNREFERENCED&&connectNewServers(t,t.s.replicaSetState.unknownServers,function(){var r=t.s.replicaSetState.hasPrimary()?s:t.s.minHeartbeatFrequencyMS;t.intervalIds.push(new Timeout(e(t),r).start())})}}(e),o).start())}}function addServerToList(e,t){for(var r=0;r<e.length;r++)if(e[r].name.toLowerCase()===t.name.toLowerCase())return!0;e.push(t)}function handleEvent(e,t){return function(){e.state!==DESTROYED&&e.state!==UNREFERENCED&&(e.s.logger.isDebug()&&e.s.logger.debug(f(\"handleEvent %s from server %s in replset with id %s\",t,this.name,e.id)),e.s.replicaSetState.remove(this),e.state!==DESTROYED&&e.state!==UNREFERENCED&&((e.s.replicaSetState.hasPrimary()||e.s.replicaSetState.hasSecondary()||!e.s.options.secondaryOnlyConnectionAllowed)&&e.s.replicaSetState.hasPrimary()||stateTransition(e,DISCONNECTED),addServerToList(e.s.connectingServers,this)))}}function shouldTriggerConnect(e){const t=e.state===CONNECTING,r=e.s.replicaSetState.hasPrimary(),n=e.s.replicaSetState.hasSecondary(),s=e.s.options.secondaryOnlyConnectionAllowed,i=e.s.connectOptions.readPreference&&e.s.connectOptions.readPreference.equals(ReadPreference.secondary);return t&&(i&&n||!i&&r)||n&&s}function handleInitialConnectEvent(e,t){return function(){if(e.s.logger.isDebug()&&e.s.logger.debug(f(\"handleInitialConnectEvent %s from server %s in replset with id %s\",t,this.name,e.id)),e.state===DESTROYED||e.state===UNREFERENCED)return this.destroy({force:!0});if(\"connect\"===t){var r=e.s.replicaSetState.update(this);if(!0===r){this.lastIsMaster()&&this.lastIsMaster().ismaster&&(e.ismaster=this.lastIsMaster()),e.s.logger.isDebug()&&e.s.logger.debug(f(\"handleInitialConnectEvent %s from server %s in replset with id %s has state [%s]\",t,this.name,e.id,JSON.stringify(e.s.replicaSetState.set)));for(let e=0;e<handlers.length;e++)this.removeAllListeners(handlers[e]);this.on(\"error\",handleEvent(e,\"error\")),this.on(\"close\",handleEvent(e,\"close\")),this.on(\"timeout\",handleEvent(e,\"timeout\")),this.on(\"parseError\",handleEvent(e,\"parseError\")),shouldTriggerConnect(e)&&(stateTransition(e,CONNECTED),e.initialConnectState.connect=!0,process.nextTick(function(){e.emit(\"connect\",e)}),topologyMonitor(e,{}))}else{if(r instanceof MongoError)return this.destroy({force:!0}),e.destroy({force:!0}),e.emit(\"error\",r);this.destroy({force:!0})}}else e.emit(\"failed\",this),addServerToList(e.s.connectingServers,this),e.s.replicaSetState.remove(this);e.initialConnectState.connect&&!e.initialConnectState.fullsetup&&e.s.replicaSetState.hasPrimaryAndSecondary()&&(e.initialConnectState.fullsetup=!0,e.initialConnectState.all=!0,process.nextTick(function(){e.emit(\"fullsetup\",e),e.emit(\"all\",e)}));for(var n=0;n<e.s.connectingServers.length;n++)e.s.connectingServers[n].equals(this)&&e.s.connectingServers.splice(n,1);0===e.s.connectingServers.length&&e.state===CONNECTING&&topologyMonitor(e,{haInterval:1})}}function connectServers(e,t){e.s.connectingServers=e.s.connectingServers.concat(t);var r=0;function n(t,r){setTimeout(function(){e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),t.once(\"close\",handleInitialConnectEvent(e,\"close\")),t.once(\"timeout\",handleInitialConnectEvent(e,\"timeout\")),t.once(\"parseError\",handleInitialConnectEvent(e,\"parseError\")),t.once(\"error\",handleInitialConnectEvent(e,\"error\")),t.once(\"connect\",handleInitialConnectEvent(e,\"connect\")),t.on(\"serverOpening\",t=>e.emit(\"serverOpening\",t)),t.on(\"serverDescriptionChanged\",t=>e.emit(\"serverDescriptionChanged\",t)),t.on(\"serverClosed\",t=>e.emit(\"serverClosed\",t)),relayEvents(t,e,[\"commandStarted\",\"commandSucceeded\",\"commandFailed\"]),t.connect(e.s.connectOptions)},r)}for(;t.length>0;)n(t.shift(),r++)}function emitSDAMEvent(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}ReplSet.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},stateTransition(this,CONNECTING);var r=this.s.seedlist.map(function(r){return new Server(Object.assign({},t.s.options,r,e,{reconnect:!1,monitoring:!1,parent:t}))});if(this.s.options.socketTimeout>0&&this.s.options.socketTimeout<=this.s.options.haInterval)return t.emit(\"error\",new MongoError(f(\"haInterval [%s] MS must be set to less than socketTimeout [%s] MS\",this.s.options.haInterval,this.s.options.socketTimeout)));emitSDAMEvent(this,\"topologyOpening\",{topologyId:this.id}),connectServers(t,r)},ReplSet.prototype.auth=function(e,t){\"function\"==typeof t&&t(null,null)},ReplSet.prototype.destroy=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{};let r=this.s.connectingServers.length+1;const n=()=>{--r>0||(emitSDAMEvent(this,\"topologyClosed\",{topologyId:this.id}),\"function\"==typeof t&&t(null,null))};if(this.state!==DESTROYED){stateTransition(this,DESTROYED),this.haTimeoutId&&clearTimeout(this.haTimeoutId);for(var s=0;s<this.intervalIds.length;s++)this.intervalIds[s].stop();this.intervalIds=[],0!==r?(this.s.replicaSetState.destroy(e,n),this.s.connectingServers.forEach(function(t){t.destroy(e,n)})):n()}else\"function\"==typeof t&&t(null,null)},ReplSet.prototype.unref=function(){stateTransition(this,UNREFERENCED),this.s.replicaSetState.allServers().forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)},ReplSet.prototype.lastIsMaster=function(){return this.s.options.secondaryOnlyConnectionAllowed&&!this.s.replicaSetState.hasPrimary()&&this.s.replicaSetState.hasSecondary()?this.s.replicaSetState.secondaries[0].lastIsMaster():this.s.replicaSetState.primary?this.s.replicaSetState.primary.lastIsMaster():this.ismaster},ReplSet.prototype.connections=function(){for(var e=this.s.replicaSetState.allServers(),t=[],r=0;r<e.length;r++)t=t.concat(e[r].connections());return t},ReplSet.prototype.isConnected=function(e){return(e=e||{}).readPreference&&e.readPreference.equals(ReadPreference.secondary)?this.s.replicaSetState.hasSecondary():e.readPreference&&e.readPreference.equals(ReadPreference.primary)?this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(ReadPreference.primaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(ReadPreference.secondaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():!(!this.s.options.secondaryOnlyConnectionAllowed||!this.s.replicaSetState.hasSecondary())||this.s.replicaSetState.hasPrimary()},ReplSet.prototype.isDestroyed=function(){return this.state===DESTROYED};const SERVER_SELECTION_TIMEOUT_MS=1e4,SERVER_SELECTION_INTERVAL_MS=1e3;function executeWriteOperation(e,t,r){\"function\"==typeof t&&(r=t,t={}),t=t||{};const n=e.self,s=e.op,i=e.ns,o=e.ops;if(n.state===DESTROYED)return r(new MongoError(f(\"topology was destroyed\")));const a=!e.retrying&&!!t.retryWrites&&t.session&&isRetryableWritesSupported(n)&&!t.session.inTransaction()&&void 0===t.explain;if(!n.s.replicaSetState.hasPrimary()){if(n.s.disconnectHandler)return n.s.disconnectHandler.add(s,i,o,t,r);if(!a)return r(new MongoError(\"no primary server found\"))}const c=(s,i)=>{if(!s)return r(null,i);if(!legacyIsRetryableWriteError(s,n))return s=getMMAPError(s),r(s);if(a){return executeWriteOperation(Object.assign({},e,{retrying:!0}),t,r)}return n.s.replicaSetState.primary&&(n.s.replicaSetState.primary.destroy(),n.s.replicaSetState.remove(n.s.replicaSetState.primary,{force:!0})),r(s)};r.operationId&&(c.operationId=r.operationId),a&&(t.session.incrementTransactionNumber(),t.willRetryWrite=a),n.s.replicaSetState.primary[s](i,o,t,c)}ReplSet.prototype.selectServer=function(e,t,r){let n,s;\"function\"==typeof e&&void 0===r&&(r=e,e=void 0,t={}),\"function\"==typeof t&&(r=t,t=e),t=t||{},n=e instanceof ReadPreference?e:t.readPreference||ReadPreference.primary;const i=now(),o=()=>{if(calculateDurationInMs(i)>=1e4)return void(null!=s?r(s,null):r(new MongoError(\"Server selection timed out\")));const e=this.s.replicaSetState.pickServer(n);if(null!=e){if(!(e instanceof Server))return s=e,void setTimeout(o,1e3);this.s.debug&&this.emit(\"pickedServer\",t.readPreference,e),r(null,e)}else setTimeout(o,1e3)};o()},ReplSet.prototype.getServers=function(){return this.s.replicaSetState.allServers()},ReplSet.prototype.insert=function(e,t,r,n){executeWriteOperation({self:this,op:\"insert\",ns:e,ops:t},r,n)},ReplSet.prototype.update=function(e,t,r,n){executeWriteOperation({self:this,op:\"update\",ns:e,ops:t},r,n)},ReplSet.prototype.remove=function(e,t,r,n){executeWriteOperation({self:this,op:\"remove\",ns:e,ops:t},r,n)};const RETRYABLE_WRITE_OPERATIONS=[\"findAndModify\",\"insert\",\"update\",\"delete\"];function isWriteCommand(e){return RETRYABLE_WRITE_OPERATIONS.some(t=>e[t])}ReplSet.prototype.command=function(e,t,r,n){if(\"function\"==typeof r&&(n=r,r=(r={})||{}),this.state===DESTROYED)return n(new MongoError(f(\"topology was destroyed\")));var s=this,i=r.readPreference?r.readPreference:ReadPreference.primary;if(\"primary\"===i.preference&&!this.s.replicaSetState.hasPrimary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,r,n);if(\"secondary\"===i.preference&&!this.s.replicaSetState.hasSecondary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,r,n);if(\"primary\"!==i.preference&&!this.s.replicaSetState.hasSecondary()&&!this.s.replicaSetState.hasPrimary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,r,n);var o=this.s.replicaSetState.pickServer(i);if(!(o instanceof Server))return n(o);if(s.s.debug&&s.emit(\"pickedServer\",ReadPreference.primary,o),null==o)return n(new MongoError(f(\"no server found that matches the provided readPreference %s\",i)));const a=!r.retrying&&!!r.retryWrites&&r.session&&isRetryableWritesSupported(s)&&!r.session.inTransaction()&&isWriteCommand(t);a&&(r.session.incrementTransactionNumber(),r.willRetryWrite=a),o.command(e,t,r,(i,o)=>{if(!i)return n(null,o);if(!legacyIsRetryableWriteError(i,s))return n(i);if(a){const s=Object.assign({},r,{retrying:!0});return this.command(e,t,s,n)}return this.s.replicaSetState.primary&&(this.s.replicaSetState.primary.destroy(),this.s.replicaSetState.remove(this.s.replicaSetState.primary,{force:!0})),n(i)})},ReplSet.prototype.cursor=function(e,t,r){const n=(r=r||{}).topology||this;return new(r.cursorFactory||this.s.Cursor)(n,e,t,r)},module.exports=ReplSet;","node_modules/mongodb/lib/core/topologies/mongos.js":"\"use strict\";const inherits=require(\"util\").inherits,f=require(\"util\").format,EventEmitter=require(\"events\").EventEmitter,CoreCursor=require(\"../cursor\").CoreCursor,Logger=require(\"../connection/logger\"),retrieveBSON=require(\"../connection/utils\").retrieveBSON,MongoError=require(\"../error\").MongoError,Server=require(\"./server\"),diff=require(\"./shared\").diff,cloneOptions=require(\"./shared\").cloneOptions,SessionMixins=require(\"./shared\").SessionMixins,isRetryableWritesSupported=require(\"./shared\").isRetryableWritesSupported,relayEvents=require(\"../utils\").relayEvents,BSON=retrieveBSON(),getMMAPError=require(\"./shared\").getMMAPError,makeClientMetadata=require(\"../utils\").makeClientMetadata,legacyIsRetryableWriteError=require(\"./shared\").legacyIsRetryableWriteError;var DISCONNECTED=\"disconnected\",CONNECTING=\"connecting\",CONNECTED=\"connected\",UNREFERENCED=\"unreferenced\",DESTROYING=\"destroying\",DESTROYED=\"destroyed\";function stateTransition(e,t){var o={disconnected:[CONNECTING,DESTROYING,DESTROYED,DISCONNECTED],connecting:[CONNECTING,DESTROYING,DESTROYED,CONNECTED,DISCONNECTED],connected:[CONNECTED,DISCONNECTED,DESTROYING,DESTROYED,UNREFERENCED],unreferenced:[UNREFERENCED,DESTROYING,DESTROYED],destroyed:[DESTROYED]}[e.state];o&&-1!==o.indexOf(t)?e.state=t:e.s.logger.error(f(\"Mongos with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,o))}var id=1,handlers=[\"connect\",\"close\",\"error\",\"timeout\",\"parseError\"],Mongos=function(e,t){t=t||{},this.id=id++,Array.isArray(e)&&(e=e.reduce((e,t)=>e.find(e=>e.host===t.host&&e.port===t.port)?e:(e.push(t),e),[])),this.s={options:Object.assign({metadata:makeClientMetadata(t)},t),bson:t.bson||new BSON([BSON.Binary,BSON.Code,BSON.DBRef,BSON.Decimal128,BSON.Double,BSON.Int32,BSON.Long,BSON.Map,BSON.MaxKey,BSON.MinKey,BSON.ObjectId,BSON.BSONRegExp,BSON.Symbol,BSON.Timestamp]),Cursor:t.cursorFactory||CoreCursor,logger:Logger(\"Mongos\",t),seedlist:e,haInterval:t.haInterval?t.haInterval:1e4,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:\"boolean\"==typeof t.debug&&t.debug,localThresholdMS:t.localThresholdMS||15},this.s.logger.isWarn()&&0!==this.s.options.socketTimeout&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(f(\"warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts\",this.s.options.socketTimeout,this.s.haInterval)),this.state=DISCONNECTED,this.connectingProxies=[],this.connectedProxies=[],this.disconnectedProxies=[],this.index=0,this.haTimeoutId=null,this.ismaster=null,this.topologyDescription={topologyType:\"Unknown\",servers:[]},this.clusterTime=null,EventEmitter.call(this)};function emitSDAMEvent(e,t,o){e.listeners(t).length>0&&e.emit(t,o)}inherits(Mongos,EventEmitter),Object.assign(Mongos.prototype,SessionMixins),Object.defineProperty(Mongos.prototype,\"type\",{enumerable:!0,get:function(){return\"mongos\"}}),Object.defineProperty(Mongos.prototype,\"parserType\",{enumerable:!0,get:function(){return BSON.native?\"c++\":\"js\"}}),Object.defineProperty(Mongos.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}});const SERVER_EVENTS=[\"serverDescriptionChanged\",\"error\",\"close\",\"timeout\",\"parseError\"];function destroyServer(e,t,o){t=t||{},SERVER_EVENTS.forEach(t=>e.removeAllListeners(t)),e.destroy(t,o)}function handleEvent(e){return function(){e.state!==DESTROYED&&e.state!==DESTROYING&&(moveServerFrom(e.connectedProxies,e.disconnectedProxies,this),emitTopologyDescriptionChanged(e),e.emit(\"left\",\"mongos\",this),e.emit(\"serverClosed\",{topologyId:e.id,address:this.name}))}}function handleInitialConnectEvent(e,t){return function(){if(e.state===DESTROYED)return emitTopologyDescriptionChanged(e),moveServerFrom(e.connectingProxies,e.disconnectedProxies,this),this.destroy();if(\"connect\"===t)if(e.ismaster=this.lastIsMaster(),\"isdbgrid\"===e.ismaster.msg){for(let t=0;t<e.connectedProxies.length;t++)if(e.connectedProxies[t].name===this.name)return moveServerFrom(e.connectingProxies,e.disconnectedProxies,this),emitTopologyDescriptionChanged(e),this.destroy(),e.emit(\"failed\",this);for(let e=0;e<handlers.length;e++)this.removeAllListeners(handlers[e]);this.on(\"error\",handleEvent(e,\"error\")),this.on(\"close\",handleEvent(e,\"close\")),this.on(\"timeout\",handleEvent(e,\"timeout\")),this.on(\"parseError\",handleEvent(e,\"parseError\")),moveServerFrom(e.connectingProxies,e.connectedProxies,this),e.emit(\"joined\",\"mongos\",this)}else{if(e.s.logger.isWarn()){var o=\"expected mongos proxy, but found replicaset member mongod for server %s\";e.ismaster.hosts||(o=\"expected mongos proxy, but found standalone mongod for server %s\"),e.s.logger.warn(f(o,this.name))}this.destroy(!0),removeProxyFrom(e.connectingProxies,this),e.emit(\"left\",\"server\",this),e.emit(\"failed\",this)}else moveServerFrom(e.connectingProxies,e.disconnectedProxies,this),e.emit(\"left\",\"mongos\",this),e.emit(\"failed\",this);if(emitTopologyDescriptionChanged(e),0===e.connectingProxies.length){if(e.connectedProxies.length>0&&e.state===CONNECTING)stateTransition(e,CONNECTED),e.emit(\"connect\",e),e.emit(\"fullsetup\",e),e.emit(\"all\",e);else if(0===e.disconnectedProxies.length)return e.s.logger.isWarn()&&e.s.logger.warn(f(\"no mongos proxies found in seed list, did you mean to connect to a replicaset\")),e.emit(\"error\",new MongoError(\"no mongos proxies found in seed list\"));topologyMonitor(e,{firstConnect:!0})}}}function connectProxies(e,t){e.connectingProxies=e.connectingProxies.concat(t);var o=0;t.forEach(t=>(function(t,o){setTimeout(function(){e.emit(\"serverOpening\",{topologyId:e.id,address:t.name}),emitTopologyDescriptionChanged(e),t.once(\"close\",handleInitialConnectEvent(e,\"close\")),t.once(\"timeout\",handleInitialConnectEvent(e,\"timeout\")),t.once(\"parseError\",handleInitialConnectEvent(e,\"parseError\")),t.once(\"error\",handleInitialConnectEvent(e,\"error\")),t.once(\"connect\",handleInitialConnectEvent(e,\"connect\")),relayEvents(t,e,[\"commandStarted\",\"commandSucceeded\",\"commandFailed\"]),t.connect(e.s.connectOptions)},o)})(t,o++))}function pickProxy(e,t){const o=t&&t.transaction;if(o&&o.server){if(o.server.isConnected())return o.server;o.unpinServer()}for(var n=e.connectedProxies.slice(0),r=Number.MAX_VALUE,s=0;s<n.length;s++)n[s].lastIsMasterMS<r&&(r=n[s].lastIsMasterMS);let i;return 0===(n=n.filter(function(t){if(t.lastIsMasterMS<=r+e.s.localThresholdMS&&t.isConnected())return!0})).length?i=e.connectedProxies[0]:(i=n[e.index%n.length],e.index=(e.index+1)%n.length),o&&o.isActive&&i&&i.isConnected()&&o.pinServer(i),i}function moveServerFrom(e,t,o){for(var n=0;n<e.length;n++)e[n].name===o.name&&e.splice(n,1);for(n=0;n<t.length;n++)t[n].name===o.name&&t.splice(n,1);t.push(o)}function removeProxyFrom(e,t){for(var o=0;o<e.length;o++)e[o].name===t.name&&e.splice(o,1)}function reconnectProxies(e,t,o){var n=t.length,r=function(e,t){return function(){if(n-=1,e.state===DESTROYED||e.state===DESTROYING||e.state===UNREFERENCED)return moveServerFrom(e.connectingProxies,e.disconnectedProxies,this),this.destroy();if(\"connect\"===t){if(e.state===DESTROYED||e.state===DESTROYING||e.state===UNREFERENCED)return moveServerFrom(e.connectingProxies,e.disconnectedProxies,this),this.destroy();for(var r=0;r<handlers.length;r++)this.removeAllListeners(handlers[r]);this.on(\"error\",handleEvent(e,\"error\")),this.on(\"close\",handleEvent(e,\"close\")),this.on(\"timeout\",handleEvent(e,\"timeout\")),this.on(\"parseError\",handleEvent(e,\"parseError\")),moveServerFrom(e.connectingProxies,e.connectedProxies,this),emitTopologyDescriptionChanged(e),e.emit(\"joined\",\"mongos\",this)}else moveServerFrom(e.connectingProxies,e.disconnectedProxies,this),this.destroy();0===n&&o()}};if(0===n)return o();function s(t,o){setTimeout(function(){if(e.state!==DESTROYED&&e.state!==DESTROYING&&e.state!==UNREFERENCED){var o=new Server(Object.assign({},e.s.options,{host:t.name.split(\":\")[0],port:parseInt(t.name.split(\":\")[1],10),reconnect:!1,monitoring:!1,parent:e}));destroyServer(t,{force:!0}),removeProxyFrom(e.disconnectedProxies,t),relayEvents(o,e,[\"serverDescriptionChanged\"]),e.emit(\"serverOpening\",{topologyId:-1!==o.s.topologyId?o.s.topologyId:e.id,address:o.name}),o.once(\"connect\",r(e,\"connect\")),o.once(\"close\",r(e,\"close\")),o.once(\"timeout\",r(e,\"timeout\")),o.once(\"error\",r(e,\"error\")),o.once(\"parseError\",r(e,\"parseError\")),relayEvents(o,e,[\"commandStarted\",\"commandSucceeded\",\"commandFailed\"]),e.connectingProxies.push(o),o.connect(e.s.connectOptions)}},o)}for(var i=0;i<t.length;i++)s(t[i],i)}function topologyMonitor(e,t){t=t||{},e.state!==DESTROYED&&e.state!==DESTROYING&&e.state!==UNREFERENCED&&(e.haTimeoutId=setTimeout(function(){if(e.state!==DESTROYED&&e.state!==DESTROYING&&e.state!==UNREFERENCED){e.isConnected()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute();var o=e.connectedProxies.slice(0),n=o.length;if(0===o.length)return e.listeners(\"close\").length>0&&e.state===CONNECTING?e.emit(\"error\",new MongoError(\"no mongos proxy available\")):e.emit(\"close\",e),reconnectProxies(e,e.disconnectedProxies,function(){e.state!==DESTROYED&&e.state!==DESTROYING&&e.state!==UNREFERENCED&&(e.state===CONNECTING&&t.firstConnect?(e.emit(\"connect\",e),e.emit(\"fullsetup\",e),e.emit(\"all\",e)):e.isConnected()?e.emit(\"reconnect\",e):!e.isConnected()&&e.listeners(\"close\").length>0&&e.emit(\"close\",e),topologyMonitor(e))});for(var r=0;r<o.length;r++)s(0,o[r],function(){if(0===(n-=1)){if(e.state===DESTROYED||e.state===DESTROYING||e.state===UNREFERENCED)return;reconnectProxies(e,e.disconnectedProxies,function(){e.state!==DESTROYED&&e.state!==DESTROYING&&e.state!==UNREFERENCED&&topologyMonitor(e)})}})}function s(t,o,n){var r=(new Date).getTime();emitSDAMEvent(e,\"serverHeartbeatStarted\",{connectionId:o.name}),o.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(t,s){if(e.state===DESTROYED||e.state===DESTROYING||e.state===UNREFERENCED)return moveServerFrom(e.connectedProxies,e.disconnectedProxies,o),o.destroy(),n(t,s);var i=(new Date).getTime()-r;t?(emitSDAMEvent(e,\"serverHeartbeatFailed\",{durationMS:i,failure:t,connectionId:o.name}),moveServerFrom(e.connectedProxies,e.disconnectedProxies,o)):(o.ismaster=s.result,o.lastIsMasterMS=i,emitSDAMEvent(e,\"serverHeartbeatSucceeded\",{durationMS:i,reply:s.result,connectionId:o.name})),n(t,s)})}},e.s.haInterval))}function executeWriteOperation(e,t,o){\"function\"==typeof t&&(o=t,t={}),t=t||{};const n=e.self,r=e.op,s=e.ns,i=e.ops;let c=pickProxy(n,t.session);if(!c)return o(new MongoError(\"no mongos proxy available\"));const a=!e.retrying&&!!t.retryWrites&&t.session&&isRetryableWritesSupported(n)&&!t.session.inTransaction()&&void 0===t.explain,l=(r,s)=>{if(!r)return o(null,s);if(!legacyIsRetryableWriteError(r,n)||!a)return r=getMMAPError(r),o(r);if(!(c=pickProxy(n,t.session)))return o(r);return executeWriteOperation(Object.assign({},e,{retrying:!0}),t,o)};o.operationId&&(l.operationId=o.operationId),a&&(t.session.incrementTransactionNumber(),t.willRetryWrite=a),c[r](s,i,t,l)}Mongos.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},stateTransition(this,CONNECTING);var o=this.s.seedlist.map(function(o){const n=new Server(Object.assign({},t.s.options,o,e,{reconnect:!1,monitoring:!1,parent:t}));return relayEvents(n,t,[\"serverDescriptionChanged\"]),n});emitSDAMEvent(this,\"topologyOpening\",{topologyId:this.id}),connectProxies(t,o)},Mongos.prototype.auth=function(e,t){\"function\"==typeof t&&t(null,null)},Mongos.prototype.lastIsMaster=function(){return this.ismaster},Mongos.prototype.unref=function(){stateTransition(this,UNREFERENCED),this.connectedProxies.concat(this.connectingProxies).forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)},Mongos.prototype.destroy=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{},stateTransition(this,DESTROYING),this.haTimeoutId&&clearTimeout(this.haTimeoutId);const o=this.connectedProxies.concat(this.connectingProxies);let n=o.length;const r=()=>{--n>0||(emitTopologyDescriptionChanged(this),emitSDAMEvent(this,\"topologyClosed\",{topologyId:this.id}),stateTransition(this,DESTROYED),\"function\"==typeof t&&t(null,null))};0!==n?o.forEach(t=>{this.emit(\"serverClosed\",{topologyId:this.id,address:t.name}),destroyServer(t,e,r),moveServerFrom(this.connectedProxies,this.disconnectedProxies,t)}):r()},Mongos.prototype.isConnected=function(){return this.connectedProxies.length>0},Mongos.prototype.isDestroyed=function(){return this.state===DESTROYED},Mongos.prototype.insert=function(e,t,o,n){return\"function\"==typeof o&&(n=o,o=(o={})||{}),this.state===DESTROYED?n(new MongoError(f(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void executeWriteOperation({self:this,op:\"insert\",ns:e,ops:t},o,n):n(new MongoError(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"insert\",e,t,o,n)},Mongos.prototype.update=function(e,t,o,n){return\"function\"==typeof o&&(n=o,o=(o={})||{}),this.state===DESTROYED?n(new MongoError(f(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void executeWriteOperation({self:this,op:\"update\",ns:e,ops:t},o,n):n(new MongoError(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"update\",e,t,o,n)},Mongos.prototype.remove=function(e,t,o,n){return\"function\"==typeof o&&(n=o,o=(o={})||{}),this.state===DESTROYED?n(new MongoError(f(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void executeWriteOperation({self:this,op:\"remove\",ns:e,ops:t},o,n):n(new MongoError(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"remove\",e,t,o,n)};const RETRYABLE_WRITE_OPERATIONS=[\"findAndModify\",\"insert\",\"update\",\"delete\"];function isWriteCommand(e){return RETRYABLE_WRITE_OPERATIONS.some(t=>e[t])}function emitTopologyDescriptionChanged(e){if(e.listeners(\"topologyDescriptionChanged\").length>0){var t=\"Unknown\";e.connectedProxies.length>0&&(t=\"Sharded\");var o={topologyType:t,servers:[]},n=e.disconnectedProxies.concat(e.connectingProxies);o.servers=o.servers.concat(n.map(function(e){var t=e.getDescription();return t.type=\"Unknown\",t})),o.servers=o.servers.concat(e.connectedProxies.map(function(e){var t=e.getDescription();return t.type=\"Mongos\",t}));var r=diff(e.topologyDescription,o),s={topologyId:e.id,previousDescription:e.topologyDescription,newDescription:o,diff:r};r.servers.length>0&&e.emit(\"topologyDescriptionChanged\",s),e.topologyDescription=o}}Mongos.prototype.command=function(e,t,o,n){if(\"function\"==typeof o&&(n=o,o=(o={})||{}),this.state===DESTROYED)return n(new MongoError(f(\"topology was destroyed\")));var r=this,s=pickProxy(r,o.session);if((null==s||!s.isConnected())&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,o,n);if(null==s)return n(new MongoError(\"no mongos proxy available\"));var i=cloneOptions(o);i.topology=r;const c=!o.retrying&&o.retryWrites&&o.session&&isRetryableWritesSupported(r)&&!o.session.inTransaction()&&isWriteCommand(t);c&&(i.session.incrementTransactionNumber(),i.willRetryWrite=c),s.command(e,t,i,(o,s)=>{if(!o)return n(null,s);if(!legacyIsRetryableWriteError(o,r))return n(o);if(c){const o=Object.assign({},i,{retrying:!0});return this.command(e,t,o,n)}return n(o)})},Mongos.prototype.cursor=function(e,t,o){const n=(o=o||{}).topology||this;return new(o.cursorFactory||this.s.Cursor)(n,e,t,o)},Mongos.prototype.selectServer=function(e,t,o){\"function\"==typeof e&&void 0===o&&(o=e,e=void 0,t={}),\"function\"==typeof t&&(o=t,t=e,e=void 0);const n=pickProxy(this,(t=t||{}).session);null!=n?(this.s.debug&&this.emit(\"pickedServer\",null,n),o(null,n)):o(new MongoError(\"server selection failed\"))},Mongos.prototype.connections=function(){for(var e=[],t=0;t<this.connectedProxies.length;t++)e=e.concat(this.connectedProxies[t].connections());return e},module.exports=Mongos;","node_modules/mongodb/lib/core/connection/logger.js":"\"use strict\";var f=require(\"util\").format,MongoError=require(\"../error\").MongoError,classFilters={},filteredClasses={},level=null,pid=process.pid,currentLogger=null,Logger=function(e,s){if(!(this instanceof Logger))return new Logger(e,s);s=s||{},this.className=e,s.logger?currentLogger=s.logger:null==currentLogger&&(currentLogger=console.log),s.loggerLevel&&(level=s.loggerLevel||\"error\"),null==filteredClasses[this.className]&&(classFilters[this.className]=!0)};Logger.prototype.debug=function(e,s){if(this.isDebug()&&(Object.keys(filteredClasses).length>0&&filteredClasses[this.className]||0===Object.keys(filteredClasses).length&&classFilters[this.className])){var r=(new Date).getTime(),t=f(\"[%s-%s:%s] %s %s\",\"DEBUG\",this.className,pid,r,e),l={type:\"debug\",message:e,className:this.className,pid:pid,date:r};s&&(l.meta=s),currentLogger(t,l)}},Logger.prototype.warn=function(e,s){if(this.isWarn()&&(Object.keys(filteredClasses).length>0&&filteredClasses[this.className]||0===Object.keys(filteredClasses).length&&classFilters[this.className])){var r=(new Date).getTime(),t=f(\"[%s-%s:%s] %s %s\",\"WARN\",this.className,pid,r,e),l={type:\"warn\",message:e,className:this.className,pid:pid,date:r};s&&(l.meta=s),currentLogger(t,l)}},Logger.prototype.info=function(e,s){if(this.isInfo()&&(Object.keys(filteredClasses).length>0&&filteredClasses[this.className]||0===Object.keys(filteredClasses).length&&classFilters[this.className])){var r=(new Date).getTime(),t=f(\"[%s-%s:%s] %s %s\",\"INFO\",this.className,pid,r,e),l={type:\"info\",message:e,className:this.className,pid:pid,date:r};s&&(l.meta=s),currentLogger(t,l)}},Logger.prototype.error=function(e,s){if(this.isError()&&(Object.keys(filteredClasses).length>0&&filteredClasses[this.className]||0===Object.keys(filteredClasses).length&&classFilters[this.className])){var r=(new Date).getTime(),t=f(\"[%s-%s:%s] %s %s\",\"ERROR\",this.className,pid,r,e),l={type:\"error\",message:e,className:this.className,pid:pid,date:r};s&&(l.meta=s),currentLogger(t,l)}},Logger.prototype.isInfo=function(){return\"info\"===level||\"debug\"===level},Logger.prototype.isError=function(){return\"error\"===level||\"info\"===level||\"debug\"===level},Logger.prototype.isWarn=function(){return\"error\"===level||\"warn\"===level||\"info\"===level||\"debug\"===level},Logger.prototype.isDebug=function(){return\"debug\"===level},Logger.reset=function(){level=\"error\",filteredClasses={}},Logger.currentLogger=function(){return currentLogger},Logger.setCurrentLogger=function(e){if(\"function\"!=typeof e)throw new MongoError(\"current logger must be a function\");currentLogger=e},Logger.filter=function(e,s){\"class\"===e&&Array.isArray(s)&&(filteredClasses={},s.forEach(function(e){filteredClasses[e]=!0}))},Logger.setLevel=function(e){if(\"info\"!==e&&\"error\"!==e&&\"debug\"!==e&&\"warn\"!==e)throw new Error(f(\"%s is an illegal logging level\",e));level=e},module.exports=Logger;","node_modules/mongodb/lib/core/cursor.js":"\"use strict\";const Logger=require(\"./connection/logger\"),retrieveBSON=require(\"./connection/utils\").retrieveBSON,MongoError=require(\"./error\").MongoError,MongoNetworkError=require(\"./error\").MongoNetworkError,collationNotSupported=require(\"./utils\").collationNotSupported,ReadPreference=require(\"./topologies/read_preference\"),isUnifiedTopology=require(\"./utils\").isUnifiedTopology,executeOperation=require(\"../operations/execute_operation\"),Readable=require(\"stream\").Readable,SUPPORTS=require(\"../utils\").SUPPORTS,MongoDBNamespace=require(\"../utils\").MongoDBNamespace,mergeOptions=require(\"../utils\").mergeOptions,OperationBase=require(\"../operations/operation\").OperationBase,BSON=retrieveBSON(),Long=BSON.Long,CursorState={INIT:0,OPEN:1,CLOSED:2,GET_MORE:3};function handleCallback(r,t,e){try{r(t,e)}catch(t){process.nextTick(function(){throw t})}}class CoreCursor extends Readable{constructor(r,t,e,o){super({objectMode:!0}),o=o||{},t instanceof OperationBase&&(this.operation=t,t=this.operation.ns.toString(),o=this.operation.options,e=this.operation.cmd?this.operation.cmd:{}),this.pool=null,this.server=null,this.disconnectHandler=o.disconnectHandler,this.bson=r.s.bson,this.ns=t,this.namespace=MongoDBNamespace.fromString(t),this.cmd=e,this.options=o,this.topology=r,this.cursorState={cursorId:null,cmd:e,documents:o.documents||[],cursorIndex:0,dead:!1,killed:!1,init:!1,notified:!1,limit:o.limit||e.limit||0,skip:o.skip||e.skip||0,batchSize:o.batchSize||e.batchSize||1e3,currentLimit:0,transforms:o.transforms,raw:o.raw||e&&e.raw},\"object\"==typeof o.session&&(this.cursorState.session=o.session);const s=r.s.options;\"boolean\"==typeof s.promoteLongs?this.cursorState.promoteLongs=s.promoteLongs:\"boolean\"==typeof o.promoteLongs&&(this.cursorState.promoteLongs=o.promoteLongs),\"boolean\"==typeof s.promoteValues?this.cursorState.promoteValues=s.promoteValues:\"boolean\"==typeof o.promoteValues&&(this.cursorState.promoteValues=o.promoteValues),\"boolean\"==typeof s.promoteBuffers?this.cursorState.promoteBuffers=s.promoteBuffers:\"boolean\"==typeof o.promoteBuffers&&(this.cursorState.promoteBuffers=o.promoteBuffers),s.reconnect&&(this.cursorState.reconnect=s.reconnect),this.logger=Logger(\"Cursor\",s),\"number\"==typeof e?(this.cursorState.cursorId=Long.fromNumber(e),this.cursorState.lastCursorId=this.cursorState.cursorId):e instanceof Long&&(this.cursorState.cursorId=e,this.cursorState.lastCursorId=e),this.operation&&(this.operation.cursorState=this.cursorState)}setCursorBatchSize(r){this.cursorState.batchSize=r}cursorBatchSize(){return this.cursorState.batchSize}setCursorLimit(r){this.cursorState.limit=r}cursorLimit(){return this.cursorState.limit}setCursorSkip(r){this.cursorState.skip=r}cursorSkip(){return this.cursorState.skip}_next(r){nextFunction(this,r)}clone(){const r=mergeOptions({},this.options);return delete r.session,this.topology.cursor(this.ns,this.cmd,r)}isDead(){return!0===this.cursorState.dead}isKilled(){return!0===this.cursorState.killed}isNotified(){return!0===this.cursorState.notified}bufferedCount(){return this.cursorState.documents.length-this.cursorState.cursorIndex}readBufferedDocuments(r){const t=this.cursorState.documents.length-this.cursorState.cursorIndex,e=r<t?r:t;let o=this.cursorState.documents.slice(this.cursorState.cursorIndex,this.cursorState.cursorIndex+e);if(this.cursorState.transforms&&\"function\"==typeof this.cursorState.transforms.doc)for(let r=0;r<o.length;r++)o[r]=this.cursorState.transforms.doc(o[r]);return this.cursorState.limit>0&&this.cursorState.currentLimit+o.length>this.cursorState.limit&&(o=o.slice(0,this.cursorState.limit-this.cursorState.currentLimit),this.kill()),this.cursorState.currentLimit=this.cursorState.currentLimit+o.length,this.cursorState.cursorIndex=this.cursorState.cursorIndex+o.length,o}kill(r){this.cursorState.dead=!0,this.cursorState.killed=!0,this.cursorState.documents=[],null==this.cursorState.cursorId||this.cursorState.cursorId.isZero()||!1===this.cursorState.init?r&&r(null,null):this.server.killCursors(this.ns,this.cursorState,r)}rewind(){this.cursorState.init&&(this.cursorState.dead||this.kill(),this.cursorState.currentLimit=0,this.cursorState.init=!1,this.cursorState.dead=!1,this.cursorState.killed=!1,this.cursorState.notified=!1,this.cursorState.documents=[],this.cursorState.cursorId=null,this.cursorState.cursorIndex=0)}_read(){if(this.s&&this.s.state===CursorState.CLOSED||this.isDead())return this.push(null);this._next((r,t)=>r?(this.listeners(\"error\")&&this.listeners(\"error\").length>0&&this.emit(\"error\",r),this.isDead()||this.close(),this.emit(\"end\"),this.emit(\"finish\")):this.cursorState.streamOptions&&\"function\"==typeof this.cursorState.streamOptions.transform&&null!=t?this.push(this.cursorState.streamOptions.transform(t)):(this.push(t),void(null===t&&this.isDead()&&this.once(\"end\",()=>{this.close(),this.emit(\"finish\")}))))}_endSession(r,t){\"function\"==typeof r&&(t=r,r={}),r=r||{};const e=this.cursorState.session;return e&&(r.force||e.owner===this)?(this.cursorState.session=void 0,this.operation&&this.operation.clearSession(),e.endSession(t),!0):(t&&t(),!1)}_getMore(r){this.logger.isDebug()&&this.logger.debug(`schedule getMore call for query [${JSON.stringify(this.query)}]`);let t=this.cursorState.batchSize;this.cursorState.limit>0&&this.cursorState.currentLimit+t>this.cursorState.limit&&(t=this.cursorState.limit-this.cursorState.currentLimit);const e=this.cursorState;this.server.getMore(this.ns,e,t,this.options,(t,o,s)=>{(t||e.cursorId&&e.cursorId.isZero())&&this._endSession(),r(t,o,s)})}_initializeCursor(r){const t=this;if(isUnifiedTopology(t.topology)&&t.topology.shouldCheckForSessionSupport())return void t.topology.selectServer(ReadPreference.primaryPreferred,t=>{t?r(t):this._initializeCursor(r)});function e(e,o){const s=t.cursorState;if((e||s.cursorId&&s.cursorId.isZero())&&t._endSession(),0===s.documents.length&&s.cursorId&&s.cursorId.isZero()&&!t.cmd.tailable&&!t.cmd.awaitData)return setCursorNotified(t,r);r(e,o)}const o=(r,o)=>{if(r)return e(r);const s=o.message;if(Array.isArray(s.documents)&&1===s.documents.length){const r=s.documents[0];if(s.queryFailure)return e(new MongoError(r),null);if(!t.cmd.find||t.cmd.find&&!1===t.cmd.virtual){if(r.$err||r.errmsg)return e(new MongoError(r),null);if(null!=r.cursor&&\"string\"!=typeof r.cursor){const o=r.cursor.id;return r.cursor.ns&&(t.ns=r.cursor.ns),t.cursorState.cursorId=\"number\"==typeof o?Long.fromNumber(o):o,t.cursorState.lastCursorId=t.cursorState.cursorId,t.cursorState.operationTime=r.operationTime,Array.isArray(r.cursor.firstBatch)&&(t.cursorState.documents=r.cursor.firstBatch),e(null,s)}}}const i=s.cursorId||0;t.cursorState.cursorId=i instanceof Long?i:Long.fromNumber(i),t.cursorState.documents=s.documents,t.cursorState.lastCursorId=s.cursorId,t.cursorState.transforms&&\"function\"==typeof t.cursorState.transforms.query&&(t.cursorState.documents=t.cursorState.transforms.query(s)),e(null,s)};if(t.operation)return t.logger.isDebug()&&t.logger.debug(`issue initial query [${JSON.stringify(t.cmd)}] with flags [${JSON.stringify(t.query)}]`),void executeOperation(t.topology,t.operation,(r,s)=>{if(r)e(r);else{if(t.server=t.operation.server,t.cursorState.init=!0,null!=t.cursorState.cursorId)return e();o(r,s)}});const s={};return t.cursorState.session&&(s.session=t.cursorState.session),t.operation?s.readPreference=t.operation.readPreference:t.options.readPreference&&(s.readPreference=t.options.readPreference),t.topology.selectServer(s,(s,i)=>{if(s){const e=t.disconnectHandler;return null!=e?e.addObjectAndMethod(\"cursor\",t,\"next\",[r],r):r(s)}if(t.server=i,t.cursorState.init=!0,collationNotSupported(t.server,t.cmd))return r(new MongoError(`server ${t.server.name} does not support collation`));if(null!=t.cursorState.cursorId)return e();if(t.logger.isDebug()&&t.logger.debug(`issue initial query [${JSON.stringify(t.cmd)}] with flags [${JSON.stringify(t.query)}]`),null!=t.cmd.find)return void i.query(t.ns,t.cmd,t.cursorState,t.options,o);const n=Object.assign({session:t.cursorState.session},t.options);i.command(t.ns,t.cmd,n,o)})}}function isConnectionDead(r,t){if(r.pool&&r.pool.isDestroyed()){r.cursorState.killed=!0;const e=new MongoNetworkError(`connection to host ${r.pool.host}:${r.pool.port} was destroyed`);return _setCursorNotifiedImpl(r,()=>t(e)),!0}return!1}function isCursorDeadButNotkilled(r,t){return!(!r.cursorState.dead||r.cursorState.killed)&&(r.cursorState.killed=!0,setCursorNotified(r,t),!0)}function isCursorDeadAndKilled(r,t){return!(!r.cursorState.dead||!r.cursorState.killed)&&(handleCallback(t,new MongoError(\"cursor is dead\")),!0)}function isCursorKilled(r,t){return!!r.cursorState.killed&&(setCursorNotified(r,t),!0)}function setCursorDeadAndNotified(r,t){r.cursorState.dead=!0,setCursorNotified(r,t)}function setCursorNotified(r,t){_setCursorNotifiedImpl(r,()=>handleCallback(t,null,null))}function _setCursorNotifiedImpl(r,t){if(r.cursorState.notified=!0,r.cursorState.documents=[],r.cursorState.cursorIndex=0,!r.cursorState.session)return t();r._endSession(t)}function nextFunction(r,t){if(r.cursorState.notified)return t(new Error(\"cursor is exhausted\"));if(!isCursorKilled(r,t)&&!isCursorDeadButNotkilled(r,t)&&!isCursorDeadAndKilled(r,t))if(r.cursorState.init)if(r.cursorState.limit>0&&r.cursorState.currentLimit>=r.cursorState.limit)r.kill(()=>setCursorDeadAndNotified(r,t));else if(r.cursorState.cursorIndex!==r.cursorState.documents.length||Long.ZERO.equals(r.cursorState.cursorId)){if(r.cursorState.documents.length===r.cursorState.cursorIndex&&r.cmd.tailable&&Long.ZERO.equals(r.cursorState.cursorId))return handleCallback(t,new MongoError({message:\"No more documents in tailed cursor\",tailable:r.cmd.tailable,awaitData:r.cmd.awaitData}));if(r.cursorState.documents.length===r.cursorState.cursorIndex&&Long.ZERO.equals(r.cursorState.cursorId))setCursorDeadAndNotified(r,t);else{if(r.cursorState.limit>0&&r.cursorState.currentLimit>=r.cursorState.limit)return void r.kill(()=>setCursorDeadAndNotified(r,t));r.cursorState.currentLimit+=1;let e=r.cursorState.documents[r.cursorState.cursorIndex++];if(!e||e.$err)return void r.kill(()=>setCursorDeadAndNotified(r,function(){handleCallback(t,new MongoError(e?e.$err:void 0))}));r.cursorState.transforms&&\"function\"==typeof r.cursorState.transforms.doc&&(e=r.cursorState.transforms.doc(e)),handleCallback(t,null,e)}}else{if(r.cursorState.documents=[],r.cursorState.cursorIndex=0,r.topology.isDestroyed())return t(new MongoNetworkError(\"connection destroyed, not possible to instantiate cursor\"));if(isConnectionDead(r,t))return;r._getMore(function(e,o,s){return e?handleCallback(t,e):(r.connection=s,0===r.cursorState.documents.length&&r.cmd.tailable&&Long.ZERO.equals(r.cursorState.cursorId)?handleCallback(t,new MongoError({message:\"No more documents in tailed cursor\",tailable:r.cmd.tailable,awaitData:r.cmd.awaitData})):0===r.cursorState.documents.length&&r.cmd.tailable&&!Long.ZERO.equals(r.cursorState.cursorId)?nextFunction(r,t):r.cursorState.limit>0&&r.cursorState.currentLimit>=r.cursorState.limit?setCursorDeadAndNotified(r,t):void nextFunction(r,t))})}else{if(!r.topology.isConnected(r.options)){if(\"server\"===r.topology._type&&!r.topology.s.options.reconnect)return t(new MongoError(\"no connection available\"));if(null!=r.disconnectHandler)return r.topology.isDestroyed()?t(new MongoError(\"Topology was destroyed\")):void r.disconnectHandler.addObjectAndMethod(\"cursor\",r,\"next\",[t],t)}r._initializeCursor((e,o)=>{e||null===o?t(e,o):nextFunction(r,t)})}}SUPPORTS.ASYNC_ITERATOR&&(CoreCursor.prototype[Symbol.asyncIterator]=require(\"../async/async_iterator\").asyncIterator),module.exports={CursorState:CursorState,CoreCursor:CoreCursor};","node_modules/mongodb/lib/core/topologies/read_preference.js":"\"use strict\";const emitWarningOnce=require(\"../../utils\").emitWarningOnce,ReadPreference=function(e,r,n){if(!ReadPreference.isValid(e))throw new TypeError(`Invalid read preference mode ${e}`);if(r&&!Array.isArray(r)){emitWarningOnce(\"ReadPreference tags must be an array, this will change in the next major version\");const e=void 0!==r.maxStalenessSeconds,a=void 0!==r.hedge;e||a?(n=r,r=void 0):r=[r]}if(this.mode=e,this.tags=r,this.hedge=n&&n.hedge,null!=(n=n||{}).maxStalenessSeconds){if(n.maxStalenessSeconds<=0)throw new TypeError(\"maxStalenessSeconds must be a positive integer\");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===ReadPreference.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new TypeError(\"Primary read preference cannot be combined with tags\");if(this.maxStalenessSeconds)throw new TypeError(\"Primary read preference cannot be combined with maxStalenessSeconds\");if(this.hedge)throw new TypeError(\"Primary read preference cannot be combined with hedge\")}};Object.defineProperty(ReadPreference.prototype,\"preference\",{enumerable:!0,get:function(){return this.mode}}),ReadPreference.PRIMARY=\"primary\",ReadPreference.PRIMARY_PREFERRED=\"primaryPreferred\",ReadPreference.SECONDARY=\"secondary\",ReadPreference.SECONDARY_PREFERRED=\"secondaryPreferred\",ReadPreference.NEAREST=\"nearest\";const VALID_MODES=[ReadPreference.PRIMARY,ReadPreference.PRIMARY_PREFERRED,ReadPreference.SECONDARY,ReadPreference.SECONDARY_PREFERRED,ReadPreference.NEAREST,null];ReadPreference.fromOptions=function(e){if(!e)return null;const r=e.readPreference;if(!r)return null;const n=e.readPreferenceTags,a=e.maxStalenessSeconds;if(\"string\"==typeof r)return new ReadPreference(r,n);if(!(r instanceof ReadPreference)&&\"object\"==typeof r){const e=r.mode||r.preference;if(e&&\"string\"==typeof e)return new ReadPreference(e,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds||a,hedge:r.hedge})}return r},ReadPreference.resolve=function(e,r){const n=(r=r||{}).session,a=e&&e.readPreference;let t;return\"string\"==typeof(t=r.readPreference?ReadPreference.fromOptions(r):n&&n.inTransaction()&&n.transaction.options.readPreference?n.transaction.options.readPreference:null!=a?a:ReadPreference.primary)?new ReadPreference(t):t},ReadPreference.translate=function(e){if(null==e.readPreference)return e;const r=e.readPreference;if(\"string\"==typeof r)e.readPreference=new ReadPreference(r);else if(!r||r instanceof ReadPreference||\"object\"!=typeof r){if(!(r instanceof ReadPreference))throw new TypeError(\"Invalid read preference: \"+r)}else{const n=r.mode||r.preference;n&&\"string\"==typeof n&&(e.readPreference=new ReadPreference(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}return e},ReadPreference.isValid=function(e){return-1!==VALID_MODES.indexOf(e)},ReadPreference.prototype.isValid=function(e){return ReadPreference.isValid(\"string\"==typeof e?e:this.mode)};const needSlaveOk=[\"primaryPreferred\",\"secondary\",\"secondaryPreferred\",\"nearest\"];ReadPreference.prototype.slaveOk=function(){return-1!==needSlaveOk.indexOf(this.mode)},ReadPreference.prototype.equals=function(e){return e.mode===this.mode},ReadPreference.prototype.toJSON=function(){const e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e},ReadPreference.primary=new ReadPreference(\"primary\"),ReadPreference.primaryPreferred=new ReadPreference(\"primaryPreferred\"),ReadPreference.secondary=new ReadPreference(\"secondary\"),ReadPreference.secondaryPreferred=new ReadPreference(\"secondaryPreferred\"),ReadPreference.nearest=new ReadPreference(\"nearest\"),module.exports=ReadPreference;","node_modules/mongodb/lib/core/sessions.js":"\"use strict\";const retrieveBSON=require(\"./connection/utils\").retrieveBSON,EventEmitter=require(\"events\"),BSON=retrieveBSON(),Binary=BSON.Binary,uuidV4=require(\"./utils\").uuidV4,MongoError=require(\"./error\").MongoError,isRetryableError=require(\"././error\").isRetryableError,MongoNetworkError=require(\"./error\").MongoNetworkError,MongoWriteConcernError=require(\"./error\").MongoWriteConcernError,Transaction=require(\"./transactions\").Transaction,TxnState=require(\"./transactions\").TxnState,isPromiseLike=require(\"./utils\").isPromiseLike,ReadPreference=require(\"./topologies/read_preference\"),maybePromise=require(\"../utils\").maybePromise,isTransactionCommand=require(\"./transactions\").isTransactionCommand,resolveClusterTime=require(\"./topologies/shared\").resolveClusterTime,isSharded=require(\"./wireprotocol/shared\").isSharded,maxWireVersion=require(\"./utils\").maxWireVersion,now=require(\"./../utils\").now,calculateDurationInMs=require(\"./../utils\").calculateDurationInMs,minWireVersionForShardedTransactions=8;function assertAlive(n,e){if(null==n.serverSession){const n=new MongoError(\"Cannot use a session that has ended\");if(\"function\"==typeof e)return e(n,null),!1;throw n}return!0}const kServerSession=Symbol(\"serverSession\");class ClientSession extends EventEmitter{constructor(n,e,r,t){if(super(),null==n)throw new Error(\"ClientSession requires a topology\");if(null==e||!(e instanceof ServerSessionPool))throw new Error(\"ClientSession requires a ServerSessionPool\");r=r||{},t=t||{},this.topology=n,this.sessionPool=e,this.hasEnded=!1,this.clientOptions=t,this[kServerSession]=void 0,this.supports={causalConsistency:void 0===r.causalConsistency||r.causalConsistency},this.clusterTime=r.initialClusterTime,this.operationTime=null,this.explicit=!!r.explicit,this.owner=r.owner,this.defaultTransactionOptions=Object.assign({},r.defaultTransactionOptions),this.transaction=new Transaction}get id(){return this.serverSession.id}get serverSession(){return null==this[kServerSession]&&(this[kServerSession]=this.sessionPool.acquire()),this[kServerSession]}endSession(n,e){\"function\"==typeof n&&(e=n,n={}),n=n||{};const r=this;return maybePromise(this,e,n=>{if(r.hasEnded)return n();function e(){r.sessionPool.release(r.serverSession),r[kServerSession]=void 0,r.hasEnded=!0,r.emit(\"ended\",r),n()}r.serverSession&&r.inTransaction()?r.abortTransaction(r=>{if(r)return n(r);e()}):e()})}advanceOperationTime(n){null!=this.operationTime?n.greaterThan(this.operationTime)&&(this.operationTime=n):this.operationTime=n}equals(n){return n instanceof ClientSession&&this.id.id.buffer.equals(n.id.id.buffer)}incrementTransactionNumber(){this.serverSession.txnNumber++}inTransaction(){return this.transaction.isActive}startTransaction(n){if(assertAlive(this),this.inTransaction())throw new MongoError(\"Transaction already in progress\");const e=maxWireVersion(this.topology);if(isSharded(this.topology)&&null!=e&&e<minWireVersionForShardedTransactions)throw new MongoError(\"Transactions are not supported on sharded clusters in MongoDB < 4.2.\");this.incrementTransactionNumber(),this.transaction=new Transaction(Object.assign({},this.clientOptions,n||this.defaultTransactionOptions)),this.transaction.transition(TxnState.STARTING_TRANSACTION)}commitTransaction(n){return maybePromise(this,n,n=>endTransaction(this,\"commitTransaction\",n))}abortTransaction(n){return maybePromise(this,n,n=>endTransaction(this,\"abortTransaction\",n))}toBSON(){throw new Error(\"ClientSession cannot be serialized to BSON.\")}withTransaction(n,e){return attemptTransaction(this,now(),n,e)}}const MAX_WITH_TRANSACTION_TIMEOUT=12e4,UNSATISFIABLE_WRITE_CONCERN_CODE=100,UNKNOWN_REPL_WRITE_CONCERN_CODE=79,MAX_TIME_MS_EXPIRED_CODE=50,NON_DETERMINISTIC_WRITE_CONCERN_ERRORS=new Set([\"CannotSatisfyWriteConcern\",\"UnknownReplWriteConcern\",\"UnsatisfiableWriteConcern\"]);function hasNotTimedOut(n,e){return calculateDurationInMs(n)<e}function isUnknownTransactionCommitResult(n){return isMaxTimeMSExpiredError(n)||!NON_DETERMINISTIC_WRITE_CONCERN_ERRORS.has(n.codeName)&&n.code!==UNSATISFIABLE_WRITE_CONCERN_CODE&&n.code!==UNKNOWN_REPL_WRITE_CONCERN_CODE}function isMaxTimeMSExpiredError(n){return null!=n&&(n.code===MAX_TIME_MS_EXPIRED_CODE||n.writeConcernError&&n.writeConcernError.code===MAX_TIME_MS_EXPIRED_CODE)}function attemptTransactionCommit(n,e,r,t){return n.commitTransaction().catch(o=>{if(o instanceof MongoError&&hasNotTimedOut(e,MAX_WITH_TRANSACTION_TIMEOUT)&&!isMaxTimeMSExpiredError(o)){if(o.hasErrorLabel(\"UnknownTransactionCommitResult\"))return attemptTransactionCommit(n,e,r,t);if(o.hasErrorLabel(\"TransientTransactionError\"))return attemptTransaction(n,e,r,t)}throw o})}const USER_EXPLICIT_TXN_END_STATES=new Set([TxnState.NO_TRANSACTION,TxnState.TRANSACTION_COMMITTED,TxnState.TRANSACTION_ABORTED]);function userExplicitlyEndedTransaction(n){return USER_EXPLICIT_TXN_END_STATES.has(n.transaction.state)}function attemptTransaction(n,e,r,t){let o;n.startTransaction(t);try{o=r(n)}catch(n){o=Promise.reject(n)}if(!isPromiseLike(o))throw n.abortTransaction(),new TypeError(\"Function provided to `withTransaction` must return a Promise\");return o.then(()=>{if(!userExplicitlyEndedTransaction(n))return attemptTransactionCommit(n,e,r,t)}).catch(o=>{function i(o){if(o instanceof MongoError&&o.hasErrorLabel(\"TransientTransactionError\")&&hasNotTimedOut(e,MAX_WITH_TRANSACTION_TIMEOUT))return attemptTransaction(n,e,r,t);throw isMaxTimeMSExpiredError(o)&&o.addErrorLabel(\"UnknownTransactionCommitResult\"),o}return n.transaction.isActive?n.abortTransaction().then(()=>i(o)):i(o)})}function endTransaction(n,e,r){if(!assertAlive(n,r))return;let t=n.transaction.state;if(t===TxnState.NO_TRANSACTION)return void r(new MongoError(\"No transaction started\"));if(\"commitTransaction\"===e){if(t===TxnState.STARTING_TRANSACTION||t===TxnState.TRANSACTION_COMMITTED_EMPTY)return n.transaction.transition(TxnState.TRANSACTION_COMMITTED_EMPTY),void r(null,null);if(t===TxnState.TRANSACTION_ABORTED)return void r(new MongoError(\"Cannot call commitTransaction after calling abortTransaction\"))}else{if(t===TxnState.STARTING_TRANSACTION)return n.transaction.transition(TxnState.TRANSACTION_ABORTED),void r(null,null);if(t===TxnState.TRANSACTION_ABORTED)return void r(new MongoError(\"Cannot call abortTransaction twice\"));if(t===TxnState.TRANSACTION_COMMITTED||t===TxnState.TRANSACTION_COMMITTED_EMPTY)return void r(new MongoError(\"Cannot call abortTransaction after calling commitTransaction\"))}const o={[e]:1};let i;function s(t,o){\"commitTransaction\"===e?(n.transaction.transition(TxnState.TRANSACTION_COMMITTED),t&&(t instanceof MongoNetworkError||t instanceof MongoWriteConcernError||isRetryableError(t)||isMaxTimeMSExpiredError(t))&&isUnknownTransactionCommitResult(t)&&(t.addErrorLabel(\"UnknownTransactionCommitResult\"),n.transaction.unpinServer())):n.transaction.transition(TxnState.TRANSACTION_ABORTED),r(t,o)}function a(n){return\"commitTransaction\"===e?n:null}n.transaction.options.writeConcern?i=Object.assign({},n.transaction.options.writeConcern):n.clientOptions&&n.clientOptions.w&&(i={w:n.clientOptions.w}),t===TxnState.TRANSACTION_COMMITTED&&(i=Object.assign({wtimeout:1e4},i,{w:\"majority\"})),i&&Object.assign(o,{writeConcern:i}),\"commitTransaction\"===e&&n.transaction.options.maxTimeMS&&Object.assign(o,{maxTimeMS:n.transaction.options.maxTimeMS}),n.transaction.recoveryToken&&supportsRecoveryToken(n)&&(o.recoveryToken=n.transaction.recoveryToken),n.topology.command(\"admin.$cmd\",o,{session:n},(e,r)=>{if(e&&isRetryableError(e))return o.commitTransaction&&(n.transaction.unpinServer(),o.writeConcern=Object.assign({wtimeout:1e4},o.writeConcern,{w:\"majority\"})),n.topology.command(\"admin.$cmd\",o,{session:n},(n,e)=>s(a(n),e));s(a(e),r)})}function supportsRecoveryToken(n){return!!n.topology.s.options.useRecoveryToken}class ServerSession{constructor(){this.id={id:new Binary(uuidV4(),Binary.SUBTYPE_UUID)},this.lastUse=now(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(n){return Math.round(calculateDurationInMs(this.lastUse)%864e5%36e5/6e4)>n-1}}class ServerSessionPool{constructor(n){if(null==n)throw new Error(\"ServerSessionPool requires a topology\");this.topology=n,this.sessions=[]}endAllPooledSessions(n){this.sessions.length?this.topology.endSessions(this.sessions.map(n=>n.id),()=>{this.sessions=[],\"function\"==typeof n&&n()}):\"function\"==typeof n&&n()}acquire(){const n=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length;){const e=this.sessions.shift();if(!e.hasTimedOut(n))return e}return new ServerSession}release(n){const e=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length;){if(!this.sessions[this.sessions.length-1].hasTimedOut(e))break;this.sessions.pop()}if(!n.hasTimedOut(e)){if(n.isDirty)return;this.sessions.unshift(n)}}}function commandSupportsReadConcern(n,e){return!!(n.aggregate||n.count||n.distinct||n.find||n.parallelCollectionScan||n.geoNear||n.geoSearch)||!(!(n.mapReduce&&e&&e.out)||1!==e.out.inline&&\"inline\"!==e.out)}function applySession(n,e,r){if(n.hasEnded)return new MongoError(\"Cannot use a session that has ended\");if(r&&r.writeConcern&&0===r.writeConcern.w)return;const t=n.serverSession;t.lastUse=now(),e.lsid=t.id;const o=n.inTransaction()||isTransactionCommand(e),i=r.willRetryWrite,s=commandSupportsReadConcern(e,r);if(t.txnNumber&&(i||o)&&(e.txnNumber=BSON.Long.fromNumber(t.txnNumber)),!o)return n.transaction.state!==TxnState.NO_TRANSACTION&&n.transaction.transition(TxnState.NO_TRANSACTION),void(n.supports.causalConsistency&&n.operationTime&&s&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:n.operationTime})));if(r.readPreference&&!r.readPreference.equals(ReadPreference.primary))return new MongoError(`Read preference in a transaction must be primary, not: ${r.readPreference.mode}`);if(e.autocommit=!1,n.transaction.state===TxnState.STARTING_TRANSACTION){n.transaction.transition(TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;const r=n.transaction.options.readConcern||n.clientOptions.readConcern;r&&(e.readConcern=r),n.supports.causalConsistency&&n.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:n.operationTime}))}}function updateSessionFromResponse(n,e){e.$clusterTime&&resolveClusterTime(n,e.$clusterTime),e.operationTime&&n&&n.supports.causalConsistency&&n.advanceOperationTime(e.operationTime),e.recoveryToken&&n&&n.inTransaction()&&(n.transaction._recoveryToken=e.recoveryToken)}module.exports={ClientSession:ClientSession,ServerSession:ServerSession,ServerSessionPool:ServerSessionPool,TxnState:TxnState,applySession:applySession,updateSessionFromResponse:updateSessionFromResponse,commandSupportsReadConcern:commandSupportsReadConcern};","node_modules/mongodb/lib/core/sdam/topology.js":"\"use strict\";const Denque=require(\"denque\"),EventEmitter=require(\"events\"),ServerDescription=require(\"./server_description\").ServerDescription,ServerType=require(\"./common\").ServerType,TopologyDescription=require(\"./topology_description\").TopologyDescription,TopologyType=require(\"./common\").TopologyType,events=require(\"./events\"),Server=require(\"./server\").Server,relayEvents=require(\"../utils\").relayEvents,ReadPreference=require(\"../topologies/read_preference\"),isRetryableWritesSupported=require(\"../topologies/shared\").isRetryableWritesSupported,CoreCursor=require(\"../cursor\").CoreCursor,deprecate=require(\"util\").deprecate,BSON=require(\"../connection/utils\").retrieveBSON(),createCompressionInfo=require(\"../topologies/shared\").createCompressionInfo,ClientSession=require(\"../sessions\").ClientSession,MongoError=require(\"../error\").MongoError,MongoServerSelectionError=require(\"../error\").MongoServerSelectionError,resolveClusterTime=require(\"../topologies/shared\").resolveClusterTime,SrvPoller=require(\"./srv_polling\").SrvPoller,getMMAPError=require(\"../topologies/shared\").getMMAPError,makeStateMachine=require(\"../utils\").makeStateMachine,eachAsync=require(\"../utils\").eachAsync,emitDeprecationWarning=require(\"../../utils\").emitDeprecationWarning,ServerSessionPool=require(\"../sessions\").ServerSessionPool,makeClientMetadata=require(\"../utils\").makeClientMetadata,CMAP_EVENT_NAMES=require(\"../../cmap/events\").CMAP_EVENT_NAMES,compareTopologyVersion=require(\"./server_description\").compareTopologyVersion,emitWarning=require(\"../../utils\").emitWarning,common=require(\"./common\"),drainTimerQueue=common.drainTimerQueue,clearAndRemoveTimerFrom=common.clearAndRemoveTimerFrom,serverSelection=require(\"./server_selection\"),readPreferenceServerSelector=serverSelection.readPreferenceServerSelector,writableServerSelector=serverSelection.writableServerSelector;let globalTopologyCounter=0;const SERVER_RELAY_EVENTS=[\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"commandStarted\",\"commandSucceeded\",\"commandFailed\",\"monitoring\"].concat(CMAP_EVENT_NAMES),LOCAL_SERVER_EVENTS=[\"connect\",\"descriptionReceived\",\"close\",\"ended\"],STATE_CLOSING=common.STATE_CLOSING,STATE_CLOSED=common.STATE_CLOSED,STATE_CONNECTING=common.STATE_CONNECTING,STATE_CONNECTED=common.STATE_CONNECTED,stateTransition=makeStateMachine({[STATE_CLOSED]:[STATE_CLOSED,STATE_CONNECTING],[STATE_CONNECTING]:[STATE_CONNECTING,STATE_CLOSING,STATE_CONNECTED,STATE_CLOSED],[STATE_CONNECTED]:[STATE_CONNECTED,STATE_CLOSING,STATE_CLOSED],[STATE_CLOSING]:[STATE_CLOSING,STATE_CLOSED]}),DEPRECATED_OPTIONS=new Set([\"autoReconnect\",\"reconnectTries\",\"reconnectInterval\",\"bufferMaxEntries\"]),kCancelled=Symbol(\"cancelled\"),kWaitQueue=Symbol(\"waitQueue\");class Topology extends EventEmitter{constructor(e,r){super(),void 0===r&&\"string\"!=typeof e&&(r=e,e=[],r.host&&e.push({host:r.host,port:r.port})),\"string\"==typeof(e=e||[])&&(e=parseStringSeedlist(e)),r=Object.assign({},common.TOPOLOGY_DEFAULTS,r),r=Object.freeze(Object.assign(r,{metadata:makeClientMetadata(r),compression:{compressors:createCompressionInfo(r)}})),DEPRECATED_OPTIONS.forEach(e=>{r[e]&&emitDeprecationWarning(`The option \\`${e}\\` is incompatible with the unified topology, please read more by visiting http://bit.ly/2D8WfT6`,\"DeprecationWarning\")});const t=topologyTypeFromSeedlist(e,r),o=globalTopologyCounter++,s=e.reduce((e,r)=>{r.domain_socket&&(r.host=r.domain_socket);const t=r.port?`${r.host}:${r.port}`:`${r.host}:27017`;return e.set(t,new ServerDescription(t)),e},new Map);this[kWaitQueue]=new Denque,this.s={id:o,options:r,seedlist:e,state:STATE_CLOSED,description:new TopologyDescription(t,s,r.replicaSet,null,null,null,r),serverSelectionTimeoutMS:r.serverSelectionTimeoutMS,heartbeatFrequencyMS:r.heartbeatFrequencyMS,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS,Cursor:r.cursorFactory||CoreCursor,bson:r.bson||new BSON([BSON.Binary,BSON.Code,BSON.DBRef,BSON.Decimal128,BSON.Double,BSON.Int32,BSON.Long,BSON.Map,BSON.MaxKey,BSON.MinKey,BSON.ObjectId,BSON.BSONRegExp,BSON.Symbol,BSON.Timestamp]),servers:new Map,sessionPool:new ServerSessionPool(this),sessions:new Set,promiseLibrary:r.promiseLibrary||Promise,credentials:r.credentials,clusterTime:null,connectionTimers:new Set},r.srvHost&&(this.s.srvPoller=r.srvPoller||new SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:r.srvHost,logger:r.logger,loggerLevel:r.loggerLevel}),this.s.detectTopologyDescriptionChange=(e=>{const r=e.previousDescription.type,t=e.newDescription.type;r!==TopologyType.Sharded&&t===TopologyType.Sharded&&(this.s.handleSrvPolling=srvPollingHandler(this),this.s.srvPoller.on(\"srvRecordDiscovery\",this.s.handleSrvPolling),this.s.srvPoller.start())}),this.on(\"topologyDescriptionChanged\",this.s.detectTopologyDescriptionChange)),this.setMaxListeners(1/0)}get description(){return this.s.description}get parserType(){return BSON.native?\"c++\":\"js\"}connect(e,r){if(\"function\"==typeof e&&(r=e,e={}),e=e||{},this.s.state===STATE_CONNECTED)return void(\"function\"==typeof r&&r());stateTransition(this,STATE_CONNECTING),this.emit(\"topologyOpening\",new events.TopologyOpeningEvent(this.s.id)),this.emit(\"topologyDescriptionChanged\",new events.TopologyDescriptionChangedEvent(this.s.id,new TopologyDescription(TopologyType.Unknown),this.s.description)),connectServers(this,Array.from(this.s.description.servers.values())),ReadPreference.translate(e);const t=e.readPreference||ReadPreference.primary,o=e=>{if(e)return this.close(),void(\"function\"==typeof r?r(e):this.emit(\"error\",e));stateTransition(this,STATE_CONNECTED),this.emit(\"open\",e,this),this.emit(\"connect\",this),\"function\"==typeof r&&r(e,this)};this.s.credentials?this.command(\"admin.$cmd\",{ping:1},{readPreference:t},o):this.selectServer(readPreferenceServerSelector(t),e,o)}close(e,r){\"function\"==typeof e&&(r=e,e={}),\"boolean\"==typeof e&&(e={force:e}),e=e||{},this.s.state!==STATE_CLOSED&&this.s.state!==STATE_CLOSING?(stateTransition(this,STATE_CLOSING),drainWaitQueue(this[kWaitQueue],new MongoError(\"Topology closed\")),drainTimerQueue(this.s.connectionTimers),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.handleSrvPolling&&(this.s.srvPoller.removeListener(\"srvRecordDiscovery\",this.s.handleSrvPolling),delete this.s.handleSrvPolling)),this.s.detectTopologyDescriptionChange&&(this.removeListener(\"topologyDescriptionChanged\",this.s.detectTopologyDescriptionChange),delete this.s.detectTopologyDescriptionChange),this.s.sessions.forEach(e=>e.endSession()),this.s.sessionPool.endAllPooledSessions(()=>{eachAsync(Array.from(this.s.servers.values()),(r,t)=>destroyServer(r,this,e,t),e=>{this.s.servers.clear(),this.emit(\"topologyClosed\",new events.TopologyClosedEvent(this.s.id)),stateTransition(this,STATE_CLOSED),\"function\"==typeof r&&r(e)})})):\"function\"==typeof r&&r()}selectServer(e,r,t){if(\"function\"==typeof r)if(t=r,\"function\"!=typeof e){let t;r=e,e instanceof ReadPreference?t=e:\"string\"==typeof e?t=new ReadPreference(e):(ReadPreference.translate(r),t=r.readPreference||ReadPreference.primary),e=readPreferenceServerSelector(t)}else r={};r=Object.assign({},{serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS},r);const o=this.description.type===TopologyType.Sharded,s=r.session,i=s&&s.transaction;if(o&&i&&i.server)return void t(void 0,i.server);let n=e;if(\"object\"==typeof e){const r=e.readPreference?e.readPreference:ReadPreference.primary;n=readPreferenceServerSelector(r)}const c={serverSelector:n,transaction:i,callback:t},a=r.serverSelectionTimeoutMS;a&&(c.timer=setTimeout(()=>{c[kCancelled]=!0,c.timer=void 0;const e=new MongoServerSelectionError(`Server selection timed out after ${a} ms`,this.description);c.callback(e)},a)),this[kWaitQueue].push(c),processWaitQueue(this)}shouldCheckForSessionSupport(){return this.description.type===TopologyType.Single?!this.description.hasKnownServers:!this.description.hasDataBearingServers}hasSessionSupport(){return null!=this.description.logicalSessionTimeoutMinutes}startSession(e,r){const t=new ClientSession(this,this.s.sessionPool,e,r);return t.once(\"ended\",()=>{this.s.sessions.delete(t)}),this.s.sessions.add(t),t}endSessions(e,r){Array.isArray(e)||(e=[e]),this.command(\"admin.$cmd\",{endSessions:e},{readPreference:ReadPreference.primaryPreferred,noResponse:!0},()=>{\"function\"==typeof r&&r()})}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address))return;if(isStaleServerDescription(this.s.description,e))return;const r=this.s.description,t=this.s.description.servers.get(e.address),o=e.$clusterTime;o&&resolveClusterTime(this,o);const s=t&&t.equals(e);this.s.description=this.s.description.update(e),this.s.description.compatibilityError?this.emit(\"error\",new MongoError(this.s.description.compatibilityError)):(s||this.emit(\"serverDescriptionChanged\",new events.ServerDescriptionChangedEvent(this.s.id,e.address,t,this.s.description.servers.get(e.address))),updateServers(this,e),this[kWaitQueue].length>0&&processWaitQueue(this),s||this.emit(\"topologyDescriptionChanged\",new events.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}auth(e,r){\"function\"==typeof e&&(r=e,e=null),\"function\"==typeof r&&r(null,!0)}logout(e){\"function\"==typeof e&&e(null,!0)}insert(e,r,t,o){executeWriteOperation({topology:this,op:\"insert\",ns:e,ops:r},t,o)}update(e,r,t,o){executeWriteOperation({topology:this,op:\"update\",ns:e,ops:r},t,o)}remove(e,r,t,o){executeWriteOperation({topology:this,op:\"remove\",ns:e,ops:r},t,o)}command(e,r,t,o){\"function\"==typeof t&&(o=t,t=(t={})||{}),ReadPreference.translate(t);const s=t.readPreference||ReadPreference.primary;this.selectServer(readPreferenceServerSelector(s),t,(s,i)=>{if(s)return void o(s);const n=!t.retrying&&!!t.retryWrites&&t.session&&isRetryableWritesSupported(this)&&!t.session.inTransaction()&&isWriteCommand(r);n&&(t.session.incrementTransactionNumber(),t.willRetryWrite=n),i.command(e,r,t,(s,i)=>{if(!s)return o(null,i);if(!shouldRetryOperation(s))return o(s);if(n){const s=Object.assign({},t,{retrying:!0});return this.command(e,r,s,o)}return o(s)})})}cursor(e,r,t){const o=(t=t||{}).topology||this,s=t.cursorFactory||this.s.Cursor;return ReadPreference.translate(t),new s(o,e,r,t)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===STATE_CONNECTED}isDestroyed(){return this.s.state===STATE_CLOSED}unref(){emitWarning(\"not implemented: `unref`\")}lastIsMaster(){const e=Array.from(this.description.servers.values());return 0===e.length?{}:e.filter(e=>e.type!==ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get bson(){return this.s.bson}}Object.defineProperty(Topology.prototype,\"clusterTime\",{enumerable:!0,get:function(){return this.s.clusterTime},set:function(e){this.s.clusterTime=e}}),Topology.prototype.destroy=deprecate(Topology.prototype.close,\"destroy() is deprecated, please use close() instead\");const RETRYABLE_WRITE_OPERATIONS=[\"findAndModify\",\"insert\",\"update\",\"delete\"];function isWriteCommand(e){return RETRYABLE_WRITE_OPERATIONS.some(r=>e[r])}function isStaleServerDescription(e,r){const t=e.servers.get(r.address).topologyVersion;return compareTopologyVersion(t,r.topologyVersion)>0}function destroyServer(e,r,t,o){t=t||{},LOCAL_SERVER_EVENTS.forEach(r=>e.removeAllListeners(r)),e.destroy(t,()=>{r.emit(\"serverClosed\",new events.ServerClosedEvent(r.s.id,e.description.address)),SERVER_RELAY_EVENTS.forEach(r=>e.removeAllListeners(r)),\"function\"==typeof o&&o()})}function parseStringSeedlist(e){return e.split(\",\").map(e=>({host:e.split(\":\")[0],port:e.split(\":\")[1]||27017}))}function topologyTypeFromSeedlist(e,r){if(r.directConnection)return TopologyType.Single;return null==(r.replicaSet||r.setName||r.rs_name)?TopologyType.Unknown:TopologyType.ReplicaSetNoPrimary}function randomSelection(e){return e[Math.floor(Math.random()*e.length)]}function createAndConnectServer(e,r,t){e.emit(\"serverOpening\",new events.ServerOpeningEvent(e.s.id,r.address));const o=new Server(r,e.s.options,e);if(relayEvents(o,e,SERVER_RELAY_EVENTS),o.on(\"descriptionReceived\",e.serverUpdateHandler.bind(e)),t){const r=setTimeout(()=>{clearAndRemoveTimerFrom(r,e.s.connectionTimers),o.connect()},t);return e.s.connectionTimers.add(r),o}return o.connect(),o}function connectServers(e,r){e.s.servers=r.reduce((r,t)=>{const o=createAndConnectServer(e,t);return r.set(t.address,o),r},new Map)}function updateServers(e,r){if(r&&e.s.servers.has(r.address)){e.s.servers.get(r.address).s.description=r}for(const r of e.description.servers.values())if(!e.s.servers.has(r.address)){const t=createAndConnectServer(e,r);e.s.servers.set(r.address,t)}for(const r of e.s.servers){const t=r[0];if(e.description.hasServer(t))continue;const o=e.s.servers.get(t);e.s.servers.delete(t),destroyServer(o,e)}}function executeWriteOperation(e,r,t){\"function\"==typeof r&&(t=r,r={}),r=r||{};const o=e.topology,s=e.op,i=e.ns,n=e.ops,c=!e.retrying&&!!r.retryWrites&&r.session&&isRetryableWritesSupported(o)&&!r.session.inTransaction()&&void 0===r.explain;o.selectServer(writableServerSelector(),r,(o,a)=>{if(o)return void t(o,null);const l=(o,s)=>{if(!o)return t(null,s);if(!shouldRetryOperation(o))return o=getMMAPError(o),t(o);if(c){return executeWriteOperation(Object.assign({},e,{retrying:!0}),r,t)}return t(o)};t.operationId&&(l.operationId=t.operationId),c&&(r.session.incrementTransactionNumber(),r.willRetryWrite=c),a[s](i,n,r,l)})}function shouldRetryOperation(e){return e instanceof MongoError&&e.hasErrorLabel(\"RetryableWriteError\")}function srvPollingHandler(e){return function(r){const t=e.s.description;e.s.description=e.s.description.updateFromSrvPollingEvent(r),e.s.description!==t&&(updateServers(e),e.emit(\"topologyDescriptionChanged\",new events.TopologyDescriptionChangedEvent(e.s.id,t,e.s.description)))}}function drainWaitQueue(e,r){for(;e.length;){const t=e.shift();clearTimeout(t.timer),t[kCancelled]||t.callback(r)}}function processWaitQueue(e){if(e.s.state===STATE_CLOSED)return void drainWaitQueue(e[kWaitQueue],new MongoError(\"Topology is closed, please connect\"));const r=Array.from(e.description.servers.values()),t=e[kWaitQueue].length;for(let o=0;o<t&&e[kWaitQueue].length;++o){const t=e[kWaitQueue].shift();if(t[kCancelled])continue;let o;try{const s=t.serverSelector;o=s?s(e.description,r):r}catch(e){clearTimeout(t.timer),t.callback(e);continue}if(0===o.length){e[kWaitQueue].push(t);continue}const s=randomSelection(o),i=e.s.servers.get(s.address),n=t.transaction;e.description.type===TopologyType.Sharded&&n&&n.isActive&&n.pinServer(i),clearTimeout(t.timer),t.callback(void 0,i)}e[kWaitQueue].length>0&&e.s.servers.forEach(e=>process.nextTick(()=>e.requestCheck()))}module.exports={Topology:Topology};","node_modules/mongodb/lib/core/connection/commands.js":"\"use strict\";var retrieveBSON=require(\"./utils\").retrieveBSON,BSON=retrieveBSON(),Long=BSON.Long;const Buffer=require(\"safe-buffer\").Buffer;var _requestId=0,opcodes=require(\"../wireprotocol/shared\").opcodes,OPTS_TAILABLE_CURSOR=2,OPTS_SLAVE=4,OPTS_OPLOG_REPLAY=8,OPTS_NO_CURSOR_TIMEOUT=16,OPTS_AWAIT_DATA=32,OPTS_EXHAUST=64,OPTS_PARTIAL=128,CURSOR_NOT_FOUND=1,QUERY_FAILURE=2,SHARD_CONFIG_STALE=4,AWAIT_CAPABLE=8,Query=function(e,t,s,r){if(null==t)throw new Error(\"ns must be specified for query\");if(null==s)throw new Error(\"query must be specified for query\");if(-1!==t.indexOf(\"\\0\"))throw new Error(\"namespace cannot contain a null character\");this.bson=e,this.ns=t,this.query=s,this.numberToSkip=r.numberToSkip||0,this.numberToReturn=r.numberToReturn||0,this.returnFieldSelector=r.returnFieldSelector||null,this.requestId=Query.getRequestId(),this.pre32Limit=r.pre32Limit,this.serializeFunctions=\"boolean\"==typeof r.serializeFunctions&&r.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof r.ignoreUndefined&&r.ignoreUndefined,this.maxBsonSize=r.maxBsonSize||16777216,this.checkKeys=\"boolean\"!=typeof r.checkKeys||r.checkKeys,this.batchSize=this.numberToReturn,this.tailable=!1,this.slaveOk=\"boolean\"==typeof r.slaveOk&&r.slaveOk,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1};Query.prototype.incRequestId=function(){this.requestId=_requestId++},Query.nextRequestId=function(){return _requestId+1},Query.prototype.toBin=function(){var e=[],t=null,s=0;this.tailable&&(s|=OPTS_TAILABLE_CURSOR),this.slaveOk&&(s|=OPTS_SLAVE),this.oplogReplay&&(s|=OPTS_OPLOG_REPLAY),this.noCursorTimeout&&(s|=OPTS_NO_CURSOR_TIMEOUT),this.awaitData&&(s|=OPTS_AWAIT_DATA),this.exhaust&&(s|=OPTS_EXHAUST),this.partial&&(s|=OPTS_PARTIAL),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);var r=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(r);var i=this.bson.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(i),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(t=this.bson.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(t));var o=r.length+i.length+(t?t.length:0),n=4;return r[3]=o>>24&255,r[2]=o>>16&255,r[1]=o>>8&255,r[0]=255&o,r[n+3]=this.requestId>>24&255,r[n+2]=this.requestId>>16&255,r[n+1]=this.requestId>>8&255,r[n]=255&this.requestId,r[(n+=4)+3]=0,r[n+2]=0,r[n+1]=0,r[n]=0,r[(n+=4)+3]=opcodes.OP_QUERY>>24&255,r[n+2]=opcodes.OP_QUERY>>16&255,r[n+1]=opcodes.OP_QUERY>>8&255,r[n]=255&opcodes.OP_QUERY,r[(n+=4)+3]=s>>24&255,r[n+2]=s>>16&255,r[n+1]=s>>8&255,r[n]=255&s,r[(n=(n+=4)+r.write(this.ns,n,\"utf8\")+1)-1]=0,r[n+3]=this.numberToSkip>>24&255,r[n+2]=this.numberToSkip>>16&255,r[n+1]=this.numberToSkip>>8&255,r[n]=255&this.numberToSkip,r[(n+=4)+3]=this.numberToReturn>>24&255,r[n+2]=this.numberToReturn>>16&255,r[n+1]=this.numberToReturn>>8&255,r[n]=255&this.numberToReturn,n+=4,e},Query.getRequestId=function(){return++_requestId};var GetMore=function(e,t,s,r){r=r||{},this.numberToReturn=r.numberToReturn||0,this.requestId=_requestId++,this.bson=e,this.ns=t,this.cursorId=s};GetMore.prototype.toBin=function(){var e=4+Buffer.byteLength(this.ns)+1+4+8+16,t=0,s=Buffer.alloc(e);return s[t+3]=e>>24&255,s[t+2]=e>>16&255,s[t+1]=e>>8&255,s[t]=255&e,s[(t+=4)+3]=this.requestId>>24&255,s[t+2]=this.requestId>>16&255,s[t+1]=this.requestId>>8&255,s[t]=255&this.requestId,s[(t+=4)+3]=0,s[t+2]=0,s[t+1]=0,s[t]=0,s[(t+=4)+3]=opcodes.OP_GETMORE>>24&255,s[t+2]=opcodes.OP_GETMORE>>16&255,s[t+1]=opcodes.OP_GETMORE>>8&255,s[t]=255&opcodes.OP_GETMORE,s[(t+=4)+3]=0,s[t+2]=0,s[t+1]=0,s[t]=0,s[(t=(t+=4)+s.write(this.ns,t,\"utf8\")+1)-1]=0,s[t+3]=this.numberToReturn>>24&255,s[t+2]=this.numberToReturn>>16&255,s[t+1]=this.numberToReturn>>8&255,s[t]=255&this.numberToReturn,s[(t+=4)+3]=this.cursorId.getLowBits()>>24&255,s[t+2]=this.cursorId.getLowBits()>>16&255,s[t+1]=this.cursorId.getLowBits()>>8&255,s[t]=255&this.cursorId.getLowBits(),s[(t+=4)+3]=this.cursorId.getHighBits()>>24&255,s[t+2]=this.cursorId.getHighBits()>>16&255,s[t+1]=this.cursorId.getHighBits()>>8&255,s[t]=255&this.cursorId.getHighBits(),t+=4,s};var KillCursor=function(e,t,s){this.ns=t,this.requestId=_requestId++,this.cursorIds=s};KillCursor.prototype.toBin=function(){var e=24+8*this.cursorIds.length,t=0,s=Buffer.alloc(e);s[t+3]=e>>24&255,s[t+2]=e>>16&255,s[t+1]=e>>8&255,s[t]=255&e,s[(t+=4)+3]=this.requestId>>24&255,s[t+2]=this.requestId>>16&255,s[t+1]=this.requestId>>8&255,s[t]=255&this.requestId,s[(t+=4)+3]=0,s[t+2]=0,s[t+1]=0,s[t]=0,s[(t+=4)+3]=opcodes.OP_KILL_CURSORS>>24&255,s[t+2]=opcodes.OP_KILL_CURSORS>>16&255,s[t+1]=opcodes.OP_KILL_CURSORS>>8&255,s[t]=255&opcodes.OP_KILL_CURSORS,s[(t+=4)+3]=0,s[t+2]=0,s[t+1]=0,s[t]=0,s[(t+=4)+3]=this.cursorIds.length>>24&255,s[t+2]=this.cursorIds.length>>16&255,s[t+1]=this.cursorIds.length>>8&255,s[t]=255&this.cursorIds.length,t+=4;for(var r=0;r<this.cursorIds.length;r++)s[t+3]=this.cursorIds[r].getLowBits()>>24&255,s[t+2]=this.cursorIds[r].getLowBits()>>16&255,s[t+1]=this.cursorIds[r].getLowBits()>>8&255,s[t]=255&this.cursorIds[r].getLowBits(),s[(t+=4)+3]=this.cursorIds[r].getHighBits()>>24&255,s[t+2]=this.cursorIds[r].getHighBits()>>16&255,s[t+1]=this.cursorIds[r].getHighBits()>>8&255,s[t]=255&this.cursorIds[r].getHighBits(),t+=4;return s};var Response=function(e,t,s,r,i){i=i||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1},this.parsed=!1,this.raw=t,this.data=r,this.bson=e,this.opts=i,this.length=s.length,this.requestId=s.requestId,this.responseTo=s.responseTo,this.opCode=s.opCode,this.fromCompressed=s.fromCompressed,this.responseFlags=r.readInt32LE(0),this.cursorId=new Long(r.readInt32LE(4),r.readInt32LE(8)),this.startingFrom=r.readInt32LE(12),this.numberReturned=r.readInt32LE(16),this.documents=new Array(this.numberReturned),this.cursorNotFound=0!=(this.responseFlags&CURSOR_NOT_FOUND),this.queryFailure=0!=(this.responseFlags&QUERY_FAILURE),this.shardConfigStale=0!=(this.responseFlags&SHARD_CONFIG_STALE),this.awaitCapable=0!=(this.responseFlags&AWAIT_CAPABLE),this.promoteLongs=\"boolean\"!=typeof i.promoteLongs||i.promoteLongs,this.promoteValues=\"boolean\"!=typeof i.promoteValues||i.promoteValues,this.promoteBuffers=\"boolean\"==typeof i.promoteBuffers&&i.promoteBuffers};Response.prototype.isParsed=function(){return this.parsed},Response.prototype.parse=function(e){if(!this.parsed){var t,s,r=(e=e||{}).raw||!1,i=e.documentsReturnedIn||null;s={promoteLongs:\"boolean\"==typeof e.promoteLongs?e.promoteLongs:this.opts.promoteLongs,promoteValues:\"boolean\"==typeof e.promoteValues?e.promoteValues:this.opts.promoteValues,promoteBuffers:\"boolean\"==typeof e.promoteBuffers?e.promoteBuffers:this.opts.promoteBuffers},this.index=20;for(var o=0;o<this.numberReturned;o++)t=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,this.documents[o]=r?this.data.slice(this.index,this.index+t):this.bson.deserialize(this.data.slice(this.index,this.index+t),s),this.index=this.index+t;if(1===this.documents.length&&null!=i&&r){const e={};e[i]=!0,s.fieldsAsRaw=e;const t=this.bson.deserialize(this.documents[0],s);this.documents=[t]}this.parsed=!0}},module.exports={Query:Query,GetMore:GetMore,Response:Response,KillCursor:KillCursor};","node_modules/mongodb/lib/core/auth/mongo_credentials.js":"\"use strict\";function getDefaultAuthMechanism(s){if(s){if(Array.isArray(s.saslSupportedMechs))return s.saslSupportedMechs.indexOf(\"SCRAM-SHA-256\")>=0?\"scram-sha-256\":\"scram-sha-1\";if(s.maxWireVersion>=3)return\"scram-sha-1\"}return\"mongocr\"}class MongoCredentials{constructor(s){s=s||{},this.username=s.username,this.password=s.password,this.source=s.source||s.db,this.mechanism=s.mechanism||\"default\",this.mechanismProperties=s.mechanismProperties||{},/MONGODB-AWS/i.test(this.mechanism)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),!this.mechanismProperties.AWS_SESSION_TOKEN&&process.env.AWS_SESSION_TOKEN&&(this.mechanismProperties.AWS_SESSION_TOKEN=process.env.AWS_SESSION_TOKEN)),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(s){return this.mechanism===s.mechanism&&this.username===s.username&&this.password===s.password&&this.source===s.source}resolveAuthMechanism(s){return/DEFAULT/i.test(this.mechanism)?new MongoCredentials({username:this.username,password:this.password,source:this.source,mechanism:getDefaultAuthMechanism(s),mechanismProperties:this.mechanismProperties}):this}}module.exports={MongoCredentials:MongoCredentials};","node_modules/mongodb/lib/core/auth/defaultAuthProviders.js":"\"use strict\";const MongoCR=require(\"./mongocr\"),X509=require(\"./x509\"),Plain=require(\"./plain\"),GSSAPI=require(\"./gssapi\"),ScramSHA1=require(\"./scram\").ScramSHA1,ScramSHA256=require(\"./scram\").ScramSHA256,MongoDBAWS=require(\"./mongodb_aws\");function defaultAuthProviders(r){return{\"mongodb-aws\":new MongoDBAWS(r),mongocr:new MongoCR(r),x509:new X509(r),plain:new Plain(r),gssapi:new GSSAPI(r),\"scram-sha-1\":new ScramSHA1(r),\"scram-sha-256\":new ScramSHA256(r)}}module.exports={defaultAuthProviders:defaultAuthProviders};","node_modules/mongodb/lib/core/auth/mongocr.js":"\"use strict\";const crypto=require(\"crypto\"),AuthProvider=require(\"./auth_provider\").AuthProvider;class MongoCR extends AuthProvider{auth(e,t){const o=e.connection,r=e.credentials,n=r.username,c=r.password,s=r.source;o.command(`${s}.$cmd`,{getnonce:1},(e,r)=>{let u=null,d=null;if(null==e){u=r.result.nonce;let e=crypto.createHash(\"md5\");e.update(n+\":mongo:\"+c,\"utf8\");const t=e.digest(\"hex\");(e=crypto.createHash(\"md5\")).update(u+n+t,\"utf8\"),d=e.digest(\"hex\")}const a={authenticate:1,user:n,nonce:u,key:d};o.command(`${s}.$cmd`,a,t)})}}module.exports=MongoCR;","node_modules/mongodb/lib/core/auth/x509.js":"\"use strict\";const AuthProvider=require(\"./auth_provider\").AuthProvider;class X509 extends AuthProvider{prepare(e,t,n){const a=t.credentials;Object.assign(e,{speculativeAuthenticate:x509AuthenticateCommand(a)}),n(void 0,e)}auth(e,t){const n=e.connection,a=e.credentials;if(e.response.speculativeAuthenticate)return t();n.command(\"$external.$cmd\",x509AuthenticateCommand(a),t)}}function x509AuthenticateCommand(e){const t={authenticate:1,mechanism:\"MONGODB-X509\"};return e.username&&Object.assign(t,{user:e.username}),t}module.exports=X509;","node_modules/mongodb/lib/core/auth/plain.js":"\"use strict\";const retrieveBSON=require(\"../connection/utils\").retrieveBSON,AuthProvider=require(\"./auth_provider\").AuthProvider,BSON=retrieveBSON(),Binary=BSON.Binary;class Plain extends AuthProvider{auth(e,r){const t=e.connection,i=e.credentials,n=i.username,a=i.password,o={saslStart:1,mechanism:\"PLAIN\",payload:new Binary(`\\0${n}\\0${a}`),autoAuthorize:1};t.command(\"$external.$cmd\",o,r)}}module.exports=Plain;","node_modules/mongodb/lib/core/auth/gssapi.js":"\"use strict\";const dns=require(\"dns\"),AuthProvider=require(\"./auth_provider\").AuthProvider,retrieveKerberos=require(\"../utils\").retrieveKerberos,MongoError=require(\"../error\").MongoError;let kerberos;class GSSAPI extends AuthProvider{auth(e,r){const n=e.connection,o=e.credentials;if(null==o)return r(new MongoError(\"credentials required\"));const t=o.username;function i(e,r){return n.command(\"$external.$cmd\",e,r)}makeKerberosClient(e,(e,n)=>e?r(e):null==n?r(new MongoError(\"gssapi client missing\")):void n.step(\"\",(e,o)=>{if(e)return r(e);i(saslStart(o),(e,o)=>{if(e)return r(e);const s=o.result;negotiate(n,10,s.payload,(e,o)=>{if(e)return r(e);i(saslContinue(o,s.conversationId),(e,o)=>{if(e)return r(e);const s=o.result;finalize(n,t,s.payload,(e,n)=>{if(e)return r(e);i({saslContinue:1,conversationId:s.conversationId,payload:n},(e,n)=>{if(e)return r(e);r(void 0,n)})})})})})}))}}function makeKerberosClient(e,r){const n=e.options.host,o=e.options.port,t=e.credentials;if(!n||!o||!t)return r(new MongoError(`Connection must specify: ${n?\"host\":\"\"}, ${o?\"port\":\"\"}, ${t?\"host\":\"credentials\"}.`));if(null==kerberos)try{kerberos=retrieveKerberos()}catch(e){return r(e)}const i=t.username,s=t.password,a=t.mechanismProperties,u=a.gssapiservicename||a.gssapiServiceName||\"mongodb\";performGssapiCanonicalizeHostName(n,a,(e,n)=>{if(e)return r(e);const o={};null!=s&&Object.assign(o,{user:i,password:s}),kerberos.initializeClient(`${u}${\"win32\"===process.platform?\"/\":\"@\"}${n}`,o,(e,n)=>{if(e)return r(new MongoError(e));r(null,n)})})}function saslStart(e){return{saslStart:1,mechanism:\"GSSAPI\",payload:e,autoAuthorize:1}}function saslContinue(e,r){return{saslContinue:1,conversationId:r,payload:e}}function negotiate(e,r,n,o){e.step(n,(t,i)=>t&&0===r?o(t):t?negotiate(e,r-1,n,o):void o(void 0,i||\"\"))}function finalize(e,r,n,o){e.unwrap(n,(n,t)=>{if(n)return o(n);e.wrap(t||\"\",{user:r},(e,r)=>{if(e)return o(e);o(void 0,r)})})}function performGssapiCanonicalizeHostName(e,r,n){if(!(\"boolean\"==typeof r.gssapiCanonicalizeHostName&&r.gssapiCanonicalizeHostName))return n(void 0,e);dns.resolveCname(e,(r,o)=>r?n(r):Array.isArray(o)&&o.length>0?n(void 0,o[0]):void n(void 0,e))}module.exports=GSSAPI;","node_modules/mongodb/lib/core/auth/scram.js":"\"use strict\";const crypto=require(\"crypto\"),Buffer=require(\"safe-buffer\").Buffer,retrieveBSON=require(\"../connection/utils\").retrieveBSON,MongoError=require(\"../error\").MongoError,AuthProvider=require(\"./auth_provider\").AuthProvider,emitWarningOnce=require(\"../../utils\").emitWarning,BSON=retrieveBSON(),Binary=BSON.Binary;let saslprep;try{saslprep=require(\"saslprep\")}catch(e){}class ScramSHA extends AuthProvider{constructor(e,r){super(e),this.cryptoMethod=r||\"sha1\"}prepare(e,r,t){const n=this.cryptoMethod;\"sha256\"===n&&null==saslprep&&emitWarningOnce(\"Warning: no saslprep library specified. Passwords will not be sanitized\"),crypto.randomBytes(24,(o,a)=>{if(o)return t(o);Object.assign(r,{nonce:a});const s=r.credentials,i=Object.assign({},e,{speculativeAuthenticate:Object.assign(makeFirstMessage(n,s,a),{db:s.source})});t(void 0,i)})}auth(e,r){const t=e.response;t&&t.speculativeAuthenticate?continueScramConversation(this.cryptoMethod,t.speculativeAuthenticate,e,r):executeScram(this.cryptoMethod,e,r)}}function cleanUsername(e){return e.replace(\"=\",\"=3D\").replace(\",\",\"=2C\")}function clientFirstMessageBare(e,r){return Buffer.concat([Buffer.from(\"n=\",\"utf8\"),Buffer.from(e,\"utf8\"),Buffer.from(\",r=\",\"utf8\"),Buffer.from(r.toString(\"base64\"),\"utf8\")])}function makeFirstMessage(e,r,t){const n=cleanUsername(r.username);return{saslStart:1,mechanism:\"sha1\"===e?\"SCRAM-SHA-1\":\"SCRAM-SHA-256\",payload:new Binary(Buffer.concat([Buffer.from(\"n,,\",\"utf8\"),clientFirstMessageBare(n,t)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}function executeScram(e,r,t){const n=r.connection,o=r.credentials,a=r.nonce,s=o.source,i=makeFirstMessage(e,o,a);n.command(`${s}.$cmd`,i,(n,o)=>{const a=resolveError(n,o);if(a)return t(a);continueScramConversation(e,o.result,r,t)})}function continueScramConversation(e,r,t,n){const o=t.connection,a=t.credentials,s=t.nonce,i=a.source,c=cleanUsername(a.username),u=a.password;let f;if(\"sha256\"===e)f=saslprep?saslprep(u):u;else try{f=passwordDigest(c,u)}catch(e){return n(e)}const l=Buffer.isBuffer(r.payload)?new Binary(r.payload):r.payload,p=parsePayload(l.value()),h=parseInt(p.i,10);if(h&&h<4096)return void n(new MongoError(`Server returned an invalid iteration count ${h}`),!1);const d=p.s,m=p.r;if(m.startsWith(\"nonce\"))return void n(new MongoError(`Server returned an invalid nonce: ${m}`),!1);const g=`c=biws,r=${m}`,S=HI(f,Buffer.from(d,\"base64\"),h,e),y=HMAC(e,S,\"Client Key\"),v=HMAC(e,S,\"Server Key\"),B=H(e,y),C=[clientFirstMessageBare(c,s),l.value().toString(\"base64\"),g].join(\",\"),M=[g,`p=${xor(y,HMAC(e,B,C))}`].join(\",\"),A=HMAC(e,v,C),w={saslContinue:1,conversationId:r.conversationId,payload:new Binary(Buffer.from(M))};o.command(`${i}.$cmd`,w,(e,r)=>{const t=resolveError(e,r);if(t)return n(t);const a=r.result,s=parsePayload(a.payload.value());if(!compareDigest(Buffer.from(s.v,\"base64\"),A))return void n(new MongoError(\"Server returned an invalid signature\"));if(!a||!1!==a.done)return n(t,a);const c={saslContinue:1,conversationId:a.conversationId,payload:Buffer.alloc(0)};o.command(`${i}.$cmd`,c,n)})}function parsePayload(e){const r={},t=e.split(\",\");for(let e=0;e<t.length;e++){const n=t[e].split(\"=\");r[n[0]]=n[1]}return r}function passwordDigest(e,r){if(\"string\"!=typeof e)throw new MongoError(\"username must be a string\");if(\"string\"!=typeof r)throw new MongoError(\"password must be a string\");if(0===r.length)throw new MongoError(\"password cannot be empty\");const t=crypto.createHash(\"md5\");return t.update(`${e}:mongo:${r}`,\"utf8\"),t.digest(\"hex\")}function xor(e,r){Buffer.isBuffer(e)||(e=Buffer.from(e)),Buffer.isBuffer(r)||(r=Buffer.from(r));const t=Math.max(e.length,r.length),n=[];for(let o=0;o<t;o+=1)n.push(e[o]^r[o]);return Buffer.from(n).toString(\"base64\")}function H(e,r){return crypto.createHash(e).update(r).digest()}function HMAC(e,r,t){return crypto.createHmac(e,r).update(t).digest()}let _hiCache={},_hiCacheCount=0;function _hiCachePurge(){_hiCache={},_hiCacheCount=0}const hiLengthMap={sha256:32,sha1:20};function HI(e,r,t,n){const o=[e,r.toString(\"base64\"),t].join(\"_\");if(void 0!==_hiCache[o])return _hiCache[o];const a=crypto.pbkdf2Sync(e,r,t,hiLengthMap[n],n);return _hiCacheCount>=200&&_hiCachePurge(),_hiCache[o]=a,_hiCacheCount+=1,a}function compareDigest(e,r){if(e.length!==r.length)return!1;if(\"function\"==typeof crypto.timingSafeEqual)return crypto.timingSafeEqual(e,r);let t=0;for(let n=0;n<e.length;n++)t|=e[n]^r[n];return 0===t}function resolveError(e,r){if(e)return e;const t=r.result;return t.$err||t.errmsg?new MongoError(t):void 0}class ScramSHA1 extends ScramSHA{constructor(e){super(e,\"sha1\")}}class ScramSHA256 extends ScramSHA{constructor(e){super(e,\"sha256\")}}module.exports={ScramSHA1:ScramSHA1,ScramSHA256:ScramSHA256};","node_modules/mongodb/lib/core/uri_parser.js":"\"use strict\";const URL=require(\"url\"),qs=require(\"querystring\"),dns=require(\"dns\"),MongoParseError=require(\"./error\").MongoParseError,ReadPreference=require(\"./topologies/read_preference\"),emitWarningOnce=require(\"../utils\").emitWarningOnce,HOSTS_RX=/(mongodb(?:\\+srv|)):\\/\\/(?: (?:[^:]*) (?: : ([^@]*) )? @ )?([^/?]*)(?:\\/|)(.*)/,FILE_PATH_OPTIONS=new Set([\"sslCA\",\"sslCert\",\"sslKey\",\"tlsCAFile\",\"tlsCertificateKeyFile\"].map(e=>e.toLowerCase()));function matchesParentDomain(e,r){const t=/^.*?\\./,n=`.${e.replace(t,\"\")}`,s=`.${r.replace(t,\"\")}`;return n.endsWith(s)}function parseSrvConnectionString(e,r,t){const n=URL.parse(e,!0);if(r.directConnection||r.directconnection)return t(new MongoParseError(\"directConnection not supported with SRV URI\"));if(n.hostname.split(\".\").length<3)return t(new MongoParseError(\"URI does not have hostname, domain name and tld\"));if(n.domainLength=n.hostname.split(\".\").length,n.pathname&&n.pathname.match(\",\"))return t(new MongoParseError(\"Invalid URI, cannot contain multiple hostnames\"));if(n.port)return t(new MongoParseError(`Ports not accepted with '${PROTOCOL_MONGODB_SRV}' URIs`));const s=n.host;dns.resolveSrv(`_mongodb._tcp.${s}`,(e,o)=>{if(e)return t(e);if(0===o.length)return t(new MongoParseError(\"No addresses found at host\"));for(let e=0;e<o.length;e++)if(!matchesParentDomain(o[e].name,n.hostname,n.domainLength))return t(new MongoParseError(\"Server record does not share hostname with parent URI\"));n.protocol=\"mongodb\",n.host=o.map(e=>`${e.name}:${e.port}`).join(\",\"),\"ssl\"in r||n.search&&\"ssl\"in n.query&&null!==n.query.ssl||(n.query.ssl=!0),dns.resolveTxt(s,(e,o)=>{if(e){if(\"ENODATA\"!==e.code&&\"ENOTFOUND\"!==e.code)return t(e);o=null}if(o){if(o.length>1)return t(new MongoParseError(\"Multiple text records not allowed\"));if(o=qs.parse(o[0].join(\"\")),Object.keys(o).some(e=>\"authSource\"!==e&&\"replicaSet\"!==e))return t(new MongoParseError(\"Text record must only set `authSource` or `replicaSet`\"));n.query=Object.assign({},o,n.query)}n.search=qs.stringify(n.query),parseConnectionString(URL.format(n),r,(e,r)=>{e?t(e):t(null,Object.assign({},r,{srvHost:s}))})})})}function parseQueryStringItemValue(e,r){if(Array.isArray(r))1===(r=r.filter((e,t)=>r.indexOf(e)===t)).length&&(r=r[0]);else if(r.indexOf(\":\")>0)r=r.split(\",\").reduce((r,t)=>{const n=t.split(\":\");return r[n[0]]=parseQueryStringItemValue(e,n[1]),r},{});else if(r.indexOf(\",\")>0)r=r.split(\",\").map(r=>parseQueryStringItemValue(e,r));else if(\"true\"===r.toLowerCase()||\"false\"===r.toLowerCase())r=\"true\"===r.toLowerCase();else if(!Number.isNaN(r)&&!STRING_OPTIONS.has(e)){const e=parseFloat(r);Number.isNaN(e)||(r=parseFloat(r))}return r}const BOOLEAN_OPTIONS=new Set([\"slaveok\",\"slave_ok\",\"sslvalidate\",\"fsync\",\"safe\",\"retrywrites\",\"j\"]),STRING_OPTIONS=new Set([\"authsource\",\"replicaset\"]),AUTH_MECHANISMS=new Set([\"GSSAPI\",\"MONGODB-AWS\",\"MONGODB-X509\",\"MONGODB-CR\",\"DEFAULT\",\"SCRAM-SHA-1\",\"SCRAM-SHA-256\",\"PLAIN\"]),CASE_TRANSLATION={replicaset:\"replicaSet\",connecttimeoutms:\"connectTimeoutMS\",sockettimeoutms:\"socketTimeoutMS\",maxpoolsize:\"maxPoolSize\",minpoolsize:\"minPoolSize\",maxidletimems:\"maxIdleTimeMS\",waitqueuemultiple:\"waitQueueMultiple\",waitqueuetimeoutms:\"waitQueueTimeoutMS\",wtimeoutms:\"wtimeoutMS\",readconcern:\"readConcern\",readconcernlevel:\"readConcernLevel\",readpreference:\"readPreference\",maxstalenessseconds:\"maxStalenessSeconds\",readpreferencetags:\"readPreferenceTags\",authsource:\"authSource\",authmechanism:\"authMechanism\",authmechanismproperties:\"authMechanismProperties\",gssapiservicename:\"gssapiServiceName\",localthresholdms:\"localThresholdMS\",serverselectiontimeoutms:\"serverSelectionTimeoutMS\",serverselectiontryonce:\"serverSelectionTryOnce\",heartbeatfrequencyms:\"heartbeatFrequencyMS\",retrywrites:\"retryWrites\",uuidrepresentation:\"uuidRepresentation\",zlibcompressionlevel:\"zlibCompressionLevel\",tlsallowinvalidcertificates:\"tlsAllowInvalidCertificates\",tlsallowinvalidhostnames:\"tlsAllowInvalidHostnames\",tlsinsecure:\"tlsInsecure\",tlscafile:\"tlsCAFile\",tlscertificatekeyfile:\"tlsCertificateKeyFile\",tlscertificatekeyfilepassword:\"tlsCertificateKeyFilePassword\",wtimeout:\"wTimeoutMS\",j:\"journal\",directconnection:\"directConnection\"};function applyConnectionStringOption(e,r,t,n){if(\"journal\"===r?r=\"j\":\"wtimeoutms\"===r&&(r=\"wtimeout\"),BOOLEAN_OPTIONS.has(r)?t=\"true\"===t||!0===t:\"appname\"===r?t=decodeURIComponent(t):\"readconcernlevel\"===r&&(e.readConcernLevel=t,r=\"readconcern\",t={level:t}),\"compressors\"===r&&!(t=Array.isArray(t)?t:[t]).every(e=>\"snappy\"===e||\"zlib\"===e))throw new MongoParseError(\"Value for `compressors` must be at least one of: `snappy`, `zlib`\");if(\"authmechanism\"===r&&!AUTH_MECHANISMS.has(t))throw new MongoParseError(`Value for authMechanism must be one of: ${Array.from(AUTH_MECHANISMS).join(\", \")}, found: ${t}`);if(\"readpreference\"===r&&!ReadPreference.isValid(t))throw new MongoParseError(\"Value for `readPreference` must be one of: `primary`, `primaryPreferred`, `secondary`, `secondaryPreferred`, `nearest`\");if(\"zlibcompressionlevel\"===r&&(t<-1||t>9))throw new MongoParseError(\"zlibCompressionLevel must be an integer between -1 and 9\");\"compressors\"!==r&&\"zlibcompressionlevel\"!==r||(e.compression=e.compression||{},e=e.compression),\"authmechanismproperties\"===r&&(\"string\"==typeof t.SERVICE_NAME&&(e.gssapiServiceName=t.SERVICE_NAME),\"string\"==typeof t.SERVICE_REALM&&(e.gssapiServiceRealm=t.SERVICE_REALM),void 0!==t.CANONICALIZE_HOST_NAME&&(e.gssapiCanonicalizeHostName=t.CANONICALIZE_HOST_NAME)),\"readpreferencetags\"===r&&(t=Array.isArray(t)?splitArrayOfMultipleReadPreferenceTags(t):[t]),n.caseTranslate&&CASE_TRANSLATION[r]?e[CASE_TRANSLATION[r]]=t:e[r]=t}const USERNAME_REQUIRED_MECHANISMS=new Set([\"GSSAPI\",\"MONGODB-CR\",\"PLAIN\",\"SCRAM-SHA-1\",\"SCRAM-SHA-256\"]);function splitArrayOfMultipleReadPreferenceTags(e){const r=[];for(let t=0;t<e.length;t++)r[t]={},e[t].split(\",\").forEach(e=>{const n=e.split(\":\");r[t][n[0]]=n[1]});return r}function applyAuthExpectations(e){if(null==e.options)return;const r=e.options,t=r.authsource||r.authSource;null!=t&&(e.auth=Object.assign({},e.auth,{db:t}));const n=r.authmechanism||r.authMechanism;if(null!=n){if(USERNAME_REQUIRED_MECHANISMS.has(n)&&(!e.auth||null==e.auth.username))throw new MongoParseError(`Username required for mechanism \\`${n}\\``);if(\"GSSAPI\"===n){if(null!=t&&\"$external\"!==t)throw new MongoParseError(`Invalid source \\`${t}\\` for mechanism \\`${n}\\` specified.`);e.auth=Object.assign({},e.auth,{db:\"$external\"})}if(\"MONGODB-AWS\"===n){if(null!=t&&\"$external\"!==t)throw new MongoParseError(`Invalid source \\`${t}\\` for mechanism \\`${n}\\` specified.`);e.auth=Object.assign({},e.auth,{db:\"$external\"})}if(\"MONGODB-X509\"===n){if(e.auth&&null!=e.auth.password)throw new MongoParseError(`Password not allowed for mechanism \\`${n}\\``);if(null!=t&&\"$external\"!==t)throw new MongoParseError(`Invalid source \\`${t}\\` for mechanism \\`${n}\\` specified.`);e.auth=Object.assign({},e.auth,{db:\"$external\"})}\"PLAIN\"===n&&e.auth&&null==e.auth.db&&(e.auth=Object.assign({},e.auth,{db:\"$external\"}))}return e.auth&&null==e.auth.db&&(e.auth=Object.assign({},e.auth,{db:\"admin\"})),e}function parseQueryString(e,r){const t={};let n=qs.parse(e);checkTLSOptions(n);for(const e in n){const s=n[e];if(\"\"===s||null==s)throw new MongoParseError(\"Incomplete key value pair for option\");const o=e.toLowerCase();applyConnectionStringOption(t,o,FILE_PATH_OPTIONS.has(o)?s:parseQueryStringItemValue(o,s),r)}return t.wtimeout&&t.wtimeoutms&&(delete t.wtimeout,emitWarningOnce(\"Unsupported option `wtimeout` specified\")),Object.keys(t).length?t:null}function translateTLSOptions(e){return e.tls&&(e.ssl=e.tls),e.tlsInsecure?(e.checkServerIdentity=!1,e.sslValidate=!1):Object.assign(e,{checkServerIdentity:!e.tlsAllowInvalidHostnames,sslValidate:!e.tlsAllowInvalidCertificates}),e.tlsCAFile&&(e.ssl=!0,e.sslCA=e.tlsCAFile),e.tlsCertificateKeyFile&&(e.ssl=!0,e.tlsCertificateFile?(e.sslCert=e.tlsCertificateFile,e.sslKey=e.tlsCertificateKeyFile):(e.sslKey=e.tlsCertificateKeyFile,e.sslCert=e.tlsCertificateKeyFile)),e.tlsCertificateKeyFilePassword&&(e.ssl=!0,e.sslPass=e.tlsCertificateKeyFilePassword),e}function checkTLSOptions(e){const r=Object.keys(e);if(-1!==r.indexOf(\"tlsInsecure\")&&(-1!==r.indexOf(\"tlsAllowInvalidCertificates\")||-1!==r.indexOf(\"tlsAllowInvalidHostnames\")))throw new MongoParseError(\"The `tlsInsecure` option cannot be used with `tlsAllowInvalidCertificates` or `tlsAllowInvalidHostnames`.\");const t=assertTlsOptionsAreEqual(\"tls\",e,r),n=assertTlsOptionsAreEqual(\"ssl\",e,r);if(null!=t&&null!=n&&t!==n)throw new MongoParseError(\"All values of `tls` and `ssl` must be the same.\")}function assertTlsOptionsAreEqual(e,r,t){const n=-1!==t.indexOf(e);let s;if(s=Array.isArray(r[e])?r[e][0]:r[e],n&&Array.isArray(r[e])){const t=r[e][0];r[e].forEach(r=>{if(r!==t)throw new MongoParseError(`All values of ${e} must be the same.`)})}return s}const PROTOCOL_MONGODB=\"mongodb\",PROTOCOL_MONGODB_SRV=\"mongodb+srv\",SUPPORTED_PROTOCOLS=[\"mongodb\",PROTOCOL_MONGODB_SRV];function parseConnectionString(e,r,t){\"function\"==typeof r&&(t=r,r={}),r=Object.assign({},{caseTranslate:!0},r);try{URL.parse(e)}catch(e){return t(new MongoParseError(\"URI malformed, cannot be parsed\"))}const n=e.match(HOSTS_RX);if(!n)return t(new MongoParseError(\"Invalid connection string\"));const s=n[1];if(-1===SUPPORTED_PROTOCOLS.indexOf(s))return t(new MongoParseError(\"Invalid protocol provided\"));const o=n[4].split(\"?\"),a=o.length>0?o[0]:null,i=o.length>1?o[1]:null;let l;try{l=parseQueryString(i,r)}catch(e){return t(e)}if(l=Object.assign({},l,r),s===PROTOCOL_MONGODB_SRV)return parseSrvConnectionString(e,l,t);const u={username:null,password:null,db:a&&\"\"!==a?qs.unescape(a):null};if(l.auth?(l.auth.username&&(u.username=l.auth.username),l.auth.user&&(u.username=l.auth.user),l.auth.password&&(u.password=l.auth.password)):(l.username&&(u.username=l.username),l.user&&(u.username=l.user),l.password&&(u.password=l.password)),-1!==n[4].split(\"?\")[0].indexOf(\"@\"))return t(new MongoParseError(\"Unescaped slash in userinfo section\"));const c=n[3].split(\"@\");if(c.length>2)return t(new MongoParseError(\"Unescaped at-sign in authority section\"));if(null==c[0]||\"\"===c[0])return t(new MongoParseError(\"No username provided in authority section\"));if(c.length>1){const e=c.shift().split(\":\");if(e.length>2)return t(new MongoParseError(\"Unescaped colon in authority section\"));if(\"\"===e[0])return t(new MongoParseError(\"Invalid empty username provided\"));u.username||(u.username=qs.unescape(e[0])),u.password||(u.password=e[1]?qs.unescape(e[1]):null)}let p=null;const m=c.shift().split(\",\").map(e=>{let r=URL.parse(`mongodb://${e}`);if(\"/:\"===r.path)return p=new MongoParseError(\"Double colon in host identifier\"),null;if(e.match(/\\.sock/)&&(r.hostname=qs.unescape(e),r.port=null),Number.isNaN(r.port))return void(p=new MongoParseError(\"Invalid port (non-numeric string)\"));const t={host:r.hostname,port:r.port?parseInt(r.port):27017};if(0!==t.port)if(t.port>65535)p=new MongoParseError(\"Invalid port (larger than 65535) with hostname\");else{if(!(t.port<0))return t;p=new MongoParseError(\"Invalid port (negative number)\")}else p=new MongoParseError(\"Invalid port (zero) with hostname\")}).filter(e=>!!e);if(p)return t(p);if(0===m.length||\"\"===m[0].host||null===m[0].host)return t(new MongoParseError(\"No hostname or hostnames provided in connection string\"));if(!!l.directConnection&&1!==m.length)return t(new MongoParseError(\"directConnection option requires exactly one host\"));null==l.directConnection&&1===m.length&&null==l.replicaSet&&(l.directConnection=!0);const d={hosts:m,auth:u.db||u.username?u:null,options:Object.keys(l).length?l:null};d.auth&&d.auth.db?d.defaultDatabase=d.auth.db:d.defaultDatabase=\"test\",d.options=translateTLSOptions(d.options);try{applyAuthExpectations(d)}catch(e){return t(e)}t(null,d)}module.exports=parseConnectionString;","node_modules/bson/lib/bson/bson.js":"\"use strict\";var Map=require(\"./map\"),Long=require(\"./long\"),Double=require(\"./double\"),Timestamp=require(\"./timestamp\"),ObjectID=require(\"./objectid\"),BSONRegExp=require(\"./regexp\"),Symbol=require(\"./symbol\"),Int32=require(\"./int_32\"),Code=require(\"./code\"),Decimal128=require(\"./decimal128\"),MinKey=require(\"./min_key\"),MaxKey=require(\"./max_key\"),DBRef=require(\"./db_ref\"),Binary=require(\"./binary\"),deserialize=require(\"./parser/deserializer\"),serializer=require(\"./parser/serializer\"),calculateObjectSize=require(\"./parser/calculate_size\"),utils=require(\"./parser/utils\"),MAXSIZE=17825792,buffer=utils.allocBuffer(MAXSIZE),BSON=function(){};BSON.prototype.serialize=function(e,r){var i=\"boolean\"==typeof(r=r||{}).checkKeys&&r.checkKeys,o=\"boolean\"==typeof r.serializeFunctions&&r.serializeFunctions,B=\"boolean\"!=typeof r.ignoreUndefined||r.ignoreUndefined,N=\"number\"==typeof r.minInternalBufferSize?r.minInternalBufferSize:MAXSIZE;buffer.length<N&&(buffer=utils.allocBuffer(N));var S=serializer(buffer,e,i,0,0,o,B,[]),t=utils.allocBuffer(S);return buffer.copy(t,0,0,t.length),t},BSON.prototype.serializeWithBufferAndIndex=function(e,r,i){var o=\"boolean\"==typeof(i=i||{}).checkKeys&&i.checkKeys,B=\"boolean\"==typeof i.serializeFunctions&&i.serializeFunctions,N=\"boolean\"!=typeof i.ignoreUndefined||i.ignoreUndefined,S=\"number\"==typeof i.index?i.index:0;return serializer(r,e,o,S||0,0,B,N)-1},BSON.prototype.deserialize=function(e,r){return deserialize(e,r)},BSON.prototype.calculateObjectSize=function(e,r){var i=\"boolean\"==typeof(r=r||{}).serializeFunctions&&r.serializeFunctions,o=\"boolean\"!=typeof r.ignoreUndefined||r.ignoreUndefined;return calculateObjectSize(e,i,o)},BSON.prototype.deserializeStream=function(e,r,i,o,B,N){N=null!=N?N:{};for(var S=r,t=0;t<i;t++){var n=e[S]|e[S+1]<<8|e[S+2]<<16|e[S+3]<<24;N.index=S,o[B+t]=this.deserialize(e,N),S+=n}return S},BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992,BSON.BSON_DATA_NUMBER=1,BSON.BSON_DATA_STRING=2,BSON.BSON_DATA_OBJECT=3,BSON.BSON_DATA_ARRAY=4,BSON.BSON_DATA_BINARY=5,BSON.BSON_DATA_OID=7,BSON.BSON_DATA_BOOLEAN=8,BSON.BSON_DATA_DATE=9,BSON.BSON_DATA_NULL=10,BSON.BSON_DATA_REGEXP=11,BSON.BSON_DATA_CODE=13,BSON.BSON_DATA_SYMBOL=14,BSON.BSON_DATA_CODE_W_SCOPE=15,BSON.BSON_DATA_INT=16,BSON.BSON_DATA_TIMESTAMP=17,BSON.BSON_DATA_LONG=18,BSON.BSON_DATA_MIN_KEY=255,BSON.BSON_DATA_MAX_KEY=127,BSON.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON.BSON_BINARY_SUBTYPE_UUID=3,BSON.BSON_BINARY_SUBTYPE_MD5=4,BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128,module.exports=BSON,module.exports.Code=Code,module.exports.Map=Map,module.exports.Symbol=Symbol,module.exports.BSON=BSON,module.exports.DBRef=DBRef,module.exports.Binary=Binary,module.exports.ObjectID=ObjectID,module.exports.Long=Long,module.exports.Timestamp=Timestamp,module.exports.Double=Double,module.exports.Int32=Int32,module.exports.MinKey=MinKey,module.exports.MaxKey=MaxKey,module.exports.BSONRegExp=BSONRegExp,module.exports.Decimal128=Decimal128;","node_modules/bson/lib/bson/binary.js":"if(\"undefined\"!=typeof global)var Buffer=require(\"buffer\").Buffer;var utils=require(\"./parser/utils\");function Binary(r,t){if(!(this instanceof Binary))return new Binary(r,t);if(!(null==r||\"string\"==typeof r||Buffer.isBuffer(r)||r instanceof Uint8Array||Array.isArray(r)))throw new Error(\"only String, Buffer, Uint8Array or Array accepted\");if(this._bsontype=\"Binary\",r instanceof Number?(this.sub_type=r,this.position=0):(this.sub_type=null==t?BSON_BINARY_SUBTYPE_DEFAULT:t,this.position=0),null==r||r instanceof Number)void 0!==Buffer?this.buffer=utils.allocBuffer(Binary.BUFFER_SIZE):\"undefined\"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE)):this.buffer=new Array(Binary.BUFFER_SIZE),this.position=0;else{if(\"string\"==typeof r)if(void 0!==Buffer)this.buffer=utils.toBuffer(r);else{if(\"undefined\"==typeof Uint8Array&&\"[object Array]\"!==Object.prototype.toString.call(r))throw new Error(\"only String, Buffer, Uint8Array or Array accepted\");this.buffer=writeStringToArray(r)}else this.buffer=r;this.position=r.length}}Binary.prototype.put=function(r){if(null!=r.length&&\"number\"!=typeof r&&1!==r.length)throw new Error(\"only accepts single character String, Uint8Array or Array\");if(\"number\"!=typeof r&&r<0||r>255)throw new Error(\"only accepts number in a valid unsigned byte range 0-255\");var t=null;if(t=\"string\"==typeof r?r.charCodeAt(0):null!=r.length?r[0]:r,this.buffer.length>this.position)this.buffer[this.position++]=t;else if(void 0!==Buffer&&Buffer.isBuffer(this.buffer)){var i=utils.allocBuffer(Binary.BUFFER_SIZE+this.buffer.length);this.buffer.copy(i,0,0,this.buffer.length),this.buffer=i,this.buffer[this.position++]=t}else{i=null,i=\"[object Uint8Array]\"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(Binary.BUFFER_SIZE+this.buffer.length)):new Array(Binary.BUFFER_SIZE+this.buffer.length);for(var e=0;e<this.buffer.length;e++)i[e]=this.buffer[e];this.buffer=i,this.buffer[this.position++]=t}},Binary.prototype.write=function(r,t){if(t=\"number\"==typeof t?t:this.position,this.buffer.length<t+r.length){var i=null;if(void 0!==Buffer&&Buffer.isBuffer(this.buffer))i=utils.allocBuffer(this.buffer.length+r.length),this.buffer.copy(i,0,0,this.buffer.length);else if(\"[object Uint8Array]\"===Object.prototype.toString.call(this.buffer)){i=new Uint8Array(new ArrayBuffer(this.buffer.length+r.length));for(var e=0;e<this.position;e++)i[e]=this.buffer[e]}this.buffer=i}if(void 0!==Buffer&&Buffer.isBuffer(r)&&Buffer.isBuffer(this.buffer))r.copy(this.buffer,t,0,r.length),this.position=t+r.length>this.position?t+r.length:this.position;else if(void 0!==Buffer&&\"string\"==typeof r&&Buffer.isBuffer(this.buffer))this.buffer.write(r,t,\"binary\"),this.position=t+r.length>this.position?t+r.length:this.position;else if(\"[object Uint8Array]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)&&\"string\"!=typeof r){for(e=0;e<r.length;e++)this.buffer[t++]=r[e];this.position=t>this.position?t:this.position}else if(\"string\"==typeof r){for(e=0;e<r.length;e++)this.buffer[t++]=r.charCodeAt(e);this.position=t>this.position?t:this.position}},Binary.prototype.read=function(r,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(r,r+t);for(var i=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),e=0;e<t;e++)i[e]=this.buffer[r++];return i},Binary.prototype.value=function(r){if((r=null!=r&&r)&&void 0!==Buffer&&Buffer.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer&&Buffer.isBuffer(this.buffer))return r?this.buffer.slice(0,this.position):this.buffer.toString(\"binary\",0,this.position);if(r){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=\"[object Uint8Array]\"===Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),i=0;i<this.position;i++)t[i]=this.buffer[i];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)},Binary.prototype.length=function(){return this.position},Binary.prototype.toJSON=function(){return null!=this.buffer?this.buffer.toString(\"base64\"):\"\"},Binary.prototype.toString=function(r){return null!=this.buffer?this.buffer.slice(0,this.position).toString(r):\"\"};var BSON_BINARY_SUBTYPE_DEFAULT=0,writeStringToArray=function(r){for(var t=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(r.length)):new Array(r.length),i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return t},convertArraytoUtf8BinaryString=function(r,t,i){for(var e=\"\",f=t;f<i;f++)e+=String.fromCharCode(r[f]);return e};Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,module.exports=Binary,module.exports.Binary=Binary;","node_modules/bson/lib/bson/code.js":"var Code=function o(e,t){if(!(this instanceof o))return new o(e,t);this._bsontype=\"Code\",this.code=e,this.scope=t};Code.prototype.toJSON=function(){return{scope:this.scope,code:this.code}},module.exports=Code,module.exports.Code=Code;","node_modules/bson/lib/bson/db_ref.js":"function DBRef(e,t,i){if(!(this instanceof DBRef))return new DBRef(e,t,i);this._bsontype=\"DBRef\",this.namespace=e,this.oid=t,this.db=i}DBRef.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:null==this.db?\"\":this.db}},module.exports=DBRef,module.exports.DBRef=DBRef;","node_modules/bson/lib/bson/decimal128.js":"\"use strict\";var Long=require(\"./long\"),PARSE_STRING_REGEXP=/^(\\+|-)?(\\d+|(\\d*\\.\\d*))?(E|e)?([-+])?(\\d+)?$/,PARSE_INF_REGEXP=/^(\\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\\d+)?$/,utils=require(\"./parser/utils\"),isDigit=function(r){return!isNaN(parseInt(r,10))},divideu128=function(r){var i=Long.fromNumber(1e9),e=Long.fromNumber(0),o=0;if(!(r.parts[0]||r.parts[1]||r.parts[2]||r.parts[3]))return{quotient:r,rem:e};for(o=0;o<=3;o++)e=(e=e.shiftLeft(32)).add(new Long(r.parts[o],0)),r.parts[o]=e.div(i).low_,e=e.modulo(i);return{quotient:r,rem:e}},multiply64x2=function(r,i){if(!r&&!i)return{high:Long.fromNumber(0),low:Long.fromNumber(0)};var e=r.shiftRightUnsigned(32),o=new Long(r.getLowBits(),0),t=i.shiftRightUnsigned(32),n=new Long(i.getLowBits(),0),f=e.multiply(t),N=e.multiply(n),h=o.multiply(t),g=o.multiply(n);return f=f.add(N.shiftRightUnsigned(32)),N=new Long(N.getLowBits(),0).add(h).add(g.shiftRightUnsigned(32)),{high:f=f.add(N.shiftRightUnsigned(32)),low:g=N.shiftLeft(32).add(new Long(g.getLowBits(),0))}},lessThan=function(r,i){var e=r.high_>>>0,o=i.high_>>>0;return e<o||e===o&&r.low_>>>0<i.low_>>>0},Decimal128=function(r){this._bsontype=\"Decimal128\",this.bytes=r};Decimal128.fromString=function(r){var i,e=!1,o=!1,t=!1,n=0,f=0,N=0,h=0,g=0,u=[0],a=0,l=0,s=0,m=0,E=0,_=0,I=[0,0],w=[0,0],d=0;if((r=r.trim()).length>=7e3)throw new Error(r+\" not a valid Decimal128 string\");var p=r.match(PARSE_STRING_REGEXP),L=r.match(PARSE_INF_REGEXP),A=r.match(PARSE_NAN_REGEXP);if(!p&&!L&&!A||0===r.length)throw new Error(r+\" not a valid Decimal128 string\");if(p&&p[4]&&void 0===p[2])throw new Error(r+\" not a valid Decimal128 string\");if(\"+\"!==r[d]&&\"-\"!==r[d]||(e=\"-\"===r[d++]),!isDigit(r[d])&&\".\"!==r[d]){if(\"i\"===r[d]||\"I\"===r[d])return new Decimal128(utils.toBuffer(e?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if(\"N\"===r[d])return new Decimal128(utils.toBuffer(NAN_BUFFER))}for(;isDigit(r[d])||\".\"===r[d];)if(\".\"!==r[d])a<34&&(\"0\"!==r[d]||t)&&(t||(g=f),t=!0,u[l++]=parseInt(r[d],10),a+=1),t&&(N+=1),o&&(h+=1),f+=1,d+=1;else{if(o)return new Decimal128(utils.toBuffer(NAN_BUFFER));o=!0,d+=1}if(o&&!f)throw new Error(r+\" not a valid Decimal128 string\");if(\"e\"===r[d]||\"E\"===r[d]){var T=r.substr(++d).match(EXPONENT_REGEX);if(!T||!T[2])return new Decimal128(utils.toBuffer(NAN_BUFFER));E=parseInt(T[0],10),d+=T[0].length}if(r[d])return new Decimal128(utils.toBuffer(NAN_BUFFER));if(s=0,a){if(m=a-1,n=N,0!==E&&1!==n)for(;\"0\"===r[g+n-1];)n-=1}else s=0,m=0,u[0]=0,N=1,a=1,n=0;for(E<=h&&h-E>16384?E=EXPONENT_MIN:E-=h;E>EXPONENT_MAX;){if((m+=1)-s>MAX_DIGITS){var F=u.join(\"\");if(F.match(/^0+$/)){E=EXPONENT_MAX;break}return new Decimal128(utils.toBuffer(e?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER))}E-=1}for(;E<EXPONENT_MIN||a<N;){if(0===m){E=EXPONENT_MIN,n=0;break}if(a<N?N-=1:m-=1,!(E<EXPONENT_MAX)){if((F=u.join(\"\")).match(/^0+$/)){E=EXPONENT_MAX;break}return new Decimal128(utils.toBuffer(e?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER))}E+=1}if(m-s+1<n&&\"0\"!==r[n]){var O=f;o&&E===EXPONENT_MIN&&(g+=1,O+=1);var c=parseInt(r[g+m+1],10),B=0;if(c>=5&&(B=1,5===c))for(B=u[m]%2==1,_=g+m+2;_<O;_++)if(parseInt(r[_],10)){B=1;break}if(B)for(var R=m;R>=0&&++u[R]>9;R--)if(u[R]=0,0===R){if(!(E<EXPONENT_MAX))return new Decimal128(utils.toBuffer(e?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));E+=1,u[R]=1}}if(I=Long.fromNumber(0),w=Long.fromNumber(0),0===n)I=Long.fromNumber(0),w=Long.fromNumber(0);else if(m-s<17)for(R=s,w=Long.fromNumber(u[R++]),I=new Long(0,0);R<=m;R++)w=(w=w.multiply(Long.fromNumber(10))).add(Long.fromNumber(u[R]));else{for(R=s,I=Long.fromNumber(u[R++]);R<=m-17;R++)I=(I=I.multiply(Long.fromNumber(10))).add(Long.fromNumber(u[R]));for(w=Long.fromNumber(u[R++]);R<=m;R++)w=(w=w.multiply(Long.fromNumber(10))).add(Long.fromNumber(u[R]))}var b=multiply64x2(I,Long.fromString(\"100000000000000000\"));b.low=b.low.add(w),lessThan(b.low,w)&&(b.high=b.high.add(Long.fromNumber(1))),i=E+EXPONENT_BIAS;var P={low:Long.fromNumber(0),high:Long.fromNumber(0)};b.high.shiftRightUnsigned(49).and(Long.fromNumber(1)).equals(Long.fromNumber)?(P.high=P.high.or(Long.fromNumber(3).shiftLeft(61)),P.high=P.high.or(Long.fromNumber(i).and(Long.fromNumber(16383).shiftLeft(47))),P.high=P.high.or(b.high.and(Long.fromNumber(0x7fffffffffff)))):(P.high=P.high.or(Long.fromNumber(16383&i).shiftLeft(49)),P.high=P.high.or(b.high.and(Long.fromNumber(562949953421311)))),P.low=b.low,e&&(P.high=P.high.or(Long.fromString(\"9223372036854775808\")));var X=utils.allocBuffer(16);return d=0,X[d++]=255&P.low.low_,X[d++]=P.low.low_>>8&255,X[d++]=P.low.low_>>16&255,X[d++]=P.low.low_>>24&255,X[d++]=255&P.low.high_,X[d++]=P.low.high_>>8&255,X[d++]=P.low.high_>>16&255,X[d++]=P.low.high_>>24&255,X[d++]=255&P.high.low_,X[d++]=P.high.low_>>8&255,X[d++]=P.high.low_>>16&255,X[d++]=P.high.low_>>24&255,X[d++]=255&P.high.high_,X[d++]=P.high.high_>>8&255,X[d++]=P.high.high_>>16&255,X[d++]=P.high.high_>>24&255,new Decimal128(X)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;EXPONENT_BIAS=6176,Decimal128.prototype.toString=function(){for(var r,i,e,o,t,n,f=0,N=new Array(36),h=0;h<N.length;h++)N[h]=0;var g,u,a,l,s,m=0,E=!1,_={parts:new Array(4)},I=[];m=0;var w=this.bytes;if(o=w[m++]|w[m++]<<8|w[m++]<<16|w[m++]<<24,e=w[m++]|w[m++]<<8|w[m++]<<16|w[m++]<<24,i=w[m++]|w[m++]<<8|w[m++]<<16|w[m++]<<24,r=w[m++]|w[m++]<<8|w[m++]<<16|w[m++]<<24,m=0,{low:new Long(o,e),high:new Long(i,r)}.high.lessThan(Long.ZERO)&&I.push(\"-\"),(t=r>>26&COMBINATION_MASK)>>3==3){if(t===COMBINATION_INFINITY)return I.join(\"\")+\"Infinity\";if(t===COMBINATION_NAN)return\"NaN\";n=r>>15&EXPONENT_MASK,a=8+(r>>14&1)}else a=r>>14&7,n=r>>17&EXPONENT_MASK;if(g=n-EXPONENT_BIAS,_.parts[0]=(16383&r)+((15&a)<<14),_.parts[1]=i,_.parts[2]=e,_.parts[3]=o,0===_.parts[0]&&0===_.parts[1]&&0===_.parts[2]&&0===_.parts[3])E=!0;else for(s=3;s>=0;s--){var d=0,p=divideu128(_);if(_=p.quotient,d=p.rem.low_)for(l=8;l>=0;l--)N[9*s+l]=d%10,d=Math.floor(d/10)}if(E)f=1,N[m]=0;else for(f=36,h=0;!N[m];)h++,f-=1,m+=1;if((u=f-1+g)>=34||u<=-7||g>0){for(I.push(N[m++]),(f-=1)&&I.push(\".\"),h=0;h<f;h++)I.push(N[m++]);I.push(\"E\"),u>0?I.push(\"+\"+u):I.push(u)}else if(g>=0)for(h=0;h<f;h++)I.push(N[m++]);else{var L=f+g;if(L>0)for(h=0;h<L;h++)I.push(N[m++]);else I.push(\"0\");for(I.push(\".\");L++<0;)I.push(\"0\");for(h=0;h<f-Math.max(L-1,0);h++)I.push(N[m++])}return I.join(\"\")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},module.exports=Decimal128,module.exports.Decimal128=Decimal128;","node_modules/bson/lib/bson/double.js":"function Double(e){if(!(this instanceof Double))return new Double(e);this._bsontype=\"Double\",this.value=e}Double.prototype.valueOf=function(){return this.value},Double.prototype.toJSON=function(){return this.value},module.exports=Double,module.exports.Double=Double;","node_modules/bson/lib/bson/int_32.js":"var Int32=function(t){if(!(this instanceof Int32))return new Int32(t);this._bsontype=\"Int32\",this.value=t};Int32.prototype.valueOf=function(){return this.value},Int32.prototype.toJSON=function(){return this.value},module.exports=Int32,module.exports.Int32=Int32;","node_modules/bson/lib/bson/long.js":"function Long(t,o){if(!(this instanceof Long))return new Long(t,o);this._bsontype=\"Long\",this.low_=0|t,this.high_=0|o}Long.prototype.toInt=function(){return this.low_},Long.prototype.toNumber=function(){return this.high_*Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},Long.prototype.toBigInt=function(){return BigInt(this.toString())},Long.prototype.toJSON=function(){return this.toString()},Long.prototype.toString=function(t){var o=t||10;if(o<2||36<o)throw Error(\"radix out of range: \"+o);if(this.isZero())return\"0\";if(this.isNegative()){if(this.equals(Long.MIN_VALUE)){var n=Long.fromNumber(o),r=this.div(n),i=r.multiply(n).subtract(this);return r.toString(o)+i.toInt().toString(o)}return\"-\"+this.negate().toString(o)}var e=Long.fromNumber(Math.pow(o,6));i=this;for(var g=\"\";!i.isZero();){var s=i.div(e),h=i.subtract(s.multiply(e)).toInt().toString(o);if((i=s).isZero())return h+g;for(;h.length<6;)h=\"0\"+h;g=\"\"+h+g}},Long.prototype.getHighBits=function(){return this.high_},Long.prototype.getLowBits=function(){return this.low_},Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Long.TWO_PWR_32_DBL_+this.low_},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!==this.high_?this.high_:this.low_,o=31;o>0&&0==(t&1<<o);o--);return 0!==this.high_?o+33:o+1},Long.prototype.isZero=function(){return 0===this.high_&&0===this.low_},Long.prototype.isNegative=function(){return this.high_<0},Long.prototype.isOdd=function(){return 1==(1&this.low_)},Long.prototype.equals=function(t){return this.high_===t.high_&&this.low_===t.low_},Long.prototype.notEquals=function(t){return this.high_!==t.high_||this.low_!==t.low_},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var o=this.isNegative(),n=t.isNegative();return o&&!n?-1:!o&&n?1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return this.equals(Long.MIN_VALUE)?Long.MIN_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var o=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,i=65535&this.low_,e=t.high_>>>16,g=65535&t.high_,s=t.low_>>>16,h=0,L=0,_=0,u=0;return _+=(u+=i+(65535&t.low_))>>>16,u&=65535,L+=(_+=r+s)>>>16,_&=65535,h+=(L+=n+g)>>>16,L&=65535,h+=o+e,h&=65535,Long.fromBits(_<<16|u,h<<16|L)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(Long.TWO_PWR_24_)&&t.lessThan(Long.TWO_PWR_24_))return Long.fromNumber(this.toNumber()*t.toNumber());var o=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,i=65535&this.low_,e=t.high_>>>16,g=65535&t.high_,s=t.low_>>>16,h=65535&t.low_,L=0,_=0,u=0,f=0;return u+=(f+=i*h)>>>16,f&=65535,_+=(u+=r*h)>>>16,u&=65535,_+=(u+=i*s)>>>16,u&=65535,L+=(_+=n*h)>>>16,_&=65535,L+=(_+=r*s)>>>16,_&=65535,L+=(_+=i*g)>>>16,_&=65535,L+=o*h+n*s+r*g+i*e,L&=65535,Long.fromBits(u<<16|f,L<<16|_)},Long.prototype.div=function(t){if(t.isZero())throw Error(\"division by zero\");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return Long.MIN_VALUE;if(t.equals(Long.MIN_VALUE))return Long.ONE;var o=this.shiftRight(1).div(t).shiftLeft(1);if(o.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var n=this.subtract(t.multiply(o));return o.add(n.div(t))}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var r=Long.ZERO;for(n=this;n.greaterThanOrEqual(t);){o=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(o)/Math.LN2),e=i<=48?1:Math.pow(2,i-48),g=Long.fromNumber(o),s=g.multiply(t);s.isNegative()||s.greaterThan(n);)o-=e,s=(g=Long.fromNumber(o)).multiply(t);g.isZero()&&(g=Long.ONE),r=r.add(g),n=n.subtract(s)}return r},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low_,~this.high_)},Long.prototype.and=function(t){return Long.fromBits(this.low_&t.low_,this.high_&t.high_)},Long.prototype.or=function(t){return Long.fromBits(this.low_|t.low_,this.high_|t.high_)},Long.prototype.xor=function(t){return Long.fromBits(this.low_^t.low_,this.high_^t.high_)},Long.prototype.shiftLeft=function(t){if(0===(t&=63))return this;var o=this.low_;if(t<32){var n=this.high_;return Long.fromBits(o<<t,n<<t|o>>>32-t)}return Long.fromBits(0,o<<t-32)},Long.prototype.shiftRight=function(t){if(0===(t&=63))return this;var o=this.high_;if(t<32){var n=this.low_;return Long.fromBits(n>>>t|o<<32-t,o>>t)}return Long.fromBits(o>>t-32,o>=0?0:-1)},Long.prototype.shiftRightUnsigned=function(t){if(0===(t&=63))return this;var o=this.high_;if(t<32){var n=this.low_;return Long.fromBits(n>>>t|o<<32-t,o>>>t)}return 32===t?Long.fromBits(o,0):Long.fromBits(o>>>t-32,0)},Long.fromInt=function(t){if(-128<=t&&t<128){var o=Long.INT_CACHE_[t];if(o)return o}var n=new Long(0|t,t<0?-1:0);return-128<=t&&t<128&&(Long.INT_CACHE_[t]=n),n},Long.fromNumber=function(t){return isNaN(t)||!isFinite(t)?Long.ZERO:t<=-Long.TWO_PWR_63_DBL_?Long.MIN_VALUE:t+1>=Long.TWO_PWR_63_DBL_?Long.MAX_VALUE:t<0?Long.fromNumber(-t).negate():new Long(t%Long.TWO_PWR_32_DBL_|0,t/Long.TWO_PWR_32_DBL_|0)},Long.fromBigInt=function(t){return Long.fromString(t.toString(10),10)},Long.fromBits=function(t,o){return new Long(t,o)},Long.fromString=function(t,o){if(0===t.length)throw Error(\"number format error: empty string\");var n=o||10;if(n<2||36<n)throw Error(\"radix out of range: \"+n);if(\"-\"===t.charAt(0))return Long.fromString(t.substring(1),n).negate();if(t.indexOf(\"-\")>=0)throw Error('number format error: interior \"-\" character: '+t);for(var r=Long.fromNumber(Math.pow(n,8)),i=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),n);if(g<8){var h=Long.fromNumber(Math.pow(n,g));i=i.multiply(h).add(Long.fromNumber(s))}else i=(i=i.multiply(r)).add(Long.fromNumber(s))}return i},Long.INT_CACHE_={},Long.TWO_PWR_16_DBL_=65536,Long.TWO_PWR_24_DBL_=1<<24,Long.TWO_PWR_32_DBL_=Long.TWO_PWR_16_DBL_*Long.TWO_PWR_16_DBL_,Long.TWO_PWR_31_DBL_=Long.TWO_PWR_32_DBL_/2,Long.TWO_PWR_48_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_16_DBL_,Long.TWO_PWR_64_DBL_=Long.TWO_PWR_32_DBL_*Long.TWO_PWR_32_DBL_,Long.TWO_PWR_63_DBL_=Long.TWO_PWR_64_DBL_/2,Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_VALUE=Long.fromBits(-1,2147483647),Long.MIN_VALUE=Long.fromBits(0,-2147483648),Long.TWO_PWR_24_=Long.fromInt(1<<24),module.exports=Long,module.exports.Long=Long;","node_modules/bson/lib/bson/map.js":"\"use strict\";if(void 0!==global.Map)module.exports=global.Map,module.exports.Map=global.Map;else{var Map=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var s=e[t],i=s[0],o=s[1];this._keys.push(i),this._values[i]={v:o,i:this._keys.length-1}}};Map.prototype.clear=function(){this._keys=[],this._values={}},Map.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},Map.prototype.entries=function(){var e=this,t=0;return{next:function(){var s=e._keys[t++];return{value:void 0!==s?[s,e._values[s].v]:void 0,done:void 0===s}}}},Map.prototype.forEach=function(e,t){t=t||this;for(var s=0;s<this._keys.length;s++){var i=this._keys[s];e.call(t,this._values[i].v,i,t)}},Map.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},Map.prototype.has=function(e){return null!=this._values[e]},Map.prototype.keys=function(){var e=this,t=0;return{next:function(){var s=e._keys[t++];return{value:void 0!==s?s:void 0,done:void 0===s}}}},Map.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},Map.prototype.values=function(){var e=this,t=0;return{next:function(){var s=e._keys[t++];return{value:void 0!==s?e._values[s].v:void 0,done:void 0===s}}}},Object.defineProperty(Map.prototype,\"size\",{enumerable:!0,get:function(){return this._keys.length}}),module.exports=Map,module.exports.Map=Map}","node_modules/bson/lib/bson/max_key.js":"function MaxKey(){if(!(this instanceof MaxKey))return new MaxKey;this._bsontype=\"MaxKey\"}module.exports=MaxKey,module.exports.MaxKey=MaxKey;","node_modules/bson/lib/bson/min_key.js":"function MinKey(){if(!(this instanceof MinKey))return new MinKey;this._bsontype=\"MinKey\"}module.exports=MinKey,module.exports.MinKey=MinKey;","node_modules/bson/lib/bson/objectid.js":"var inspect=\"inspect\",utils=require(\"./parser/utils\"),MACHINE_ID=parseInt(16777215*Math.random(),10),checkForHexRegExp=new RegExp(\"^[0-9a-fA-F]{24}$\");try{if(Buffer&&Buffer.from){var hasBufferType=!0;inspect=require(\"util\").inspect.custom||\"inspect\"}}catch(t){hasBufferType=!1}for(var ObjectID=function t(e){if(e instanceof t)return e;if(!(this instanceof t))return new t(e);if(this._bsontype=\"ObjectID\",null==e||\"number\"==typeof e)return this.id=this.generate(e),void(t.cacheHexString&&(this.__id=this.toString(\"hex\")));var i=t.isValid(e);if(!i&&null!=e)throw new Error(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(i&&\"string\"==typeof e&&24===e.length&&hasBufferType)return new t(utils.toBuffer(e,\"hex\"));if(i&&\"string\"==typeof e&&24===e.length)return t.createFromHexString(e);if(null==e||12!==e.length){if(null!=e&&\"function\"==typeof e.toHexString)return e;throw new Error(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\")}this.id=e,t.cacheHexString&&(this.__id=this.toString(\"hex\"))},hexTable=[],i=0;i<256;i++)hexTable[i]=(i<=15?\"0\":\"\")+i.toString(16);ObjectID.prototype.toHexString=function(){if(ObjectID.cacheHexString&&this.__id)return this.__id;var t=\"\";if(!this.id||!this.id.length)throw new Error(\"invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is [\"+JSON.stringify(this.id)+\"]\");if(this.id instanceof _Buffer)return t=convertToHex(this.id),ObjectID.cacheHexString&&(this.__id=t),t;for(var e=0;e<this.id.length;e++)t+=hexTable[this.id.charCodeAt(e)];return ObjectID.cacheHexString&&(this.__id=t),t},ObjectID.prototype.get_inc=function(){return ObjectID.index=(ObjectID.index+1)%16777215},ObjectID.prototype.getInc=function(){return this.get_inc()},ObjectID.prototype.generate=function(t){\"number\"!=typeof t&&(t=~~(Date.now()/1e3));var e=(\"undefined\"==typeof process||1===process.pid?Math.floor(1e5*Math.random()):process.pid)%65535,i=this.get_inc(),r=utils.allocBuffer(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[6]=255&MACHINE_ID,r[5]=MACHINE_ID>>8&255,r[4]=MACHINE_ID>>16&255,r[8]=255&e,r[7]=e>>8&255,r[11]=255&i,r[10]=i>>8&255,r[9]=i>>16&255,r},ObjectID.prototype.toString=function(t){return this.id&&this.id.copy?this.id.toString(\"string\"==typeof t?t:\"hex\"):this.toHexString()},ObjectID.prototype[inspect]=ObjectID.prototype.toString,ObjectID.prototype.toJSON=function(){return this.toHexString()},ObjectID.prototype.equals=function(t){return t instanceof ObjectID?this.toString()===t.toString():\"string\"==typeof t&&ObjectID.isValid(t)&&12===t.length&&this.id instanceof _Buffer?t===this.id.toString(\"binary\"):\"string\"==typeof t&&ObjectID.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():\"string\"==typeof t&&ObjectID.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof ObjectID||t.toHexString))&&t.toHexString()===this.toHexString()},ObjectID.prototype.getTimestamp=function(){var t=new Date,e=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return t.setTime(1e3*Math.floor(e)),t},ObjectID.index=~~(16777215*Math.random()),ObjectID.createPk=function(){return new ObjectID},ObjectID.createFromTime=function(t){var e=utils.toBuffer([0,0,0,0,0,0,0,0,0,0,0,0]);return e[3]=255&t,e[2]=t>>8&255,e[1]=t>>16&255,e[0]=t>>24&255,new ObjectID(e)};var decodeLookup=[];for(i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer,convertToHex=function(t){return t.toString(\"hex\")};ObjectID.createFromHexString=function(t){if(void 0===t||null!=t&&24!==t.length)throw new Error(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(hasBufferType)return new ObjectID(utils.toBuffer(t,\"hex\"));for(var e=new _Buffer(12),i=0,r=0;r<24;)e[i++]=decodeLookup[t.charCodeAt(r++)]<<4|decodeLookup[t.charCodeAt(r++)];return new ObjectID(e)},ObjectID.isValid=function(t){return null!=t&&(\"number\"==typeof t||(\"string\"==typeof t?12===t.length||24===t.length&&checkForHexRegExp.test(t):t instanceof ObjectID||(t instanceof _Buffer||\"function\"==typeof t.toHexString&&(t.id instanceof _Buffer||\"string\"==typeof t.id)&&(12===t.id.length||24===t.id.length&&checkForHexRegExp.test(t.id)))))},Object.defineProperty(ObjectID.prototype,\"generationTime\",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(t){this.id[3]=255&t,this.id[2]=t>>8&255,this.id[1]=t>>16&255,this.id[0]=t>>24&255}}),module.exports=ObjectID,module.exports.ObjectID=ObjectID,module.exports.ObjectId=ObjectID;","node_modules/bson/lib/bson/regexp.js":"function BSONRegExp(t,o){if(!(this instanceof BSONRegExp))return new BSONRegExp;this._bsontype=\"BSONRegExp\",this.pattern=t||\"\",this.options=o||\"\";for(var s=0;s<this.options.length;s++)if(\"i\"!==this.options[s]&&\"m\"!==this.options[s]&&\"x\"!==this.options[s]&&\"l\"!==this.options[s]&&\"s\"!==this.options[s]&&\"u\"!==this.options[s])throw new Error(\"the regular expression options [\"+this.options[s]+\"] is not supported\")}module.exports=BSONRegExp,module.exports.BSONRegExp=BSONRegExp;","node_modules/bson/lib/bson/symbol.js":"var inspect=Buffer&&require(\"util\").inspect.custom||\"inspect\";function Symbol(t){if(!(this instanceof Symbol))return new Symbol(t);this._bsontype=\"Symbol\",this.value=t}Symbol.prototype.valueOf=function(){return this.value},Symbol.prototype.toString=function(){return this.value},Symbol.prototype[inspect]=function(){return this.value},Symbol.prototype.toJSON=function(){return this.value},module.exports=Symbol,module.exports.Symbol=Symbol;","node_modules/bson/lib/bson/timestamp.js":"function Timestamp(t,i){if(!(this instanceof Timestamp))return new Timestamp(t,i);this._bsontype=\"Timestamp\",this.low_=0|t,this.high_=0|i}Timestamp.prototype.toInt=function(){return this.low_},Timestamp.prototype.toNumber=function(){return this.high_*Timestamp.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},Timestamp.prototype.toJSON=function(){return this.toString()},Timestamp.prototype.toString=function(t){var i=t||10;if(i<2||36<i)throw Error(\"radix out of range: \"+i);if(this.isZero())return\"0\";if(this.isNegative()){if(this.equals(Timestamp.MIN_VALUE)){var e=Timestamp.fromNumber(i),m=this.div(e),r=m.multiply(e).subtract(this);return m.toString(i)+r.toInt().toString(i)}return\"-\"+this.negate().toString(i)}var s=Timestamp.fromNumber(Math.pow(i,6));r=this;for(var a=\"\";!r.isZero();){var o=r.div(s),p=r.subtract(o.multiply(s)).toInt().toString(i);if((r=o).isZero())return p+a;for(;p.length<6;)p=\"0\"+p;a=\"\"+p+a}},Timestamp.prototype.getHighBits=function(){return this.high_},Timestamp.prototype.getLowBits=function(){return this.low_},Timestamp.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Timestamp.TWO_PWR_32_DBL_+this.low_},Timestamp.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Timestamp.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!==this.high_?this.high_:this.low_,i=31;i>0&&0==(t&1<<i);i--);return 0!==this.high_?i+33:i+1},Timestamp.prototype.isZero=function(){return 0===this.high_&&0===this.low_},Timestamp.prototype.isNegative=function(){return this.high_<0},Timestamp.prototype.isOdd=function(){return 1==(1&this.low_)},Timestamp.prototype.equals=function(t){return this.high_===t.high_&&this.low_===t.low_},Timestamp.prototype.notEquals=function(t){return this.high_!==t.high_||this.low_!==t.low_},Timestamp.prototype.lessThan=function(t){return this.compare(t)<0},Timestamp.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Timestamp.prototype.greaterThan=function(t){return this.compare(t)>0},Timestamp.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Timestamp.prototype.compare=function(t){if(this.equals(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.subtract(t).isNegative()?-1:1},Timestamp.prototype.negate=function(){return this.equals(Timestamp.MIN_VALUE)?Timestamp.MIN_VALUE:this.not().add(Timestamp.ONE)},Timestamp.prototype.add=function(t){var i=this.high_>>>16,e=65535&this.high_,m=this.low_>>>16,r=65535&this.low_,s=t.high_>>>16,a=65535&t.high_,o=t.low_>>>16,p=0,n=0,h=0,_=0;return h+=(_+=r+(65535&t.low_))>>>16,_&=65535,n+=(h+=m+o)>>>16,h&=65535,p+=(n+=e+a)>>>16,n&=65535,p+=i+s,p&=65535,Timestamp.fromBits(h<<16|_,p<<16|n)},Timestamp.prototype.subtract=function(t){return this.add(t.negate())},Timestamp.prototype.multiply=function(t){if(this.isZero())return Timestamp.ZERO;if(t.isZero())return Timestamp.ZERO;if(this.equals(Timestamp.MIN_VALUE))return t.isOdd()?Timestamp.MIN_VALUE:Timestamp.ZERO;if(t.equals(Timestamp.MIN_VALUE))return this.isOdd()?Timestamp.MIN_VALUE:Timestamp.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(Timestamp.TWO_PWR_24_)&&t.lessThan(Timestamp.TWO_PWR_24_))return Timestamp.fromNumber(this.toNumber()*t.toNumber());var i=this.high_>>>16,e=65535&this.high_,m=this.low_>>>16,r=65535&this.low_,s=t.high_>>>16,a=65535&t.high_,o=t.low_>>>16,p=65535&t.low_,n=0,h=0,_=0,T=0;return _+=(T+=r*p)>>>16,T&=65535,h+=(_+=m*p)>>>16,_&=65535,h+=(_+=r*o)>>>16,_&=65535,n+=(h+=e*p)>>>16,h&=65535,n+=(h+=m*o)>>>16,h&=65535,n+=(h+=r*a)>>>16,h&=65535,n+=i*p+e*o+m*a+r*s,n&=65535,Timestamp.fromBits(_<<16|T,n<<16|h)},Timestamp.prototype.div=function(t){if(t.isZero())throw Error(\"division by zero\");if(this.isZero())return Timestamp.ZERO;if(this.equals(Timestamp.MIN_VALUE)){if(t.equals(Timestamp.ONE)||t.equals(Timestamp.NEG_ONE))return Timestamp.MIN_VALUE;if(t.equals(Timestamp.MIN_VALUE))return Timestamp.ONE;var i=this.shiftRight(1).div(t).shiftLeft(1);if(i.equals(Timestamp.ZERO))return t.isNegative()?Timestamp.ONE:Timestamp.NEG_ONE;var e=this.subtract(t.multiply(i));return i.add(e.div(t))}if(t.equals(Timestamp.MIN_VALUE))return Timestamp.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var m=Timestamp.ZERO;for(e=this;e.greaterThanOrEqual(t);){i=Math.max(1,Math.floor(e.toNumber()/t.toNumber()));for(var r=Math.ceil(Math.log(i)/Math.LN2),s=r<=48?1:Math.pow(2,r-48),a=Timestamp.fromNumber(i),o=a.multiply(t);o.isNegative()||o.greaterThan(e);)i-=s,o=(a=Timestamp.fromNumber(i)).multiply(t);a.isZero()&&(a=Timestamp.ONE),m=m.add(a),e=e.subtract(o)}return m},Timestamp.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Timestamp.prototype.not=function(){return Timestamp.fromBits(~this.low_,~this.high_)},Timestamp.prototype.and=function(t){return Timestamp.fromBits(this.low_&t.low_,this.high_&t.high_)},Timestamp.prototype.or=function(t){return Timestamp.fromBits(this.low_|t.low_,this.high_|t.high_)},Timestamp.prototype.xor=function(t){return Timestamp.fromBits(this.low_^t.low_,this.high_^t.high_)},Timestamp.prototype.shiftLeft=function(t){if(0===(t&=63))return this;var i=this.low_;if(t<32){var e=this.high_;return Timestamp.fromBits(i<<t,e<<t|i>>>32-t)}return Timestamp.fromBits(0,i<<t-32)},Timestamp.prototype.shiftRight=function(t){if(0===(t&=63))return this;var i=this.high_;if(t<32){var e=this.low_;return Timestamp.fromBits(e>>>t|i<<32-t,i>>t)}return Timestamp.fromBits(i>>t-32,i>=0?0:-1)},Timestamp.prototype.shiftRightUnsigned=function(t){if(0===(t&=63))return this;var i=this.high_;if(t<32){var e=this.low_;return Timestamp.fromBits(e>>>t|i<<32-t,i>>>t)}return 32===t?Timestamp.fromBits(i,0):Timestamp.fromBits(i>>>t-32,0)},Timestamp.fromInt=function(t){if(-128<=t&&t<128){var i=Timestamp.INT_CACHE_[t];if(i)return i}var e=new Timestamp(0|t,t<0?-1:0);return-128<=t&&t<128&&(Timestamp.INT_CACHE_[t]=e),e},Timestamp.fromNumber=function(t){return isNaN(t)||!isFinite(t)?Timestamp.ZERO:t<=-Timestamp.TWO_PWR_63_DBL_?Timestamp.MIN_VALUE:t+1>=Timestamp.TWO_PWR_63_DBL_?Timestamp.MAX_VALUE:t<0?Timestamp.fromNumber(-t).negate():new Timestamp(t%Timestamp.TWO_PWR_32_DBL_|0,t/Timestamp.TWO_PWR_32_DBL_|0)},Timestamp.fromBits=function(t,i){return new Timestamp(t,i)},Timestamp.fromString=function(t,i){if(0===t.length)throw Error(\"number format error: empty string\");var e=i||10;if(e<2||36<e)throw Error(\"radix out of range: \"+e);if(\"-\"===t.charAt(0))return Timestamp.fromString(t.substring(1),e).negate();if(t.indexOf(\"-\")>=0)throw Error('number format error: interior \"-\" character: '+t);for(var m=Timestamp.fromNumber(Math.pow(e,8)),r=Timestamp.ZERO,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),e);if(a<8){var p=Timestamp.fromNumber(Math.pow(e,a));r=r.multiply(p).add(Timestamp.fromNumber(o))}else r=(r=r.multiply(m)).add(Timestamp.fromNumber(o))}return r},Timestamp.INT_CACHE_={},Timestamp.TWO_PWR_16_DBL_=65536,Timestamp.TWO_PWR_24_DBL_=1<<24,Timestamp.TWO_PWR_32_DBL_=Timestamp.TWO_PWR_16_DBL_*Timestamp.TWO_PWR_16_DBL_,Timestamp.TWO_PWR_31_DBL_=Timestamp.TWO_PWR_32_DBL_/2,Timestamp.TWO_PWR_48_DBL_=Timestamp.TWO_PWR_32_DBL_*Timestamp.TWO_PWR_16_DBL_,Timestamp.TWO_PWR_64_DBL_=Timestamp.TWO_PWR_32_DBL_*Timestamp.TWO_PWR_32_DBL_,Timestamp.TWO_PWR_63_DBL_=Timestamp.TWO_PWR_64_DBL_/2,Timestamp.ZERO=Timestamp.fromInt(0),Timestamp.ONE=Timestamp.fromInt(1),Timestamp.NEG_ONE=Timestamp.fromInt(-1),Timestamp.MAX_VALUE=Timestamp.fromBits(-1,2147483647),Timestamp.MIN_VALUE=Timestamp.fromBits(0,-2147483648),Timestamp.TWO_PWR_24_=Timestamp.fromInt(1<<24),module.exports=Timestamp,module.exports.Timestamp=Timestamp;","node_modules/bson/lib/bson/parser/deserializer.js":"\"use strict\";var Long=require(\"../long\").Long,Double=require(\"../double\").Double,Timestamp=require(\"../timestamp\").Timestamp,ObjectID=require(\"../objectid\").ObjectID,Symbol=require(\"../symbol\").Symbol,Code=require(\"../code\").Code,MinKey=require(\"../min_key\").MinKey,MaxKey=require(\"../max_key\").MaxKey,Decimal128=require(\"../decimal128\"),Int32=require(\"../int_32\"),DBRef=require(\"../db_ref\").DBRef,BSONRegExp=require(\"../regexp\").BSONRegExp,Binary=require(\"../binary\").Binary,utils=require(\"./utils\"),deserialize=function(e,r,n){var t=(r=null==r?{}:r)&&r.index?r.index:0,i=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(i<5||e.length<i||i+t>e.length)throw new Error(\"corrupt bson message\");if(0!==e[t+i-1])throw new Error(\"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\");return deserializeObject(e,t,r,n)},deserializeObject=function(e,r,n,t){var i=null!=n.evalFunctions&&n.evalFunctions,o=null!=n.cacheFunctions&&n.cacheFunctions,l=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!l)var a=null;var N=null==n.fieldsAsRaw?null:n.fieldsAsRaw,B=null!=n.raw&&n.raw,S=\"boolean\"==typeof n.bsonRegExp&&n.bsonRegExp,O=null!=n.promoteBuffers&&n.promoteBuffers,_=null==n.promoteLongs||n.promoteLongs,s=null==n.promoteValues||n.promoteValues,f=r;if(e.length<5)throw new Error(\"corrupt bson message < 5 bytes long\");var u=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;if(u<5||u>e.length)throw new Error(\"corrupt bson message\");for(var A=t?[]:{},c=0;;){var h=e[r++];if(0===h)break;for(var w=r;0!==e[w]&&w<e.length;)w++;if(w>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var E=t?c++:e.toString(\"utf8\",r,w);if(r=w+1,h===BSON.BSON_DATA_STRING){var g=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;if(g<=0||g>e.length-r||0!==e[r+g-1])throw new Error(\"bad string length in bson\");A[E]=e.toString(\"utf8\",r,r+g-1),r+=g}else if(h===BSON.BSON_DATA_OID){var D=utils.allocBuffer(12);e.copy(D,0,r,r+12),A[E]=new ObjectID(D),r+=12}else if(h===BSON.BSON_DATA_INT&&!1===s)A[E]=new Int32(e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24);else if(h===BSON.BSON_DATA_INT)A[E]=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;else if(h===BSON.BSON_DATA_NUMBER&&!1===s)A[E]=new Double(e.readDoubleLE(r)),r+=8;else if(h===BSON.BSON_DATA_NUMBER)A[E]=e.readDoubleLE(r),r+=8;else if(h===BSON.BSON_DATA_DATE){var T=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24,b=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;A[E]=new Date(new Long(T,b).toNumber())}else if(h===BSON.BSON_DATA_BOOLEAN){if(0!==e[r]&&1!==e[r])throw new Error(\"illegal boolean type value\");A[E]=1===e[r++]}else if(h===BSON.BSON_DATA_OBJECT){var y=r,d=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(d<=0||d>e.length-r)throw new Error(\"bad embedded document length in bson\");A[E]=B?e.slice(r,r+d):deserializeObject(e,y,n,!1),r+=d}else if(h===BSON.BSON_DATA_ARRAY){y=r;var p=n,v=r+(d=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24);if(N&&N[E]){for(var m in p={},n)p[m]=n[m];p.raw=!0}if(A[E]=deserializeObject(e,y,p,!0),0!==e[(r+=d)-1])throw new Error(\"invalid array terminator byte\");if(r!==v)throw new Error(\"corrupted array bson\")}else if(h===BSON.BSON_DATA_UNDEFINED)A[E]=void 0;else if(h===BSON.BSON_DATA_NULL)A[E]=null;else if(h===BSON.BSON_DATA_LONG){T=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24,b=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;var I=new Long(T,b);A[E]=_&&!0===s&&I.lessThanOrEqual(JS_INT_MAX_LONG)&&I.greaterThanOrEqual(JS_INT_MIN_LONG)?I.toNumber():I}else if(h===BSON.BSON_DATA_DECIMAL128){var R=utils.allocBuffer(16);e.copy(R,0,r,r+16),r+=16;var M=new Decimal128(R);A[E]=M.toObject?M.toObject():M}else if(h===BSON.BSON_DATA_BINARY){var C=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24,Y=C,L=e[r++];if(C<0)throw new Error(\"Negative binary type element size found\");if(C>e.length)throw new Error(\"Binary type size larger than document size\");if(null!=e.slice){if(L===Binary.SUBTYPE_BYTE_ARRAY){if((C=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(C>Y-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(C<Y-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}A[E]=O&&s?e.slice(r,r+C):new Binary(e.slice(r,r+C),L)}else{var x=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(C)):new Array(C);if(L===Binary.SUBTYPE_BYTE_ARRAY){if((C=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(C>Y-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(C<Y-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}for(w=0;w<C;w++)x[w]=e[r+w];A[E]=O&&s?x:new Binary(x,L)}r+=C}else if(h===BSON.BSON_DATA_REGEXP&&!1===S){for(w=r;0!==e[w]&&w<e.length;)w++;if(w>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var U=e.toString(\"utf8\",r,w);for(w=r=w+1;0!==e[w]&&w<e.length;)w++;if(w>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var z=e.toString(\"utf8\",r,w);r=w+1;var j=new Array(z.length);for(w=0;w<z.length;w++)switch(z[w]){case\"m\":j[w]=\"m\";break;case\"s\":j[w]=\"g\";break;case\"i\":j[w]=\"i\"}A[E]=new RegExp(U,j.join(\"\"))}else if(h===BSON.BSON_DATA_REGEXP&&!0===S){for(w=r;0!==e[w]&&w<e.length;)w++;if(w>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");for(U=e.toString(\"utf8\",r,w),w=r=w+1;0!==e[w]&&w<e.length;)w++;if(w>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");z=e.toString(\"utf8\",r,w),r=w+1,A[E]=new BSONRegExp(U,z)}else if(h===BSON.BSON_DATA_SYMBOL){if((g=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)<=0||g>e.length-r||0!==e[r+g-1])throw new Error(\"bad string length in bson\");A[E]=new Symbol(e.toString(\"utf8\",r,r+g-1)),r+=g}else if(h===BSON.BSON_DATA_TIMESTAMP)T=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24,b=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24,A[E]=new Timestamp(T,b);else if(h===BSON.BSON_DATA_MIN_KEY)A[E]=new MinKey;else if(h===BSON.BSON_DATA_MAX_KEY)A[E]=new MaxKey;else if(h===BSON.BSON_DATA_CODE){if((g=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)<=0||g>e.length-r||0!==e[r+g-1])throw new Error(\"bad string length in bson\");var P=e.toString(\"utf8\",r,r+g-1);if(i)if(o){var q=l?a(P):P;A[E]=isolateEvalWithHash(functionCache,q,P,A)}else A[E]=isolateEval(P);else A[E]=new Code(P);r+=g}else if(h===BSON.BSON_DATA_CODE_W_SCOPE){var F=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24;if(F<13)throw new Error(\"code_w_scope total size shorter minimum expected length\");if((g=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)<=0||g>e.length-r||0!==e[r+g-1])throw new Error(\"bad string length in bson\");P=e.toString(\"utf8\",r,r+g-1),y=r+=g,d=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;var G=deserializeObject(e,y,n,!1);if(r+=d,F<8+d+g)throw new Error(\"code_w_scope total size is to short, truncating scope\");if(F>8+d+g)throw new Error(\"code_w_scope total size is to long, clips outer document\");i?(o?(q=l?a(P):P,A[E]=isolateEvalWithHash(functionCache,q,P,A)):A[E]=isolateEval(P),A[E].scope=G):A[E]=new Code(P,G)}else{if(h!==BSON.BSON_DATA_DBPOINTER)throw new Error(\"Detected unknown BSON type \"+h.toString(16)+' for fieldname \"'+E+'\", are you using the latest BSON parser');if((g=e[r++]|e[r++]<<8|e[r++]<<16|e[r++]<<24)<=0||g>e.length-r||0!==e[r+g-1])throw new Error(\"bad string length in bson\");var K=e.toString(\"utf8\",r,r+g-1);r+=g;var X=utils.allocBuffer(12);e.copy(X,0,r,r+12),D=new ObjectID(X),r+=12;var J=K.split(\".\"),k=J.shift(),W=J.join(\".\");A[E]=new DBRef(W,D,k)}}if(u!==r-f){if(t)throw new Error(\"corrupt array bson\");throw new Error(\"corrupt object bson\")}return null!=A.$id&&(A=new DBRef(A.$ref,A.$id,A.$db)),A},isolateEvalWithHash=function(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval(\"value = \"+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},isolateEval=function(functionString){var value=null;return eval(\"value = \"+functionString),value},BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1,BSON.BSON_DATA_STRING=2,BSON.BSON_DATA_OBJECT=3,BSON.BSON_DATA_ARRAY=4,BSON.BSON_DATA_BINARY=5,BSON.BSON_DATA_UNDEFINED=6,BSON.BSON_DATA_OID=7,BSON.BSON_DATA_BOOLEAN=8,BSON.BSON_DATA_DATE=9,BSON.BSON_DATA_NULL=10,BSON.BSON_DATA_REGEXP=11,BSON.BSON_DATA_DBPOINTER=12,BSON.BSON_DATA_CODE=13,BSON.BSON_DATA_SYMBOL=14,BSON.BSON_DATA_CODE_W_SCOPE=15,BSON.BSON_DATA_INT=16,BSON.BSON_DATA_TIMESTAMP=17,BSON.BSON_DATA_LONG=18,BSON.BSON_DATA_DECIMAL128=19,BSON.BSON_DATA_MIN_KEY=255,BSON.BSON_DATA_MAX_KEY=127,BSON.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON.BSON_BINARY_SUBTYPE_UUID=3,BSON.BSON_BINARY_SUBTYPE_MD5=4,BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128,BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long.fromNumber(-9007199254740992);module.exports=deserialize;","node_modules/bson/lib/bson/parser/serializer.js":"\"use strict\";var writeIEEE754=require(\"../float_parser\").writeIEEE754,Long=require(\"../long\").Long,Map=require(\"../map\"),Binary=require(\"../binary\").Binary,normalizedFunctionString=require(\"./utils\").normalizedFunctionString,regexp=/\\x00/,ignoreKeys=[\"$db\",\"$ref\",\"$id\",\"$clusterTime\"],isDate=function(e){return\"object\"==typeof e&&\"[object Date]\"===Object.prototype.toString.call(e)},isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},serializeString=function(e,i,t,r,n){e[r++]=BSON.BSON_DATA_STRING,e[(r=r+(n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"))+1)-1]=0;var o=e.write(t,r+4,\"utf8\");return e[r+3]=o+1>>24&255,e[r+2]=o+1>>16&255,e[r+1]=o+1>>8&255,e[r]=o+1&255,r=r+4+o,e[r++]=0,r},serializeNumber=function(e,i,t,r,n){if(Math.floor(t)===t&&t>=BSON.JS_INT_MIN&&t<=BSON.JS_INT_MAX)if(t>=BSON.BSON_INT32_MIN&&t<=BSON.BSON_INT32_MAX){e[r++]=BSON.BSON_DATA_INT;var o=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\");r+=o,e[r++]=0,e[r++]=255&t,e[r++]=t>>8&255,e[r++]=t>>16&255,e[r++]=t>>24&255}else if(t>=BSON.JS_INT_MIN&&t<=BSON.JS_INT_MAX)e[r++]=BSON.BSON_DATA_NUMBER,r+=o=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,writeIEEE754(e,t,r,\"little\",52,8),r+=8;else{e[r++]=BSON.BSON_DATA_LONG,r+=o=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var s=Long.fromNumber(t),l=s.getLowBits(),a=s.getHighBits();e[r++]=255&l,e[r++]=l>>8&255,e[r++]=l>>16&255,e[r++]=l>>24&255,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255}else e[r++]=BSON.BSON_DATA_NUMBER,r+=o=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,writeIEEE754(e,t,r,\"little\",52,8),r+=8;return r},serializeNull=function(e,i,t,r,n){return e[r++]=BSON.BSON_DATA_NULL,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,r},serializeBoolean=function(e,i,t,r,n){return e[r++]=BSON.BSON_DATA_BOOLEAN,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,e[r++]=t?1:0,r},serializeDate=function(e,i,t,r,n){e[r++]=BSON.BSON_DATA_DATE,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var o=Long.fromNumber(t.getTime()),s=o.getLowBits(),l=o.getHighBits();return e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,e[r++]=255&l,e[r++]=l>>8&255,e[r++]=l>>16&255,e[r++]=l>>24&255,r},serializeRegExp=function(e,i,t,r,n){if(e[r++]=BSON.BSON_DATA_REGEXP,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,t.source&&null!=t.source.match(regexp))throw Error(\"value \"+t.source+\" must not contain null bytes\");return r+=e.write(t.source,r,\"utf8\"),e[r++]=0,t.global&&(e[r++]=115),t.ignoreCase&&(e[r++]=105),t.multiline&&(e[r++]=109),e[r++]=0,r},serializeBSONRegExp=function(e,i,t,r,n){if(e[r++]=BSON.BSON_DATA_REGEXP,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,null!=t.pattern.match(regexp))throw Error(\"pattern \"+t.pattern+\" must not contain null bytes\");return r+=e.write(t.pattern,r,\"utf8\"),e[r++]=0,r+=e.write(t.options.split(\"\").sort().join(\"\"),r,\"utf8\"),e[r++]=0,r},serializeMinMax=function(e,i,t,r,n){return null===t?e[r++]=BSON.BSON_DATA_NULL:\"MinKey\"===t._bsontype?e[r++]=BSON.BSON_DATA_MIN_KEY:e[r++]=BSON.BSON_DATA_MAX_KEY,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,r},serializeObjectId=function(e,i,t,r,n){if(e[r++]=BSON.BSON_DATA_OID,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,\"string\"==typeof t.id)e.write(t.id,r,\"binary\");else{if(!t.id||!t.id.copy)throw new Error(\"object [\"+JSON.stringify(t)+\"] is not a valid ObjectId\");t.id.copy(e,r,0,12)}return r+12},serializeBuffer=function(e,i,t,r,n){e[r++]=BSON.BSON_DATA_BINARY,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var o=t.length;return e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,e[r++]=BSON.BSON_BINARY_SUBTYPE_DEFAULT,t.copy(e,r,0,o),r+=o},serializeObject=function(e,i,t,r,n,o,s,l,a,f){for(var _=0;_<f.length;_++)if(f[_]===t)throw new Error(\"cyclic dependency detected\");f.push(t),e[r++]=Array.isArray(t)?BSON.BSON_DATA_ARRAY:BSON.BSON_DATA_OBJECT,r+=a?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var B=serializeInto(e,t,n,r,o+1,s,l,f);return f.pop(),B},serializeDecimal128=function(e,i,t,r,n){return e[r++]=BSON.BSON_DATA_DECIMAL128,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,t.bytes.copy(e,r,0,16),r+16},serializeLong=function(e,i,t,r,n){e[r++]=\"Long\"===t._bsontype?BSON.BSON_DATA_LONG:BSON.BSON_DATA_TIMESTAMP,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var o=t.getLowBits(),s=t.getHighBits();return e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r},serializeInt32=function(e,i,t,r,n){return e[r++]=BSON.BSON_DATA_INT,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,e[r++]=255&t,e[r++]=t>>8&255,e[r++]=t>>16&255,e[r++]=t>>24&255,r},serializeDouble=function(e,i,t,r,n){return e[r++]=BSON.BSON_DATA_NUMBER,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,writeIEEE754(e,t,r,\"little\",52,8),r+=8},serializeFunction=function(e,i,t,r,n,o,s){e[r++]=BSON.BSON_DATA_CODE,r+=s?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var l=normalizedFunctionString(t),a=e.write(l,r+4,\"utf8\")+1;return e[r]=255&a,e[r+1]=a>>8&255,e[r+2]=a>>16&255,e[r+3]=a>>24&255,r=r+4+a-1,e[r++]=0,r},serializeCode=function(e,i,t,r,n,o,s,l,a){if(t.scope&&\"object\"==typeof t.scope){e[r++]=BSON.BSON_DATA_CODE_W_SCOPE;var f=a?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\");r+=f,e[r++]=0;var _=r,B=\"string\"==typeof t.code?t.code:t.code.toString();r+=4;var N=e.write(B,r+4,\"utf8\")+1;e[r]=255&N,e[r+1]=N>>8&255,e[r+2]=N>>16&255,e[r+3]=N>>24&255,e[r+4+N-1]=0,r=r+N+4;var u=serializeInto(e,t.scope,n,r,o+1,s,l);r=u-1;var O=u-_;e[_++]=255&O,e[_++]=O>>8&255,e[_++]=O>>16&255,e[_++]=O>>24&255,e[r++]=0}else{e[r++]=BSON.BSON_DATA_CODE,r+=f=a?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0,B=t.code.toString();var S=e.write(B,r+4,\"utf8\")+1;e[r]=255&S,e[r+1]=S>>8&255,e[r+2]=S>>16&255,e[r+3]=S>>24&255,r=r+4+S-1,e[r++]=0}return r},serializeBinary=function(e,i,t,r,n){e[r++]=BSON.BSON_DATA_BINARY,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var o=t.value(!0),s=t.position;return t.sub_type===Binary.SUBTYPE_BYTE_ARRAY&&(s+=4),e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,e[r++]=t.sub_type,t.sub_type===Binary.SUBTYPE_BYTE_ARRAY&&(s-=4,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255),o.copy(e,r,0,t.position),r+=t.position},serializeSymbol=function(e,i,t,r,n){e[r++]=BSON.BSON_DATA_SYMBOL,r+=n?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var o=e.write(t.value,r+4,\"utf8\")+1;return e[r]=255&o,e[r+1]=o>>8&255,e[r+2]=o>>16&255,e[r+3]=o>>24&255,r=r+4+o-1,e[r++]=0,r},serializeDBRef=function(e,i,t,r,n,o,s){e[r++]=BSON.BSON_DATA_OBJECT,r+=s?e.write(i,r,\"ascii\"):e.write(i,r,\"utf8\"),e[r++]=0;var l,a=r,f=(l=null!=t.db?serializeInto(e,{$ref:t.namespace,$id:t.oid,$db:t.db},!1,r,n+1,o):serializeInto(e,{$ref:t.namespace,$id:t.oid},!1,r,n+1,o))-a;return e[a++]=255&f,e[a++]=f>>8&255,e[a++]=f>>16&255,e[a++]=f>>24&255,l},serializeInto=function(e,i,t,r,n,o,s,l){r=r||0,(l=l||[]).push(i);var a=r+4;if(Array.isArray(i))for(var f=0;f<i.length;f++){var _=\"\"+f,B=i[f];if(B&&B.toBSON){if(\"function\"!=typeof B.toBSON)throw new Error(\"toBSON is not a function\");B=B.toBSON()}var N=typeof B;if(\"string\"===N)a=serializeString(e,_,B,a,!0);else if(\"number\"===N)a=serializeNumber(e,_,B,a,!0);else{if(\"bigint\"===N)throw new TypeError(\"Unsupported type BigInt, please use Decimal128\");if(\"boolean\"===N)a=serializeBoolean(e,_,B,a,!0);else if(B instanceof Date||isDate(B))a=serializeDate(e,_,B,a,!0);else if(void 0===B)a=serializeNull(e,_,B,a,!0);else if(null===B)a=serializeNull(e,_,B,a,!0);else if(\"ObjectID\"===B._bsontype||\"ObjectId\"===B._bsontype)a=serializeObjectId(e,_,B,a,!0);else if(Buffer.isBuffer(B))a=serializeBuffer(e,_,B,a,!0);else if(B instanceof RegExp||isRegExp(B))a=serializeRegExp(e,_,B,a,!0);else if(\"object\"===N&&null==B._bsontype)a=serializeObject(e,_,B,a,t,n,o,s,!0,l);else if(\"object\"===N&&\"Decimal128\"===B._bsontype)a=serializeDecimal128(e,_,B,a,!0);else if(\"Long\"===B._bsontype||\"Timestamp\"===B._bsontype)a=serializeLong(e,_,B,a,!0);else if(\"Double\"===B._bsontype)a=serializeDouble(e,_,B,a,!0);else if(\"function\"==typeof B&&o)a=serializeFunction(e,_,B,a,t,n,o,!0);else if(\"Code\"===B._bsontype)a=serializeCode(e,_,B,a,t,n,o,s,!0);else if(\"Binary\"===B._bsontype)a=serializeBinary(e,_,B,a,!0);else if(\"Symbol\"===B._bsontype)a=serializeSymbol(e,_,B,a,!0);else if(\"DBRef\"===B._bsontype)a=serializeDBRef(e,_,B,a,n,o,!0);else if(\"BSONRegExp\"===B._bsontype)a=serializeBSONRegExp(e,_,B,a,!0);else if(\"Int32\"===B._bsontype)a=serializeInt32(e,_,B,a,!0);else if(\"MinKey\"===B._bsontype||\"MaxKey\"===B._bsontype)a=serializeMinMax(e,_,B,a,!0);else if(void 0!==B._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+B._bsontype)}}else if(i instanceof Map)for(var u=i.entries(),O=!1;!O;){var S=u.next();if(!(O=S.done)){if(_=S.value[0],N=typeof(B=S.value[1]),\"string\"==typeof _&&-1===ignoreKeys.indexOf(_)){if(null!=_.match(regexp))throw Error(\"key \"+_+\" must not contain null bytes\");if(t){if(\"$\"===_[0])throw Error(\"key \"+_+\" must not start with '$'\");if(~_.indexOf(\".\"))throw Error(\"key \"+_+\" must not contain '.'\")}}if(\"string\"===N)a=serializeString(e,_,B,a);else if(\"number\"===N)a=serializeNumber(e,_,B,a);else{if(\"bigint\"===N)throw new TypeError(\"Unsupported type BigInt, please use Decimal128\");if(\"boolean\"===N)a=serializeBoolean(e,_,B,a);else if(B instanceof Date||isDate(B))a=serializeDate(e,_,B,a);else if(null===B||void 0===B&&!1===s)a=serializeNull(e,_,B,a);else if(\"ObjectID\"===B._bsontype||\"ObjectId\"===B._bsontype)a=serializeObjectId(e,_,B,a);else if(Buffer.isBuffer(B))a=serializeBuffer(e,_,B,a);else if(B instanceof RegExp||isRegExp(B))a=serializeRegExp(e,_,B,a);else if(\"object\"===N&&null==B._bsontype)a=serializeObject(e,_,B,a,t,n,o,s,!1,l);else if(\"object\"===N&&\"Decimal128\"===B._bsontype)a=serializeDecimal128(e,_,B,a);else if(\"Long\"===B._bsontype||\"Timestamp\"===B._bsontype)a=serializeLong(e,_,B,a);else if(\"Double\"===B._bsontype)a=serializeDouble(e,_,B,a);else if(\"Code\"===B._bsontype)a=serializeCode(e,_,B,a,t,n,o,s);else if(\"function\"==typeof B&&o)a=serializeFunction(e,_,B,a,t,n,o);else if(\"Binary\"===B._bsontype)a=serializeBinary(e,_,B,a);else if(\"Symbol\"===B._bsontype)a=serializeSymbol(e,_,B,a);else if(\"DBRef\"===B._bsontype)a=serializeDBRef(e,_,B,a,n,o);else if(\"BSONRegExp\"===B._bsontype)a=serializeBSONRegExp(e,_,B,a);else if(\"Int32\"===B._bsontype)a=serializeInt32(e,_,B,a);else if(\"MinKey\"===B._bsontype||\"MaxKey\"===B._bsontype)a=serializeMinMax(e,_,B,a);else if(void 0!==B._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+B._bsontype)}}}else{if(i.toBSON){if(\"function\"!=typeof i.toBSON)throw new Error(\"toBSON is not a function\");if(null!=(i=i.toBSON())&&\"object\"!=typeof i)throw new Error(\"toBSON function did not return an object\")}for(_ in i){if((B=i[_])&&B.toBSON){if(\"function\"!=typeof B.toBSON)throw new Error(\"toBSON is not a function\");B=B.toBSON()}if(N=typeof B,\"string\"==typeof _&&-1===ignoreKeys.indexOf(_)){if(null!=_.match(regexp))throw Error(\"key \"+_+\" must not contain null bytes\");if(t){if(\"$\"===_[0])throw Error(\"key \"+_+\" must not start with '$'\");if(~_.indexOf(\".\"))throw Error(\"key \"+_+\" must not contain '.'\")}}if(\"string\"===N)a=serializeString(e,_,B,a);else if(\"number\"===N)a=serializeNumber(e,_,B,a);else{if(\"bigint\"===N)throw new TypeError(\"Unsupported type BigInt, please use Decimal128\");if(\"boolean\"===N)a=serializeBoolean(e,_,B,a);else if(B instanceof Date||isDate(B))a=serializeDate(e,_,B,a);else if(void 0===B)!1===s&&(a=serializeNull(e,_,B,a));else if(null===B)a=serializeNull(e,_,B,a);else if(\"ObjectID\"===B._bsontype||\"ObjectId\"===B._bsontype)a=serializeObjectId(e,_,B,a);else if(Buffer.isBuffer(B))a=serializeBuffer(e,_,B,a);else if(B instanceof RegExp||isRegExp(B))a=serializeRegExp(e,_,B,a);else if(\"object\"===N&&null==B._bsontype)a=serializeObject(e,_,B,a,t,n,o,s,!1,l);else if(\"object\"===N&&\"Decimal128\"===B._bsontype)a=serializeDecimal128(e,_,B,a);else if(\"Long\"===B._bsontype||\"Timestamp\"===B._bsontype)a=serializeLong(e,_,B,a);else if(\"Double\"===B._bsontype)a=serializeDouble(e,_,B,a);else if(\"Code\"===B._bsontype)a=serializeCode(e,_,B,a,t,n,o,s);else if(\"function\"==typeof B&&o)a=serializeFunction(e,_,B,a,t,n,o);else if(\"Binary\"===B._bsontype)a=serializeBinary(e,_,B,a);else if(\"Symbol\"===B._bsontype)a=serializeSymbol(e,_,B,a);else if(\"DBRef\"===B._bsontype)a=serializeDBRef(e,_,B,a,n,o);else if(\"BSONRegExp\"===B._bsontype)a=serializeBSONRegExp(e,_,B,a);else if(\"Int32\"===B._bsontype)a=serializeInt32(e,_,B,a);else if(\"MinKey\"===B._bsontype||\"MaxKey\"===B._bsontype)a=serializeMinMax(e,_,B,a);else if(void 0!==B._bsontype)throw new TypeError(\"Unrecognized or invalid _bsontype: \"+B._bsontype)}}}l.pop(),e[a++]=0;var p=a-r;return e[r++]=255&p,e[r++]=p>>8&255,e[r++]=p>>16&255,e[r++]=p>>24&255,a},BSON={BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128,BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648};BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992,module.exports=serializeInto;","node_modules/bson/lib/bson/parser/calculate_size.js":"\"use strict\";var Long=require(\"../long\").Long,Double=require(\"../double\").Double,Timestamp=require(\"../timestamp\").Timestamp,ObjectID=require(\"../objectid\").ObjectID,Symbol=require(\"../symbol\").Symbol,BSONRegExp=require(\"../regexp\").BSONRegExp,Code=require(\"../code\").Code,Decimal128=require(\"../decimal128\"),MinKey=require(\"../min_key\").MinKey,MaxKey=require(\"../max_key\").MaxKey,DBRef=require(\"../db_ref\").DBRef,Binary=require(\"../binary\").Binary,normalizedFunctionString=require(\"./utils\").normalizedFunctionString,isDate=function(e){return\"object\"==typeof e&&\"[object Date]\"===Object.prototype.toString.call(e)},calculateObjectSize=function(e,t,n){var u=5;if(Array.isArray(e))for(var r=0;r<e.length;r++)u+=calculateElement(r.toString(),e[r],t,!0,n);else for(var f in e.toBSON&&(e=e.toBSON()),e)u+=calculateElement(f,e[f],t,!1,n);return u};function calculateElement(e,t,n,u,r){switch(t&&t.toBSON&&(t=t.toBSON()),typeof t){case\"string\":return 1+Buffer.byteLength(e,\"utf8\")+1+4+Buffer.byteLength(t,\"utf8\")+1;case\"number\":return Math.floor(t)===t&&t>=BSON.JS_INT_MIN&&t<=BSON.JS_INT_MAX&&t>=BSON.BSON_INT32_MIN&&t<=BSON.BSON_INT32_MAX?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+5:(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+9;case\"undefined\":return u||!r?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1:0;case\"boolean\":return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+2;case\"object\":if(null==t||t instanceof MinKey||t instanceof MaxKey||\"MinKey\"===t._bsontype||\"MaxKey\"===t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1;if(t instanceof ObjectID||\"ObjectID\"===t._bsontype||\"ObjectId\"===t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+13;if(t instanceof Date||isDate(t))return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+9;if(\"undefined\"!=typeof Buffer&&Buffer.isBuffer(t))return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+6+t.length;if(t instanceof Long||t instanceof Double||t instanceof Timestamp||\"Long\"===t._bsontype||\"Double\"===t._bsontype||\"Timestamp\"===t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+9;if(t instanceof Decimal128||\"Decimal128\"===t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+17;if(t instanceof Code||\"Code\"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer.byteLength(t.code.toString(),\"utf8\")+1+calculateObjectSize(t.scope,n,r):(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+Buffer.byteLength(t.code.toString(),\"utf8\")+1;if(t instanceof Binary||\"Binary\"===t._bsontype)return t.sub_type===Binary.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1);if(t instanceof Symbol||\"Symbol\"===t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+Buffer.byteLength(t.value,\"utf8\")+4+1+1;if(t instanceof DBRef||\"DBRef\"===t._bsontype){var f={$ref:t.namespace,$id:t.oid};return null!=t.db&&(f.$db=t.db),(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+calculateObjectSize(f,n,r)}return t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+Buffer.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof BSONRegExp||\"BSONRegExp\"===t._bsontype?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+Buffer.byteLength(t.pattern,\"utf8\")+1+Buffer.byteLength(t.options,\"utf8\")+1:(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+calculateObjectSize(t,n,r)+1;case\"function\":if(t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)||\"[object RegExp]\"===String.call(t))return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+Buffer.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer.byteLength(normalizedFunctionString(t),\"utf8\")+1+calculateObjectSize(t.scope,n,r);if(n)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+Buffer.byteLength(normalizedFunctionString(t),\"utf8\")+1}return 0}var BSON={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992};module.exports=calculateObjectSize;","node_modules/bson/lib/bson/parser/utils.js":"\"use strict\";function normalizedFunctionString(f){return f.toString().replace(/function *\\(/,\"function (\")}function newBuffer(f,n){return new Buffer(f,n)}function allocBuffer(){return Buffer.alloc.apply(Buffer,arguments)}function toBuffer(){return Buffer.from.apply(Buffer,arguments)}module.exports={normalizedFunctionString:normalizedFunctionString,allocBuffer:\"function\"==typeof Buffer.alloc?allocBuffer:newBuffer,toBuffer:\"function\"==typeof Buffer.from?toBuffer:newBuffer};","node_modules/bson/lib/bson/float_parser.js":"var readIEEE754=function(a,t,o,r,E){var h,M,e=\"big\"===o,w=8*E-r-1,i=(1<<w)-1,p=i>>1,f=-7,N=e?0:E-1,n=e?1:-1,s=a[t+N];for(N+=n,h=s&(1<<-f)-1,s>>=-f,f+=w;f>0;h=256*h+a[t+N],N+=n,f-=8);for(M=h&(1<<-f)-1,h>>=-f,f+=r;f>0;M=256*M+a[t+N],N+=n,f-=8);if(0===h)h=1-p;else{if(h===i)return M?NaN:1/0*(s?-1:1);M+=Math.pow(2,r),h-=p}return(s?-1:1)*M*Math.pow(2,h-r)},writeIEEE754=function(a,t,o,r,E,h){var M,e,w,i=\"big\"===r,p=8*h-E-1,f=(1<<p)-1,N=f>>1,n=23===E?Math.pow(2,-24)-Math.pow(2,-77):0,s=i?h-1:0,I=i?-1:1,u=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(e=isNaN(t)?1:0,M=f):(M=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-M))<1&&(M--,w*=2),(t+=M+N>=1?n/w:n*Math.pow(2,1-N))*w>=2&&(M++,w/=2),M+N>=f?(e=0,M=f):M+N>=1?(e=(t*w-1)*Math.pow(2,E),M+=N):(e=t*Math.pow(2,N-1)*Math.pow(2,E),M=0));E>=8;a[o+s]=255&e,s+=I,e/=256,E-=8);for(M=M<<E|e,p+=E;p>0;a[o+s]=255&M,s+=I,M/=256,p-=8);a[o+s-I]|=128*u};exports.readIEEE754=readIEEE754,exports.writeIEEE754=writeIEEE754;","node_modules/optional-require/dist/index.js":"\"use strict\";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.optionalRequireCwd=exports.optionalRequire=exports.makeOptionalRequire=exports.tryResolve=exports.tryRequire=exports.setDefaultLog=void 0;var assert_1=__importDefault(require(\"assert\")),require_at_1=__importDefault(require(\"require-at\")),xrequire=eval(\"require\"),pnpDependencyNameRegExp=/^(?![a-zA-Z]:[\\\\/]|\\\\\\\\|\\.{0,2}(?:\\/|$))((?:node:)?(?:@[^/]+\\/)?[^/]+)\\/*(.*|)$/;function getPnpDependencyName(e){var t=e.match(pnpDependencyNameRegExp);return t?t[1]:null}function findModuleNotFound(e,t){var r=e.message.split(\"\\n\")[0];if(!r)return!1;if(r.includes(\"'\"+t+\"'\"))return!0;var o=getPnpDependencyName(t);return!!o&&(r.includes(\" \"+o+\" \")||r.includes(\" \"+o+\". \")||r.includes(\" \"+o+\", \"))}function defaultLog(e,t){console.log(\"Just FYI: \"+e+'; Path \"'+t+'\"')}var __defaultLog=defaultLog;function setDefaultLog(e){__defaultLog=e}function _getOptions(e,t,r){if(void 0===t&&(t=xrequire),\"object\"==typeof e){var o=__assign({require:t,log:r},e);return(0,assert_1.default)(!(o.hasOwnProperty(\"notFound\")&&o.hasOwnProperty(\"default\")),\"optionalRequire: options set with both `notFound` and `default`\"),o}return{require:t,log:r,message:e}}function _optionalRequire(e,t){try{return t.resolve?t.require.resolve(e):t.require(e)}catch(n){if(\"MODULE_NOT_FOUND\"!==n.code||!findModuleNotFound(n,e)){if(\"function\"==typeof t.fail)return t.fail(n);throw n}if(t.message){var r=!0===t.message?\"\":t.message+\" - \",o=t.resolve?\"resolved\":\"found\";t.log(r+\"optional module not \"+o,e)}return\"function\"==typeof t.notFound?t.notFound(n):t.default}}function tryRequire(e,t,r){var o=_getOptions(r,e,__defaultLog);return o.resolve=!1,_optionalRequire(t,o)}function tryResolve(e,t,r){var o=_getOptions(r,e,__defaultLog);return o.resolve=!0,_optionalRequire(t,o)}function makeOptionalRequire(e,t){var r=function(t,o){return _optionalRequire(t,_getOptions(o,e,r.log))};return r.resolve=function(t,o){var n=_getOptions(o,e,r.log);return n.resolve=!0,_optionalRequire(t,n)},r.log=t||__defaultLog,r}exports.setDefaultLog=setDefaultLog,exports.tryRequire=tryRequire,exports.tryResolve=tryResolve,exports.makeOptionalRequire=makeOptionalRequire,exports.optionalRequire=makeOptionalRequire(xrequire),exports.optionalRequireCwd=makeOptionalRequire((0,require_at_1.default)(process.cwd()));","node_modules/require-at/require-at.js":"\"use strict\";const Path=require(\"path\"),Fs=require(\"fs\"),createRequireFromPath=require(\"./create-require\"),cache=new Map;function requireAt(e,r){const t=(a,i)=>{let c=requireAt.cache&&requireAt.cache.get(a);if(!c){let r;try{r=Fs.statSync(a)}catch(e){throw new Error(`require-at: stat '${a}' failed: ${e.message}`)}if(!r||!r.isDirectory()){if(i)throw new Error(`require-at: not a directory: '${e}'`);return t(Path.dirname(a),!0)}c=createRequireFromPath(Path.join(a,\"._require-at_\"),a),requireAt.cache&&requireAt.cache.set(a,c)}return r?c(r):c};return t(Path.resolve(e),!1)}requireAt.cache=cache,module.exports=requireAt;","node_modules/require-at/create-require.js":"\"use strict\";const Module=require(\"module\"),xrequire=eval(\"require\"),createRequireFromPath=Module.createRequire||Module.createRequireFromPath||((e,r)=>{const o=new Module(e);function u(e){return xrequire(t(e))}function t(e,r){return Module._resolveFilename(e,o,!1,r)}return o.filename=e,o.paths=Module._nodeModulePaths(r),u.resolve=t,t.paths=function(e){return Module._resolveLookupPaths(e,o,!0)},u.main=process.mainModule,u.extensions=Module._extensions,u.cache=Module._cache,u});module.exports=createRequireFromPath;","node_modules/mongodb/package.json":{"name":"mongodb","version":"3.6.8","description":"The official MongoDB driver for Node.js","main":"index.js","files":["index.js","lib"],"repository":{"type":"git","url":"git@github.com:mongodb/node-mongodb-native.git"},"keywords":["mongodb","driver","official"],"peerDependenciesMeta":{"kerberos":{"optional":true},"mongodb-client-encryption":{"optional":true},"mongodb-extjson":{"optional":true},"snappy":{"optional":true},"bson-ext":{"optional":true},"aws4":{"optional":true}},"dependencies":{"bl":"^2.2.1","bson":"^1.1.4","denque":"^1.4.1","optional-require":"^1.0.3","safe-buffer":"^5.1.2"},"devDependencies":{"@types/chai":"^4.2.16","@types/mocha":"^8.2.2","@types/node":"^14.14.37","array-includes":"^3.1.3","chai":"^4.1.1","chai-subset":"^1.6.0","chalk":"^2.4.2","co":"4.6.0","eslint":"^7.10.0","eslint-config-prettier":"^6.11.0","eslint-plugin-es":"^3.0.1","eslint-plugin-prettier":"^3.1.3","jsdoc":"^3.5.5","lodash.camelcase":"^4.3.0","mocha":"5.2.0","mocha-sinon":"^2.1.0","mongodb-extjson":"^2.1.1","mongodb-mock-server":"^1.0.1","nyc":"^15.1.0","object.entries":"^1.1.3","prettier":"^1.19.1","semver":"^5.5.0","sinon":"^4.3.0","sinon-chai":"^3.2.0","snappy":"^6.3.4","spec-xunit-file":"0.0.1-3","standard-version":"^9.2.0","tslib":"^2.2.0","typescript":"^4.2.4","util.promisify":"^1.0.1","worker-farm":"^1.5.0","wtfnode":"^0.8.0","yargs":"^14.2.0"},"license":"Apache-2.0","engines":{"node":">=4"},"bugs":{"url":"https://github.com/mongodb/node-mongodb-native/issues"},"scripts":{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:unified":"tsc -p test/functional/unified-spec-runner/tsconfig.unified.json","check:atlas":"mocha --opts '{}' ./test/manual/atlas_connectivity.test.js","check:bench":"node test/benchmarks/driverBench/","check:coverage":"nyc npm run check:test","check:kerberos":"mocha --opts '{}' -t 60000 test/manual/kerberos.test.js","check:ldap":"mocha --opts '{}' test/manual/ldap.test.js","check:lint":"eslint -v && eslint lib test","check:test":"mocha --recursive test/functional test/unit","check:tls":"mocha --opts '{}' test/manual/tls_support.test.js","format":"npm run check:lint -- --fix","release":"standard-version -i HISTORY.md","test":"npm run lint && mocha --recursive test/functional test/unit"},"homepage":"https://github.com/mongodb/node-mongodb-native","optionalDependencies":{"saslprep":"^1.0.0"}},"node_modules/mongodb/lib/core/connection/utils.js":"\"use strict\";const require_optional=require(\"optional-require\")(require);function debugOptions(n,e){const r={};return n.forEach(function(n){r[n]=e[n]}),r}function retrieveBSON(){const n=require(\"bson\");n.native=!1;const e=require_optional(\"bson-ext\");return e?(e.native=!0,e):n}function noSnappyWarning(){throw new Error(\"Attempted to use Snappy compression, but Snappy is not installed. Install or disable Snappy compression and try again.\")}function retrieveSnappy(){let n=require_optional(\"snappy\");return n||(n={compress:noSnappyWarning,uncompress:noSnappyWarning,compressSync:noSnappyWarning,uncompressSync:noSnappyWarning}),n}module.exports={debugOptions:debugOptions,retrieveBSON:retrieveBSON,retrieveSnappy:retrieveSnappy};","node_modules/mongodb/lib/core/wireprotocol/shared.js":"\"use strict\";const ReadPreference=require(\"../topologies/read_preference\"),MongoError=require(\"../error\").MongoError,ServerType=require(\"../sdam/common\").ServerType,TopologyDescription=require(\"../sdam/topology_description\").TopologyDescription,MESSAGE_HEADER_SIZE=16,COMPRESSION_DETAILS_SIZE=9;var opcodes={OP_REPLY:1,OP_UPDATE:2001,OP_INSERT:2002,OP_QUERY:2004,OP_GETMORE:2005,OP_DELETE:2006,OP_KILL_CURSORS:2007,OP_COMPRESSED:2012,OP_MSG:2013},getReadPreference=function(e,o){var r=e.readPreference||new ReadPreference(\"primary\");if(o.readPreference&&(r=o.readPreference),\"string\"==typeof r&&(r=new ReadPreference(r)),!(r instanceof ReadPreference))throw new MongoError(\"read preference must be a ReadPreference instance\");return r},parseHeader=function(e){return{length:e.readInt32LE(0),requestId:e.readInt32LE(4),responseTo:e.readInt32LE(8),opCode:e.readInt32LE(12)}};function applyCommonQueryOptions(e,o){return Object.assign(e,{raw:\"boolean\"==typeof o.raw&&o.raw,promoteLongs:\"boolean\"!=typeof o.promoteLongs||o.promoteLongs,promoteValues:\"boolean\"!=typeof o.promoteValues||o.promoteValues,promoteBuffers:\"boolean\"==typeof o.promoteBuffers&&o.promoteBuffers,monitoring:\"boolean\"==typeof o.monitoring&&o.monitoring,fullResult:\"boolean\"==typeof o.fullResult&&o.fullResult}),\"number\"==typeof o.socketTimeout&&(e.socketTimeout=o.socketTimeout),o.session&&(e.session=o.session),\"string\"==typeof o.documentsReturnedIn&&(e.documentsReturnedIn=o.documentsReturnedIn),e}function isSharded(e){if(\"mongos\"===e.type)return!0;if(e.description&&e.description.type===ServerType.Mongos)return!0;if(e.description&&e.description instanceof TopologyDescription){return Array.from(e.description.servers.values()).some(e=>e.type===ServerType.Mongos)}return!1}function databaseNamespace(e){return e.split(\".\")[0]}function collectionNamespace(e){return e.split(\".\").slice(1).join(\".\")}module.exports={getReadPreference:getReadPreference,MESSAGE_HEADER_SIZE:16,COMPRESSION_DETAILS_SIZE:9,opcodes:opcodes,parseHeader:parseHeader,applyCommonQueryOptions:applyCommonQueryOptions,isSharded:isSharded,databaseNamespace:databaseNamespace,collectionNamespace:collectionNamespace};","node_modules/mongodb/lib/core/wireprotocol/compression.js":"\"use strict\";const Snappy=require(\"../connection/utils\").retrieveSnappy(),zlib=require(\"zlib\"),compressorIDs={snappy:1,zlib:2},uncompressibleCommands=new Set([\"ismaster\",\"saslStart\",\"saslContinue\",\"getnonce\",\"authenticate\",\"createUser\",\"updateUser\",\"copydbSaslStart\",\"copydbgetnonce\",\"copydb\"]);function compress(e,s,o){switch(e.options.agreedCompressor){case\"snappy\":Snappy.compress(s,o);break;case\"zlib\":var r={};e.options.zlibCompressionLevel&&(r.level=e.options.zlibCompressionLevel),zlib.deflate(s,r,o);break;default:throw new Error('Attempt to compress message using unknown compressor \"'+e.options.agreedCompressor+'\".')}}function decompress(e,s,o){if(e<0||e>compressorIDs.length)throw new Error(\"Server sent message compressed using an unsupported compressor. (Received compressor ID \"+e+\")\");switch(e){case compressorIDs.snappy:Snappy.uncompress(s,o);break;case compressorIDs.zlib:zlib.inflate(s,o);break;default:o(null,s)}}module.exports={compressorIDs:compressorIDs,uncompressibleCommands:uncompressibleCommands,compress:compress,decompress:decompress};","node_modules/mongodb/lib/core/connection/msg.js":"\"use strict\";const Buffer=require(\"safe-buffer\").Buffer,opcodes=require(\"../wireprotocol/shared\").opcodes,databaseNamespace=require(\"../wireprotocol/shared\").databaseNamespace,ReadPreference=require(\"../topologies/read_preference\"),MongoError=require(\"../../core/error\").MongoError;let _requestId=0;const OPTS_CHECKSUM_PRESENT=1,OPTS_MORE_TO_COME=2,OPTS_EXHAUST_ALLOWED=65536;class Msg{constructor(e,s,o,t){if(null==o)throw new Error(\"query must be specified for query\");this.bson=e,this.ns=s,this.command=o,this.command.$db=databaseNamespace(s),t.readPreference&&t.readPreference.mode!==ReadPreference.PRIMARY&&(this.command.$readPreference=t.readPreference.toJSON()),this.options=t||{},this.requestId=t.requestId?t.requestId:Msg.getRequestId(),this.serializeFunctions=\"boolean\"==typeof t.serializeFunctions&&t.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof t.ignoreUndefined&&t.ignoreUndefined,this.checkKeys=\"boolean\"==typeof t.checkKeys&&t.checkKeys,this.maxBsonSize=t.maxBsonSize||16777216,this.checksumPresent=!1,this.moreToCome=t.moreToCome||!1,this.exhaustAllowed=\"boolean\"==typeof t.exhaustAllowed&&t.exhaustAllowed}toBin(){const e=[];let s=0;this.checksumPresent&&(s|=OPTS_CHECKSUM_PRESENT),this.moreToCome&&(s|=OPTS_MORE_TO_COME),this.exhaustAllowed&&(s|=OPTS_EXHAUST_ALLOWED);const o=Buffer.alloc(20);e.push(o);let t=o.length;const r=this.command;return t+=this.makeDocumentSegment(e,r),o.writeInt32LE(t,0),o.writeInt32LE(this.requestId,4),o.writeInt32LE(0,8),o.writeInt32LE(opcodes.OP_MSG,12),o.writeUInt32LE(s,16),e}makeDocumentSegment(e,s){const o=Buffer.alloc(1);o[0]=0;const t=this.serializeBson(s);return e.push(o),e.push(t),o.length+t.length}serializeBson(e){return this.bson.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}}Msg.getRequestId=function(){return _requestId=_requestId+1&2147483647};class BinMsg{constructor(e,s,o,t,r){r=r||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1},this.parsed=!1,this.raw=s,this.data=t,this.bson=e,this.opts=r,this.length=o.length,this.requestId=o.requestId,this.responseTo=o.responseTo,this.opCode=o.opCode,this.fromCompressed=o.fromCompressed,this.responseFlags=t.readInt32LE(0),this.checksumPresent=0!=(this.responseFlags&OPTS_CHECKSUM_PRESENT),this.moreToCome=0!=(this.responseFlags&OPTS_MORE_TO_COME),this.exhaustAllowed=0!=(this.responseFlags&OPTS_EXHAUST_ALLOWED),this.promoteLongs=\"boolean\"!=typeof r.promoteLongs||r.promoteLongs,this.promoteValues=\"boolean\"!=typeof r.promoteValues||r.promoteValues,this.promoteBuffers=\"boolean\"==typeof r.promoteBuffers&&r.promoteBuffers,this.documents=[]}isParsed(){return this.parsed}parse(e){if(this.parsed)return;e=e||{},this.index=4;const s=e.raw||!1,o=e.documentsReturnedIn||null,t={promoteLongs:\"boolean\"==typeof e.promoteLongs?e.promoteLongs:this.opts.promoteLongs,promoteValues:\"boolean\"==typeof e.promoteValues?e.promoteValues:this.opts.promoteValues,promoteBuffers:\"boolean\"==typeof e.promoteBuffers?e.promoteBuffers:this.opts.promoteBuffers};for(;this.index<this.data.length;){const e=this.data.readUInt8(this.index++);if(1===e)throw new MongoError(\"OP_MSG Payload Type 1 detected unsupported protocol\");if(0===e){const e=this.data.readUInt32LE(this.index),o=this.data.slice(this.index,this.index+e);this.documents.push(s?o:this.bson.deserialize(o,t)),this.index+=e}}if(1===this.documents.length&&null!=o&&s){const e={};e[o]=!0,t.fieldsAsRaw=e;const s=this.bson.deserialize(this.documents[0],t);this.documents=[s]}this.parsed=!0}}module.exports={Msg:Msg,BinMsg:BinMsg};","node_modules/safe-buffer/index.js":"var buffer=require(\"buffer\"),Buffer=buffer.Buffer;function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if(\"number\"==typeof f)throw new TypeError(\"Argument must not be a number\");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if(\"number\"!=typeof f)throw new TypeError(\"Argument must be a number\");var u=Buffer(f);return void 0!==r?\"string\"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if(\"number\"!=typeof f)throw new TypeError(\"Argument must be a number\");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if(\"number\"!=typeof f)throw new TypeError(\"Argument must be a number\");return buffer.SlowBuffer(f)};","node_modules/mongodb/lib/core/connection/command_result.js":"\"use strict\";var CommandResult=function(t,e,s){this.result=t,this.connection=e,this.message=s};CommandResult.prototype.toJSON=function(){let t=Object.assign({},this,this.result);return delete t.message,t},CommandResult.prototype.toString=function(){return JSON.stringify(this.toJSON())},module.exports=CommandResult;","node_modules/mongodb/lib/core/sdam/common.js":"\"use strict\";const STATE_CLOSING=\"closing\",STATE_CLOSED=\"closed\",STATE_CONNECTING=\"connecting\",STATE_CONNECTED=\"connected\",TopologyType={Single:\"Single\",ReplicaSetNoPrimary:\"ReplicaSetNoPrimary\",ReplicaSetWithPrimary:\"ReplicaSetWithPrimary\",Sharded:\"Sharded\",Unknown:\"Unknown\"},ServerType={Standalone:\"Standalone\",Mongos:\"Mongos\",PossiblePrimary:\"PossiblePrimary\",RSPrimary:\"RSPrimary\",RSSecondary:\"RSSecondary\",RSArbiter:\"RSArbiter\",RSOther:\"RSOther\",RSGhost:\"RSGhost\",Unknown:\"Unknown\"};function serverType(e){let r=e.s.description||e.s.serverDescription;return r.topologyType===TopologyType.Single?r.servers[0].type:r.type}const TOPOLOGY_DEFAULTS={useUnifiedTopology:!0,localThresholdMS:15,serverSelectionTimeoutMS:3e4,heartbeatFrequencyMS:1e4,minHeartbeatFrequencyMS:500};function drainTimerQueue(e){e.forEach(clearTimeout),e.clear()}function clearAndRemoveTimerFrom(e,r){return clearTimeout(e),r.delete(e)}module.exports={STATE_CLOSING:\"closing\",STATE_CLOSED:\"closed\",STATE_CONNECTING:\"connecting\",STATE_CONNECTED:\"connected\",TOPOLOGY_DEFAULTS:TOPOLOGY_DEFAULTS,TopologyType:TopologyType,ServerType:ServerType,serverType:serverType,drainTimerQueue:drainTimerQueue,clearAndRemoveTimerFrom:clearAndRemoveTimerFrom};","node_modules/mongodb/lib/core/sdam/topology_description.js":"\"use strict\";const ServerType=require(\"./common\").ServerType,ServerDescription=require(\"./server_description\").ServerDescription,WIRE_CONSTANTS=require(\"../wireprotocol/constants\"),TopologyType=require(\"./common\").TopologyType,MIN_SUPPORTED_SERVER_VERSION=WIRE_CONSTANTS.MIN_SUPPORTED_SERVER_VERSION,MAX_SUPPORTED_SERVER_VERSION=WIRE_CONSTANTS.MAX_SUPPORTED_SERVER_VERSION,MIN_SUPPORTED_WIRE_VERSION=WIRE_CONSTANTS.MIN_SUPPORTED_WIRE_VERSION,MAX_SUPPORTED_WIRE_VERSION=WIRE_CONSTANTS.MAX_SUPPORTED_WIRE_VERSION;class TopologyDescription{constructor(e,r,o,s,i,t,n){n=n||{},this.type=e||TopologyType.Unknown,this.setName=o||null,this.maxSetVersion=s||null,this.maxElectionId=i||null,this.servers=r||new Map,this.stale=!1,this.compatible=!0,this.compatibilityError=null,this.logicalSessionTimeoutMinutes=null,this.heartbeatFrequencyMS=n.heartbeatFrequencyMS||0,this.localThresholdMS=n.localThresholdMS||0,this.commonWireVersion=t||null,Object.defineProperty(this,\"options\",{value:n,enumberable:!1});for(const e of this.servers.values())if(e.type!==ServerType.Unknown&&(e.minWireVersion>MAX_SUPPORTED_WIRE_VERSION&&(this.compatible=!1,this.compatibilityError=`Server at ${e.address} requires wire version ${e.minWireVersion}, but this version of the driver only supports up to ${MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${MAX_SUPPORTED_SERVER_VERSION})`),e.maxWireVersion<MIN_SUPPORTED_WIRE_VERSION)){this.compatible=!1,this.compatibilityError=`Server at ${e.address} reports wire version ${e.maxWireVersion}, but this version of the driver requires at least ${MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${MIN_SUPPORTED_SERVER_VERSION}).`;break}this.logicalSessionTimeoutMinutes=null;for(const e of this.servers){const r=e[1];if(r.isReadable){if(null==r.logicalSessionTimeoutMinutes){this.logicalSessionTimeoutMinutes=null;break}if(null==this.logicalSessionTimeoutMinutes){this.logicalSessionTimeoutMinutes=r.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,r.logicalSessionTimeoutMinutes)}}}updateFromSrvPollingEvent(e){const r=e.addresses(),o=new Map(this.servers);for(const e of this.servers)r.has(e[0])?r.delete(e[0]):o.delete(e[0]);if(o.size===this.servers.size&&0===r.size)return this;for(const e of r)o.set(e,new ServerDescription(e));return new TopologyDescription(this.type,o,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,this.options,null)}update(e){const r=e.address;let o=this.type,s=this.setName,i=this.maxSetVersion,t=this.maxElectionId,n=this.commonWireVersion;e.setName&&s&&e.setName!==s&&(e=new ServerDescription(r,null));const a=e.type;let l=new Map(this.servers);if(0!==e.maxWireVersion&&(n=null==n?e.maxWireVersion:Math.min(n,e.maxWireVersion)),l.set(r,e),o===TopologyType.Single)return new TopologyDescription(TopologyType.Single,l,s,i,t,n,this.options);if(o===TopologyType.Unknown&&(a===ServerType.Standalone&&1!==this.servers.size?l.delete(r):o=topologyTypeForServerType(a)),o===TopologyType.Sharded&&-1===[ServerType.Mongos,ServerType.Unknown].indexOf(a)&&l.delete(r),o===TopologyType.ReplicaSetNoPrimary)if([ServerType.Standalone,ServerType.Mongos].indexOf(a)>=0&&l.delete(r),a===ServerType.RSPrimary){const r=updateRsFromPrimary(l,s,e,i,t);o=r[0],s=r[1],i=r[2],t=r[3]}else if([ServerType.RSSecondary,ServerType.RSArbiter,ServerType.RSOther].indexOf(a)>=0){const r=updateRsNoPrimaryFromMember(l,s,e);o=r[0],s=r[1]}if(o===TopologyType.ReplicaSetWithPrimary)if([ServerType.Standalone,ServerType.Mongos].indexOf(a)>=0)l.delete(r),o=checkHasPrimary(l);else if(a===ServerType.RSPrimary){const r=updateRsFromPrimary(l,s,e,i,t);o=r[0],s=r[1],i=r[2],t=r[3]}else o=[ServerType.RSSecondary,ServerType.RSArbiter,ServerType.RSOther].indexOf(a)>=0?updateRsWithPrimaryFromMember(l,s,e):checkHasPrimary(l);return new TopologyDescription(o,l,s,i,t,n,this.options)}get error(){const e=Array.from(this.servers.values()).filter(e=>e.error);if(e.length>0)return e[0].error}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}}function topologyTypeForServerType(e){return e===ServerType.Standalone?TopologyType.Single:e===ServerType.Mongos?TopologyType.Sharded:e===ServerType.RSPrimary?TopologyType.ReplicaSetWithPrimary:e===ServerType.RSGhost||e===ServerType.Unknown?TopologyType.Unknown:TopologyType.ReplicaSetNoPrimary}function compareObjectId(e,r){if(null==e)return-1;if(null==r)return 1;if(e.id instanceof Buffer&&r.id instanceof Buffer){const o=e.id,s=r.id;return o.compare(s)}const o=e.toString(),s=r.toString();return o.localeCompare(s)}function updateRsFromPrimary(e,r,o,s,i){if((r=r||o.setName)!==o.setName)return e.delete(o.address),[checkHasPrimary(e),r,s,i];const t=o.electionId?o.electionId:null;if(o.setVersion&&t){if(s&&i&&(s>o.setVersion||compareObjectId(i,t)>0))return e.set(o.address,new ServerDescription(o.address)),[checkHasPrimary(e),r,s,i];i=o.electionId}null!=o.setVersion&&(null==s||o.setVersion>s)&&(s=o.setVersion);for(const r of e.keys()){const s=e.get(r);if(s.type===ServerType.RSPrimary&&s.address!==o.address){e.set(r,new ServerDescription(s.address));break}}o.allHosts.forEach(r=>{e.has(r)||e.set(r,new ServerDescription(r))});const n=Array.from(e.keys()),a=o.allHosts;return n.filter(e=>-1===a.indexOf(e)).forEach(r=>{e.delete(r)}),[checkHasPrimary(e),r,s,i]}function updateRsWithPrimaryFromMember(e,r,o){if(null==r)throw new TypeError(\"setName is required\");return(r!==o.setName||o.me&&o.address!==o.me)&&e.delete(o.address),checkHasPrimary(e)}function updateRsNoPrimaryFromMember(e,r,o){let s=TopologyType.ReplicaSetNoPrimary;return(r=r||o.setName)!==o.setName?(e.delete(o.address),[s,r]):(o.allHosts.forEach(r=>{e.has(r)||e.set(r,new ServerDescription(r))}),o.me&&o.address!==o.me&&e.delete(o.address),[s,r])}function checkHasPrimary(e){for(const r of e.keys())if(e.get(r).type===ServerType.RSPrimary)return TopologyType.ReplicaSetWithPrimary;return TopologyType.ReplicaSetNoPrimary}module.exports={TopologyDescription:TopologyDescription};","node_modules/mongodb/lib/utils.js":"\"use strict\";const MongoError=require(\"./core/error\").MongoError,WriteConcern=require(\"./write_concern\");var shallowClone=function(e){var n={};for(var t in e)n[t]=e[t];return n},getSingleProperty=function(e,n,t){Object.defineProperty(e,n,{enumerable:!0,get:function(){return t}})},formatSortValue=exports.formatSortValue=function(e){switch((\"\"+e).toLowerCase()){case\"ascending\":case\"asc\":case\"1\":return 1;case\"descending\":case\"desc\":case\"-1\":return-1;default:throw new Error(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\")}},formattedOrderClause=exports.formattedOrderClause=function(e){var n=new Map;if(null==e)return null;if(Array.isArray(e)){if(0===e.length)return null;for(var t=0;t<e.length;t++)e[t].constructor===String?n.set(`${e[t]}`,1):n.set(`${e[t][0]}`,formatSortValue(e[t][1]))}else if(null!=e&&\"object\"==typeof e)if(e instanceof Map)n=e;else{var r=Object.keys(e);for(var o of r)n.set(o,e[o])}else{if(\"string\"!=typeof e)throw new Error(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\");n.set(`${e}`,1)}return n},checkCollectionName=function(e){if(\"string\"!=typeof e)throw new MongoError(\"collection name must be a String\");if(!e||-1!==e.indexOf(\"..\"))throw new MongoError(\"collection names cannot be empty\");if(-1!==e.indexOf(\"$\")&&null==e.match(/((^\\$cmd)|(oplog\\.\\$main))/))throw new MongoError(\"collection names must not contain '$'\");if(null!=e.match(/^\\.|\\.$/))throw new MongoError(\"collection names must not start or end with '.'\");if(-1!==e.indexOf(\"\\0\"))throw new MongoError(\"collection names cannot contain a null character\")},handleCallback=function(e,n,t,r){try{if(null==e)return;if(e)return r?e(n,t,r):e(n,t)}catch(n){return process.nextTick(function(){throw n}),!1}return!0},toError=function(e){if(e instanceof Error)return e;for(var n=e.err||e.errmsg||e.errMessage||e,t=MongoError.create({message:n,driver:!0}),r=\"object\"==typeof e?Object.keys(e):[],o=0;o<r.length;o++)try{t[r[o]]=e[r[o]]}catch(e){}return t},normalizeHintField=function(e){var n=null;if(\"string\"==typeof e)n=e;else if(Array.isArray(e))n={},e.forEach(function(e){n[e]=1});else if(null!=e&&\"object\"==typeof e)for(var t in n={},e)n[t]=e[t];return n},parseIndexOptions=function(e){var n,t={},r=[];return\"string\"==typeof e?(r.push(e+\"_1\"),t[e]=1):Array.isArray(e)?e.forEach(function(e){\"string\"==typeof e?(r.push(e+\"_1\"),t[e]=1):Array.isArray(e)?(r.push(e[0]+\"_\"+(e[1]||1)),t[e[0]]=e[1]||1):isObject(e)&&(n=Object.keys(e)).forEach(function(n){r.push(n+\"_\"+e[n]),t[n]=e[n]})}):isObject(e)&&(n=Object.keys(e)).forEach(function(n){r.push(n+\"_\"+e[n]),t[n]=e[n]}),{name:r.join(\"_\"),keys:n,fieldHash:t}},isObject=exports.isObject=function(e){return\"[object Object]\"===Object.prototype.toString.call(e)},debugOptions=function(e,n){var t={};return e.forEach(function(e){t[e]=n[e]}),t},decorateCommand=function(e,n,t){for(var r in n)-1===t.indexOf(r)&&(e[r]=n[r]);return e},mergeOptions=function(e,n){for(var t in n)e[t]=n[t];return e},translateOptions=function(e,n){var t={sslCA:\"ca\",sslCRL:\"crl\",sslValidate:\"rejectUnauthorized\",sslKey:\"key\",sslCert:\"cert\",sslPass:\"passphrase\",socketTimeoutMS:\"socketTimeout\",connectTimeoutMS:\"connectionTimeout\",replicaSet:\"setName\",rs_name:\"setName\",secondaryAcceptableLatencyMS:\"acceptableLatency\",connectWithNoPrimary:\"secondaryOnlyConnectionAllowed\",acceptableLatencyMS:\"localThresholdMS\"};for(var r in n)t[r]?e[t[r]]=n[r]:e[r]=n[r];return e},filterOptions=function(e,n){var t={};for(var r in e)-1!==n.indexOf(r)&&(t[r]=e[r]);return t};const WRITE_CONCERN_KEYS=[\"w\",\"j\",\"wtimeout\",\"fsync\",\"writeConcern\"];function conditionallyMergeWriteConcern(e,n){let t=!1;for(const n of WRITE_CONCERN_KEYS)if(n in e){t=!0;break}if(!t)for(const t of WRITE_CONCERN_KEYS)n[t]&&(\"writeConcern\"in e||(e.writeConcern={}),e.writeConcern[t]=n[t]);return e}const executeLegacyOperation=(e,n,t,r)=>{if(null==e)throw new TypeError(\"This method requires a valid topology instance\");if(!Array.isArray(t))throw new TypeError(\"This method requires an array of arguments to apply\");r=r||{};const o=e.s.promiseLibrary;let i,s,a,c=t[t.length-1];if(!r.skipSessions&&e.hasSessionSupport())if(null==(s=t[t.length-2])||null==s.session){a=Symbol(),i=e.startSession({owner:a});const n=t.length-2;t[n]=Object.assign({},t[n],{session:i})}else if(s.session&&s.session.hasEnded)throw new MongoError(\"Use of expired sessions is not permitted\");const l=(e,n)=>(function(t,o){if(i&&i.owner===a&&!r.returnsCursor)i.endSession(()=>{if(delete s.session,t)return n(t);e(o)});else{if(t)return n(t);e(o)}});if(\"function\"==typeof c){c=t.pop();const e=l(e=>c(null,e),e=>c(e,null));t.push(e);try{return n.apply(null,t)}catch(n){throw e(n),n}}if(null!=t[t.length-1])throw new TypeError(\"final argument to `executeLegacyOperation` must be a callback\");return new o(function(e,r){const o=l(e,r);t[t.length-1]=o;try{return n.apply(null,t)}catch(e){o(e)}})};function applyRetryableWrites(e,n){return n&&n.s.options.retryWrites&&(e.retryWrites=!0),e}function applyWriteConcern(e,n,t){t=t||{};const r=n.db,o=n.collection;if(t.session&&t.session.inTransaction())return e.writeConcern&&delete e.writeConcern,e;const i=WriteConcern.fromOptions(t);return i?Object.assign(e,{writeConcern:i}):o&&o.writeConcern?Object.assign(e,{writeConcern:Object.assign({},o.writeConcern)}):r&&r.writeConcern?Object.assign(e,{writeConcern:Object.assign({},r.writeConcern)}):e}function isPromiseLike(e){return e&&\"function\"==typeof e.then}function decorateWithCollation(e,n,t){const r=n.s&&n.s.topology||n.topology;if(!r)throw new TypeError('parameter \"target\" is missing a topology');const o=r.capabilities();if(t.collation&&\"object\"==typeof t.collation){if(!o||!o.commandsTakeCollation)throw new MongoError(\"Current topology does not support collation\");e.collation=t.collation}}function decorateWithReadConcern(e,n,t){if(t&&t.session&&t.session.inTransaction())return;let r=Object.assign({},e.readConcern||{});n.s.readConcern&&Object.assign(r,n.s.readConcern),Object.keys(r).length>0&&Object.assign(e,{readConcern:r})}function decorateWithExplain(e,n){return e.explain?e:{explain:e,verbosity:n.verbosity}}const nodejsMajorVersion=+process.version.split(\".\")[0].substring(1),emitProcessWarning=e=>nodejsMajorVersion<=6?process.emitWarning(e,\"DeprecationWarning\",MONGODB_WARNING_CODE):process.emitWarning(e,{type:\"DeprecationWarning\",code:MONGODB_WARNING_CODE}),emitConsoleWarning=e=>console.error(e),emitDeprecationWarning=process.emitWarning?emitProcessWarning:emitConsoleWarning;function defaultMsgHandler(e,n){return`${e} option [${n}] is deprecated and will be removed in a later version.`}function deprecateOptions(e,n){if(!0===process.noDeprecation)return n;const t=e.msgHandler?e.msgHandler:defaultMsgHandler,r=new Set;function o(){const o=arguments[e.optionsIndex];return isObject(o)&&0!==Object.keys(o).length?(e.deprecatedOptions.forEach(n=>{if(Object.prototype.hasOwnProperty.call(o,n)&&!r.has(n)){r.add(n);const o=t(e.name,n);if(emitDeprecationWarning(o),this&&this.getLogger){const e=this.getLogger();e&&e.warn(o)}}}),n.apply(this,arguments)):n.apply(this,arguments)}return Object.setPrototypeOf(o,n),n.prototype&&(o.prototype=n.prototype),o}const SUPPORTS={};try{require(\"./async/async_iterator\"),SUPPORTS.ASYNC_ITERATOR=!0}catch(e){SUPPORTS.ASYNC_ITERATOR=!1}class MongoDBNamespace{constructor(e,n){this.db=e,this.collection=n}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new MongoDBNamespace(this.db,e)}static fromString(e){if(!e)throw new Error(`Cannot parse namespace from \"${e}\"`);const n=e.indexOf(\".\");return new MongoDBNamespace(e.substring(0,n),e.substring(n+1))}}function*makeCounter(e){let n=e||0;for(;;){const e=n;n+=1,yield e}}function maybePromise(e,n,t){const r=e&&e.s&&e.s.promiseLibrary||Promise;let o;return\"function\"!=typeof n&&(o=new r((e,t)=>{n=((n,r)=>{if(n)return t(n);e(r)})})),t(function(e,t){if(null==e)n(e,t);else try{n(e)}catch(e){return process.nextTick(()=>{throw e})}}),o}function now(){const e=process.hrtime();return Math.floor(1e3*e[0]+e[1]/1e6)}function calculateDurationInMs(e){if(\"number\"!=typeof e)throw TypeError(\"numeric value required to calculate duration\");const n=now()-e;return n<0?0:n}function makeInterruptableAsyncInterval(e,n){let t,r,o,i=!1;const s=(n=n||{}).interval||1e3,a=n.minInterval||500,c=\"boolean\"==typeof n.immediate&&n.immediate,l=\"function\"==typeof n.clock?n.clock:now;function u(e){i||(clearTimeout(t),t=setTimeout(f,e||s))}function f(){o=0,r=l(),e(e=>{if(e)throw e;u(s)})}return c?f():(r=l(),u()),{wake:function(){const e=l(),n=e-o,t=s-(e-r);o=e,n<a||(t>a&&u(a),t<0&&f())},stop:function(){i=!0,t&&(clearTimeout(t),t=null),r=0,o=0}}}function hasAtomicOperators(e){return Array.isArray(e)?e.reduce((e,n)=>e||hasAtomicOperators(n),null):Object.keys(\"function\"!=typeof e.toBSON?e:e.toBSON()).map(e=>e[0]).indexOf(\"$\")>=0}const MONGODB_WARNING_CODE=\"MONGODB DRIVER\";function emitWarning(e){return process.emitWarning?nodejsMajorVersion<=6?process.emitWarning(e,void 0,MONGODB_WARNING_CODE):process.emitWarning(e,{code:MONGODB_WARNING_CODE}):console.error(`[${MONGODB_WARNING_CODE}] Warning:`,e)}const emittedWarnings=new Set;function emitWarningOnce(e){if(!emittedWarnings.has(e))return emittedWarnings.add(e),emitWarning(e)}module.exports={filterOptions:filterOptions,mergeOptions:mergeOptions,translateOptions:translateOptions,shallowClone:shallowClone,getSingleProperty:getSingleProperty,checkCollectionName:checkCollectionName,toError:toError,formattedOrderClause:formattedOrderClause,parseIndexOptions:parseIndexOptions,normalizeHintField:normalizeHintField,handleCallback:handleCallback,decorateCommand:decorateCommand,isObject:isObject,debugOptions:debugOptions,MAX_JS_INT:Number.MAX_SAFE_INTEGER+1,conditionallyMergeWriteConcern:conditionallyMergeWriteConcern,executeLegacyOperation:executeLegacyOperation,applyRetryableWrites:applyRetryableWrites,applyWriteConcern:applyWriteConcern,isPromiseLike:isPromiseLike,decorateWithCollation:decorateWithCollation,decorateWithReadConcern:decorateWithReadConcern,decorateWithExplain:decorateWithExplain,deprecateOptions:deprecateOptions,SUPPORTS:SUPPORTS,MongoDBNamespace:MongoDBNamespace,emitDeprecationWarning:emitDeprecationWarning,makeCounter:makeCounter,maybePromise:maybePromise,now:now,calculateDurationInMs:calculateDurationInMs,makeInterruptableAsyncInterval:makeInterruptableAsyncInterval,hasAtomicOperators:hasAtomicOperators,MONGODB_WARNING_CODE:MONGODB_WARNING_CODE,emitWarning:emitWarning,emitWarningOnce:emitWarningOnce};","node_modules/mongodb/lib/write_concern.js":"\"use strict\";const kWriteConcernKeys=new Set([\"w\",\"wtimeout\",\"j\",\"journal\",\"fsync\"]);let utils;class WriteConcern{constructor(n,e,t,r){null!=n&&(this.w=n),null!=e&&(this.wtimeout=e),null!=t&&(this.j=t),null!=r&&(this.fsync=r)}static fromOptions(n){if(null!=n&&(null!=n.writeConcern||null!=n.w||null!=n.wtimeout||null!=n.j||null!=n.journal||null!=n.fsync)){if(n.writeConcern){if(\"string\"==typeof n.writeConcern)return new WriteConcern(n.writeConcern);if(!Object.keys(n.writeConcern).some(n=>kWriteConcernKeys.has(n)))return;return new WriteConcern(n.writeConcern.w,n.writeConcern.wtimeout,n.writeConcern.j||n.writeConcern.journal,n.writeConcern.fsync)}return utils||(utils=require(\"./utils\")),utils.emitWarningOnce(\"Top-level use of w, wtimeout, j, and fsync is deprecated. Use writeConcern instead.\"),new WriteConcern(n.w,n.wtimeout,n.j||n.journal,n.fsync)}}}module.exports=WriteConcern;","node_modules/mongodb/lib/async/async_iterator.js":"\"use strict\";function asyncIterator(){const e=this;return{next:function(){return Promise.resolve().then(()=>e.next()).then(t=>t?{value:t,done:!1}:e.close().then(()=>({value:t,done:!0})))}}}exports.asyncIterator=asyncIterator;","node_modules/mongodb/lib/core/sdam/server_description.js":"\"use strict\";const arrayStrictEqual=require(\"../utils\").arrayStrictEqual,tagsStrictEqual=require(\"../utils\").tagsStrictEqual,errorStrictEqual=require(\"../utils\").errorStrictEqual,ServerType=require(\"./common\").ServerType,now=require(\"../../utils\").now,WRITABLE_SERVER_TYPES=new Set([ServerType.RSPrimary,ServerType.Standalone,ServerType.Mongos]),DATA_BEARING_SERVER_TYPES=new Set([ServerType.RSPrimary,ServerType.RSSecondary,ServerType.Mongos,ServerType.Standalone]),ISMASTER_FIELDS=[\"minWireVersion\",\"maxWireVersion\",\"maxBsonObjectSize\",\"maxMessageSizeBytes\",\"maxWriteBatchSize\",\"compression\",\"me\",\"hosts\",\"passives\",\"arbiters\",\"tags\",\"setName\",\"setVersion\",\"electionId\",\"primary\",\"logicalSessionTimeoutMinutes\",\"saslSupportedMechs\",\"__nodejs_mock_server__\",\"$clusterTime\"];class ServerDescription{constructor(e,r,s){s=s||{},r=Object.assign({minWireVersion:0,maxWireVersion:0,hosts:[],passives:[],arbiters:[],tags:[]},r),this.address=e,this.error=s.error,this.roundTripTime=s.roundTripTime||-1,this.lastUpdateTime=now(),this.lastWriteDate=r.lastWrite?r.lastWrite.lastWriteDate:null,this.opTime=r.lastWrite?r.lastWrite.opTime:null,this.type=parseServerType(r),this.topologyVersion=s.topologyVersion||r.topologyVersion,ISMASTER_FIELDS.forEach(e=>{void 0!==r[e]&&(this[e]=r[e])}),this.me&&(this.me=this.me.toLowerCase()),this.hosts=this.hosts.map(e=>e.toLowerCase()),this.passives=this.passives.map(e=>e.toLowerCase()),this.arbiters=this.arbiters.map(e=>e.toLowerCase())}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===ServerType.RSSecondary||this.isWritable}get isDataBearing(){return DATA_BEARING_SERVER_TYPES.has(this.type)}get isWritable(){return WRITABLE_SERVER_TYPES.has(this.type)}get host(){const e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){const e=this.address.split(\":\").pop();return e?Number.parseInt(e,10):e}equals(e){const r=this.topologyVersion===e.topologyVersion||0===compareTopologyVersion(this.topologyVersion,e.topologyVersion);return null!=e&&errorStrictEqual(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&this.me===e.me&&arrayStrictEqual(this.hosts,e.hosts)&&tagsStrictEqual(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&(this.electionId?e.electionId&&this.electionId.equals(e.electionId):this.electionId===e.electionId)&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}}function parseServerType(e){return e&&e.ok?e.isreplicaset?ServerType.RSGhost:e.msg&&\"isdbgrid\"===e.msg?ServerType.Mongos:e.setName?e.hidden?ServerType.RSOther:e.ismaster?ServerType.RSPrimary:e.secondary?ServerType.RSSecondary:e.arbiterOnly?ServerType.RSArbiter:ServerType.RSOther:ServerType.Standalone:ServerType.Unknown}function compareTopologyVersion(e,r){return null==e||null==r?-1:e.processId.equals(r.processId)?e.counter===r.counter?0:e.counter<r.counter?-1:1:-1}module.exports={ServerDescription:ServerDescription,parseServerType:parseServerType,compareTopologyVersion:compareTopologyVersion};","node_modules/mongodb/lib/core/wireprotocol/constants.js":"\"use strict\";const MIN_SUPPORTED_SERVER_VERSION=\"2.6\",MAX_SUPPORTED_SERVER_VERSION=\"4.4\",MIN_SUPPORTED_WIRE_VERSION=2,MAX_SUPPORTED_WIRE_VERSION=9;module.exports={MIN_SUPPORTED_SERVER_VERSION:\"2.6\",MAX_SUPPORTED_SERVER_VERSION:\"4.4\",MIN_SUPPORTED_WIRE_VERSION:2,MAX_SUPPORTED_WIRE_VERSION:9};","node_modules/mongodb/lib/core/connection/pool.js":"\"use strict\";const inherits=require(\"util\").inherits,EventEmitter=require(\"events\").EventEmitter,MongoError=require(\"../error\").MongoError,MongoTimeoutError=require(\"../error\").MongoTimeoutError,MongoWriteConcernError=require(\"../error\").MongoWriteConcernError,Logger=require(\"./logger\"),f=require(\"util\").format,Msg=require(\"./msg\").Msg,CommandResult=require(\"./command_result\"),MESSAGE_HEADER_SIZE=require(\"../wireprotocol/shared\").MESSAGE_HEADER_SIZE,COMPRESSION_DETAILS_SIZE=require(\"../wireprotocol/shared\").COMPRESSION_DETAILS_SIZE,opcodes=require(\"../wireprotocol/shared\").opcodes,compress=require(\"../wireprotocol/compression\").compress,compressorIDs=require(\"../wireprotocol/compression\").compressorIDs,uncompressibleCommands=require(\"../wireprotocol/compression\").uncompressibleCommands,apm=require(\"./apm\"),Buffer=require(\"safe-buffer\").Buffer,connect=require(\"./connect\"),updateSessionFromResponse=require(\"../sessions\").updateSessionFromResponse,eachAsync=require(\"../utils\").eachAsync,makeStateMachine=require(\"../utils\").makeStateMachine,now=require(\"../../utils\").now,DISCONNECTED=\"disconnected\",CONNECTING=\"connecting\",CONNECTED=\"connected\",DRAINING=\"draining\",DESTROYING=\"destroying\",DESTROYED=\"destroyed\",stateTransition=makeStateMachine({[DISCONNECTED]:[CONNECTING,DRAINING,DISCONNECTED],[CONNECTING]:[CONNECTING,CONNECTED,DRAINING,DISCONNECTED],[CONNECTED]:[CONNECTED,DISCONNECTED,DRAINING],[DRAINING]:[DRAINING,DESTROYING,DESTROYED],[DESTROYING]:[DESTROYING,DESTROYED],[DESTROYED]:[DESTROYED]}),CONNECTION_EVENTS=new Set([\"error\",\"close\",\"timeout\",\"parseError\",\"connect\",\"message\"]);var _id=0,Pool=function(e,n){if(EventEmitter.call(this),this.topology=e,this.s={state:DISCONNECTED,cancellationToken:new EventEmitter},this.s.cancellationToken.setMaxListeners(1/0),this.options=Object.assign({host:\"localhost\",port:27017,size:5,minSize:0,connectionTimeout:3e4,socketTimeout:0,keepAlive:!0,keepAliveInitialDelay:12e4,noDelay:!0,ssl:!1,checkServerIdentity:!0,ca:null,crl:null,cert:null,key:null,passphrase:null,rejectUnauthorized:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,reconnect:!0,reconnectInterval:1e3,reconnectTries:30,domainsEnabled:!1,legacyCompatMode:!0},n),this.id=_id++,this.retriesLeft=this.options.reconnectTries,this.reconnectId=null,this.reconnectError=null,!n.bson||n.bson&&(\"function\"!=typeof n.bson.serialize||\"function\"!=typeof n.bson.deserialize))throw new Error(\"must pass in valid bson parser\");this.logger=Logger(\"Pool\",n),this.availableConnections=[],this.inUseConnections=[],this.connectingConnections=0,this.executing=!1,this.queue=[],this.numberOfConsecutiveTimeouts=0,this.connectionIndex=0;const o=this;this._messageHandler=messageHandler(this),this._connectionCloseHandler=function(e){connectionFailureHandler(o,\"close\",e,this)},this._connectionErrorHandler=function(e){connectionFailureHandler(o,\"error\",e,this)},this._connectionTimeoutHandler=function(e){connectionFailureHandler(o,\"timeout\",e,this)},this._connectionParseErrorHandler=function(e){connectionFailureHandler(o,\"parseError\",e,this)}};function resetPoolState(e){e.inUseConnections=[],e.availableConnections=[],e.connectingConnections=0,e.executing=!1,e.numberOfConsecutiveTimeouts=0,e.connectionIndex=0,e.retriesLeft=e.options.reconnectTries,e.reconnectId=null}function connectionFailureHandler(e,n,o,t){if(t){if(t._connectionFailHandled)return;t._connectionFailHandled=!0,t.destroy(),removeConnection(e,t),t.flush(o)}if(\"timeout\"===n&&(e.numberOfConsecutiveTimeouts=e.numberOfConsecutiveTimeouts+1,e.numberOfConsecutiveTimeouts>e.options.reconnectTries))return e.numberOfConsecutiveTimeouts=0,e.destroy(!0),e.emit(\"close\",e);0===e.socketCount()&&(e.state!==DESTROYED&&e.state!==DESTROYING&&e.state!==DRAINING&&e.options.reconnect&&stateTransition(e,DISCONNECTED),n=\"error\"===n?\"close\":n,e.emit(n,o)),!e.reconnectId&&e.options.reconnect&&(e.reconnectError=o,e.reconnectId=setTimeout(attemptReconnect(e),e.options.reconnectInterval)),totalConnectionCount(e)<e.minSize&&createConnection(e)}function attemptReconnect(e,n){return function(){if(e.emit(\"attemptReconnect\",e),e.state!==DESTROYED&&e.state!==DESTROYING){if(e.retriesLeft=e.retriesLeft-1,e.retriesLeft<=0){e.destroy();const o=new MongoTimeoutError(`failed to reconnect after ${e.options.reconnectTries} attempts with interval ${e.options.reconnectInterval} ms`,e.reconnectError);return e.emit(\"reconnectFailed\",o),void(\"function\"==typeof n&&n(o))}e.reconnectId=null,createConnection(e,(o,t)=>{null==o&&(e.reconnectId=null,e.retriesLeft=e.options.reconnectTries,e.emit(\"reconnect\",e)),\"function\"==typeof n&&n(o,t)})}else\"function\"==typeof n&&n(new MongoError(\"Cannot create connection when pool is destroyed\"))}}function moveConnectionBetween(e,n,o){var t=n.indexOf(e);-1!==t&&(n.splice(t,1),o.push(e))}function messageHandler(e){return function(n,o){for(var t=null,i=0;i<o.workItems.length;i++)o.workItems[i].requestId===n.responseTo&&(t=o.workItems[i],o.workItems.splice(i,1));function r(e,n,o,t){if(!e.options.domainsEnabled)return process.nextTick(function(){return n(o,t)});n(o,t)}if(t&&t.monitoring&&moveConnectionBetween(o,e.inUseConnections,e.availableConnections),e.numberOfConsecutiveTimeouts=0,t&&t.socketTimeout&&o.resetSocketTimeout(),e.logger.isDebug()&&e.logger.debug(f(\"message [%s] received from %s:%s\",n.raw.toString(\"hex\"),e.options.host,e.options.port)),e.executing||process.nextTick(function(){_execute(e)()}),t&&!t.immediateRelease){try{n.parse(t)}catch(n){return r(e,t.cb,new MongoError(n))}if(n.documents[0]){const o=n.documents[0],i=t.session;i&&updateSessionFromResponse(i,o),e.topology&&o.$clusterTime&&(e.topology.clusterTime=o.$clusterTime)}if(t.command&&n.documents[0]){const o=n.documents[0];if(o.writeConcernError){const n=new MongoWriteConcernError(o.writeConcernError,o);return r(e,t.cb,n)}if(0===o.ok||o.$err||o.errmsg||o.code)return r(e,t.cb,new MongoError(o))}n.hashedName=o.hashedName,r(e,t.cb,null,new CommandResult(t.fullResult?n:n.documents[0],o,n))}}}function totalConnectionCount(e){return e.availableConnections.length+e.inUseConnections.length+e.connectingConnections}function destroy(e,n,o,t){stateTransition(e,DESTROYING),e.s.cancellationToken.emit(\"cancel\"),eachAsync(n,(e,n)=>{for(const n of CONNECTION_EVENTS)e.removeAllListeners(n);e.on(\"error\",()=>{}),e.destroy(o,n)},n=>{n?\"function\"==typeof t&&t(n,null):(resetPoolState(e),e.queue=[],stateTransition(e,DESTROYED),\"function\"==typeof t&&t(null,null))})}function serializeCommand(e,n,o){const t=n.toBin();if(!!!e.options.agreedCompressor||!canCompress(n))return o(null,t);const i=Buffer.concat(t),r=i.slice(MESSAGE_HEADER_SIZE),s=i.readInt32LE(12);compress(e,r,function(t,i){if(t)return o(t,null);const c=Buffer.alloc(MESSAGE_HEADER_SIZE);c.writeInt32LE(MESSAGE_HEADER_SIZE+COMPRESSION_DETAILS_SIZE+i.length,0),c.writeInt32LE(n.requestId,4),c.writeInt32LE(0,8),c.writeInt32LE(opcodes.OP_COMPRESSED,12);const a=Buffer.alloc(COMPRESSION_DETAILS_SIZE);return a.writeInt32LE(s,0),a.writeInt32LE(r.length,4),a.writeUInt8(compressorIDs[e.options.agreedCompressor],8),o(null,[c,a,i])})}function canCompress(e){const n=e instanceof Msg?e.command:e.query,o=Object.keys(n)[0];return!uncompressibleCommands.has(o)}function remove(e,n){for(var o=0;o<n.length;o++)if(n[o]===e)return n.splice(o,1),!0}function removeConnection(e,n){remove(n,e.availableConnections)||remove(n,e.inUseConnections)}function createConnection(e,n){e.state!==DESTROYED&&e.state!==DESTROYING?(e.connectingConnections++,connect(e.options,e.s.cancellationToken,(o,t)=>(e.connectingConnections--,o?(e.logger.isDebug()&&e.logger.debug(`connection attempt failed with error [${JSON.stringify(o)}]`),!e.reconnectId&&e.options.reconnect?e.state===CONNECTING&&e.options.legacyCompatMode?void n(o):(e.reconnectError=o,void(e.reconnectId=setTimeout(attemptReconnect(e,n),e.options.reconnectInterval))):void(\"function\"==typeof n&&n(o))):e.state===DESTROYED||e.state===DESTROYING?(\"function\"==typeof n&&n(new MongoError(\"Pool was destroyed after connection creation\")),void t.destroy()):(t.on(\"error\",e._connectionErrorHandler),t.on(\"close\",e._connectionCloseHandler),t.on(\"timeout\",e._connectionTimeoutHandler),t.on(\"parseError\",e._connectionParseErrorHandler),t.on(\"message\",e._messageHandler),e.availableConnections.push(t),\"function\"==typeof n&&n(null,t),void _execute(e)())))):\"function\"==typeof n&&n(new MongoError(\"Cannot create connection when pool is destroyed\"))}function flushMonitoringOperations(e){for(var n=0;n<e.length;n++)if(e[n].monitoring){var o=e[n];e.splice(n,1),o.cb(new MongoError({message:\"no connection available for monitoring\",driver:!0}))}}function _execute(e){return function(){if(e.state!==DESTROYED&&!e.executing)if(e.executing=!0,e.connectingConnections>0)e.executing=!1;else{for(;;){const s=totalConnectionCount(e);if(0===e.availableConnections.length){flushMonitoringOperations(e.queue),s<e.options.size&&e.queue.length>0&&createConnection(e);break}if(0===e.queue.length)break;var n=null;const c=e.availableConnections.filter(e=>0===e.workItems.length);if(!(n=0===c.length?e.availableConnections[e.connectionIndex++%e.availableConnections.length]:c[e.connectionIndex++%c.length]).isConnected()){removeConnection(e,n),flushMonitoringOperations(e.queue);break}var o=e.queue.shift();if(o.monitoring){var t=!1;for(let o=0;o<e.availableConnections.length;o++)if(e.availableConnections[o].isConnected()&&0===e.availableConnections[o].workItems.length){t=!0,n=e.availableConnections[o];break}if(!t){e.queue.unshift(o),s<e.options.size&&e.queue.length>0&&createConnection(e),setTimeout(()=>_execute(e)(),10);break}}if(s<e.options.size&&n.workItems.length>0){e.queue.unshift(o),createConnection(e);break}var i=o.buffer;o.monitoring&&moveConnectionBetween(n,e.availableConnections,e.inUseConnections),o.noResponse||n.workItems.push(o),o.immediateRelease||\"number\"!=typeof o.socketTimeout||n.setSocketTimeout(o.socketTimeout);var r=!0;if(Array.isArray(i))for(let e=0;e<i.length;e++)r=n.write(i[e]);else r=n.write(i);if(o.noResponse&&\"function\"==typeof o.cb&&o.cb(null,null),!1===r){e.queue.unshift(o),removeConnection(e,n),flushMonitoringOperations(e.queue);break}}e.executing=!1}}}inherits(Pool,EventEmitter),Object.defineProperty(Pool.prototype,\"size\",{enumerable:!0,get:function(){return this.options.size}}),Object.defineProperty(Pool.prototype,\"minSize\",{enumerable:!0,get:function(){return this.options.minSize}}),Object.defineProperty(Pool.prototype,\"connectionTimeout\",{enumerable:!0,get:function(){return this.options.connectionTimeout}}),Object.defineProperty(Pool.prototype,\"socketTimeout\",{enumerable:!0,get:function(){return this.options.socketTimeout}}),Object.defineProperty(Pool.prototype,\"state\",{enumerable:!0,get:function(){return this.s.state}}),Pool.prototype.socketCount=function(){return this.availableConnections.length+this.inUseConnections.length},Pool.prototype.allConnections=function(){return this.availableConnections.concat(this.inUseConnections)},Pool.prototype.get=function(){return this.allConnections()[0]},Pool.prototype.isConnected=function(){if(this.state===DESTROYED||this.state===DESTROYING)return!1;for(var e=this.availableConnections.concat(this.inUseConnections),n=0;n<e.length;n++)if(e[n].isConnected())return!0;return!1},Pool.prototype.isDestroyed=function(){return this.state===DESTROYED||this.state===DESTROYING},Pool.prototype.isDisconnected=function(){return this.state===DISCONNECTED},Pool.prototype.connect=function(e){if(this.state!==DISCONNECTED)throw new MongoError(\"connection in unlawful state \"+this.state);stateTransition(this,CONNECTING),createConnection(this,(n,o)=>{if(n)return\"function\"==typeof e?(this.destroy(),void e(n)):(this.state===CONNECTING&&this.emit(\"error\",n),void this.destroy());if(stateTransition(this,CONNECTED),this.minSize)for(let e=0;e<this.minSize;e++)createConnection(this);\"function\"==typeof e?e(null,o):this.emit(\"connect\",this,o)})},Pool.prototype.auth=function(e,n){\"function\"==typeof n&&n(null,null)},Pool.prototype.logout=function(e,n){\"function\"==typeof n&&n(null,null)},Pool.prototype.unref=function(){this.availableConnections.concat(this.inUseConnections).forEach(function(e){e.unref()})},Pool.prototype.destroy=function(e,n){var o=this;if(\"function\"==typeof e&&(n=e,e=!1),this.state!==DESTROYED&&o.state!==DESTROYING){if(stateTransition(this,DRAINING),e){for(var t=o.availableConnections.concat(o.inUseConnections);o.queue.length>0;){var i=o.queue.shift();\"function\"==typeof i.cb&&i.cb(new MongoError(\"Pool was force destroyed\"))}return destroy(o,t,{force:!0},n)}this.reconnectId&&clearTimeout(this.reconnectId),function e(){if(o.state!==DESTROYED&&o.state!==DESTROYING)if(flushMonitoringOperations(o.queue),0===o.queue.length){for(var t=o.availableConnections.concat(o.inUseConnections),i=0;i<t.length;i++)if(t[i].workItems.length>0)return setTimeout(e,1);destroy(o,t,{force:!1},n)}else _execute(o)(),setTimeout(e,1);else\"function\"==typeof n&&n()}()}else\"function\"==typeof n&&n(null,null)},Pool.prototype.reset=function(e){if(this.s.state!==CONNECTED)return void(\"function\"==typeof e&&e(new MongoError(\"pool is not connected, reset aborted\")));this.s.cancellationToken.emit(\"cancel\");const n=this.availableConnections.concat(this.inUseConnections);eachAsync(n,(e,n)=>{for(const n of CONNECTION_EVENTS)e.removeAllListeners(n);e.destroy({force:!0},n)},n=>{n&&\"function\"==typeof e?e(n,null):(resetPoolState(this),createConnection(this,()=>{\"function\"==typeof e&&e(null,null)}))})},Pool.prototype.write=function(e,n,o){var t=this;if(\"function\"==typeof n&&(o=n),n=n||{},\"function\"!=typeof o&&!n.noResponse)throw new MongoError(\"write method must provide a callback\");if(this.state!==DESTROYED&&this.state!==DESTROYING)if(this.state!==DRAINING){if(this.options.domainsEnabled&&process.domain&&\"function\"==typeof o){var i=o;o=process.domain.bind(function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;n++)e[n]=arguments[n];process.nextTick(function(){i.apply(null,e)})})}var r={cb:o,raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,fullResult:!1};r.promoteLongs=\"boolean\"!=typeof n.promoteLongs||n.promoteLongs,r.promoteValues=\"boolean\"!=typeof n.promoteValues||n.promoteValues,r.promoteBuffers=\"boolean\"==typeof n.promoteBuffers&&n.promoteBuffers,r.raw=\"boolean\"==typeof n.raw&&n.raw,r.immediateRelease=\"boolean\"==typeof n.immediateRelease&&n.immediateRelease,r.documentsReturnedIn=n.documentsReturnedIn,r.command=\"boolean\"==typeof n.command&&n.command,r.fullResult=\"boolean\"==typeof n.fullResult&&n.fullResult,r.noResponse=\"boolean\"==typeof n.noResponse&&n.noResponse,r.session=n.session||null,r.socketTimeout=n.socketTimeout,r.monitoring=n.monitoring,r.requestId=e.requestId,t.options.monitorCommands&&(this.emit(\"commandStarted\",new apm.CommandStartedEvent(this,e)),r.started=now(),r.cb=((n,i)=>{n?t.emit(\"commandFailed\",new apm.CommandFailedEvent(this,e,n,r.started)):i&&i.result&&(0===i.result.ok||i.result.$err)?t.emit(\"commandFailed\",new apm.CommandFailedEvent(this,e,i.result,r.started)):t.emit(\"commandSucceeded\",new apm.CommandSucceededEvent(this,e,i,r.started)),\"function\"==typeof o&&o(n,i)})),serializeCommand(t,e,(e,o)=>{if(e)throw e;r.buffer=o,n.monitoring?t.queue.unshift(r):t.queue.push(r),t.executing||process.nextTick(function(){_execute(t)()})})}else o(new MongoError(\"pool is draining, new operations prohibited\"));else o(new MongoError(\"pool destroyed\"))},Pool._execute=_execute,module.exports=Pool;","node_modules/mongodb/lib/core/wireprotocol/index.js":"\"use strict\";const writeCommand=require(\"./write_command\");module.exports={insert:function(e,r,t,o,i){writeCommand(e,\"insert\",\"documents\",r,t,o,i)},update:function(e,r,t,o,i){writeCommand(e,\"update\",\"updates\",r,t,o,i)},remove:function(e,r,t,o,i){writeCommand(e,\"delete\",\"deletes\",r,t,o,i)},killCursors:require(\"./kill_cursors\"),getMore:require(\"./get_more\"),query:require(\"./query\"),command:require(\"./command\")};","node_modules/mongodb/lib/core/topologies/shared.js":"\"use strict\";const ReadPreference=require(\"./read_preference\"),TopologyType=require(\"../sdam/common\").TopologyType,MongoError=require(\"../error\").MongoError,isRetryableWriteError=require(\"../error\").isRetryableWriteError,maxWireVersion=require(\"../utils\").maxWireVersion,MongoNetworkError=require(\"../error\").MongoNetworkError,MMAPv1_RETRY_WRITES_ERROR_CODE=20;function emitSDAMEvent(e,r,o){e.listeners(r).length>0&&e.emit(r,o)}function createCompressionInfo(e){return e.compression&&e.compression.compressors?(e.compression.compressors.forEach(function(e){if(\"snappy\"!==e&&\"zlib\"!==e)throw new Error(\"compressors must be at least one of snappy or zlib\")}),e.compression.compressors):[]}function clone(e){return JSON.parse(JSON.stringify(e))}var getPreviousDescription=function(e){return e.s.serverDescription||(e.s.serverDescription={address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}),e.s.serverDescription},emitServerDescriptionChanged=function(e,r){e.listeners(\"serverDescriptionChanged\").length>0&&(e.emit(\"serverDescriptionChanged\",{topologyId:-1!==e.s.topologyId?e.s.topologyId:e.id,address:e.name,previousDescription:getPreviousDescription(e),newDescription:r}),e.s.serverDescription=r)},getPreviousTopologyDescription=function(e){return e.s.topologyDescription||(e.s.topologyDescription={topologyType:\"Unknown\",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}]}),e.s.topologyDescription},emitTopologyDescriptionChanged=function(e,r){e.listeners(\"topologyDescriptionChanged\").length>0&&(e.emit(\"topologyDescriptionChanged\",{topologyId:-1!==e.s.topologyId?e.s.topologyId:e.id,address:e.name,previousDescription:getPreviousTopologyDescription(e),newDescription:r}),e.s.serverDescription=r)},changedIsMaster=function(e,r,o){var s=getTopologyType(e,r);return getTopologyType(e,o)!==s},getTopologyType=function(e,r){return r||(r=e.ismaster),r?r.ismaster&&\"isdbgrid\"===r.msg?\"Mongos\":r.ismaster&&!r.hosts?\"Standalone\":r.ismaster?\"RSPrimary\":r.secondary?\"RSSecondary\":r.arbiterOnly?\"RSArbiter\":\"Unknown\":\"Unknown\"},inquireServerState=function(e){return function(r){if(\"destroyed\"!==e.s.state){var o=(new Date).getTime();emitSDAMEvent(e,\"serverHeartbeatStarted\",{connectionId:e.name}),e.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0},function(s,t){if(s)emitSDAMEvent(e,\"serverHeartbeatFailed\",{durationMS:n,failure:s,connectionId:e.name});else{e.emit(\"ismaster\",t,e);var n=(new Date).getTime()-o;emitSDAMEvent(e,\"serverHeartbeatSucceeded\",{durationMS:n,reply:t.result,connectionId:e.name}),changedIsMaster(e,e.s.ismaster,t.result)&&emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:e.s.inTopology?getTopologyType(e):\"Standalone\"}),e.s.ismaster=t.result,e.s.isMasterLatencyMS=n}if(\"function\"==typeof r)return r(s,t);e.s.inquireServerStateTimeout=setTimeout(inquireServerState(e),e.s.haInterval)})}}},cloneOptions=function(e){var r={};for(var o in e)r[o]=e[o];return r};function Interval(e,r){var o=!1;this.start=function(){return this.isRunning()||(o=setInterval(e,r)),this},this.stop=function(){return clearInterval(o),o=!1,this},this.isRunning=function(){return!1!==o}}function Timeout(e,r){var o=!1,s=()=>{o&&(clearTimeout(o),o=!1,e())};this.start=function(){return this.isRunning()||(o=setTimeout(s,r)),this},this.stop=function(){return clearTimeout(o),o=!1,this},this.isRunning=function(){return!1!==o}}function diff(e,r){var o={servers:[]};e||(e={servers:[]});for(var s=0;s<e.servers.length;s++){for(var t=!1,n=0;n<r.servers.length;n++)if(r.servers[n].address.toLowerCase()===e.servers[s].address.toLowerCase()){t=!0;break}t||o.servers.push({address:e.servers[s].address,from:e.servers[s].type,to:\"Unknown\"})}for(n=0;n<r.servers.length;n++){for(t=!1,s=0;s<e.servers.length;s++)if(e.servers[s].address.toLowerCase()===r.servers[n].address.toLowerCase()){t=!0;break}t||o.servers.push({address:r.servers[n].address,from:\"Unknown\",to:r.servers[n].type})}for(s=0;s<e.servers.length;s++){var i=e.servers[s];for(n=0;n<r.servers.length;n++){var a=r.servers[n];i.address.toLowerCase()===a.address.toLowerCase()&&i.type!==a.type&&o.servers.push({address:i.address,from:i.type,to:a.type})}}return o}function resolveClusterTime(e,r){null==e.clusterTime?e.clusterTime=r:r.clusterTime.greaterThan(e.clusterTime.clusterTime)&&(e.clusterTime=r)}const SessionMixins={endSessions:function(e,r){Array.isArray(e)||(e=[e]),this.command(\"admin.$cmd\",{endSessions:e},{readPreference:ReadPreference.primaryPreferred},()=>{\"function\"==typeof r&&r()})}};function topologyType(e){return e.description?e.description.type:\"mongos\"===e.type?TopologyType.Sharded:\"replset\"===e.type?TopologyType.ReplicaSetWithPrimary:TopologyType.Single}const RETRYABLE_WIRE_VERSION=6,isRetryableWritesSupported=function(e){return!(e.lastIsMaster().maxWireVersion<6)&&(!!e.logicalSessionTimeoutMinutes&&topologyType(e)!==TopologyType.Single)},MMAPv1_RETRY_WRITES_ERROR_MESSAGE=\"This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.\";function getMMAPError(e){if(e.code!==MMAPv1_RETRY_WRITES_ERROR_CODE||!e.errmsg.includes(\"Transaction numbers\"))return e;return new MongoError({message:MMAPv1_RETRY_WRITES_ERROR_MESSAGE,errmsg:MMAPv1_RETRY_WRITES_ERROR_MESSAGE,originalError:e})}function legacyIsRetryableWriteError(e,r){return e instanceof MongoError&&(isRetryableWritesSupported(r)&&(e instanceof MongoNetworkError||maxWireVersion(r)<9&&isRetryableWriteError(e))&&e.addErrorLabel(\"RetryableWriteError\"),e.hasErrorLabel(\"RetryableWriteError\"))}module.exports={SessionMixins:SessionMixins,resolveClusterTime:resolveClusterTime,inquireServerState:inquireServerState,getTopologyType:getTopologyType,emitServerDescriptionChanged:emitServerDescriptionChanged,emitTopologyDescriptionChanged:emitTopologyDescriptionChanged,cloneOptions:cloneOptions,createCompressionInfo:createCompressionInfo,clone:clone,diff:diff,Interval:Interval,Timeout:Timeout,isRetryableWritesSupported:isRetryableWritesSupported,getMMAPError:getMMAPError,topologyType:topologyType,legacyIsRetryableWriteError:legacyIsRetryableWriteError};","node_modules/mongodb/lib/core/connection/apm.js":"\"use strict\";const Msg=require(\"../connection/msg\").Msg,KillCursor=require(\"../connection/commands\").KillCursor,GetMore=require(\"../connection/commands\").GetMore,calculateDurationInMs=require(\"../../utils\").calculateDurationInMs,SENSITIVE_COMMANDS=new Set([\"authenticate\",\"saslStart\",\"saslContinue\",\"getnonce\",\"createUser\",\"updateUser\",\"copydbgetnonce\",\"copydbsaslstart\",\"copydb\"]),extractCommandName=e=>Object.keys(e)[0],namespace=e=>e.ns,databaseName=e=>e.ns.split(\".\")[0],collectionName=e=>e.ns.split(\".\")[1],generateConnectionId=e=>e.options?`${e.options.host}:${e.options.port}`:e.address,maybeRedact=(e,t)=>SENSITIVE_COMMANDS.has(e)?{}:t,isLegacyPool=e=>e.s&&e.queue,LEGACY_FIND_QUERY_MAP={$query:\"filter\",$orderby:\"sort\",$hint:\"hint\",$comment:\"comment\",$maxScan:\"maxScan\",$max:\"max\",$min:\"min\",$returnKey:\"returnKey\",$showDiskLoc:\"showRecordId\",$maxTimeMS:\"maxTimeMS\",$snapshot:\"snapshot\"},LEGACY_FIND_OPTIONS_MAP={numberToSkip:\"skip\",numberToReturn:\"batchSize\",returnFieldsSelector:\"projection\"},OP_QUERY_KEYS=[\"tailable\",\"oplogReplay\",\"noCursorTimeout\",\"awaitData\",\"partial\",\"exhaust\"],extractCommand=e=>{if(e instanceof GetMore)return{getMore:e.cursorId,collection:collectionName(e),batchSize:e.numberToReturn};if(e instanceof KillCursor)return{killCursors:collectionName(e),cursors:e.cursorIds};if(e instanceof Msg)return e.command;if(e.query&&e.query.$query){let t;return\"admin.$cmd\"===e.ns?t=Object.assign({},e.query.$query):(t={find:collectionName(e)},Object.keys(LEGACY_FIND_QUERY_MAP).forEach(a=>{void 0!==e.query[a]&&(t[LEGACY_FIND_QUERY_MAP[a]]=e.query[a])})),Object.keys(LEGACY_FIND_OPTIONS_MAP).forEach(a=>{void 0!==e[a]&&(t[LEGACY_FIND_OPTIONS_MAP[a]]=e[a])}),OP_QUERY_KEYS.forEach(a=>{e[a]&&(t[a]=e[a])}),void 0!==e.pre32Limit&&(t.limit=e.pre32Limit),e.query.$explain?{explain:t}:t}return e.query?e.query:e},extractReply=(e,t)=>e instanceof GetMore?{ok:1,cursor:{id:t.message.cursorId,ns:namespace(e),nextBatch:t.message.documents}}:e instanceof KillCursor?{ok:1,cursorsUnknown:e.cursorIds}:e.query&&void 0!==e.query.$query?{ok:1,cursor:{id:t.message.cursorId,ns:namespace(e),firstBatch:t.message.documents}}:t&&t.result?t.result:t,extractConnectionDetails=e=>{if(isLegacyPool(e))return{connectionId:generateConnectionId(e)};const t=e;return{address:t.address,connectionId:t.id}};class CommandStartedEvent{constructor(e,t){const a=extractCommand(t),n=extractCommandName(a),o=extractConnectionDetails(e);SENSITIVE_COMMANDS.has(n)&&(this.commandObj={},this.commandObj[n]=!0),Object.assign(this,o,{requestId:t.requestId,databaseName:databaseName(t),commandName:n,command:a})}}class CommandSucceededEvent{constructor(e,t,a,n){const o=extractCommand(t),r=extractCommandName(o),s=extractConnectionDetails(e);Object.assign(this,s,{requestId:t.requestId,commandName:r,duration:calculateDurationInMs(n),reply:maybeRedact(r,extractReply(t,a))})}}class CommandFailedEvent{constructor(e,t,a,n){const o=extractCommand(t),r=extractCommandName(o),s=extractConnectionDetails(e);Object.assign(this,s,{requestId:t.requestId,commandName:r,duration:calculateDurationInMs(n),failure:maybeRedact(r,a)})}}module.exports={CommandStartedEvent:CommandStartedEvent,CommandSucceededEvent:CommandSucceededEvent,CommandFailedEvent:CommandFailedEvent};","node_modules/mongodb/lib/core/connection/connect.js":"\"use strict\";const net=require(\"net\"),tls=require(\"tls\"),Connection=require(\"./connection\"),MongoError=require(\"../error\").MongoError,MongoNetworkError=require(\"../error\").MongoNetworkError,MongoNetworkTimeoutError=require(\"../error\").MongoNetworkTimeoutError,defaultAuthProviders=require(\"../auth/defaultAuthProviders\").defaultAuthProviders,AuthContext=require(\"../auth/auth_provider\").AuthContext,WIRE_CONSTANTS=require(\"../wireprotocol/constants\"),makeClientMetadata=require(\"../utils\").makeClientMetadata,MAX_SUPPORTED_WIRE_VERSION=WIRE_CONSTANTS.MAX_SUPPORTED_WIRE_VERSION,MAX_SUPPORTED_SERVER_VERSION=WIRE_CONSTANTS.MAX_SUPPORTED_SERVER_VERSION,MIN_SUPPORTED_WIRE_VERSION=WIRE_CONSTANTS.MIN_SUPPORTED_WIRE_VERSION,MIN_SUPPORTED_SERVER_VERSION=WIRE_CONSTANTS.MIN_SUPPORTED_SERVER_VERSION;let AUTH_PROVIDERS;function connect(e,o,n){\"function\"==typeof o&&(n=o,o=void 0);const r=e&&e.connectionType?e.connectionType:Connection;null==AUTH_PROVIDERS&&(AUTH_PROVIDERS=defaultAuthProviders(e.bson)),makeConnection(void 0!==e.family?e.family:0,e,o,(o,t)=>{o?n(o,t):performInitialHandshake(new r(t,e),e,n)})}function isModernConnectionType(e){return!(e instanceof Connection)}function checkSupportedServer(e,o){const n=e&&\"number\"==typeof e.maxWireVersion&&e.maxWireVersion>=MIN_SUPPORTED_WIRE_VERSION,r=e&&\"number\"==typeof e.minWireVersion&&e.minWireVersion<=MAX_SUPPORTED_WIRE_VERSION;if(n){if(r)return null;const n=`Server at ${o.host}:${o.port} reports minimum wire version ${e.minWireVersion}, but this version of the Node.js Driver requires at most ${MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${MAX_SUPPORTED_SERVER_VERSION})`;return new MongoError(n)}const t=`Server at ${o.host}:${o.port} reports maximum wire version ${e.maxWireVersion||0}, but this version of the Node.js Driver requires at least ${MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${MIN_SUPPORTED_SERVER_VERSION})`;return new MongoError(t)}function performInitialHandshake(e,o,n){const r=function(o,r){o&&e&&e.destroy(),n(o,r)},t=o.credentials;if(t&&!t.mechanism.match(/DEFAULT/i)&&!AUTH_PROVIDERS[t.mechanism])return void r(new MongoError(`authMechanism '${t.mechanism}' not supported`));const i=new AuthContext(e,t,o);prepareHandshakeDocument(i,(n,s)=>{if(n)return r(n);const c=Object.assign({},o);(o.connectTimeoutMS||o.connectionTimeout)&&(c.socketTimeout=o.connectTimeoutMS||o.connectionTimeout);const a=(new Date).getTime();e.command(\"admin.$cmd\",s,c,(n,c)=>{if(n)return void r(n);const u=c.result;if(0===u.ok)return void r(new MongoError(u));const m=checkSupportedServer(u,o);if(m)r(m);else{if(!isModernConnectionType(e)&&u.compression){const n=s.compression.filter(e=>-1!==u.compression.indexOf(e));n.length&&(e.agreedCompressor=n[0]),o.compression&&o.compression.zlibCompressionLevel&&(e.zlibCompressionLevel=o.compression.zlibCompressionLevel)}if(e.ismaster=u,e.lastIsMasterMS=(new Date).getTime()-a,u.arbiterOnly||!t)r(void 0,e);else{Object.assign(i,{response:u});const o=t.resolveAuthMechanism(u);AUTH_PROVIDERS[o.mechanism].auth(i,o=>{if(o)return r(o);r(void 0,e)})}}})})}function prepareHandshakeDocument(e,o){const n=e.options,r=n.compression&&n.compression.compressors?n.compression.compressors:[],t={ismaster:!0,client:n.metadata||makeClientMetadata(n),compression:r},i=e.credentials;if(i){if(i.mechanism.match(/DEFAULT/i)&&i.username)return Object.assign(t,{saslSupportedMechs:`${i.source}.${i.username}`}),void AUTH_PROVIDERS[\"scram-sha-256\"].prepare(t,e,o);AUTH_PROVIDERS[i.mechanism].prepare(t,e,o)}else o(void 0,t)}const LEGAL_SSL_SOCKET_OPTIONS=[\"pfx\",\"key\",\"passphrase\",\"cert\",\"ca\",\"ciphers\",\"NPNProtocols\",\"ALPNProtocols\",\"servername\",\"ecdhCurve\",\"secureProtocol\",\"secureContext\",\"session\",\"minDHSize\",\"crl\",\"rejectUnauthorized\"];function parseConnectOptions(e,o){const n=\"string\"==typeof o.host?o.host:\"localhost\";return-1!==n.indexOf(\"/\")?{path:n}:{family:e,host:n,port:\"number\"==typeof o.port?o.port:27017,rejectUnauthorized:!1}}function parseSslOptions(e,o){const n=parseConnectOptions(e,o);for(const e in o)null!=o[e]&&-1!==LEGAL_SSL_SOCKET_OPTIONS.indexOf(e)&&(n[e]=o[e]);return!1===o.checkServerIdentity?n.checkServerIdentity=function(){}:\"function\"==typeof o.checkServerIdentity&&(n.checkServerIdentity=o.checkServerIdentity),null!=n.servername||net.isIP(n.host)||(n.servername=n.host),n}const SOCKET_ERROR_EVENTS=new Set([\"error\",\"close\",\"timeout\",\"parseError\"]);function makeConnection(e,o,n,r){const t=\"boolean\"==typeof o.ssl&&o.ssl,i=\"boolean\"!=typeof o.keepAlive||o.keepAlive;let s=\"number\"==typeof o.keepAliveInitialDelay?o.keepAliveInitialDelay:12e4;const c=\"boolean\"!=typeof o.noDelay||o.noDelay,a=\"number\"==typeof o.connectionTimeout?o.connectionTimeout:\"number\"==typeof o.connectTimeoutMS?o.connectTimeoutMS:3e4,u=\"number\"==typeof o.socketTimeout?o.socketTimeout:0,m=\"boolean\"!=typeof o.rejectUnauthorized||o.rejectUnauthorized;let E;s>u&&(s=Math.round(u/2));const l=function(e,o){e&&E&&E.destroy(),r(e,o)};try{t?\"function\"==typeof(E=tls.connect(parseSslOptions(e,o))).disableRenegotiation&&E.disableRenegotiation():E=net.createConnection(parseConnectOptions(e,o))}catch(e){return l(e)}E.setKeepAlive(i,s),E.setTimeout(a),E.setNoDelay(c);const S=t?\"secureConnect\":\"connect\";let p;function R(e){return o=>{SOCKET_ERROR_EVENTS.forEach(e=>E.removeAllListeners(e)),p&&n.removeListener(\"cancel\",p),E.removeListener(S,_),l(connectionFailureError(e,o))}}function _(){if(SOCKET_ERROR_EVENTS.forEach(e=>E.removeAllListeners(e)),p&&n.removeListener(\"cancel\",p),E.authorizationError&&m)return l(E.authorizationError);E.setTimeout(u),l(null,E)}SOCKET_ERROR_EVENTS.forEach(e=>E.once(e,R(e))),n&&(p=R(\"cancel\"),n.once(\"cancel\",p)),E.once(S,_)}function connectionFailureError(e,o){switch(e){case\"error\":return new MongoNetworkError(o);case\"timeout\":return new MongoNetworkTimeoutError(\"connection timed out\");case\"close\":return new MongoNetworkError(\"connection closed\");case\"cancel\":return new MongoNetworkError(\"connection establishment was cancelled\");default:return new MongoNetworkError(\"unknown network error\")}}module.exports=connect;","node_modules/mongodb/lib/core/auth/auth_provider.js":"\"use strict\";class AuthContext{constructor(t,o,e){this.connection=t,this.credentials=o,this.options=e}}class AuthProvider{constructor(t){this.bson=t}prepare(t,o,e){e(void 0,t)}auth(t,o){o(new TypeError(\"`auth` method must be overridden by subclass\"))}}module.exports={AuthContext:AuthContext,AuthProvider:AuthProvider};","node_modules/mongodb/lib/core/auth/mongodb_aws.js":"\"use strict\";const AuthProvider=require(\"./auth_provider\").AuthProvider,MongoCredentials=require(\"./mongo_credentials\").MongoCredentials,MongoError=require(\"../error\").MongoError,crypto=require(\"crypto\"),http=require(\"http\"),maxWireVersion=require(\"../utils\").maxWireVersion,url=require(\"url\");let aws4;try{aws4=require(\"aws4\")}catch(e){}const ASCII_N=110,AWS_RELATIVE_URI=\"http://169.254.170.2\",AWS_EC2_URI=\"http://169.254.169.254\",AWS_EC2_PATH=\"/latest/meta-data/iam/security-credentials\";class MongoDBAWS extends AuthProvider{auth(e,r){const n=e.connection,t=e.credentials;if(maxWireVersion(n)<9)return void r(new MongoError(\"MONGODB-AWS authentication requires MongoDB version 4.4 or later\"));if(null==aws4)return void r(new MongoError(\"MONGODB-AWS authentication requires the `aws4` module, please install it as a dependency of your project\"));if(null==t.username)return void makeTempCredentials(t,(n,t)=>{if(n)return r(n);e.credentials=t,this.auth(e,r)});const o=t.username,s=t.password,i=t.source,a=t.mechanismProperties.AWS_SESSION_TOKEN,c=this.bson;crypto.randomBytes(32,(e,t)=>{if(e)return void r(e);const d={saslStart:1,mechanism:\"MONGODB-AWS\",payload:c.serialize({r:t,p:ASCII_N})};n.command(`${i}.$cmd`,d,(e,d)=>{if(e)return r(e);const u=d.result,l=c.deserialize(u.payload.buffer),h=l.h,A=l.s.buffer;if(64!==A.length)return void r(new MongoError(`Invalid server nonce length ${A.length}, expected 64`));if(0!==A.compare(t,0,t.length,0,t.length))return void r(new MongoError(\"Server nonce does not begin with client nonce\"));if(h.length<1||h.length>255||-1!==h.indexOf(\"..\"))return void r(new MongoError(`Server returned an invalid host: \"${h}\"`));const m=\"Action=GetCallerIdentity&Version=2011-06-15\",S=aws4.sign({method:\"POST\",host:h,region:deriveRegion(l.h),service:\"sts\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",\"Content-Length\":m.length,\"X-MongoDB-Server-Nonce\":A.toString(\"base64\"),\"X-MongoDB-GS2-CB-Flag\":\"n\"},path:\"/\",body:m},{accessKeyId:o,secretAccessKey:s,token:a}),p={a:S.headers.Authorization,d:S.headers[\"X-Amz-Date\"]};a&&(p.t=a);const g={saslContinue:1,conversationId:1,payload:c.serialize(p)};n.command(`${i}.$cmd`,g,e=>{if(e)return r(e);r()})})})}}function makeTempCredentials(e,r){function n(n){null!=n.AccessKeyId&&null!=n.SecretAccessKey&&null!=n.Token?r(void 0,new MongoCredentials({username:n.AccessKeyId,password:n.SecretAccessKey,source:e.source,mechanism:\"MONGODB-AWS\",mechanismProperties:{AWS_SESSION_TOKEN:n.Token}})):r(new MongoError(\"Could not obtain temporary MONGODB-AWS credentials\"))}process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI?request(`${AWS_RELATIVE_URI}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`,(e,t)=>{if(e)return r(e);n(t)}):request(`${AWS_EC2_URI}/latest/api/token`,{method:\"PUT\",json:!1,headers:{\"X-aws-ec2-metadata-token-ttl-seconds\":30}},(e,t)=>{if(e)return r(e);request(`${AWS_EC2_URI}/${AWS_EC2_PATH}`,{json:!1,headers:{\"X-aws-ec2-metadata-token\":t}},(e,o)=>{if(e)return r(e);request(`${AWS_EC2_URI}/${AWS_EC2_PATH}/${o}`,{headers:{\"X-aws-ec2-metadata-token\":t}},(e,t)=>{if(e)return r(e);n(t)})})})}function deriveRegion(e){const r=e.split(\".\");return 1===r.length||\"amazonaws\"===r[1]?\"us-east-1\":r[1]}function request(e,r,n){\"function\"==typeof r&&(n=r,r={}),r=Object.assign({method:\"GET\",timeout:1e4,json:!0},url.parse(e),r);const t=http.request(r,e=>{e.setEncoding(\"utf8\");let t=\"\";e.on(\"data\",e=>t+=e),e.on(\"end\",()=>{if(!1!==r.json)try{const e=JSON.parse(t);n(void 0,e)}catch(e){n(new MongoError(`Invalid JSON response: \"${t}\"`))}else n(void 0,t)})});t.on(\"error\",e=>n(e)),t.end()}module.exports=MongoDBAWS;","node_modules/saslprep/index.js":"\"use strict\";const{unassigned_code_points:unassigned_code_points,commonly_mapped_to_nothing:commonly_mapped_to_nothing,non_ASCII_space_characters:non_ASCII_space_characters,prohibited_characters:prohibited_characters,bidirectional_r_al:bidirectional_r_al,bidirectional_l:bidirectional_l}=require(\"./lib/memory-code-points\");module.exports=saslprep;const mapping2space=non_ASCII_space_characters,mapping2nothing=commonly_mapped_to_nothing,getCodePoint=t=>t.codePointAt(0),first=t=>t[0],last=t=>t[t.length-1];function toCodePoints(t){const e=[],o=t.length;for(let n=0;n<o;n+=1){const i=t.charCodeAt(n);if(i>=55296&&i<=56319&&o>n+1){const o=t.charCodeAt(n+1);if(o>=56320&&o<=57343){e.push(1024*(i-55296)+o-56320+65536),n+=1;continue}}e.push(i)}return e}function saslprep(t,e={}){if(\"string\"!=typeof t)throw new TypeError(\"Expected string.\");if(0===t.length)return\"\";const o=toCodePoints(t).map(t=>mapping2space.get(t)?32:t).filter(t=>!mapping2nothing.get(t)),n=String.fromCodePoint.apply(null,o).normalize(\"NFKC\"),i=toCodePoints(n);if(i.some(t=>prohibited_characters.get(t)))throw new Error(\"Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3\");if(!0!==e.allowUnassigned){if(i.some(t=>unassigned_code_points.get(t)))throw new Error(\"Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5\")}const r=i.some(t=>bidirectional_r_al.get(t)),s=i.some(t=>bidirectional_l.get(t));if(r&&s)throw new Error(\"String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6\");const a=bidirectional_r_al.get(getCodePoint(first(n))),c=bidirectional_r_al.get(getCodePoint(last(n)));if(r&&(!a||!c))throw new Error(\"Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6\");return n}","node_modules/saslprep/lib/memory-code-points.js":"\"use strict\";const fs=require(\"fs\"),path=require(\"path\"),bitfield=require(\"sparse-bitfield\"),memory=fs.readFileSync(path.resolve(__dirname,\"../code-points.mem\"));let offset=0;function read(){const e=memory.readUInt32BE(offset);offset+=4;const r=memory.slice(offset,offset+e);return offset+=e,bitfield({buffer:r})}const unassigned_code_points=read(),commonly_mapped_to_nothing=read(),non_ASCII_space_characters=read(),prohibited_characters=read(),bidirectional_r_al=read(),bidirectional_l=read();module.exports={unassigned_code_points:unassigned_code_points,commonly_mapped_to_nothing:commonly_mapped_to_nothing,non_ASCII_space_characters:non_ASCII_space_characters,prohibited_characters:prohibited_characters,bidirectional_r_al:bidirectional_r_al,bidirectional_l:bidirectional_l};","node_modules/sparse-bitfield/index.js":"var pager=require(\"memory-pager\");function Bitfield(e){if(!(this instanceof Bitfield))return new Bitfield(e);if(e||(e={}),Buffer.isBuffer(e)&&(e={buffer:e}),this.pageOffset=e.pageOffset||0,this.pageSize=e.pageSize||1024,this.pages=e.pages||pager(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!powerOfTwo(this.pageSize))throw new Error(\"The page size should be a power of two\");if(this._trackUpdates=!!e.trackUpdates,this._pageMask=this.pageSize-1,e.buffer){for(var t=0;t<e.buffer.length;t+=this.pageSize)this.pages.set(t/this.pageSize,e.buffer.slice(t,t+this.pageSize));this.byteLength=e.buffer.length,this.length=8*this.byteLength}}function alloc(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}function powerOfTwo(e){return!(e&e-1)}module.exports=Bitfield,Bitfield.prototype.get=function(e){var t=7&e,i=(e-t)/8;return!!(this.getByte(i)&128>>t)},Bitfield.prototype.getByte=function(e){var t=e&this._pageMask,i=(e-t)/this.pageSize,s=this.pages.get(i,!0);return s?s.buffer[t+this.pageOffset]:0},Bitfield.prototype.set=function(e,t){var i=7&e,s=(e-i)/8,f=this.getByte(s);return this.setByte(s,t?f|128>>i:f&(255^128>>i))},Bitfield.prototype.toBuffer=function(){for(var e=alloc(this.pages.length*this.pageSize),t=0;t<this.pages.length;t++){var i=this.pages.get(t,!0),s=t*this.pageSize;i&&i.buffer.copy(e,s,this.pageOffset,this.pageOffset+this.pageSize)}return e},Bitfield.prototype.setByte=function(e,t){var i=e&this._pageMask,s=(e-i)/this.pageSize,f=this.pages.get(s,!1);return i+=this.pageOffset,f.buffer[i]!==t&&(f.buffer[i]=t,e>=this.byteLength&&(this.byteLength=e+1,this.length=8*this.byteLength),this._trackUpdates&&this.pages.updated(f),!0)};","node_modules/memory-pager/index.js":"function Pager(e,t){if(!(this instanceof Pager))return new Pager(e,t);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=e||1024,this.deduplicate=t?t.deduplicate:null,this.zeros=this.deduplicate?alloc(this.deduplicate.length):null}function grow(e,t){for(;e.maxPages<t;){var a=e.pages;e.pages=new Array(32768),e.pages[0]=a,e.level++,e.maxPages*=32768}}function truncate(e,t){if(e.length===t)return e;if(e.length>t)return e.slice(0,t);var a=alloc(t);return e.copy(a),a}function alloc(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}function copy(e){var t=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length);return e.copy(t),t}function Page(e,t){this.offset=e*t.length,this.buffer=t,this.updated=!1,this.deduplicate=0}function factor(e,t){e=((e=(e-(t[0]=32767&e))/32768)-(t[1]=32767&e))/32768,t[3]=(e-(t[2]=32767&e))/32768&32767}module.exports=Pager,Pager.prototype.updated=function(e){for(;this.deduplicate&&e.buffer[e.deduplicate]===this.deduplicate[e.deduplicate];)if(e.deduplicate++,e.deduplicate===this.deduplicate.length){e.deduplicate=0,e.buffer.equals&&e.buffer.equals(this.deduplicate)&&(e.buffer=this.deduplicate);break}!e.updated&&this.updates&&(e.updated=!0,this.updates.push(e))},Pager.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var e=this.updates.pop();return e.updated=!1,e},Pager.prototype._array=function(e,t){if(e>=this.maxPages){if(t)return;grow(this,e)}factor(e,this.path);for(var a=this.pages,r=this.level;r>0;r--){var i=this.path[r],u=a[i];if(!u){if(t)return;u=a[i]=new Array(32768)}a=u}return a},Pager.prototype.get=function(e,t){var a=this._array(e,t),r=this.path[0],i=a&&a[r];return i||t||(i=a[r]=new Page(e,alloc(this.pageSize)),e>=this.length&&(this.length=e+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!t&&(i.buffer=copy(i.buffer),i.deduplicate=0),i},Pager.prototype.set=function(e,t){var a=this._array(e,!1),r=this.path[0];if(e>=this.length&&(this.length=e+1),!t||this.zeros&&t.equals&&t.equals(this.zeros))a[r]=void 0;else{this.deduplicate&&t.equals&&t.equals(this.deduplicate)&&(t=this.deduplicate);var i=a[r],u=truncate(t,this.pageSize);i?i.buffer=u:a[r]=new Page(e,u)}},Pager.prototype.toBuffer=function(){for(var e=new Array(this.length),t=alloc(this.pageSize),a=0;a<e.length;)for(var r=this._array(a,!0),i=0;i<32768&&a<e.length;i++)e[a++]=r&&r[i]?r[i].buffer:t;return Buffer.concat(e)};","node_modules/aws4/aws4.js":"var aws4=exports,url=require(\"url\"),querystring=require(\"querystring\"),crypto=require(\"crypto\"),lru=require(\"./lru\"),credentialsCache=lru(1e3);function hmac(e,t,s){return crypto.createHmac(\"sha256\",e).update(t,\"utf8\").digest(s)}function hash(e,t){return crypto.createHash(\"sha256\").update(e,\"utf8\").digest(t)}function encodeRfc3986(e){return e.replace(/[!'()*]/g,function(e){return\"%\"+e.charCodeAt(0).toString(16).toUpperCase()})}function encodeRfc3986Full(e){return encodeRfc3986(encodeURIComponent(e))}var HEADERS_TO_IGNORE={authorization:!0,connection:!0,\"x-amzn-trace-id\":!0,\"user-agent\":!0,expect:!0,\"presigned-expires\":!0,range:!0};function RequestSigner(e,t){\"string\"==typeof e&&(e=url.parse(e));var s=e.headers=e.headers||{},r=(!this.service||!this.region)&&this.matchHost(e.hostname||e.host||s.Host||s.host);this.request=e,this.credentials=t||this.defaultCredentials(),this.service=e.service||r[0]||\"\",this.region=e.region||r[1]||\"us-east-1\",\"email\"===this.service&&(this.service=\"ses\"),!e.method&&e.body&&(e.method=\"POST\"),s.Host||s.host||(s.Host=e.hostname||e.host||this.createHost(),e.port&&(s.Host+=\":\"+e.port)),e.hostname||e.host||(e.hostname=s.Host||s.host),this.isCodeCommitGit=\"codecommit\"===this.service&&\"GIT\"===e.method}RequestSigner.prototype.matchHost=function(e){var t=((e||\"\").match(/([^\\.]+)\\.(?:([^\\.]*)\\.)?amazonaws\\.com(\\.cn)?$/)||[]).slice(1,3);if(\"es\"===t[1]&&(t=t.reverse()),\"s3\"==t[1])t[0]=\"s3\",t[1]=\"us-east-1\";else for(var s=0;s<2;s++)if(/^s3-/.test(t[s])){t[1]=t[s].slice(3),t[0]=\"s3\";break}return t},RequestSigner.prototype.isSingleRegion=function(){return[\"s3\",\"sdb\"].indexOf(this.service)>=0&&\"us-east-1\"===this.region||[\"cloudfront\",\"ls\",\"route53\",\"iam\",\"importexport\",\"sts\"].indexOf(this.service)>=0},RequestSigner.prototype.createHost=function(){var e=this.isSingleRegion()?\"\":\".\"+this.region;return(\"ses\"===this.service?\"email\":this.service)+e+\".amazonaws.com\"},RequestSigner.prototype.prepareRequest=function(){this.parsePath();var e,t=this.request,s=t.headers;t.signQuery?(this.parsedPath.query=e=this.parsedPath.query||{},this.credentials.sessionToken&&(e[\"X-Amz-Security-Token\"]=this.credentials.sessionToken),\"s3\"!==this.service||e[\"X-Amz-Expires\"]||(e[\"X-Amz-Expires\"]=86400),e[\"X-Amz-Date\"]?this.datetime=e[\"X-Amz-Date\"]:e[\"X-Amz-Date\"]=this.getDateTime(),e[\"X-Amz-Algorithm\"]=\"AWS4-HMAC-SHA256\",e[\"X-Amz-Credential\"]=this.credentials.accessKeyId+\"/\"+this.credentialString(),e[\"X-Amz-SignedHeaders\"]=this.signedHeaders()):(t.doNotModifyHeaders||this.isCodeCommitGit||(!t.body||s[\"Content-Type\"]||s[\"content-type\"]||(s[\"Content-Type\"]=\"application/x-www-form-urlencoded; charset=utf-8\"),!t.body||s[\"Content-Length\"]||s[\"content-length\"]||(s[\"Content-Length\"]=Buffer.byteLength(t.body)),!this.credentials.sessionToken||s[\"X-Amz-Security-Token\"]||s[\"x-amz-security-token\"]||(s[\"X-Amz-Security-Token\"]=this.credentials.sessionToken),\"s3\"!==this.service||s[\"X-Amz-Content-Sha256\"]||s[\"x-amz-content-sha256\"]||(s[\"X-Amz-Content-Sha256\"]=hash(this.request.body||\"\",\"hex\")),s[\"X-Amz-Date\"]||s[\"x-amz-date\"]?this.datetime=s[\"X-Amz-Date\"]||s[\"x-amz-date\"]:s[\"X-Amz-Date\"]=this.getDateTime()),delete s.Authorization,delete s.authorization)},RequestSigner.prototype.sign=function(){return this.parsedPath||this.prepareRequest(),this.request.signQuery?this.parsedPath.query[\"X-Amz-Signature\"]=this.signature():this.request.headers.Authorization=this.authHeader(),this.request.path=this.formatPath(),this.request},RequestSigner.prototype.getDateTime=function(){if(!this.datetime){var e=this.request.headers,t=new Date(e.Date||e.date||new Date);this.datetime=t.toISOString().replace(/[:\\-]|\\.\\d{3}/g,\"\"),this.isCodeCommitGit&&(this.datetime=this.datetime.slice(0,-1))}return this.datetime},RequestSigner.prototype.getDate=function(){return this.getDateTime().substr(0,8)},RequestSigner.prototype.authHeader=function(){return[\"AWS4-HMAC-SHA256 Credential=\"+this.credentials.accessKeyId+\"/\"+this.credentialString(),\"SignedHeaders=\"+this.signedHeaders(),\"Signature=\"+this.signature()].join(\", \")},RequestSigner.prototype.signature=function(){var e=this.getDate(),t=[this.credentials.secretAccessKey,e,this.region,this.service].join(),s=credentialsCache.get(t);return s||(s=hmac(hmac(hmac(hmac(\"AWS4\"+this.credentials.secretAccessKey,e),this.region),this.service),\"aws4_request\"),credentialsCache.set(t,s)),hmac(s,this.stringToSign(),\"hex\")},RequestSigner.prototype.stringToSign=function(){return[\"AWS4-HMAC-SHA256\",this.getDateTime(),this.credentialString(),hash(this.canonicalString(),\"hex\")].join(\"\\n\")},RequestSigner.prototype.canonicalString=function(){this.parsedPath||this.prepareRequest();var e,t=this.parsedPath.path,s=this.parsedPath.query,r=this.request.headers,i=\"\",n=\"s3\"!==this.service,a=\"s3\"===this.service||this.request.doNotEncodePath,o=\"s3\"===this.service,h=\"s3\"===this.service;if(e=\"s3\"===this.service&&this.request.signQuery?\"UNSIGNED-PAYLOAD\":this.isCodeCommitGit?\"\":r[\"X-Amz-Content-Sha256\"]||r[\"x-amz-content-sha256\"]||hash(this.request.body||\"\",\"hex\"),s){var c=Object.keys(s).reduce(function(e,t){return t?(e[encodeRfc3986Full(t)]=Array.isArray(s[t])&&h?s[t][0]:s[t],e):e},{}),u=[];Object.keys(c).sort().forEach(function(e){Array.isArray(c[e])?c[e].map(encodeRfc3986Full).sort().forEach(function(t){u.push(e+\"=\"+t)}):u.push(e+\"=\"+encodeRfc3986Full(c[e]))}),i=u.join(\"&\")}return\"/\"!==t&&(n&&(t=t.replace(/\\/{2,}/g,\"/\")),\"/\"!==(t=t.split(\"/\").reduce(function(e,t){return n&&\"..\"===t?e.pop():n&&\".\"===t||(a&&(t=decodeURIComponent(t.replace(/\\+/g,\" \"))),e.push(encodeRfc3986Full(t))),e},[]).join(\"/\"))[0]&&(t=\"/\"+t),o&&(t=t.replace(/%2F/g,\"/\"))),[this.request.method||\"GET\",t,i,this.canonicalHeaders()+\"\\n\",this.signedHeaders(),e].join(\"\\n\")},RequestSigner.prototype.canonicalHeaders=function(){var e=this.request.headers;return Object.keys(e).filter(function(e){return null==HEADERS_TO_IGNORE[e.toLowerCase()]}).sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1}).map(function(t){return t.toLowerCase()+\":\"+e[t].toString().trim().replace(/\\s+/g,\" \")}).join(\"\\n\")},RequestSigner.prototype.signedHeaders=function(){return Object.keys(this.request.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return null==HEADERS_TO_IGNORE[e]}).sort().join(\";\")},RequestSigner.prototype.credentialString=function(){return[this.getDate(),this.region,this.service,\"aws4_request\"].join(\"/\")},RequestSigner.prototype.defaultCredentials=function(){var e=process.env;return{accessKeyId:e.AWS_ACCESS_KEY_ID||e.AWS_ACCESS_KEY,secretAccessKey:e.AWS_SECRET_ACCESS_KEY||e.AWS_SECRET_KEY,sessionToken:e.AWS_SESSION_TOKEN}},RequestSigner.prototype.parsePath=function(){var e=this.request.path||\"/\";/[^0-9A-Za-z;,/?:@&=+$\\-_.!~*'()#%]/.test(e)&&(e=encodeURI(decodeURI(e)));var t=e.indexOf(\"?\"),s=null;t>=0&&(s=querystring.parse(e.slice(t+1)),e=e.slice(0,t)),this.parsedPath={path:e,query:s}},RequestSigner.prototype.formatPath=function(){var e=this.parsedPath.path,t=this.parsedPath.query;return t?(null!=t[\"\"]&&delete t[\"\"],e+\"?\"+encodeRfc3986(querystring.stringify(t))):e},aws4.RequestSigner=RequestSigner,aws4.sign=function(e,t){return new RequestSigner(e,t).sign()};","node_modules/aws4/lru.js":"function LruCache(t){this.capacity=0|t,this.map=Object.create(null),this.list=new DoublyLinkedList}function DoublyLinkedList(){this.firstNode=null,this.lastNode=null}function DoublyLinkedNode(t,e){this.key=t,this.val=e,this.prev=null,this.next=null}module.exports=function(t){return new LruCache(t)},LruCache.prototype.get=function(t){var e=this.map[t];if(null!=e)return this.used(e),e.val},LruCache.prototype.set=function(t,e){var i=this.map[t];if(null!=i)i.val=e;else{if(this.capacity||this.prune(),!this.capacity)return!1;i=new DoublyLinkedNode(t,e),this.map[t]=i,this.capacity--}return this.used(i),!0},LruCache.prototype.used=function(t){this.list.moveToFront(t)},LruCache.prototype.prune=function(){var t=this.list.pop();null!=t&&(delete this.map[t.key],this.capacity++)},DoublyLinkedList.prototype.moveToFront=function(t){this.firstNode!=t&&(this.remove(t),null==this.firstNode?(this.firstNode=t,this.lastNode=t,t.prev=null,t.next=null):(t.prev=null,t.next=this.firstNode,t.next.prev=t,this.firstNode=t))},DoublyLinkedList.prototype.pop=function(){var t=this.lastNode;return null!=t&&this.remove(t),t},DoublyLinkedList.prototype.remove=function(t){this.firstNode==t?this.firstNode=t.next:null!=t.prev&&(t.prev.next=t.next),this.lastNode==t?this.lastNode=t.prev:null!=t.next&&(t.next.prev=t.prev)};","node_modules/mongodb/lib/core/transactions.js":"\"use strict\";const MongoError=require(\"./error\").MongoError,ReadPreference=require(\"./topologies/read_preference\"),ReadConcern=require(\"../read_concern\"),WriteConcern=require(\"../write_concern\");let TxnState,stateMachine;TxnState={NO_TRANSACTION:\"NO_TRANSACTION\",STARTING_TRANSACTION:\"STARTING_TRANSACTION\",TRANSACTION_IN_PROGRESS:\"TRANSACTION_IN_PROGRESS\",TRANSACTION_COMMITTED:\"TRANSACTION_COMMITTED\",TRANSACTION_COMMITTED_EMPTY:\"TRANSACTION_COMMITTED_EMPTY\",TRANSACTION_ABORTED:\"TRANSACTION_ABORTED\"},stateMachine={NO_TRANSACTION:[\"NO_TRANSACTION\",\"STARTING_TRANSACTION\"],STARTING_TRANSACTION:[\"TRANSACTION_IN_PROGRESS\",\"TRANSACTION_COMMITTED\",\"TRANSACTION_COMMITTED_EMPTY\",\"TRANSACTION_ABORTED\"],TRANSACTION_IN_PROGRESS:[\"TRANSACTION_IN_PROGRESS\",\"TRANSACTION_COMMITTED\",\"TRANSACTION_ABORTED\"],TRANSACTION_COMMITTED:[\"TRANSACTION_COMMITTED\",\"TRANSACTION_COMMITTED_EMPTY\",\"STARTING_TRANSACTION\",\"NO_TRANSACTION\"],TRANSACTION_ABORTED:[\"STARTING_TRANSACTION\",\"NO_TRANSACTION\"],TRANSACTION_COMMITTED_EMPTY:[\"TRANSACTION_COMMITTED_EMPTY\",\"NO_TRANSACTION\"]};class Transaction{constructor(T){T=T||{},this.state=TxnState.NO_TRANSACTION,this.options={};const e=WriteConcern.fromOptions(T);if(e){if(e.w<=0)throw new MongoError(\"Transactions do not support unacknowledged write concern\");this.options.writeConcern=e}T.readConcern&&(this.options.readConcern=ReadConcern.fromOptions(T)),T.readPreference&&(this.options.readPreference=ReadPreference.fromOptions(T)),T.maxCommitTimeMS&&(this.options.maxTimeMS=T.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isActive(){return-1!==[TxnState.STARTING_TRANSACTION,TxnState.TRANSACTION_IN_PROGRESS].indexOf(this.state)}transition(T){const e=stateMachine[this.state];if(e&&-1!==e.indexOf(T))return this.state=T,void(this.state!==TxnState.NO_TRANSACTION&&this.state!==TxnState.STARTING_TRANSACTION||this.unpinServer());throw new MongoError(`Attempted illegal state transition from [${this.state}] to [${T}]`)}pinServer(T){this.isActive&&(this._pinnedServer=T)}unpinServer(){this._pinnedServer=void 0}}function isTransactionCommand(T){return!(!T.commitTransaction&&!T.abortTransaction)}module.exports={TxnState:TxnState,Transaction:Transaction,isTransactionCommand:isTransactionCommand};","node_modules/mongodb/lib/read_concern.js":"\"use strict\";class ReadConcern{constructor(e){null!=e&&(this.level=e)}static fromOptions(e){if(null!=e)return e.readConcern?e.readConcern instanceof ReadConcern?e.readConcern:new ReadConcern(e.readConcern.level):e.level?new ReadConcern(e.level):void 0}static get MAJORITY(){return\"majority\"}static get AVAILABLE(){return\"available\"}static get LINEARIZABLE(){return\"linearizable\"}static get SNAPSHOT(){return\"snapshot\"}}module.exports=ReadConcern;","node_modules/mongodb/lib/core/wireprotocol/write_command.js":"\"use strict\";const MongoError=require(\"../error\").MongoError,collectionNamespace=require(\"./shared\").collectionNamespace,command=require(\"./command\"),decorateWithExplain=require(\"../../utils\").decorateWithExplain,Explain=require(\"../../explain\").Explain;function writeCommand(e,o,n,t,r,i,a){if(0===r.length)throw new MongoError(`${o} must contain at least one document`);\"function\"==typeof i&&(a=i,i={});const c=\"boolean\"!=typeof(i=i||{}).ordered||i.ordered,l=i.writeConcern;let s={};if(s[o]=collectionNamespace(t),s[n]=r,s.ordered=c,l&&Object.keys(l).length>0&&(s.writeConcern=l),i.collation)for(let e=0;e<s[n].length;e++)s[n][e].collation||(s[n][e].collation=i.collation);!0===i.bypassDocumentValidation&&(s.bypassDocumentValidation=i.bypassDocumentValidation);const m=Explain.fromOptions(i);m&&(s=decorateWithExplain(s,m));const d=Object.assign({checkKeys:\"insert\"===o,numberToReturn:1},i);command(e,t,s,d,a)}module.exports=writeCommand;","node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js":"\"use strict\";const KillCursor=require(\"../connection/commands\").KillCursor,MongoError=require(\"../error\").MongoError,MongoNetworkError=require(\"../error\").MongoNetworkError,collectionNamespace=require(\"./shared\").collectionNamespace,maxWireVersion=require(\"../utils\").maxWireVersion,emitWarning=require(\"../utils\").emitWarning,command=require(\"./command\");function killCursors(r,o,e,s){s=\"function\"==typeof s?s:()=>{};const n=e.cursorId;if(maxWireVersion(r)<4){const i=r.s.bson,t=r.s.pool,u=new KillCursor(i,o,[n]),c={immediateRelease:!0,noResponse:!0};if(\"object\"==typeof e.session&&(c.session=e.session),t&&t.isConnected())try{t.write(u,c,s)}catch(r){\"function\"==typeof s?s(r,null):emitWarning(r)}return}const i={killCursors:collectionNamespace(o),cursors:[n]},t={};\"object\"==typeof e.session&&(t.session=e.session),command(r,o,i,t,(r,o)=>{if(r)return s(r);const e=o.message;return e.cursorNotFound?s(new MongoNetworkError(\"cursor killed or timed out\"),null):Array.isArray(e.documents)&&0!==e.documents.length?void s(null,e.documents[0]):s(new MongoError(`invalid killCursors result returned for cursor id ${n}`))})}module.exports=killCursors;","node_modules/mongodb/lib/core/wireprotocol/get_more.js":"\"use strict\";const GetMore=require(\"../connection/commands\").GetMore,retrieveBSON=require(\"../connection/utils\").retrieveBSON,MongoError=require(\"../error\").MongoError,MongoNetworkError=require(\"../error\").MongoNetworkError,BSON=retrieveBSON(),Long=BSON.Long,collectionNamespace=require(\"./shared\").collectionNamespace,maxWireVersion=require(\"../utils\").maxWireVersion,applyCommonQueryOptions=require(\"./shared\").applyCommonQueryOptions,command=require(\"./command\");function getMore(o,r,e,n,t,c){t=t||{};const s=maxWireVersion(o);function u(o,r){if(o)return c(o);const n=r.message;if(n.cursorNotFound)return c(new MongoNetworkError(\"cursor killed or timed out\"),null);if(s<4){const o=\"number\"==typeof n.cursorId?Long.fromNumber(n.cursorId):n.cursorId;return e.documents=n.documents,e.cursorId=o,void c(null,null,n.connection)}if(0===n.documents[0].ok)return c(new MongoError(n.documents[0]));const t=\"number\"==typeof n.documents[0].cursor.id?Long.fromNumber(n.documents[0].cursor.id):n.documents[0].cursor.id;e.documents=n.documents[0].cursor.nextBatch,e.cursorId=t,c(null,n.documents[0],n.connection)}if(s<4){const t=o.s.bson,c=new GetMore(t,r,e.cursorId,{numberToReturn:n}),s=applyCommonQueryOptions({},e);return void o.s.pool.write(c,s,u)}const i={getMore:e.cursorId instanceof Long?e.cursorId:Long.fromNumber(e.cursorId),collection:collectionNamespace(r),batchSize:Math.abs(n)};e.cmd.tailable&&\"number\"==typeof e.cmd.maxAwaitTimeMS&&(i.maxTimeMS=e.cmd.maxAwaitTimeMS);const m=Object.assign({returnFieldSelector:null,documentsReturnedIn:\"nextBatch\"},t);e.session&&(m.session=e.session),command(o,r,i,m,u)}module.exports=getMore;","node_modules/mongodb/lib/core/wireprotocol/query.js":"\"use strict\";const Query=require(\"../connection/commands\").Query,MongoError=require(\"../error\").MongoError,getReadPreference=require(\"./shared\").getReadPreference,collectionNamespace=require(\"./shared\").collectionNamespace,isSharded=require(\"./shared\").isSharded,maxWireVersion=require(\"../utils\").maxWireVersion,applyCommonQueryOptions=require(\"./shared\").applyCommonQueryOptions,command=require(\"./command\"),decorateWithExplain=require(\"../../utils\").decorateWithExplain,Explain=require(\"../../explain\").Explain;function query(e,a,i,r,o,t){if(o=o||{},null!=r.cursorId)return t();if(null==i)return t(new MongoError(`command ${JSON.stringify(i)} does not return a cursor`));if(maxWireVersion(e)<4){const n=prepareLegacyFindQuery(e,a,i,r,o),s=applyCommonQueryOptions({},r);return\"string\"==typeof n.documentsReturnedIn&&(s.documentsReturnedIn=n.documentsReturnedIn),void e.s.pool.write(n,s,t)}const n=getReadPreference(i,o);let s=prepareFindCommand(e,a,i,r,o);const l=Explain.fromOptions(o);l&&(s=decorateWithExplain(s,l)),i.virtual=!1;const c=Object.assign({documentsReturnedIn:\"firstBatch\",numberToReturn:1,slaveOk:n.slaveOk()},o);i.readPreference&&(c.readPreference=n),r.session&&(c.session=r.session),command(e,a,s,c,t)}function prepareFindCommand(e,a,i,r){r.batchSize=i.batchSize||r.batchSize;const o={find:collectionNamespace(a)};i.query&&(i.query.$query?o.filter=i.query.$query:o.filter=i.query);let t=i.sort;if(Array.isArray(t)){const e={};if(t.length>0&&!Array.isArray(t[0])){let a=t[1];\"asc\"===a?a=1:\"desc\"===a&&(a=-1),e[t[0]]=a}else for(let a=0;a<t.length;a++){let i=t[a][1];\"asc\"===i?i=1:\"desc\"===i&&(i=-1),e[t[a][0]]=i}t=e}return\"boolean\"==typeof i.allowDiskUse&&(o.allowDiskUse=i.allowDiskUse),i.sort&&(o.sort=t),i.fields&&(o.projection=i.fields),i.hint&&(o.hint=i.hint),i.skip&&(o.skip=i.skip),i.limit&&(o.limit=i.limit),i.limit<0&&(o.limit=Math.abs(i.limit),o.singleBatch=!0),\"number\"==typeof i.batchSize&&(i.batchSize<0&&(0!==i.limit&&Math.abs(i.batchSize)<Math.abs(i.limit)&&(o.limit=Math.abs(i.batchSize)),o.singleBatch=!0),o.batchSize=Math.abs(i.batchSize)),i.comment&&(o.comment=i.comment),i.maxScan&&(o.maxScan=i.maxScan),i.maxTimeMS&&(o.maxTimeMS=i.maxTimeMS),i.min&&(o.min=i.min),i.max&&(o.max=i.max),o.returnKey=!!i.returnKey&&i.returnKey,o.showRecordId=!!i.showDiskLoc&&i.showDiskLoc,i.snapshot&&(o.snapshot=i.snapshot),i.tailable&&(o.tailable=i.tailable),i.oplogReplay&&(o.oplogReplay=i.oplogReplay),i.noCursorTimeout&&(o.noCursorTimeout=i.noCursorTimeout),i.awaitData&&(o.awaitData=i.awaitData),i.awaitdata&&(o.awaitData=i.awaitdata),i.partial&&(o.partial=i.partial),i.collation&&(o.collation=i.collation),i.readConcern&&(o.readConcern=i.readConcern),o}function prepareLegacyFindQuery(e,a,i,r,o){o=o||{};const t=e.s.bson,n=getReadPreference(i,o);r.batchSize=i.batchSize||r.batchSize;let s=0;s=r.limit<0||0!==r.limit&&r.limit<r.batchSize||r.limit>0&&0===r.batchSize?r.limit:r.batchSize;const l=r.skip||0,c={};if(isSharded(e)&&n&&(c.$readPreference=n.toJSON()),i.sort&&(c.$orderby=i.sort),i.hint&&(c.$hint=i.hint),i.snapshot&&(c.$snapshot=i.snapshot),void 0!==i.returnKey&&(c.$returnKey=i.returnKey),i.maxScan&&(c.$maxScan=i.maxScan),i.min&&(c.$min=i.min),i.max&&(c.$max=i.max),void 0!==i.showDiskLoc&&(c.$showDiskLoc=i.showDiskLoc),i.comment&&(c.$comment=i.comment),i.maxTimeMS&&(c.$maxTimeMS=i.maxTimeMS),void 0!==o.explain&&(s=-Math.abs(i.limit||0),c.$explain=!0),c.$query=i.query,i.readConcern&&\"local\"!==i.readConcern.level)throw new MongoError(`server find command does not support a readConcern level of ${i.readConcern.level}`);i.readConcern&&delete(i=Object.assign({},i)).readConcern;const m=\"boolean\"==typeof o.serializeFunctions&&o.serializeFunctions,u=\"boolean\"==typeof o.ignoreUndefined&&o.ignoreUndefined,d=new Query(t,a,c,{numberToSkip:l,numberToReturn:s,pre32Limit:void 0!==i.limit?i.limit:void 0,checkKeys:!1,returnFieldSelector:i.fields,serializeFunctions:m,ignoreUndefined:u});return\"boolean\"==typeof i.tailable&&(d.tailable=i.tailable),\"boolean\"==typeof i.oplogReplay&&(d.oplogReplay=i.oplogReplay),\"boolean\"==typeof i.noCursorTimeout&&(d.noCursorTimeout=i.noCursorTimeout),\"boolean\"==typeof i.awaitData&&(d.awaitData=i.awaitData),\"boolean\"==typeof i.partial&&(d.partial=i.partial),d.slaveOk=n.slaveOk(),d}module.exports=query;","node_modules/mongodb/lib/core/wireprotocol/command.js":"\"use strict\";const Query=require(\"../connection/commands\").Query,Msg=require(\"../connection/msg\").Msg,MongoError=require(\"../error\").MongoError,getReadPreference=require(\"./shared\").getReadPreference,isSharded=require(\"./shared\").isSharded,databaseNamespace=require(\"./shared\").databaseNamespace,isTransactionCommand=require(\"../transactions\").isTransactionCommand,applySession=require(\"../sessions\").applySession,MongoNetworkError=require(\"../error\").MongoNetworkError,maxWireVersion=require(\"../utils\").maxWireVersion;function isClientEncryptionEnabled(r){return maxWireVersion(r)&&r.autoEncrypter}function command(r,e,n,o,s){if(\"function\"==typeof o&&(s=o,o={}),o=o||{},null==n)return s(new MongoError(`command ${JSON.stringify(n)} does not return a cursor`));if(!isClientEncryptionEnabled(r))return void _command(r,e,n,o,s);const i=maxWireVersion(r);\"number\"!=typeof i||i<8?s(new MongoError(\"Auto-encryption requires a minimum MongoDB version of 4.2\")):_cryptCommand(r,e,n,o,s)}function _command(r,e,n,o,s){const i=r.s.bson,t=r.s.pool,a=getReadPreference(n,o),c=supportsOpMsg(r),u=o.session,m=r.clusterTime;let l=m,d=Object.assign({},n);if(hasSessionSupport(r)&&u){const r=u.clusterTime;m&&m.clusterTime&&r&&r.clusterTime&&r.clusterTime.greaterThan(m.clusterTime)&&(l=r);const e=applySession(u,d,o);if(e)return s(e)}l&&(d.$clusterTime=l),isSharded(r)&&!c&&a&&\"primary\"!==a.mode&&(d={$query:d,$readPreference:a.toJSON()});const p=Object.assign({command:!0,numberToSkip:0,numberToReturn:-1,checkKeys:!1},o);p.slaveOk=a.slaveOk();const f=`${databaseNamespace(e)}.$cmd`,g=c?new Msg(i,f,d,p):new Query(i,f,d,p),y=u&&(u.inTransaction()||isTransactionCommand(d))?function(r){return r&&r instanceof MongoNetworkError&&!r.hasErrorLabel(\"TransientTransactionError\")&&r.addErrorLabel(\"TransientTransactionError\"),!n.commitTransaction&&r&&r instanceof MongoError&&r.hasErrorLabel(\"TransientTransactionError\")&&u.transaction.unpinServer(),s.apply(null,arguments)}:s;try{t.write(g,p,y)}catch(r){y(r)}}function hasSessionSupport(r){return null!=r&&(r.description?r.description.maxWireVersion>=6:null!=r.ismaster&&r.ismaster.maxWireVersion>=6)}function supportsOpMsg(r){const e=r.ismaster?r.ismaster:r.description;return null!=e&&(e.maxWireVersion>=6&&null==e.__nodejs_mock_server__)}function _cryptCommand(r,e,n,o,s){const i=r.autoEncrypter;function t(r,e){r||null==e?s(r,e):i.decrypt(e.result,o,(r,n)=>{r?s(r,null):(e.result=n,e.message.documents=[n],s(null,e))})}i.encrypt(e,n,o,(n,i)=>{n?s(n,null):_command(r,e,i,o,t)})}module.exports=command;","node_modules/mongodb/lib/explain.js":"\"use strict\";const MongoError=require(\"./core/error\").MongoError,ExplainVerbosity={queryPlanner:\"queryPlanner\",queryPlannerExtended:\"queryPlannerExtended\",executionStats:\"executionStats\",allPlansExecution:\"allPlansExecution\"};class Explain{constructor(e){this.verbosity=\"boolean\"==typeof e?e?\"allPlansExecution\":\"queryPlanner\":e}static fromOptions(e){if(null==e||void 0===e.explain)return;const n=e.explain;if(\"boolean\"==typeof n||n in ExplainVerbosity)return new Explain(e.explain);throw new MongoError(`explain must be one of ${Object.keys(ExplainVerbosity)} or a boolean`)}}module.exports={Explain:Explain};","node_modules/mongodb/lib/operations/execute_operation.js":"\"use strict\";const maybePromise=require(\"../utils\").maybePromise,MongoError=require(\"../core/error\").MongoError,Aspect=require(\"./operation\").Aspect,OperationBase=require(\"./operation\").OperationBase,ReadPreference=require(\"../core/topologies/read_preference\"),isRetryableError=require(\"../core/error\").isRetryableError,maxWireVersion=require(\"../core/utils\").maxWireVersion,isUnifiedTopology=require(\"../core/utils\").isUnifiedTopology;function executeOperation(e,r,o){if(null==e)throw new TypeError(\"This method requires a valid topology instance\");if(!(r instanceof OperationBase))throw new TypeError(\"This method requires a valid operation instance\");return maybePromise(e,o,o=>{if(isUnifiedTopology(e)&&e.shouldCheckForSessionSupport())return selectServerForSessionSupport(e,r,o);let s,n;if(e.hasSessionSupport()){if(null==r.session)n=Symbol(),s=e.startSession({owner:n}),r.session=s;else if(r.session.hasEnded)return o(new MongoError(\"Use of expired sessions is not permitted\"))}else if(r.session)return o(new MongoError(\"Current topology does not support sessions\"));function i(e,i){s&&s.owner===n&&(s.endSession(),r.session===s&&r.clearSession()),o(e,i)}try{r.hasAspect(Aspect.EXECUTE_WITH_SELECTION)?executeWithServerSelection(e,r,i):r.execute(i)}catch(e){s&&s.owner===n&&(s.endSession(),r.session===s&&r.clearSession()),o(e)}})}function supportsRetryableReads(e){return maxWireVersion(e)>=6}function executeWithServerSelection(e,r,o){const s=r.readPreference||ReadPreference.primary,n=r.session&&r.session.inTransaction();if(n&&!s.equals(ReadPreference.primary))return void o(new MongoError(`Read preference in a transaction must be primary, not: ${s.mode}`));const i={readPreference:s,session:r.session};function t(s,n){return null==s?o(null,n):isRetryableError(s)?void e.selectServer(i,(e,s)=>{!e&&supportsRetryableReads(s)?r.execute(s,o):o(e,null)}):o(s)}e.selectServer(i,(s,i)=>{if(s)return void o(s,null);const a=!1!==e.s.options.retryReads&&r.session&&!n&&supportsRetryableReads(i)&&r.canRetryRead;r.hasAspect(Aspect.RETRYABLE)&&a?r.execute(i,t):r.execute(i,o)})}function selectServerForSessionSupport(e,r,o){e.selectServer(ReadPreference.primaryPreferred,s=>{if(s)return o(s);executeOperation(e,r,o)})}module.exports=executeOperation;","node_modules/mongodb/lib/operations/operation.js":"\"use strict\";const Explain=require(\"../explain\").Explain,MongoError=require(\"../core/error\").MongoError,Aspect={READ_OPERATION:Symbol(\"READ_OPERATION\"),WRITE_OPERATION:Symbol(\"WRITE_OPERATION\"),RETRYABLE:Symbol(\"RETRYABLE\"),EXECUTE_WITH_SELECTION:Symbol(\"EXECUTE_WITH_SELECTION\"),NO_INHERIT_OPTIONS:Symbol(\"NO_INHERIT_OPTIONS\"),EXPLAINABLE:Symbol(\"EXPLAINABLE\")};class OperationBase{constructor(e){if(this.options=Object.assign({},e),this.hasAspect(Aspect.EXPLAINABLE))this.explain=Explain.fromOptions(e);else if(void 0!==this.options.explain)throw new MongoError(\"explain is not supported on this command\")}hasAspect(e){return null!=this.constructor.aspects&&this.constructor.aspects.has(e)}set session(e){Object.assign(this.options,{session:e})}get session(){return this.options.session}clearSession(){delete this.options.session}get canRetryRead(){return!0}execute(){throw new TypeError(\"`execute` must be implemented for OperationBase subclasses\")}}function defineAspects(e,s){return Array.isArray(s)||s instanceof Set||(s=[s]),s=new Set(s),Object.defineProperty(e,\"aspects\",{value:s,writable:!1}),s}module.exports={Aspect:Aspect,defineAspects:defineAspects,OperationBase:OperationBase};","node_modules/mongodb/lib/core/topologies/replset_state.js":"\"use strict\";var inherits=require(\"util\").inherits,f=require(\"util\").format,diff=require(\"./shared\").diff,EventEmitter=require(\"events\").EventEmitter,Logger=require(\"../connection/logger\"),ReadPreference=require(\"./read_preference\"),MongoError=require(\"../error\").MongoError,Buffer=require(\"safe-buffer\").Buffer,TopologyType={Single:\"Single\",ReplicaSetNoPrimary:\"ReplicaSetNoPrimary\",ReplicaSetWithPrimary:\"ReplicaSetWithPrimary\",Sharded:\"Sharded\",Unknown:\"Unknown\"},ServerType={Standalone:\"Standalone\",Mongos:\"Mongos\",PossiblePrimary:\"PossiblePrimary\",RSPrimary:\"RSPrimary\",RSSecondary:\"RSSecondary\",RSArbiter:\"RSArbiter\",RSOther:\"RSOther\",RSGhost:\"RSGhost\",Unknown:\"Unknown\"},ReplSetState=function(e){e=e||{},EventEmitter.call(this),this.topologyType=TopologyType.ReplicaSetNoPrimary,this.setName=e.setName,this.set={},this.id=e.id,this.setName=e.setName,this.logger=e.logger||Logger(\"ReplSet\",e),this.index=0,this.acceptableLatency=e.acceptableLatency||15,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS||1e4,this.primary=null,this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.maxElectionId=null,this.maxSetVersion=0,this.replicasetDescription={topologyType:\"Unknown\",servers:[]},this.logicalSessionTimeoutMinutes=void 0};inherits(ReplSetState,EventEmitter),ReplSetState.prototype.hasPrimaryAndSecondary=function(){return null!=this.primary&&this.secondaries.length>0},ReplSetState.prototype.hasPrimaryOrSecondary=function(){return this.hasPrimary()||this.hasSecondary()},ReplSetState.prototype.hasPrimary=function(){return null!=this.primary},ReplSetState.prototype.hasSecondary=function(){return this.secondaries.length>0},ReplSetState.prototype.get=function(e){for(var r=this.allServers(),t=0;t<r.length;t++)if(r[t].name.toLowerCase()===e.toLowerCase())return r[t];return null},ReplSetState.prototype.allServers=function(e){e=e||{};var r=this.primary?[this.primary]:[];return r=r.concat(this.secondaries),e.ignoreArbiters||(r=r.concat(this.arbiters)),r=r.concat(this.passives)},ReplSetState.prototype.destroy=function(e,r){const t=this.secondaries.concat(this.arbiters).concat(this.passives).concat(this.ghosts);this.primary&&t.push(this.primary);let s=t.length;const i=()=>{--s>0||(this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.primary=null,emitTopologyDescriptionChanged(this),\"function\"==typeof r&&r(null,null))};0!==s?t.forEach(r=>r.destroy(e,i)):i()},ReplSetState.prototype.remove=function(e,r){r=r||{};var t=e.name.toLowerCase(),s=this.primary?[this.primary]:[];s=(s=(s=s.concat(this.secondaries)).concat(this.arbiters)).concat(this.passives);for(var i=0;i<s.length;i++)if(!r.force&&s[i].equals(e)&&s[i].isConnected&&s[i].isConnected())return;this.set[t]&&(this.set[t].type=ServerType.Unknown,this.set[t].electionId=null,this.set[t].setName=null,this.set[t].setVersion=null);var a=null;this.primary&&this.primary.equals(e)&&(this.primary=null,this.topologyType=TopologyType.ReplicaSetNoPrimary,a=\"primary\"),a=removeFrom(e,this.secondaries)?\"secondary\":a,a=removeFrom(e,this.arbiters)?\"arbiter\":a,a=removeFrom(e,this.passives)?\"secondary\":a,removeFrom(e,this.ghosts),removeFrom(e,this.unknownServers),this.unknownServers.push(t),a&&this.emit(\"left\",a,e)};const isArbiter=e=>e.arbiterOnly&&e.setName;ReplSetState.prototype.update=function(e){var r=e.lastIsMaster(),t=e.name.toLowerCase();if(r){var s=Array.isArray(r.hosts)?r.hosts:[];s=(s=(s=s.concat(Array.isArray(r.arbiters)?r.arbiters:[])).concat(Array.isArray(r.passives)?r.passives:[])).map(function(e){return e.toLowerCase()});for(var i=0;i<s.length;i++)-1!==this.unknownServers.indexOf(s[i])||this.set[s[i]]&&this.set[s[i]].type!==ServerType.Unknown||this.unknownServers.push(s[i].toLowerCase()),this.set[s[i]]||(this.set[s[i]]={type:ServerType.Unknown,electionId:null,setName:null,setVersion:null})}if(!r&&!inList(r,e,this.unknownServers))return this.set[t]={type:ServerType.Unknown,setVersion:null,electionId:null,setName:null},this.set[t].type=ServerType.Unknown,this.set[t].electionId=r?r.electionId:r,this.set[t].setName=r?r.setName:r,this.set[t].setVersion=r?r.setVersion:r,-1===this.unknownServers.indexOf(e.name)&&this.unknownServers.push(t),!1;if(void 0===r.logicalSessionTimeoutMinutes||isArbiter(r)||(void 0===this.logicalSessionTimeoutMinutes||null===r.logicalSessionTimeoutMinutes?this.logicalSessionTimeoutMinutes=r.logicalSessionTimeoutMinutes:this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,r.logicalSessionTimeoutMinutes)),r&&\"isdbgrid\"===r.msg)return this.primary&&this.primary.name===t&&(this.primary=null,this.topologyType=TopologyType.ReplicaSetNoPrimary),!1;if(r.isreplicaset)return this.set[t]={type:ServerType.RSGhost,setVersion:null,electionId:null,setName:r.setName},this.primary&&this.primary.name===t&&(this.primary=null),this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),!1;if(r.setName&&r.hidden||r.setName&&!r.ismaster&&!r.secondary&&!r.arbiterOnly&&!r.passive)return this.set[t]={type:ServerType.RSOther,setVersion:null,electionId:null,setName:r.setName},this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),!1;if(r&&r.ismaster&&!r.setName)return this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.Unknown,this.remove(e,{force:!0}),!1;if(r&&!r.ismaster&&!r.secondary&&!r.arbiterOnly)return this.remove(e,{force:!0}),!1;if(r.me&&r.me.toLowerCase()!==t)return this.logger.isWarn()&&this.logger.warn(f(\"the seedlist server was removed due to its address %s not matching its ismaster.me address %s\",e.name,r.me)),delete this.set[t],removeFrom(e,this.unknownServers),e.destroy({force:!0}),this.primary&&!this.primary.equals(e)?this.topologyType=TopologyType.ReplicaSetWithPrimary:this.topologyType=TopologyType.ReplicaSetNoPrimary,!this.primary&&r.primary&&(this.set[r.primary.toLowerCase()]={type:ServerType.PossiblePrimary,setName:null,electionId:null,setVersion:null}),!1;if(!this.primary&&r.ismaster&&r.setName){var a=e.lastIsMaster().electionId;if(this.setName&&this.setName!==r.setName)return this.topologyType=TopologyType.ReplicaSetNoPrimary,new MongoError(f(\"setName from ismaster does not match provided connection setName [%s] != [%s]\",r.setName,this.setName));if(!this.maxElectionId&&a)this.maxElectionId=a;else if(this.maxElectionId&&a){var o=compareObjectIds(this.maxElectionId,a),n=e.lastIsMaster().setVersion;if(1===o)return this.topologyType=TopologyType.ReplicaSetNoPrimary,!1;if(0===o&&n&&n<this.maxSetVersion)return this.topologyType=TopologyType.ReplicaSetNoPrimary,!1;this.maxSetVersion=n,this.maxElectionId=a}return-1!==r.hosts.map(function(e){return e.toLowerCase()}).indexOf(t)?(this.primary=e,this.set[t]={type:ServerType.RSPrimary,setVersion:r.setVersion,electionId:r.electionId,setName:r.setName},this.topologyType=TopologyType.ReplicaSetWithPrimary,r.setName&&(this.setName=r.setName),removeFrom(e,this.unknownServers),removeFrom(e,this.secondaries),removeFrom(e,this.passives),this.emit(\"joined\",\"primary\",e)):this.topologyType=TopologyType.ReplicaSetNoPrimary,emitTopologyDescriptionChanged(this),!0}if(r.ismaster&&r.setName){var l=this.set[this.primary.name.toLowerCase()].electionId,p=this.set[this.primary.name.toLowerCase()].setVersion,m=this.set[this.primary.name.toLowerCase()].setName;a=e.lastIsMaster().electionId,n=e.lastIsMaster().setVersion;var y=e.lastIsMaster().setName;if(this.primary.equals(e)&&m===y)return!1;if(m&&m!==y)return this.primary.equals(e)?this.topologyType=TopologyType.ReplicaSetNoPrimary:this.topologyType=TopologyType.ReplicaSetWithPrimary,!1;if(l&&a){if(1===(o=compareObjectIds(l,a)))return!1;if(0===o&&p>n)return!1}else if(!l&&a&&n&&n<this.maxSetVersion)return!1;if(!this.maxElectionId&&a)this.maxElectionId=a;else if(this.maxElectionId&&a){if(1===(o=compareObjectIds(this.maxElectionId,a)))return!1;if(0===o&&p&&n){if(n<this.maxSetVersion)return!1}else if(n<this.maxSetVersion)return!1;this.maxElectionId=a,this.maxSetVersion=n}else this.maxSetVersion=n;return this.set[this.primary.name.toLowerCase()]={type:ServerType.Unknown,setVersion:null,electionId:null,setName:null},this.emit(\"left\",\"primary\",this.primary),this.primary.destroy({force:!0}),this.primary=e,this.set[t]={type:ServerType.RSPrimary,setVersion:r.setVersion,electionId:r.electionId,setName:r.setName},this.topologyType=TopologyType.ReplicaSetWithPrimary,r.setName&&(this.setName=r.setName),removeFrom(e,this.unknownServers),removeFrom(e,this.secondaries),removeFrom(e,this.passives),this.emit(\"joined\",\"primary\",e),emitTopologyDescriptionChanged(this),!0}return!this.primary&&r.primary&&(this.set[r.primary.toLowerCase()]={type:ServerType.PossiblePrimary,setVersion:null,electionId:null,setName:null}),r.secondary&&r.setName&&!inList(r,e,this.secondaries)&&this.setName&&this.setName===r.setName?(addToList(this,ServerType.RSSecondary,r,e,this.secondaries),this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),removeFrom(e,this.unknownServers),this.primary&&this.primary.name.toLowerCase()===t&&(e.destroy({force:!0}),this.primary=null,this.emit(\"left\",\"primary\",e)),this.emit(\"joined\",\"secondary\",e),emitTopologyDescriptionChanged(this),!0):isArbiter(r)&&!inList(r,e,this.arbiters)&&this.setName&&this.setName===r.setName?(addToList(this,ServerType.RSArbiter,r,e,this.arbiters),this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),removeFrom(e,this.unknownServers),this.emit(\"joined\",\"arbiter\",e),emitTopologyDescriptionChanged(this),!0):r.passive&&r.setName&&!inList(r,e,this.passives)&&this.setName&&this.setName===r.setName?(addToList(this,ServerType.RSSecondary,r,e,this.passives),this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),removeFrom(e,this.unknownServers),this.primary&&this.primary.name.toLowerCase()===t&&(e.destroy({force:!0}),this.primary=null,this.emit(\"left\",\"primary\",e)),this.emit(\"joined\",\"secondary\",e),emitTopologyDescriptionChanged(this),!0):this.set[t]&&this.set[t].type===ServerType.RSPrimary?(this.emit(\"left\",\"primary\",this.primary),this.primary.destroy({force:!0}),this.primary=null,this.topologyType=TopologyType.ReplicaSetNoPrimary,!1):(this.topologyType=this.primary?TopologyType.ReplicaSetWithPrimary:TopologyType.ReplicaSetNoPrimary,!1)},ReplSetState.prototype.updateServerMaxStaleness=function(e,r){for(var t=0,s=0;s<this.secondaries.length;s++)t=Math.max(t,this.secondaries[s].lastWriteDate);e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&this.hasPrimary()?e.staleness=e.lastUpdateTime-e.lastWriteDate-(this.primary.lastUpdateTime-this.primary.lastWriteDate)+r:e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&(e.staleness=t-e.lastWriteDate+r)},ReplSetState.prototype.updateSecondariesMaxStaleness=function(e){for(var r=0;r<this.secondaries.length;r++)this.updateServerMaxStaleness(this.secondaries[r],e)},ReplSetState.prototype.pickServer=function(e){if(\"primary\"===(e=e||ReadPreference.primary).preference&&null!=e.maxStalenessSeconds)return new MongoError(\"primary readPreference incompatible with maxStalenessSeconds\");var r=this.primary?[this.primary]:[];if(r=r.concat(this.secondaries),null!=e.maxStalenessSeconds)for(var t=0;t<r.length;t++)if(r[t].ismaster.maxWireVersion<5)return new MongoError(\"maxStalenessSeconds not supported by at least one of the replicaset members\");if(\"nearest\"===e.preference&&null==e.maxStalenessSeconds)return pickNearest(this,e);if(\"nearest\"===e.preference&&null!=e.maxStalenessSeconds)return pickNearestMaxStalenessSeconds(this,e);var s=this.secondaries;if(e.equals(ReadPreference.secondary)&&0===s.length)return new MongoError(\"no secondary server available\");if(e.equals(ReadPreference.secondaryPreferred)&&0===s.length&&null==this.primary)return new MongoError(\"no secondary or primary server available\");if(e.equals(ReadPreference.primary)&&null==this.primary)return new MongoError(\"no primary server available\");if(e.equals(ReadPreference.secondaryPreferred)||e.equals(ReadPreference.secondary)){if(s.length>0&&null==e.maxStalenessSeconds){var i=pickNearest(this,e);if(i)return i}else if(s.length>0&&null!=e.maxStalenessSeconds&&(i=pickNearestMaxStalenessSeconds(this,e)))return i;return e.equals(ReadPreference.secondaryPreferred)?this.primary:null}if(e.equals(ReadPreference.primaryPreferred)){if(i=null,this.primary)return this.primary;if(s.length>0&&null==e.maxStalenessSeconds?i=pickNearest(this,e):s.length>0&&null!=e.maxStalenessSeconds&&(i=pickNearestMaxStalenessSeconds(this,e)),i)return i}return this.primary};var filterByTags=function(e,r){if(null==e.tags)return r;for(var t=[],s=Array.isArray(e.tags)?e.tags:[e.tags],i=0;i<s.length;i++)for(var a=s[i],o=0;o<r.length;o++){var n=r[o].lastIsMaster().tags||{},l=!0;for(var p in a)n[p]!==a[p]&&(l=!1);l&&t.push(r[o])}return t};function pickNearestMaxStalenessSeconds(e,r){var t=[],s=1e3*r.maxStalenessSeconds;if(s<9e4)return new MongoError(\"maxStalenessSeconds must be set to at least 90 seconds\");e.primary&&\"secondary\"!==r.preference&&\"secondaryPreferred\"!==r.preference&&t.push(e.primary);for(var i=0;i<e.secondaries.length;i++)t.push(e.secondaries[i]);if(e.primary&&0===t.length&&\"secondaryPreferred\"!==r.preference&&t.push(e.primary),(t=(t=filterByTags(r,t)).filter(function(e){return e.staleness<=s})).sort(function(e,r){return e.lastIsMasterMS-r.lastIsMasterMS}),0===t.length)return null;e.index=e.index%t.length;var a=t[e.index];return e.index=e.index+1,a}function pickNearest(e,r){var t=[];e.primary&&\"secondary\"!==r.preference&&\"secondaryPreferred\"!==r.preference&&t.push(e.primary);for(var s=0;s<e.secondaries.length;s++)t.push(e.secondaries[s]);0===t.length&&e.primary&&\"secondaryPreferred\"!==r.preference&&t.push(e.primary),(t=filterByTags(r,t)).sort(function(e,r){return e.lastIsMasterMS-r.lastIsMasterMS});var i=t.length>0?t[0].lastIsMasterMS:0;if(0===(t=t.filter(function(r){return r.lastIsMasterMS<=i+e.acceptableLatency})).length)return null;e.index=e.index%t.length;var a=t[e.index];return e.index=e.index+1,a}function inList(e,r,t){for(var s=0;s<t.length;s++)if(t[s]&&t[s].name&&t[s].name.toLowerCase()===r.name.toLowerCase())return!0;return!1}function addToList(e,r,t,s,i){var a=s.name.toLowerCase();e.set[a].type=r,e.set[a].electionId=t?t.electionId:t,e.set[a].setName=t?t.setName:t,e.set[a].setVersion=t?t.setVersion:t,i.push(s)}function compareObjectIds(e,r){var t=Buffer.from(e.toHexString(),\"hex\"),s=Buffer.from(r.toHexString(),\"hex\");if(t===s)return 0;if(\"function\"==typeof Buffer.compare)return Buffer.compare(t,s);for(var i=t.length,a=s.length,o=Math.min(i,a),n=0;n<o&&t[n]===s[n];n++);return n!==o&&(i=t[n],a=s[n]),i<a?-1:a<i?1:0}function removeFrom(e,r){for(var t=0;t<r.length;t++){if(r[t].equals&&r[t].equals(e))return r.splice(t,1),!0;if(\"string\"==typeof r[t]&&r[t].toLowerCase()===e.name.toLowerCase())return r.splice(t,1),!0}return!1}function emitTopologyDescriptionChanged(e){if(e.listeners(\"topologyDescriptionChanged\").length>0){var r=\"Unknown\",t=e.setName;e.hasPrimaryAndSecondary()?r=\"ReplicaSetWithPrimary\":!e.hasPrimary()&&e.hasSecondary()&&(r=\"ReplicaSetNoPrimary\");var s={topologyType:r,setName:t,servers:[]};if(e.hasPrimary()){var i=e.primary.getDescription();i.type=\"RSPrimary\",s.servers.push(i)}s.servers=s.servers.concat(e.secondaries.map(function(e){var r=e.getDescription();return r.type=\"RSSecondary\",r})),s.servers=s.servers.concat(e.arbiters.map(function(e){var r=e.getDescription();return r.type=\"RSArbiter\",r})),s.servers=s.servers.concat(e.passives.map(function(e){var r=e.getDescription();return r.type=\"RSSecondary\",r}));var a=diff(e.replicasetDescription,s),o={topologyId:e.id,previousDescription:e.replicasetDescription,newDescription:s,diff:a};e.emit(\"topologyDescriptionChanged\",o),e.replicasetDescription=s}}module.exports=ReplSetState;","node_modules/denque/index.js":"\"use strict\";function Denque(t,i){i=i||{};this._head=0,this._tail=0,this._capacity=i.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}Denque.prototype.peekAt=function(t){var i=t;if(i===(0|i)){var s=this.size();if(!(i>=s||i<-s))return i<0&&(i+=s),i=this._head+i&this._capacityMask,this._list[i]}},Denque.prototype.get=function(t){return this.peekAt(t)},Denque.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},Denque.prototype.peekFront=function(){return this.peek()},Denque.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(Denque.prototype,\"length\",{get:function(){return this.size()}}),Denque.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},Denque.prototype.unshift=function(t){if(void 0===t)return this.size();var i=this._list.length;return this._head=this._head-1+i&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},Denque.prototype.shift=function(){var t=this._head;if(t!==this._tail){var i=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),i}},Denque.prototype.push=function(t){if(void 0===t)return this.size();var i=this._tail;return this._list[i]=t,this._tail=i+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},Denque.prototype.pop=function(){var t=this._tail;if(t!==this._head){var i=this._list.length;this._tail=t-1+i&this._capacityMask;var s=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=i>>>2&&this._shrinkArray(),s}},Denque.prototype.removeOne=function(t){var i=t;if(i===(0|i)&&this._head!==this._tail){var s=this.size(),h=this._list.length;if(!(i>=s||i<-s)){i<0&&(i+=s),i=this._head+i&this._capacityMask;var a,e=this._list[i];if(t<s/2){for(a=t;a>0;a--)this._list[i]=this._list[i=i-1+h&this._capacityMask];this._list[i]=void 0,this._head=this._head+1+h&this._capacityMask}else{for(a=s-1-t;a>0;a--)this._list[i]=this._list[i=i+1+h&this._capacityMask];this._list[i]=void 0,this._tail=this._tail-1+h&this._capacityMask}return e}}},Denque.prototype.remove=function(t,i){var s,h=t,a=i;if(h===(0|h)&&this._head!==this._tail){var e=this.size(),_=this._list.length;if(!(h>=e||h<-e||i<1)){if(h<0&&(h+=e),1===i||!i)return(s=new Array(1))[0]=this.removeOne(h),s;if(0===h&&h+i>=e)return s=this.toArray(),this.clear(),s;var r;for(h+i>e&&(i=e-h),s=new Array(i),r=0;r<i;r++)s[r]=this._list[this._head+h+r&this._capacityMask];if(h=this._head+h&this._capacityMask,t+i===e){for(this._tail=this._tail-i+_&this._capacityMask,r=i;r>0;r--)this._list[h=h+1+_&this._capacityMask]=void 0;return s}if(0===t){for(this._head=this._head+i+_&this._capacityMask,r=i-1;r>0;r--)this._list[h=h+1+_&this._capacityMask]=void 0;return s}if(h<e/2){for(this._head=this._head+t+i+_&this._capacityMask,r=t;r>0;r--)this.unshift(this._list[h=h-1+_&this._capacityMask]);for(h=this._head-1+_&this._capacityMask;a>0;)this._list[h=h-1+_&this._capacityMask]=void 0,a--;t<0&&(this._tail=h)}else{for(this._tail=h,h=h+i+_&this._capacityMask,r=e-(i+t);r>0;r--)this.push(this._list[h++]);for(h=this._tail;a>0;)this._list[h=h+1+_&this._capacityMask]=void 0,a--}return this._head<2&&this._tail>1e4&&this._tail<=_>>>2&&this._shrinkArray(),s}}},Denque.prototype.splice=function(t,i){var s=t;if(s===(0|s)){var h=this.size();if(s<0&&(s+=h),!(s>h)){if(arguments.length>2){var a,e,_,r=arguments.length,n=this._list.length,o=2;if(!h||s<h/2){for(e=new Array(s),a=0;a<s;a++)e[a]=this._list[this._head+a&this._capacityMask];for(0===i?(_=[],s>0&&(this._head=this._head+s+n&this._capacityMask)):(_=this.remove(s,i),this._head=this._head+s+n&this._capacityMask);r>o;)this.unshift(arguments[--r]);for(a=s;a>0;a--)this.unshift(e[a-1])}else{var c=(e=new Array(h-(s+i))).length;for(a=0;a<c;a++)e[a]=this._list[this._head+s+i+a&this._capacityMask];for(0===i?(_=[],s!=h&&(this._tail=this._head+s+n&this._capacityMask)):(_=this.remove(s,i),this._tail=this._tail-c+n&this._capacityMask);o<r;)this.push(arguments[o++]);for(a=0;a<c;a++)this.push(e[a])}return _}return this.remove(s,i)}}},Denque.prototype.clear=function(){this._head=0,this._tail=0},Denque.prototype.isEmpty=function(){return this._head===this._tail},Denque.prototype.toArray=function(){return this._copyArray(!1)},Denque.prototype._fromArray=function(t){for(var i=0;i<t.length;i++)this.push(t[i])},Denque.prototype._copyArray=function(t){var i,s=[],h=this._list,a=h.length;if(t||this._head>this._tail){for(i=this._head;i<a;i++)s.push(h[i]);for(i=0;i<this._tail;i++)s.push(h[i])}else for(i=this._head;i<this._tail;i++)s.push(h[i]);return s},Denque.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},Denque.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},module.exports=Denque;","node_modules/mongodb/lib/core/sdam/events.js":"\"use strict\";class ServerDescriptionChangedEvent{constructor(e,t,o,r){Object.assign(this,{topologyId:e,address:t,previousDescription:o,newDescription:r})}}class ServerOpeningEvent{constructor(e,t){Object.assign(this,{topologyId:e,address:t})}}class ServerClosedEvent{constructor(e,t){Object.assign(this,{topologyId:e,address:t})}}class TopologyDescriptionChangedEvent{constructor(e,t,o){Object.assign(this,{topologyId:e,previousDescription:t,newDescription:o})}}class TopologyOpeningEvent{constructor(e){Object.assign(this,{topologyId:e})}}class TopologyClosedEvent{constructor(e){Object.assign(this,{topologyId:e})}}class ServerHeartbeatStartedEvent{constructor(e){Object.assign(this,{connectionId:e})}}class ServerHeartbeatSucceededEvent{constructor(e,t,o){Object.assign(this,{connectionId:o,duration:e,reply:t})}}class ServerHeartbeatFailedEvent{constructor(e,t,o){Object.assign(this,{connectionId:o,duration:e,failure:t})}}module.exports={ServerDescriptionChangedEvent:ServerDescriptionChangedEvent,ServerOpeningEvent:ServerOpeningEvent,ServerClosedEvent:ServerClosedEvent,TopologyDescriptionChangedEvent:TopologyDescriptionChangedEvent,TopologyOpeningEvent:TopologyOpeningEvent,TopologyClosedEvent:TopologyClosedEvent,ServerHeartbeatStartedEvent:ServerHeartbeatStartedEvent,ServerHeartbeatSucceededEvent:ServerHeartbeatSucceededEvent,ServerHeartbeatFailedEvent:ServerHeartbeatFailedEvent};","node_modules/mongodb/lib/core/sdam/server.js":"\"use strict\";const EventEmitter=require(\"events\"),ConnectionPool=require(\"../../cmap/connection_pool\").ConnectionPool,CMAP_EVENT_NAMES=require(\"../../cmap/events\").CMAP_EVENT_NAMES,MongoError=require(\"../error\").MongoError,relayEvents=require(\"../utils\").relayEvents,BSON=require(\"../connection/utils\").retrieveBSON(),Logger=require(\"../connection/logger\"),ServerDescription=require(\"./server_description\").ServerDescription,compareTopologyVersion=require(\"./server_description\").compareTopologyVersion,ReadPreference=require(\"../topologies/read_preference\"),Monitor=require(\"./monitor\").Monitor,MongoNetworkError=require(\"../error\").MongoNetworkError,MongoNetworkTimeoutError=require(\"../error\").MongoNetworkTimeoutError,collationNotSupported=require(\"../utils\").collationNotSupported,debugOptions=require(\"../connection/utils\").debugOptions,isSDAMUnrecoverableError=require(\"../error\").isSDAMUnrecoverableError,isRetryableWriteError=require(\"../error\").isRetryableWriteError,isNodeShuttingDownError=require(\"../error\").isNodeShuttingDownError,isNetworkErrorBeforeHandshake=require(\"../error\").isNetworkErrorBeforeHandshake,maxWireVersion=require(\"../utils\").maxWireVersion,makeStateMachine=require(\"../utils\").makeStateMachine,common=require(\"./common\"),ServerType=common.ServerType,isTransactionCommand=require(\"../transactions\").isTransactionCommand,DEBUG_FIELDS=[\"reconnect\",\"reconnectTries\",\"reconnectInterval\",\"emitError\",\"cursorFactory\",\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"checkServerIdentity\",\"socketTimeout\",\"ssl\",\"ca\",\"crl\",\"cert\",\"key\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"servername\"],STATE_CLOSING=common.STATE_CLOSING,STATE_CLOSED=common.STATE_CLOSED,STATE_CONNECTING=common.STATE_CONNECTING,STATE_CONNECTED=common.STATE_CONNECTED,stateTransition=makeStateMachine({[STATE_CLOSED]:[STATE_CLOSED,STATE_CONNECTING],[STATE_CONNECTING]:[STATE_CONNECTING,STATE_CLOSING,STATE_CONNECTED,STATE_CLOSED],[STATE_CONNECTED]:[STATE_CONNECTED,STATE_CLOSING,STATE_CLOSED],[STATE_CLOSING]:[STATE_CLOSING,STATE_CLOSED]}),kMonitor=Symbol(\"monitor\");class Server extends EventEmitter{constructor(e,r,o){super(),this.s={description:e,options:r,logger:Logger(\"Server\",r),bson:r.bson||new BSON([BSON.Binary,BSON.Code,BSON.DBRef,BSON.Decimal128,BSON.Double,BSON.Int32,BSON.Long,BSON.Map,BSON.MaxKey,BSON.MinKey,BSON.ObjectId,BSON.BSONRegExp,BSON.Symbol,BSON.Timestamp]),state:STATE_CLOSED,credentials:r.credentials,topology:o};const t=Object.assign({host:this.description.host,port:this.description.port,bson:this.s.bson},r);this.s.pool=new ConnectionPool(t),relayEvents(this.s.pool,this,[\"commandStarted\",\"commandSucceeded\",\"commandFailed\"].concat(CMAP_EVENT_NAMES)),this.s.pool.on(\"clusterTimeReceived\",e=>{this.clusterTime=e}),this[kMonitor]=new Monitor(this,this.s.options),relayEvents(this[kMonitor],this,[\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"monitoring\"]),this[kMonitor].on(\"resetConnectionPool\",()=>{this.s.pool.clear()}),this[kMonitor].on(\"resetServer\",e=>markServerUnknown(this,e)),this[kMonitor].on(\"serverHeartbeatSucceeded\",e=>{this.emit(\"descriptionReceived\",new ServerDescription(this.description.address,e.reply,{roundTripTime:calculateRoundTripTime(this.description.roundTripTime,e.duration)})),this.s.state===STATE_CONNECTING&&(stateTransition(this,STATE_CONNECTED),this.emit(\"connect\",this))})}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){return this.s.options&&this.s.options.autoEncrypter?this.s.options.autoEncrypter:null}connect(){this.s.state===STATE_CLOSED&&(stateTransition(this,STATE_CONNECTING),this[kMonitor].connect())}destroy(e,r){\"function\"==typeof e&&(r=e,e={}),e=Object.assign({},{force:!1},e),this.s.state!==STATE_CLOSED?(stateTransition(this,STATE_CLOSING),this[kMonitor].close(),this.s.pool.close(e,e=>{stateTransition(this,STATE_CLOSED),this.emit(\"closed\"),\"function\"==typeof r&&r(e)})):\"function\"==typeof r&&r()}requestCheck(){this[kMonitor].requestCheck()}command(e,r,o,t){if(\"function\"==typeof o&&(t=o,o=(o={})||{}),this.s.state===STATE_CLOSING||this.s.state===STATE_CLOSED)return void t(new MongoError(\"server is closed\"));const n=basicReadValidations(this,o);if(n)return t(n);o=Object.assign({},o,{wireProtocolCommand:!1}),this.s.logger.isDebug()&&this.s.logger.debug(`executing command [${JSON.stringify({ns:e,cmd:r,options:debugOptions(DEBUG_FIELDS,o)})}] against ${this.name}`),collationNotSupported(this,r)?t(new MongoError(`server ${this.name} does not support collation`)):this.s.pool.withConnection((t,n,i)=>{if(t)return markServerUnknown(this,t),i(t);n.command(e,r,o,makeOperationHandler(this,n,r,o,i))},t)}query(e,r,o,t,n){this.s.state!==STATE_CLOSING&&this.s.state!==STATE_CLOSED?this.s.pool.withConnection((n,i,s)=>{if(n)return markServerUnknown(this,n),s(n);i.query(e,r,o,t,makeOperationHandler(this,i,r,t,s))},n):n(new MongoError(\"server is closed\"))}getMore(e,r,o,t,n){this.s.state!==STATE_CLOSING&&this.s.state!==STATE_CLOSED?this.s.pool.withConnection((n,i,s)=>{if(n)return markServerUnknown(this,n),s(n);i.getMore(e,r,o,t,makeOperationHandler(this,i,null,t,s))},n):n(new MongoError(\"server is closed\"))}killCursors(e,r,o){this.s.state!==STATE_CLOSING&&this.s.state!==STATE_CLOSED?this.s.pool.withConnection((o,t,n)=>{if(o)return markServerUnknown(this,o),n(o);t.killCursors(e,r,makeOperationHandler(this,t,null,void 0,n))},o):\"function\"==typeof o&&o(new MongoError(\"server is closed\"))}insert(e,r,o,t){executeWriteOperation({server:this,op:\"insert\",ns:e,ops:r},o,t)}update(e,r,o,t){executeWriteOperation({server:this,op:\"update\",ns:e,ops:r},o,t)}remove(e,r,o,t){executeWriteOperation({server:this,op:\"remove\",ns:e,ops:r},o,t)}}function supportsRetryableWrites(e){return e.description.maxWireVersion>=6&&e.description.logicalSessionTimeoutMinutes&&e.description.type!==ServerType.Standalone}function calculateRoundTripTime(e,r){if(-1===e)return r;return.2*r+.8*e}function basicReadValidations(e,r){if(r.readPreference&&!(r.readPreference instanceof ReadPreference))return new MongoError(\"readPreference must be an instance of ReadPreference\")}function executeWriteOperation(e,r,o){\"function\"==typeof r&&(o=r,r={}),r=r||{};const t=e.server,n=e.op,i=e.ns,s=Array.isArray(e.ops)?e.ops:[e.ops];t.s.state!==STATE_CLOSING&&t.s.state!==STATE_CLOSED?collationNotSupported(t,r)?o(new MongoError(`server ${t.name} does not support collation`)):!(r.writeConcern&&0===r.writeConcern.w||maxWireVersion(t)<5)||\"update\"!==n&&\"remove\"!==n||!s.find(e=>e.hint)?t.s.pool.withConnection((e,o,a)=>{if(e)return markServerUnknown(t,e),a(e);o[n](i,s,r,makeOperationHandler(t,o,s,r,a))},o):o(new MongoError(`servers < 3.4 do not support hint on ${n}`)):o(new MongoError(\"server is closed\"))}function markServerUnknown(e,r){r instanceof MongoNetworkError&&!(r instanceof MongoNetworkTimeoutError)&&e[kMonitor].reset(),e.emit(\"descriptionReceived\",new ServerDescription(e.description.address,null,{error:r,topologyVersion:r&&r.topologyVersion?r.topologyVersion:e.description.topologyVersion}))}function connectionIsStale(e,r){return r.generation!==e.generation}function shouldHandleStateChangeError(e,r){const o=r.topologyVersion,t=e.description.topologyVersion;return compareTopologyVersion(t,o)<0}function inActiveTransaction(e,r){return e&&e.inTransaction()&&!isTransactionCommand(r)}function makeOperationHandler(e,r,o,t,n){const i=t&&t.session;return function(t,s){t&&!connectionIsStale(e.s.pool,r)&&(t instanceof MongoNetworkError?(i&&!i.hasEnded&&(i.serverSession.isDirty=!0),supportsRetryableWrites(e)&&!inActiveTransaction(i,o)&&t.addErrorLabel(\"RetryableWriteError\"),t instanceof MongoNetworkTimeoutError&&!isNetworkErrorBeforeHandshake(t)||(markServerUnknown(e,t),e.s.pool.clear())):(maxWireVersion(e)<9&&isRetryableWriteError(t)&&!inActiveTransaction(i,o)&&t.addErrorLabel(\"RetryableWriteError\"),isSDAMUnrecoverableError(t)&&shouldHandleStateChangeError(e,t)&&((maxWireVersion(e)<=7||isNodeShuttingDownError(t))&&e.s.pool.clear(),markServerUnknown(e,t),process.nextTick(()=>e.requestCheck())))),n(t,s)}}Object.defineProperty(Server.prototype,\"clusterTime\",{get:function(){return this.s.topology.clusterTime},set:function(e){this.s.topology.clusterTime=e}}),module.exports={Server:Server};","node_modules/mongodb/lib/core/sdam/srv_polling.js":"\"use strict\";const Logger=require(\"../connection/logger\"),EventEmitter=require(\"events\").EventEmitter,dns=require(\"dns\");function matchesParentDomain(e,t){const r=/^.*?\\./,s=`.${e.replace(r,\"\")}`,i=`.${t.replace(r,\"\")}`;return s.endsWith(i)}class SrvPollingEvent{constructor(e){this.srvRecords=e}addresses(){return new Set(this.srvRecords.map(e=>`${e.name}:${e.port}`))}}class SrvPoller extends EventEmitter{constructor(e){if(super(),!e||!e.srvHost)throw new TypeError(\"options for SrvPoller must exist and include srvHost\");this.srvHost=e.srvHost,this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS||1e4,this.logger=Logger(\"srvPoller\",e),this.haMode=!1,this.generation=0,this._timeout=null}get srvAddress(){return`_mongodb._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&(clearTimeout(this._timeout),this.generation+=1,this._timeout=null)}schedule(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>this._poll(),this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(\"srvRecordDiscovery\",new SrvPollingEvent(e))}failure(e,t){this.logger.warn(e,t),this.haMode=!0,this.schedule()}parentDomainMismatch(e){this.logger.warn(`parent domain mismatch on SRV record (${e.name}:${e.port})`,e)}_poll(){const e=this.generation;dns.resolveSrv(this.srvAddress,(t,r)=>{if(e!==this.generation)return;if(t)return void this.failure(\"DNS error\",t);const s=[];r.forEach(e=>{matchesParentDomain(e.name,this.srvHost)?s.push(e):this.parentDomainMismatch(e)}),s.length?this.success(s):this.failure(\"No valid addresses found at host\")})}}module.exports.SrvPollingEvent=SrvPollingEvent,module.exports.SrvPoller=SrvPoller;","node_modules/mongodb/lib/cmap/events.js":"\"use strict\";class ConnectionPoolMonitoringEvent{constructor(n){this.time=new Date,this.address=n.address}}class ConnectionPoolCreatedEvent extends ConnectionPoolMonitoringEvent{constructor(n){super(n),this.options=n.options}}class ConnectionPoolClosedEvent extends ConnectionPoolMonitoringEvent{constructor(n){super(n)}}class ConnectionCreatedEvent extends ConnectionPoolMonitoringEvent{constructor(n,o){super(n),this.connectionId=o.id}}class ConnectionReadyEvent extends ConnectionPoolMonitoringEvent{constructor(n,o){super(n),this.connectionId=o.id}}class ConnectionClosedEvent extends ConnectionPoolMonitoringEvent{constructor(n,o,e){super(n),this.connectionId=o.id,this.reason=e||\"unknown\"}}class ConnectionCheckOutStartedEvent extends ConnectionPoolMonitoringEvent{constructor(n){super(n)}}class ConnectionCheckOutFailedEvent extends ConnectionPoolMonitoringEvent{constructor(n,o){super(n),this.reason=o}}class ConnectionCheckedOutEvent extends ConnectionPoolMonitoringEvent{constructor(n,o){super(n),this.connectionId=o.id}}class ConnectionCheckedInEvent extends ConnectionPoolMonitoringEvent{constructor(n,o){super(n),this.connectionId=o.id}}class ConnectionPoolClearedEvent extends ConnectionPoolMonitoringEvent{constructor(n){super(n)}}const CMAP_EVENT_NAMES=[\"connectionPoolCreated\",\"connectionPoolClosed\",\"connectionCreated\",\"connectionReady\",\"connectionClosed\",\"connectionCheckOutStarted\",\"connectionCheckOutFailed\",\"connectionCheckedOut\",\"connectionCheckedIn\",\"connectionPoolCleared\"];module.exports={CMAP_EVENT_NAMES:CMAP_EVENT_NAMES,ConnectionPoolCreatedEvent:ConnectionPoolCreatedEvent,ConnectionPoolClosedEvent:ConnectionPoolClosedEvent,ConnectionCreatedEvent:ConnectionCreatedEvent,ConnectionReadyEvent:ConnectionReadyEvent,ConnectionClosedEvent:ConnectionClosedEvent,ConnectionCheckOutStartedEvent:ConnectionCheckOutStartedEvent,ConnectionCheckOutFailedEvent:ConnectionCheckOutFailedEvent,ConnectionCheckedOutEvent:ConnectionCheckedOutEvent,ConnectionCheckedInEvent:ConnectionCheckedInEvent,ConnectionPoolClearedEvent:ConnectionPoolClearedEvent};","node_modules/mongodb/lib/core/sdam/server_selection.js":"\"use strict\";const ServerType=require(\"./common\").ServerType,TopologyType=require(\"./common\").TopologyType,ReadPreference=require(\"../topologies/read_preference\"),MongoError=require(\"../error\").MongoError,IDLE_WRITE_PERIOD=1e4,SMALLEST_MAX_STALENESS_SECONDS=90;function writableServerSelector(){return function(e,r){return latencyWindowReducer(e,r.filter(e=>e.isWritable))}}function maxStalenessReducer(e,r,t){if(null==e.maxStalenessSeconds||e.maxStalenessSeconds<0)return t;const n=e.maxStalenessSeconds,o=(r.heartbeatFrequencyMS+IDLE_WRITE_PERIOD)/1e3;if(n<o)throw new MongoError(`maxStalenessSeconds must be at least ${o} seconds`);if(n<SMALLEST_MAX_STALENESS_SECONDS)throw new MongoError(`maxStalenessSeconds must be at least ${SMALLEST_MAX_STALENESS_SECONDS} seconds`);if(r.type===TopologyType.ReplicaSetWithPrimary){const n=Array.from(r.servers.values()).filter(primaryFilter)[0];return t.reduce((t,o)=>{return(o.lastUpdateTime-o.lastWriteDate-(n.lastUpdateTime-n.lastWriteDate)+r.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&t.push(o),t},[])}if(r.type===TopologyType.ReplicaSetNoPrimary){if(0===t.length)return t;const n=t.reduce((e,r)=>r.lastWriteDate>e.lastWriteDate?r:e);return t.reduce((t,o)=>{return(n.lastWriteDate-o.lastWriteDate+r.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&t.push(o),t},[])}return t}function tagSetMatch(e,r){const t=Object.keys(e),n=Object.keys(r);for(let o=0;o<t.length;++o){const i=t[o];if(-1===n.indexOf(i)||r[i]!==e[i])return!1}return!0}function tagSetReducer(e,r){if(null==e.tags||Array.isArray(e.tags)&&0===e.tags.length)return r;for(let t=0;t<e.tags.length;++t){const n=e.tags[t],o=r.reduce((e,r)=>(tagSetMatch(n,r.tags)&&e.push(r),e),[]);if(o.length)return o}return[]}function latencyWindowReducer(e,r){const t=r.reduce((e,r)=>-1===e?r.roundTripTime:Math.min(r.roundTripTime,e),-1),n=t+e.localThresholdMS;return r.reduce((e,r)=>(r.roundTripTime<=n&&r.roundTripTime>=t&&e.push(r),e),[])}function primaryFilter(e){return e.type===ServerType.RSPrimary}function secondaryFilter(e){return e.type===ServerType.RSSecondary}function nearestFilter(e){return e.type===ServerType.RSSecondary||e.type===ServerType.RSPrimary}function knownFilter(e){return e.type!==ServerType.Unknown}function readPreferenceServerSelector(e){if(!e.isValid())throw new TypeError(\"Invalid read preference specified\");return function(r,t){const n=r.commonWireVersion;if(n&&e.minWireVersion&&e.minWireVersion>n)throw new MongoError(`Minimum wire version '${e.minWireVersion}' required, but found '${n}'`);if(r.type===TopologyType.Unknown)return[];if(r.type===TopologyType.Single||r.type===TopologyType.Sharded)return latencyWindowReducer(r,t.filter(knownFilter));const o=e.mode;if(o===ReadPreference.PRIMARY)return t.filter(primaryFilter);if(o===ReadPreference.PRIMARY_PREFERRED){const e=t.filter(primaryFilter);if(e.length)return e}const i=o===ReadPreference.NEAREST?nearestFilter:secondaryFilter,a=latencyWindowReducer(r,tagSetReducer(e,maxStalenessReducer(e,r,t.filter(i))));return o===ReadPreference.SECONDARY_PREFERRED&&0===a.length?t.filter(primaryFilter):a}}module.exports={writableServerSelector:writableServerSelector,readPreferenceServerSelector:readPreferenceServerSelector};","node_modules/mongodb/lib/cmap/connection_pool.js":"\"use strict\";const Denque=require(\"denque\"),EventEmitter=require(\"events\").EventEmitter,Logger=require(\"../core/connection/logger\"),makeCounter=require(\"../utils\").makeCounter,MongoError=require(\"../core/error\").MongoError,Connection=require(\"./connection\").Connection,eachAsync=require(\"../core/utils\").eachAsync,connect=require(\"../core/connection/connect\"),relayEvents=require(\"../core/utils\").relayEvents,errors=require(\"./errors\"),PoolClosedError=errors.PoolClosedError,WaitQueueTimeoutError=errors.WaitQueueTimeoutError,events=require(\"./events\"),ConnectionPoolCreatedEvent=events.ConnectionPoolCreatedEvent,ConnectionPoolClosedEvent=events.ConnectionPoolClosedEvent,ConnectionCreatedEvent=events.ConnectionCreatedEvent,ConnectionReadyEvent=events.ConnectionReadyEvent,ConnectionClosedEvent=events.ConnectionClosedEvent,ConnectionCheckOutStartedEvent=events.ConnectionCheckOutStartedEvent,ConnectionCheckOutFailedEvent=events.ConnectionCheckOutFailedEvent,ConnectionCheckedOutEvent=events.ConnectionCheckedOutEvent,ConnectionCheckedInEvent=events.ConnectionCheckedInEvent,ConnectionPoolClearedEvent=events.ConnectionPoolClearedEvent,kLogger=Symbol(\"logger\"),kConnections=Symbol(\"connections\"),kPermits=Symbol(\"permits\"),kMinPoolSizeTimer=Symbol(\"minPoolSizeTimer\"),kGeneration=Symbol(\"generation\"),kConnectionCounter=Symbol(\"connectionCounter\"),kCancellationToken=Symbol(\"cancellationToken\"),kWaitQueue=Symbol(\"waitQueue\"),kCancelled=Symbol(\"cancelled\"),VALID_POOL_OPTIONS=new Set([\"ssl\",\"bson\",\"connectionType\",\"monitorCommands\",\"socketTimeout\",\"credentials\",\"compression\",\"host\",\"port\",\"localAddress\",\"localPort\",\"family\",\"hints\",\"lookup\",\"path\",\"ca\",\"cert\",\"sigalgs\",\"ciphers\",\"clientCertEngine\",\"crl\",\"dhparam\",\"ecdhCurve\",\"honorCipherOrder\",\"key\",\"privateKeyEngine\",\"privateKeyIdentifier\",\"maxVersion\",\"minVersion\",\"passphrase\",\"pfx\",\"secureOptions\",\"secureProtocol\",\"sessionIdContext\",\"allowHalfOpen\",\"rejectUnauthorized\",\"pskCallback\",\"ALPNProtocols\",\"servername\",\"checkServerIdentity\",\"session\",\"minDHSize\",\"secureContext\",\"maxPoolSize\",\"minPoolSize\",\"maxIdleTimeMS\",\"waitQueueTimeoutMS\"]);function resolveOptions(e,n){const o=Array.from(VALID_POOL_OPTIONS).reduce((n,o)=>(Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]),n),{});return Object.freeze(Object.assign({},n,o))}class ConnectionPool extends EventEmitter{constructor(e){if(super(),e=e||{},this.closed=!1,this.options=resolveOptions(e,{connectionType:Connection,maxPoolSize:\"number\"==typeof e.maxPoolSize?e.maxPoolSize:100,minPoolSize:\"number\"==typeof e.minPoolSize?e.minPoolSize:0,maxIdleTimeMS:\"number\"==typeof e.maxIdleTimeMS?e.maxIdleTimeMS:0,waitQueueTimeoutMS:\"number\"==typeof e.waitQueueTimeoutMS?e.waitQueueTimeoutMS:0,autoEncrypter:e.autoEncrypter,metadata:e.metadata}),e.minSize>e.maxSize)throw new TypeError(\"Connection pool minimum size must not be greater than maxiumum pool size\");this[kLogger]=Logger(\"ConnectionPool\",e),this[kConnections]=new Denque,this[kPermits]=this.options.maxPoolSize,this[kMinPoolSizeTimer]=void 0,this[kGeneration]=0,this[kConnectionCounter]=makeCounter(1),this[kCancellationToken]=new EventEmitter,this[kCancellationToken].setMaxListeners(1/0),this[kWaitQueue]=new Denque,process.nextTick(()=>{this.emit(\"connectionPoolCreated\",new ConnectionPoolCreatedEvent(this)),ensureMinPoolSize(this)})}get address(){return`${this.options.host}:${this.options.port}`}get generation(){return this[kGeneration]}get totalConnectionCount(){return this[kConnections].length+(this.options.maxPoolSize-this[kPermits])}get availableConnectionCount(){return this[kConnections].length}get waitQueueSize(){return this[kWaitQueue].length}checkOut(e){if(this.emit(\"connectionCheckOutStarted\",new ConnectionCheckOutStartedEvent(this)),this.closed)return this.emit(\"connectionCheckOutFailed\",new ConnectionCheckOutFailedEvent(this,\"poolClosed\")),void e(new PoolClosedError(this));const n={callback:e},o=this,t=this.options.waitQueueTimeoutMS;t&&(n.timer=setTimeout(()=>{n[kCancelled]=!0,n.timer=void 0,o.emit(\"connectionCheckOutFailed\",new ConnectionCheckOutFailedEvent(o,\"timeout\")),n.callback(new WaitQueueTimeoutError(o))},t)),this[kWaitQueue].push(n),process.nextTick(()=>processWaitQueue(this))}checkIn(e){const n=this.closed,o=connectionIsStale(this,e),t=!!(n||o||e.closed);if(t||(e.markAvailable(),this[kConnections].push(e)),this.emit(\"connectionCheckedIn\",new ConnectionCheckedInEvent(this,e)),t){destroyConnection(this,e,e.closed?\"error\":n?\"poolClosed\":\"stale\")}process.nextTick(()=>processWaitQueue(this))}clear(){this[kGeneration]+=1,this.emit(\"connectionPoolCleared\",new ConnectionPoolClearedEvent(this))}close(e,n){if(\"function\"==typeof e&&(n=e),e=Object.assign({force:!1},e),this.closed)return n();for(this[kCancellationToken].emit(\"cancel\");this.waitQueueSize;){const e=this[kWaitQueue].pop();clearTimeout(e.timer),e[kCancelled]||e.callback(new MongoError(\"connection pool closed\"))}this[kMinPoolSizeTimer]&&clearTimeout(this[kMinPoolSizeTimer]),\"function\"==typeof this[kConnectionCounter].return&&this[kConnectionCounter].return(),this.closed=!0,eachAsync(this[kConnections].toArray(),(n,o)=>{this.emit(\"connectionClosed\",new ConnectionClosedEvent(this,n,\"poolClosed\")),n.destroy(e,o)},e=>{this[kConnections].clear(),this.emit(\"connectionPoolClosed\",new ConnectionPoolClosedEvent(this)),n(e)})}withConnection(e,n){this.checkOut((o,t)=>{e(o,t,(e,o)=>{\"function\"==typeof n&&(e?n(e):n(void 0,o)),t&&this.checkIn(t)})})}}function ensureMinPoolSize(e){if(e.closed||0===e.options.minPoolSize)return;const n=e.options.minPoolSize;for(let o=e.totalConnectionCount;o<n;++o)createConnection(e);e[kMinPoolSizeTimer]=setTimeout(()=>ensureMinPoolSize(e),10)}function connectionIsStale(e,n){return n.generation!==e[kGeneration]}function connectionIsIdle(e,n){return!!(e.options.maxIdleTimeMS&&n.idleTime>e.options.maxIdleTimeMS)}function createConnection(e,n){const o=Object.assign({id:e[kConnectionCounter].next().value,generation:e[kGeneration]},e.options);e[kPermits]--,connect(o,e[kCancellationToken],(o,t)=>{if(o)return e[kPermits]++,e[kLogger].debug(`connection attempt failed with error [${JSON.stringify(o)}]`),void(\"function\"==typeof n&&n(o));e.closed?t.destroy({force:!0}):(relayEvents(t,e,[\"commandStarted\",\"commandFailed\",\"commandSucceeded\",\"clusterTimeReceived\"]),e.emit(\"connectionCreated\",new ConnectionCreatedEvent(e,t)),t.markAvailable(),e.emit(\"connectionReady\",new ConnectionReadyEvent(e,t)),\"function\"!=typeof n?(e[kConnections].push(t),process.nextTick(()=>processWaitQueue(e))):n(void 0,t))})}function destroyConnection(e,n,o){e.emit(\"connectionClosed\",new ConnectionClosedEvent(e,n,o)),e[kPermits]++,process.nextTick(()=>n.destroy())}function processWaitQueue(e){if(e.closed)return;for(;e.waitQueueSize;){const n=e[kWaitQueue].peekFront();if(n[kCancelled]){e[kWaitQueue].shift();continue}if(!e.availableConnectionCount)break;const o=e[kConnections].shift(),t=connectionIsStale(e,o),i=connectionIsIdle(e,o);if(!t&&!i&&!o.closed)return e.emit(\"connectionCheckedOut\",new ConnectionCheckedOutEvent(e,o)),clearTimeout(n.timer),e[kWaitQueue].shift(),void n.callback(void 0,o);const c=o.closed?\"error\":t?\"stale\":\"idle\";destroyConnection(e,o,c)}const n=e.options.maxPoolSize;e.waitQueueSize&&(n<=0||e.totalConnectionCount<n)&&createConnection(e,(n,o)=>{const t=e[kWaitQueue].shift();null==t||t[kCancelled]?null==n&&e[kConnections].push(o):(n?e.emit(\"connectionCheckOutFailed\",new ConnectionCheckOutFailedEvent(e,n)):e.emit(\"connectionCheckedOut\",new ConnectionCheckedOutEvent(e,o)),clearTimeout(t.timer),t.callback(n,o))})}module.exports={ConnectionPool:ConnectionPool};","node_modules/mongodb/lib/core/sdam/monitor.js":"\"use strict\";const ServerType=require(\"./common\").ServerType,EventEmitter=require(\"events\"),connect=require(\"../connection/connect\"),Connection=require(\"../../cmap/connection\").Connection,common=require(\"./common\"),makeStateMachine=require(\"../utils\").makeStateMachine,MongoNetworkError=require(\"../error\").MongoNetworkError,BSON=require(\"../connection/utils\").retrieveBSON(),makeInterruptableAsyncInterval=require(\"../../utils\").makeInterruptableAsyncInterval,calculateDurationInMs=require(\"../../utils\").calculateDurationInMs,now=require(\"../../utils\").now,sdamEvents=require(\"./events\"),ServerHeartbeatStartedEvent=sdamEvents.ServerHeartbeatStartedEvent,ServerHeartbeatSucceededEvent=sdamEvents.ServerHeartbeatSucceededEvent,ServerHeartbeatFailedEvent=sdamEvents.ServerHeartbeatFailedEvent,kServer=Symbol(\"server\"),kMonitorId=Symbol(\"monitorId\"),kConnection=Symbol(\"connection\"),kCancellationToken=Symbol(\"cancellationToken\"),kRTTPinger=Symbol(\"rttPinger\"),kRoundTripTime=Symbol(\"roundTripTime\"),STATE_CLOSED=common.STATE_CLOSED,STATE_CLOSING=common.STATE_CLOSING,STATE_IDLE=\"idle\",STATE_MONITORING=\"monitoring\",stateTransition=makeStateMachine({[STATE_CLOSING]:[STATE_CLOSING,STATE_IDLE,STATE_CLOSED],[STATE_CLOSED]:[STATE_CLOSED,STATE_MONITORING],[STATE_IDLE]:[STATE_IDLE,STATE_MONITORING,STATE_CLOSING],[STATE_MONITORING]:[STATE_MONITORING,STATE_IDLE,STATE_CLOSING]}),INVALID_REQUEST_CHECK_STATES=new Set([STATE_CLOSING,STATE_CLOSED,STATE_MONITORING]);function isInCloseState(e){return e.s.state===STATE_CLOSED||e.s.state===STATE_CLOSING}class Monitor extends EventEmitter{constructor(e,t){super(t),this[kServer]=e,this[kConnection]=void 0,this[kCancellationToken]=new EventEmitter,this[kCancellationToken].setMaxListeners(1/0),this[kMonitorId]=null,this.s={state:STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:\"number\"==typeof t.connectionTimeout?t.connectionTimeout:\"number\"==typeof t.connectTimeoutMS?t.connectTimeoutMS:1e4,heartbeatFrequencyMS:\"number\"==typeof t.heartbeatFrequencyMS?t.heartbeatFrequencyMS:1e4,minHeartbeatFrequencyMS:\"number\"==typeof t.minHeartbeatFrequencyMS?t.minHeartbeatFrequencyMS:500});const n=Object.assign({id:\"<monitor>\",host:e.description.host,port:e.description.port,bson:e.s.bson,connectionType:Connection},e.s.options,this.options,{raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0});delete n.credentials,delete n.autoEncrypter,this.connectOptions=Object.freeze(n)}connect(){if(this.s.state!==STATE_CLOSED)return;const e=this.options.heartbeatFrequencyMS,t=this.options.minHeartbeatFrequencyMS;this[kMonitorId]=makeInterruptableAsyncInterval(monitorServer(this),{interval:e,minInterval:t,immediate:!0})}requestCheck(){INVALID_REQUEST_CHECK_STATES.has(this.s.state)||this[kMonitorId].wake()}reset(){const e=this[kServer].description.topologyVersion;if(isInCloseState(this)||null==e)return;stateTransition(this,STATE_CLOSING),resetMonitorState(this),stateTransition(this,STATE_IDLE);const t=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this[kMonitorId]=makeInterruptableAsyncInterval(monitorServer(this),{interval:t,minInterval:n})}close(){isInCloseState(this)||(stateTransition(this,STATE_CLOSING),resetMonitorState(this),this.emit(\"close\"),stateTransition(this,STATE_CLOSED))}}function resetMonitorState(e){e[kMonitorId]&&(e[kMonitorId].stop(),e[kMonitorId]=null),e[kRTTPinger]&&(e[kRTTPinger].close(),e[kRTTPinger]=void 0),e[kCancellationToken].emit(\"cancel\"),e[kMonitorId]&&(clearTimeout(e[kMonitorId]),e[kMonitorId]=void 0),e[kConnection]&&e[kConnection].destroy({force:!0})}function checkServer(e,t){let n=now();function o(o){e[kConnection]&&(e[kConnection].destroy({force:!0}),e[kConnection]=void 0),e.emit(\"serverHeartbeatFailed\",new ServerHeartbeatFailedEvent(calculateDurationInMs(n),o,e.address)),e.emit(\"resetServer\",o),e.emit(\"resetConnectionPool\"),t(o)}if(e.emit(\"serverHeartbeatStarted\",new ServerHeartbeatStartedEvent(e.address)),null!=e[kConnection]&&!e[kConnection].closed){const r=e.options.connectTimeoutMS,i=e.options.heartbeatFrequencyMS,s=e[kServer].description.topologyVersion,a=null!=s,c={ismaster:!0},T={socketTimeout:r};return a&&(c.maxAwaitTimeMS=i,c.topologyVersion=makeTopologyVersion(s),r&&(T.socketTimeout=r+i),T.exhaustAllowed=!0,null==e[kRTTPinger]&&(e[kRTTPinger]=new RTTPinger(e[kCancellationToken],e.connectOptions))),void e[kConnection].command(\"admin.$cmd\",c,T,(r,i)=>{if(r)return void o(r);const s=i.result,c=e[kRTTPinger],T=a&&c?c.roundTripTime:calculateDurationInMs(n);e.emit(\"serverHeartbeatSucceeded\",new ServerHeartbeatSucceededEvent(T,s,e.address)),a&&s.topologyVersion?(e.emit(\"serverHeartbeatStarted\",new ServerHeartbeatStartedEvent(e.address)),n=now()):(e[kRTTPinger]&&(e[kRTTPinger].close(),e[kRTTPinger]=void 0),t(void 0,s))})}connect(e.connectOptions,e[kCancellationToken],(r,i)=>{if(i&&isInCloseState(e))i.destroy({force:!0});else{if(r)return e[kConnection]=void 0,r instanceof MongoNetworkError||e.emit(\"resetConnectionPool\"),void o(r);e[kConnection]=i,e.emit(\"serverHeartbeatSucceeded\",new ServerHeartbeatSucceededEvent(calculateDurationInMs(n),i.ismaster,e.address)),t(void 0,i.ismaster)}})}function monitorServer(e){return t=>{function n(){isInCloseState(e)||stateTransition(e,STATE_IDLE),t()}stateTransition(e,STATE_MONITORING),process.nextTick(()=>e.emit(\"monitoring\",e[kServer])),checkServer(e,(t,o)=>{if(t&&e[kServer].description.type===ServerType.Unknown)return e.emit(\"resetServer\",t),n();o&&o.topologyVersion&&setTimeout(()=>{isInCloseState(e)||e[kMonitorId].wake()}),n()})}}function makeTopologyVersion(e){return{processId:e.processId,counter:BSON.Long.fromNumber(e.counter)}}class RTTPinger{constructor(e,t){this[kConnection]=null,this[kCancellationToken]=e,this[kRoundTripTime]=0,this.closed=!1;const n=t.heartbeatFrequencyMS;this[kMonitorId]=setTimeout(()=>measureRoundTripTime(this,t),n)}get roundTripTime(){return this[kRoundTripTime]}close(){this.closed=!0,clearTimeout(this[kMonitorId]),this[kMonitorId]=void 0,this[kConnection]&&this[kConnection].destroy({force:!0})}}function measureRoundTripTime(e,t){const n=now(),o=e[kCancellationToken],r=t.heartbeatFrequencyMS;function i(o){e.closed?o.destroy({force:!0}):(null==e[kConnection]&&(e[kConnection]=o),e[kRoundTripTime]=calculateDurationInMs(n),e[kMonitorId]=setTimeout(()=>measureRoundTripTime(e,t),r))}e.closed||(null!=e[kConnection]?e[kConnection].command(\"admin.$cmd\",{ismaster:1},t=>{if(t)return e[kConnection]=void 0,void(e[kRoundTripTime]=0);i()}):connect(t,o,(t,n)=>{if(t)return e[kConnection]=void 0,void(e[kRoundTripTime]=0);i(n)}))}module.exports={Monitor:Monitor};","node_modules/mongodb/lib/cmap/connection.js":"\"use strict\";const EventEmitter=require(\"events\"),MessageStream=require(\"./message_stream\"),MongoError=require(\"../core/error\").MongoError,MongoNetworkError=require(\"../core/error\").MongoNetworkError,MongoNetworkTimeoutError=require(\"../core/error\").MongoNetworkTimeoutError,MongoWriteConcernError=require(\"../core/error\").MongoWriteConcernError,CommandResult=require(\"../core/connection/command_result\"),StreamDescription=require(\"./stream_description\").StreamDescription,wp=require(\"../core/wireprotocol\"),apm=require(\"../core/connection/apm\"),updateSessionFromResponse=require(\"../core/sessions\").updateSessionFromResponse,uuidV4=require(\"../core/utils\").uuidV4,now=require(\"../utils\").now,calculateDurationInMs=require(\"../utils\").calculateDurationInMs,kStream=Symbol(\"stream\"),kQueue=Symbol(\"queue\"),kMessageStream=Symbol(\"messageStream\"),kGeneration=Symbol(\"generation\"),kLastUseTime=Symbol(\"lastUseTime\"),kClusterTime=Symbol(\"clusterTime\"),kDescription=Symbol(\"description\"),kIsMaster=Symbol(\"ismaster\"),kAutoEncrypter=Symbol(\"autoEncrypter\");class Connection extends EventEmitter{constructor(e,t){super(t),this.id=t.id,this.address=streamIdentifier(e),this.bson=t.bson,this.socketTimeout=\"number\"==typeof t.socketTimeout?t.socketTimeout:0,this.host=t.host||\"localhost\",this.port=t.port||27017,this.monitorCommands=\"boolean\"==typeof t.monitorCommands&&t.monitorCommands,this.closed=!1,this.destroyed=!1,this[kDescription]=new StreamDescription(this.address,t),this[kGeneration]=t.generation,this[kLastUseTime]=now(),t.autoEncrypter&&(this[kAutoEncrypter]=t.autoEncrypter),this[kQueue]=new Map,this[kMessageStream]=new MessageStream(t),this[kMessageStream].on(\"message\",messageHandler(this)),this[kStream]=e,e.on(\"error\",()=>{}),this[kMessageStream].on(\"error\",e=>this.handleIssue({destroy:e})),e.on(\"close\",()=>this.handleIssue({isClose:!0})),e.on(\"timeout\",()=>this.handleIssue({isTimeout:!0,destroy:!0})),e.pipe(this[kMessageStream]),this[kMessageStream].pipe(e)}get description(){return this[kDescription]}get ismaster(){return this[kIsMaster]}set ismaster(e){this[kDescription].receiveResponse(e),this[kIsMaster]=e}get generation(){return this[kGeneration]||0}get idleTime(){return calculateDurationInMs(this[kLastUseTime])}get clusterTime(){return this[kClusterTime]}get stream(){return this[kStream]}markAvailable(){this[kLastUseTime]=now()}handleIssue(e){if(!this.closed){e.destroy&&this[kStream].destroy(\"boolean\"==typeof e.destroy?void 0:e.destroy),this.closed=!0;for(const t of this[kQueue]){const o=t[1];e.isTimeout?o.cb(new MongoNetworkTimeoutError(`connection ${this.id} to ${this.address} timed out`,{beforeHandshake:null==this.ismaster})):e.isClose?o.cb(new MongoNetworkError(`connection ${this.id} to ${this.address} closed`)):o.cb(\"boolean\"==typeof e.destroy?void 0:e.destroy)}this[kQueue].clear(),this.emit(\"close\")}}destroy(e,t){return\"function\"==typeof e&&(t=e,e={}),e=Object.assign({force:!1},e),null==this[kStream]||this.destroyed?(this.destroyed=!0,void(\"function\"==typeof t&&t())):e.force?(this[kStream].destroy(),this.destroyed=!0,void(\"function\"==typeof t&&t())):void this[kStream].end(e=>{this.destroyed=!0,\"function\"==typeof t&&t(e)})}command(e,t,o,r){wp.command(makeServerTrampoline(this),e,t,o,r)}query(e,t,o,r,s){wp.query(makeServerTrampoline(this),e,t,o,r,s)}getMore(e,t,o,r,s){wp.getMore(makeServerTrampoline(this),e,t,o,r,s)}killCursors(e,t,o){wp.killCursors(makeServerTrampoline(this),e,t,o)}insert(e,t,o,r){wp.insert(makeServerTrampoline(this),e,t,o,r)}update(e,t,o,r){wp.update(makeServerTrampoline(this),e,t,o,r)}remove(e,t,o,r){wp.remove(makeServerTrampoline(this),e,t,o,r)}}function makeServerTrampoline(e){const t={description:e.description,clusterTime:e[kClusterTime],s:{bson:e.bson,pool:{write:write.bind(e),isConnected:()=>!0}}};return e[kAutoEncrypter]&&(t.autoEncrypter=e[kAutoEncrypter]),t}function messageHandler(e){return function(t){if(e.emit(\"message\",t),!e[kQueue].has(t.responseTo))return;const o=e[kQueue].get(t.responseTo),r=o.cb;e[kQueue].delete(t.responseTo),t.moreToCome?e[kQueue].set(t.requestId,o):o.socketTimeoutOverride&&e[kStream].setTimeout(e.socketTimeout);try{t.parse(o)}catch(e){return void r(new MongoError(e))}if(t.documents[0]){const s=t.documents[0],i=o.session;if(i&&updateSessionFromResponse(i,s),s.$clusterTime&&(e[kClusterTime]=s.$clusterTime,e.emit(\"clusterTimeReceived\",s.$clusterTime)),o.command){if(s.writeConcernError)return void r(new MongoWriteConcernError(s.writeConcernError,s));if(0===s.ok||s.$err||s.errmsg||s.code)return void r(new MongoError(s))}}r(void 0,new CommandResult(o.fullResult?t:t.documents[0],e,t))}}function streamIdentifier(e){return\"function\"==typeof e.address?`${e.remoteAddress}:${e.remotePort}`:uuidV4().toString(\"hex\")}function write(e,t,o){\"function\"==typeof t&&(o=t),t=t||{};const r={requestId:e.requestId,cb:o,session:t.session,fullResult:\"boolean\"==typeof t.fullResult&&t.fullResult,noResponse:\"boolean\"==typeof t.noResponse&&t.noResponse,documentsReturnedIn:t.documentsReturnedIn,command:!!t.command,promoteLongs:\"boolean\"!=typeof t.promoteLongs||t.promoteLongs,promoteValues:\"boolean\"!=typeof t.promoteValues||t.promoteValues,promoteBuffers:\"boolean\"==typeof t.promoteBuffers&&t.promoteBuffers,raw:\"boolean\"==typeof t.raw&&t.raw};this[kDescription]&&this[kDescription].compressor&&(r.agreedCompressor=this[kDescription].compressor,this[kDescription].zlibCompressionLevel&&(r.zlibCompressionLevel=this[kDescription].zlibCompressionLevel)),\"number\"==typeof t.socketTimeout&&(r.socketTimeoutOverride=!0,this[kStream].setTimeout(t.socketTimeout)),this.monitorCommands&&(this.emit(\"commandStarted\",new apm.CommandStartedEvent(this,e)),r.started=now(),r.cb=((t,s)=>{t?this.emit(\"commandFailed\",new apm.CommandFailedEvent(this,e,t,r.started)):s&&s.result&&(0===s.result.ok||s.result.$err)?this.emit(\"commandFailed\",new apm.CommandFailedEvent(this,e,s.result,r.started)):this.emit(\"commandSucceeded\",new apm.CommandSucceededEvent(this,e,s,r.started)),\"function\"==typeof o&&o(t,s)})),r.noResponse||this[kQueue].set(r.requestId,r);try{this[kMessageStream].writeCommand(e,r)}catch(e){if(!r.noResponse)return this[kQueue].delete(r.requestId),void r.cb(e)}r.noResponse&&r.cb()}module.exports={Connection:Connection};","node_modules/mongodb/lib/cmap/errors.js":"\"use strict\";const MongoError=require(\"../core/error\").MongoError;class PoolClosedError extends MongoError{constructor(o){super(\"Attempted to check out a connection from closed connection pool\"),this.name=\"MongoPoolClosedError\",this.address=o.address}}class WaitQueueTimeoutError extends MongoError{constructor(o){super(\"Timed out while checking out a connection from connection pool\"),this.name=\"MongoWaitQueueTimeoutError\",this.address=o.address}}module.exports={PoolClosedError:PoolClosedError,WaitQueueTimeoutError:WaitQueueTimeoutError};","node_modules/mongodb/lib/cmap/message_stream.js":"\"use strict\";const Duplex=require(\"stream\").Duplex,BufferList=require(\"bl\"),MongoParseError=require(\"../core/error\").MongoParseError,decompress=require(\"../core/wireprotocol/compression\").decompress,Response=require(\"../core/connection/commands\").Response,BinMsg=require(\"../core/connection/msg\").BinMsg,MongoError=require(\"../core/error\").MongoError,OP_COMPRESSED=require(\"../core/wireprotocol/shared\").opcodes.OP_COMPRESSED,OP_MSG=require(\"../core/wireprotocol/shared\").opcodes.OP_MSG,MESSAGE_HEADER_SIZE=require(\"../core/wireprotocol/shared\").MESSAGE_HEADER_SIZE,COMPRESSION_DETAILS_SIZE=require(\"../core/wireprotocol/shared\").COMPRESSION_DETAILS_SIZE,opcodes=require(\"../core/wireprotocol/shared\").opcodes,compress=require(\"../core/wireprotocol/compression\").compress,compressorIDs=require(\"../core/wireprotocol/compression\").compressorIDs,uncompressibleCommands=require(\"../core/wireprotocol/compression\").uncompressibleCommands,Msg=require(\"../core/connection/msg\").Msg,kDefaultMaxBsonMessageSize=67108864,kBuffer=Symbol(\"buffer\");class MessageStream extends Duplex{constructor(e){super(e=e||{}),this.bson=e.bson,this.maxBsonMessageSize=e.maxBsonMessageSize||kDefaultMaxBsonMessageSize,this[kBuffer]=new BufferList}_write(e,r,o){this[kBuffer].append(e),processIncomingData(this,o)}_read(){}writeCommand(e,r){if(!(r&&!!r.agreedCompressor)||!canCompress(e)){const r=e.toBin();return void this.push(Array.isArray(r)?Buffer.concat(r):r)}const o=Buffer.concat(e.toBin()),s=o.slice(MESSAGE_HEADER_SIZE),n=o.readInt32LE(12);compress({options:r},s,(o,t)=>{if(o)return void r.cb(o,null);const i=Buffer.alloc(MESSAGE_HEADER_SIZE);i.writeInt32LE(MESSAGE_HEADER_SIZE+COMPRESSION_DETAILS_SIZE+t.length,0),i.writeInt32LE(e.requestId,4),i.writeInt32LE(0,8),i.writeInt32LE(opcodes.OP_COMPRESSED,12);const c=Buffer.alloc(COMPRESSION_DETAILS_SIZE);c.writeInt32LE(n,0),c.writeInt32LE(s.length,4),c.writeUInt8(compressorIDs[r.agreedCompressor],8),this.push(Buffer.concat([i,c,t]))})}}function canCompress(e){const r=e instanceof Msg?e.command:e.query,o=Object.keys(r)[0];return!uncompressibleCommands.has(o)}function processIncomingData(e,r){const o=e[kBuffer];if(o.length<4)return void r();const s=o.readInt32LE(0);if(s<0)return void r(new MongoParseError(`Invalid message size: ${s}`));if(s>e.maxBsonMessageSize)return void r(new MongoParseError(`Invalid message size: ${s}, max allowed: ${e.maxBsonMessageSize}`));if(s>o.length)return void r();const n=o.slice(0,s);o.consume(s);const t={length:n.readInt32LE(0),requestId:n.readInt32LE(4),responseTo:n.readInt32LE(8),opCode:n.readInt32LE(12)};let i=t.opCode===OP_MSG?BinMsg:Response;const c=e.responseOptions;if(t.opCode!==OP_COMPRESSED){const s=n.slice(MESSAGE_HEADER_SIZE);return e.emit(\"message\",new i(e.bson,n,t,s,c)),void(o.length>=4?processIncomingData(e,r):r())}t.fromCompressed=!0,t.opCode=n.readInt32LE(MESSAGE_HEADER_SIZE),t.length=n.readInt32LE(MESSAGE_HEADER_SIZE+4);const E=n[MESSAGE_HEADER_SIZE+8],a=n.slice(MESSAGE_HEADER_SIZE+9);i=t.opCode===OP_MSG?BinMsg:Response,decompress(E,a,(s,E)=>{s?r(s):E.length===t.length?(e.emit(\"message\",new i(e.bson,n,t,E,c)),o.length>=4?processIncomingData(e,r):r()):r(new MongoError(\"Decompressing a compressed message from the server failed. The message is corrupt.\"))})}module.exports=MessageStream;","node_modules/mongodb/lib/cmap/stream_description.js":"\"use strict\";const parseServerType=require(\"../core/sdam/server_description\").parseServerType,RESPONSE_FIELDS=[\"minWireVersion\",\"maxWireVersion\",\"maxBsonObjectSize\",\"maxMessageSizeBytes\",\"maxWriteBatchSize\",\"__nodejs_mock_server__\"];class StreamDescription{constructor(e,s){this.address=e,this.type=parseServerType(null),this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.compressors=s&&s.compression&&Array.isArray(s.compression.compressors)?s.compression.compressors:[]}receiveResponse(e){this.type=parseServerType(e),RESPONSE_FIELDS.forEach(s=>{void 0!==e[s]&&(this[s]=e[s])}),e.compression&&(this.compressor=this.compressors.filter(s=>-1!==e.compression.indexOf(s))[0])}}module.exports={StreamDescription:StreamDescription};","node_modules/bl/bl.js":"\"use strict\";var DuplexStream=require(\"readable-stream\").Duplex,util=require(\"util\"),Buffer=require(\"safe-buffer\").Buffer;function BufferList(t){if(!(this instanceof BufferList))return new BufferList(t);if(this._bufs=[],this.length=0,\"function\"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on(\"pipe\",function(t){t.on(\"error\",e)}),this.on(\"unpipe\",function(t){t.removeListener(\"error\",e)})}else this.append(t);DuplexStream.call(this)}util.inherits(BufferList,DuplexStream),BufferList.prototype._offset=function(t){var e,r=0,f=0;if(0===t)return[0,0];for(;f<this._bufs.length;f++){if(t<(e=r+this._bufs[f].length)||f==this._bufs.length-1)return[f,t-r];r=e}},BufferList.prototype._reverseOffset=function(t){for(var e=t[0],r=t[1],f=0;f<e;f++)r+=this._bufs[f].length;return r},BufferList.prototype.append=function(t){var e=0;if(Buffer.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof BufferList)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&(\"number\"==typeof t&&(t=t.toString()),this._appendBuffer(Buffer.from(t)));return this},BufferList.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},BufferList.prototype._write=function(t,e,r){this._appendBuffer(t),\"function\"==typeof r&&r()},BufferList.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},BufferList.prototype.end=function(t){DuplexStream.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferList.prototype.get=function(t){if(!(t>this.length||t<0)){var e=this._offset(t);return this._bufs[e[0]][e[1]]}},BufferList.prototype.slice=function(t,e){return\"number\"==typeof t&&t<0&&(t+=this.length),\"number\"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},BufferList.prototype.copy=function(t,e,r,f){if((\"number\"!=typeof r||r<0)&&(r=0),(\"number\"!=typeof f||f>this.length)&&(f=this.length),r>=this.length)return t||Buffer.alloc(0);if(f<=0)return t||Buffer.alloc(0);var i,s,n=!!t,u=this._offset(r),h=f-r,o=h,l=n&&e||0,a=u[1];if(0===r&&f==this.length){if(!n)return 1===this._bufs.length?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,l),l+=this._bufs[s].length;return t}if(o<=this._bufs[u[0]].length-a)return n?this._bufs[u[0]].copy(t,e,a,a+o):this._bufs[u[0]].slice(a,a+o);for(n||(t=Buffer.allocUnsafe(h)),s=u[0];s<this._bufs.length;s++){if(!(o>(i=this._bufs[s].length-a))){this._bufs[s].copy(t,l,a,a+o),l+=i;break}this._bufs[s].copy(t,l,a),l+=i,o-=i,a&&(a=0)}return t.length>l?t.slice(0,l):t},BufferList.prototype.shallowSlice=function(t,e){if(t=t||0,e=\"number\"!=typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return new BufferList;var r=this._offset(t),f=this._offset(e),i=this._bufs.slice(r[0],f[0]+1);return 0==f[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,f[1]),0!=r[1]&&(i[0]=i[0].slice(r[1])),new BufferList(i)},BufferList.prototype.toString=function(t,e,r){return this.slice(e,r).toString(t)},BufferList.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function(){for(var t=0,e=new BufferList;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},BufferList.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},BufferList.prototype.indexOf=function(t,e,r){if(void 0===r&&\"string\"==typeof e&&(r=e,e=void 0),\"function\"==typeof t||Array.isArray(t))throw new TypeError('The \"value\" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(\"number\"==typeof t?t=Buffer.from([t]):\"string\"==typeof t?t=Buffer.from(t,r):t instanceof BufferList?t=t.slice():Buffer.isBuffer(t)||(t=Buffer.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;for(var f=this._offset(e),i=f[0],s=f[1];i<this._bufs.length;i++){for(var n=this._bufs[i];s<n.length;){if(n.length-s>=t.length){var u=n.indexOf(t,s);if(-1!==u)return this._reverseOffset([i,u]);s=n.length-t.length+1}else{var h=this._reverseOffset([i,s]);if(this._match(h,t))return h;s++}}s=0}return-1},BufferList.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(var r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var e in t)!function(e){BufferList.prototype[e]=null===t[e]?function(t,r){return this.slice(t,t+r)[e](0,r)}:function(r){return this.slice(r,r+t[e])[e](0)}}(e)}(),module.exports=BufferList;","node_modules/readable-stream/readable.js":"var Stream=require(\"stream\");\"disable\"===process.env.READABLE_STREAM&&Stream?(module.exports=Stream,exports=module.exports=Stream.Readable,exports.Readable=Stream.Readable,exports.Writable=Stream.Writable,exports.Duplex=Stream.Duplex,exports.Transform=Stream.Transform,exports.PassThrough=Stream.PassThrough,exports.Stream=Stream):(exports=module.exports=require(\"./lib/_stream_readable.js\"),exports.Stream=Stream||exports,exports.Readable=exports,exports.Writable=require(\"./lib/_stream_writable.js\"),exports.Duplex=require(\"./lib/_stream_duplex.js\"),exports.Transform=require(\"./lib/_stream_transform.js\"),exports.PassThrough=require(\"./lib/_stream_passthrough.js\"));","node_modules/readable-stream/lib/_stream_readable.js":"\"use strict\";var pna=require(\"process-nextick-args\");module.exports=Readable;var Duplex,isArray=require(\"isarray\");Readable.ReadableState=ReadableState;var EE=require(\"events\").EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Stream=require(\"./internal/streams/stream\"),Buffer=require(\"safe-buffer\").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var util=Object.create(require(\"core-util-is\"));util.inherits=require(\"inherits\");var debugUtil=require(\"util\"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog(\"stream\"):function(){};var StringDecoder,BufferList=require(\"./internal/streams/BufferList\"),destroyImpl=require(\"./internal/streams/destroy\");util.inherits(Readable,Stream);var kProxyEvents=[\"error\",\"close\",\"destroy\",\"pause\",\"resume\"];function prependListener(e,t,r){if(\"function\"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t){Duplex=Duplex||require(\"./_stream_duplex\"),e=e||{};var r=t instanceof Duplex;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(a||0===a)?a:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require(\"string_decoder/\").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex=Duplex||require(\"./_stream_duplex\"),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&(\"function\"==typeof e.read&&(this._read=e.read),\"function\"==typeof e.destroy&&(this._destroy=e.destroy)),Stream.call(this)}function readableAddChunk(e,t,r,n,a){var i,d=e._readableState;null===t?(d.reading=!1,onEofChunk(e,d)):(a||(i=chunkInvalid(d,t)),i?e.emit(\"error\",i):d.objectMode||t&&t.length>0?(\"string\"==typeof t||d.objectMode||Object.getPrototypeOf(t)===Buffer.prototype||(t=_uint8ArrayToBuffer(t)),n?d.endEmitted?e.emit(\"error\",new Error(\"stream.unshift() after end event\")):addChunk(e,d,t,!0):d.ended?e.emit(\"error\",new Error(\"stream.push() after EOF\")):(d.reading=!1,d.decoder&&!r?(t=d.decoder.write(t),d.objectMode||0!==t.length?addChunk(e,d,t,!1):maybeReadMore(e,d)):addChunk(e,d,t,!1))):n||(d.reading=!1));return needMoreData(d)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit(\"data\",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array(t)||\"string\"==typeof t||void 0===t||e.objectMode||(r=new TypeError(\"Invalid non-string/buffer chunk\")),r}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(Readable.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:\"string\"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer.from(e,t),t=\"\"),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=require(\"string_decoder/\").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug(\"emitReadable\",t.flowing),t.emittedReadable=!0,t.sync?pna.nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug(\"emit readable\"),e.emit(\"readable\"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,pna.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug(\"maybeReadMore read 0\"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug(\"pipeOnDrain\",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,\"data\")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){debug(\"readable nexttick read 0\"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,pna.nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug(\"resume read 0\"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit(\"resume\"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug(\"flow\",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(\"\"):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=fromListPartial(e,t.buffer,t.decoder),r);var r}function fromListPartial(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?copyFromBufferString(e,t):copyFromBuffer(e,t),n}function copyFromBufferString(e,t){var r=t.head,n=1,a=r.data;for(e-=a.length;r=r.next;){var i=r.data,d=e>i.length?i.length:e;if(d===i.length?a+=i:a+=i.slice(0,e),0===(e-=d)){d===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(d));break}++n}return t.length-=n,a}function copyFromBuffer(e,t){var r=Buffer.allocUnsafe(e),n=t.head,a=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,d=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,d),0===(e-=d)){d===i.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(d));break}++a}return t.length-=a,r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('\"endReadable()\" called on non-empty stream');t.endEmitted||(t.ended=!0,pna.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit(\"end\"))}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug(\"read\",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug(\"read: emitReadable\",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,a=t.needReadable;return debug(\"need readable\",a),(0===t.length||t.length-e<t.highWaterMark)&&debug(\"length less than watermark\",a=!0),t.ended||t.reading?debug(\"reading or ended\",a=!1):a&&(debug(\"do read\"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit(\"data\",n),n},Readable.prototype._read=function(e){this.emit(\"error\",new Error(\"_read() is not implemented\"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug(\"pipe count=%d opts=%j\",n.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?d:b;function i(t,a){debug(\"onunpipe\"),t===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,debug(\"cleanup\"),e.removeListener(\"close\",f),e.removeListener(\"finish\",p),e.removeListener(\"drain\",o),e.removeListener(\"error\",h),e.removeListener(\"unpipe\",i),r.removeListener(\"end\",d),r.removeListener(\"end\",b),r.removeListener(\"data\",s),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||o())}function d(){debug(\"onend\"),e.end()}n.endEmitted?pna.nextTick(a):r.once(\"end\",a),e.on(\"unpipe\",i);var o=pipeOnDrain(r);e.on(\"drain\",o);var u=!1;var l=!1;function s(t){debug(\"ondata\"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!u&&(debug(\"false write response, pause\",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function h(t){debug(\"onerror\",t),b(),e.removeListener(\"error\",h),0===EElistenerCount(e,\"error\")&&e.emit(\"error\",t)}function f(){e.removeListener(\"finish\",p),b()}function p(){debug(\"onfinish\"),e.removeListener(\"close\",f),b()}function b(){debug(\"unpipe\"),r.unpipe(e)}return r.on(\"data\",s),prependListener(e,\"error\",h),e.once(\"close\",f),e.once(\"finish\",p),e.emit(\"pipe\",r),n.flowing||(debug(\"pipe resume\"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit(\"unpipe\",this,r),this);if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)n[i].emit(\"unpipe\",this,r);return this}var d=indexOf(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit(\"unpipe\",this,r),this)},Readable.prototype.on=function(e,t){var r=Stream.prototype.on.call(this,e,t);if(\"data\"===e)!1!==this._readableState.flowing&&this.resume();else if(\"readable\"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug(\"resume\"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return debug(\"call pause flowing=%j\",this._readableState.flowing),!1!==this._readableState.flowing&&(debug(\"pause\"),this._readableState.flowing=!1,this.emit(\"pause\")),this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on(\"end\",function(){if(debug(\"wrapped end\"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on(\"data\",function(a){(debug(\"wrapped data\"),r.decoder&&(a=r.decoder.write(a)),!r.objectMode||null!==a&&void 0!==a)&&((r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause())))}),e)void 0===this[a]&&\"function\"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<kProxyEvents.length;i++)e.on(kProxyEvents[i],this.emit.bind(this,kProxyEvents[i]));return this._read=function(t){debug(\"wrapped _read\",t),n&&(n=!1,e.resume())},this},Object.defineProperty(Readable.prototype,\"readableHighWaterMark\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList;","node_modules/readable-stream/lib/_stream_writable.js":"\"use strict\";var pna=require(\"process-nextick-args\");function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&[\"v0.10\",\"v0.9.\"].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(require(\"core-util-is\"));util.inherits=require(\"inherits\");var internalUtil={deprecate:require(\"util-deprecate\")},Stream=require(\"./internal/streams/stream\"),Buffer=require(\"safe-buffer\").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var realHasInstance,destroyImpl=require(\"./internal/streams/destroy\");function nop(){}function WritableState(e,t){Duplex=Duplex||require(\"./_stream_duplex\"),e=e||{};var r=t instanceof Duplex;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(n||0===n)?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(Duplex=Duplex||require(\"./_stream_duplex\"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&(\"function\"==typeof e.write&&(this._write=e.write),\"function\"==typeof e.writev&&(this._writev=e.writev),\"function\"==typeof e.destroy&&(this._destroy=e.destroy),\"function\"==typeof e.final&&(this._final=e.final)),Stream.call(this)}function writeAfterEnd(e,t){var r=new Error(\"write after end\");e.emit(\"error\",r),pna.nextTick(t,r)}function validChunk(e,t,r,i){var n=!0,o=!1;return null===r?o=new TypeError(\"May not write null values to stream\"):\"string\"==typeof r||void 0===r||t.objectMode||(o=new TypeError(\"Invalid non-string/buffer chunk\")),o&&(e.emit(\"error\",o),pna.nextTick(i,o),n=!1),n}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||\"string\"!=typeof t||(t=Buffer.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,o){if(!r){var a=decodeChunk(t,i,n);i!==a&&(r=!0,n=\"buffer\",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,i,n,o);return f}function doWrite(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?(pna.nextTick(n,i),pna.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit(\"error\",i)):(n(i),e._writableState.errorEmitted=!0,e.emit(\"error\",i),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var o=needFinish(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?asyncWrite(afterWrite,e,r,o,n):afterWrite(e,r,o,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit(\"drain\"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,s=!0;r;)n[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;n.allBuffers=s,doWrite(e,t,!0,t.length,n,\"\",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,u=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:f.length,f,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit(\"error\",r),t.prefinished=!0,e.emit(\"prefinish\"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||(\"function\"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,pna.nextTick(callFinal,e,t)):(t.prefinished=!0,e.emit(\"prefinish\")))}function finishMaybe(e,t){var r=needFinish(t);return r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit(\"finish\"))),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?pna.nextTick(r):e.once(\"finish\",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,\"buffer\",{get:internalUtil.deprecate(function(){return this.getBuffer()},\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\",\"DEP0003\")})}catch(e){}}(),\"function\"==typeof Symbol&&Symbol.hasInstance&&\"function\"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable&&(e&&e._writableState instanceof WritableState)}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit(\"error\",new Error(\"Cannot pipe, not readable\"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=!i.objectMode&&_isUint8Array(e);return o&&!Buffer.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),\"function\"==typeof t&&(r=t,t=null),o?t=\"buffer\":t||(t=i.defaultEncoding),\"function\"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):(o||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,o,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if(\"string\"==typeof e&&(e=e.toLowerCase()),!([\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((e+\"\").toLowerCase())>-1))throw new TypeError(\"Unknown encoding: \"+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new Error(\"_write() is not implemented\"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;\"function\"==typeof e?(r=e,e=null,t=null):\"function\"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)},Object.defineProperty(Writable.prototype,\"destroyed\",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)};","node_modules/readable-stream/lib/_stream_duplex.js":"\"use strict\";var pna=require(\"process-nextick-args\"),objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var util=Object.create(require(\"core-util-is\"));util.inherits=require(\"inherits\");var Readable=require(\"./_stream_readable\"),Writable=require(\"./_stream_writable\");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once(\"end\",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex.prototype._destroy=function(e,t){this.push(null),this.end(),pna.nextTick(t,e)};","node_modules/readable-stream/lib/_stream_transform.js":"\"use strict\";module.exports=Transform;var Duplex=require(\"./_stream_duplex\"),util=Object.create(require(\"core-util-is\"));function afterTransform(r,t){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit(\"error\",new Error(\"write callback called multiple times\"));e.writechunk=null,e.writecb=null,null!=t&&this.push(t),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(\"function\"==typeof r.transform&&(this._transform=r.transform),\"function\"==typeof r.flush&&(this._flush=r.flush)),this.on(\"prefinish\",prefinish)}function prefinish(){var r=this;\"function\"==typeof this._flush?this._flush(function(t,e){done(r,t,e)}):done(this,null,null)}function done(r,t,e){if(t)return r.emit(\"error\",t);if(null!=e&&r.push(e),r._writableState.length)throw new Error(\"Calling transform done when ws.length != 0\");if(r._transformState.transforming)throw new Error(\"Calling transform done when still transforming\");return r.push(null)}util.inherits=require(\"inherits\"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,e){throw new Error(\"_transform() is not implemented\")},Transform.prototype._write=function(r,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=r,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(r,t){var e=this;Duplex.prototype._destroy.call(this,r,function(r){t(r),e.emit(\"close\")})};","node_modules/readable-stream/lib/_stream_passthrough.js":"\"use strict\";module.exports=PassThrough;var Transform=require(\"./_stream_transform\"),util=Object.create(require(\"core-util-is\"));function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}util.inherits=require(\"inherits\"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,t){t(null,r)};","node_modules/process-nextick-args/index.js":"\"use strict\";function nextTick(e,n,c,r){if(\"function\"!=typeof e)throw new TypeError('\"callback\" argument must be a function');var s,t,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,n)});case 3:return process.nextTick(function(){e.call(null,n,c)});case 4:return process.nextTick(function(){e.call(null,n,c,r)});default:for(s=new Array(o-1),t=0;t<s.length;)s[t++]=arguments[t];return process.nextTick(function(){e.apply(null,s)})}}\"undefined\"==typeof process||!process.version||0===process.version.indexOf(\"v0.\")||0===process.version.indexOf(\"v1.\")&&0!==process.version.indexOf(\"v1.8.\")?module.exports={nextTick:nextTick}:module.exports=process;","node_modules/readable-stream/node_modules/isarray/index.js":"var toString={}.toString;module.exports=Array.isArray||function(r){return\"[object Array]\"==toString.call(r)};","node_modules/readable-stream/lib/internal/streams/stream.js":"module.exports=require(\"stream\");","node_modules/core-util-is/lib/util.js":"function isArray(r){return Array.isArray?Array.isArray(r):\"[object Array]\"===objectToString(r)}function isBoolean(r){return\"boolean\"==typeof r}function isNull(r){return null===r}function isNullOrUndefined(r){return null==r}function isNumber(r){return\"number\"==typeof r}function isString(r){return\"string\"==typeof r}function isSymbol(r){return\"symbol\"==typeof r}function isUndefined(r){return void 0===r}function isRegExp(r){return\"[object RegExp]\"===objectToString(r)}function isObject(r){return\"object\"==typeof r&&null!==r}function isDate(r){return\"[object Date]\"===objectToString(r)}function isError(r){return\"[object Error]\"===objectToString(r)||r instanceof Error}function isFunction(r){return\"function\"==typeof r}function isPrimitive(r){return null===r||\"boolean\"==typeof r||\"number\"==typeof r||\"string\"==typeof r||\"symbol\"==typeof r||void 0===r}function objectToString(r){return Object.prototype.toString.call(r)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require(\"buffer\").Buffer.isBuffer;","node_modules/inherits/inherits.js":"try{var util=require(\"util\");if(\"function\"!=typeof util.inherits)throw\"\";module.exports=util.inherits}catch(i){module.exports=require(\"./inherits_browser.js\")}","node_modules/readable-stream/lib/internal/streams/BufferList.js":"\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var Buffer=require(\"safe-buffer\").Buffer,util=require(\"util\");function copyBuffer(t,e,i){t.copy(e,i)}module.exports=function(){function t(){_classCallCheck(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return\"\";for(var e=this.head,i=\"\"+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var e=Buffer.allocUnsafe(t>>>0),i=this.head,n=0;i;)copyBuffer(i.data,e,n),n+=i.data.length,i=i.next;return e},t}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var t=util.inspect({length:this.length});return this.constructor.name+\" \"+t});","node_modules/readable-stream/lib/internal/streams/destroy.js":"\"use strict\";var pna=require(\"process-nextick-args\");function destroy(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(pna.nextTick(emitErrorNT,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit(\"error\",e)}module.exports={destroy:destroy,undestroy:undestroy};","node_modules/util-deprecate/node.js":"module.exports=require(\"util\").deprecate;","node_modules/mongodb/lib/change_stream.js":"\"use strict\";const Denque=require(\"denque\"),EventEmitter=require(\"events\"),isResumableError=require(\"./error\").isResumableError,MongoError=require(\"./core\").MongoError,Cursor=require(\"./cursor\"),relayEvents=require(\"./core/utils\").relayEvents,maxWireVersion=require(\"./core/utils\").maxWireVersion,maybePromise=require(\"./utils\").maybePromise,now=require(\"./utils\").now,calculateDurationInMs=require(\"./utils\").calculateDurationInMs,AggregateOperation=require(\"./operations/aggregate\"),kResumeQueue=Symbol(\"resumeQueue\"),CHANGE_STREAM_OPTIONS=[\"resumeAfter\",\"startAfter\",\"startAtOperationTime\",\"fullDocument\"],CURSOR_OPTIONS=[\"batchSize\",\"maxAwaitTimeMS\",\"collation\",\"readPreference\"].concat(CHANGE_STREAM_OPTIONS),CHANGE_DOMAIN_TYPES={COLLECTION:Symbol(\"Collection\"),DATABASE:Symbol(\"Database\"),CLUSTER:Symbol(\"Cluster\")};class ChangeStream extends EventEmitter{constructor(e,r,t){super();const s=require(\"./collection\"),o=require(\"./db\"),i=require(\"./mongo_client\");if(this.pipeline=r||[],this.options=t||{},this.parent=e,this.namespace=e.s.namespace,e instanceof s)this.type=CHANGE_DOMAIN_TYPES.COLLECTION,this.topology=e.s.db.serverConfig;else if(e instanceof o)this.type=CHANGE_DOMAIN_TYPES.DATABASE,this.topology=e.serverConfig;else{if(!(e instanceof i))throw new TypeError(\"parent provided to ChangeStream constructor is not an instance of Collection, Db, or MongoClient\");this.type=CHANGE_DOMAIN_TYPES.CLUSTER,this.topology=e.topology}this.promiseLibrary=e.s.promiseLibrary,!this.options.readPreference&&e.s.readPreference&&(this.options.readPreference=e.s.readPreference),this[kResumeQueue]=new Denque,this.cursor=createChangeStreamCursor(this,t),this.closed=!1,this.on(\"newListener\",e=>{\"change\"===e&&this.cursor&&0===this.listenerCount(\"change\")&&this.cursor.on(\"data\",e=>processNewChange(this,e))}),this.on(\"removeListener\",e=>{\"change\"===e&&0===this.listenerCount(\"change\")&&this.cursor&&this.cursor.removeAllListeners(\"data\")})}get resumeToken(){return this.cursor.resumeToken}hasNext(e){return maybePromise(this.parent,e,e=>{getCursor(this,(r,t)=>{if(r)return e(r);t.hasNext(e)})})}next(e){return maybePromise(this.parent,e,e=>{getCursor(this,(r,t)=>{if(r)return e(r);t.next((r,t)=>{if(r)return this[kResumeQueue].push(()=>this.next(e)),void processError(this,r,e);processNewChange(this,t,e)})})})}isClosed(){return this.closed||this.cursor&&this.cursor.isClosed()}close(e){return maybePromise(this.parent,e,e=>{if(this.closed)return e();if(this.closed=!0,!this.cursor)return e();const r=this.cursor;return r.close(t=>([\"data\",\"close\",\"end\",\"error\"].forEach(e=>r.removeAllListeners(e)),this.cursor=void 0,e(t)))})}pipe(e,r){return this.pipeDestinations||(this.pipeDestinations=[]),this.pipeDestinations.push(e),this.cursor.pipe(e,r)}unpipe(e){return this.pipeDestinations&&this.pipeDestinations.indexOf(e)>-1&&this.pipeDestinations.splice(this.pipeDestinations.indexOf(e),1),this.cursor.unpipe(e)}stream(e){return this.streamOptions=e,this.cursor.stream(e)}pause(){return this.cursor.pause()}resume(){return this.cursor.resume()}}class ChangeStreamCursor extends Cursor{constructor(e,r,t){super(e,r,t),t=t||{},this._resumeToken=null,this.startAtOperationTime=t.startAtOperationTime,t.startAfter?this.resumeToken=t.startAfter:t.resumeAfter&&(this.resumeToken=t.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(\"resumeTokenChanged\",e)}get resumeToken(){return this._resumeToken}get resumeOptions(){const e={};for(const r of CURSOR_OPTIONS)this.options[r]&&(e[r]=this.options[r]);if(this.resumeToken||this.startAtOperationTime)if([\"resumeAfter\",\"startAfter\",\"startAtOperationTime\"].forEach(r=>delete e[r]),this.resumeToken){const r=this.options.startAfter&&!this.hasReceived?\"startAfter\":\"resumeAfter\";e[r]=this.resumeToken}else this.startAtOperationTime&&maxWireVersion(this.server)>=7&&(e.startAtOperationTime=this.startAtOperationTime);return e}cacheResumeToken(e){0===this.bufferedCount()&&this.cursorState.postBatchResumeToken?this.resumeToken=this.cursorState.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e,r){const t=r.cursor;t.postBatchResumeToken&&(this.cursorState.postBatchResumeToken=t.postBatchResumeToken,0===t[e].length&&(this.resumeToken=t.postBatchResumeToken))}_initializeCursor(e){super._initializeCursor((r,t)=>{if(r||null==t)return void e(r,t);const s=t.documents[0];null==this.startAtOperationTime&&null==this.resumeAfter&&null==this.startAfter&&maxWireVersion(this.server)>=7&&(this.startAtOperationTime=s.operationTime),this._processBatch(\"firstBatch\",s),this.emit(\"init\",t),this.emit(\"response\"),e(r,t)})}_getMore(e){super._getMore((r,t)=>{r?e(r):(this._processBatch(\"nextBatch\",t),this.emit(\"more\",t),this.emit(\"response\"),e(r,t))})}}function createChangeStreamCursor(e,r){const t={fullDocument:r.fullDocument||\"default\"};applyKnownOptions(t,r,CHANGE_STREAM_OPTIONS),e.type===CHANGE_DOMAIN_TYPES.CLUSTER&&(t.allChangesForCluster=!0);const s=[{$changeStream:t}].concat(e.pipeline),o=applyKnownOptions({},r,CURSOR_OPTIONS),i=new ChangeStreamCursor(e.topology,new AggregateOperation(e.parent,s,r),o);if(relayEvents(i,e,[\"resumeTokenChanged\",\"end\",\"close\"]),e.listenerCount(\"change\")>0&&i.on(\"data\",function(r){processNewChange(e,r)}),i.on(\"error\",function(r){processError(e,r)}),e.pipeDestinations){const r=i.stream(e.streamOptions);for(let t of e.pipeDestinations)r.pipe(t)}return i}function applyKnownOptions(e,r,t){return t.forEach(t=>{r[t]&&(e[t]=r[t])}),e}const SELECTION_TIMEOUT=3e4;function waitForTopologyConnected(e,r,t){setTimeout(()=>{r&&null==r.start&&(r.start=now());const s=r.start||now(),o=r.timeout||SELECTION_TIMEOUT,i=r.readPreference;return e.isConnected({readPreference:i})?t():calculateDurationInMs(s)>o?t(new MongoError(\"Timed out waiting for connection\")):void waitForTopologyConnected(e,r,t)},500)}function processNewChange(e,r,t){const s=e.cursor;if(null==r&&(e.closed=!0),!e.closed){if(r&&!r._id){const r=new Error(\"A change stream document has been received that lacks a resume token (_id).\");return t?t(r):e.emit(\"error\",r)}return s.cacheResumeToken(r._id),e.options.startAtOperationTime=void 0,t?t(void 0,r):e.emit(\"change\",r)}t&&t(new MongoError(\"ChangeStream is closed\"))}function processError(e,r,t){const s=e.topology,o=e.cursor;if(!e.closed)return o&&isResumableError(r,maxWireVersion(o.server))?(e.cursor=void 0,[\"data\",\"close\",\"end\",\"error\"].forEach(e=>o.removeAllListeners(e)),o.close(),void waitForTopologyConnected(s,{readPreference:o.options.readPreference},r=>{if(r)return n(r);const s=createChangeStreamCursor(e,o.resumeOptions);if(!t)return i(s);s.hasNext(e=>{if(e)return n(e);i(s)})})):t?t(r):e.emit(\"error\",r);function i(r){e.cursor=r,processResumeQueue(e)}function n(r){t||(e.emit(\"error\",r),e.emit(\"close\")),processResumeQueue(e,r),e.closed=!0}t&&t(new MongoError(\"ChangeStream is closed\"))}function getCursor(e,r){e.isClosed()?r(new MongoError(\"ChangeStream is closed.\")):e.cursor?r(void 0,e.cursor):e[kResumeQueue].push(r)}function processResumeQueue(e,r){for(;e[kResumeQueue].length;){const t=e[kResumeQueue].pop();if(e.isClosed()&&!r)return void t(new MongoError(\"Change Stream is not open.\"));t(r,e.cursor)}}module.exports=ChangeStream;","node_modules/mongodb/lib/topologies/native_topology.js":"\"use strict\";const Topology=require(\"../core\").Topology,ServerCapabilities=require(\"./topology_base\").ServerCapabilities,Cursor=require(\"../cursor\"),translateOptions=require(\"../utils\").translateOptions;class NativeTopology extends Topology{constructor(e,o){o=o||{};let t=Object.assign({},{cursorFactory:Cursor,reconnect:!1,emitError:\"boolean\"!=typeof o.emitError||o.emitError,maxPoolSize:\"number\"==typeof o.maxPoolSize?o.maxPoolSize:\"number\"==typeof o.poolSize?o.poolSize:10,minPoolSize:\"number\"==typeof o.minPoolSize?o.minPoolSize:\"number\"==typeof o.minSize?o.minSize:0,monitorCommands:\"boolean\"==typeof o.monitorCommands&&o.monitorCommands});t=translateOptions(t,o);var i=o.socketOptions&&Object.keys(o.socketOptions).length>0?o.socketOptions:o;super(e,t=translateOptions(t,i))}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:null==this.lastIsMaster()?null:(this.s.sCapabilities=new ServerCapabilities(this.lastIsMaster()),this.s.sCapabilities)}command(e,o,t,i){super.command(e.toString(),o,t,i)}insert(e,o,t,i){super.insert(e.toString(),o,t,i)}update(e,o,t,i){super.update(e.toString(),o,t,i)}remove(e,o,t,i){super.remove(e.toString(),o,t,i)}}module.exports=NativeTopology;","node_modules/mongodb/lib/operations/connect.js":"\"use strict\";const deprecate=require(\"util\").deprecate,Logger=require(\"../core\").Logger,MongoCredentials=require(\"../core\").MongoCredentials,MongoError=require(\"../core\").MongoError,Mongos=require(\"../topologies/mongos\"),NativeTopology=require(\"../topologies/native_topology\"),parse=require(\"../core\").parseConnectionString,ReadConcern=require(\"../read_concern\"),ReadPreference=require(\"../core\").ReadPreference,ReplSet=require(\"../topologies/replset\"),Server=require(\"../topologies/server\"),ServerSessionPool=require(\"../core\").Sessions.ServerSessionPool,emitDeprecationWarning=require(\"../utils\").emitDeprecationWarning,emitWarningOnce=require(\"../utils\").emitWarningOnce,fs=require(\"fs\"),WriteConcern=require(\"../write_concern\"),CMAP_EVENT_NAMES=require(\"../cmap/events\").CMAP_EVENT_NAMES;let client;function loadClient(){return client||(client=require(\"../mongo_client\")),client}const legacyParse=deprecate(require(\"../url_parser\"),\"current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect.\"),AUTH_MECHANISM_INTERNAL_MAP={DEFAULT:\"default\",PLAIN:\"plain\",GSSAPI:\"gssapi\",\"MONGODB-CR\":\"mongocr\",\"MONGODB-X509\":\"x509\",\"MONGODB-AWS\":\"mongodb-aws\",\"SCRAM-SHA-1\":\"scram-sha-1\",\"SCRAM-SHA-256\":\"scram-sha-256\"},monitoringEvents=[\"timeout\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"commandStarted\",\"commandSucceeded\",\"commandFailed\",\"joined\",\"left\",\"ping\",\"ha\",\"all\",\"fullsetup\",\"open\"],VALID_AUTH_MECHANISMS=new Set([\"DEFAULT\",\"PLAIN\",\"GSSAPI\",\"MONGODB-CR\",\"MONGODB-X509\",\"MONGODB-AWS\",\"SCRAM-SHA-1\",\"SCRAM-SHA-256\"]),validOptionNames=[\"poolSize\",\"ssl\",\"sslValidate\",\"sslCA\",\"sslCert\",\"sslKey\",\"sslPass\",\"sslCRL\",\"autoReconnect\",\"noDelay\",\"keepAlive\",\"keepAliveInitialDelay\",\"connectTimeoutMS\",\"family\",\"socketTimeoutMS\",\"reconnectTries\",\"reconnectInterval\",\"ha\",\"haInterval\",\"replicaSet\",\"secondaryAcceptableLatencyMS\",\"acceptableLatencyMS\",\"connectWithNoPrimary\",\"authSource\",\"w\",\"wtimeout\",\"j\",\"writeConcern\",\"forceServerObjectId\",\"serializeFunctions\",\"ignoreUndefined\",\"raw\",\"bufferMaxEntries\",\"readPreference\",\"pkFactory\",\"promiseLibrary\",\"readConcern\",\"maxStalenessSeconds\",\"loggerLevel\",\"logger\",\"promoteValues\",\"promoteBuffers\",\"promoteLongs\",\"domainsEnabled\",\"checkServerIdentity\",\"validateOptions\",\"appname\",\"auth\",\"user\",\"password\",\"authMechanism\",\"compression\",\"fsync\",\"readPreferenceTags\",\"numberOfRetries\",\"auto_reconnect\",\"minSize\",\"monitorCommands\",\"retryWrites\",\"retryReads\",\"useNewUrlParser\",\"useUnifiedTopology\",\"serverSelectionTimeoutMS\",\"useRecoveryToken\",\"autoEncryption\",\"driverInfo\",\"tls\",\"tlsInsecure\",\"tlsinsecure\",\"tlsAllowInvalidCertificates\",\"tlsAllowInvalidHostnames\",\"tlsCAFile\",\"tlsCertificateFile\",\"tlsCertificateKeyFile\",\"tlsCertificateKeyFilePassword\",\"minHeartbeatFrequencyMS\",\"heartbeatFrequencyMS\",\"directConnection\",\"appName\",\"maxPoolSize\",\"minPoolSize\",\"maxIdleTimeMS\",\"waitQueueTimeoutMS\"],ignoreOptionNames=[\"native_parser\"],legacyOptionNames=[\"server\",\"replset\",\"replSet\",\"mongos\",\"db\"];function validOptions(e){const r=validOptionNames.concat(legacyOptionNames);for(const n in e)if(-1===ignoreOptionNames.indexOf(n)){if(-1===r.indexOf(n)){if(e.validateOptions)return new MongoError(`option ${n} is not supported`);emitWarningOnce(`the options [${n}] is not supported`)}-1!==legacyOptionNames.indexOf(n)&&emitWarningOnce(\"the server/replset/mongos/db options are deprecated, \"+`all their options are supported at the top level of the options object [${validOptionNames}]`)}}const LEGACY_OPTIONS_MAP=validOptionNames.reduce((e,r)=>(e[r.toLowerCase()]=r,e),{});function addListeners(e,r){r.on(\"authenticated\",createListener(e,\"authenticated\")),r.on(\"error\",createListener(e,\"error\")),r.on(\"timeout\",createListener(e,\"timeout\")),r.on(\"close\",createListener(e,\"close\")),r.on(\"parseError\",createListener(e,\"parseError\")),r.once(\"open\",createListener(e,\"open\")),r.once(\"fullsetup\",createListener(e,\"fullsetup\")),r.once(\"all\",createListener(e,\"all\")),r.on(\"reconnect\",createListener(e,\"reconnect\"))}function assignTopology(e,r){e.topology=r,r instanceof NativeTopology||(r.s.sessionPool=new ServerSessionPool(r.s.coreTopology))}function clearAllEvents(e){monitoringEvents.forEach(r=>e.removeAllListeners(r))}function collectEvents(e,r){let n=loadClient();const t=[];return e instanceof n&&monitoringEvents.forEach(n=>{r.on(n,(r,o)=>{\"open\"===n?t.push({event:n,object1:e}):t.push({event:n,object1:r,object2:o})})}),t}function resolveTLSOptions(e){null!=e.tls&&[\"sslCA\",\"sslKey\",\"sslCert\"].forEach(r=>{e[r]&&(e[r]=fs.readFileSync(e[r]))})}function connect(e,r,n,t){if(n=Object.assign({},n),null==t)throw new Error(\"no callback function provided\");let o=!1;const s=Logger(\"MongoClient\",n);if(r instanceof Server||r instanceof ReplSet||r instanceof Mongos)return connectWithUrl(e,r,n,c);const i=!1!==n.useNewUrlParser,a=i?transformUrlOptions:legacyTransformUrlOptions;function c(r,n){const i=\"seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name\";if(r&&\"no mongos proxies found in seed list\"===r.message)return s.isWarn()&&s.warn(i),t(new MongoError(i));o&&e.emit(\"authenticated\",null,!0),t(r,n)}(i?parse:legacyParse)(r,n,(r,s)=>{if(r)return t(r);const i=a(s),l=createUnifiedOptions(i,n);if(null==l.socketTimeoutMS&&(l.socketTimeoutMS=0),null==l.connectTimeoutMS&&(l.connectTimeoutMS=1e4),null==l.retryWrites&&(l.retryWrites=!0),null==l.useRecoveryToken&&(l.useRecoveryToken=!0),null==l.readPreference&&(l.readPreference=\"primary\"),l.db_options&&l.db_options.auth&&delete l.db_options.auth,resolveTLSOptions(l),e.s.options=l,e.s.readPreference=ReadPreference.fromOptions(l),e.s.writeConcern=WriteConcern.fromOptions(l),0===i.servers.length)return t(new Error(\"connection string must contain at least one seed host\"));if(l.auth&&!l.credentials)try{o=!0,l.credentials=generateCredentials(e,l.auth.user,l.auth.password,l)}catch(r){return t(r)}return l.useUnifiedTopology?createTopology(e,\"unified\",l,c):(emitWarningOnce(\"Current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.\"),l.replicaSet||l.rs_name?createTopology(e,\"replicaset\",l,c):i.servers.length>1?createTopology(e,\"mongos\",l,c):createServer(e,l,c))})}function connectWithUrl(e,r,n,t){assignTopology(e,r),addListeners(e,r),relayEvents(e,r);let o=Object.assign({},n);if(\"string\"!=typeof n.readPreference&&\"string\"!=typeof n.read_preference||(o.readPreference=new ReadPreference(n.readPreference||n.read_preference)),(o.user||o.password||o.authMechanism)&&!o.credentials)try{o.credentials=generateCredentials(e,o.user,o.password,o)}catch(e){return t(e,r)}return r.connect(o,t)}function createListener(e,r){const n=new Set([\"all\",\"fullsetup\",\"open\",\"reconnect\"]);return(t,o)=>{if(n.has(r))return e.emit(r,e);e.emit(r,t,o)}}function createServer(e,r,n){r.promiseLibrary=e.s.promiseLibrary;const t=translateOptions(r)[0],o=collectEvents(e,t);t.connect(r,(s,i)=>{if(s)return t.close(!0),n(s);clearAllEvents(t),relayEvents(e,t),addListeners(e,t);const a=i.lastIsMaster();if(assignTopology(e,i),a&&\"isdbgrid\"===a.msg)return i.close(),createTopology(e,\"mongos\",r,n);replayEvents(e,o),n(s,i)})}const DEPRECATED_UNIFIED_EVENTS=new Set([\"reconnect\",\"reconnectFailed\",\"attemptReconnect\",\"joined\",\"left\",\"ping\",\"ha\",\"all\",\"fullsetup\",\"open\"]);function registerDeprecatedEventNotifiers(e){e.on(\"newListener\",e=>{DEPRECATED_UNIFIED_EVENTS.has(e)&&emitDeprecationWarning(`The \\`${e}\\` event is no longer supported by the unified topology, please read more by visiting http://bit.ly/2D8WfT6`,\"DeprecationWarning\")})}function createTopology(e,r,n,t){n.promiseLibrary=e.s.promiseLibrary;const o={};\"unified\"===r&&(o.createServers=!1);const s=translateOptions(n,o);if(null!=n.autoEncryption){const r=require(\"../encrypter\").Encrypter;n.encrypter=new r(e,n),n.autoEncrypter=n.encrypter.autoEncrypter}let i;\"mongos\"===r?i=new Mongos(s,n):\"replicaset\"===r?i=new ReplSet(s,n):\"unified\"===r&&(i=new NativeTopology(n.servers,n),registerDeprecatedEventNotifiers(e)),addListeners(e,i),relayEvents(e,i),assignTopology(e,i),n.autoEncrypter?n.autoEncrypter.init(e=>{e?t(e):i.connect(n,e=>{if(e)return i.close(!0),void t(e);n.encrypter.connectInternalClient(e=>{if(e)return t(e);t(void 0,i)})})}):i.connect(n,e=>{if(e)return i.close(!0),t(e);t(void 0,i)})}function createUnifiedOptions(e,r){const n=[\"mongos\",\"server\",\"db\",\"replset\",\"db_options\",\"server_options\",\"rs_options\",\"mongos_options\"],t=[\"readconcern\",\"compression\",\"autoencryption\"],o=[\"w\",\"wtimeout\",\"j\",\"journal\",\"fsync\",\"writeconcern\"];for(const s in r)-1===o.indexOf(s.toLowerCase())&&(-1!==t.indexOf(s.toLowerCase())?e[s]=r[s]:-1!==n.indexOf(s.toLowerCase())?e=mergeOptions(e,r[s],!1):!r[s]||\"object\"!=typeof r[s]||Buffer.isBuffer(r[s])||Array.isArray(r[s])?e[s]=r[s]:e=mergeOptions(e,r[s],!0));const s=WriteConcern.fromOptions(r);return s&&(e.writeConcern=Object.assign({},e.writeConcern,s)),e}function generateCredentials(e,r,n,t){const o=(t=Object.assign({},t)).authSource||t.authdb||t.dbName,s=t.authMechanism||\"DEFAULT\",i=s.toUpperCase(),a=t.authMechanismProperties;if(!VALID_AUTH_MECHANISMS.has(i))throw MongoError.create({message:`authentication mechanism ${s} not supported', options.authMechanism`,driver:!0});return new MongoCredentials({mechanism:AUTH_MECHANISM_INTERNAL_MAP[i],mechanismProperties:a,source:o,username:r,password:n})}function legacyTransformUrlOptions(e){return mergeOptions(createUnifiedOptions({},e),e,!1)}function mergeOptions(e,r,n){for(const t in r)r[t]&&\"object\"==typeof r[t]&&n?e=mergeOptions(e,r[t],n):e[t]=r[t];return e}function relayEvents(e,r){[\"commandStarted\",\"commandSucceeded\",\"commandFailed\",\"serverOpening\",\"serverClosed\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\"].concat(CMAP_EVENT_NAMES).forEach(n=>{r.on(n,(r,t)=>{e.emit(n,r,t)})})}function replayEvents(e,r){for(let n=0;n<r.length;n++)e.emit(r[n].event,r[n].object1,r[n].object2)}function transformUrlOptions(e){let r=Object.assign({servers:e.hosts},e.options);for(let e in r){const n=LEGACY_OPTIONS_MAP[e];n&&(r[n]=r[e])}const n=e.auth&&e.auth.username,t=e.options&&e.options.authMechanism;(n||t)&&(r.auth=Object.assign({},e.auth),r.auth.db&&(r.authSource=r.authSource||r.auth.db),r.auth.username&&(r.auth.user=r.auth.username)),e.defaultDatabase&&(r.dbName=e.defaultDatabase),r.maxPoolSize&&(r.poolSize=r.maxPoolSize),r.readConcernLevel&&(r.readConcern=new ReadConcern(r.readConcernLevel)),r.wTimeoutMS&&(r.wtimeout=r.wTimeoutMS,r.wTimeoutMS=void 0),e.srvHost&&(r.srvHost=e.srvHost);const o=[\"w\",\"wtimeout\",\"j\",\"journal\",\"fsync\"];for(const e of o)void 0!==r[e]&&(void 0===r.writeConcern&&(r.writeConcern={}),r.writeConcern[e]=r[e],r[e]=void 0);return r}function translateOptions(e,r){if(r=Object.assign({},{createServers:!0},r),\"string\"!=typeof e.readPreference&&\"string\"!=typeof e.read_preference||(e.readPreference=new ReadPreference(e.readPreference||e.read_preference)),e.readPreference&&(e.readPreferenceTags||e.read_preference_tags)&&(e.readPreference.tags=e.readPreferenceTags||e.read_preference_tags),e.maxStalenessSeconds&&(e.readPreference.maxStalenessSeconds=e.maxStalenessSeconds),null==e.socketTimeoutMS&&(e.socketTimeoutMS=0),null==e.connectTimeoutMS&&(e.connectTimeoutMS=1e4),r.createServers)return e.servers.map(r=>r.domain_socket?new Server(r.domain_socket,27017,e):new Server(r.host,r.port,e))}module.exports={validOptions:validOptions,connect:connect};","node_modules/mongodb/lib/error.js":"\"use strict\";const MongoNetworkError=require(\"./core\").MongoNetworkError,GET_MORE_RESUMABLE_CODES=new Set([6,7,89,91,189,262,9001,10107,11600,11602,13435,13436,63,150,13388,234,133,43]);function isResumableError(r,E){return r instanceof MongoNetworkError||(E>=9?43===r.code||r.hasErrorLabel(\"ResumableChangeStreamError\"):GET_MORE_RESUMABLE_CODES.has(r.code))}module.exports={GET_MORE_RESUMABLE_CODES:GET_MORE_RESUMABLE_CODES,isResumableError:isResumableError};","node_modules/mongodb/lib/operations/aggregate.js":"\"use strict\";const CommandOperationV2=require(\"./command_v2\"),MongoError=require(\"../core\").MongoError,maxWireVersion=require(\"../core/utils\").maxWireVersion,ReadPreference=require(\"../core\").ReadPreference,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,DB_AGGREGATE_COLLECTION=1,MIN_WIRE_VERSION_$OUT_READ_CONCERN_SUPPORT=8;class AggregateOperation extends CommandOperationV2{constructor(e,t,i){if(super(e,i,{fullResponse:!0}),this.target=e.s.namespace&&e.s.namespace.collection?e.s.namespace.collection:DB_AGGREGATE_COLLECTION,this.pipeline=t,this.hasWriteStage=!1,\"string\"==typeof i.out)this.pipeline=this.pipeline.concat({$out:i.out}),this.hasWriteStage=!0;else if(t.length>0){const e=t[t.length-1];(e.$out||e.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage&&(this.readPreference=ReadPreference.primary),this.explain&&this.writeConcern)throw new MongoError('\"explain\" cannot be used on an aggregate call with writeConcern');if(null!=i.cursor&&\"object\"!=typeof i.cursor)throw new MongoError(\"cursor options must be an object\")}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}execute(e,t){const i=this.options,r=maxWireVersion(e),s={aggregate:this.target,pipeline:this.pipeline};this.hasWriteStage&&r<MIN_WIRE_VERSION_$OUT_READ_CONCERN_SUPPORT&&(this.readConcern=null),r>=5&&this.hasWriteStage&&this.writeConcern&&Object.assign(s,{writeConcern:this.writeConcern}),!0===i.bypassDocumentValidation&&(s.bypassDocumentValidation=i.bypassDocumentValidation),\"boolean\"==typeof i.allowDiskUse&&(s.allowDiskUse=i.allowDiskUse),i.hint&&(s.hint=i.hint),this.explain&&(i.full=!1),s.cursor=i.cursor||{},i.batchSize&&!this.hasWriteStage&&(s.cursor.batchSize=i.batchSize),super.executeCommand(e,s,t)}}defineAspects(AggregateOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION,Aspect.EXPLAINABLE]),module.exports=AggregateOperation;","node_modules/mongodb/lib/operations/cursor_ops.js":"\"use strict\";const buildCountCommand=require(\"./collection_ops\").buildCountCommand,handleCallback=require(\"../utils\").handleCallback,MongoError=require(\"../core\").MongoError,push=Array.prototype.push,CursorState=require(\"../core/cursor\").CursorState;function count(e,r,o,t){r&&(\"number\"==typeof e.cursorSkip()&&(o.skip=e.cursorSkip()),\"number\"==typeof e.cursorLimit()&&(o.limit=e.cursorLimit())),o.readPreference&&e.setReadPreference(o.readPreference),\"number\"!=typeof o.maxTimeMS&&e.cmd&&\"number\"==typeof e.cmd.maxTimeMS&&(o.maxTimeMS=e.cmd.maxTimeMS);let n,a={};a.skip=o.skip,a.limit=o.limit,a.hint=o.hint,a.maxTimeMS=o.maxTimeMS,a.collectionName=e.namespace.collection;try{n=buildCountCommand(e,e.cmd.query,a)}catch(e){return t(e)}e.server=e.topology.s.coreTopology,e.topology.command(e.namespace.withCollection(\"$cmd\"),n,e.options,(e,r)=>{t(e,r?r.result.n:null)})}function each(e,r){if(!r)throw MongoError.create({message:\"callback is mandatory\",driver:!0});if(e.isNotified())return;if(e.s.state===CursorState.CLOSED||e.isDead())return handleCallback(r,MongoError.create({message:\"Cursor is closed\",driver:!0}));e.s.state===CursorState.INIT&&(e.s.state=CursorState.OPEN);let o=null;if(e.bufferedCount()>0){for(;o=loop(e,r);)o(e,r);each(e,r)}else e.next((o,t)=>o?handleCallback(r,o):null==t?e.close({skipKillCursors:!0},()=>handleCallback(r,null,null)):void(!1!==handleCallback(r,null,t)&&each(e,r)))}function loop(e,r){if(0!==e.bufferedCount())return e._next(r),loop}function toArray(e,r){const o=[];e.rewind(),e.s.state=CursorState.INIT;const t=()=>{e._next((n,a)=>{if(n)return handleCallback(r,n);if(null==a)return e.close({skipKillCursors:!0},()=>handleCallback(r,null,o));if(o.push(a),e.bufferedCount()>0){let r=e.readBufferedDocuments(e.bufferedCount());e.s.transforms&&\"function\"==typeof e.s.transforms.doc&&(r=r.map(e.s.transforms.doc)),push.apply(o,r)}t()})};t()}module.exports={count:count,each:each,toArray:toArray};","node_modules/mongodb/lib/operations/count.js":"\"use strict\";const buildCountCommand=require(\"./common_functions\").buildCountCommand,OperationBase=require(\"./operation\").OperationBase;class CountOperation extends OperationBase{constructor(e,o,i){super(i),this.cursor=e,this.applySkipLimit=o}execute(e){const o=this.cursor,i=this.applySkipLimit,t=this.options;i&&(\"number\"==typeof o.cursorSkip()&&(t.skip=o.cursorSkip()),\"number\"==typeof o.cursorLimit()&&(t.limit=o.cursorLimit())),t.readPreference&&o.setReadPreference(t.readPreference),\"number\"!=typeof t.maxTimeMS&&o.cmd&&\"number\"==typeof o.cmd.maxTimeMS&&(t.maxTimeMS=o.cmd.maxTimeMS);let r,m={};m.skip=t.skip,m.limit=t.limit,m.hint=t.hint,m.maxTimeMS=t.maxTimeMS,m.collectionName=o.namespace.collection;try{r=buildCountCommand(o,o.cmd.query,m)}catch(o){return e(o)}o.server=o.topology.s.coreTopology,o.topology.command(o.namespace.withCollection(\"$cmd\"),r,o.options,(o,i)=>{e(o,i?i.result.n:null)})}}module.exports=CountOperation;","node_modules/mongodb/lib/operations/collection_ops.js":"\"use strict\";const applyWriteConcern=require(\"../utils\").applyWriteConcern,Code=require(\"../core\").BSON.Code,createIndexDb=require(\"./db_ops\").createIndex,decorateWithCollation=require(\"../utils\").decorateWithCollation,decorateWithReadConcern=require(\"../utils\").decorateWithReadConcern,ensureIndexDb=require(\"./db_ops\").ensureIndex,evaluate=require(\"./db_ops\").evaluate,executeCommand=require(\"./db_ops\").executeCommand,handleCallback=require(\"../utils\").handleCallback,indexInformationDb=require(\"./db_ops\").indexInformation,Long=require(\"../core\").BSON.Long,MongoError=require(\"../core\").MongoError,ReadPreference=require(\"../core\").ReadPreference,insertDocuments=require(\"./common_functions\").insertDocuments,updateDocuments=require(\"./common_functions\").updateDocuments,groupFunction='function () {\\nvar c = db[ns].find(condition);\\nvar map = new Map();\\nvar reduce_function = reduce;\\n\\nwhile (c.hasNext()) {\\nvar obj = c.next();\\nvar key = {};\\n\\nfor (var i = 0, len = keys.length; i < len; ++i) {\\nvar k = keys[i];\\nkey[k] = obj[k];\\n}\\n\\nvar aggObj = map.get(key);\\n\\nif (aggObj == null) {\\nvar newObj = Object.extend({}, key);\\naggObj = Object.extend(newObj, initial);\\nmap.put(key, aggObj);\\n}\\n\\nreduce_function(obj, aggObj);\\n}\\n\\nreturn { \"result\": map.values() };\\n}';function createIndex(e,n,r,o){createIndexDb(e.s.db,e.collectionName,n,r,o)}function createIndexes(e,n,r,o){const l=e.s.topology.capabilities();for(let e=0;e<n.length;e++)if(null==n[e].name){const r=[];if(n[e].collation&&l&&!l.commandsTakeCollation)return o(new MongoError(\"server/primary/mongos does not support collation\"));for(let o in n[e].key)r.push(`${o}_${n[e].key[o]}`);n[e].name=r.join(\"_\")}r=Object.assign({},r,{readPreference:ReadPreference.PRIMARY}),executeCommand(e.s.db,{createIndexes:e.collectionName,indexes:n},r,o)}function ensureIndex(e,n,r,o){ensureIndexDb(e.s.db,e.collectionName,n,r,o)}function group(e,n,r,o,l,a,t,c,i){if(t){const t=l&&\"Code\"===l._bsontype?l:new Code(l),u={group:{ns:e.collectionName,$reduce:t,cond:r,initial:o,out:\"inline\"}};if(null!=a&&(u.group.finalize=a),\"function\"==typeof n||n&&\"Code\"===n._bsontype)u.group.$keyf=n&&\"Code\"===n._bsontype?n:new Code(n);else{const e={};n.forEach(n=>{e[n]=1}),u.group.key=e}(c=Object.assign({},c)).readPreference=ReadPreference.resolve(e,c),decorateWithReadConcern(u,e,c);try{decorateWithCollation(u,e,c)}catch(e){return i(e,null)}executeCommand(e.s.db,u,c,(e,n)=>{if(e)return handleCallback(i,e,null);handleCallback(i,null,n.retval)})}else{const a=null!=l&&\"Code\"===l._bsontype?l.scope:{};a.ns=e.collectionName,a.keys=n,a.condition=r,a.initial=o;const t=groupFunction.replace(/ reduce;/,l.toString()+\";\");evaluate(e.s.db,new Code(t,a),null,c,(e,n)=>{if(e)return handleCallback(i,e,null);handleCallback(i,null,n.result||n)})}}function indexes(e,n,r){n=Object.assign({},{full:!0},n),indexInformationDb(e.s.db,e.collectionName,n,r)}function indexExists(e,n,r,o){indexInformation(e,r,(e,r)=>{if(null!=e)return handleCallback(o,e,null);if(!Array.isArray(n))return handleCallback(o,null,null!=r[n]);for(let e=0;e<n.length;e++)if(null==r[n[e]])return handleCallback(o,null,!1);return handleCallback(o,null,!0)})}function indexInformation(e,n,r){indexInformationDb(e.s.db,e.collectionName,n,r)}function parallelCollectionScan(e,n,r){const o={parallelCollectionScan:e.collectionName,numCursors:n.numCursors};decorateWithReadConcern(o,e,n);const l=n.raw;delete n.raw,executeCommand(e.s.db,o,n,(o,a)=>{if(o)return handleCallback(r,o,null);if(null==a)return handleCallback(r,new Error(\"no result returned for parallelCollectionScan\"),null);n=Object.assign({explicitlyIgnoreSession:!0},n);const t=[];l&&(n.raw=l);for(let r=0;r<a.cursors.length;r++){const o=a.cursors[r].cursor.id,l=\"number\"==typeof o?Long.fromNumber(o):o;t.push(e.s.topology.cursor(e.namespace,l,n))}handleCallback(r,null,t)})}function save(e,n,r,o){const l=applyWriteConcern(Object.assign({},r),{db:e.s.db,collection:e},r);if(null!=n._id)return l.upsert=!0,updateDocuments(e,{_id:n._id},n,l,o);insertDocuments(e,[n],l,(e,r)=>{if(null!=o)return null==n?handleCallback(o,null,null):e?handleCallback(o,e,null):void handleCallback(o,null,r)})}module.exports={createIndex:createIndex,createIndexes:createIndexes,ensureIndex:ensureIndex,group:group,indexes:indexes,indexExists:indexExists,indexInformation:indexInformation,parallelCollectionScan:parallelCollectionScan,save:save};","node_modules/mongodb/lib/operations/db_ops.js":"\"use strict\";const applyWriteConcern=require(\"../utils\").applyWriteConcern,Code=require(\"../core\").BSON.Code,debugOptions=require(\"../utils\").debugOptions,handleCallback=require(\"../utils\").handleCallback,MongoError=require(\"../core\").MongoError,parseIndexOptions=require(\"../utils\").parseIndexOptions,ReadPreference=require(\"../core\").ReadPreference,toError=require(\"../utils\").toError,CONSTANTS=require(\"../constants\"),MongoDBNamespace=require(\"../utils\").MongoDBNamespace,debugFields=[\"authSource\",\"w\",\"wtimeout\",\"j\",\"native_parser\",\"forceServerObjectId\",\"serializeFunctions\",\"raw\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"bufferMaxEntries\",\"numberOfRetries\",\"retryMiliSeconds\",\"readPreference\",\"pkFactory\",\"parentDb\",\"promiseLibrary\",\"noListener\"];function createIndex(e,n,r,o,a){let t=Object.assign({},{readPreference:ReadPreference.PRIMARY},o);if((t=applyWriteConcern(t,{db:e},o)).writeConcern&&\"function\"!=typeof a)throw MongoError.create({message:\"Cannot use a writeConcern without a provided callback\",driver:!0});if(e.serverConfig&&e.serverConfig.isDestroyed())return a(new MongoError(\"topology was destroyed\"));createIndexUsingCreateIndexes(e,n,r,t,(l,i)=>{if(null==l)return handleCallback(a,l,i);if(67===l.code||11e3===l.code||85===l.code||86===l.code||11600===l.code||197===l.code)return handleCallback(a,l,i);const s=createCreateIndexCommand(e,n,r,o);t.checkKeys=!1,e.s.topology.insert(e.s.namespace.withCollection(CONSTANTS.SYSTEM_INDEX_COLLECTION),s,t,(e,n)=>{if(null!=a)return e?handleCallback(a,e):null==n?handleCallback(a,null,null):n.result.writeErrors?handleCallback(a,MongoError.create(n.result.writeErrors[0]),null):void handleCallback(a,null,s.name)})})}function createListener(e,n,r){return function(o){if(r.listeners(n).length>0){r.emit(n,o,e);for(let r=0;r<e.s.children.length;r++)e.s.children[r].emit(n,o,e.s.children[r])}}}function ensureIndex(e,n,r,o,a){const t=applyWriteConcern({},{db:e},o),l=createCreateIndexCommand(e,n,r,o).name;if(e.serverConfig&&e.serverConfig.isDestroyed())return a(new MongoError(\"topology was destroyed\"));t.readPreference=ReadPreference.PRIMARY,indexInformation(e,n,t,(t,i)=>{if(null!=t&&26!==t.code)return handleCallback(a,t,null);if(null!=i&&i[l]){if(\"function\"==typeof a)return handleCallback(a,null,l)}else createIndex(e,n,r,o,a)})}function evaluate(e,n,r,o,a){let t=n,l=[];if(e.serverConfig&&e.serverConfig.isDestroyed())return a(new MongoError(\"topology was destroyed\"));t&&\"Code\"===t._bsontype||(t=new Code(t)),null==r||Array.isArray(r)||\"function\"==typeof r?null!=r&&Array.isArray(r)&&\"function\"!=typeof r&&(l=r):l=[r];let i={$eval:t,args:l};o.nolock&&(i.nolock=o.nolock),o.readPreference=new ReadPreference(ReadPreference.PRIMARY),executeCommand(e,i,o,(e,n)=>e?handleCallback(a,e,null):n&&1===n.ok?handleCallback(a,null,n.retval):n?handleCallback(a,MongoError.create({message:`eval failed: ${n.errmsg}`,driver:!0}),null):void handleCallback(a,e,n))}function executeCommand(e,n,r,o){if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new MongoError(\"topology was destroyed\"));const a=r.dbName||r.authdb||e.databaseName;r.readPreference=ReadPreference.resolve(e,r),e.s.logger.isDebug()&&e.s.logger.debug(`executing command ${JSON.stringify(n)} against ${a}.$cmd with options [${JSON.stringify(debugOptions(debugFields,r))}]`),e.s.topology.command(e.s.namespace.withCollection(\"$cmd\"),n,r,(e,n)=>e?handleCallback(o,e):r.full?handleCallback(o,null,n):void handleCallback(o,null,n.result))}function executeDbAdminCommand(e,n,r,o){const a=new MongoDBNamespace(\"admin\",\"$cmd\");e.s.topology.command(a,n,r,(n,r)=>e.serverConfig&&e.serverConfig.isDestroyed()?o(new MongoError(\"topology was destroyed\")):n?handleCallback(o,n):void handleCallback(o,null,r.result))}function indexInformation(e,n,r,o){const a=null!=r.full&&r.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new MongoError(\"topology was destroyed\"));e.collection(n).listIndexes(r).toArray((e,n)=>e?o(toError(e)):Array.isArray(n)?a?handleCallback(o,null,n):void handleCallback(o,null,function(e){let n={};for(let r=0;r<e.length;r++){const o=e[r];n[o.name]=[];for(let e in o.key)n[o.name].push([e,o.key[e]])}return n}(n)):handleCallback(o,null,[]))}function profilingInfo(e,n,r){try{e.collection(\"system.profile\").find({},n).toArray(r)}catch(e){return r(e,null)}}function validateDatabaseName(e){if(\"string\"!=typeof e)throw MongoError.create({message:\"database name must be a string\",driver:!0});if(0===e.length)throw MongoError.create({message:\"database name cannot be the empty string\",driver:!0});if(\"$external\"===e)return;const n=[\" \",\".\",\"$\",\"/\",\"\\\\\"];for(let r=0;r<n.length;r++)if(-1!==e.indexOf(n[r]))throw MongoError.create({message:\"database names cannot contain the character '\"+n[r]+\"'\",driver:!0})}function createCreateIndexCommand(e,n,r,o){const a=parseIndexOptions(r),t=a.fieldHash,l=\"string\"==typeof o.name?o.name:a.name,i={ns:e.s.namespace.withCollection(n).toString(),key:t,name:l},s=null!=o&&\"object\"!=typeof o&&o;o=null==o||\"boolean\"==typeof o?{}:o;const c=Object.keys(i);for(let e in o)-1===c.indexOf(e)&&(i[e]=o[e]);null==i.unique&&(i.unique=s);const d=[\"w\",\"wtimeout\",\"j\",\"fsync\",\"readPreference\",\"session\"];for(let e=0;e<d.length;e++)delete i[d[e]];return i}function createIndexUsingCreateIndexes(e,n,r,o,a){const t=parseIndexOptions(r),l=\"string\"==typeof o.name?o.name:t.name,i=[{name:l,key:t.fieldHash}],s=Object.keys(i[0]).concat([\"writeConcern\",\"w\",\"wtimeout\",\"j\",\"fsync\",\"readPreference\",\"session\"]);for(let e in o)-1===s.indexOf(e)&&(i[0][e]=o[e]);const c=e.s.topology.capabilities();if(i[0].collation&&c&&!c.commandsTakeCollation){const e=new MongoError(\"server/primary/mongos does not support collation\");return e.code=67,a(e)}const d=applyWriteConcern({createIndexes:n,indexes:i},{db:e},o);o.readPreference=ReadPreference.PRIMARY,executeCommand(e,d,o,(e,n)=>e?handleCallback(a,e,null):0===n.ok?handleCallback(a,toError(n),null):void handleCallback(a,null,l))}module.exports={createListener:createListener,createIndex:createIndex,ensureIndex:ensureIndex,evaluate:evaluate,executeCommand:executeCommand,executeDbAdminCommand:executeDbAdminCommand,indexInformation:indexInformation,profilingInfo:profilingInfo,validateDatabaseName:validateDatabaseName};","node_modules/mongodb/lib/operations/common_functions.js":"\"use strict\";const applyRetryableWrites=require(\"../utils\").applyRetryableWrites,applyWriteConcern=require(\"../utils\").applyWriteConcern,decorateWithCollation=require(\"../utils\").decorateWithCollation,decorateWithReadConcern=require(\"../utils\").decorateWithReadConcern,executeCommand=require(\"./db_ops\").executeCommand,formattedOrderClause=require(\"../utils\").formattedOrderClause,handleCallback=require(\"../utils\").handleCallback,MongoError=require(\"../core\").MongoError,ReadPreference=require(\"../core\").ReadPreference,toError=require(\"../utils\").toError,CursorState=require(\"../core/cursor\").CursorState,maxWireVersion=require(\"../core/utils\").maxWireVersion;function buildCountCommand(e,r,t){const n=t.skip,o=t.limit;let l=t.hint;const i=t.maxTimeMS;r=r||{};const a={count:t.collectionName,query:r};return e.s.numberOfRetries?(e.options.hint?l=e.options.hint:e.cmd.hint&&(l=e.cmd.hint),decorateWithCollation(a,e,e.cmd)):decorateWithCollation(a,e,t),\"number\"==typeof n&&(a.skip=n),\"number\"==typeof o&&(a.limit=o),\"number\"==typeof i&&(a.maxTimeMS=i),l&&(a.hint=l),decorateWithReadConcern(a,e),a}function findAndModify(e,r,t,n,o,l){const i={findAndModify:e.collectionName,query:r};(t=formattedOrderClause(t))&&(i.sort=t),i.new=!!o.new,i.remove=!!o.remove,i.upsert=!!o.upsert;const a=o.projection||o.fields;a&&(i.fields=a),o.arrayFilters&&(i.arrayFilters=o.arrayFilters,delete o.arrayFilters),n&&!o.remove&&(i.update=n),o.maxTimeMS&&(i.maxTimeMS=o.maxTimeMS),o.serializeFunctions=o.serializeFunctions||e.s.serializeFunctions,o.checkKeys=!1;let s=Object.assign({},o);s=applyRetryableWrites(s,e.s.db),(s=applyWriteConcern(s,{db:e.s.db,collection:e},o)).writeConcern&&(i.writeConcern=s.writeConcern),!0===s.bypassDocumentValidation&&(i.bypassDocumentValidation=s.bypassDocumentValidation),s.readPreference=ReadPreference.primary;try{decorateWithCollation(i,e,s)}catch(e){return l(e,null)}executeCommand(e.s.db,i,s,(e,r)=>e?handleCallback(l,e,null):handleCallback(l,null,r))}function indexInformation(e,r,t,n){const o=null!=t.full&&t.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new MongoError(\"topology was destroyed\"));e.collection(r).listIndexes(t).toArray((e,r)=>e?n(toError(e)):Array.isArray(r)?o?handleCallback(n,null,r):void handleCallback(n,null,function(e){let r={};for(let t=0;t<e.length;t++){const n=e[t];r[n.name]=[];for(let e in n.key)r[n.name].push([e,n.key[e]])}return r}(r)):handleCallback(n,null,[]))}function prepareDocs(e,r,t){const n=\"boolean\"==typeof t.forceServerObjectId?t.forceServerObjectId:e.s.db.options.forceServerObjectId;return!0===n?r:r.map(r=>(!0!==n&&null==r._id&&(r._id=e.s.pkFactory.createPk()),r))}function nextObject(e,r){if(e.s.state===CursorState.CLOSED||e.isDead&&e.isDead())return handleCallback(r,MongoError.create({message:\"Cursor is closed\",driver:!0}));if(e.s.state===CursorState.INIT&&e.cmd&&e.cmd.sort)try{e.cmd.sort=formattedOrderClause(e.cmd.sort)}catch(e){return handleCallback(r,e)}e._next((t,n)=>{if(e.s.state=CursorState.OPEN,t)return handleCallback(r,t);handleCallback(r,null,n)})}function insertDocuments(e,r,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||{},r=Array.isArray(r)?r:[r];let o=Object.assign({},t);o=applyRetryableWrites(o,e.s.db),!0===(o=applyWriteConcern(o,{db:e.s.db,collection:e},t)).keepGoing&&(o.ordered=!1),o.serializeFunctions=t.serializeFunctions||e.s.serializeFunctions,r=prepareDocs(e,r,t),e.s.topology.insert(e.s.namespace,r,o,(e,t)=>{if(null!=n){if(e)return handleCallback(n,e);if(null==t)return handleCallback(n,null,null);if(t.result.code)return handleCallback(n,toError(t.result));if(t.result.writeErrors)return handleCallback(n,toError(t.result.writeErrors[0]));t.ops=r,handleCallback(n,null,t)}})}function removeDocuments(e,r,t,n){\"function\"==typeof t?(n=t,t={}):\"function\"==typeof r&&(n=r,t={},r={}),t=t||{};let o=Object.assign({},t);o=applyRetryableWrites(o,e.s.db),o=applyWriteConcern(o,{db:e.s.db,collection:e},t),null==r&&(r={});const l={q:r,limit:0};t.single?l.limit=1:o.retryWrites&&(o.retryWrites=!1),t.hint&&(l.hint=t.hint);try{decorateWithCollation(o,e,t)}catch(e){return n(e,null)}if(void 0!==t.explain&&maxWireVersion(e.s.topology)<3)return n?n(new MongoError(\"server does not support explain on remove\")):void 0;e.s.topology.remove(e.s.namespace,[l],o,(e,r)=>{if(null!=n)return e?handleCallback(n,e,null):null==r?handleCallback(n,null,null):r.result.code?handleCallback(n,toError(r.result)):r.result.writeErrors?handleCallback(n,toError(r.result.writeErrors[0])):void handleCallback(n,null,r)})}function updateDocuments(e,r,t,n,o){if(\"function\"==typeof n&&(o=n,n=null),null==n&&(n={}),\"function\"!=typeof o&&(o=null),null==r||\"object\"!=typeof r)return o(toError(\"selector must be a valid JavaScript object\"));if(null==t||\"object\"!=typeof t)return o(toError(\"document must be a valid JavaScript object\"));let l=Object.assign({},n);l=applyRetryableWrites(l,e.s.db),(l=applyWriteConcern(l,{db:e.s.db,collection:e},n)).serializeFunctions=n.serializeFunctions||e.s.serializeFunctions;const i={q:r,u:t};i.upsert=void 0!==n.upsert&&!!n.upsert,i.multi=void 0!==n.multi&&!!n.multi,n.hint&&(i.hint=n.hint),l.arrayFilters&&(i.arrayFilters=l.arrayFilters,delete l.arrayFilters),l.retryWrites&&i.multi&&(l.retryWrites=!1);try{decorateWithCollation(l,e,n)}catch(e){return o(e,null)}if(void 0!==n.explain&&maxWireVersion(e.s.topology)<3)return o?o(new MongoError(\"server does not support explain on update\")):void 0;e.s.topology.update(e.s.namespace,[i],l,(e,r)=>{if(null!=o)return e?handleCallback(o,e,null):null==r?handleCallback(o,null,null):r.result.code?handleCallback(o,toError(r.result)):r.result.writeErrors?handleCallback(o,toError(r.result.writeErrors[0])):void handleCallback(o,null,r)})}module.exports={buildCountCommand:buildCountCommand,findAndModify:findAndModify,indexInformation:indexInformation,nextObject:nextObject,prepareDocs:prepareDocs,insertDocuments:insertDocuments,removeDocuments:removeDocuments,updateDocuments:updateDocuments};","node_modules/mongodb/lib/constants.js":"\"use strict\";module.exports={SYSTEM_NAMESPACE_COLLECTION:\"system.namespaces\",SYSTEM_INDEX_COLLECTION:\"system.indexes\",SYSTEM_PROFILE_COLLECTION:\"system.profile\",SYSTEM_USER_COLLECTION:\"system.users\",SYSTEM_COMMAND_COLLECTION:\"$cmd\",SYSTEM_JS_COLLECTION:\"system.js\"};","node_modules/mongodb/lib/operations/command_v2.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,OperationBase=require(\"./operation\").OperationBase,ReadPreference=require(\"../core\").ReadPreference,ReadConcern=require(\"../read_concern\"),WriteConcern=require(\"../write_concern\"),maxWireVersion=require(\"../core/utils\").maxWireVersion,decorateWithExplain=require(\"../utils\").decorateWithExplain,commandSupportsReadConcern=require(\"../core/sessions\").commandSupportsReadConcern,MongoError=require(\"../core/error\").MongoError,SUPPORTS_WRITE_CONCERN_AND_COLLATION=5;class CommandOperationV2 extends OperationBase{constructor(e,r,o){super(r),this.ns=e.s.namespace.withCollection(\"$cmd\");const n=this.hasAspect(Aspect.NO_INHERIT_OPTIONS)?void 0:e;this.readPreference=this.hasAspect(Aspect.WRITE_OPERATION)?ReadPreference.primary:ReadPreference.resolve(n,this.options),this.readConcern=resolveReadConcern(n,this.options),this.writeConcern=resolveWriteConcern(n,this.options),o&&\"boolean\"==typeof o.fullResponse&&(this.fullResponse=!0),this.options.readPreference=this.readPreference,e.s.logger?this.logger=e.s.logger:e.s.db&&e.s.db.logger&&(this.logger=e.s.db.logger)}executeCommand(e,r,o){this.server=e;const n=this.options,s=maxWireVersion(e),t=this.session&&this.session.inTransaction();this.readConcern&&commandSupportsReadConcern(r)&&!t&&Object.assign(r,{readConcern:this.readConcern}),n.collation&&s<SUPPORTS_WRITE_CONCERN_AND_COLLATION?o(new MongoError(`Server ${e.name}, which reports wire version ${s}, does not support collation`)):(s>=SUPPORTS_WRITE_CONCERN_AND_COLLATION&&(this.writeConcern&&this.hasAspect(Aspect.WRITE_OPERATION)&&Object.assign(r,{writeConcern:this.writeConcern}),n.collation&&\"object\"==typeof n.collation&&Object.assign(r,{collation:n.collation})),\"number\"==typeof n.maxTimeMS&&(r.maxTimeMS=n.maxTimeMS),\"string\"==typeof n.comment&&(r.comment=n.comment),this.hasAspect(Aspect.EXPLAINABLE)&&this.explain&&(s<6&&r.aggregate?r.explain=!0:r=decorateWithExplain(r,this.explain)),this.logger&&this.logger.isDebug()&&this.logger.debug(`executing command ${JSON.stringify(r)} against ${this.ns}`),e.command(this.ns.toString(),r,this.options,(e,r)=>{e?o(e,null):this.fullResponse?o(null,r):o(null,r.result)}))}}function resolveWriteConcern(e,r){return WriteConcern.fromOptions(r)||e&&e.writeConcern}function resolveReadConcern(e,r){return ReadConcern.fromOptions(r)||e&&e.readConcern}module.exports=CommandOperationV2;","node_modules/mongodb/lib/operations/add_user.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,CommandOperation=require(\"./command\"),defineAspects=require(\"./operation\").defineAspects,crypto=require(\"crypto\"),handleCallback=require(\"../utils\").handleCallback,toError=require(\"../utils\").toError,emitWarning=require(\"../utils\").emitWarning;class AddUserOperation extends CommandOperation{constructor(e,r,s,t){super(e,t),this.username=r,this.password=s}_buildCommand(){const e=this.db,r=this.username,s=this.password,t=this.options;let o=[];Array.isArray(t.roles)&&(o=t.roles),\"string\"==typeof t.roles&&(o=[t.roles]),0===o.length&&emitWarning(\"Creating a user without roles is deprecated in MongoDB >= 2.6\"),\"admin\"!==e.databaseName.toLowerCase()&&\"admin\"!==t.dbName||Array.isArray(t.roles)?Array.isArray(t.roles)||(o=[\"dbOwner\"]):o=[\"root\"];const a=e.s.topology.lastIsMaster().maxWireVersion>=7;let i=s;if(!a){const e=crypto.createHash(\"md5\");e.update(r+\":mongo:\"+s),i=e.digest(\"hex\")}const n={createUser:r,customData:t.customData||{},roles:o,digestPassword:a};return\"string\"==typeof s&&(n.pwd=i),n}execute(e){if(null!=this.options.digestPassword)return e(toError(\"The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option.\"));super.execute((r,s)=>handleCallback(e,r,r?null:s))}}defineAspects(AddUserOperation,Aspect.WRITE_OPERATION),module.exports=AddUserOperation;","node_modules/mongodb/lib/operations/collections.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,handleCallback=require(\"../utils\").handleCallback;let collection;function loadCollection(){return collection||(collection=require(\"../collection\")),collection}class CollectionsOperation extends OperationBase{constructor(e,l){super(l),this.db=e}execute(e){const l=this.db;let o=this.options,t=loadCollection();o=Object.assign({},o,{nameOnly:!0}),l.listCollections({},o).toArray((o,n)=>{if(null!=o)return handleCallback(e,o,null);n=n.filter(e=>-1===e.name.indexOf(\"$\")),handleCallback(e,null,n.map(e=>new t(l,l.s.topology,l.databaseName,e.name,l.s.pkFactory,l.s.options)))})}}module.exports=CollectionsOperation;","node_modules/mongodb/lib/operations/command.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,OperationBase=require(\"./operation\").OperationBase,applyWriteConcern=require(\"../utils\").applyWriteConcern,debugOptions=require(\"../utils\").debugOptions,handleCallback=require(\"../utils\").handleCallback,MongoError=require(\"../core\").MongoError,ReadPreference=require(\"../core\").ReadPreference,MongoDBNamespace=require(\"../utils\").MongoDBNamespace,debugFields=[\"authSource\",\"w\",\"wtimeout\",\"j\",\"native_parser\",\"forceServerObjectId\",\"serializeFunctions\",\"raw\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"bufferMaxEntries\",\"numberOfRetries\",\"retryMiliSeconds\",\"readPreference\",\"pkFactory\",\"parentDb\",\"promiseLibrary\",\"noListener\"];class CommandOperation extends OperationBase{constructor(e,r,n,o){super(r),this.hasAspect(Aspect.WRITE_OPERATION)?(applyWriteConcern(this.options,null!=n?{db:e,coll:n}:{db:e},this.options),this.options.readPreference=ReadPreference.primary):this.options.readPreference=null!=n?ReadPreference.resolve(n,r):ReadPreference.resolve(e,r),this.db=e,null!=o&&(this.command=o),null!=n&&(this.collection=n)}_buildCommand(){if(null!=this.command)return this.command}execute(e){const r=this.db,n=Object.assign({},this.options);if(r.serverConfig&&r.serverConfig.isDestroyed())return e(new MongoError(\"topology was destroyed\"));let o;try{o=this._buildCommand()}catch(r){return e(r)}const s=n.dbName||n.authdb||r.databaseName;this.hasAspect(Aspect.WRITE_OPERATION)&&(!n.writeConcern||n.session&&n.session.inTransaction()||(o.writeConcern=n.writeConcern)),r.s.logger.isDebug()&&r.s.logger.debug(`executing command ${JSON.stringify(o)} against ${s}.$cmd with options [${JSON.stringify(debugOptions(debugFields,n))}]`);const t=null!=this.namespace?this.namespace:new MongoDBNamespace(s,\"$cmd\");r.s.topology.command(t,o,n,(r,o)=>r?handleCallback(e,r):n.full?handleCallback(e,null,o):void handleCallback(e,null,o.result))}}module.exports=CommandOperation;","node_modules/mongodb/lib/operations/run_command.js":"\"use strict\";const CommandOperationV2=require(\"./command_v2\"),defineAspects=require(\"./operation\").defineAspects,Aspect=require(\"./operation\").Aspect;class RunCommandOperation extends CommandOperationV2{constructor(e,t,n){super(e,n),this.command=t}execute(e,t){const n=this.command;this.executeCommand(e,n,t)}}defineAspects(RunCommandOperation,[Aspect.EXECUTE_WITH_SELECTION,Aspect.NO_INHERIT_OPTIONS]),module.exports=RunCommandOperation;","node_modules/mongodb/lib/operations/create_collection.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,CommandOperation=require(\"./command\"),applyWriteConcern=require(\"../utils\").applyWriteConcern,loadCollection=require(\"../dynamic_loaders\").loadCollection,MongoError=require(\"../core\").MongoError,ReadPreference=require(\"../core\").ReadPreference,ILLEGAL_COMMAND_FIELDS=new Set([\"w\",\"wtimeout\",\"j\",\"fsync\",\"autoIndexId\",\"strict\",\"serializeFunctions\",\"pkFactory\",\"raw\",\"readPreference\",\"session\",\"readConcern\",\"writeConcern\"]);class CreateCollectionOperation extends CommandOperation{constructor(e,r,t){super(e,t),this.name=r}_buildCommand(){const e=this.name,r=this.options,t={create:e};for(let e in r)null==r[e]||\"function\"==typeof r[e]||ILLEGAL_COMMAND_FIELDS.has(e)||(t[e]=r[e]);return t}execute(e){const r=this.db,t=this.name,o=this.options,n=loadCollection();let i=Object.assign({nameOnly:!0,strict:!1},o);function s(i){if(i)return e(i);try{e(null,new n(r,r.s.topology,r.databaseName,t,r.s.pkFactory,o))}catch(i){e(i)}}(i=applyWriteConcern(i,{db:r},i)).strict?r.listCollections({name:t},i).setReadPreference(ReadPreference.PRIMARY).toArray((r,o)=>r?e(r):o.length>0?e(new MongoError(`Collection ${t} already exists. Currently in strict mode.`)):void super.execute(s)):super.execute(s)}}defineAspects(CreateCollectionOperation,Aspect.WRITE_OPERATION),module.exports=CreateCollectionOperation;","node_modules/mongodb/lib/operations/create_indexes.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,CommandOperationV2=require(\"./command_v2\"),MongoError=require(\"../core\").MongoError,parseIndexOptions=require(\"../utils\").parseIndexOptions,maxWireVersion=require(\"../core/utils\").maxWireVersion,VALID_INDEX_OPTIONS=new Set([\"background\",\"unique\",\"name\",\"partialFilterExpression\",\"sparse\",\"expireAfterSeconds\",\"storageEngine\",\"collation\",\"weights\",\"default_language\",\"language_override\",\"textIndexVersion\",\"2dsphereIndexVersion\",\"bits\",\"min\",\"max\",\"bucketSize\",\"wildcardProjection\"]);class CreateIndexesOperation extends CommandOperationV2{constructor(e,r,n,o){if(super(e,o),this.collection=r,Array.isArray(n)&&!Array.isArray(n[0]))this.indexes=n;else{this.onlyReturnNameOfCreatedIndex=!0;const e=parseIndexOptions(n),r={name:\"string\"==typeof o.name?o.name:e.name,key:e.fieldHash};for(let e in o)VALID_INDEX_OPTIONS.has(e)&&(r[e]=o[e]);this.indexes=[r]}}execute(e,r){const n=this.options,o=this.indexes,t=maxWireVersion(e);for(let n=0;n<o.length;n++){if(o[n].collation&&t<5)return void r(new MongoError(`Server ${e.name}, which reports wire version ${t}, does not support collation`));if(null==o[n].name){const e=[];for(let r in o[n].key)e.push(`${r}_${o[n].key[r]}`);o[n].name=e.join(\"_\")}}const i={createIndexes:this.collection,indexes:o};if(null!=n.commitQuorum){if(t<9)return void r(new MongoError(\"`commitQuorum` option for `createIndexes` not supported on servers < 4.4\"));i.commitQuorum=n.commitQuorum}this.options.collation=void 0,super.executeCommand(e,i,(e,n)=>{e?r(e):r(null,this.onlyReturnNameOfCreatedIndex?o[0].name:n)})}}defineAspects(CreateIndexesOperation,[Aspect.WRITE_OPERATION,Aspect.EXECUTE_WITH_SELECTION]),module.exports=CreateIndexesOperation;","node_modules/mongodb/lib/operations/drop.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,CommandOperation=require(\"./command\"),defineAspects=require(\"./operation\").defineAspects,handleCallback=require(\"../utils\").handleCallback;class DropOperation extends CommandOperation{constructor(e,a){const o=Object.assign({},a,e.s.options);a.session&&(o.session=a.session),super(e,o)}execute(e){super.execute((a,o)=>a?handleCallback(e,a):o.ok?handleCallback(e,null,!0):void handleCallback(e,null,!1))}}defineAspects(DropOperation,Aspect.WRITE_OPERATION);class DropCollectionOperation extends DropOperation{constructor(e,a,o){super(e,o),this.name=a,this.namespace=`${e.namespace}.${a}`}_buildCommand(){return{drop:this.name}}}class DropDatabaseOperation extends DropOperation{_buildCommand(){return{dropDatabase:1}}}module.exports={DropOperation:DropOperation,DropCollectionOperation:DropCollectionOperation,DropDatabaseOperation:DropDatabaseOperation};","node_modules/mongodb/lib/operations/execute_db_admin_command.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,handleCallback=require(\"../utils\").handleCallback,MongoError=require(\"../core\").MongoError,MongoDBNamespace=require(\"../utils\").MongoDBNamespace;class ExecuteDbAdminCommandOperation extends OperationBase{constructor(e,o,r){super(r),this.db=e,this.selector=o}execute(e){const o=this.db,r=this.selector,s=this.options,a=new MongoDBNamespace(\"admin\",\"$cmd\");o.s.topology.command(a,r,s,(r,s)=>o.serverConfig&&o.serverConfig.isDestroyed()?e(new MongoError(\"topology was destroyed\")):r?handleCallback(e,r):void handleCallback(e,null,s.result))}}module.exports=ExecuteDbAdminCommandOperation;","node_modules/mongodb/lib/operations/index_information.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,indexInformation=require(\"./common_functions\").indexInformation;class IndexInformationOperation extends OperationBase{constructor(n,e,o){super(o),this.db=n,this.name=e}execute(n){const e=this.db,o=this.name,t=this.options;indexInformation(e,o,t,n)}}module.exports=IndexInformationOperation;","node_modules/mongodb/lib/operations/list_collections.js":"\"use strict\";const CommandOperationV2=require(\"./command_v2\"),Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,maxWireVersion=require(\"../core/utils\").maxWireVersion,CONSTANTS=require(\"../constants\"),LIST_COLLECTIONS_WIRE_VERSION=3;function listCollectionsTransforms(e){const t=`${e}.`;return{doc:e=>{const s=e.name.indexOf(t);return e.name&&0===s&&(e.name=e.name.substr(s+t.length)),e}}}class ListCollectionsOperation extends CommandOperationV2{constructor(e,t,s){super(e,s,{fullResponse:!0}),this.db=e,this.filter=t,this.nameOnly=!!this.options.nameOnly,\"number\"==typeof this.options.batchSize&&(this.batchSize=this.options.batchSize)}execute(e,t){if(maxWireVersion(e)<LIST_COLLECTIONS_WIRE_VERSION){let s=this.filter;const n=this.db.s.namespace.db;\"string\"!=typeof s.name||new RegExp(\"^\"+n+\"\\\\.\").test(s.name)||((s=Object.assign({},s)).name=this.db.s.namespace.withCollection(s.name).toString()),null==s&&(s.name=`/${n}/`),s=s.name?{$and:[{name:s.name},{name:/^((?!\\$).)*$/}]}:{name:/^((?!\\$).)*$/};const i=listCollectionsTransforms(n);return void e.query(`${n}.${CONSTANTS.SYSTEM_NAMESPACE_COLLECTION}`,{query:s},{batchSize:this.batchSize||1e3},{},(e,s)=>{s&&s.message&&s.message.documents&&Array.isArray(s.message.documents)&&(s.message.documents=s.message.documents.map(i.doc)),t(e,s)})}const s={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly};return super.executeCommand(e,s,t)}}defineAspects(ListCollectionsOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION]),module.exports=ListCollectionsOperation;","node_modules/mongodb/lib/operations/profiling_level.js":"\"use strict\";const CommandOperation=require(\"./command\");class ProfilingLevelOperation extends CommandOperation{constructor(l,e,r){super(l,r)}_buildCommand(){return{profile:-1}}execute(l){super.execute((e,r)=>{if(null==e&&1===r.ok){const e=r.was;return 0===e?l(null,\"off\"):1===e?l(null,\"slow_only\"):2===e?l(null,\"all\"):l(new Error(\"Error: illegal profiling level value \"+e),null)}l(null!=e?e:new Error(\"Error with profile command\"),null)})}}module.exports=ProfilingLevelOperation;","node_modules/mongodb/lib/operations/remove_user.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,CommandOperation=require(\"./command\"),defineAspects=require(\"./operation\").defineAspects,handleCallback=require(\"../utils\").handleCallback,WriteConcern=require(\"../write_concern\");class RemoveUserOperation extends CommandOperation{constructor(e,r,n){const t={},a=WriteConcern.fromOptions(n);null!=a&&(t.writeConcern=a),n.dbName&&(t.dbName=n.dbName),\"number\"==typeof n.maxTimeMS&&(t.maxTimeMS=n.maxTimeMS),super(e,t),this.username=r}_buildCommand(){return{dropUser:this.username}}execute(e){super.execute((r,n)=>{if(r)return handleCallback(e,r,null);handleCallback(e,r,!!n.ok)})}}defineAspects(RemoveUserOperation,Aspect.WRITE_OPERATION),module.exports=RemoveUserOperation;","node_modules/mongodb/lib/operations/rename.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,applyWriteConcern=require(\"../utils\").applyWriteConcern,checkCollectionName=require(\"../utils\").checkCollectionName,executeDbAdminCommand=require(\"./db_ops\").executeDbAdminCommand,handleCallback=require(\"../utils\").handleCallback,loadCollection=require(\"../dynamic_loaders\").loadCollection,toError=require(\"../utils\").toError;class RenameOperation extends OperationBase{constructor(e,o,t){super(t),this.collection=e,this.newName=o}execute(e){const o=this.collection,t=this.newName,l=this.options;let r=loadCollection();checkCollectionName(t);const n={renameCollection:o.namespace,to:o.s.namespace.withCollection(t).toString(),dropTarget:\"boolean\"==typeof l.dropTarget&&l.dropTarget};applyWriteConcern(n,{db:o.s.db,collection:o},l),executeDbAdminCommand(o.s.db.admin().s.db,n,l,(l,n)=>{if(l)return handleCallback(e,l,null);if(n.errmsg)return handleCallback(e,toError(n),null);try{return handleCallback(e,null,new r(o.s.db,o.s.topology,o.s.namespace.db,t,o.s.pkFactory,o.s.options))}catch(l){return handleCallback(e,toError(l),null)}})}}module.exports=RenameOperation;","node_modules/mongodb/lib/operations/set_profiling_level.js":"\"use strict\";const CommandOperation=require(\"./command\"),levelValues=new Set([\"off\",\"slow_only\",\"all\"]);class SetProfilingLevelOperation extends CommandOperation{constructor(e,l,r){let o=0;\"off\"===l?o=0:\"slow_only\"===l?o=1:\"all\"===l&&(o=2),super(e,r),this.level=l,this.profile=o}_buildCommand(){return{profile:this.profile}}execute(e){const l=this.level;if(!levelValues.has(l))return e(new Error(\"Error: illegal profiling level value \"+l));super.execute((r,o)=>null==r&&1===o.ok?e(null,l):e(null!=r?r:new Error(\"Error with profile command\"),null))}}module.exports=SetProfilingLevelOperation;","node_modules/mongodb/lib/bulk/unordered.js":"\"use strict\";const common=require(\"./common\"),BulkOperationBase=common.BulkOperationBase,Batch=common.Batch,bson=common.bson,utils=require(\"../utils\"),toError=utils.toError;function addToOperationsList(e,r,t){const n=bson.calculateObjectSize(t,{checkKeys:!1,ignoreUndefined:!1});if(n>=e.s.maxBsonObjectSize)throw toError(\"document is larger than the maximum size \"+e.s.maxBsonObjectSize);e.s.currentBatch=null,r===common.INSERT?e.s.currentBatch=e.s.currentInsertBatch:r===common.UPDATE?e.s.currentBatch=e.s.currentUpdateBatch:r===common.REMOVE&&(e.s.currentBatch=e.s.currentRemoveBatch);const s=e.s.maxKeySize;if(null==e.s.currentBatch&&(e.s.currentBatch=new Batch(r,e.s.currentIndex)),(e.s.currentBatch.size+1>=e.s.maxWriteBatchSize||e.s.currentBatch.size>0&&e.s.currentBatch.sizeBytes+s+n>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==r)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new Batch(r,e.s.currentIndex)),Array.isArray(t))throw toError(\"operation passed in cannot be an Array\");return e.s.currentBatch.operations.push(t),e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentIndex=e.s.currentIndex+1,r===common.INSERT?(e.s.currentInsertBatch=e.s.currentBatch,e.s.bulkResult.insertedIds.push({index:e.s.bulkResult.insertedIds.length,_id:t._id})):r===common.UPDATE?e.s.currentUpdateBatch=e.s.currentBatch:r===common.REMOVE&&(e.s.currentRemoveBatch=e.s.currentBatch),e.s.currentBatch.size+=1,e.s.currentBatch.sizeBytes+=s+n,e}class UnorderedBulkOperation extends BulkOperationBase{constructor(e,r,t){t=t||{},super(e,r,t=Object.assign(t,{addToOperationsList:addToOperationsList}),!1)}handleWriteError(e,r){return!this.s.batches.length&&super.handleWriteError(e,r)}}function initializeUnorderedBulkOp(e,r,t){return new UnorderedBulkOperation(e,r,t)}initializeUnorderedBulkOp.UnorderedBulkOperation=UnorderedBulkOperation,module.exports=initializeUnorderedBulkOp,module.exports.Bulk=UnorderedBulkOperation;","node_modules/mongodb/lib/bulk/ordered.js":"\"use strict\";const common=require(\"./common\"),BulkOperationBase=common.BulkOperationBase,Batch=common.Batch,bson=common.bson,utils=require(\"../utils\"),toError=utils.toError;function addToOperationsList(e,r,t){const n=bson.calculateObjectSize(t,{checkKeys:!1,ignoreUndefined:!1});if(n>=e.s.maxBsonObjectSize)throw toError(\"document is larger than the maximum size \"+e.s.maxBsonObjectSize);null==e.s.currentBatch&&(e.s.currentBatch=new Batch(r,e.s.currentIndex));const s=e.s.maxKeySize;if((e.s.currentBatchSize+1>=e.s.maxWriteBatchSize||e.s.currentBatchSize>0&&e.s.currentBatchSizeBytes+s+n>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==r)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new Batch(r,e.s.currentIndex),e.s.currentBatchSize=0,e.s.currentBatchSizeBytes=0),r===common.INSERT&&e.s.bulkResult.insertedIds.push({index:e.s.currentIndex,_id:t._id}),Array.isArray(t))throw toError(\"operation passed in cannot be an Array\");return e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentBatch.operations.push(t),e.s.currentBatchSize+=1,e.s.currentBatchSizeBytes+=s+n,e.s.currentIndex+=1,e}class OrderedBulkOperation extends BulkOperationBase{constructor(e,r,t){t=t||{},super(e,r,t=Object.assign(t,{addToOperationsList:addToOperationsList}),!0)}}function initializeOrderedBulkOp(e,r,t){return new OrderedBulkOperation(e,r,t)}initializeOrderedBulkOp.OrderedBulkOperation=OrderedBulkOperation,module.exports=initializeOrderedBulkOp,module.exports.Bulk=OrderedBulkOperation;","node_modules/mongodb/lib/operations/bulk_write.js":"\"use strict\";const applyRetryableWrites=require(\"../utils\").applyRetryableWrites,applyWriteConcern=require(\"../utils\").applyWriteConcern,MongoError=require(\"../core\").MongoError,OperationBase=require(\"./operation\").OperationBase;class BulkWriteOperation extends OperationBase{constructor(e,t,r){super(r),this.collection=e,this.operations=t}execute(e){const t=this.collection,r=this.operations;let n=this.options;t.s.options.ignoreUndefined&&((n=Object.assign({},n)).ignoreUndefined=t.s.options.ignoreUndefined);const o=!0===n.ordered||null==n.ordered?t.initializeOrderedBulkOp(n):t.initializeUnorderedBulkOp(n);let i=!1;try{for(let e=0;e<r.length;e++){const t=Object.keys(r[e])[0];r[e][t].collation&&(i=!0),o.raw(r[e])}}catch(t){return e(t,null)}let s=Object.assign({},n);s=applyRetryableWrites(s,t.s.db);const l=(s=applyWriteConcern(s,{db:t.s.db,collection:t},n)).writeConcern?s.writeConcern:{},a=t.s.topology.capabilities();if(i&&a&&!a.commandsTakeCollation)return e(new MongoError(\"server/primary/mongos does not support collation\"));o.execute(l,s,(t,r)=>{if(!r&&t)return e(t,null);r.n=r.insertedCount;const n=r.getInsertedIds();for(let e=0;e<n.length;e++)r.insertedIds[n[e].index]=n[e]._id;const o=r.getUpsertedIds();for(let e=0;e<o.length;e++)r.upsertedIds[o[e].index]=o[e]._id;e(null,r)})}}module.exports=BulkWriteOperation;","node_modules/mongodb/lib/operations/count_documents.js":"\"use strict\";const AggregateOperation=require(\"./aggregate\");class CountDocumentsOperation extends AggregateOperation{constructor(t,e,r){const u=[{$match:e}];\"number\"==typeof r.skip&&u.push({$skip:r.skip}),\"number\"==typeof r.limit&&u.push({$limit:r.limit}),u.push({$group:{_id:1,n:{$sum:1}}}),super(t,u,r)}execute(t,e){super.execute(t,(t,r)=>{if(t)return void e(t,null);const u=r.result;if(null==u.cursor||null==u.cursor.firstBatch)return void e(null,0);const s=u.cursor.firstBatch;e(null,s.length?s[0].n:0)})}}module.exports=CountDocumentsOperation;","node_modules/mongodb/lib/operations/delete_many.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,removeDocuments=require(\"./common_functions\").removeDocuments,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects;class DeleteManyOperation extends OperationBase{constructor(e,t,n){super(n),this.collection=e,this.filter=t}execute(e){const t=this.collection,n=this.filter,s=this.options;s.single=!1,removeDocuments(t,n,s,(t,n)=>{if(null!=e){if(t&&e)return e(t);if(null==n)return e(null,{result:{ok:1}});if(this.explain)return e(void 0,n.result);n.deletedCount=n.result.n,e(null,n)}})}}defineAspects(DeleteManyOperation,[Aspect.EXPLAINABLE]),module.exports=DeleteManyOperation;","node_modules/mongodb/lib/operations/delete_one.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,removeDocuments=require(\"./common_functions\").removeDocuments,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects;class DeleteOneOperation extends OperationBase{constructor(e,t,n){super(n),this.collection=e,this.filter=t}execute(e){const t=this.collection,n=this.filter,s=this.options;s.single=!0,removeDocuments(t,n,s,(t,n)=>{if(null!=e){if(t&&e)return e(t);if(null==n)return e(null,{result:{ok:1}});if(this.explain)return e(void 0,n.result);n.deletedCount=n.result.n,e(null,n)}})}}defineAspects(DeleteOneOperation,[Aspect.EXPLAINABLE]),module.exports=DeleteOneOperation;","node_modules/mongodb/lib/operations/distinct.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,CommandOperationV2=require(\"./command_v2\"),decorateWithCollation=require(\"../utils\").decorateWithCollation,decorateWithReadConcern=require(\"../utils\").decorateWithReadConcern,maxWireVersion=require(\"../core/utils\").maxWireVersion,MongoError=require(\"../error\").MongoError;class DistinctOperation extends CommandOperationV2{constructor(e,t,i,r){super(e,r),this.collection=e,this.key=t,this.query=i}execute(e,t){const i=this.collection,r=this.key,o=this.query,n=this.options,s={distinct:i.collectionName,key:r,query:o};\"number\"==typeof n.maxTimeMS&&(s.maxTimeMS=n.maxTimeMS),decorateWithReadConcern(s,i,n);try{decorateWithCollation(s,i,n)}catch(e){return t(e,null)}this.explain&&maxWireVersion(e)<4?t(new MongoError(\"server does not support explain on distinct\")):super.executeCommand(e,s,(e,i)=>{e?t(e):t(null,this.options.full||this.explain?i:i.values)})}}defineAspects(DistinctOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION,Aspect.EXPLAINABLE]),module.exports=DistinctOperation;","node_modules/mongodb/lib/operations/drop_index.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,CommandOperation=require(\"./command\"),applyWriteConcern=require(\"../utils\").applyWriteConcern,handleCallback=require(\"../utils\").handleCallback;class DropIndexOperation extends CommandOperation{constructor(e,n,t){super(e.s.db,t,e),this.collection=e,this.indexName=n}_buildCommand(){const e=this.collection,n=this.indexName,t=this.options;let o={dropIndexes:e.collectionName,index:n};return o=applyWriteConcern(o,{db:e.s.db,collection:e},t)}execute(e){super.execute((n,t)=>{if(\"function\"==typeof e)return n?handleCallback(e,n,null):void handleCallback(e,null,t)})}}defineAspects(DropIndexOperation,Aspect.WRITE_OPERATION),module.exports=DropIndexOperation;","node_modules/mongodb/lib/operations/drop_indexes.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,DropIndexOperation=require(\"./drop_index\"),handleCallback=require(\"../utils\").handleCallback;class DropIndexesOperation extends DropIndexOperation{constructor(e,r){super(e,\"*\",r)}execute(e){super.execute(r=>{if(r)return handleCallback(e,r,!1);handleCallback(e,null,!0)})}}defineAspects(DropIndexesOperation,Aspect.WRITE_OPERATION),module.exports=DropIndexesOperation;","node_modules/mongodb/lib/operations/estimated_document_count.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,CommandOperationV2=require(\"./command_v2\");class EstimatedDocumentCountOperation extends CommandOperationV2{constructor(e,t,i){void 0===i&&(i=t,t=void 0),super(e,i),this.collectionName=e.s.namespace.collection,t&&(this.query=t)}execute(e,t){const i=this.options,o={count:this.collectionName};this.query&&(o.query=this.query),\"number\"==typeof i.skip&&(o.skip=i.skip),\"number\"==typeof i.limit&&(o.limit=i.limit),i.hint&&(o.hint=i.hint),super.executeCommand(e,o,(e,i)=>{e?t(e):t(null,i.n)})}}defineAspects(EstimatedDocumentCountOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION]),module.exports=EstimatedDocumentCountOperation;","node_modules/mongodb/lib/operations/find.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,ReadPreference=require(\"../core\").ReadPreference,maxWireVersion=require(\"../core/utils\").maxWireVersion,MongoError=require(\"../core/error\").MongoError;class FindOperation extends OperationBase{constructor(e,r,s,i){super(i),this.ns=r,this.cmd=s,this.readPreference=ReadPreference.resolve(e,this.options)}execute(e,r){if(this.server=e,this.readPreference=ReadPreference.resolve(this,this.options),void 0!==this.cmd.allowDiskUse&&maxWireVersion(e)<4)return void r(new MongoError(\"The `allowDiskUse` option is not supported on MongoDB < 3.2\"));this.explain&&(this.options.explain=this.explain.verbosity);const s=this.cursorState||{};e.query(this.ns.toString(),this.cmd,s,this.options,r)}}defineAspects(FindOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION,Aspect.EXPLAINABLE]),module.exports=FindOperation;","node_modules/mongodb/lib/operations/find_one.js":"\"use strict\";const handleCallback=require(\"../utils\").handleCallback,OperationBase=require(\"./operation\").OperationBase,toError=require(\"../utils\").toError,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects;class FindOneOperation extends OperationBase{constructor(e,t,r){super(r),this.collection=e,this.query=t}execute(e){const t=this.collection,r=this.query,i=this.options;try{t.find(r,i).limit(-1).batchSize(1).next((t,r)=>{if(null!=t)return handleCallback(e,toError(t),null);handleCallback(e,null,r)})}catch(t){e(t)}}}defineAspects(FindOneOperation,[Aspect.EXPLAINABLE]),module.exports=FindOneOperation;","node_modules/mongodb/lib/operations/find_and_modify.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,applyRetryableWrites=require(\"../utils\").applyRetryableWrites,applyWriteConcern=require(\"../utils\").applyWriteConcern,decorateWithCollation=require(\"../utils\").decorateWithCollation,executeCommand=require(\"./db_ops\").executeCommand,formattedOrderClause=require(\"../utils\").formattedOrderClause,handleCallback=require(\"../utils\").handleCallback,ReadPreference=require(\"../core\").ReadPreference,maxWireVersion=require(\"../core/utils\").maxWireVersion,MongoError=require(\"../error\").MongoError,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,decorateWithExplain=require(\"../utils\").decorateWithExplain;class FindAndModifyOperation extends OperationBase{constructor(e,r,i,t,o){super(o),this.collection=e,this.query=r,this.sort=i,this.doc=t}execute(e){const r=this.collection,i=this.query,t=formattedOrderClause(this.sort),o=this.doc;let n=this.options,a={findAndModify:r.collectionName,query:i};t&&(a.sort=t),a.new=!!n.new,a.remove=!!n.remove,a.upsert=!!n.upsert;const s=n.projection||n.fields;s&&(a.fields=s),n.arrayFilters&&(a.arrayFilters=n.arrayFilters),o&&!n.remove&&(a.update=o),n.maxTimeMS&&(a.maxTimeMS=n.maxTimeMS),n.serializeFunctions=n.serializeFunctions||r.s.serializeFunctions,n.checkKeys=!1,n=applyRetryableWrites(n,r.s.db),(n=applyWriteConcern(n,{db:r.s.db,collection:r},n)).writeConcern&&(a.writeConcern=n.writeConcern),!0===n.bypassDocumentValidation&&(a.bypassDocumentValidation=n.bypassDocumentValidation),n.readPreference=ReadPreference.primary;try{decorateWithCollation(a,r,n)}catch(r){return e(r,null)}if(n.hint){if(n.writeConcern&&0===n.writeConcern.w||maxWireVersion(r.s.topology)<8)return void e(new MongoError(\"The current topology does not support a hint on findAndModify commands\"));a.hint=n.hint}if(this.explain){if(maxWireVersion(r.s.topology)<4)return void e(new MongoError(\"server does not support explain on findAndModify\"));a=decorateWithExplain(a,this.explain)}executeCommand(r.s.db,a,n,(r,i)=>r?handleCallback(e,r,null):handleCallback(e,null,i))}}defineAspects(FindAndModifyOperation,[Aspect.EXPLAINABLE]),module.exports=FindAndModifyOperation;","node_modules/mongodb/lib/operations/find_one_and_delete.js":"\"use strict\";const FindAndModifyOperation=require(\"./find_and_modify\");class FindOneAndDeleteOperation extends FindAndModifyOperation{constructor(e,n,t){const o=Object.assign({},t);if(o.fields=t.projection,o.remove=!0,null==n||\"object\"!=typeof n)throw new TypeError(\"Filter parameter must be an object\");super(e,n,o.sort,null,o)}}module.exports=FindOneAndDeleteOperation;","node_modules/mongodb/lib/operations/find_one_and_replace.js":"\"use strict\";const MongoError=require(\"../core\").MongoError,FindAndModifyOperation=require(\"./find_and_modify\"),hasAtomicOperators=require(\"../utils\").hasAtomicOperators;class FindOneAndReplaceOperation extends FindAndModifyOperation{constructor(e,r,n,t){if(\"returnDocument\"in t&&\"returnOriginal\"in t)throw new MongoError(\"findOneAndReplace option returnOriginal is deprecated in favor of returnDocument and cannot be combined\");const o=Object.assign({},t);if(o.fields=t.projection,o.update=!0,o.new=\"after\"===t.returnDocument||!1===t.returnOriginal,o.upsert=!0===t.upsert,null==r||\"object\"!=typeof r)throw new TypeError(\"Filter parameter must be an object\");if(null==n||\"object\"!=typeof n)throw new TypeError(\"Replacement parameter must be an object\");if(hasAtomicOperators(n))throw new TypeError(\"Replacement document must not contain atomic operators\");super(e,r,o.sort,n,o)}}module.exports=FindOneAndReplaceOperation;","node_modules/mongodb/lib/operations/find_one_and_update.js":"\"use strict\";const MongoError=require(\"../core\").MongoError,FindAndModifyOperation=require(\"./find_and_modify\"),hasAtomicOperators=require(\"../utils\").hasAtomicOperators;class FindOneAndUpdateOperation extends FindAndModifyOperation{constructor(r,e,t,n){if(\"returnDocument\"in n&&\"returnOriginal\"in n)throw new MongoError(\"findOneAndUpdate option returnOriginal is deprecated in favor of returnDocument and cannot be combined\");const o=Object.assign({},n);if(o.fields=n.projection,o.update=!0,o.new=\"after\"===n.returnDocument||!1===n.returnOriginal,o.upsert=!0===n.upsert,null==e||\"object\"!=typeof e)throw new TypeError(\"Filter parameter must be an object\");if(null==t||\"object\"!=typeof t)throw new TypeError(\"Update parameter must be an object\");if(!hasAtomicOperators(t))throw new TypeError(\"Update document requires atomic operators\");super(r,e,o.sort,t,o)}}module.exports=FindOneAndUpdateOperation;","node_modules/mongodb/lib/operations/geo_haystack_search.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,OperationBase=require(\"./operation\").OperationBase,decorateCommand=require(\"../utils\").decorateCommand,decorateWithReadConcern=require(\"../utils\").decorateWithReadConcern,executeCommand=require(\"./db_ops\").executeCommand,handleCallback=require(\"../utils\").handleCallback,ReadPreference=require(\"../core\").ReadPreference,toError=require(\"../utils\").toError;class GeoHaystackSearchOperation extends OperationBase{constructor(e,r,a,t){super(t),this.collection=e,this.x=r,this.y=a}execute(e){const r=this.collection,a=this.x,t=this.y;let o=this.options,c={geoSearch:r.collectionName,near:[a,t]};c=decorateCommand(c,o,[\"readPreference\",\"session\"]),(o=Object.assign({},o)).readPreference=ReadPreference.resolve(r,o),decorateWithReadConcern(c,r,o),executeCommand(r.s.db,c,o,(r,a)=>{if(r)return handleCallback(e,r);(a.err||a.errmsg)&&handleCallback(e,toError(a)),handleCallback(e,null,a)})}}defineAspects(GeoHaystackSearchOperation,Aspect.READ_OPERATION),module.exports=GeoHaystackSearchOperation;","node_modules/mongodb/lib/operations/indexes.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,indexInformation=require(\"./common_functions\").indexInformation;class IndexesOperation extends OperationBase{constructor(e,o){super(o),this.collection=e}execute(e){const o=this.collection;let n=this.options;n=Object.assign({},{full:!0},n),indexInformation(o.s.db,o.collectionName,n,e)}}module.exports=IndexesOperation;","node_modules/mongodb/lib/operations/index_exists.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,handleCallback=require(\"../utils\").handleCallback,indexInformationDb=require(\"./db_ops\").indexInformation;class IndexExistsOperation extends OperationBase{constructor(e,n,l){super(l),this.collection=e,this.indexes=n}execute(e){const n=this.collection,l=this.indexes,t=this.options;indexInformationDb(n.s.db,n.collectionName,t,(n,t)=>{if(null!=n)return handleCallback(e,n,null);if(!Array.isArray(l))return handleCallback(e,null,null!=t[l]);for(let n=0;n<l.length;n++)if(null==t[l[n]])return handleCallback(e,null,!1);return handleCallback(e,null,!0)})}}module.exports=IndexExistsOperation;","node_modules/mongodb/lib/operations/insert_many.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,BulkWriteOperation=require(\"./bulk_write\"),MongoError=require(\"../core\").MongoError,prepareDocs=require(\"./common_functions\").prepareDocs;class InsertManyOperation extends OperationBase{constructor(e,r,t){super(t),this.collection=e,this.docs=r}execute(e){const r=this.collection;let t=this.docs;const s=this.options;if(!Array.isArray(t))return e(MongoError.create({message:\"docs parameter must be an array of documents\",driver:!0}));s.serializeFunctions=s.serializeFunctions||r.s.serializeFunctions;const n=(t=prepareDocs(r,t,s)).map(e=>({insertOne:{document:e}}));new BulkWriteOperation(r,n,s).execute((r,s)=>{if(r)return e(r,null);e(null,mapInsertManyResults(t,s))})}}function mapInsertManyResults(e,r){const t={result:{ok:1,n:r.insertedCount},ops:e,insertedCount:r.insertedCount,insertedIds:r.insertedIds};return r.getLastOp()&&(t.result.opTime=r.getLastOp()),t}module.exports=InsertManyOperation;","node_modules/mongodb/lib/operations/insert_one.js":"\"use strict\";const MongoError=require(\"../core\").MongoError,OperationBase=require(\"./operation\").OperationBase,insertDocuments=require(\"./common_functions\").insertDocuments;class InsertOneOperation extends OperationBase{constructor(e,r,t){super(t),this.collection=e,this.doc=r}execute(e){const r=this.collection,t=this.doc,n=this.options;if(Array.isArray(t))return e(MongoError.create({message:\"doc parameter must be an object\",driver:!0}));insertDocuments(r,[t],n,(r,n)=>{if(null!=e){if(r&&e)return e(r);if(null==n)return e(null,{result:{ok:1}});n.insertedCount=n.result.n,n.insertedId=t._id,e&&e(null,n)}})}}module.exports=InsertOneOperation;","node_modules/mongodb/lib/operations/is_capped.js":"\"use strict\";const OptionsOperation=require(\"./options_operation\"),handleCallback=require(\"../utils\").handleCallback;class IsCappedOperation extends OptionsOperation{constructor(e,a){super(e,a)}execute(e){super.execute((a,t)=>{if(a)return handleCallback(e,a);handleCallback(e,null,!(!t||!t.capped))})}}module.exports=IsCappedOperation;","node_modules/mongodb/lib/operations/list_indexes.js":"\"use strict\";const CommandOperationV2=require(\"./command_v2\"),Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,maxWireVersion=require(\"../core/utils\").maxWireVersion,LIST_INDEXES_WIRE_VERSION=3;class ListIndexesOperation extends CommandOperationV2{constructor(e,s){super(e,s,{fullResponse:!0}),this.collectionNamespace=e.s.namespace}execute(e,s){if(maxWireVersion(e)<LIST_INDEXES_WIRE_VERSION){const t=this.collectionNamespace.withCollection(\"system.indexes\").toString(),i=this.collectionNamespace.toString();return void e.query(t,{query:{ns:i}},{},this.options,s)}const t=this.options.batchSize?{batchSize:this.options.batchSize}:{};super.executeCommand(e,{listIndexes:this.collectionNamespace.collection,cursor:t},s)}}defineAspects(ListIndexesOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION]),module.exports=ListIndexesOperation;","node_modules/mongodb/lib/operations/map_reduce.js":"\"use strict\";const applyWriteConcern=require(\"../utils\").applyWriteConcern,Code=require(\"../core\").BSON.Code,decorateWithCollation=require(\"../utils\").decorateWithCollation,decorateWithReadConcern=require(\"../utils\").decorateWithReadConcern,executeCommand=require(\"./db_ops\").executeCommand,handleCallback=require(\"../utils\").handleCallback,isObject=require(\"../utils\").isObject,loadDb=require(\"../dynamic_loaders\").loadDb,OperationBase=require(\"./operation\").OperationBase,ReadPreference=require(\"../core\").ReadPreference,toError=require(\"../utils\").toError,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,decorateWithExplain=require(\"../utils\").decorateWithExplain,maxWireVersion=require(\"../core/utils\").maxWireVersion,MongoError=require(\"../error\").MongoError,exclusionList=[\"explain\",\"readPreference\",\"session\",\"bypassDocumentValidation\",\"w\",\"wtimeout\",\"j\",\"writeConcern\"];class MapReduceOperation extends OperationBase{constructor(e,r,t,o){super(o),this.collection=e,this.map=r,this.reduce=t}execute(e){const r=this.collection,t=this.map,o=this.reduce;let i=this.options,n={mapReduce:r.collectionName,map:t,reduce:o};for(let e in i)\"scope\"===e?n[e]=processScope(i[e]):-1===exclusionList.indexOf(e)&&(n[e]=i[e]);(i=Object.assign({},i)).readPreference=ReadPreference.resolve(r,i),!1!==i.readPreference&&\"primary\"!==i.readPreference&&i.out&&1!==i.out.inline&&\"inline\"!==i.out?(i.readPreference=\"primary\",applyWriteConcern(n,{db:r.s.db,collection:r},i)):decorateWithReadConcern(n,r,i),!0===i.bypassDocumentValidation&&(n.bypassDocumentValidation=i.bypassDocumentValidation);try{decorateWithCollation(n,r,i)}catch(r){return e(r,null)}if(this.explain){if(maxWireVersion(r.s.topology)<9)return void e(new MongoError(\"server does not support explain on mapReduce\"));n=decorateWithExplain(n,this.explain)}executeCommand(r.s.db,n,i,(t,o)=>{if(t)return handleCallback(e,t);if(1!==o.ok||o.err||o.errmsg)return handleCallback(e,toError(o));if(this.explain)return e(void 0,o);const n={};if(o.timeMillis&&(n.processtime=o.timeMillis),o.counts&&(n.counts=o.counts),o.timing&&(n.timing=o.timing),o.results)return null!=i.verbose&&i.verbose?handleCallback(e,null,{results:o.results,stats:n}):handleCallback(e,null,o.results);let s=null;if(null!=o.result&&\"object\"==typeof o.result){const e=o.result;s=new(loadDb())(e.db,r.s.db.s.topology,r.s.db.s.options).collection(e.collection)}else s=r.s.db.collection(o.result);if(null==i.verbose||!i.verbose)return handleCallback(e,t,s);handleCallback(e,t,{collection:s,stats:n})})}}function processScope(e){if(!isObject(e)||\"ObjectID\"===e._bsontype)return e;const r=Object.keys(e);let t;const o={};for(let i=r.length-1;i>=0;i--)\"function\"==typeof e[t=r[i]]?o[t]=new Code(String(e[t])):o[t]=processScope(e[t]);return o}defineAspects(MapReduceOperation,[Aspect.EXPLAINABLE]),module.exports=MapReduceOperation;","node_modules/mongodb/lib/operations/options_operation.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,handleCallback=require(\"../utils\").handleCallback,MongoError=require(\"../core\").MongoError;class OptionsOperation extends OperationBase{constructor(e,o){super(o),this.collection=e}execute(e){const o=this.collection,n=this.options;o.s.db.listCollections({name:o.collectionName},n).toArray((n,t)=>n?handleCallback(e,n):0===t.length?handleCallback(e,MongoError.create({message:`collection ${o.namespace} not found`,driver:!0})):void handleCallback(e,n,t[0].options||null))}}module.exports=OptionsOperation;","node_modules/mongodb/lib/operations/re_index.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,CommandOperationV2=require(\"./command_v2\"),serverType=require(\"../core/sdam/common\").serverType,ServerType=require(\"../core/sdam/common\").ServerType,MongoError=require(\"../core\").MongoError;class ReIndexOperation extends CommandOperationV2{constructor(e,r){super(e,r),this.collectionName=e.collectionName}execute(e,r){serverType(e)===ServerType.Standalone?super.executeCommand(e,{reIndex:this.collectionName},(e,o)=>{e?r(e):r(null,!!o.ok)}):r(new MongoError(\"reIndex can only be executed on standalone servers.\"))}}defineAspects(ReIndexOperation,[Aspect.EXECUTE_WITH_SELECTION]),module.exports=ReIndexOperation;","node_modules/mongodb/lib/operations/replace_one.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,updateDocuments=require(\"./common_functions\").updateDocuments,hasAtomicOperators=require(\"../utils\").hasAtomicOperators;class ReplaceOneOperation extends OperationBase{constructor(e,t,r,s){if(super(s),hasAtomicOperators(r))throw new TypeError(\"Replacement document must not contain atomic operators\");this.collection=e,this.filter=t,this.replacement=r}execute(e){const t=this.collection,r=this.filter,s=this.replacement,u=this.options;u.multi=!1,updateDocuments(t,r,s,u,(t,r)=>replaceCallback(t,r,s,e))}}function replaceCallback(e,t,r,s){if(null!=s){if(e&&s)return s(e);if(null==t)return s(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,t.ops=[r],s&&s(null,t)}}module.exports=ReplaceOneOperation;","node_modules/mongodb/lib/operations/stats.js":"\"use strict\";const Aspect=require(\"./operation\").Aspect,CommandOperation=require(\"./command\"),defineAspects=require(\"./operation\").defineAspects;class StatsOperation extends CommandOperation{constructor(e,t){super(e.s.db,t,e)}_buildCommand(){const e=this.collection,t=this.options,s={collStats:e.collectionName};return null!=t.scale&&(s.scale=t.scale),s}}defineAspects(StatsOperation,Aspect.READ_OPERATION),module.exports=StatsOperation;","node_modules/mongodb/lib/operations/update_many.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,updateDocuments=require(\"./common_functions\").updateDocuments,hasAtomicOperators=require(\"../utils\").hasAtomicOperators,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects;class UpdateManyOperation extends OperationBase{constructor(e,t,r,s){if(super(s),!hasAtomicOperators(r))throw new TypeError(\"Update document requires atomic operators\");this.collection=e,this.filter=t,this.update=r}execute(e){const t=this.collection,r=this.filter,s=this.update,u=this.options;u.multi=!0,updateDocuments(t,r,s,u,(t,r)=>{if(null!=e){if(t)return e(t);if(null==r)return e(null,{result:{ok:1}});if(this.explain)return e(void 0,r.result);r.modifiedCount=null!=r.result.nModified?r.result.nModified:r.result.n,r.upsertedId=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?r.result.upserted[0]:null,r.upsertedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length?r.result.upserted.length:0,r.matchedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?0:r.result.n,e(null,r)}})}}defineAspects(UpdateManyOperation,[Aspect.EXPLAINABLE]),module.exports=UpdateManyOperation;","node_modules/mongodb/lib/operations/update_one.js":"\"use strict\";const OperationBase=require(\"./operation\").OperationBase,updateDocuments=require(\"./common_functions\").updateDocuments,hasAtomicOperators=require(\"../utils\").hasAtomicOperators,Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects;class UpdateOneOperation extends OperationBase{constructor(e,t,r,s){if(super(s),!hasAtomicOperators(r))throw new TypeError(\"Update document requires atomic operators\");this.collection=e,this.filter=t,this.update=r}execute(e){const t=this.collection,r=this.filter,s=this.update,u=this.options;u.multi=!1,updateDocuments(t,r,s,u,(t,r)=>{if(null!=e){if(t)return e(t);if(null==r)return e(null,{result:{ok:1}});if(this.explain)return e(void 0,r.result);r.modifiedCount=null!=r.result.nModified?r.result.nModified:r.result.n,r.upsertedId=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?r.result.upserted[0]:null,r.upsertedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length?r.result.upserted.length:0,r.matchedCount=Array.isArray(r.result.upserted)&&r.result.upserted.length>0?0:r.result.n,e(null,r)}})}}defineAspects(UpdateOneOperation,[Aspect.EXPLAINABLE]),module.exports=UpdateOneOperation;","node_modules/mongodb/lib/dynamic_loaders.js":"\"use strict\";let collection,cursor,db;function loadCollection(){return collection||(collection=require(\"./collection\")),collection}function loadCursor(){return cursor||(cursor=require(\"./cursor\")),cursor}function loadDb(){return db||(db=require(\"./db\")),db}module.exports={loadCollection:loadCollection,loadCursor:loadCursor,loadDb:loadDb};","node_modules/mongodb/lib/topologies/topology_base.js":"\"use strict\";const EventEmitter=require(\"events\"),MongoError=require(\"../core\").MongoError,f=require(\"util\").format,ReadPreference=require(\"../core\").ReadPreference,ClientSession=require(\"../core\").Sessions.ClientSession;var Store=function(e,o){var s=this;o=o||{force:!1,bufferMaxEntries:-1},this.s={storedOps:[],storeOptions:o,topology:e},Object.defineProperty(this,\"length\",{enumerable:!0,get:function(){return s.s.storedOps.length}})};Store.prototype.add=function(e,o,s,r,t){if(this.s.storeOptions.force)return t(MongoError.create({message:\"db closed by application\",driver:!0}));if(0===this.s.storeOptions.bufferMaxEntries)return t(MongoError.create({message:f(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(MongoError.create({message:f(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,n:o,o:s,op:r,c:t})},Store.prototype.addObjectAndMethod=function(e,o,s,r,t){if(this.s.storeOptions.force)return t(MongoError.create({message:\"db closed by application\",driver:!0}));if(0===this.s.storeOptions.bufferMaxEntries)return t(MongoError.create({message:f(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(MongoError.create({message:f(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,m:s,o:o,p:r,c:t})},Store.prototype.flush=function(e){for(;this.s.storedOps.length>0;)this.s.storedOps.shift().c(e||MongoError.create({message:f(\"no connection available for operation\"),driver:!0}))};var primaryOptions=[\"primary\",\"primaryPreferred\",\"nearest\",\"secondaryPreferred\"],secondaryOptions=[\"secondary\",\"secondaryPreferred\"];Store.prototype.execute=function(e){e=e||{};var o=this.s.storedOps;this.s.storedOps=[];for(var s=\"boolean\"!=typeof e.executePrimary||e.executePrimary,r=\"boolean\"!=typeof e.executeSecondary||e.executeSecondary;o.length>0;){var t=o.shift();\"cursor\"===t.t?s&&r?t.o[t.m].apply(t.o,t.p):s&&t.o.options&&t.o.options.readPreference&&-1!==primaryOptions.indexOf(t.o.options.readPreference.mode)?t.o[t.m].apply(t.o,t.p):!s&&r&&t.o.options&&t.o.options.readPreference&&-1!==secondaryOptions.indexOf(t.o.options.readPreference.mode)&&t.o[t.m].apply(t.o,t.p):\"auth\"===t.t?this.s.topology[t.t].apply(this.s.topology,t.o):s&&r?this.s.topology[t.t](t.n,t.o,t.op,t.c):s&&t.op&&t.op.readPreference&&-1!==primaryOptions.indexOf(t.op.readPreference.mode)?this.s.topology[t.t](t.n,t.o,t.op,t.c):!s&&r&&t.op&&t.op.readPreference&&-1!==secondaryOptions.indexOf(t.op.readPreference.mode)&&this.s.topology[t.t](t.n,t.o,t.op,t.c)}},Store.prototype.all=function(){return this.s.storedOps};var ServerCapabilities=function(e){var o=function(e,o,s){Object.defineProperty(e,o,{enumerable:!0,get:function(){return s}})},s=!1,r=!1,t=!1,i=!1,n=!1,a=!1,p=e.maxWriteBatchSize||1e3,c=!1,l=!1;e.minWireVersion>=0&&(t=!0),e.maxWireVersion>=1&&(s=!0,i=!0),e.maxWireVersion>=2&&(r=!0),e.maxWireVersion>=3&&(n=!0,a=!0),e.maxWireVersion>=5&&(c=!0,l=!0),null==e.minWireVersion&&(e.minWireVersion=0),null==e.maxWireVersion&&(e.maxWireVersion=0),o(this,\"hasAggregationCursor\",s),o(this,\"hasWriteCommands\",r),o(this,\"hasTextSearch\",t),o(this,\"hasAuthCommands\",i),o(this,\"hasListCollectionsCommand\",n),o(this,\"hasListIndexesCommand\",a),o(this,\"minWireVersion\",e.minWireVersion),o(this,\"maxWireVersion\",e.maxWireVersion),o(this,\"maxNumberOfDocsInBatch\",p),o(this,\"commandsTakeWriteConcern\",c),o(this,\"commandsTakeCollation\",l)};class TopologyBase extends EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}hasSessionSupport(){return null!=this.logicalSessionTimeoutMinutes}startSession(e,o){const s=new ClientSession(this,this.s.sessionPool,e,o);return s.once(\"ended\",()=>{this.s.sessions.delete(s)}),this.s.sessions.add(s),s}endSessions(e,o){return this.s.coreTopology.endSessions(e,o)}get clientMetadata(){return this.s.coreTopology.s.options.metadata}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.coreTopology.lastIsMaster()?null:(this.s.sCapabilities=new ServerCapabilities(this.s.coreTopology.lastIsMaster()),this.s.sCapabilities)}command(e,o,s,r){this.s.coreTopology.command(e.toString(),o,ReadPreference.translate(s),r)}insert(e,o,s,r){this.s.coreTopology.insert(e.toString(),o,s,r)}update(e,o,s,r){this.s.coreTopology.update(e.toString(),o,s,r)}remove(e,o,s,r){this.s.coreTopology.remove(e.toString(),o,s,r)}isConnected(e){return e=e||{},e=ReadPreference.translate(e),this.s.coreTopology.isConnected(e)}isDestroyed(){return this.s.coreTopology.isDestroyed()}cursor(e,o,s){return s=s||{},(s=ReadPreference.translate(s)).disconnectHandler=this.s.store,s.topology=this,this.s.coreTopology.cursor(e,o,s)}lastIsMaster(){return this.s.coreTopology.lastIsMaster()}selectServer(e,o,s){return this.s.coreTopology.selectServer(e,o,s)}unref(){return this.s.coreTopology.unref()}connections(){return this.s.coreTopology.connections()}close(e,o){this.s.sessions.forEach(e=>e.endSession()),this.s.sessionPool&&this.s.sessionPool.endAllPooledSessions(),!0===e&&(this.s.storeOptions.force=e,this.s.store.flush()),this.s.coreTopology.destroy({force:\"boolean\"==typeof e&&e},o)}}Object.defineProperty(TopologyBase.prototype,\"bson\",{enumerable:!0,get:function(){return this.s.coreTopology.s.bson}}),Object.defineProperty(TopologyBase.prototype,\"parserType\",{enumerable:!0,get:function(){return this.s.coreTopology.parserType}}),Object.defineProperty(TopologyBase.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.s.coreTopology.logicalSessionTimeoutMinutes}}),Object.defineProperty(TopologyBase.prototype,\"type\",{enumerable:!0,get:function(){return this.s.coreTopology.type}}),exports.Store=Store,exports.ServerCapabilities=ServerCapabilities,exports.TopologyBase=TopologyBase;","node_modules/mongodb/lib/url_parser.js":"\"use strict\";const ReadPreference=require(\"./core\").ReadPreference,parser=require(\"url\"),f=require(\"util\").format,Logger=require(\"./core\").Logger,dns=require(\"dns\"),ReadConcern=require(\"./read_concern\"),qs=require(\"querystring\"),MongoParseError=require(\"./core/error\").MongoParseError;function matchesParentDomain(e,r){let t=/^.*?\\./,n=`.${e.replace(t,\"\")}`,s=`.${r.replace(t,\"\")}`;return!!n.endsWith(s)}function parseHandler(e,r,t){let n,s;try{n=parseConnectionString(e,r)}catch(e){s=e}return s?t(s,null):t(null,n)}function parseConnectionString(e,r){let t=\"\",n=\"\",s=\"\",o=\"admin\",a=parser.parse(e,!0);if((null==a.hostname||\"\"===a.hostname)&&-1===e.indexOf(\".sock\"))throw new Error(\"No hostname or hostnames provided in connection string\");if(\"0\"===a.port)throw new Error(\"Invalid port (zero) with hostname\");if(!isNaN(parseInt(a.port,10))&&parseInt(a.port,10)>65535)throw new Error(\"Invalid port (larger than 65535) with hostname\");if(a.path&&a.path.length>0&&\"/\"!==a.path[0]&&-1===e.indexOf(\".sock\"))throw new Error(\"Missing delimiting slash between hosts and options\");if(a.query)for(let e in a.query){if(-1!==e.indexOf(\"::\"))throw new Error(\"Double colon in host identifier\");if(\"\"===a.query[e])throw new Error(\"Query parameter \"+e+\" is an incomplete value pair\")}if(a.auth){let r=a.auth.split(\":\");if(-1!==e.indexOf(a.auth)&&r.length>2)throw new Error(\"Username with password containing an unescaped colon\");if(-1!==e.indexOf(a.auth)&&-1!==a.auth.indexOf(\"@\"))throw new Error(\"Username containing an unescaped at-sign\")}let i=e.split(\"?\").shift().split(\",\"),c=[];for(let e=0;e<i.length;e++){let r=i[e];-1!==r.indexOf(\"mongodb\")?-1!==r.indexOf(\"@\")?c.push(r.split(\"@\").pop()):c.push(r.substr(\"mongodb://\".length)):-1!==r.indexOf(\"/\")?c.push(r.split(\"/\").shift()):-1===r.indexOf(\"/\")&&c.push(r.trim())}for(let e=0;e<c.length;e++){let r=parser.parse(f(\"mongodb://%s\",c[e].trim()));if((!r.path||-1===r.path.indexOf(\".sock\"))&&(r.path&&-1!==r.path.indexOf(\":\")))throw r.path.split(\"/\").length>1&&-1===r.path.indexOf(\"::\")?new Error(\"Slash in host identifier\"):new Error(\"Double colon in host identifier\")}if(-1!==e.indexOf(\"?\")?(s=e.substr(e.indexOf(\"?\")+1),t=e.substring(\"mongodb://\".length,e.indexOf(\"?\"))):t=e.substring(\"mongodb://\".length),-1!==t.indexOf(\"@\")&&(n=t.split(\"@\")[0],t=t.split(\"@\")[1]),t.split(\"/\").length>2)throw new Error(\"Unsupported host '\"+t.split(\"?\")[0]+\"', hosts must be URL encoded and contain at most one unencoded slash\");if(-1!==t.indexOf(\".sock\")){if(-1!==t.indexOf(\".sock/\")){if(-1!==(o=t.split(\".sock/\")[1]).indexOf(\"/\")){if(2===o.split(\"/\").length&&0===o.split(\"/\")[1].length)throw new Error(\"Illegal trailing backslash after database name\");throw new Error(\"More than 1 database name in URL\")}t=t.split(\"/\",t.indexOf(\".sock\")+\".sock\".length)}}else if(-1!==t.indexOf(\"/\")){if(t.split(\"/\").length>2){if(0===t.split(\"/\")[2].length)throw new Error(\"Illegal trailing backslash after database name\");throw new Error(\"More than 1 database name in URL\")}o=t.split(\"/\")[1],t=t.split(\"/\")[0]}t=decodeURIComponent(t);let l,p,d,h,u={},m=n||\"\",g=m.split(\":\",2),b=decodeURIComponent(g[0]);if(g[0]!==encodeURIComponent(b))throw new Error(\"Username contains an illegal unescaped character\");if(g[0]=b,g[1]){let e=decodeURIComponent(g[1]);if(g[1]!==encodeURIComponent(e))throw new Error(\"Password contains an illegal unescaped character\");g[1]=e}2===g.length&&(u.auth={user:g[0],password:g[1]}),r&&null!=r.auth&&(u.auth=r.auth);let w={socketOptions:{}},k={read_preference_tags:[]},O={socketOptions:{}},E={socketOptions:{}};if(u.server_options=w,u.db_options=k,u.rs_options=O,u.mongos_options=E,e.match(/\\.sock/)){let r=e.substring(e.indexOf(\"mongodb://\")+\"mongodb://\".length,e.lastIndexOf(\".sock\")+\".sock\".length);-1!==r.indexOf(\"@\")&&(r=r.split(\"@\")[1]),d=[{domain_socket:r=decodeURIComponent(r)}]}else{let e={};d=(l=t).split(\",\").map(function(r){let t,n,s;if(s=/\\[([^\\]]+)\\](?::(.+))?/.exec(r))t=s[1],n=parseInt(s[2],10)||27017;else{let e=r.split(\":\",2);t=e[0]||\"localhost\",n=null!=e[1]?parseInt(e[1],10):27017,-1!==t.indexOf(\"?\")&&(t=t.split(/\\?/)[0])}return e[t+\"_\"+n]?null:(e[t+\"_\"+n]=1,{host:t,port:n})}).filter(function(e){return null!=e})}if(u.dbName=o||\"admin\",(p=(s||\"\").split(/[&;]/)).forEach(function(e){if(e){var r=e.split(\"=\"),t=r[0],n=r[1];switch(t){case\"slaveOk\":case\"slave_ok\":w.slave_ok=\"true\"===n,k.slaveOk=\"true\"===n;break;case\"maxPoolSize\":case\"poolSize\":w.poolSize=parseInt(n,10),O.poolSize=parseInt(n,10);break;case\"appname\":u.appname=decodeURIComponent(n);break;case\"autoReconnect\":case\"auto_reconnect\":w.auto_reconnect=\"true\"===n;break;case\"ssl\":if(\"prefer\"===n){w.ssl=n,O.ssl=n,E.ssl=n;break}w.ssl=\"true\"===n,O.ssl=\"true\"===n,E.ssl=\"true\"===n;break;case\"sslValidate\":w.sslValidate=\"true\"===n,O.sslValidate=\"true\"===n,E.sslValidate=\"true\"===n;break;case\"replicaSet\":case\"rs_name\":O.rs_name=n;break;case\"reconnectWait\":O.reconnectWait=parseInt(n,10);break;case\"retries\":O.retries=parseInt(n,10);break;case\"readSecondary\":case\"read_secondary\":O.read_secondary=\"true\"===n;break;case\"fsync\":k.fsync=\"true\"===n;break;case\"journal\":k.j=\"true\"===n;break;case\"safe\":k.safe=\"true\"===n;break;case\"nativeParser\":case\"native_parser\":k.native_parser=\"true\"===n;break;case\"readConcernLevel\":k.readConcern=new ReadConcern(n);break;case\"connectTimeoutMS\":w.socketOptions.connectTimeoutMS=parseInt(n,10),O.socketOptions.connectTimeoutMS=parseInt(n,10),E.socketOptions.connectTimeoutMS=parseInt(n,10);break;case\"socketTimeoutMS\":w.socketOptions.socketTimeoutMS=parseInt(n,10),O.socketOptions.socketTimeoutMS=parseInt(n,10),E.socketOptions.socketTimeoutMS=parseInt(n,10);break;case\"w\":k.w=parseInt(n,10),isNaN(k.w)&&(k.w=n);break;case\"authSource\":k.authSource=n;break;case\"gssapiServiceName\":k.gssapiServiceName=n;break;case\"authMechanism\":if(\"GSSAPI\"===n)if(null==u.auth){let e=decodeURIComponent(m);if(-1===e.indexOf(\"@\"))throw new Error(\"GSSAPI requires a provided principal\");u.auth={user:e,password:null}}else u.auth.user=decodeURIComponent(u.auth.user);else\"MONGODB-X509\"===n&&(u.auth={user:decodeURIComponent(m)});if(\"GSSAPI\"!==n&&\"MONGODB-X509\"!==n&&\"MONGODB-CR\"!==n&&\"DEFAULT\"!==n&&\"SCRAM-SHA-1\"!==n&&\"SCRAM-SHA-256\"!==n&&\"PLAIN\"!==n)throw new Error(\"Only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, or SCRAM-SHA-1 is supported by authMechanism\");k.authMechanism=n;break;case\"authMechanismProperties\":{let e={};n.split(\",\").forEach(function(r){let t=r.split(\":\");e[t[0]]=t[1]}),k.authMechanismProperties=e,\"string\"==typeof e.SERVICE_NAME&&(k.gssapiServiceName=e.SERVICE_NAME),\"string\"==typeof e.SERVICE_REALM&&(k.gssapiServiceRealm=e.SERVICE_REALM),\"string\"==typeof e.CANONICALIZE_HOST_NAME&&(k.gssapiCanonicalizeHostName=\"true\"===e.CANONICALIZE_HOST_NAME)}break;case\"wtimeoutMS\":k.wtimeout=parseInt(n,10);break;case\"readPreference\":if(!ReadPreference.isValid(n))throw new Error(\"readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest\");k.readPreference=n;break;case\"maxStalenessSeconds\":k.maxStalenessSeconds=parseInt(n,10);break;case\"readPreferenceTags\":{let e={};if(null==(n=decodeURIComponent(n))||\"\"===n){k.read_preference_tags.push(e);break}let r=n.split(/,/);for(let t=0;t<r.length;t++){let n=r[t].trim().split(/:/);e[n[0]]=n[1]}k.read_preference_tags.push(e)}break;case\"compressors\":{h=w.compression||{};let e=n.split(\",\");if(!e.every(function(e){return\"snappy\"===e||\"zlib\"===e}))throw new Error(\"Compressors must be at least one of snappy or zlib\");h.compressors=e,w.compression=h}break;case\"zlibCompressionLevel\":{h=w.compression||{};let e=parseInt(n,10);if(e<-1||e>9)throw new Error(\"zlibCompressionLevel must be an integer between -1 and 9\");h.zlibCompressionLevel=e,w.compression=h}break;case\"retryWrites\":k.retryWrites=\"true\"===n;break;case\"minSize\":k.minSize=parseInt(n,10);break;default:Logger(\"URL Parser\").warn(`${t} is not supported as a connection string option`)}}}),0===k.read_preference_tags.length&&(k.read_preference_tags=null),!(-1!==k.w&&0!==k.w||!0!==k.journal&&!0!==k.fsync&&!0!==k.safe))throw new Error(\"w set to -1 or 0 cannot be combined with safe/w/journal/fsync\");return k.readPreference||(k.readPreference=\"primary\"),k=Object.assign(k,r),u.servers=d,u}module.exports=function(e,r,t){let n;\"function\"==typeof r&&(t=r,r={}),r=r||{};try{n=parser.parse(e,!0)}catch(e){return t(new Error(\"URL malformed, cannot be parsed\"))}if(\"mongodb:\"!==n.protocol&&\"mongodb+srv:\"!==n.protocol)return t(new Error(\"Invalid schema, expected `mongodb` or `mongodb+srv`\"));if(\"mongodb:\"===n.protocol)return parseHandler(e,r,t);if(n.hostname.split(\".\").length<3)return t(new Error(\"URI does not have hostname, domain name and tld\"));if(n.domainLength=n.hostname.split(\".\").length,n.pathname&&n.pathname.match(\",\"))return t(new Error(\"Invalid URI, cannot contain multiple hostnames\"));if(n.port)return t(new Error(\"Ports not accepted with `mongodb+srv` URIs\"));let s=`_mongodb._tcp.${n.host}`;dns.resolveSrv(s,function(e,s){if(e)return t(e);if(0===s.length)return t(new Error(\"No addresses found at host\"));for(let e=0;e<s.length;e++)if(!matchesParentDomain(s[e].name,n.hostname,n.domainLength))return t(new Error(\"Server record does not share hostname with parent URI\"));let o=n.auth?`mongodb://${n.auth}@`:\"mongodb://\",a=s.map(function(e,r){return 0===r?`${o}${e.name}:${e.port}`:`${e.name}:${e.port}`}).join(\",\")+\"/\",i=[];if(n.path){let e=n.path.slice(1);-1!==e.indexOf(\"?\")&&(e=e.slice(0,e.indexOf(\"?\"))),a+=e}(r.ssl||n.search)&&(r.ssl||!n.search||n.search.match(\"ssl\"))||i.push(\"ssl=true\"),n.search&&i.push(n.search.replace(\"?\",\"\")),dns.resolveTxt(n.host,function(e,n){if(e&&\"ENODATA\"!==e.code&&\"ENOTFOUND\"!==e.code)return t(e);if(e&&\"ENODATA\"===e.code&&(n=null),n){if(n.length>1)return t(new MongoParseError(\"Multiple text records not allowed\"));n=n[0].join(\"\");const e=qs.parse(n),r=Object.keys(e);if(r.some(e=>\"authSource\"!==e&&\"replicaSet\"!==e))return t(new MongoParseError(\"Text record must only set `authSource` or `replicaSet`\"));r.length>0&&i.push(n)}i.length&&(a+=`?${i.join(\"&\")}`),parseHandler(a,r,t)})})};","node_modules/mongodb/lib/operations/validate_collection.js":"\"use strict\";const CommandOperation=require(\"./command\");class ValidateCollectionOperation extends CommandOperation{constructor(l,e,r){let t={validate:e};const o=Object.keys(r);for(let l=0;l<o.length;l++)Object.prototype.hasOwnProperty.call(r,o[l])&&\"session\"!==o[l]&&(t[o[l]]=r[o[l]]);super(l.s.db,r,null,t),this.collectionName=e}execute(l){const e=this.collectionName;super.execute((r,t)=>null!=r?l(r,null):0===t.ok?l(new Error(\"Error with validate command\"),null):null!=t.result&&t.result.constructor!==String?l(new Error(\"Error with validation data\"),null):null!=t.result&&null!=t.result.match(/exception|corrupt/)?l(new Error(\"Error: invalid collection \"+e),null):null==t.valid||t.valid?l(null,t):l(new Error(\"Error: invalid collection \"+e),null))}}module.exports=ValidateCollectionOperation;","node_modules/mongodb/lib/operations/list_databases.js":"\"use strict\";const CommandOperationV2=require(\"./command_v2\"),Aspect=require(\"./operation\").Aspect,defineAspects=require(\"./operation\").defineAspects,MongoDBNamespace=require(\"../utils\").MongoDBNamespace;class ListDatabasesOperation extends CommandOperationV2{constructor(e,s){super(e,s),this.ns=new MongoDBNamespace(\"admin\",\"$cmd\")}execute(e,s){const t={listDatabases:1};this.options.nameOnly&&(t.nameOnly=Number(t.nameOnly)),this.options.filter&&(t.filter=this.options.filter),\"boolean\"==typeof this.options.authorizedDatabases&&(t.authorizedDatabases=this.options.authorizedDatabases),super.executeCommand(e,t,s)}}defineAspects(ListDatabasesOperation,[Aspect.READ_OPERATION,Aspect.RETRYABLE,Aspect.EXECUTE_WITH_SELECTION]),module.exports=ListDatabasesOperation;","node_modules/mongodb/lib/gridfs-stream/download.js":"\"use strict\";var stream=require(\"stream\"),util=require(\"util\");function GridFSBucketReadStream(e,t,r,n,i){this.s={bytesRead:0,chunks:e,cursor:null,expected:0,files:t,filter:n,init:!1,expectedEnd:0,file:null,options:i,readPreference:r},stream.Readable.call(this)}function throwIfInitialized(e){if(e.s.init)throw new Error(\"You cannot change options after the stream has enteredflowing mode!\")}function doRead(e){e.destroyed||e.s.cursor.next(function(t,r){if(e.destroyed)return;if(t)return __handleError(e,t);if(!r)return e.push(null),void process.nextTick(()=>{e.s.cursor.close(function(t){t?__handleError(e,t):e.emit(\"close\")})});var n=e.s.file.length-e.s.bytesRead,i=e.s.expected++,s=Math.min(e.s.file.chunkSize,n);if(r.n>i){var o=\"ChunkIsMissing: Got unexpected n: \"+r.n+\", expected: \"+i;return __handleError(e,new Error(o))}if(r.n<i)return o=\"ExtraChunk: Got unexpected n: \"+r.n+\", expected: \"+i,__handleError(e,new Error(o));var a=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(a.length!==s)return n<=0?(o=\"ExtraChunk: Got unexpected n: \"+r.n,__handleError(e,new Error(o))):(o=\"ChunkIsWrongSize: Got unexpected length: \"+a.length+\", expected: \"+s,__handleError(e,new Error(o)));if(e.s.bytesRead+=a.length,0===a.length)return e.push(null);var l=null,d=null;null!=e.s.bytesToSkip&&(l=e.s.bytesToSkip,e.s.bytesToSkip=0);const u=i===e.s.expectedEnd-1,h=e.s.options.end-e.s.bytesToSkip;u&&null!=e.s.bytesToTrim?d=e.s.file.chunkSize-e.s.bytesToTrim:e.s.options.end&&h<r.data.length()&&(d=h),null==l&&null==d||(a=a.slice(l||0,d||a.length)),e.push(a)})}function init(e){var t={};e.s.readPreference&&(t.readPreference=e.s.readPreference),e.s.options&&e.s.options.sort&&(t.sort=e.s.options.sort),e.s.options&&e.s.options.skip&&(t.skip=e.s.options.skip),e.s.files.findOne(e.s.filter,t,function(t,r){if(t)return __handleError(e,t);if(!r){var n=e.s.filter._id?e.s.filter._id.toString():e.s.filter.filename,i=new Error(\"FileNotFound: file \"+n+\" was not found\");return i.code=\"ENOENT\",__handleError(e,i)}if(r.length<=0)e.push(null);else if(e.destroyed)e.emit(\"close\");else{try{e.s.bytesToSkip=handleStartOption(e,r,e.s.options)}catch(t){return __handleError(e,t)}var s={files_id:r._id};if(e.s.options&&null!=e.s.options.start){var o=Math.floor(e.s.options.start/r.chunkSize);o>0&&(s.n={$gte:o})}e.s.cursor=e.s.chunks.find(s).sort({n:1}),e.s.readPreference&&e.s.cursor.setReadPreference(e.s.readPreference),e.s.expectedEnd=Math.ceil(r.length/r.chunkSize),e.s.file=r;try{e.s.bytesToTrim=handleEndOption(e,r,e.s.cursor,e.s.options)}catch(t){return __handleError(e,t)}e.emit(\"file\",r)}})}function waitForFile(e,t){if(e.s.file)return t();e.s.init||(init(e),e.s.init=!0),e.once(\"file\",function(){t()})}function handleStartOption(e,t,r){if(r&&null!=r.start){if(r.start>t.length)throw new Error(\"Stream start (\"+r.start+\") must not be more than the length of the file (\"+t.length+\")\");if(r.start<0)throw new Error(\"Stream start (\"+r.start+\") must not be negative\");if(null!=r.end&&r.end<r.start)throw new Error(\"Stream start (\"+r.start+\") must not be greater than stream end (\"+r.end+\")\");return e.s.bytesRead=Math.floor(r.start/t.chunkSize)*t.chunkSize,e.s.expected=Math.floor(r.start/t.chunkSize),r.start-e.s.bytesRead}}function handleEndOption(e,t,r,n){if(n&&null!=n.end){if(n.end>t.length)throw new Error(\"Stream end (\"+n.end+\") must not be more than the length of the file (\"+t.length+\")\");if(n.start<0)throw new Error(\"Stream end (\"+n.end+\") must not be negative\");var i=null!=n.start?Math.floor(n.start/t.chunkSize):0;return r.limit(Math.ceil(n.end/t.chunkSize)-i),e.s.expectedEnd=Math.ceil(n.end/t.chunkSize),Math.ceil(n.end/t.chunkSize)*t.chunkSize-n.end}}function __handleError(e,t){e.emit(\"error\",t)}module.exports=GridFSBucketReadStream,util.inherits(GridFSBucketReadStream,stream.Readable),GridFSBucketReadStream.prototype._read=function(){var e=this;this.destroyed||waitForFile(e,function(){doRead(e)})},GridFSBucketReadStream.prototype.start=function(e){return throwIfInitialized(this),this.s.options.start=e,this},GridFSBucketReadStream.prototype.end=function(e){return throwIfInitialized(this),this.s.options.end=e,this},GridFSBucketReadStream.prototype.abort=function(e){var t=this;this.push(null),this.destroyed=!0,this.s.cursor?this.s.cursor.close(function(r){t.emit(\"close\"),e&&e(r)}):(this.s.init||t.emit(\"close\"),e&&e())};","node_modules/mongodb/lib/gridfs-stream/upload.js":"\"use strict\";var core=require(\"../core\"),crypto=require(\"crypto\"),stream=require(\"stream\"),util=require(\"util\"),Buffer=require(\"safe-buffer\").Buffer,ERROR_NAMESPACE_NOT_FOUND=26;function GridFSBucketWriteStream(e,t,n){if(n=n||{},stream.Writable.call(this,n),this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=t,this.files=e.s._filesCollection,this.options=n,this.done=!1,this.id=n.id?n.id:core.BSON.ObjectId(),this.chunkSizeBytes=this.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.md5=!n.disableMD5&&crypto.createHash(\"md5\"),this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1,promiseLibrary:this.bucket.s.promiseLibrary},!this.bucket.s.calledOpenUploadStream){this.bucket.s.calledOpenUploadStream=!0;var r=this;checkIndexes(this,function(){r.bucket.s.checkedIndexes=!0,r.bucket.emit(\"index\")})}}function __handleError(e,t,n){if(!e.state.errored){if(e.state.errored=!0,n)return n(t);e.emit(\"error\",t)}}function createChunkDoc(e,t,n){return{_id:core.BSON.ObjectId(),files_id:e,n:t,data:n}}function checkChunksIndex(e,t){e.chunks.listIndexes().toArray(function(n,r){if(n){if(n.code===ERROR_NAMESPACE_NOT_FOUND){var i={files_id:1,n:1};return void e.chunks.createIndex(i,{background:!1,unique:!0},function(e){if(e)return t(e);t()})}return t(n)}var o=!1;if(r.forEach(function(e){e.key&&(2===Object.keys(e.key).length&&1===e.key.files_id&&1===e.key.n&&(o=!0))}),o)t();else{i={files_id:1,n:1};var s=getWriteOptions(e);s.background=!1,s.unique=!0,e.chunks.createIndex(i,s,function(e){if(e)return t(e);t()})}})}function checkDone(e,t){if(e.done)return!0;if(e.state.streamEnd&&0===e.state.outstandingRequests&&!e.state.errored){e.done=!0;var n=createFilesDoc(e.id,e.length,e.chunkSizeBytes,e.md5&&e.md5.digest(\"hex\"),e.filename,e.options.contentType,e.options.aliases,e.options.metadata);return!checkAborted(e,t)&&(e.files.insertOne(n,getWriteOptions(e),function(r){if(r)return __handleError(e,r,t);e.emit(\"finish\",n),e.emit(\"close\")}),!0)}return!1}function checkIndexes(e,t){e.files.findOne({},{_id:1},function(n,r){return n?t(n):r?t():void e.files.listIndexes().toArray(function(n,r){if(n){if(n.code===ERROR_NAMESPACE_NOT_FOUND){var i={filename:1,uploadDate:1};return void e.files.createIndex(i,{background:!1},function(n){if(n)return t(n);checkChunksIndex(e,t)})}return t(n)}var o=!1;if(r.forEach(function(e){2===Object.keys(e.key).length&&1===e.key.filename&&1===e.key.uploadDate&&(o=!0)}),o)checkChunksIndex(e,t);else{i={filename:1,uploadDate:1};var s=getWriteOptions(e);s.background=!1,e.files.createIndex(i,s,function(n){if(n)return t(n);checkChunksIndex(e,t)})}})})}function createFilesDoc(e,t,n,r,i,o,s,c){var u={_id:e,length:t,chunkSize:n,uploadDate:new Date,filename:i};return r&&(u.md5=r),o&&(u.contentType=o),s&&(u.aliases=s),c&&(u.metadata=c),u}function doWrite(e,t,n,r){if(checkAborted(e,r))return!1;var i=Buffer.isBuffer(t)?t:Buffer.from(t,n);if(e.length+=i.length,e.pos+i.length<e.chunkSizeBytes)return i.copy(e.bufToStore,e.pos),e.pos+=i.length,r&&r(),!0;for(var o=i.length,s=e.chunkSizeBytes-e.pos,c=Math.min(s,i.length),u=0;o>0;){var a=i.length-o;if(i.copy(e.bufToStore,e.pos,a,a+c),e.pos+=c,0===(s-=c)){e.md5&&e.md5.update(e.bufToStore);var f=createChunkDoc(e.id,e.n,Buffer.from(e.bufToStore));if(++e.state.outstandingRequests,++u,checkAborted(e,r))return!1;e.chunks.insertOne(f,getWriteOptions(e),function(t){if(t)return __handleError(e,t);--e.state.outstandingRequests,--u||(e.emit(\"drain\",f),r&&r(),checkDone(e))}),s=e.chunkSizeBytes,e.pos=0,++e.n}o-=c,c=Math.min(s,o)}return!1}function getWriteOptions(e){var t={};return e.options.writeConcern&&(t.w=e.options.writeConcern.w,t.wtimeout=e.options.writeConcern.wtimeout,t.j=e.options.writeConcern.j),t}function waitForIndexes(e,t){return e.bucket.s.checkedIndexes?t(!1):(e.bucket.once(\"index\",function(){t(!0)}),!0)}function writeRemnant(e,t){if(0===e.pos)return checkDone(e,t);++e.state.outstandingRequests;var n=Buffer.alloc(e.pos);e.bufToStore.copy(n,0,0,e.pos),e.md5&&e.md5.update(n);var r=createChunkDoc(e.id,e.n,n);if(checkAborted(e,t))return!1;e.chunks.insertOne(r,getWriteOptions(e),function(t){if(t)return __handleError(e,t);--e.state.outstandingRequests,checkDone(e)})}function checkAborted(e,t){return!!e.state.aborted&&(\"function\"==typeof t&&t(new Error(\"this stream has been aborted\")),!0)}module.exports=GridFSBucketWriteStream,util.inherits(GridFSBucketWriteStream,stream.Writable),GridFSBucketWriteStream.prototype.write=function(e,t,n){var r=this;return waitForIndexes(this,function(){return doWrite(r,e,t,n)})},GridFSBucketWriteStream.prototype.abort=function(e){if(this.state.streamEnd){var t=new Error(\"Cannot abort a stream that has already completed\");return\"function\"==typeof e?e(t):this.state.promiseLibrary.reject(t)}if(this.state.aborted)return t=new Error(\"Cannot call abort() on a stream twice\"),\"function\"==typeof e?e(t):this.state.promiseLibrary.reject(t);this.state.aborted=!0,this.chunks.deleteMany({files_id:this.id},function(t){\"function\"==typeof e&&e(t)})},GridFSBucketWriteStream.prototype.end=function(e,t,n){var r=this;\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),checkAborted(this,n)||(this.state.streamEnd=!0,n&&this.once(\"finish\",function(e){n(null,e)}),e?this.write(e,t,function(){writeRemnant(r)}):waitForIndexes(this,function(){writeRemnant(r)}))};","node_modules/mongoose/lib/collection.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,STATES=require(\"./connectionstate\"),immediate=require(\"./helpers/immediate\");function Collection(e,o,t){void 0===t&&(t={}),void 0===t.capped&&(t.capped={}),\"number\"==typeof t.capped&&(t.capped={size:t.capped}),this.opts=t,this.name=e,this.collectionName=e,this.conn=o,this.queue=[],this.buffer=!0,this.emitter=new EventEmitter,STATES.connected===this.conn.readyState&&this.onOpen()}Collection.prototype.name,Collection.prototype.collectionName,Collection.prototype.conn,Collection.prototype.onOpen=function(){this.buffer=!1,immediate(()=>this.doQueue())},Collection.prototype.onClose=function(e){this._shouldBufferCommands()&&!e&&(this.buffer=!0)},Collection.prototype.addQueue=function(e,o){return this.queue.push([e,o]),this},Collection.prototype.removeQueue=function(e,o){const t=this.queue.findIndex(t=>t[0]===e&&t[1]===o);return-1!==t&&(this.queue.splice(t,1),!0)},Collection.prototype.doQueue=function(){for(const e of this.queue)\"function\"==typeof e[0]?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];const e=this;return process.nextTick(function(){e.emitter.emit(\"queue\")}),this},Collection.prototype.ensureIndex=function(){throw new Error(\"Collection#ensureIndex unimplemented by driver\")},Collection.prototype.createIndex=function(){throw new Error(\"Collection#createIndex unimplemented by driver\")},Collection.prototype.findAndModify=function(){throw new Error(\"Collection#findAndModify unimplemented by driver\")},Collection.prototype.findOneAndUpdate=function(){throw new Error(\"Collection#findOneAndUpdate unimplemented by driver\")},Collection.prototype.findOneAndDelete=function(){throw new Error(\"Collection#findOneAndDelete unimplemented by driver\")},Collection.prototype.findOneAndReplace=function(){throw new Error(\"Collection#findOneAndReplace unimplemented by driver\")},Collection.prototype.findOne=function(){throw new Error(\"Collection#findOne unimplemented by driver\")},Collection.prototype.find=function(){throw new Error(\"Collection#find unimplemented by driver\")},Collection.prototype.insert=function(){throw new Error(\"Collection#insert unimplemented by driver\")},Collection.prototype.insertOne=function(){throw new Error(\"Collection#insertOne unimplemented by driver\")},Collection.prototype.insertMany=function(){throw new Error(\"Collection#insertMany unimplemented by driver\")},Collection.prototype.save=function(){throw new Error(\"Collection#save unimplemented by driver\")},Collection.prototype.update=function(){throw new Error(\"Collection#update unimplemented by driver\")},Collection.prototype.getIndexes=function(){throw new Error(\"Collection#getIndexes unimplemented by driver\")},Collection.prototype.mapReduce=function(){throw new Error(\"Collection#mapReduce unimplemented by driver\")},Collection.prototype.watch=function(){throw new Error(\"Collection#watch unimplemented by driver\")},Collection.prototype._shouldBufferCommands=function(){const e=this.opts;return null!=e.bufferCommands?e.bufferCommands:e&&null!=e.schemaUserProvidedOptions&&null!=e.schemaUserProvidedOptions.bufferCommands?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()},Collection.prototype._getBufferTimeoutMS=function(){const e=this.conn,o=this.opts;return null!=o.bufferTimeoutMS?o.bufferTimeoutMS:o&&null!=o.schemaUserProvidedOptions&&null!=o.schemaUserProvidedOptions.bufferTimeoutMS?o.schemaUserProvidedOptions.bufferTimeoutMS:null!=e.config.bufferTimeoutMS?e.config.bufferTimeoutMS:null!=e.base&&null!=e.base.get(\"bufferTimeoutMS\")?e.base.get(\"bufferTimeoutMS\"):1e4},module.exports=Collection;","node_modules/mongoose/lib/error/mongooseError.js":"\"use strict\";class MongooseError extends Error{}Object.defineProperty(MongooseError.prototype,\"name\",{value:\"MongooseError\"}),module.exports=MongooseError;","node_modules/sliced/index.js":"module.exports=function(r,t,e){var n=[],o=r.length;if(0===o)return n;var a=t<0?Math.max(0,t+o):t||0;for(void 0!==e&&(o=e<0?e+o:e);o-- >a;)n[o-a]=r[o];return n};","node_modules/mongoose/lib/helpers/immediate.js":"\"use strict\";module.exports=function(e){return process.nextTick(e)};","node_modules/mongoose/lib/internal.js":"\"use strict\";const StateMachine=require(\"./statemachine\"),ActiveRoster=StateMachine.ctor(\"require\",\"modify\",\"init\",\"default\",\"ignore\");function InternalCache(){this.strictMode=void 0,this.selected=void 0,this.shardval=void 0,this.saveError=void 0,this.validationError=void 0,this.adhocPaths=void 0,this.removing=void 0,this.inserting=void 0,this.saving=void 0,this.version=void 0,this.getters={},this._id=void 0,this.populate=void 0,this.populated=void 0,this.wasPopulated=!1,this.scope=void 0,this.activePaths=new ActiveRoster,this.pathsToScopes={},this.cachedRequired={},this.session=null,this.$setCalled=new Set,this.ownerDocument=void 0,this.fullPath=void 0}module.exports=exports=InternalCache;","node_modules/mongoose/lib/schema/mixed.js":"\"use strict\";const SchemaType=require(\"../schematype\"),symbols=require(\"./symbols\"),isObject=require(\"../helpers/isObject\"),utils=require(\"../utils\");function Mixed(e,t){if(t&&t.default){const e=t.default;Array.isArray(e)&&0===e.length?t.default=Array:!t.shared&&isObject(e)&&0===Object.keys(e).length&&(t.default=function(){return{}})}SchemaType.call(this,e,t,\"Mixed\"),this[symbols.schemaMixedSymbol]=!0}Mixed.schemaName=\"Mixed\",Mixed.defaultOptions={},Mixed.prototype=Object.create(SchemaType.prototype),Mixed.prototype.constructor=Mixed,Mixed.get=SchemaType.get,Mixed.set=SchemaType.set,Mixed.prototype.cast=function(e){return e instanceof Error?utils.errorToPOJO(e):e},Mixed.prototype.castForQuery=function(e,t){return 2===arguments.length?t:e},module.exports=Mixed;","node_modules/mongoose/lib/error/objectExpected.js":"\"use strict\";const MongooseError=require(\"./\");class ObjectExpectedError extends MongooseError{constructor(e,r){super(\"Tried to set nested object field `\"+e+`\\` to ${Array.isArray(r)?\"array\":\"primitive value\"} \\``+r+\"` and strict mode is set to throw.\"),this.path=e}}Object.defineProperty(ObjectExpectedError.prototype,\"name\",{value:\"ObjectExpectedError\"}),module.exports=ObjectExpectedError;","node_modules/mongoose/lib/error/objectParameter.js":"\"use strict\";const MongooseError=require(\"./\");class ObjectParameterError extends MongooseError{constructor(r,e,t){super('Parameter \"'+e+'\" to '+t+\"() must be an object, got \"+r.toString())}}Object.defineProperty(ObjectParameterError.prototype,\"name\",{value:\"ObjectParameterError\"}),module.exports=ObjectParameterError;","node_modules/mongoose/lib/error/parallelValidate.js":"\"use strict\";const MongooseError=require(\"./mongooseError\");class ParallelValidateError extends MongooseError{constructor(r){super(\"Can't validate() the same doc multiple times in parallel. Document: \"+r._id)}}Object.defineProperty(ParallelValidateError.prototype,\"name\",{value:\"ParallelValidateError\"}),module.exports=ParallelValidateError;","node_modules/mongoose/lib/error/strict.js":"\"use strict\";const MongooseError=require(\"./\");class StrictModeError extends MongooseError{constructor(r,o,t){super(o=o||\"Field `\"+r+\"` is not in schema and strict mode is set to throw.\"),this.isImmutableError=!!t,this.path=r}}Object.defineProperty(StrictModeError.prototype,\"name\",{value:\"StrictModeError\"}),module.exports=StrictModeError;","node_modules/mongoose/lib/error/validation.js":"\"use strict\";const MongooseError=require(\"./mongooseError\"),util=require(\"util\");class ValidationError extends MongooseError{constructor(e){let r;super(r=e&&\"model\"===e.constructor.name?e.constructor.modelName+\" validation failed\":\"Validation failed\"),this.errors={},this._message=r,e&&(e.errors=this.errors)}toString(){return this.name+\": \"+_generateMessage(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){this.errors[e]=r,this.message=this._message+\": \"+_generateMessage(this)}}function _generateMessage(e){const r=Object.keys(e.errors||{}),t=r.length,o=[];let s;for(let i=0;i<t;++i)s=r[i],e!==e.errors[s]&&o.push(s+\": \"+e.errors[s].message);return o.join(\", \")}util.inspect.custom&&(ValidationError.prototype[util.inspect.custom]=ValidationError.prototype.inspect),Object.defineProperty(ValidationError.prototype,\"toJSON\",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}}),Object.defineProperty(ValidationError.prototype,\"name\",{value:\"ValidationError\"}),module.exports=ValidationError;","node_modules/mongoose/lib/error/validator.js":"\"use strict\";const MongooseError=require(\"./\");class ValidatorError extends MongooseError{constructor(e){let r=e.message;r||(r=MongooseError.messages.general.default);const t=formatMessage(r,e);super(t),e=Object.assign({},e,{message:t}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}}function formatMessage(e,r){if(\"function\"==typeof e)return e(r);const t=Object.keys(r);for(const s of t)\"message\"!==s&&(e=e.replace(\"{\"+s.toUpperCase()+\"}\",r[s]));return e}Object.defineProperty(ValidatorError.prototype,\"name\",{value:\"ValidatorError\"}),Object.defineProperty(ValidatorError.prototype,\"properties\",{enumerable:!1,writable:!0,value:null}),ValidatorError.prototype.formatMessage=formatMessage,module.exports=ValidatorError;","node_modules/mongoose/lib/helpers/document/cleanModifiedSubpaths.js":"\"use strict\";module.exports=function(t,s,e){const o=(e=e||{}).skipDocArrays;let i=0;if(!t)return i;for(const e of Object.keys(t.$__.activePaths.states.modify)){if(o){const s=t.$__schema.path(e);if(s&&s.$isMongooseDocumentArray)continue}e.startsWith(s+\".\")&&(delete t.$__.activePaths.states.modify[e],++i)}return i};","node_modules/mongoose/lib/helpers/document/compile.js":"\"use strict\";const documentSchemaSymbol=require(\"../../helpers/symbols\").documentSchemaSymbol,get=require(\"../../helpers/get\"),internalToObjectOptions=require(\"../../options\").internalToObjectOptions,utils=require(\"../../utils\");let Document;const getSymbol=require(\"../../helpers/symbols\").getSymbol,scopeSymbol=require(\"../../helpers/symbols\").scopeSymbol;function compile(e,t,r,n){Document=Document||require(\"../../document\");const o=Object.keys(e),i=o.length;let l,s;for(let c=0;c<i;++c){l=e[s=o[c]],defineKey(s,utils.isPOJO(l)&&Object.keys(l).length&&(!l[n.typeKey]||\"type\"===n.typeKey&&l.type.type)?l:null,t,r,o,n)}}function defineKey(e,t,r,n,o,i){Document=Document||require(\"../../document\");const l=(n?n+\".\":\"\")+e;n=n||\"\",t?Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:function(){const e=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[l]){const o=Object.create(Document.prototype,getOwnPropertyDescriptors(this));n||(o.$__[scopeSymbol]=this),o.$__.nestedPath=l,Object.defineProperty(o,\"schema\",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(o,\"$__schema\",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(o,documentSchemaSymbol,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(o,\"toObject\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return utils.clone(e.get(l,null,{virtuals:get(this,\"schema.options.toObject.virtuals\",null)}))}}),Object.defineProperty(o,\"$__get\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return e.get(l,null,{virtuals:get(this,\"schema.options.toObject.virtuals\",null)})}}),Object.defineProperty(o,\"toJSON\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return e.get(l,null,{virtuals:get(e,\"schema.options.toJSON.virtuals\",null)})}}),Object.defineProperty(o,\"$__isNested\",{enumerable:!1,configurable:!0,writable:!1,value:!0});const s=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1});Object.defineProperty(o,\"$isEmpty\",{enumerable:!1,configurable:!0,writable:!1,value:function(){return 0===Object.keys(this.get(l,null,s)||{}).length}}),Object.defineProperty(o,\"$__parent\",{enumerable:!1,configurable:!0,writable:!1,value:this}),compile(t,o,l,i),this.$__.getters[l]=o}return this.$__.getters[l]},set:function(e){null!=e&&e.$__isNested?e=e.$__get():e instanceof Document&&!e.$__isNested&&(e=e.toObject(internalToObjectOptions)),(this.$__[scopeSymbol]||this).$set(l,e)}}):Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:function(){return this[getSymbol].call(this.$__[scopeSymbol]||this,l)},set:function(e){this.$set.call(this.$__[scopeSymbol]||this,l,e)}})}function getOwnPropertyDescriptors(e){const t={};return Object.getOwnPropertyNames(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r),t[r].get?delete t[r]:t[r].enumerable=-1===[\"isNew\",\"$__\",\"errors\",\"_doc\",\"$locals\",\"$op\",\"__parentArray\",\"__index\",\"$isDocumentArrayElement\"].indexOf(r)}),t}exports.compile=compile,exports.defineKey=defineKey;","node_modules/mongoose/lib/helpers/common.js":"\"use strict\";const Binary=require(\"../driver\").get().Binary,Decimal128=require(\"../types/decimal128\"),ObjectId=require(\"../types/objectid\"),isMongooseObject=require(\"./isMongooseObject\");function flatten(t,e,s,n){let o;const r=(o=t&&isMongooseObject(t)&&!Buffer.isBuffer(t)?Object.keys(t.toObject({transform:!1,virtuals:!1})):Object.keys(t||{})).length,i={};e=e?e+\".\":\"\";for(let a=0;a<r;++a){const r=o[a],c=t[r];i[e+r]=c;const f=n&&n.path&&n.path(e+r),l=n&&n.nested&&n.nested[e+r];if(!f||\"Mixed\"!==f.instance){if(shouldFlatten(c)){if(s&&s.skipArrays&&Array.isArray(c))continue;const t=flatten(c,e+r,s,n);for(const e in t)i[e]=t[e];Array.isArray(c)&&(i[e+r]=c)}if(l){const t=Object.keys(n.paths);for(const s of t)s.startsWith(e+r+\".\")&&!i.hasOwnProperty(s)&&(i[s]=void 0)}}}return i}function modifiedPaths(t,e,s){const n=Object.keys(t||{}),o=n.length;s=s||{},e=e?e+\".\":\"\";for(let r=0;r<o;++r){const o=n[r];let i=t[o];s[e+o]=!0,isMongooseObject(i)&&!Buffer.isBuffer(i)&&(i=i.toObject({transform:!1,virtuals:!1})),shouldFlatten(i)&&modifiedPaths(i,e+o,s)}return s}function shouldFlatten(t){return t&&\"object\"==typeof t&&!(t instanceof Date)&&!(t instanceof ObjectId)&&(!Array.isArray(t)||t.length>0)&&!(t instanceof Buffer)&&!(t instanceof Decimal128)&&!(t instanceof Binary)}exports.flatten=flatten,exports.modifiedPaths=modifiedPaths;","node_modules/mongoose/lib/helpers/document/getEmbeddedDiscriminatorPath.js":"\"use strict\";const get=require(\"../get\");module.exports=function e(n,t,i){const s=(i=i||{}).typeOnly,o=t.split(\".\");let c=null,l=\"adhocOrUndefined\";for(let t=0;t<o.length;++t){const r=o.slice(0,t+1).join(\".\");if(null!=(c=n.schema.path(r))){if(\"Mixed\"===c.instance)return s?\"real\":c;if(l=n.schema.pathType(r),(c.$isSingleNested||c.$isMongooseDocumentArrayElement)&&null!=c.schema.discriminators){const s=c.schema.discriminators,l=n.get(r+\".\"+get(c,\"schema.options.discriminatorKey\"));if(null==l||null==s[l])continue;const a=o.slice(t+1).join(\".\");return e(n.get(r),a,i)}}else l=\"adhocOrUndefined\"}return s?l:c};","node_modules/mongoose/lib/helpers/document/handleSpreadDoc.js":"\"use strict\";const utils=require(\"../../utils\");module.exports=function(u){return utils.isPOJO(u)&&null!=u.$__&&null!=u._doc?u._doc:u};","node_modules/mongoose/lib/plugins/idGetter.js":"\"use strict\";function idGetter(){return null!=this._id?String(this._id):null}module.exports=function(t){!t.paths.id&&!t.options.noVirtualId&&t.options.id&&t.virtual(\"id\").get(idGetter)};","node_modules/mongoose/lib/helpers/projection/isDefiningProjection.js":"\"use strict\";module.exports=function(e){return null==e||(\"object\"!=typeof e||!(\"$meta\"in e||\"$slice\"in e))};","node_modules/mongoose/lib/helpers/projection/isExclusive.js":"\"use strict\";const isDefiningProjection=require(\"./isDefiningProjection\");module.exports=function(e){if(null==e)return null;const i=Object.keys(e);let n=i.length,t=null;if(1===n&&\"_id\"===i[0])t=!!e[i[n]];else for(;n--;)if(\"_id\"!==i[n]&&isDefiningProjection(e[i[n]])){t=!e[i[n]];break}return t};","node_modules/mongoose/lib/options.js":"\"use strict\";exports.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1};","node_modules/mpath/index.js":"\"use strict\";module.exports=exports=require(\"./lib\");","node_modules/mongoose/lib/queryhelpers.js":"\"use strict\";const checkEmbeddedDiscriminatorKeyProjection=require(\"./helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection\"),get=require(\"./helpers/get\"),getDiscriminatorByValue=require(\"./helpers/discriminator/getDiscriminatorByValue\"),isDefiningProjection=require(\"./helpers/projection/isDefiningProjection\"),clone=require(\"./helpers/clone\");function makeLean(e){return function(t){t.options||(t.options={}),null!=e&&Array.isArray(e.virtuals)&&((e=Object.assign({},e)).virtuals=e.virtuals.filter(e=>\"string\"==typeof e&&e.startsWith(t.path+\".\")).map(e=>e.slice(t.path.length+1))),t.options.lean=e}}exports.preparePopulationOptions=function(e,t){const n=e.options.populate,o=Object.keys(n).reduce((e,t)=>e.concat([n[t]]),[]);return null!=t.lean&&o.filter(e=>null==get(e,\"options.lean\")).forEach(makeLean(t.lean)),o},exports.preparePopulationOptionsMQ=function(e,t){const n=e._mongooseOptions.populate,o=Object.keys(n).reduce((e,t)=>e.concat([n[t]]),[]);null!=t.lean&&o.filter(e=>null==get(e,\"options.lean\")).forEach(makeLean(t.lean));const i=get(e,\"options.session\",null);null!=i&&o.forEach(e=>{null!=e.options?\"session\"in e.options||(e.options.session=i):e.options={session:i}});const s=e._fieldsForExec();return o.forEach(e=>{e._queryProjection=s}),o},exports.createModel=function(e,t,n,o,i){e.hooks.execPreSync(\"createModel\",t);const s=e.schema?e.schema.discriminatorMapping:null,r=s&&s.isRoot?s.key:null,l=t[r];if(r&&l&&e.discriminators){const t=e.discriminators[l]||getDiscriminatorByValue(e.discriminators,l);if(t){const e=clone(o);return exports.applyPaths(e,t.schema),new t(void 0,e,!0)}}return void 0===i&&((i={}).defaults=!0),new e(void 0,n,{skipId:!0,isNew:!1,willInit:!0,defaults:i.defaults})},exports.applyPaths=function(e,t){let n,o,i;if(e)for(i=(o=Object.keys(e)).length;i--;){if(\"+\"===o[i][0])continue;const t=e[o[i]];if(isDefiningProjection(t)){n=!t;break}}const s=[],r=[],l=[];switch(function t(o,i){i||(i=\"\");if(-1!==l.indexOf(o))return[];l.push(o);const r=[];o.eachPath(function(o,l){i&&(o=i+\".\"+o);let a=c(o,l);if(null==a&&l.$isMongooseArray&&!l.$isMongooseDocumentArray&&(a=c(o,l.caster)),null!=a&&r.push(a),l.schema){const i=t(l.schema,o);!1===n&&checkEmbeddedDiscriminatorKeyProjection(e,o,l.schema,s,i)}});l.pop();return r}(t),n){case!0:for(const t of r)e[t]=0;break;case!1:t&&t.paths._id&&t.paths._id.options&&!1===t.paths._id.options.select&&(e._id=0);for(const t of s)e[t]=e[t]||1;break;case void 0:if(null==e)break;for(const t of Object.keys(e||{}))t.startsWith(\"+\")&&delete e[t];for(const t of r)e[t]=0}function c(t,i){const l=\"+\"+t,c=e&&l in e;if(c&&delete e[l],\"boolean\"!=typeof i.selected)return;if(c)return delete e[l],void(!1===n&&o.length>1&&!~o.indexOf(t)&&(e[t]=1));const a=t.split(\".\");let u=\"\";for(let e=0;e<a.length;++e)if(u+=u.length?\".\"+a[e]:a[e],-1!==r.indexOf(u))return;if(!n&&get(i,\"options.$skipDiscriminatorCheck\",!1)){let t=\"\";for(let n=0;n<a.length;++n){t+=(0===t.length?\"\":\".\")+a[n];const o=get(e,t,!1)||get(e,t+\".$\",!1);if(o&&\"object\"!=typeof o)return}}return(i.selected?s:r).push(t),t}},exports.handleDeleteWriteOpResult=function(e){return function(t,n){if(t)return e(t);const o=Object.assign({},n.result);return null!=get(n,\"result.n\",null)&&(o.deletedCount=n.result.n),null!=n.deletedCount&&(o.deletedCount=n.deletedCount),e(null,o)}};","node_modules/mongoose/lib/helpers/isPromise.js":"\"use strict\";function isPromise(t){return!!t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof t.then}module.exports=isPromise;","node_modules/mongoose/lib/helpers/symbols.js":"\"use strict\";exports.arrayAtomicsSymbol=Symbol(\"mongoose#Array#_atomics\"),exports.arrayParentSymbol=Symbol(\"mongoose#Array#_parent\"),exports.arrayPathSymbol=Symbol(\"mongoose#Array#_path\"),exports.arraySchemaSymbol=Symbol(\"mongoose#Array#_schema\"),exports.documentArrayParent=Symbol(\"mongoose:documentArrayParent\"),exports.documentIsSelected=Symbol(\"mongoose#Document#isSelected\"),exports.documentIsModified=Symbol(\"mongoose#Document#isModified\"),exports.documentModifiedPaths=Symbol(\"mongoose#Document#modifiedPaths\"),exports.documentSchemaSymbol=Symbol(\"mongoose#Document#schema\"),exports.getSymbol=Symbol(\"mongoose#Document#get\"),exports.modelSymbol=Symbol(\"mongoose#Model\"),exports.objectIdSymbol=Symbol(\"mongoose#ObjectId\"),exports.populateModelSymbol=Symbol(\"mongoose.PopulateOptions#Model\"),exports.schemaTypeSymbol=Symbol(\"mongoose#schemaType\"),exports.sessionNewDocuments=Symbol(\"mongoose:ClientSession#newDocuments\"),exports.scopeSymbol=Symbol(\"mongoose#Document#scope\"),exports.validatorErrorSymbol=Symbol(\"mongoose:validatorError\");","node_modules/mongoose/lib/schema/symbols.js":"\"use strict\";exports.schemaMixedSymbol=Symbol.for(\"mongoose:schema_mixed\"),exports.builtInMiddleware=Symbol.for(\"mongoose:built-in-middleware\");","node_modules/mongoose/lib/statemachine.js":"\"use strict\";const utils=require(\"./utils\"),StateMachine=module.exports=exports=function(){};StateMachine.ctor=function(){const t=utils.args(arguments),e=function(){StateMachine.apply(this,arguments),this.paths={},this.states={},this.stateNames=t;let e,s=t.length;for(;s--;)e=t[s],this.states[e]={}};return e.prototype=new StateMachine,t.forEach(function(t){e.prototype[t]=function(e){this._changeState(e,t)}}),e},StateMachine.prototype._changeState=function(t,e){const s=this.states[this.paths[t]];s&&delete s[t],this.paths[t]=e,this.states[e][t]=!0},StateMachine.prototype.clear=function(t){const e=Object.keys(this.states[t]);let s,n=e.length;for(;n--;)s=e[n],delete this.states[t][s],delete this.paths[s]},StateMachine.prototype.some=function(){const t=this,e=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(e,function(e){return Object.keys(t.states[e]).length})},StateMachine.prototype._iter=function(t){return function(){const e=arguments.length;let s=utils.args(arguments,0,e-1);const n=arguments[e-1];s.length||(s=this.stateNames);const a=this;return s.reduce(function(t,e){return t.concat(Object.keys(a.states[e]))},[])[t](function(t,e,s){return n(t,e,s)})}},StateMachine.prototype.forEach=function(){return this.forEach=this._iter(\"forEach\"),this.forEach.apply(this,arguments)},StateMachine.prototype.map=function(){return this.map=this._iter(\"map\"),this.map.apply(this,arguments)};","node_modules/ms/index.js":"var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d;function parse(e){if(!((e=String(e)).length>100)){var r=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]);switch((r[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return a*y;case\"weeks\":case\"week\":case\"w\":return a*w;case\"days\":case\"day\":case\"d\":return a*d;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return a*h;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return a*m;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return a*s;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return a;default:return}}}}function fmtShort(e){var r=Math.abs(e);return r>=d?Math.round(e/d)+\"d\":r>=h?Math.round(e/h)+\"h\":r>=m?Math.round(e/m)+\"m\":r>=s?Math.round(e/s)+\"s\":e+\"ms\"}function fmtLong(e){var r=Math.abs(e);return r>=d?plural(e,r,d,\"day\"):r>=h?plural(e,r,h,\"hour\"):r>=m?plural(e,r,m,\"minute\"):r>=s?plural(e,r,s,\"second\"):e+\" ms\"}function plural(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+\" \"+a+(n?\"s\":\"\")}module.exports=function(s,e){e=e||{};var r=typeof s;if(\"string\"===r&&s.length>0)return parse(s);if(\"number\"===r&&isFinite(s))return e.long?fmtLong(s):fmtShort(s);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(s))};","node_modules/mongoose/node_modules/safe-buffer/index.js":"var buffer=require(\"buffer\"),Buffer=buffer.Buffer;function copyProps(f,e){for(var r in f)e[r]=f[r]}function SafeBuffer(f,e,r){return Buffer(f,e,r)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(Buffer.prototype),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,e,r){if(\"number\"==typeof f)throw new TypeError(\"Argument must not be a number\");return Buffer(f,e,r)},SafeBuffer.alloc=function(f,e,r){if(\"number\"!=typeof f)throw new TypeError(\"Argument must be a number\");var u=Buffer(f);return void 0!==e?\"string\"==typeof r?u.fill(e,r):u.fill(e):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if(\"number\"!=typeof f)throw new TypeError(\"Argument must be a number\");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if(\"number\"!=typeof f)throw new TypeError(\"Argument must be a number\");return buffer.SlowBuffer(f)};","node_modules/mongoose/lib/types/decimal128.js":"\"use strict\";module.exports=require(\"../driver\").get().Decimal128;","node_modules/mongoose/lib/types/objectid.js":"\"use strict\";const ObjectId=require(\"../driver\").get().ObjectId,objectIdSymbol=require(\"../helpers/symbols\").objectIdSymbol;Object.defineProperty(ObjectId.prototype,\"_id\",{enumerable:!1,configurable:!0,get:function(){return this}}),ObjectId.prototype[objectIdSymbol]=!0,module.exports=ObjectId;","node_modules/mongoose/lib/options/PopulateOptions.js":"\"use strict\";const clone=require(\"../helpers/clone\");class PopulateOptions{constructor(t){if(this._docs={},this._childDocs=[],null!=t&&(t=clone(t),Object.assign(this,t),\"object\"==typeof t.subPopulate&&(this.populate=t.subPopulate),null!=t.perDocumentLimit&&null!=t.limit))throw new Error(\"Can not use `limit` and `perDocumentLimit` at the same time. Path: `\"+t.path+\"`.\")}}module.exports=PopulateOptions;","node_modules/mongoose/lib/helpers/clone.js":"\"use strict\";const cloneRegExp=require(\"regexp-clone\"),Decimal=require(\"../types/decimal128\"),ObjectId=require(\"../types/objectid\"),specialProperties=require(\"./specialProperties\"),isMongooseObject=require(\"./isMongooseObject\"),getFunctionName=require(\"./getFunctionName\"),isBsonType=require(\"./isBsonType\"),isObject=require(\"./isObject\"),symbols=require(\"./symbols\"),utils=require(\"../utils\");function clone(e,t,o){if(null==e)return e;if(Array.isArray(e))return cloneArray(e,t);if(isMongooseObject(e))return t&&t._skipSingleNestedGetters&&e.$isSingleNested&&(t=Object.assign({},t,{getters:!1})),utils.isPOJO(e)&&null!=e.$__&&null!=e._doc?e._doc:t&&t.json&&\"function\"==typeof e.toJSON?e.toJSON(t):e.toObject(t);if(e.constructor)switch(getFunctionName(e.constructor)){case\"Object\":return cloneObject(e,t,o);case\"Date\":return new e.constructor(+e);case\"RegExp\":return cloneRegExp(e)}return e instanceof ObjectId?new ObjectId(e.id):isBsonType(e,\"Decimal128\")?t&&t.flattenDecimals?e.toJSON():Decimal.fromString(e.toString()):!e.constructor&&isObject(e)?cloneObject(e,t,o):e[symbols.schemaTypeSymbol]?e.clone():t&&t.bson&&\"function\"==typeof e.toBSON?e:null!=e.valueOf?e.valueOf():cloneObject(e,t,o)}function cloneObject(e,t,o){const n=t&&t.minimize,c={};let r;for(const o of Object.keys(e)){if(specialProperties.has(o))continue;const s=clone(e[o],t);n&&void 0===s||(!1===n&&void 0===s?delete c[o]:(r||(r=!0),c[o]=s))}return n&&!o?r&&c:c}function cloneArray(e,t){const o=[];for(const n of e)o.push(clone(n,t,!0));return o}module.exports=clone;","node_modules/mongoose/lib/helpers/isObject.js":"\"use strict\";module.exports=function(t){return!!Buffer.isBuffer(t)||\"[object Object]\"===Object.prototype.toString.call(t)};","node_modules/mongoose/lib/helpers/isBsonType.js":"\"use strict\";const get=require(\"./get\");function isBsonType(e,t){return get(e,\"_bsontype\",void 0)===t}module.exports=isBsonType;","node_modules/mongoose/lib/helpers/getFunctionName.js":"\"use strict\";module.exports=function(t){return t.name?t.name:(t.toString().trim().match(/^function\\s*([^\\s(]+)/)||[])[1]};","node_modules/mongoose/lib/helpers/isMongooseObject.js":"\"use strict\";module.exports=function(o){return null!=o&&(null!=o.$__||o.isMongooseArray||o.isMongooseBuffer||o.$isMongooseMap)};","node_modules/mongoose/lib/helpers/schema/merge.js":"\"use strict\";module.exports=function(e,t,s){const o=Object.keys(t.tree),c={};for(const u of o)s&&(e.paths[u]||e.nested[u]||e.singleNestedPaths[u])||(c[u]=t.tree[u]);e.add(c),e.callQueue=e.callQueue.concat(t.callQueue),e.method(t.methods),e.static(t.statics);for(const s in t.query)e.query[s]=t.query[s];for(const s in t.virtuals)e.virtuals[s]=t.virtuals[s].clone();e.s.hooks.merge(t.s.hooks,!1)};","node_modules/mongoose/lib/helpers/specialProperties.js":"\"use strict\";module.exports=new Set([\"__proto__\",\"constructor\",\"prototype\"]);","node_modules/mpath/lib/index.js":"var stringToParts=require(\"./stringToParts\"),ignoreProperties=[\"__proto__\",\"constructor\",\"prototype\"];function _setArray(r,t,e,n,i,a){for(var o,s=0;s<r.length&&s<t.length;++s)o=r[s],Array.isArray(o)&&Array.isArray(t[s])?_setArray(o,t[s],e,n,i,a):o&&(n?n(o,e,a(t[s])):(o[i]&&(o=o[i]),o[e]=a(t[s])))}function K(r){return r}exports.get=function(r,t,e,n){var i;\"function\"==typeof e&&(e.length<2?(n=e,e=void 0):(i=e,e=void 0)),n||(n=K);var a=\"string\"==typeof r?stringToParts(r):r;if(!Array.isArray(a))throw new TypeError(\"Invalid `path`. Must be either string or array\");for(var o,s=t,f=0;f<a.length;++f){if(o=a[f],Array.isArray(s)&&!/^\\d+$/.test(o)){var y=a.slice(f);return[].concat(s).map(function(r){return r?exports.get(y,r,e||i,n):n(void 0)})}if(i)s=i(s,o);else{var g=e&&s[e]?s[e]:s;s=g instanceof Map?g.get(o):g[o]}if(!s)return n(s)}return n(s)},exports.has=function(r,t){var e=\"string\"==typeof r?stringToParts(r):r;if(!Array.isArray(e))throw new TypeError(\"Invalid `path`. Must be either string or array\");for(var n=e.length,i=t,a=0;a<n;++a){if(null==i||\"object\"!=typeof i||!(e[a]in i))return!1;i=i[e[a]]}return!0},exports.unset=function(r,t){var e=\"string\"==typeof r?stringToParts(r):r;if(!Array.isArray(e))throw new TypeError(\"Invalid `path`. Must be either string or array\");for(var n=e.length,i=t,a=0;a<n;++a){if(null==i||\"object\"!=typeof i||!(e[a]in i))return!1;if(-1!==ignoreProperties.indexOf(e[a]))return!1;if(a===n-1)return delete i[e[a]],!0;i=i instanceof Map?i.get(e[a]):i[e[a]]}return!0},exports.set=function(r,t,e,n,i,a){var o;\"function\"==typeof n&&(n.length<2?(i=n,n=void 0):(o=n,n=void 0)),i||(i=K);var s=\"string\"==typeof r?stringToParts(r):r;if(!Array.isArray(s))throw new TypeError(\"Invalid `path`. Must be either string or array\");if(null!=e){for(var f=0;f<s.length;++f)if(-1!==ignoreProperties.indexOf(s[f]))return;for(var y,g=a||/\\$/.test(r)&&!1!==a,p=e,u=(f=0,s.length-1);f<u;++f)if(\"$\"!=(y=s[f])){if(Array.isArray(p)&&!/^\\d+$/.test(y)){var l=s.slice(f);if(!g&&Array.isArray(t))for(var v=0;v<p.length&&v<t.length;++v)exports.set(l,t[v],p[v],n||o,i,g);else for(v=0;v<p.length;++v)exports.set(l,t,p[v],n||o,i,g);return}if(o)p=o(p,y);else{var h=n&&p[n]?p[n]:p;p=h instanceof Map?h.get(y):h[y]}if(!p)return}else if(f==u-1)break;if(y=s[u],n&&p[n]&&(p=p[n]),Array.isArray(p)&&!/^\\d+$/.test(y))if(!g&&Array.isArray(t))_setArray(p,t,y,o,n,i);else for(v=0;v<p.length;++v){var A=p[v];A&&(o?o(A,y,i(t)):(A[n]&&(A=A[n]),A[y]=i(t)))}else o?o(p,y,i(t)):p instanceof Map?p.set(y,i(t)):p[y]=i(t)}};","node_modules/mpath/lib/stringToParts.js":"\"use strict\";module.exports=function(E){const A=[];let T=\"\",R=\"DEFAULT\";for(let _=0;_<E.length;++_)\"IN_SQUARE_BRACKETS\"!==R||/\\d/.test(E[_])||\"]\"===E[_]||(R=\"DEFAULT\",T=A[A.length-1]+\"[\"+T,A.splice(A.length-1,1)),\"[\"===E[_]?(\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\"!==R&&(A.push(T),T=\"\"),R=\"IN_SQUARE_BRACKETS\"):\"]\"===E[_]?\"IN_SQUARE_BRACKETS\"===R?(R=\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\",A.push(T),T=\"\"):(R=\"DEFAULT\",T+=E[_]):\".\"===E[_]?(\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\"!==R&&(A.push(T),T=\"\"),R=\"DEFAULT\"):T+=E[_];return\"IMMEDIATELY_AFTER_SQUARE_BRACKETS\"!==R&&A.push(T),A};","node_modules/regexp-clone/index.js":"const toString=Object.prototype.toString;function isRegExp(t){return\"object\"==typeof t&&\"[object RegExp]\"==toString.call(t)}module.exports=exports=function(t){if(!isRegExp(t))throw new TypeError(\"Not a RegExp\");const e=[];t.global&&e.push(\"g\"),t.multiline&&e.push(\"m\"),t.ignoreCase&&e.push(\"i\"),t.dotAll&&e.push(\"s\"),t.unicode&&e.push(\"u\"),t.sticky&&e.push(\"y\");const o=new RegExp(t.source,e.join(\"\"));return\"number\"==typeof t.lastIndex&&(o.lastIndex=t.lastIndex),o};","node_modules/mquery/lib/utils.js":"\"use strict\";var Buffer=require(\"safe-buffer\").Buffer,RegExpClone=require(\"regexp-clone\"),specialProperties=[\"__proto__\",\"constructor\",\"prototype\"],clone=exports.clone=function e(r,t){if(void 0===r||null===r)return r;if(Array.isArray(r))return exports.cloneArray(r,t);if(r.constructor){if(/ObjectI[dD]$/.test(r.constructor.name))return\"function\"==typeof r.clone?r.clone():new r.constructor(r.id);if(\"ReadPreference\"===r.constructor.name)return new r.constructor(r.mode,e(r.tags,t));if(\"Binary\"==r._bsontype&&r.buffer&&r.value)return\"function\"==typeof r.clone?r.clone():new r.constructor(r.value(!0),r.sub_type);if(\"Date\"===r.constructor.name||\"Function\"===r.constructor.name)return new r.constructor(+r);if(\"RegExp\"===r.constructor.name)return RegExpClone(r);if(\"Buffer\"===r.constructor.name)return exports.cloneBuffer(r)}return isObject(r)?exports.cloneObject(r,t):r.valueOf?r.valueOf():void 0};exports.cloneObject=function(e,r){var t,o,n=r&&r.minimize,c={};for(const s of Object.keys(e))-1===specialProperties.indexOf(s)&&(o=clone(e[s],r),n&&void 0===o||(t||(t=!0),c[s]=o));return n?t&&c:c},exports.cloneArray=function(e,r){for(var t=[],o=0,n=e.length;o<n;o++)t.push(clone(e[o],r));return t},exports.tick=function(e){if(\"function\"==typeof e)return function(){var r=arguments;soon(function(){e.apply(this,r)})}},exports.merge=function e(r,t){for(var o,n=Object.keys(t),c=n.length;c--;)o=n[c],-1===specialProperties.indexOf(o)&&(void 0===r[o]?r[o]=t[o]:exports.isObject(t[o])?e(r[o],t[o]):r[o]=t[o])},exports.mergeClone=function e(r,t){for(var o,n=Object.keys(t),c=n.length;c--;)o=n[c],-1===specialProperties.indexOf(o)&&(void 0===r[o]?r[o]=clone(t[o]):exports.isObject(t[o])?e(r[o],t[o]):r[o]=clone(t[o]))},exports.readPref=function(e){switch(e){case\"p\":e=\"primary\";break;case\"pp\":e=\"primaryPreferred\";break;case\"s\":e=\"secondary\";break;case\"sp\":e=\"secondaryPreferred\";break;case\"n\":e=\"nearest\"}return e},exports.readConcern=function(e){if(\"string\"==typeof e){switch(e){case\"l\":e=\"local\";break;case\"a\":e=\"available\";break;case\"m\":e=\"majority\";break;case\"lz\":e=\"linearizable\";break;case\"s\":e=\"snapshot\"}e={level:e}}return e};var _toString=Object.prototype.toString;exports.toString=function(e){return _toString.call(e)};var isObject=exports.isObject=function(e){return\"[object Object]\"==exports.toString(e)};function create(e){if(arguments.length>1)throw new Error(\"Adding properties is not supported\");function r(){}return r.prototype=e,new r}exports.isArray=function(e){return Array.isArray(e)||\"object\"==typeof e&&\"[object Array]\"==exports.toString(e)},exports.keys=Object.keys,exports.create=\"function\"==typeof Object.create?Object.create:create,exports.inherits=function(e,r){e.prototype=exports.create(r.prototype),e.prototype.constructor=e};var soon=exports.soon=\"function\"==typeof setImmediate?setImmediate:process.nextTick;exports.cloneBuffer=function(e){var r=Buffer.alloc(e.length);return e.copy(r,0,0,e.length),r},exports.isArgumentsObject=function(e){return\"[object Arguments]\"===Object.prototype.toString.call(e)};","node_modules/mquery/node_modules/debug/src/index.js":"\"undefined\"==typeof process||\"renderer\"===process.type?module.exports=require(\"./browser.js\"):module.exports=require(\"./node.js\");","node_modules/mquery/lib/permissions.js":"\"use strict\";var denied=exports;denied.distinct=function(e){return e._fields&&Object.keys(e._fields).length>0?\"field selection and slice\":(Object.keys(denied.distinct).every(function(d){return!e.options[d]||(n=d,!1)}),n);var n},denied.distinct.select=denied.distinct.slice=denied.distinct.sort=denied.distinct.limit=denied.distinct.skip=denied.distinct.batchSize=denied.distinct.comment=denied.distinct.maxScan=denied.distinct.snapshot=denied.distinct.hint=denied.distinct.tailable=!0,denied.findOneAndUpdate=denied.findOneAndRemove=function(e){var n;return Object.keys(denied.findOneAndUpdate).every(function(d){return!e.options[d]||(n=d,!1)}),n},denied.findOneAndUpdate.limit=denied.findOneAndUpdate.skip=denied.findOneAndUpdate.batchSize=denied.findOneAndUpdate.maxScan=denied.findOneAndUpdate.snapshot=denied.findOneAndUpdate.hint=denied.findOneAndUpdate.tailable=denied.findOneAndUpdate.comment=!0,denied.count=function(e){return e._fields&&Object.keys(e._fields).length>0?\"field selection and slice\":(Object.keys(denied.count).every(function(d){return!e.options[d]||(n=d,!1)}),n);var n},denied.count.slice=denied.count.batchSize=denied.count.comment=denied.count.maxScan=denied.count.snapshot=denied.count.tailable=!0;","node_modules/mquery/lib/env.js":"\"use strict\";exports.isNode=\"undefined\"!=typeof process&&\"object\"==typeof module&&\"object\"==typeof global&&\"function\"==typeof Buffer&&process.argv,exports.isMongo=!exports.isNode&&\"function\"==typeof printjson&&\"function\"==typeof ObjectId&&\"function\"==typeof rs&&\"function\"==typeof sh,exports.isBrowser=!exports.isNode&&!exports.isMongo&&\"undefined\"!=typeof window,exports.type=exports.isNode?\"node\":exports.isMongo?\"mongo\":exports.isBrowser?\"browser\":\"unknown\";","node_modules/mquery/lib/collection/index.js":"\"use strict\";var env=require(\"../env\");if(\"unknown\"==env.type)throw new Error(\"Unknown environment\");module.exports=env.isNode?require(\"./node\"):(env.isMongo,require(\"./collection\"));","node_modules/mquery/lib/collection/collection.js":"\"use strict\";var methods=[\"find\",\"findOne\",\"update\",\"updateMany\",\"updateOne\",\"replaceOne\",\"remove\",\"count\",\"distinct\",\"findAndModify\",\"aggregate\",\"findStream\",\"deleteOne\",\"deleteMany\"];function Collection(){}for(var i=0,len=methods.length;i<len;++i){var method=methods[i];Collection.prototype[method]=notImplemented(method)}function notImplemented(e){return function(){throw new Error(\"collection.\"+e+\" not implemented\")}}module.exports=exports=Collection,Collection.methods=methods;","node_modules/bluebird/js/release/bluebird.js":"\"use strict\";var old;function noConflict(){try{Promise===bluebird&&(Promise=old)}catch(e){}return bluebird}\"undefined\"!=typeof Promise&&(old=Promise);var bluebird=require(\"./promise\")();bluebird.noConflict=noConflict,module.exports=bluebird;","node_modules/mquery/node_modules/debug/src/node.js":"var tty=require(\"tty\"),util=require(\"util\");exports=module.exports=require(\"./debug\"),exports.init=init,exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=[6,2,3,4,5,1];try{var supportsColor=require(\"supports-color\");supportsColor&&supportsColor.level>=2&&(exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function useColors(){return\"colors\"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd)}function formatArgs(t){var e=this.namespace;if(this.useColors){var s=this.color,r=\"\u001b[3\"+(s<8?s:\"8;5;\"+s),o=\"  \"+r+\";1m\"+e+\" \u001b[0m\";t[0]=o+t[0].split(\"\\n\").join(\"\\n\"+o),t.push(r+\"m+\"+exports.humanize(this.diff)+\"\u001b[0m\")}else t[0]=getDate()+e+\" \"+t[0]}function getDate(){return exports.inspectOpts.hideDate?\"\":(new Date).toISOString()+\" \"}function log(){return process.stderr.write(util.format.apply(util,arguments)+\"\\n\")}function save(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t}function load(){return process.env.DEBUG}function init(t){t.inspectOpts={};for(var e=Object.keys(exports.inspectOpts),s=0;s<e.length;s++)t.inspectOpts[e[s]]=exports.inspectOpts[e[s]]}exports.inspectOpts=Object.keys(process.env).filter(function(t){return/^debug_/i.test(t)}).reduce(function(t,e){var s=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&(\"null\"===r?null:Number(r)),t[s]=r,t},{}),exports.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,util.inspect(t,this.inspectOpts).split(\"\\n\").map(function(t){return t.trim()}).join(\" \")},exports.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,util.inspect(t,this.inspectOpts)},exports.enable(load());","node_modules/mquery/node_modules/debug/src/debug.js":"function selectColor(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return exports.colors[Math.abs(t)%exports.colors.length]}function createDebug(e){var r;function t(){if(t.enabled){var e=t,s=+new Date,o=s-(r||s);e.diff=o,e.prev=r,e.curr=s,r=s;for(var n=new Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];n[0]=exports.coerce(n[0]),\"string\"!=typeof n[0]&&n.unshift(\"%O\");var p=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(r,t){if(\"%%\"===r)return r;p++;var s=exports.formatters[t];if(\"function\"==typeof s){var o=n[p];r=s.call(e,o),n.splice(p,1),p--}return r}),exports.formatArgs.call(e,n),(t.log||exports.log||console.log.bind(console)).apply(e,n)}}return t.namespace=e,t.enabled=exports.enabled(e),t.useColors=exports.useColors(),t.color=selectColor(e),t.destroy=destroy,\"function\"==typeof exports.init&&exports.init(t),exports.instances.push(t),t}function destroy(){var e=exports.instances.indexOf(this);return-1!==e&&(exports.instances.splice(e,1),!0)}function enable(e){var r;exports.save(e),exports.names=[],exports.skips=[];var t=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),s=t.length;for(r=0;r<s;r++)t[r]&&(\"-\"===(e=t[r].replace(/\\*/g,\".*?\"))[0]?exports.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):exports.names.push(new RegExp(\"^\"+e+\"$\")));for(r=0;r<exports.instances.length;r++){var o=exports.instances[r];o.enabled=exports.enabled(o.namespace)}}function disable(){exports.enable(\"\")}function enabled(e){if(\"*\"===e[e.length-1])return!0;var r,t;for(r=0,t=exports.skips.length;r<t;r++)if(exports.skips[r].test(e))return!1;for(r=0,t=exports.names.length;r<t;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require(\"ms\"),exports.instances=[],exports.names=[],exports.skips=[],exports.formatters={};","node_modules/mquery/node_modules/ms/index.js":"var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;function parse(e){if(!((e=String(e)).length>100)){var r=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]);switch((r[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return a*y;case\"days\":case\"day\":case\"d\":return a*d;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return a*h;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return a*m;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return a*s;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return a;default:return}}}}function fmtShort(e){return e>=d?Math.round(e/d)+\"d\":e>=h?Math.round(e/h)+\"h\":e>=m?Math.round(e/m)+\"m\":e>=s?Math.round(e/s)+\"s\":e+\"ms\"}function fmtLong(e){return plural(e,d,\"day\")||plural(e,h,\"hour\")||plural(e,m,\"minute\")||plural(e,s,\"second\")||e+\" ms\"}function plural(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+\" \"+r:Math.ceil(s/e)+\" \"+r+\"s\"}module.exports=function(s,e){e=e||{};var r=typeof s;if(\"string\"===r&&s.length>0)return parse(s);if(\"number\"===r&&!1===isNaN(s))return e.long?fmtLong(s):fmtShort(s);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(s))};","node_modules/mquery/lib/collection/node.js":"\"use strict\";var Collection=require(\"./collection\"),utils=require(\"../utils\");function NodeCollection(o){this.collection=o,this.collectionName=o.collectionName}utils.inherits(NodeCollection,Collection),NodeCollection.prototype.find=function(o,t,e){this.collection.find(o,t,function(o,t){if(o)return e(o);try{t.toArray(e)}catch(o){e(o)}})},NodeCollection.prototype.findOne=function(o,t,e){this.collection.findOne(o,t,e)},NodeCollection.prototype.count=function(o,t,e){this.collection.count(o,t,e)},NodeCollection.prototype.distinct=function(o,t,e,n){this.collection.distinct(o,t,e,n)},NodeCollection.prototype.update=function(o,t,e,n){this.collection.update(o,t,e,n)},NodeCollection.prototype.updateMany=function(o,t,e,n){this.collection.updateMany(o,t,e,n)},NodeCollection.prototype.updateOne=function(o,t,e,n){this.collection.updateOne(o,t,e,n)},NodeCollection.prototype.replaceOne=function(o,t,e,n){this.collection.replaceOne(o,t,e,n)},NodeCollection.prototype.deleteOne=function(o,t,e){this.collection.deleteOne(o,t,e)},NodeCollection.prototype.deleteMany=function(o,t,e){this.collection.deleteMany(o,t,e)},NodeCollection.prototype.remove=function(o,t,e){this.collection.remove(o,t,e)},NodeCollection.prototype.findAndModify=function(o,t,e,n){var i=Array.isArray(e.sort)?e.sort:[];this.collection.findAndModify(o,i,t,e,n)},NodeCollection.prototype.findStream=function(o,t,e){return this.collection.find(o,t).stream(e)},NodeCollection.prototype.findCursor=function(o,t){return this.collection.find(o,t)},module.exports=exports=NodeCollection;","node_modules/bluebird/js/release/promise.js":"\"use strict\";module.exports=function(){var e=function(){return new _(\"circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n\")},t=function(){return new P.PromiseInspection(this._target())},i=function(e){return P.reject(new _(e))};function r(){}var n,o={},s=require(\"./util\");n=s.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null},s.notEnumerableProp(P,\"_getDomain\",n);var l=require(\"./es5\"),a=require(\"./async\"),c=new a;l.defineProperty(P,\"_async\",{value:c});var u=require(\"./errors\"),_=P.TypeError=u.TypeError;P.RangeError=u.RangeError;var h=P.CancellationError=u.CancellationError;P.TimeoutError=u.TimeoutError,P.OperationalError=u.OperationalError,P.RejectionError=u.OperationalError,P.AggregateError=u.AggregateError;var f=function(){},d={},p={},v=require(\"./thenables\")(P,f),m=require(\"./promise_array\")(P,f,v,i,r),b=require(\"./context\")(P),y=b.create,j=require(\"./debuggability\")(P,b),g=(j.CapturedTrace,require(\"./finally\")(P,v,p)),F=require(\"./catch_filter\")(p),C=require(\"./nodeback\"),w=s.errorObj,k=s.tryCatch;function P(e){e!==f&&function(e,t){if(null==e||e.constructor!==P)throw new _(\"the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n\");if(\"function\"!=typeof t)throw new _(\"expecting a function but got \"+s.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent(\"promiseCreated\",this)}function q(e){this.promise._resolveCallback(e)}function E(e){this.promise._rejectCallback(e,!1)}function H(e){var t=new P(f);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return P.prototype.toString=function(){return\"[object Promise]\"},P.prototype.caught=P.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),o=0;for(r=0;r<t-1;++r){var l=arguments[r];if(!s.isObject(l))return i(\"Catch statement predicate: expecting an object but got \"+s.classString(l));n[o++]=l}return n.length=o,e=arguments[r],this.then(void 0,F(n,e,this))}return this.then(void 0,e)},P.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},P.prototype.then=function(e,t){if(j.warnings()&&arguments.length>0&&\"function\"!=typeof e&&\"function\"!=typeof t){var i=\".then() only accepts functions but was passed: \"+s.classString(e);arguments.length>1&&(i+=\", \"+s.classString(t)),this._warn(i)}return this._then(e,t,void 0,void 0,void 0)},P.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},P.prototype.spread=function(e){return\"function\"!=typeof e?i(\"expecting a function but got \"+s.classString(e)):this.all()._then(e,void 0,void 0,d,void 0)},P.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},P.prototype.all=function(){return arguments.length>0&&this._warn(\".all() was passed arguments but it does not take any\"),new m(this).promise()},P.prototype.error=function(e){return this.caught(s.originatesFromRejection,e)},P.getNewLibraryCopy=module.exports,P.is=function(e){return e instanceof P},P.fromNode=P.fromCallback=function(e){var t=new P(f);t._captureStackTrace();var i=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=k(e)(C(t,i));return r===w&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},P.all=function(e){return new m(e).promise()},P.cast=function(e){var t=v(e);return t instanceof P||((t=new P(f))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},P.resolve=P.fulfilled=P.cast,P.reject=P.rejected=function(e){var t=new P(f);return t._captureStackTrace(),t._rejectCallback(e,!0),t},P.setScheduler=function(e){if(\"function\"!=typeof e)throw new _(\"expecting a function but got \"+s.classString(e));return c.setScheduler(e)},P.prototype._then=function(e,t,i,r,o){var l=void 0!==o,a=l?o:new P(f),u=this._target(),_=u._bitField;l||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&_)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent(\"promiseChained\",this,a));var d=n();if(0!=(50397184&_)){var p,v,m=u._settlePromiseCtx;0!=(33554432&_)?(v=u._rejectionHandler0,p=e):0!=(16777216&_)?(v=u._fulfillmentHandler0,p=t,u._unsetRejectionIsUnhandled()):(m=u._settlePromiseLateCancellationObserver,v=new h(\"late cancellation observer\"),u._attachExtraTrace(v),p=t),c.invoke(m,u,{handler:null===d?p:\"function\"==typeof p&&s.domainBind(d,p),promise:a,receiver:r,value:v})}else u._addCallbacks(e,t,a,r,d);return a},P.prototype._length=function(){return 65535&this._bitField},P.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},P.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},P.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},P.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent(\"promiseFulfilled\",this)},P.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent(\"promiseRejected\",this)},P.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent(\"promiseResolved\",this)},P.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},P.prototype._isFinal=function(){return(4194304&this._bitField)>0},P.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},P.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent(\"promiseCancelled\",this)},P.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},P.prototype._setAsyncGuaranteed=function(){c.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},P.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==o)return void 0===t&&this._isBound()?this._boundValue():t},P.prototype._promiseAt=function(e){return this[4*e-4+2]},P.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},P.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,i=e._rejectionHandler0,r=e._promise0,n=e._receiverAt(0);void 0===n&&(n=o),this._addCallbacks(t,i,r,n,null)},P.prototype._migrateCallbackAt=function(e,t){var i=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),n=e._promiseAt(t),s=e._receiverAt(t);void 0===s&&(s=o),this._addCallbacks(i,r,n,s,null)},P.prototype._addCallbacks=function(e,t,i,r,n){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=i,this._receiver0=r,\"function\"==typeof e&&(this._fulfillmentHandler0=null===n?e:s.domainBind(n,e)),\"function\"==typeof t&&(this._rejectionHandler0=null===n?t:s.domainBind(n,t));else{var l=4*o-4;this[l+2]=i,this[l+3]=r,\"function\"==typeof e&&(this[l+0]=null===n?e:s.domainBind(n,e)),\"function\"==typeof t&&(this[l+1]=null===n?t:s.domainBind(n,t))}return this._setLength(o+1),o},P.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},P.prototype._resolveCallback=function(t,i){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(e(),!1);var r=v(t,this);if(!(r instanceof P))return this._fulfill(t);i&&this._propagateFrom(r,2);var n=r._target();if(n!==this){var o=n._bitField;if(0==(50397184&o)){var s=this._length();s>0&&n._migrateCallback0(this);for(var l=1;l<s;++l)n._migrateCallbackAt(this,l);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(n._value());else if(0!=(16777216&o))this._reject(n._reason());else{var a=new h(\"late cancellation observer\");n._attachExtraTrace(a),this._reject(a)}}else this._reject(e())}},P.prototype._rejectCallback=function(e,t,i){var r=s.ensureErrorObject(e),n=r===e;if(!n&&!i&&j.warnings()){var o=\"a promise was rejected with a non-error: \"+s.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&n),this._reject(e)},P.prototype._resolveFromExecutor=function(e){if(e!==f){var t=this;this._captureStackTrace(),this._pushContext();var i=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,i)});i=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},P.prototype._settlePromiseFromHandler=function(e,t,i,r){var n=r._bitField;if(0==(65536&n)){var o;r._pushContext(),t===d?i&&\"number\"==typeof i.length?o=k(e).apply(this._boundValue(),i):(o=w).e=new _(\"cannot .spread() a non-array: \"+s.classString(i)):o=k(e).call(t,i);var l=r._popContext();0==(65536&(n=r._bitField))&&(o===p?r._reject(i):o===w?r._rejectCallback(o.e,!1):(j.checkForgottenReturns(o,l,\"\",r,this),r._resolveCallback(o)))}},P.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(e){this._rejectionHandler0=e},P.prototype._settlePromise=function(e,i,n,o){var s=e instanceof P,l=this._bitField,a=0!=(134217728&l);0!=(65536&l)?(s&&e._invokeInternalOnCancel(),n instanceof g&&n.isFinallyHandler()?(n.cancelPromise=e,k(i).call(n,o)===w&&e._reject(w.e)):i===t?e._fulfill(t.call(n)):n instanceof r?n._promiseCancelled(e):s||e instanceof m?e._cancel():n.cancel()):\"function\"==typeof i?s?(a&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(i,n,o,e)):i.call(n,o,e):n instanceof r?n._isResolved()||(0!=(33554432&l)?n._promiseFulfilled(o,e):n._promiseRejected(o,e)):s&&(a&&e._setAsyncGuaranteed(),0!=(33554432&l)?e._fulfill(o):e._reject(o))},P.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,i=e.promise,r=e.receiver,n=e.value;\"function\"==typeof t?i instanceof P?this._settlePromiseFromHandler(t,r,n,i):t.call(r,n,i):i instanceof P&&i._reject(n)},P.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},P.prototype._settlePromise0=function(e,t,i){var r=this._promise0,n=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,n,t)},P.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},P.prototype._fulfill=function(t){var i=this._bitField;if(!((117506048&i)>>>16)){if(t===this){var r=e();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,(65535&i)>0&&(0!=(134217728&i)?this._settlePromises():c.settlePromises(this))}},P.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return c.fatalError(e,s.isNode);(65535&t)>0?c.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(e,t){for(var i=1;i<e;i++){var r=this._fulfillmentHandlerAt(i),n=this._promiseAt(i),o=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(n,r,o,t)}},P.prototype._rejectPromises=function(e,t){for(var i=1;i<e;i++){var r=this._rejectionHandlerAt(i),n=this._promiseAt(i),o=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(n,r,o,t)}},P.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,e),this._rejectPromises(t,i)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},P.defer=P.pending=function(){return j.deprecated(\"Promise.defer\",\"new Promise\"),{promise:new P(f),resolve:q,reject:E}},s.notEnumerableProp(P,\"_makeSelfResolutionError\",e),require(\"./method\")(P,f,v,i,j),require(\"./bind\")(P,f,v,j),require(\"./cancel\")(P,m,i,j),require(\"./direct_resolve\")(P),require(\"./synchronous_inspection\")(P),require(\"./join\")(P,m,v,f,c,n),P.Promise=P,P.version=\"3.5.1\",require(\"./map.js\")(P,m,i,v,f,j),require(\"./call_get.js\")(P),require(\"./using.js\")(P,i,v,y,f,j),require(\"./timers.js\")(P,f,j),require(\"./generators.js\")(P,i,f,v,r,j),require(\"./nodeify.js\")(P),require(\"./promisify.js\")(P,f),require(\"./props.js\")(P,m,v,i),require(\"./race.js\")(P,f,v,i),require(\"./reduce.js\")(P,m,i,v,f,j),require(\"./settle.js\")(P,m,j),require(\"./some.js\")(P,m,i),require(\"./filter.js\")(P,f),require(\"./each.js\")(P,f),require(\"./any.js\")(P),s.toFastProperties(P),s.toFastProperties(P.prototype),H({a:1}),H({b:2}),H({c:3}),H(1),H(function(){}),H(void 0),H(!1),H(new P(f)),j.setBounds(a.firstLineError,s.lastLineError),P};","node_modules/bluebird/js/release/util.js":"\"use strict\";var es5=require(\"./es5\"),canEvaluate=\"undefined\"==typeof navigator,errorObj={e:{}},tryCatchTarget,globalObject=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:void 0!==this?this:null;function tryCatcher(){try{var r=tryCatchTarget;return tryCatchTarget=null,r.apply(this,arguments)}catch(r){return errorObj.e=r,errorObj}}function tryCatch(r){return tryCatchTarget=r,tryCatcher}var inherits=function(r,e){var t={}.hasOwnProperty;function n(){for(var n in this.constructor=r,this.constructor$=e,e.prototype)t.call(e.prototype,n)&&\"$\"!==n.charAt(n.length-1)&&(this[n+\"$\"]=e.prototype[n])}return n.prototype=e.prototype,r.prototype=new n,r.prototype};function isPrimitive(r){return null==r||!0===r||!1===r||\"string\"==typeof r||\"number\"==typeof r}function isObject(r){return\"function\"==typeof r||\"object\"==typeof r&&null!==r}function maybeWrapAsError(r){return isPrimitive(r)?new Error(safeToString(r)):r}function withAppended(r,e){var t,n=r.length,o=new Array(n+1);for(t=0;t<n;++t)o[t]=r[t];return o[t]=e,o}function getDataPropertyOrDefault(r,e,t){if(!es5.isES5)return{}.hasOwnProperty.call(r,e)?r[e]:void 0;var n=Object.getOwnPropertyDescriptor(r,e);return null!=n?null==n.get&&null==n.set?n.value:t:void 0}function notEnumerableProp(r,e,t){if(isPrimitive(r))return r;var n={value:t,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(r,e,n),r}function thrower(r){throw r}var inheritedDataKeys=function(){var r=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var t=0;t<r.length;++t)if(r[t]===e)return!0;return!1};if(es5.isES5){var t=Object.getOwnPropertyNames;return function(r){for(var n=[],o=Object.create(null);null!=r&&!e(r);){var i;try{i=t(r)}catch(r){return n}for(var a=0;a<i.length;++a){var s=i[a];if(!o[s]){o[s]=!0;var c=Object.getOwnPropertyDescriptor(r,s);null!=c&&null==c.get&&null==c.set&&n.push(s)}}r=es5.getPrototypeOf(r)}return n}}var n={}.hasOwnProperty;return function(t){if(e(t))return[];var o=[];r:for(var i in t)if(n.call(t,i))o.push(i);else{for(var a=0;a<r.length;++a)if(n.call(r[a],i))continue r;o.push(i)}return o}}(),thisAssignmentPattern=/this\\s*\\.\\s*\\S+\\s*=/;function isClass(r){try{if(\"function\"==typeof r){var e=es5.names(r.prototype),t=es5.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&\"constructor\"===e[0]),o=thisAssignmentPattern.test(r+\"\")&&es5.names(r).length>0;if(t||n||o)return!0}return!1}catch(r){return!1}}function toFastProperties(r){function e(){}e.prototype=r;for(var t=8;t--;)new e;return r}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(r){return rident.test(r)}function filledRange(r,e,t){for(var n=new Array(r),o=0;o<r;++o)n[o]=e+o+t;return n}function safeToString(r){try{return r+\"\"}catch(r){return\"[no string representation]\"}}function isError(r){return r instanceof Error||null!==r&&\"object\"==typeof r&&\"string\"==typeof r.message&&\"string\"==typeof r.name}function markAsOriginatingFromRejection(r){try{notEnumerableProp(r,\"isOperational\",!0)}catch(r){}}function originatesFromRejection(r){return null!=r&&(r instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===r.isOperational)}function canAttachTrace(r){return isError(r)&&es5.propertyIsWritable(r,\"stack\")}var ensureErrorObject=\"stack\"in new Error?function(r){return canAttachTrace(r)?r:new Error(safeToString(r))}:function(r){if(canAttachTrace(r))return r;try{throw new Error(safeToString(r))}catch(r){return r}};function classString(r){return{}.toString.call(r)}function copyDescriptors(r,e,t){for(var n=es5.names(r),o=0;o<n.length;++o){var i=n[o];if(t(i))try{es5.defineProperty(e,i,es5.getDescriptor(r,i))}catch(r){}}}var asArray=function(r){return es5.isArray(r)?r:null};if(\"undefined\"!=typeof Symbol&&Symbol.iterator){var ArrayFrom=\"function\"==typeof Array.from?function(r){return Array.from(r)}:function(r){for(var e,t=[],n=r[Symbol.iterator]();!(e=n.next()).done;)t.push(e.value);return t};asArray=function(r){return es5.isArray(r)?r:null!=r&&\"function\"==typeof r[Symbol.iterator]?ArrayFrom(r):null}}var isNode=\"undefined\"!=typeof process&&\"[object process]\"===classString(process).toLowerCase(),hasEnvVariables=\"undefined\"!=typeof process&&void 0!==process.env;function env(r){return hasEnvVariables?process.env[r]:void 0}function getNativePromise(){if(\"function\"==typeof Promise)try{var r=new Promise(function(){});if(\"[object Promise]\"==={}.toString.call(r))return Promise}catch(r){}}function domainBind(r,e){return r.bind(e)}var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:\"undefined\"!=typeof chrome&&chrome&&\"function\"==typeof chrome.loadTimes,isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&function(){var r=process.versions.node.split(\".\").map(Number);return 0===r[0]&&r[1]>10||r[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(r){ret.lastLineError=r}module.exports=ret;","node_modules/bluebird/js/release/es5.js":"var isES5=function(){\"use strict\";return void 0===this}();if(isES5)module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(e,r){var t=Object.getOwnPropertyDescriptor(e,r);return!(t&&!t.writable&&!t.set)}};else{var has={}.hasOwnProperty,str={}.toString,proto={}.constructor.prototype,ObjectKeys=function(e){var r=[];for(var t in e)has.call(e,t)&&r.push(t);return r},ObjectGetDescriptor=function(e,r){return{value:e[r]}},ObjectDefineProperty=function(e,r,t){return e[r]=t.value,e},ObjectFreeze=function(e){return e},ObjectGetPrototypeOf=function(e){try{return Object(e).constructor.prototype}catch(e){return proto}},ArrayIsArray=function(e){try{return\"[object Array]\"===str.call(e)}catch(e){return!1}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return!0}}}","node_modules/bluebird/js/release/async.js":"\"use strict\";var firstLineError;try{throw new Error}catch(e){firstLineError=e}var schedule=require(\"./schedule\"),Queue=require(\"./queue\"),util=require(\"./util\");function Async(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new Queue(16),this._normalQueue=new Queue(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=schedule}function AsyncInvokeLater(e,t,s){this._lateQueue.push(e,t,s),this._queueTick()}function AsyncInvoke(e,t,s){this._normalQueue.push(e,t,s),this._queueTick()}function AsyncSettlePromises(e){this._normalQueue._pushOne(e),this._queueTick()}Async.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},Async.prototype.hasCustomScheduler=function(){return this._customScheduler},Async.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},Async.prototype.disableTrampolineIfNecessary=function(){util.hasDevTools&&(this._trampolineEnabled=!1)},Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},Async.prototype.fatalError=function(e,t){t?(process.stderr.write(\"Fatal \"+(e instanceof Error?e.stack:e)+\"\\n\"),process.exit(2)):this.throwLater(e)},Async.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),\"undefined\"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\")}},util.hasDevTools?(Async.prototype.invokeLater=function(e,t,s){this._trampolineEnabled?AsyncInvokeLater.call(this,e,t,s):this._schedule(function(){setTimeout(function(){e.call(t,s)},100)})},Async.prototype.invoke=function(e,t,s){this._trampolineEnabled?AsyncInvoke.call(this,e,t,s):this._schedule(function(){e.call(t,s)})},Async.prototype.settlePromises=function(e){this._trampolineEnabled?AsyncSettlePromises.call(this,e):this._schedule(function(){e._settlePromises()})}):(Async.prototype.invokeLater=AsyncInvokeLater,Async.prototype.invoke=AsyncInvoke,Async.prototype.settlePromises=AsyncSettlePromises),Async.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if(\"function\"==typeof t){var s=e.shift(),i=e.shift();t.call(s,i)}else t._settlePromises()}},Async.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},Async.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},Async.prototype._reset=function(){this._isTickUsed=!1},module.exports=Async,module.exports.firstLineError=firstLineError;","node_modules/bluebird/js/release/errors.js":"\"use strict\";var _TypeError,_RangeError,es5=require(\"./es5\"),Objectfreeze=es5.freeze,util=require(\"./util\"),inherits=util.inherits,notEnumerableProp=util.notEnumerableProp;function subError(r,e){function o(t){if(!(this instanceof o))return new o(t);notEnumerableProp(this,\"message\",\"string\"==typeof t?t:e),notEnumerableProp(this,\"name\",r),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return inherits(o,Error),o}var Warning=subError(\"Warning\",\"warning\"),CancellationError=subError(\"CancellationError\",\"cancellation error\"),TimeoutError=subError(\"TimeoutError\",\"timeout error\"),AggregateError=subError(\"AggregateError\",\"aggregate error\");try{_TypeError=TypeError,_RangeError=RangeError}catch(r){_TypeError=subError(\"TypeError\",\"type error\"),_RangeError=subError(\"RangeError\",\"range error\")}for(var methods=\"join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse\".split(\" \"),i=0;i<methods.length;++i)\"function\"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);es5.defineProperty(AggregateError.prototype,\"length\",{value:0,configurable:!1,writable:!0,enumerable:!0}),AggregateError.prototype.isOperational=!0;var level=0;function OperationalError(r){if(!(this instanceof OperationalError))return new OperationalError(r);notEnumerableProp(this,\"name\",\"OperationalError\"),notEnumerableProp(this,\"message\",r),this.cause=r,this.isOperational=!0,r instanceof Error?(notEnumerableProp(this,\"message\",r.message),notEnumerableProp(this,\"stack\",r.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}AggregateError.prototype.toString=function(){var r=Array(4*level+1).join(\" \"),e=\"\\n\"+r+\"AggregateError of:\\n\";level++,r=Array(4*level+1).join(\" \");for(var o=0;o<this.length;++o){for(var t=this[o]===this?\"[Circular AggregateError]\":this[o]+\"\",a=t.split(\"\\n\"),n=0;n<a.length;++n)a[n]=r+a[n];e+=(t=a.join(\"\\n\"))+\"\\n\"}return level--,e},inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),es5.defineProperty(Error,\"__BluebirdErrorTypes__\",{value:errorTypes,writable:!1,enumerable:!1,configurable:!1})),module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning};","node_modules/bluebird/js/release/thenables.js":"\"use strict\";module.exports=function(t,r){var e=require(\"./util\"),n=e.errorObj,u=e.isObject;var c={}.hasOwnProperty;return function(l,o){if(u(l)){if(l instanceof t)return l;var a=function(t){try{return function(t){return t.then}(t)}catch(t){return n.e=t,n}}(l);if(a===n){o&&o._pushContext();var i=t.reject(a.e);return o&&o._popContext(),i}if(\"function\"==typeof a)return function(t){try{return c.call(t,\"_promise0\")}catch(t){return!1}}(l)?(i=new t(r),l._then(i._fulfill,i._reject,void 0,i,null),i):function(u,c,l){var o=new t(r),a=o;l&&l._pushContext(),o._captureStackTrace(),l&&l._popContext();var i=!0,f=e.tryCatch(c).call(u,function(t){o&&(o._resolveCallback(t),o=null)},function(t){o&&(o._rejectCallback(t,i,!0),o=null)});return i=!1,o&&f===n&&(o._rejectCallback(f.e,!0,!0),o=null),a}(l,a,o)}return l}};","node_modules/bluebird/js/release/promise_array.js":"\"use strict\";module.exports=function(e,t,s,i,r){var n=require(\"./util\");n.isArray;function l(s){var i=this._promise=new e(t);s instanceof e&&i._propagateFrom(s,3),i._setOnCancel(this),this._values=s,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return n.inherits(l,r),l.prototype.length=function(){return this._length},l.prototype.promise=function(){return this._promise},l.prototype._init=function t(r,l){var o=s(this._values,this._promise);if(o instanceof e){var a=(o=o._target())._bitField;if(this._values=o,0==(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(t,this._reject,void 0,this,l);if(0==(33554432&a))return 0!=(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(null!==(o=n.asArray(o)))0!==o.length?this._iterate(o):-5===l?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(l));else{var _=i(\"expecting an array or an iterable object but got \"+n.classString(o)).reason();this._promise._rejectCallback(_,!1)}},l.prototype._iterate=function(t){var i=this.getActualLength(t.length);this._length=i,this._values=this.shouldCopyValues()?new Array(i):this._values;for(var r=this._promise,n=!1,l=null,o=0;o<i;++o){var a=s(t[o],r);l=a instanceof e?(a=a._target())._bitField:null,n?null!==l&&a.suppressUnhandledRejections():null!==l?0==(50397184&l)?(a._proxy(this,o),this._values[o]=a):n=0!=(33554432&l)?this._promiseFulfilled(a._value(),o):0!=(16777216&l)?this._promiseRejected(a._reason(),o):this._promiseCancelled(o):n=this._promiseFulfilled(a,o)}n||r._setAsyncGuaranteed()},l.prototype._isResolved=function(){return null===this._values},l.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},l.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},l.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},l.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},l.prototype._promiseCancelled=function(){return this._cancel(),!0},l.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},l.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var s=0;s<t.length;++s)t[s]instanceof e&&t[s].cancel()}},l.prototype.shouldCopyValues=function(){return!0},l.prototype.getActualLength=function(e){return e},l};","node_modules/bluebird/js/release/context.js":"\"use strict\";module.exports=function(t){var e=!1,o=[];function p(){this._trace=new p.CapturedTrace(r())}function r(){var t=o.length-1;if(t>=0)return o[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},p.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},p.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},p.CapturedTrace=null,p.create=function(){if(e)return new p},p.deactivateLongStackTraces=function(){},p.activateLongStackTraces=function(){var o=t.prototype._pushContext,n=t.prototype._popContext,i=t._peekContext,u=t.prototype._peekContext,a=t.prototype._promiseCreated;p.deactivateLongStackTraces=function(){t.prototype._pushContext=o,t.prototype._popContext=n,t._peekContext=i,t.prototype._peekContext=u,t.prototype._promiseCreated=a,e=!1},e=!0,t.prototype._pushContext=p.prototype._pushContext,t.prototype._popContext=p.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},p};","node_modules/bluebird/js/release/debuggability.js":"\"use strict\";module.exports=function(t,n){var e,r,o,i=t._getDomain,a=t._async,c=require(\"./errors\").Warning,s=require(\"./util\"),l=s.canAttachTrace,u=/[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/,f=/\\((?:timers\\.js):\\d+:\\d+\\)/,d=/[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/,p=null,h=null,_=!1,v=!(0==s.env(\"BLUEBIRD_DEBUG\")||!s.env(\"BLUEBIRD_DEBUG\")&&\"development\"!==s.env(\"NODE_ENV\")),g=!(0==s.env(\"BLUEBIRD_WARNINGS\")||!v&&!s.env(\"BLUEBIRD_WARNINGS\")),m=!(0==s.env(\"BLUEBIRD_LONG_STACK_TRACES\")||!v&&!s.env(\"BLUEBIRD_LONG_STACK_TRACES\")),y=0!=s.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\")&&(g||!!s.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));t.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){H(\"rejectionHandled\",e,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),H(\"unhandledRejection\",r,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(t,n,e){return O(t,n,e||this)},t.onPossiblyUnhandledRejection=function(t){var n=i();r=\"function\"==typeof t?null===n?t:s.domainBind(n,t):void 0},t.onUnhandledRejectionHandled=function(t){var n=i();e=\"function\"==typeof t?null===n?t:s.domainBind(n,t):void 0};var k=function(){};t.longStackTraces=function(){if(a.haveItemsQueued()&&!X.longStackTraces)throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");if(!X.longStackTraces&&W()){var e=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace;X.longStackTraces=!0,k=function(){if(a.haveItemsQueued()&&!X.longStackTraces)throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),a.enableTrampoline(),X.longStackTraces=!1},t.prototype._captureStackTrace=x,t.prototype._attachExtraTrace=D,n.activateLongStackTraces(),a.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return X.longStackTraces&&W()};var E=function(){try{if(\"function\"==typeof CustomEvent){var t=new CustomEvent(\"CustomEvent\");return s.global.dispatchEvent(t),function(t,n){var e=new CustomEvent(t.toLowerCase(),{detail:n,cancelable:!0});return!s.global.dispatchEvent(e)}}if(\"function\"==typeof Event){t=new Event(\"CustomEvent\");return s.global.dispatchEvent(t),function(t,n){var e=new Event(t.toLowerCase(),{cancelable:!0});return e.detail=n,!s.global.dispatchEvent(e)}}return(t=document.createEvent(\"CustomEvent\")).initCustomEvent(\"testingtheevent\",!1,!0,{}),s.global.dispatchEvent(t),function(t,n){var e=document.createEvent(\"CustomEvent\");return e.initCustomEvent(t.toLowerCase(),!1,!0,n),!s.global.dispatchEvent(e)}}catch(t){}return function(){return!1}}(),b=s.isNode?function(){return process.emit.apply(process,arguments)}:s.global?function(t){var n=\"on\"+t.toLowerCase(),e=s.global[n];return!!e&&(e.apply(s.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(t,n){return{promise:n}}var w={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(t,n,e){return{promise:n,child:e}},warning:function(t,n){return{warning:n}},unhandledRejection:function(t,n,e){return{reason:n,promise:e}},rejectionHandled:T},C=function(t){var n=!1;try{n=b.apply(null,arguments)}catch(t){a.throwLater(t),n=!0}var e=!1;try{e=E(t,w[t].apply(null,arguments))}catch(t){a.throwLater(t),e=!0}return e||n};function R(){return!1}function S(t,n,e){var r=this;try{t(n,e,function(t){if(\"function\"!=typeof t)throw new TypeError(\"onCancel must be a function, got: \"+s.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function j(t){if(!this._isCancellable())return this;var n=this._onCancel();void 0!==n?s.isArray(n)?n.push(t):this._setOnCancel([n,t]):this._setOnCancel(t)}function U(){return this._onCancelField}function F(t){this._onCancelField=t}function N(){this._cancellationParent=void 0,this._onCancelField=void 0}function L(t,n){if(0!=(1&n)){this._cancellationParent=t;var e=t._branchesRemainingToCancel;void 0===e&&(e=0),t._branchesRemainingToCancel=e+1}0!=(2&n)&&t._isBound()&&this._setBoundTo(t._boundTo)}t.config=function(n){if(\"longStackTraces\"in(n=Object(n))&&(n.longStackTraces?t.longStackTraces():!n.longStackTraces&&t.hasLongStackTraces()&&k()),\"warnings\"in n){var e=n.warnings;X.warnings=!!e,y=X.warnings,s.isObject(e)&&\"wForgottenReturn\"in e&&(y=!!e.wForgottenReturn)}if(\"cancellation\"in n&&n.cancellation&&!X.cancellation){if(a.haveItemsQueued())throw new Error(\"cannot enable cancellation after promises are in use\");t.prototype._clearCancellationData=N,t.prototype._propagateFrom=L,t.prototype._onCancel=U,t.prototype._setOnCancel=F,t.prototype._attachCancellationCallback=j,t.prototype._execute=S,B=L,X.cancellation=!0}return\"monitoring\"in n&&(n.monitoring&&!X.monitoring?(X.monitoring=!0,t.prototype._fireEvent=C):!n.monitoring&&X.monitoring&&(X.monitoring=!1,t.prototype._fireEvent=R)),t},t.prototype._fireEvent=R,t.prototype._execute=function(t,n,e){try{t(n,e)}catch(t){return t}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(t){},t.prototype._attachCancellationCallback=function(t){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(t,n){};var B=function(t,n){0!=(2&n)&&t._isBound()&&this._setBoundTo(t._boundTo)};function I(){var n=this._boundTo;return void 0!==n&&n instanceof t?n.isFulfilled()?n.value():void 0:n}function x(){this._trace=new V(this._peekContext())}function D(t,n){if(l(t)){var e=this._trace;if(void 0!==e&&n&&(e=e._parent),void 0!==e)e.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=G(t);s.notEnumerableProp(t,\"stack\",r.message+\"\\n\"+r.stack.join(\"\\n\")),s.notEnumerableProp(t,\"__stackCleaned__\",!0)}}}function O(n,e,r){if(X.warnings){var o,i=new c(n);if(e)r._attachExtraTrace(i);else if(X.longStackTraces&&(o=t._peekContext()))o.attachExtraTrace(i);else{var a=G(i);i.stack=a.message+\"\\n\"+a.stack.join(\"\\n\")}C(\"warning\",i)||P(i,\"\",!0)}}function A(t){for(var n=[],e=0;e<t.length;++e){var r=t[e],o=\"    (No stack trace)\"===r||p.test(r),i=o&&$(r);o&&!i&&(_&&\" \"!==r.charAt(0)&&(r=\"    \"+r),n.push(r))}return n}function G(t){var n=t.stack,e=t.toString();return n=\"string\"==typeof n&&n.length>0?function(t){for(var n=t.stack.replace(/\\s+$/g,\"\").split(\"\\n\"),e=0;e<n.length;++e){var r=n[e];if(\"    (No stack trace)\"===r||p.test(r))break}return e>0&&\"SyntaxError\"!=t.name&&(n=n.slice(e)),n}(t):[\"    (No stack trace)\"],{message:e,stack:\"SyntaxError\"==t.name?n:A(n)}}function P(t,n,e){if(\"undefined\"!=typeof console){var r;if(s.isObject(t)){var i=t.stack;r=n+h(i,t)}else r=n+String(t);\"function\"==typeof o?o(r,e):\"function\"!=typeof console.log&&\"object\"!=typeof console.log||console.log(r)}}function H(t,n,e,r){var o=!1;try{\"function\"==typeof n&&(o=!0,\"rejectionHandled\"===t?n(r):n(e,r))}catch(t){a.throwLater(t)}\"unhandledRejection\"===t?C(t,e,r)||o||P(e,\"Unhandled rejection \"):C(t,r)}function q(t){var n;if(\"function\"==typeof t)n=\"[function \"+(t.name||\"anonymous\")+\"]\";else{n=t&&\"function\"==typeof t.toString?t.toString():s.toString(t);if(/\\[object [a-zA-Z0-9$_]+\\]/.test(n))try{n=JSON.stringify(t)}catch(t){}0===n.length&&(n=\"(empty array)\")}return\"(<\"+function(t){if(t.length<41)return t;return t.substr(0,38)+\"...\"}(n)+\">, no stack trace)\"}function W(){return\"function\"==typeof K}var $=function(){return!1},M=/[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;function Q(t){var n=t.match(M);if(n)return{fileName:n[1],line:parseInt(n[2],10)}}function V(t){this._parent=t,this._promisesCreated=0;var n=this._length=1+(void 0===t?0:t._length);K(this,V),n>32&&this.uncycle()}s.inherits(V,Error),n.CapturedTrace=V,V.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var n=[],e={},r=0,o=this;void 0!==o;++r)n.push(o),o=o._parent;for(r=(t=this._length=r)-1;r>=0;--r){var i=n[r].stack;void 0===e[i]&&(e[i]=r)}for(r=0;r<t;++r){var a=e[n[r].stack];if(void 0!==a&&a!==r){a>0&&(n[a-1]._parent=void 0,n[a-1]._length=1),n[r]._parent=void 0,n[r]._length=1;var c=r>0?n[r-1]:this;a<t-1?(c._parent=n[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var s=c._length+1,l=r-2;l>=0;--l)n[l]._length=s,s++;return}}}},V.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var n=G(t),e=n.message,r=[n.stack],o=this;void 0!==o;)r.push(A(o.stack.split(\"\\n\"))),o=o._parent;!function(t){for(var n=t[0],e=1;e<t.length;++e){for(var r=t[e],o=n.length-1,i=n[o],a=-1,c=r.length-1;c>=0;--c)if(r[c]===i){a=c;break}for(c=a;c>=0;--c){var s=r[c];if(n[o]!==s)break;n.pop(),o--}n=r}}(r),function(t){for(var n=0;n<t.length;++n)(0===t[n].length||n+1<t.length&&t[n][0]===t[n+1][0])&&(t.splice(n,1),n--)}(r),s.notEnumerableProp(t,\"stack\",function(t,n){for(var e=0;e<n.length-1;++e)n[e].push(\"From previous event:\"),n[e]=n[e].join(\"\\n\");return e<n.length&&(n[e]=n[e].join(\"\\n\")),t+\"\\n\"+n.join(\"\\n\")}(e,r)),s.notEnumerableProp(t,\"__stackCleaned__\",!0)}};var K=function(){var t=/^\\s*at\\s*/,n=function(t,n){return\"string\"==typeof t?t:void 0!==n.name&&void 0!==n.message?n.toString():q(n)};if(\"number\"==typeof Error.stackTraceLimit&&\"function\"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,p=t,h=n;var e=Error.captureStackTrace;return $=function(t){return u.test(t)},function(t,n){Error.stackTraceLimit+=6,e(t,n),Error.stackTraceLimit-=6}}var r,o=new Error;if(\"string\"==typeof o.stack&&o.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\")>=0)return p=/@/,h=n,_=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r=\"stack\"in t}return\"stack\"in o||!r||\"number\"!=typeof Error.stackTraceLimit?(h=function(t,n){return\"string\"==typeof t?t:\"object\"!=typeof n&&\"function\"!=typeof n||void 0===n.name||void 0===n.message?q(n):n.toString()},null):(p=t,h=n,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(n){t.stack=n.stack}Error.stackTraceLimit-=6})}();\"undefined\"!=typeof console&&void 0!==console.warn&&(o=function(t){console.warn(t)},s.isNode&&process.stderr.isTTY?o=function(t,n){var e=n?\"\u001b[33m\":\"\u001b[31m\";console.warn(e+t+\"\u001b[0m\\n\")}:s.isNode||\"string\"!=typeof(new Error).stack||(o=function(t,n){console.warn(\"%c\"+t,n?\"color: darkorange\":\"color: red\")}));var X={warnings:g,longStackTraces:!1,cancellation:!1,monitoring:!1};return m&&t.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},monitoring:function(){return X.monitoring},propagateFromFunction:function(){return B},boundValueFunction:function(){return I},checkForgottenReturns:function(t,n,e,r,o){if(void 0===t&&null!==n&&y){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&r._bitField))return;e&&(e+=\" \");var i=\"\",a=\"\";if(n._trace){for(var c=n._trace.stack.split(\"\\n\"),s=A(c),l=s.length-1;l>=0;--l){var u=s[l];if(!f.test(u)){var p=u.match(d);p&&(i=\"at \"+p[1]+\":\"+p[2]+\":\"+p[3]+\" \");break}}if(s.length>0){var h=s[0];for(l=0;l<c.length;++l)if(c[l]===h){l>0&&(a=\"\\n\"+c[l-1]);break}}}var _=\"a promise was created in a \"+e+\"handler \"+i+\"but was not returned from it, see http://goo.gl/rRqMUw\"+a;r._warn(_,!0,n)}},setBounds:function(t,n){if(W()){for(var e,r,o=t.stack.split(\"\\n\"),i=n.stack.split(\"\\n\"),a=-1,c=-1,s=0;s<o.length;++s)if(l=Q(o[s])){e=l.fileName,a=l.line;break}for(s=0;s<i.length;++s){var l;if(l=Q(i[s])){r=l.fileName,c=l.line;break}}a<0||c<0||!e||!r||e!==r||a>=c||($=function(t){if(u.test(t))return!0;var n=Q(t);return!!(n&&n.fileName===e&&a<=n.line&&n.line<=c)})}},warn:O,deprecated:function(t,n){var e=t+\" is deprecated and will be removed in a future version.\";return n&&(e+=\" Use \"+n+\" instead.\"),O(e)},CapturedTrace:V,fireDomEvent:E,fireGlobalEvent:b}};","node_modules/bluebird/js/release/finally.js":"\"use strict\";module.exports=function(t,e,n){var r=require(\"./util\"),i=t.CancellationError,a=r.errorObj,l=require(\"./catch_filter\")(n);function o(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function s(t){this.finallyHandler=t}function c(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function h(){return p.call(this,this.promise._target()._settledValue())}function u(t){if(!c(this,t))return a.e=t,a}function p(r){var l=this.promise,o=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?o.call(l._boundValue()):o.call(l._boundValue(),r);if(p===n)return p;if(void 0!==p){l._setReturnedNonUndefined();var f=e(p,l);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var d=new i(\"late cancellation observer\");return l._attachExtraTrace(d),a.e=d,a}f.isPending()&&f._attachCancellationCallback(new s(this))}return f._then(h,u,void 0,this,void 0)}}}return l.isRejected()?(c(this),a.e=r,a):(c(this),r)}return o.prototype.isFinallyHandler=function(){return 0===this.type},s.prototype._resultCancelled=function(){c(this.finallyHandler)},t.prototype._passThrough=function(t,e,n,r){return\"function\"!=typeof t?this.then():this._then(n,r,void 0,new o(this,e,t),void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThrough(t,0,p,p)},t.prototype.tap=function(t){return this._passThrough(t,1,p)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,p);var i,a=new Array(n-1),o=0;for(i=0;i<n-1;++i){var s=arguments[i];if(!r.isObject(s))return t.reject(new TypeError(\"tapCatch statement predicate: expecting an object but got \"+r.classString(s)));a[o++]=s}a.length=o;var c=arguments[i];return this._passThrough(l(a,c,this),1,void 0,p)},o};","node_modules/bluebird/js/release/catch_filter.js":"\"use strict\";module.exports=function(r){var e=require(\"./util\"),t=require(\"./es5\").keys,n=e.tryCatch,u=e.errorObj;return function(i,o,l){return function(f){var a=l._boundValue();r:for(var c=0;c<i.length;++c){var s=i[c];if(s===Error||null!=s&&s.prototype instanceof Error){if(f instanceof s)return n(o).call(a,f)}else if(\"function\"==typeof s){var v=n(s).call(a,f);if(v===u)return v;if(v)return n(o).call(a,f)}else if(e.isObject(f)){for(var p=t(s),y=0;y<p.length;++y){var b=p[y];if(s[b]!=f[b])continue r}return n(o).call(a,f)}}return r}}};","node_modules/bluebird/js/release/nodeback.js":"\"use strict\";var util=require(\"./util\"),maybeWrapAsError=util.maybeWrapAsError,errors=require(\"./errors\"),OperationalError=errors.OperationalError,es5=require(\"./es5\");function isUntypedError(r){return r instanceof Error&&es5.getPrototypeOf(r)===Error.prototype}var rErrorKey=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(r){var e;if(isUntypedError(r)){(e=new OperationalError(r)).name=r.name,e.message=r.message,e.stack=r.stack;for(var a=es5.keys(r),o=0;o<a.length;++o){var t=a[o];rErrorKey.test(t)||(e[t]=r[t])}return e}return util.markAsOriginatingFromRejection(r),r}function nodebackForPromise(r,e){return function(a,o){if(null!==r){if(a){var t=wrapAsOperationalError(maybeWrapAsError(a));r._attachExtraTrace(t),r._reject(t)}else if(e){for(var n=arguments.length,s=new Array(Math.max(n-1,0)),i=1;i<n;++i)s[i-1]=arguments[i];r._fulfill(s)}else r._fulfill(o);r=null}}}module.exports=nodebackForPromise;","node_modules/bluebird/js/release/method.js":"\"use strict\";module.exports=function(t,e,r,n,o){var c=require(\"./util\"),a=c.tryCatch;t.method=function(r){if(\"function\"!=typeof r)throw new t.TypeError(\"expecting a function but got \"+c.classString(r));return function(){var n=new t(e);n._captureStackTrace(),n._pushContext();var c=a(r).apply(this,arguments),u=n._popContext();return o.checkForgottenReturns(c,u,\"Promise.method\",n),n._resolveFromSyncValue(c),n}},t.attempt=t.try=function(r){if(\"function\"!=typeof r)return n(\"expecting a function but got \"+c.classString(r));var u,i=new t(e);if(i._captureStackTrace(),i._pushContext(),arguments.length>1){o.deprecated(\"calling Promise.try with more than 1 argument\");var l=arguments[1],s=arguments[2];u=c.isArray(l)?a(r).apply(s,l):a(r).call(s,l)}else u=a(r)();var p=i._popContext();return o.checkForgottenReturns(u,p,\"Promise.try\",i),i._resolveFromSyncValue(u),i},t.prototype._resolveFromSyncValue=function(t){t===c.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}};","node_modules/bluebird/js/release/bind.js":"\"use strict\";module.exports=function(t,e,i,o){var n=!1,r=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},u=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},d=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){n||(n=!0,t.prototype._propagateFrom=o.propagateFromFunction(),t.prototype._boundValue=o.boundValueFunction());var _=i(r),a=new t(e);a._propagateFrom(this,1);var c=this._target();if(a._setBoundTo(_),_ instanceof t){var p={promiseRejectionQueued:!1,promise:a,target:c,bindingPromise:_};c._then(e,s,void 0,a,p),_._then(u,d,void 0,a,p),a._setOnCancel(_)}else a._resolveCallback(c);return a},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,i){return t.resolve(i).bind(e)}};","node_modules/bluebird/js/release/cancel.js":"\"use strict\";module.exports=function(e,n,t,i){var l=require(\"./util\"),a=l.tryCatch,c=l.errorObj,o=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn(\"cancellation is disabled\");for(var e=this,n=e;e._isCancellable();){if(!e._cancelBy(n)){n._isFollowing()?n._followee().cancel():n._cancelBranched();break}var t=e._cancellationParent;if(null==t||!t._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),n=e,e=t}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),o.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,n){if(l.isArray(e))for(var t=0;t<e.length;++t)this._doInvokeOnCancel(e[t],n);else if(void 0!==e)if(\"function\"==typeof e){if(!n){var i=a(e).call(this._boundValue());i===c&&(this._attachExtraTrace(i.e),o.throwLater(i.e))}}else e._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),o.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}};","node_modules/bluebird/js/release/direct_resolve.js":"\"use strict\";module.exports=function(t){function n(){return this.value}function e(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(e){return e instanceof t&&e.suppressUnhandledRejections(),this._then(n,void 0,void 0,{value:e},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(e,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,e,void 0,{reason:t},void 0);var n=arguments[1];return this.caught(t,function(){throw n})},t.prototype.catchReturn=function(e){if(arguments.length<=1)return e instanceof t&&e.suppressUnhandledRejections(),this._then(void 0,n,void 0,{value:e},void 0);var o=arguments[1];o instanceof t&&o.suppressUnhandledRejections();return this.caught(e,function(){return o})}};","node_modules/bluebird/js/release/synchronous_inspection.js":"\"use strict\";module.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var i=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n\");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n\");return this._settledValue()},o=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},r=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},l=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return l.call(this._target())},t.prototype.isRejected=function(){return r.call(this._target())},t.prototype.isFulfilled=function(){return o.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return i.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e};","node_modules/bluebird/js/release/join.js":"\"use strict\";module.exports=function(e,n,r,t,o,i){var a,s=require(\"./util\"),c=s.canEvaluate,l=s.tryCatch,u=s.errorObj;if(c){for(var p=function(e){return new Function(\"value\",\"holder\",\"                             \\n            'use strict';                                                    \\n            holder.pIndex = value;                                           \\n            holder.checkFulfillment(this);                                   \\n            \".replace(/Index/g,e))},h=function(e){return new Function(\"promise\",\"holder\",\"                           \\n            'use strict';                                                    \\n            holder.pIndex = promise;                                         \\n            \".replace(/Index/g,e))},f=function(n){for(var r=new Array(n),t=0;t<r.length;++t)r[t]=\"this.p\"+(t+1);var i=r.join(\" = \")+\" = null;\",a=\"var promise;\\n\"+r.map(function(e){return\"                                                         \\n                promise = \"+e+\";                                      \\n                if (promise instanceof Promise) {                            \\n                    promise.cancel();                                        \\n                }                                                            \\n            \"}).join(\"\\n\"),s=r.join(\", \"),c=\"Holder$\"+n,p=\"return function(tryCatch, errorObj, Promise, async) {    \\n            'use strict';                                                    \\n            function [TheName](fn) {                                         \\n                [TheProperties]                                              \\n                this.fn = fn;                                                \\n                this.asyncNeeded = true;                                     \\n                this.now = 0;                                                \\n            }                                                                \\n                                                                             \\n            [TheName].prototype._callFunction = function(promise) {          \\n                promise._pushContext();                                      \\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n                promise._popContext();                                       \\n                if (ret === errorObj) {                                      \\n                    promise._rejectCallback(ret.e, false);                   \\n                } else {                                                     \\n                    promise._resolveCallback(ret);                           \\n                }                                                            \\n            };                                                               \\n                                                                             \\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n                var now = ++this.now;                                        \\n                if (now === [TheTotal]) {                                    \\n                    if (this.asyncNeeded) {                                  \\n                        async.invoke(this._callFunction, this, promise);     \\n                    } else {                                                 \\n                        this._callFunction(promise);                         \\n                    }                                                        \\n                                                                             \\n                }                                                            \\n            };                                                               \\n                                                                             \\n            [TheName].prototype._resultCancelled = function() {              \\n                [CancellationCode]                                           \\n            };                                                               \\n                                                                             \\n            return [TheName];                                                \\n        }(tryCatch, errorObj, Promise, async);                               \\n        \";return p=p.replace(/\\[TheName\\]/g,c).replace(/\\[TheTotal\\]/g,n).replace(/\\[ThePassedArguments\\]/g,s).replace(/\\[TheProperties\\]/g,i).replace(/\\[CancellationCode\\]/g,a),new Function(\"tryCatch\",\"errorObj\",\"Promise\",\"async\",p)(l,u,e,o)},d=[],m=[],v=[],y=0;y<8;++y)d.push(f(y+1)),m.push(p(y+1)),v.push(h(y+1));a=function(e){this._reject(e)}}e.join=function(){var o,l=arguments.length-1;if(l>0&&\"function\"==typeof arguments[l]&&(o=arguments[l],l<=8&&c)){(j=new e(t))._captureStackTrace();for(var u=new(0,d[l-1])(o),p=m,h=0;h<l;++h){var f=r(arguments[h],j);if(f instanceof e){var y=(f=f._target())._bitField;0==(50397184&y)?(f._then(p[h],a,void 0,j,u),v[h](f,u),u.asyncNeeded=!1):0!=(33554432&y)?p[h].call(j,f._value(),u):0!=(16777216&y)?j._reject(f._reason()):j._cancel()}else p[h].call(j,f,u)}if(!j._isFateSealed()){if(u.asyncNeeded){var _=i();null!==_&&(u.fn=s.domainBind(_,u.fn))}j._setAsyncGuaranteed(),j._setOnCancel(u)}return j}for(var C=arguments.length,T=new Array(C),g=0;g<C;++g)T[g]=arguments[g];o&&T.pop();var j=new n(T).promise();return void 0!==o?j.spread(o):j}};","node_modules/bluebird/js/release/map.js":"\"use strict\";module.exports=function(t,e,i,r,n,s){var o=t._getDomain,u=require(\"./util\"),l=u.tryCatch,c=u.errorObj,h=t._async;function a(t,e,i,r){this.constructor$(t),this._promise._captureStackTrace();var s=o();this._callback=null===s?e:u.domainBind(s,e),this._preservedValues=r===n?new Array(this.length()):null,this._limit=i,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function _(e,r,n,s){if(\"function\"!=typeof r)return i(\"expecting a function but got \"+u.classString(r));var o=0;if(void 0!==n){if(\"object\"!=typeof n||null===n)return t.reject(new TypeError(\"options argument must be an object but it is \"+u.classString(n)));if(\"number\"!=typeof n.concurrency)return t.reject(new TypeError(\"'concurrency' must be a number but it is \"+u.classString(n.concurrency)));o=n.concurrency}return new a(e,r,o=\"number\"==typeof o&&isFinite(o)&&o>=1?o:0,s).promise()}u.inherits(a,e),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(e,i){var n=this._values,o=this.length(),u=this._preservedValues,h=this._limit;if(i<0){if(n[i=-1*i-1]=e,h>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(h>=1&&this._inFlight>=h)return n[i]=e,this._queue.push(i),!1;null!==u&&(u[i]=e);var a=this._promise,_=this._callback,p=a._boundValue();a._pushContext();var f=l(_).call(p,e,i,o),v=a._popContext();if(s.checkForgottenReturns(f,v,null!==u?\"Promise.filter\":\"Promise.map\",a),f===c)return this._reject(f.e),!0;var y=r(f,this._promise);if(y instanceof t){var m=(y=y._target())._bitField;if(0==(50397184&m))return h>=1&&this._inFlight++,n[i]=y,y._proxy(this,-1*(i+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(y._reason()),!0):(this._cancel(),!0);f=y._value()}n[i]=f}return++this._totalResolved>=o&&(null!==u?this._filter(n,u):this._resolve(n),!0)},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,i=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(i[r],r)}},a.prototype._filter=function(t,e){for(var i=e.length,r=new Array(i),n=0,s=0;s<i;++s)t[s]&&(r[n++]=e[s]);r.length=n,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return _(this,t,e,null)},t.map=function(t,e,i,r){return _(t,e,i,r)}};","node_modules/bluebird/js/release/call_get.js":"\"use strict\";var cr=Object.create;if(cr){var callerCache=cr(null),getterCache=cr(null);callerCache[\" size\"]=getterCache[\" size\"]=0}module.exports=function(e){var t,n,r=require(\"./util\"),i=r.canEvaluate,o=r.isIdentifier,u=function(e){return new Function(\"ensureMethod\",\"                                    \\n        return function(obj) {                                               \\n            'use strict'                                                     \\n            var len = this.length;                                           \\n            ensureMethod(obj, 'methodName');                                 \\n            switch(len) {                                                    \\n                case 1: return obj.methodName(this[0]);                      \\n                case 2: return obj.methodName(this[0], this[1]);             \\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n                case 0: return obj.methodName();                             \\n                default:                                                     \\n                    return obj.methodName.apply(obj, this);                  \\n            }                                                                \\n        };                                                                   \\n        \".replace(/methodName/g,e))(h)},a=function(e){return new Function(\"obj\",\"                                             \\n        'use strict';                                                        \\n        return obj.propertyName;                                             \\n        \".replace(\"propertyName\",e))},c=function(e,t,n){var r=n[e];if(\"function\"!=typeof r){if(!o(e))return null;if(r=t(e),n[e]=r,n[\" size\"]++,n[\" size\"]>512){for(var i=Object.keys(n),u=0;u<256;++u)delete n[i[u]];n[\" size\"]=i.length-256}}return r};function h(t,n){var i;if(null!=t&&(i=t[n]),\"function\"!=typeof i){var o=\"Object \"+r.classString(t)+\" has no method '\"+r.toString(n)+\"'\";throw new e.TypeError(o)}return i}function s(e){return h(e,this.pop()).apply(e,this)}function l(e){return e[this]}function f(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t=function(e){return c(e,u,callerCache)},n=function(e){return c(e,a,getterCache)},e.prototype.call=function(e){for(var n=arguments.length,r=new Array(Math.max(n-1,0)),o=1;o<n;++o)r[o-1]=arguments[o];if(i){var u=t(e);if(null!==u)return this._then(u,void 0,void 0,r,void 0)}return r.push(e),this._then(s,void 0,void 0,r,void 0)},e.prototype.get=function(e){var t;if(\"number\"==typeof e)t=f;else if(i){var r=n(e);t=null!==r?r:l}else t=l;return this._then(t,void 0,void 0,e,void 0)}};","node_modules/bluebird/js/release/using.js":"\"use strict\";module.exports=function(t,e,i,r,s,n){var o=require(\"./util\"),u=require(\"./errors\").TypeError,p=require(\"./util\").inherits,l=o.errorObj,a=o.tryCatch,c={};function f(t){setTimeout(function(){throw t},0)}function h(e,r){var n=0,o=e.length,u=new t(s);return function s(){if(n>=o)return u._fulfill();var p=function(t){var e=i(t);return e!==t&&\"function\"==typeof t._isDisposable&&\"function\"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(e[n++]);if(p instanceof t&&p._isDisposable()){try{p=i(p._getDisposer().tryDispose(r),e.promise)}catch(t){return f(t)}if(p instanceof t)return p._then(s,f,null,null,null)}s()}(),u}function _(t,e,i){this._data=t,this._promise=e,this._context=i}function v(t,e,i){this.constructor$(t,e,i)}function d(t){return _.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function y(t){this.length=t,this.promise=null,this[t-1]=null}_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():c},_.prototype.tryDispose=function(t){var e=this.resource(),i=this._context;void 0!==i&&i._pushContext();var r=e!==c?this.doDispose(e,t):null;return void 0!==i&&i._popContext(),this._promise._unsetDisposable(),this._data=null,r},_.isDisposer=function(t){return null!=t&&\"function\"==typeof t.resource&&\"function\"==typeof t.tryDispose},p(v,_),v.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},y.prototype._resultCancelled=function(){for(var e=this.length,i=0;i<e;++i){var r=this[i];r instanceof t&&r.cancel()}},t.using=function(){var r=arguments.length;if(r<2)return e(\"you must pass at least 2 arguments to Promise.using\");var s,u=arguments[r-1];if(\"function\"!=typeof u)return e(\"expecting a function but got \"+o.classString(u));var p=!0;2===r&&Array.isArray(arguments[0])?(r=(s=arguments[0]).length,p=!1):(s=arguments,r--);for(var c=new y(r),f=0;f<r;++f){var v=s[f];if(_.isDisposer(v)){var D=v;(v=v.promise())._setDisposable(D)}else{var g=i(v);g instanceof t&&(v=g._then(d,null,null,{resources:c,index:f},void 0))}c[f]=v}var m=new Array(c.length);for(f=0;f<m.length;++f)m[f]=t.resolve(c[f]).reflect();var b=t.all(m).then(function(t){for(var e=0;e<t.length;++e){var i=t[e];if(i.isRejected())return l.e=i.error(),l;if(!i.isFulfilled())return void b.cancel();t[e]=i.value()}x._pushContext(),u=a(u);var r=p?u.apply(void 0,t):u(t),s=x._popContext();return n.checkForgottenReturns(r,s,\"Promise.using\",x),r}),x=b.lastly(function(){var e=new t.PromiseInspection(b);return h(c,e)});return c.promise=x,x._setOnCancel(c),x},t.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if(\"function\"==typeof t)return new v(t,this,r());throw new u}};","node_modules/bluebird/js/release/timers.js":"\"use strict\";module.exports=function(t,n,e){var i=require(\"./util\"),o=t.TimeoutError;function r(t){this.handle=t}r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return c(+this).thenReturn(t)},c=t.delay=function(i,o){var c,u;return void 0!==o?(c=t.resolve(o)._then(a,null,null,i,void 0),e.cancellation()&&o instanceof t&&c._setOnCancel(o)):(c=new t(n),u=setTimeout(function(){c._fulfill()},+i),e.cancellation()&&c._setOnCancel(new r(u)),c._captureStackTrace()),c._setAsyncGuaranteed(),c};t.prototype.delay=function(t){return c(t,this)};function u(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}t.prototype.timeout=function(t,n){var a,c;t=+t;var s=new r(setTimeout(function(){a.isPending()&&function(t,n,e){var r;r=\"string\"!=typeof n?n instanceof Error?n:new o(\"operation timed out\"):new o(n),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=e&&e.cancel()}(a,n,c)},t));return e.cancellation()?(c=this.then(),(a=c._then(u,l,void 0,s,void 0))._setOnCancel(s)):a=this._then(u,l,void 0,s,void 0),a}};","node_modules/bluebird/js/release/generators.js":"\"use strict\";module.exports=function(e,t,i,n,r,o){var s=require(\"./errors\").TypeError,l=require(\"./util\"),a=l.errorObj,c=l.tryCatch,_=[];function u(t,n,r,s){if(o.cancellation()){var l=new e(i),a=this._finallyPromise=new e(i);this._promise=l.lastly(function(){return a}),l._captureStackTrace(),l._setOnCancel(this)}else{(this._promise=new e(i))._captureStackTrace()}this._stack=s,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers=\"function\"==typeof r?[r].concat(_):_,this._yieldedPromise=null,this._cancellationPhase=!1}l.inherits(u,r),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=c(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var i=new e.CancellationError(\"generator .return() sentinel\");e.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),t=c(this._generator.throw).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},u.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=c(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=c(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(t){var i=this._promise;if(t===a)return this._cleanup(),this._cancellationPhase?i.cancel():i._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?i.cancel():i._resolveCallback(r);var o=n(r,this._promise);if(o instanceof e||null!==(o=function(t,i,r){for(var o=0;o<i.length;++o){r._pushContext();var s=c(i[o])(t);if(r._popContext(),s===a){r._pushContext();var l=e.reject(a.e);return r._popContext(),l}var _=n(s,r);if(_ instanceof e)return _}return null}(o,this._yieldHandlers,this._promise))){var l=(o=o._target())._bitField;0==(50397184&l)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&l)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&l)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s(\"A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n\".replace(\"%s\",String(r))+\"From coroutine:\\n\"+this._stack.split(\"\\n\").slice(1,-7).join(\"\\n\")))},e.coroutine=function(e,t){if(\"function\"!=typeof e)throw new s(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");var i=Object(t).yieldHandler,n=u,r=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new n(void 0,void 0,i,r),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(e){if(\"function\"!=typeof e)throw new s(\"expecting a function but got \"+l.classString(e));_.push(e)},e.spawn=function(i){if(o.deprecated(\"Promise.spawn()\",\"Promise.coroutine()\"),\"function\"!=typeof i)return t(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");var n=new u(i,this),r=n.promise();return n._run(e.spawn),r}};","node_modules/bluebird/js/release/nodeify.js":"\"use strict\";module.exports=function(t){var r=require(\"./util\"),a=t._async,e=r.tryCatch,o=r.errorObj;function n(t,n){if(!r.isArray(t))return i.call(this,t,n);var l=e(n).apply(this._boundValue(),[null].concat(t));l===o&&a.throwLater(l.e)}function i(t,r){var n=this._boundValue(),i=void 0===t?e(r).call(n,null):e(r).call(n,null,t);i===o&&a.throwLater(i.e)}function l(t,r){if(!t){var n=new Error(t+\"\");n.cause=t,t=n}var i=e(r).call(this._boundValue(),t);i===o&&a.throwLater(i.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,r){if(\"function\"==typeof t){var a=i;void 0!==r&&Object(r).spread&&(a=n),this._then(a,l,void 0,this,t)}return this}};","node_modules/bluebird/js/release/promisify.js":"\"use strict\";module.exports=function(r,e){var t={},n=require(\"./util\"),a=require(\"./nodeback\"),i=n.withAppended,o=n.maybeWrapAsError,c=n.canEvaluate,s=require(\"./errors\").TypeError,u={__isPromisified__:!0},f=new RegExp(\"^(?:\"+[\"arity\",\"length\",\"name\",\"arguments\",\"caller\",\"callee\",\"prototype\",\"__isPromisified__\"].join(\"|\")+\")$\"),l=function(r){return n.isIdentifier(r)&&\"_\"!==r.charAt(0)&&\"constructor\"!==r};function p(r){return!f.test(r)}function m(r){try{return!0===r.__isPromisified__}catch(r){return!1}}function h(r,e,t){var a=n.getDataPropertyOrDefault(r,e+t,u);return!!a&&m(a)}function g(r,e,t,a){for(var i=n.inheritedDataKeys(r),o=[],c=0;c<i.length;++c){var u=i[c],f=r[u],p=a===l||l(u,f,r);\"function\"!=typeof f||m(f)||h(r,u,e)||!a(u,f,r,p)||o.push(u,f)}return function(r,e,t){for(var n=0;n<r.length;n+=2){var a=r[n];if(t.test(a))for(var i=a.replace(t,\"\"),o=0;o<r.length;o+=2)if(r[o]===i)throw new s(\"Cannot promisify an API that has normal methods with '%s'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n\".replace(\"%s\",e))}}(o,e,t),o}var v=function(r){return r.replace(/([$])/,\"\\\\$\")},d=function(r){return n.filledRange(r,\"_arg\",\"\")};var b=c?function(c,s,u,f,l,p){var m=Math.max(0,function(r){return\"number\"==typeof r.length?Math.max(Math.min(r.length,1024),0):0}(f)-1),h=function(r){for(var e=[r],t=Math.max(0,r-1-3),n=r-1;n>=t;--n)e.push(n);for(n=r+1;n<=3;++n)e.push(n);return e}(m),g=\"string\"==typeof c||s===t;var v=\"string\"==typeof c?\"this != null ? this['\"+c+\"'] : fn\":\"fn\",b=\"'use strict';                                                \\n        var ret = function (Parameters) {                                    \\n            'use strict';                                                    \\n            var len = arguments.length;                                      \\n            var promise = new Promise(INTERNAL);                             \\n            promise._captureStackTrace();                                    \\n            var nodeback = nodebackForPromise(promise, \"+p+\");   \\n            var ret;                                                         \\n            var callback = tryCatch([GetFunctionCode]);                      \\n            switch(len) {                                                    \\n                [CodeForSwitchCase]                                          \\n            }                                                                \\n            if (ret === errorObj) {                                          \\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n            }                                                                \\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n            return promise;                                                  \\n        };                                                                   \\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n        return ret;                                                          \\n    \".replace(\"[CodeForSwitchCase]\",function(){for(var r,e,t,n=\"\",a=0;a<h.length;++a)n+=\"case \"+h[a]+\":\"+(r=h[a],e=d(r).join(\", \"),t=r>0?\", \":\"\",(g?\"ret = callback.call(this, {{args}}, nodeback); break;\\n\":void 0===s?\"ret = callback({{args}}, nodeback); break;\\n\":\"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\").replace(\"{{args}}\",e).replace(\", \",t));return n+=\"                                                             \\n        default:                                                             \\n            var args = new Array(len + 1);                                   \\n            var i = 0;                                                       \\n            for (var i = 0; i < len; ++i) {                                  \\n               args[i] = arguments[i];                                       \\n            }                                                                \\n            args[i] = nodeback;                                              \\n            [CodeForCall]                                                    \\n            break;                                                           \\n        \".replace(\"[CodeForCall]\",g?\"ret = callback.apply(this, args);\\n\":\"ret = callback.apply(receiver, args);\\n\")}()).replace(\"[GetFunctionCode]\",v);return b=b.replace(\"Parameters\",function(r){return n.filledRange(Math.max(r,3),\"_arg\",\"\")}(m)),new Function(\"Promise\",\"fn\",\"receiver\",\"withAppended\",\"maybeWrapAsError\",\"nodebackForPromise\",\"tryCatch\",\"errorObj\",\"notEnumerableProp\",\"INTERNAL\",b)(r,f,s,i,o,a,n.tryCatch,n.errorObj,n.notEnumerableProp,e)}:function(c,s,u,f,l,p){var m=function(){return this}(),h=c;function g(){var n=s;s===t&&(n=this);var u=new r(e);u._captureStackTrace();var f=\"string\"==typeof h&&this!==m?this[h]:c,l=a(u,p);try{f.apply(n,i(arguments,l))}catch(r){u._rejectCallback(o(r),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return\"string\"==typeof h&&(c=f),n.notEnumerableProp(g,\"__isPromisified__\",!0),g};function y(r,e,a,i,o){for(var c=new RegExp(v(e)+\"$\"),s=g(r,e,c,a),u=0,f=s.length;u<f;u+=2){var l=s[u],p=s[u+1],m=l+e;if(i===b)r[m]=b(l,t,l,p,e,o);else{var h=i(p,function(){return b(l,t,l,p,e,o)});n.notEnumerableProp(h,\"__isPromisified__\",!0),r[m]=h}}return n.toFastProperties(r),r}r.promisify=function(r,e){if(\"function\"!=typeof r)throw new s(\"expecting a function but got \"+n.classString(r));if(m(r))return r;var a=function(r,e,t){return b(r,e,void 0,r,null,t)}(r,void 0===(e=Object(e)).context?t:e.context,!!e.multiArgs);return n.copyDescriptors(r,a,p),a},r.promisifyAll=function(r,e){if(\"function\"!=typeof r&&\"object\"!=typeof r)throw new s(\"the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n\");var t=!!(e=Object(e)).multiArgs,a=e.suffix;\"string\"!=typeof a&&(a=\"Async\");var i=e.filter;\"function\"!=typeof i&&(i=l);var o=e.promisifier;if(\"function\"!=typeof o&&(o=b),!n.isIdentifier(a))throw new RangeError(\"suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n\");for(var c=n.inheritedDataKeys(r),u=0;u<c.length;++u){var f=r[c[u]];\"constructor\"!==c[u]&&n.isClass(f)&&(y(f.prototype,a,i,o,t),y(f,a,i,o,t))}return y(r,a,i,o,t)}};","node_modules/bluebird/js/release/props.js":"\"use strict\";module.exports=function(t,e,n,r){var i,o=require(\"./util\"),s=o.isObject,u=require(\"./es5\");\"function\"==typeof Map&&(i=Map);var a=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function p(t){var e,n=!1;if(void 0!==i&&t instanceof i)e=a(t),n=!0;else{var r=u.keys(t),o=r.length;e=new Array(2*o);for(var s=0;s<o;++s){var p=r[s];e[s]=t[p],e[s+o]=p}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(e){var i,o=n(e);return s(o)?(i=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new p(o).promise(),o instanceof t&&i._propagateFrom(o,2),i):r(\"cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n\")}o.inherits(p,e),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new i,n=t.length/2|0,r=0;r<n;++r){var o=t[n+r],s=t[r];e.set(o,s)}return e}(this._values);else{n={};for(var r=this.length(),o=0,s=this.length();o<s;++o)n[this._values[o+r]]=this._values[o]}return this._resolve(n),!0}return!1},p.prototype.shouldCopyValues=function(){return!1},p.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return f(this)},t.props=function(t){return f(t)}};","node_modules/bluebird/js/release/race.js":"\"use strict\";module.exports=function(r,t,n,e){var i=require(\"./util\"),o=function(r){return r.then(function(t){return u(t,r)})};function u(u,a){var c=n(u);if(c instanceof r)return o(c);if(null===(u=i.asArray(u)))return e(\"expecting an array or an iterable object but got \"+i.classString(u));var f=new r(t);void 0!==a&&f._propagateFrom(a,3);for(var l=f._fulfill,v=f._reject,s=0,d=u.length;s<d;++s){var p=u[s];(void 0!==p||s in u)&&r.cast(p)._then(l,v,void 0,f,null)}return f}r.race=function(r){return u(r,void 0)},r.prototype.race=function(){return u(this,void 0)}};","node_modules/bluebird/js/release/reduce.js":"\"use strict\";module.exports=function(t,e,i,n,a,l){var s=t._getDomain,o=require(\"./util\"),r=o.tryCatch;function u(e,i,n,l){this.constructor$(e);var r=s();this._fn=null===r?i:o.domainBind(r,i),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=l===a?Array(this._length):0===l?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,a){return\"function\"!=typeof e?i(\"expecting a function but got \"+o.classString(e)):new u(t,e,n,a).promise()}function _(e){this.accum=e,this.array._gotAccum(e);var i=n(this.value,this.array._promise);return i instanceof t?(this.array._currentCancellable=i,i._then(v,void 0,void 0,this,void 0)):v.call(this,i)}function v(e){var i,n=this.array,a=n._promise,s=r(n._fn);a._pushContext(),(i=void 0!==n._eachValues?s.call(a._boundValue(),e,this.index,this.length):s.call(a._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=i);var o=a._popContext();return l.checkForgottenReturns(i,o,void 0!==n._eachValues?\"Promise.each\":\"Promise.reduce\",a),i}o.inherits(u,e),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==a&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},u.prototype._iterate=function(e){var i,n;this._values=e;var a=e.length;if(void 0!==this._initialValue?(i=this._initialValue,n=0):(i=t.resolve(e[0]),n=1),this._currentCancellable=i,!i.isRejected())for(;n<a;++n){var l={accum:null,value:e[n],index:n,length:a,array:this};i=i._then(_,void 0,void 0,l,void 0)}void 0!==this._eachValues&&(i=i._then(this._eachComplete,void 0,void 0,this,void 0)),i._then(c,c,void 0,i,this)},t.prototype.reduce=function(t,e){return h(this,t,e,null)},t.reduce=function(t,e,i,n){return h(t,e,i,n)}};","node_modules/bluebird/js/release/settle.js":"\"use strict\";module.exports=function(e,t,i){var s=e.PromiseInspection;function r(e){this.constructor$(e)}require(\"./util\").inherits(r,t),r.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},r.prototype._promiseFulfilled=function(e,t){var i=new s;return i._bitField=33554432,i._settledValueField=e,this._promiseResolved(t,i)},r.prototype._promiseRejected=function(e,t){var i=new s;return i._bitField=16777216,i._settledValueField=e,this._promiseResolved(t,i)},e.settle=function(e){return i.deprecated(\".settle()\",\".reflect()\"),new r(e).promise()},e.prototype.settle=function(){return e.settle(this)}};","node_modules/bluebird/js/release/some.js":"\"use strict\";module.exports=function(t,e,i){var n=require(\"./util\"),r=require(\"./errors\").RangeError,s=require(\"./errors\").AggregateError,o=n.isArray,h={};function u(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return i(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");var n=new u(t),r=n.promise();return n.setHowMany(e),n.init(),r}n.inherits(u,e),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=o(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(t){this._howMany=t},u.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(h),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==h&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(t){this._values.push(t)},u.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(t){var e=\"Input array must contain at least \"+this._howMany+\" items but contains only \"+t+\" items\";return new r(e)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return l(t,e)},t.prototype.some=function(t){return l(this,t)},t._SomePromiseArray=u};","node_modules/bluebird/js/release/filter.js":"\"use strict\";module.exports=function(t,r){var e=t.map;t.prototype.filter=function(t,n){return e(this,t,n,r)},t.filter=function(t,n,i){return e(t,n,i,r)}};","node_modules/bluebird/js/release/each.js":"\"use strict\";module.exports=function(t,e){var i=t.reduce,n=t.all;function o(){return n(this)}t.prototype.each=function(t){return i(this,t,e,0)._then(o,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,n){return i(t,n,e,0)._then(o,void 0,void 0,t,void 0)},t.mapSeries=function(t,n){return i(t,n,e,e)}};","node_modules/bluebird/js/release/any.js":"\"use strict\";module.exports=function(n){var r=n._SomePromiseArray;function t(n){var t=new r(n),e=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),e}n.any=function(n){return t(n)},n.prototype.any=function(){return t(this)}};","node_modules/bluebird/js/release/schedule.js":"\"use strict\";var schedule,util=require(\"./util\"),noAsyncScheduler=function(){throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\")},NativePromise=util.getNativePromise();if(util.isNode&&\"undefined\"==typeof MutationObserver){var GlobalSetImmediate=global.setImmediate,ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(e){GlobalSetImmediate.call(global,e)}:function(e){ProcessNextTick.call(process,e)}}else if(\"function\"==typeof NativePromise&&\"function\"==typeof NativePromise.resolve){var nativePromise=NativePromise.resolve();schedule=function(e){nativePromise.then(e)}}else schedule=\"undefined\"==typeof MutationObserver||\"undefined\"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?\"undefined\"!=typeof setImmediate?function(e){setImmediate(e)}:\"undefined\"!=typeof setTimeout?function(e){setTimeout(e,0)}:noAsyncScheduler:function(){var e=document.createElement(\"div\"),t={attributes:!0},o=!1,i=document.createElement(\"div\");new MutationObserver(function(){e.classList.toggle(\"foo\"),o=!1}).observe(i,t);return function(n){var s=new MutationObserver(function(){s.disconnect(),n()});s.observe(e,t),o||(o=!0,i.classList.toggle(\"foo\"))}}();module.exports=schedule;","node_modules/bluebird/js/release/queue.js":"\"use strict\";function arrayMove(t,i,e,h,s){for(var n=0;n<s;++n)e[n+h]=t[n+i],t[n+i]=void 0}function Queue(t){this._capacity=t,this._length=0,this._front=0}Queue.prototype._willBeOverCapacity=function(t){return this._capacity<t},Queue.prototype._pushOne=function(t){var i=this.length();this._checkCapacity(i+1),this[this._front+i&this._capacity-1]=t,this._length=i+1},Queue.prototype.push=function(t,i,e){var h=this.length()+3;if(this._willBeOverCapacity(h))return this._pushOne(t),this._pushOne(i),void this._pushOne(e);var s=this._front+h-3;this._checkCapacity(h);var n=this._capacity-1;this[s+0&n]=t,this[s+1&n]=i,this[s+2&n]=e,this._length=h},Queue.prototype.shift=function(){var t=this._front,i=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,i},Queue.prototype.length=function(){return this._length},Queue.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},Queue.prototype._resizeTo=function(t){var i=this._capacity;this._capacity=t,arrayMove(this,0,this,i,this._front+this._length&i-1)},module.exports=Queue;","node_modules/mongoose/lib/error/messages.js":"\"use strict\";const msg=module.exports=exports={};msg.DocumentNotFoundError=null,msg.general={},msg.general.default=\"Validator failed for path `{PATH}` with value `{VALUE}`\",msg.general.required=\"Path `{PATH}` is required.\",msg.Number={},msg.Number.min=\"Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).\",msg.Number.max=\"Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).\",msg.Number.enum=\"`{VALUE}` is not a valid enum value for path `{PATH}`.\",msg.Date={},msg.Date.min=\"Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).\",msg.Date.max=\"Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).\",msg.String={},msg.String.enum=\"`{VALUE}` is not a valid enum value for path `{PATH}`.\",msg.String.match=\"Path `{PATH}` is invalid ({VALUE}).\",msg.String.minlength=\"Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).\",msg.String.maxlength=\"Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH}).\";","node_modules/mongoose/lib/error/notFound.js":"\"use strict\";const MongooseError=require(\"./\"),util=require(\"util\");class DocumentNotFoundError extends MongooseError{constructor(o,r,t,e){let u;const n=MongooseError.messages;super(u=null!=n.DocumentNotFoundError?\"function\"==typeof n.DocumentNotFoundError?n.DocumentNotFoundError(o,r):n.DocumentNotFoundError:'No document found for query \"'+util.inspect(o)+'\" on model \"'+r+'\"'),this.result=e,this.numAffected=t,this.filter=o,this.query=o}}Object.defineProperty(DocumentNotFoundError.prototype,\"name\",{value:\"DocumentNotFoundError\"}),module.exports=DocumentNotFoundError;","node_modules/mongoose/lib/error/version.js":"\"use strict\";const MongooseError=require(\"./\");class VersionError extends MongooseError{constructor(r,o,e){const s=e.join(\", \");super('No matching document found for id \"'+r._id+'\" version '+o+' modifiedPaths \"'+s+'\"'),this.version=o,this.modifiedPaths=e}}Object.defineProperty(VersionError.prototype,\"name\",{value:\"VersionError\"}),module.exports=VersionError;","node_modules/mongoose/lib/error/parallelSave.js":"\"use strict\";const MongooseError=require(\"./\");class ParallelSaveError extends MongooseError{constructor(r){super(\"Can't save() the same doc multiple times in parallel. Document: \"+r._id)}}Object.defineProperty(ParallelSaveError.prototype,\"name\",{value:\"ParallelSaveError\"}),module.exports=ParallelSaveError;","node_modules/mongoose/lib/error/overwriteModel.js":"\"use strict\";const MongooseError=require(\"./\");class OverwriteModelError extends MongooseError{constructor(r){super(\"Cannot overwrite `\"+r+\"` model once compiled.\")}}Object.defineProperty(OverwriteModelError.prototype,\"name\",{value:\"OverwriteModelError\"}),module.exports=OverwriteModelError;","node_modules/mongoose/lib/error/missingSchema.js":"\"use strict\";const MongooseError=require(\"./\");class MissingSchemaError extends MongooseError{constructor(e){super(\"Schema hasn't been registered for model \\\"\"+e+'\".\\nUse mongoose.model(name, schema)')}}Object.defineProperty(MissingSchemaError.prototype,\"name\",{value:\"MissingSchemaError\"}),module.exports=MissingSchemaError;","node_modules/mongoose/lib/error/divergentArray.js":"\"use strict\";const MongooseError=require(\"./\");class DivergentArrayError extends MongooseError{constructor(e){super(\"For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\\n  \"+e.join(\"\\n  \")+\"\\nUse Model.update() to update these arrays instead.\")}}Object.defineProperty(DivergentArrayError.prototype,\"name\",{value:\"DivergentArrayError\"}),module.exports=DivergentArrayError;","node_modules/mongoose/lib/schema/operators/exists.js":"\"use strict\";const castBoolean=require(\"../../cast/boolean\");module.exports=function(t){const o=null!=this?this.path:null;return castBoolean(t,o)};","node_modules/mongoose/lib/schema/operators/type.js":"\"use strict\";module.exports=function(r){if(Array.isArray(r)){if(!r.every(r=>\"number\"==typeof r||\"string\"==typeof r))throw new Error(\"$type array values must be strings or numbers\");return r}if(\"number\"!=typeof r&&\"string\"!=typeof r)throw new Error(\"$type parameter must be number, string, or array of numbers and strings\");return r};","node_modules/mongoose/lib/helpers/schematype/handleImmutable.js":"\"use strict\";const StrictModeError=require(\"../../error/strict\");function createImmutableSetter(t,e){return function(r){if(null==this||null==this.$__)return r;if(this.isNew)return r;if(!(\"function\"==typeof e?e.call(this,this):e))return r;const i=this.$__getValue(t);if(\"throw\"===this.$__.strictMode&&r!==i)throw new StrictModeError(t,\"Path `\"+t+\"` is immutable and strict mode is set to throw.\",!0);return i}}module.exports=function(t){t.$immutable?(t.$immutableSetter=createImmutableSetter(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};","node_modules/mongoose/lib/options/propertyOptions.js":"\"use strict\";module.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0});","node_modules/mongoose/lib/cast/boolean.js":"\"use strict\";const CastError=require(\"../error/cast\");module.exports=function(e,r){if(module.exports.convertToTrue.has(e))return!0;if(module.exports.convertToFalse.has(e))return!1;if(null==e)return e;throw new CastError(\"boolean\",e,r)},module.exports.convertToTrue=new Set([!0,\"true\",1,\"1\",\"yes\"]),module.exports.convertToFalse=new Set([!1,\"false\",0,\"0\",\"no\"]);","node_modules/kareem/index.js":"\"use strict\";function Kareem(){this._pres=new Map,this._posts=new Map}function _handleWrapError(t,e,n,r,o,s,c){if(s.useErrorHandlers){var i={error:e};return t.execPost(n,r,o,i,function(t){return\"function\"==typeof c&&c(t)})}return\"function\"==typeof c?c(e):void 0}function get(t,e,n){return t.has(e)?t.get(e):n}function callMiddlewareFunction(t,e,n,r){let o;try{o=t.apply(e,n)}catch(t){return r(t)}isPromise(o)&&o.then(()=>r(),t=>r(t))}function isPromise(t){return null!=t&&\"function\"==typeof t.then}function decorateNextFn(t){var e=!1,n=this;return function(){if(!e)return e=!0,process.nextTick(()=>t.apply(n,arguments))}}Kareem.prototype.execPre=function(t,e,n,r){3===arguments.length&&(r=n,n=[]);var o=get(this._pres,t,[]),s=o.length,c=0,i=o.numAsync||0,l=!1,u=n;if(!s)return process.nextTick(function(){r(null)});var p=function(){if(!(c>=s)){var t=o[c];if(t.isAsync){var n=[decorateNextFn(f),decorateNextFn(function(t){if(t){if(l)return;return l=!0,r(t)}if(0==--i&&c>=s)return r(null)})];callMiddlewareFunction(t.fn,e,n,n[0])}else if(t.fn.length>0){n=[decorateNextFn(f)];for(var a=arguments.length>=2?arguments:[null].concat(u),h=1;h<a.length;++h)n.push(a[h]);callMiddlewareFunction(t.fn,e,n,n[0])}else{let n=null;try{n=t.fn.call(e)}catch(t){if(null!=t)return r(t)}if(isPromise(n))n.then(()=>f(),t=>f(t));else{if(++c>=s)return i>0?void 0:process.nextTick(function(){r(null)});p()}}}};function f(t){if(t){if(l)return;return l=!0,r(t)}if(++c>=s)return i>0?void 0:r(null);p.apply(e,arguments)}p.apply(null,[null].concat(n))},Kareem.prototype.execPreSync=function(t,e,n){for(var r=get(this._pres,t,[]),o=r.length,s=0;s<o;++s)r[s].fn.apply(e,n||[])},Kareem.prototype.execPost=function(t,e,n,r,o){arguments.length<5&&(o=r,r=null);var s=get(this._posts,t,[]),c=s.length,i=0,l=null;if(r&&r.error&&(l=r.error),!c)return process.nextTick(function(){o.apply(null,[l].concat(n))});var u=function(){for(var t=s[i].fn,r=0,p=n.length,f=[],a=0;a<p;++a)r+=n[a]&&n[a]._kareemIgnore?0:1,n[a]&&n[a]._kareemIgnore||f.push(n[a]);if(l)if(t.length===r+2){var h=decorateNextFn(function(t){if(t&&(l=t),++i>=c)return o.call(null,l);u()});callMiddlewareFunction(t,e,[l].concat(f).concat([h]),h)}else{if(++i>=c)return o.call(null,l);u()}else{const s=decorateNextFn(function(t){return t?(l=t,u()):++i>=c?o.apply(null,[null].concat(n)):void u()});if(t.length===r+2)return++i>=c?o.apply(null,[null].concat(n)):u();if(t.length===r+1)callMiddlewareFunction(t,e,f.concat([s]),s);else{let r,p;try{p=t.apply(e,f)}catch(t){r=t,l=t}if(isPromise(p))return p.then(()=>s(),t=>s(t));if(++i>=c)return o.apply(null,[r].concat(n));u(r)}}};u()},Kareem.prototype.execPostSync=function(t,e,n){const r=get(this._posts,t,[]),o=r.length;for(let t=0;t<o;++t)r[t].fn.apply(e,n||[])},Kareem.prototype.createWrapperSync=function(t,e){var n=this;return function(){n.execPreSync(t,this,arguments);var r=e.apply(this,arguments);return n.execPostSync(t,this,[r]),r}},Kareem.prototype.wrap=function(t,e,n,r,o){const s=r.length>0?r[r.length-1]:null,c=(\"function\"==typeof s&&r.slice(0,r.length-1),this),i=(o=o||{}).checkForPromise;this.execPre(t,n,r,function(l){if(l){const e=o.numCallbackParams||0,r=o.contextParameter?[n]:[];for(var u=r.length;u<e;++u)r.push(null);return _handleWrapError(c,l,t,n,r,o,s)}const p=\"function\"==typeof s?r.length-1:r.length,f=e.length,a=e.apply(n,r.slice(0,p).concat(h));if(i){if(null!=a&&\"function\"==typeof a.then)return a.then(t=>h(null,t),t=>h(t));if(f<p+1)return h(null,a)}function h(){const e=Array.prototype.slice.call(arguments,1);if(o.nullResultByDefault&&0===e.length&&e.push(null),arguments[0])return _handleWrapError(c,arguments[0],t,n,e,o,s);c.execPost(t,n,e,function(){return arguments[0]?\"function\"==typeof s?s(arguments[0]):void 0:\"function\"==typeof s?s.apply(n,arguments):void 0})}})},Kareem.prototype.filter=function(t){const e=this.clone(),n=Array.from(e._pres.keys());for(const r of n){const n=this._pres.get(r).map(t=>Object.assign({},t,{name:r})).filter(t);0!==n.length?(n.numAsync=n.filter(t=>t.isAsync).length,e._pres.set(r,n)):e._pres.delete(r)}const r=Array.from(e._posts.keys());for(const n of r){const r=this._posts.get(n).map(t=>Object.assign({},t,{name:n})).filter(t);0!==r.length?e._posts.set(n,r):e._posts.delete(n)}return e},Kareem.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)},Kareem.prototype.createWrapper=function(t,e,n,r){var o=this;return this.hasHooks(t)?function(){var s=n||this,c=Array.prototype.slice.call(arguments);o.wrap(t,e,s,c,r)}:function(){process.nextTick(()=>e.apply(this,arguments))}},Kareem.prototype.pre=function(t,e,n,r,o){let s={};\"object\"==typeof e&&null!=e?e=(s=e).isAsync:\"boolean\"!=typeof arguments[1]&&(n,n=e,e=!1);const c=get(this._pres,t,[]);if(this._pres.set(t,c),e&&(c.numAsync=c.numAsync||0,++c.numAsync),\"function\"!=typeof n)throw new Error('pre() requires a function, got \"'+typeof n+'\"');return o?c.unshift(Object.assign({},s,{fn:n,isAsync:e})):c.push(Object.assign({},s,{fn:n,isAsync:e})),this},Kareem.prototype.post=function(t,e,n,r){const o=get(this._posts,t,[]);if(\"function\"==typeof e&&(r=!!n,n=e,e={}),\"function\"!=typeof n)throw new Error('post() requires a function, got \"'+typeof n+'\"');return r?o.unshift(Object.assign({},e,{fn:n})):o.push(Object.assign({},e,{fn:n})),this._posts.set(t,o),this},Kareem.prototype.clone=function(){const t=new Kareem;for(let e of this._pres.keys()){const n=this._pres.get(e).slice();n.numAsync=this._pres.get(e).numAsync,t._pres.set(e,n)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t},Kareem.prototype.merge=function(t,e){var n=(e=1===arguments.length||e)?this.clone():this;for(let e of t._pres.keys()){const r=get(n._pres,e,[]),o=t._pres.get(e).filter(t=>-1===r.map(t=>t.fn).indexOf(t.fn)),s=r.concat(o);s.numAsync=r.numAsync||0,s.numAsync+=o.filter(t=>t.isAsync).length,n._pres.set(e,s)}for(let e of t._posts.keys()){const r=get(n._posts,e,[]),o=t._posts.get(e).filter(t=>-1===r.indexOf(t));n._posts.set(e,r.concat(o))}return n},module.exports=Kareem;","node_modules/mongoose/lib/options/VirtualOptions.js":"\"use strict\";const opts=require(\"./propertyOptions\");class VirtualOptions{constructor(t){Object.assign(this,t),null!=t&&null!=t.options&&(this.options=Object.assign({},t.options))}}Object.defineProperty(VirtualOptions.prototype,\"ref\",opts),Object.defineProperty(VirtualOptions.prototype,\"refPath\",opts),Object.defineProperty(VirtualOptions.prototype,\"localField\",opts),Object.defineProperty(VirtualOptions.prototype,\"foreignField\",opts),Object.defineProperty(VirtualOptions.prototype,\"justOne\",opts),Object.defineProperty(VirtualOptions.prototype,\"count\",opts),Object.defineProperty(VirtualOptions.prototype,\"match\",opts),Object.defineProperty(VirtualOptions.prototype,\"options\",opts),Object.defineProperty(VirtualOptions.prototype,\"skip\",opts),Object.defineProperty(VirtualOptions.prototype,\"limit\",opts),Object.defineProperty(VirtualOptions.prototype,\"perDocumentLimit\",opts),module.exports=VirtualOptions;","node_modules/mongoose/lib/helpers/schema/addAutoId.js":"\"use strict\";module.exports=function(t){const o={_id:{auto:!0}};o._id[t.options.typeKey]=\"ObjectId\",t.add(o)};","node_modules/mongoose/lib/helpers/schema/getIndexes.js":"\"use strict\";const get=require(\"../get\"),helperIsObject=require(\"../isObject\");module.exports=function(e){let t=[];const n=new WeakMap,s=e.constructor.indexTypes,o=new Map;return function e(i,c,r){if(n.has(i))return;n.set(i,!0);c=c||\"\";const a=Object.keys(i.paths);for(const n of a){const a=i.paths[n];if(null!=r&&r.paths[n])continue;if(a.$isMongooseDocumentArray||a.$isSingleNested){if(!0!==get(a,\"options.excludeIndexes\")&&!0!==get(a,\"schemaOptions.excludeIndexes\")&&!0!==get(a,\"schema.options.excludeIndexes\")&&e(a.schema,c+n+\".\"),null!=a.schema.discriminators){const t=a.schema.discriminators,s=Object.keys(t);for(const o of s)e(t[o],c+n+\".\",a.schema)}if(a.$isMongooseDocumentArray)continue}const l=a._index||a.caster&&a.caster._index;if(!1!==l&&null!==l&&void 0!==l){const e={},r=helperIsObject(l),a=r?l:{},u=\"string\"==typeof l?l:!!r&&l.type;if(u&&-1!==s.indexOf(u))e[c+n]=u;else if(a.text)e[c+n]=\"text\",delete a.text;else{const t=-1===Number(l);e[c+n]=t?-1:1}delete a.type,\"background\"in a||(a.background=!0),null!=i.options.autoIndex&&(a._autoIndex=i.options.autoIndex);const d=a&&a.name;\"string\"==typeof d&&o.has(d)?Object.assign(o.get(d),e):(t.push([e,a]),o.set(d,e))}}n.delete(i);c?function(e,n){const s=e._indexes,o=s.length;for(let e=0;e<o;++e){const o=s[e][0],i=s[e][1],c=Object.keys(o),r=c.length,a={};for(let e=0;e<r;++e){const t=c[e];a[n+t]=o[t]}const l=Object.assign({},i);if(null!=i&&null!=i.partialFilterExpression){l.partialFilterExpression={};const e=i.partialFilterExpression;for(const t of Object.keys(e))l.partialFilterExpression[n+t]=e[t]}t.push([a,l])}}(i,c):(i._indexes.forEach(function(e){\"background\"in e[1]||(e[1].background=!0)}),t=t.concat(i._indexes))}(e),t};","node_modules/mongoose/lib/helpers/timestamps/setupTimestamps.js":"\"use strict\";const applyTimestampsToChildren=require(\"../update/applyTimestampsToChildren\"),applyTimestampsToUpdate=require(\"../update/applyTimestampsToUpdate\"),get=require(\"../get\"),handleTimestampOption=require(\"../schema/handleTimestampOption\"),symbols=require(\"../../schema/symbols\");module.exports=function(t,e){const s=t.childSchemas.find(function(t){return!!t.schema.options.timestamps});if(!e&&!s)return;const i=handleTimestampOption(e,\"createdAt\"),n=handleTimestampOption(e,\"updatedAt\"),a=null!=e&&e.hasOwnProperty(\"currentTime\")?e.currentTime:null,p={};t.$timestamps={createdAt:i,updatedAt:n},n&&!t.paths[n]&&(p[n]=Date),i&&!t.paths[i]&&(p[i]=Date),t.add(p),t.pre(\"save\",function(t){const e=get(this,\"$__.saveOptions.timestamps\");if(!1===e)return t();const s=null!=e&&!1===e.updatedAt,p=null!=e&&!1===e.createdAt,d=null!=a?a():(this.ownerDocument?this.ownerDocument():this).constructor.base.now(),o=this._id&&this._id.auto;if(!p&&i&&!this.get(i)&&this.$__isSelected(i)&&this.$set(i,o?this._id.getTimestamp():d),!s&&n&&(this.isNew||this.isModified())){let t=d;this.isNew&&(null!=i?t=this.$__getValue(i):o&&(t=this._id.getTimestamp())),this.$set(n,t)}t()}),t.methods.initializeTimestamps=function(){const t=null!=a?a():this.constructor.base.now();return i&&!this.get(i)&&this.$set(i,t),n&&!this.get(n)&&this.$set(n,t),this},o[symbols.builtInMiddleware]=!0;const d={query:!0,model:!1};function o(t){const e=null!=a?a():this.model.base.now();\"findOneAndReplace\"===this.op&&null==this.getUpdate()&&this.setUpdate({}),applyTimestampsToUpdate(e,i,n,this.getUpdate(),this.options,this.schema),applyTimestampsToChildren(e,this.getUpdate(),this.model.schema),t()}t.pre(\"findOneAndReplace\",d,o),t.pre(\"findOneAndUpdate\",d,o),t.pre(\"replaceOne\",d,o),t.pre(\"update\",d,o),t.pre(\"updateOne\",d,o),t.pre(\"updateMany\",d,o)};","node_modules/mongoose/lib/helpers/populate/validateRef.js":"\"use strict\";const MongooseError=require(\"../../error/mongooseError\"),util=require(\"util\");function validateRef(o,e){if(\"string\"!=typeof o&&\"function\"!=typeof o)throw new MongooseError('Invalid ref at path \"'+e+'\". Got '+util.inspect(o,{depth:0}))}module.exports=validateRef;","node_modules/mongoose/lib/helpers/query/applyQueryMiddleware.js":"\"use strict\";function applyQueryMiddleware(e,t){const n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0},r=t.hooks.filter(e=>{const t=_getContexts(e);return\"updateOne\"===e.name?null==t.query||!!t.query:\"deleteOne\"===e.name?!!t.query||0===Object.keys(t).length:\"validate\"===e.name||\"remove\"===e.name?!!t.query:null==e.query&&null==e.document||!!e.query});e.prototype._execUpdate=r.createWrapper(\"update\",e.prototype._execUpdate,null,n),e.prototype.__distinct=r.createWrapper(\"distinct\",e.prototype.__distinct,null,n),e.prototype.validate=r.createWrapper(\"validate\",e.prototype.validate,null,n),applyQueryMiddleware.middlewareFunctions.filter(e=>\"update\"!==e&&\"distinct\"!==e&&\"validate\"!==e).forEach(t=>{e.prototype[`_${t}`]=r.createWrapper(t,e.prototype[`_${t}`],null,n)})}function _getContexts(e){const t={};return e.hasOwnProperty(\"query\")&&(t.query=e.query),e.hasOwnProperty(\"document\")&&(t.document=e.document),t}module.exports=applyQueryMiddleware,applyQueryMiddleware.middlewareFunctions=[\"count\",\"countDocuments\",\"deleteMany\",\"deleteOne\",\"distinct\",\"estimatedDocumentCount\",\"find\",\"findOne\",\"findOneAndDelete\",\"findOneAndRemove\",\"findOneAndReplace\",\"findOneAndUpdate\",\"remove\",\"replaceOne\",\"update\",\"updateMany\",\"updateOne\",\"validate\"];","node_modules/mongoose/lib/helpers/model/applyHooks.js":"\"use strict\";const symbols=require(\"../../schema/symbols\"),promiseOrCallback=require(\"../promiseOrCallback\");function applyHooks(e,o,t){const s={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},n=(t=t||{}).decorateDoc?e:e.prototype;e.$appliedHooks=!0;for(const e of Object.keys(o.paths)){const s=o.paths[e];let n=null;if(s.$isSingleNested)n=s.caster;else{if(!s.$isMongooseDocumentArray)continue;n=s.Constructor}if(!n.$appliedHooks&&(applyHooks(n,s.schema,t),null!=n.discriminators)){const e=Object.keys(n.discriminators);for(const o of e)applyHooks(n.discriminators[o],n.discriminators[o].schema,t)}}const a=o.s.hooks.filter(e=>\"updateOne\"===e.name||\"deleteOne\"===e.name?!!e.document:\"remove\"===e.name||\"init\"===e.name?null==e.document||!!e.document:null==e.query&&null==e.document||!1!==e.document).filter(e=>!o.methods[e.name]||!e.fn[symbols.builtInMiddleware]);e._middleware=a,n.$__originalValidate=n.$__originalValidate||n.$__validate;for(const e of[\"save\",\"validate\",\"remove\",\"deleteOne\"]){const o=\"validate\"===e?\"$__originalValidate\":`$__${e}`,t=a.createWrapper(e,n[o],null,s);n[`$__${e}`]=t}n.$__init=a.createWrapperSync(\"init\",n.$__init,null,s);const i=Object.keys(o.methods),l=Object.assign({},s,{checkForPromise:!0});for(const o of i){if(!a.hasHooks(o))continue;const t=n[o];n[o]=function(){const t=Array.prototype.slice.call(arguments),s=t.slice(-1).pop(),n=\"function\"==typeof s?t.slice(0,t.length-1):t;return promiseOrCallback(s,e=>this[`$__${o}`].apply(this,n.concat([e])),e.events)},n[`$__${o}`]=a.createWrapper(o,t,null,l)}}module.exports=applyHooks,applyHooks.middlewareFunctions=[\"deleteOne\",\"save\",\"validate\",\"remove\",\"updateOne\",\"init\"];","node_modules/mongoose/lib/helpers/update/applyTimestampsToChildren.js":"\"use strict\";const cleanPositionalOperators=require(\"../schema/cleanPositionalOperators\"),handleTimestampOption=require(\"../schema/handleTimestampOption\");function applyTimestampsToChildren(e,t,s){if(null==t)return;if(Object.keys(t).some(e=>e.startsWith(\"$\"))){if(t.$push)for(const n of Object.keys(t.$push)){const a=s.path(n);if(t.$push[n]&&a&&a.$isMongooseDocumentArray&&a.schema.options.timestamps){const s=a.schema.options.timestamps,i=handleTimestampOption(s,\"createdAt\"),o=handleTimestampOption(s,\"updatedAt\");t.$push[n].$each?t.$push[n].$each.forEach(function(t){null!=o&&(t[o]=e),null!=i&&(t[i]=e)}):(null!=o&&(t.$push[n][o]=e),null!=i&&(t.$push[n][i]=e))}}if(null!=t.$set){const n=Object.keys(t.$set);for(const a of n)applyTimestampsToUpdateKey(s,a,t.$set,e)}}const n=Object.keys(t).filter(e=>!e.startsWith(\"$\"));for(const a of n)applyTimestampsToUpdateKey(s,a,t,e)}function applyTimestampsToDocumentArray(e,t,s){const n=t.schema.options.timestamps;if(!n)return;const a=e.length,i=handleTimestampOption(n,\"createdAt\"),o=handleTimestampOption(n,\"updatedAt\");for(let n=0;n<a;++n)null!=o&&(e[n][o]=s),null!=i&&(e[n][i]=s),applyTimestampsToChildren(s,e[n],t.schema)}function applyTimestampsToSingleNested(e,t,s){const n=t.schema.options.timestamps;if(!n)return;const a=handleTimestampOption(n,\"createdAt\"),i=handleTimestampOption(n,\"updatedAt\");null!=i&&(e[i]=s),null!=a&&(e[a]=s),applyTimestampsToChildren(s,e,t.schema)}function applyTimestampsToUpdateKey(e,t,s,n){const a=cleanPositionalOperators(t),i=e.path(a);if(!i)return;const o=[],p=a.split(\".\");for(let s=p.length-1;s>0;--s){const n=e.path(p.slice(0,s).join(\".\"));null!=n&&(n.$isMongooseDocumentArray||n.$isSingleNested)&&o.push({parentPath:t.split(\".\").slice(0,s).join(\".\"),parentSchemaType:n})}if(Array.isArray(s[t])&&i.$isMongooseDocumentArray)applyTimestampsToDocumentArray(s[t],i,n);else if(s[t]&&i.$isSingleNested)applyTimestampsToSingleNested(s[t],i,n);else if(o.length>0)for(const e of o){const a=e.parentPath,i=e.parentSchemaType,o=i.schema.options.timestamps,p=handleTimestampOption(o,\"updatedAt\");if(o&&null!=p)if(i.$isSingleNested)s[a+\".\"+p]=n;else if(i.$isMongooseDocumentArray){let e=t.substr(a.length+1);if(/^\\d+$/.test(e)){s[a+\".\"+e][p]=n;continue}const i=e.indexOf(\".\");s[a+\".\"+(e=-1!==i?e.substr(0,i):e)+\".\"+p]=n}}else if(null!=i.schema&&i.schema!=e&&s[t]){const e=i.schema.options.timestamps,a=handleTimestampOption(e,\"createdAt\"),o=handleTimestampOption(e,\"updatedAt\");if(!e)return;null!=o&&(s[t][o]=n),null!=a&&(s[t][a]=n)}}module.exports=applyTimestampsToChildren;","node_modules/mongoose/lib/helpers/update/applyTimestampsToUpdate.js":"\"use strict\";const get=require(\"../get\");function applyTimestampsToUpdate(e,t,s,n,r){const i=n;let l=i;const $=get(r,\"overwrite\",!1),o=get(r,\"timestamps\",!0);if(!o||null==i)return n;const a=null!=o&&!1===o.createdAt,c=null!=o&&!1===o.updatedAt;if($)return n&&n.$set&&(n=n.$set,i.$set={},l=i.$set),c||!s||n[s]||(l[s]=e),a||!t||n[t]||(l[t]=e),i;if(n=n||{},Array.isArray(i))return i.push({$set:{updatedAt:e}}),i;if(i.$set=i.$set||{},!c&&s&&(!n.$currentDate||!n.$currentDate[s])){let t=!1;if(-1!==s.indexOf(\".\")){const r=s.split(\".\");for(let s=1;s<r.length;++s){const i=r.slice(-s).join(\".\"),l=r.slice(0,-s).join(\".\");if(null!=n[l]){n[l][i]=e,t=!0;break}if(n.$set&&n.$set[l]){n.$set[l][i]=e,t=!0;break}}}t||(i.$set[s]=e),i.hasOwnProperty(s)&&delete i[s]}if(!a&&t){n[t]&&delete n[t],n.$set&&n.$set[t]&&delete n.$set[t];let s=!1;if(-1!==t.indexOf(\".\")){const r=t.split(\".\");for(let t=1;t<r.length;++t){const i=r.slice(-t).join(\".\"),l=r.slice(0,-t).join(\".\");if(null!=n[l]){n[l][i]=e,s=!0;break}if(n.$set&&n.$set[l]){n.$set[l][i]=e,s=!0;break}}}s||(i.$setOnInsert=i.$setOnInsert||{},i.$setOnInsert[t]=e)}return 0===Object.keys(i.$set).length&&delete i.$set,i}module.exports=applyTimestampsToUpdate;","node_modules/mongoose/lib/helpers/schema/handleTimestampOption.js":"\"use strict\";function handleTimestampOption(n,e){return null==n?null:\"boolean\"==typeof n?e:\"boolean\"==typeof n[e]?n[e]?e:null:e in n?n[e]:e}module.exports=handleTimestampOption;","node_modules/mongoose/lib/helpers/schema/cleanPositionalOperators.js":"\"use strict\";module.exports=function(e){return e.replace(/\\.\\$(\\[[^\\]]*\\])?(?=\\.)/g,\".0\").replace(/\\.\\$(\\[[^\\]]*\\])?$/g,\".0\")};","node_modules/mongoose/lib/schema/string.js":"\"use strict\";const SchemaType=require(\"../schematype\"),MongooseError=require(\"../error/index\"),SchemaStringOptions=require(\"../options/SchemaStringOptions\"),castString=require(\"../cast/string\"),utils=require(\"../utils\"),CastError=SchemaType.CastError;function SchemaString(t,e){this.enumValues=[],this.regExp=null,SchemaType.call(this,t,e,\"String\")}function handleSingle(t){return this.castForQuery(t)}function handleArray(t){const e=this;return Array.isArray(t)?t.map(function(t){return e.castForQuery(t)}):[this.castForQuery(t)]}SchemaString.schemaName=\"String\",SchemaString.defaultOptions={},SchemaString.prototype=Object.create(SchemaType.prototype),SchemaString.prototype.constructor=SchemaString,Object.defineProperty(SchemaString.prototype,\"OptionsConstructor\",{configurable:!1,enumerable:!1,writable:!1,value:SchemaStringOptions}),SchemaString._cast=castString,SchemaString.cast=function(t){return 0===arguments.length?this._cast:(!1===t&&(t=this._defaultCaster),this._cast=t,this._cast)},SchemaString._defaultCaster=(t=>{if(null!=t&&\"string\"!=typeof t)throw new Error;return t}),SchemaString.get=SchemaType.get,SchemaString.set=SchemaType.set,SchemaString._checkRequired=(t=>(t instanceof String||\"string\"==typeof t)&&t.length),SchemaString.checkRequired=SchemaType.checkRequired,SchemaString.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(t){return t.validator!==this.enumValidator},this),this.enumValidator=!1),void 0===arguments[0]||!1===arguments[0])return this;let t,e;utils.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=utils.object.vals(arguments[0]),e=MongooseError.messages.String.enum):(t=arguments,e=MongooseError.messages.String.enum);for(const e of t)void 0!==e&&this.enumValues.push(this.cast(e));const r=this.enumValues;return this.enumValidator=function(t){return void 0===t||~r.indexOf(t)},this.validators.push({validator:this.enumValidator,message:e,type:\"enum\",enumValues:r}),this},SchemaString.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(function(t,e){return\"string\"!=typeof t&&(t=e.cast(t)),t?t.toLowerCase():t})},SchemaString.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(function(t,e){return\"string\"!=typeof t&&(t=e.cast(t)),t?t.toUpperCase():t})},SchemaString.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(function(t,e){return\"string\"!=typeof t&&(t=e.cast(t)),t?t.trim():t})},SchemaString.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(t){return t.validator!==this.minlengthValidator},this)),null!==t&&void 0!==t){let r=e||MongooseError.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(e){return null===e||e.length>=t},message:r,type:\"minlength\",minlength:t})}return this},SchemaString.prototype.minLength=SchemaString.prototype.minlength,SchemaString.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(t){return t.validator!==this.maxlengthValidator},this)),null!==t&&void 0!==t){let r=e||MongooseError.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(e){return null===e||e.length<=t},message:r,type:\"maxlength\",maxlength:t})}return this},SchemaString.prototype.maxLength=SchemaString.prototype.maxlength,SchemaString.prototype.match=function(t,e){const r=e||MongooseError.messages.String.match;return this.validators.push({validator:function(e){if(!t)return!1;return t.lastIndex=0,null==e||\"\"===e||t.test(e)},message:r,type:\"regexp\",regexp:t}),this},SchemaString.prototype.checkRequired=function(t,e){if(SchemaType._isRef(this,t,e,!0))return!!t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():SchemaString.checkRequired())(t)},SchemaString.prototype.cast=function(t,e,r){if(SchemaType._isRef(this,t,e,r))return\"string\"==typeof t?t:this._castRef(t,e,r);let n;n=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():SchemaString.cast();try{return n(t)}catch(e){throw new CastError(\"string\",t,this.path,null,this)}};const $conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$all:handleArray,$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle,$options:String,$regex:handleSingle,$not:handleSingle});Object.defineProperty(SchemaString.prototype,\"$conditionalHandlers\",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze($conditionalHandlers)}),SchemaString.prototype.castForQuery=function(t,e){let r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[t]))throw new Error(\"Can't use \"+t+\" with String.\");return r.call(this,e)}return e=t,\"[object RegExp]\"===Object.prototype.toString.call(e)?e:this._castForQuery(e)},module.exports=SchemaString;","node_modules/mongoose/lib/schema/number.js":"\"use strict\";const MongooseError=require(\"../error/index\"),SchemaNumberOptions=require(\"../options/SchemaNumberOptions\"),SchemaType=require(\"../schematype\"),castNumber=require(\"../cast/number\"),handleBitwiseOperator=require(\"./operators/bitwise\"),utils=require(\"../utils\"),CastError=SchemaType.CastError;function SchemaNumber(e,t){SchemaType.call(this,e,t,\"Number\")}function handleSingle(e){return this.cast(e)}function handleArray(e){const t=this;return Array.isArray(e)?e.map(function(e){return t.cast(e)}):[this.cast(e)]}SchemaNumber.get=SchemaType.get,SchemaNumber.set=SchemaType.set,SchemaNumber._cast=castNumber,SchemaNumber.cast=function(e){return 0===arguments.length?this._cast:(!1===e&&(e=this._defaultCaster),this._cast=e,this._cast)},SchemaNumber._defaultCaster=(e=>{if(\"number\"!=typeof e)throw new Error;return e}),SchemaNumber.schemaName=\"Number\",SchemaNumber.defaultOptions={},SchemaNumber.prototype=Object.create(SchemaType.prototype),SchemaNumber.prototype.constructor=SchemaNumber,SchemaNumber.prototype.OptionsConstructor=SchemaNumberOptions,SchemaNumber._checkRequired=(e=>\"number\"==typeof e||e instanceof Number),SchemaNumber.checkRequired=SchemaType.checkRequired,SchemaNumber.prototype.checkRequired=function(e,t){if(SchemaType._isRef(this,e,t,!0))return!!e;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():SchemaNumber.checkRequired())(e)},SchemaNumber.prototype.min=function(e,t){if(this.minValidator&&(this.validators=this.validators.filter(function(e){return e.validator!==this.minValidator},this)),null!==e&&void 0!==e){let r=t||MongooseError.messages.Number.min;r=r.replace(/{MIN}/,e),this.validators.push({validator:this.minValidator=function(t){return null==t||t>=e},message:r,type:\"min\",min:e})}return this},SchemaNumber.prototype.max=function(e,t){if(this.maxValidator&&(this.validators=this.validators.filter(function(e){return e.validator!==this.maxValidator},this)),null!==e&&void 0!==e){let r=t||MongooseError.messages.Number.max;r=r.replace(/{MAX}/,e),this.validators.push({validator:this.maxValidator=function(t){return null==t||t<=e},message:r,type:\"max\",max:e})}return this},SchemaNumber.prototype.enum=function(e,t){return this.enumValidator&&(this.validators=this.validators.filter(function(e){return e.validator!==this.enumValidator},this)),Array.isArray(e)||(e=utils.isObject(e)?utils.object.vals(e):Array.prototype.slice.call(arguments),t=MongooseError.messages.Number.enum),t=null==t?MongooseError.messages.Number.enum:t,this.enumValidator=(t=>null==t||-1!==e.indexOf(t)),this.validators.push({validator:this.enumValidator,message:t,type:\"enum\",enumValues:e}),this},SchemaNumber.prototype.cast=function(e,t,r){if(SchemaType._isRef(this,e,t,r))return\"number\"==typeof e?e:this._castRef(e,t,r);const a=e&&void 0!==e._id?e._id:e;let i;i=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():SchemaNumber.cast();try{return i(a)}catch(e){throw new CastError(\"Number\",a,this.path,e,this)}},SchemaNumber.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$bitsAllClear:handleBitwiseOperator,$bitsAnyClear:handleBitwiseOperator,$bitsAllSet:handleBitwiseOperator,$bitsAnySet:handleBitwiseOperator,$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle,$mod:handleArray}),SchemaNumber.prototype.castForQuery=function(e,t){let r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new CastError(\"number\",t,this.path,null,this);return r.call(this,t)}return t=this._castForQuery(e)},module.exports=SchemaNumber;","node_modules/mongoose/lib/schema/boolean.js":"\"use strict\";const CastError=require(\"../error/cast\"),SchemaType=require(\"../schematype\"),castBoolean=require(\"../cast/boolean\"),utils=require(\"../utils\");function SchemaBoolean(e,o){SchemaType.call(this,e,o,\"Boolean\")}SchemaBoolean.schemaName=\"Boolean\",SchemaBoolean.defaultOptions={},SchemaBoolean.prototype=Object.create(SchemaType.prototype),SchemaBoolean.prototype.constructor=SchemaBoolean,SchemaBoolean._cast=castBoolean,SchemaBoolean.set=SchemaType.set,SchemaBoolean.cast=function(e){return 0===arguments.length?this._cast:(!1===e&&(e=this._defaultCaster),this._cast=e,this._cast)},SchemaBoolean._defaultCaster=(e=>{if(null!=e&&\"boolean\"!=typeof e)throw new Error;return e}),SchemaBoolean._checkRequired=(e=>!0===e||!1===e),SchemaBoolean.checkRequired=SchemaType.checkRequired,SchemaBoolean.prototype.checkRequired=function(e){return this.constructor._checkRequired(e)},Object.defineProperty(SchemaBoolean,\"convertToTrue\",{get:()=>castBoolean.convertToTrue,set:e=>{castBoolean.convertToTrue=e}}),Object.defineProperty(SchemaBoolean,\"convertToFalse\",{get:()=>castBoolean.convertToFalse,set:e=>{castBoolean.convertToFalse=e}}),SchemaBoolean.prototype.cast=function(e){let o;o=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():SchemaBoolean.cast();try{return o(e)}catch(o){throw new CastError(\"Boolean\",e,this.path,o,this)}},SchemaBoolean.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{}),SchemaBoolean.prototype.castForQuery=function(e,o){let t;return 2===arguments.length?(t=SchemaBoolean.$conditionalHandlers[e])?t.call(this,o):this._castForQuery(o):this._castForQuery(e)},SchemaBoolean.prototype._castNullish=function(e){if(void 0===e&&null!=this.$$context&&null!=this.$$context._mongooseOptions&&this.$$context._mongooseOptions.omitUndefined)return e;const o=\"function\"==typeof this.constructor.cast?this.constructor.cast():SchemaBoolean.cast();return null==o?e:!(o.convertToFalse instanceof Set&&o.convertToFalse.has(e))&&(!!(o.convertToTrue instanceof Set&&o.convertToTrue.has(e))||e)},module.exports=SchemaBoolean;","node_modules/mongoose/lib/schema/documentarray.js":"\"use strict\";const ArrayType=require(\"./array\"),CastError=require(\"../error/cast\"),EventEmitter=require(\"events\").EventEmitter,SchemaDocumentArrayOptions=require(\"../options/SchemaDocumentArrayOptions\"),SchemaType=require(\"../schematype\"),ValidationError=require(\"../error/validation\"),discriminator=require(\"../helpers/model/discriminator\"),get=require(\"../helpers/get\"),handleIdOption=require(\"../helpers/schema/handleIdOption\"),util=require(\"util\"),utils=require(\"../utils\"),getConstructor=require(\"../helpers/discriminator/getConstructor\"),arrayAtomicsSymbol=require(\"../helpers/symbols\").arrayAtomicsSymbol,arrayPathSymbol=require(\"../helpers/symbols\").arrayPathSymbol,documentArrayParent=require(\"../helpers/symbols\").documentArrayParent;let MongooseDocumentArray,Subdocument;function DocumentArrayPath(t,e,r,o){null!=o&&null!=o._id?e=handleIdOption(e,o):null!=r&&null!=r._id&&(e=handleIdOption(e,r));const n=_createConstructor(e,r);n.prototype.$basePath=t,ArrayType.call(this,t,n,r),this.schema=e,this.schemaOptions=o||{},this.$isMongooseDocumentArray=!0,this.Constructor=n,n.base=e.base;const a=this.defaultValue;\"defaultValue\"in this&&void 0===a||this.default(function(){let t=a.call(this);return Array.isArray(t)||(t=[t]),t});const s=this;this.$embeddedSchemaType=new SchemaType(t+\".$\",{required:get(this,\"schemaOptions.required\",!1)}),this.$embeddedSchemaType.cast=function(t,e,r){return s.cast(t,e,r)[0]},this.$embeddedSchemaType.$isMongooseDocumentArrayElement=!0,this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}function _createConstructor(t,e,r){function o(){Subdocument.apply(this,arguments),this.$session(this.ownerDocument().$session())}Subdocument||(Subdocument=require(\"../types/embedded\"));const n=null!=r?r.prototype:Subdocument.prototype;o.prototype=Object.create(n),o.prototype.$__setSchema(t),o.schema=t,o.prototype.constructor=o,o.$isArraySubdocument=!0,o.events=new EventEmitter;for(const e in t.methods)o.prototype[e]=t.methods[e];for(const e in t.statics)o[e]=t.statics[e];for(const t in EventEmitter.prototype)o[t]=EventEmitter.prototype[t];return o.options=e,o}function scopePaths(t,e,r){if(!r||!e)return;const o=t.path+\".\",n=Object.keys(e);let a=n.length;const s={};let i,c,u;for(;a--;)if((c=n[a]).startsWith(o)){if(\"$\"===(u=c.substring(o.length)))continue;u.startsWith(\"$.\")&&(u=u.substr(2)),i||(i=!0),s[u]=e[c]}return i&&s||void 0}DocumentArrayPath.schemaName=\"DocumentArray\",DocumentArrayPath.options={castNonArrays:!0},DocumentArrayPath.prototype=Object.create(ArrayType.prototype),DocumentArrayPath.prototype.constructor=DocumentArrayPath,DocumentArrayPath.prototype.OptionsConstructor=SchemaDocumentArrayOptions,DocumentArrayPath.prototype.discriminator=function(t,e,r){\"function\"==typeof t&&(t=utils.getFunctionName(t));const o=_createConstructor(e=discriminator(this.casterConstructor,t,e,r),null,this.casterConstructor);o.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(o,\"name\",{value:t})}catch(t){}return this.casterConstructor.discriminators[t]=o,this.casterConstructor.discriminators[t]},DocumentArrayPath.prototype.doValidate=function(t,e,r,o){MongooseDocumentArray||(MongooseDocumentArray=require(\"../types/documentarray\"));const n=this;try{SchemaType.prototype.doValidate.call(this,t,function(a){if(a)return a.$isArrayValidatorError=!0,e(a);let s,i=t&&t.length;if(!i)return e();if(o&&o.updateValidator)return e();t.isMongooseDocumentArray||(t=new MongooseDocumentArray(t,n.path,r));function c(t){null!=t&&((s=t)instanceof ValidationError||(s.$isArrayValidatorError=!0)),--i||e(s)}for(let r=0,a=i;r<a;++r){let a=t[r];if(null!=a){if(!(a instanceof Subdocument)){const e=getConstructor(n.casterConstructor,t[r]);a=t[r]=new e(a,t,void 0,void 0,r)}null==o||!o.validateModifiedOnly||a.isModified()?a.$__validate(c):--i||e(s)}else--i||e(s)}},r)}catch(t){return t.$isArrayValidatorError=!0,e(t)}},DocumentArrayPath.prototype.doValidateSync=function(t,e,r){const o=SchemaType.prototype.doValidateSync.call(this,t,e);if(null!=o)return o.$isArrayValidatorError=!0,o;const n=t&&t.length;let a=null;if(n){for(let e=0,o=n;e<o;++e){let o=t[e];if(!o)continue;if(!(o instanceof Subdocument)){const r=getConstructor(this.casterConstructor,t[e]);o=t[e]=new r(o,t,void 0,void 0,e)}if(null!=r&&r.validateModifiedOnly&&!o.isModified())continue;const n=o.validateSync();n&&null==a&&(a=n)}return a}},DocumentArrayPath.prototype.getDefault=function(t){let e=\"function\"==typeof this.defaultValue?this.defaultValue.call(t):this.defaultValue;if(null==e)return e;MongooseDocumentArray||(MongooseDocumentArray=require(\"../types/documentarray\")),Array.isArray(e)||(e=[e]),e=new MongooseDocumentArray(e,this.path,t);for(let t=0;t<e.length;++t){const r=new(getConstructor(this.casterConstructor,e[t]))({},e,void 0,void 0,t);r.init(e[t]),r.isNew=!0,Object.assign(r.$__.activePaths.default,r.$__.activePaths.init),r.$__.activePaths.init={},e[t]=r}return e},DocumentArrayPath.prototype.cast=function(t,e,r,o,n){if(MongooseDocumentArray||(MongooseDocumentArray=require(\"../types/documentarray\")),null!=t&&null!=t[arrayPathSymbol]&&t===o)return t;let a,s;const i={transform:!1,virtuals:!1};if(n=n||{},!Array.isArray(t)){if(!r&&!DocumentArrayPath.options.castNonArrays)throw new CastError(\"DocumentArray\",util.inspect(t),this.path,null,this);return e&&r&&e.markModified(this.path),this.cast([t],e,r,o,n)}t&&t.isMongooseDocumentArray||n.skipDocumentArrayCast?t&&t.isMongooseDocumentArray&&(t=new MongooseDocumentArray(t,this.path,e)):t=new MongooseDocumentArray(t,this.path,e),null!=o&&(t[arrayAtomicsSymbol]=o[arrayAtomicsSymbol]||{}),null!=n.arrayPathIndex&&(t[arrayPathSymbol]=this.path+\".\"+n.arrayPathIndex);const c=t.length,u={skipId:!0,willInit:!0};for(let n=0;n<c;++n){if(!t[n])continue;const c=getConstructor(this.casterConstructor,t[n]);if(!t[n].$__||t[n]instanceof c&&t[n][documentArrayParent]===e||(t[n]=t[n].toObject({transform:!1,virtuals:t[n].schema===c.schema})),t[n]instanceof Subdocument)null==t[n].__index&&t[n].$setIndex(n);else if(null!=t[n])if(r)e?a||(a=scopePaths(this,e.$__.selected,r)):a=!0,s=new c(null,t,u,a,n),t[n]=s.init(t[n]);else if(o&&\"function\"==typeof o.id&&(s=o.id(t[n]._id)),o&&s&&utils.deepEqual(s.toObject(i),t[n]))s.set(t[n]),t[n]=s;else try{s=new c(t[n],t,void 0,void 0,n),t[n]=s}catch(e){const r=util.inspect(t[n]);throw new CastError(\"embedded\",r,t[arrayPathSymbol],e,this)}}return t},DocumentArrayPath.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e},DocumentArrayPath.prototype.applyGetters=function(t,e){return SchemaType.prototype.applyGetters.call(this,t,e)},DocumentArrayPath.defaultOptions={},DocumentArrayPath.set=SchemaType.set,module.exports=DocumentArrayPath;","node_modules/mongoose/lib/schema/SingleNestedPath.js":"\"use strict\";const CastError=require(\"../error/cast\"),EventEmitter=require(\"events\").EventEmitter,ObjectExpectedError=require(\"../error/objectExpected\"),SchemaSingleNestedOptions=require(\"../options/SchemaSingleNestedOptions\"),SchemaType=require(\"../schematype\"),$exists=require(\"./operators/exists\"),castToNumber=require(\"./operators/helpers\").castToNumber,discriminator=require(\"../helpers/model/discriminator\"),geospatial=require(\"./operators/geospatial\"),get=require(\"../helpers/get\"),getConstructor=require(\"../helpers/discriminator/getConstructor\"),handleIdOption=require(\"../helpers/schema/handleIdOption\"),internalToObjectOptions=require(\"../options\").internalToObjectOptions;let Subdocument;function SingleNestedPath(t,e,r){t=handleIdOption(t,r),this.caster=_createConstructor(t),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,SchemaType.call(this,e,r,\"Embedded\")}function _createConstructor(t,e){Subdocument||(Subdocument=require(\"../types/subdocument\"));const r=function(t,e,r){const i=this;this.$__parent=r,Subdocument.apply(this,arguments),this.$session(this.ownerDocument().$session()),r&&(r.on(\"save\",function(){i.emit(\"save\",i),i.constructor.emit(\"save\",i)}),r.on(\"isNew\",function(t){i.isNew=t,i.emit(\"isNew\",t),i.constructor.emit(\"isNew\",t)}))},i=null!=e?e.prototype:Subdocument.prototype;(r.prototype=Object.create(i)).$__setSchema(t),r.prototype.constructor=r,r.schema=t,r.$isSingleNested=!0,r.events=new EventEmitter,r.prototype.toBSON=function(){return this.toObject(internalToObjectOptions)};for(const e in t.methods)r.prototype[e]=t.methods[e];for(const e in t.statics)r[e]=t.statics[e];for(const t in EventEmitter.prototype)r[t]=EventEmitter.prototype[t];return r}module.exports=SingleNestedPath,SingleNestedPath.prototype=Object.create(SchemaType.prototype),SingleNestedPath.prototype.constructor=SingleNestedPath,SingleNestedPath.prototype.OptionsConstructor=SchemaSingleNestedOptions,SingleNestedPath.prototype.$conditionalHandlers.$geoWithin=function(t){return{$geometry:this.castForQuery(t.$geometry)}},SingleNestedPath.prototype.$conditionalHandlers.$near=SingleNestedPath.prototype.$conditionalHandlers.$nearSphere=geospatial.cast$near,SingleNestedPath.prototype.$conditionalHandlers.$within=SingleNestedPath.prototype.$conditionalHandlers.$geoWithin=geospatial.cast$within,SingleNestedPath.prototype.$conditionalHandlers.$geoIntersects=geospatial.cast$geoIntersects,SingleNestedPath.prototype.$conditionalHandlers.$minDistance=castToNumber,SingleNestedPath.prototype.$conditionalHandlers.$maxDistance=castToNumber,SingleNestedPath.prototype.$conditionalHandlers.$exists=$exists,SingleNestedPath.prototype.cast=function(t,e,r,i,o){if(t&&t.$isSingleNested&&t.parent===e)return t;if(null!=t&&(\"object\"!=typeof t||Array.isArray(t)))throw new ObjectExpectedError(this.path,t);const s=getConstructor(this.caster,t);let n;const a=get(e,\"$__.selected\",{}),c=this.path,p=Object.keys(a).reduce((t,e)=>(e.startsWith(c+\".\")&&(t[e.substr(c.length+1)]=a[e]),t),{});return o=Object.assign({},o,{priorDoc:i}),r?((n=new s(void 0,p,e)).init(t),n):0===Object.keys(t).length?new s({},p,e,void 0,o):new s(t,p,e,void 0,o)},SingleNestedPath.prototype.castForQuery=function(t,e,r){let i;if(2===arguments.length){if(!(i=this.$conditionalHandlers[t]))throw new Error(\"Can't use \"+t);return i.call(this,e)}if(null==(e=t))return e;this.options.runSetters&&(e=this._applySetters(e));const o=getConstructor(this.caster,e),s=null!=r&&null!=r.strict?r.strict:void 0;try{e=new o(e,s)}catch(t){if(!(t instanceof CastError))throw new CastError(\"Embedded\",e,this.path,t,this);throw t}return e},SingleNestedPath.prototype.doValidate=function(t,e,r,i){const o=getConstructor(this.caster,t);if(i&&i.skipSchemaValidators)return t instanceof o||(t=new o(t,null,r)),t.validate(e);SchemaType.prototype.doValidate.call(this,t,function(r){return r?e(r):t?void t.validate(e):e(null)},r,i)},SingleNestedPath.prototype.doValidateSync=function(t,e,r){if(!r||!r.skipSchemaValidators){const r=SchemaType.prototype.doValidateSync.call(this,t,e);if(r)return r}if(t)return t.validateSync()},SingleNestedPath.prototype.discriminator=function(t,e,r){return e=discriminator(this.caster,t,e,r),this.caster.discriminators[t]=_createConstructor(e,this.caster),this.caster.discriminators[t]},SingleNestedPath.defaultOptions={},SingleNestedPath.set=SchemaType.set,SingleNestedPath.prototype.clone=function(){const t=Object.assign({},this.options),e=new this.constructor(this.schema,this.path,t);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),e.caster.discriminators=Object.assign({},this.caster.discriminators),e};","node_modules/mongoose/lib/schema/array.js":"\"use strict\";const $exists=require(\"./operators/exists\"),$type=require(\"./operators/type\"),MongooseError=require(\"../error/mongooseError\"),SchemaArrayOptions=require(\"../options/SchemaArrayOptions\"),SchemaType=require(\"../schematype\"),CastError=SchemaType.CastError,Mixed=require(\"./mixed\"),arrayDepth=require(\"../helpers/arrayDepth\"),cast=require(\"../cast\"),get=require(\"../helpers/get\"),isOperator=require(\"../helpers/query/isOperator\"),util=require(\"util\"),utils=require(\"../utils\"),castToNumber=require(\"./operators/helpers\").castToNumber,geospatial=require(\"./operators/geospatial\"),getDiscriminatorByValue=require(\"../helpers/discriminator/getDiscriminatorByValue\");let MongooseArray,EmbeddedDoc;const isNestedArraySymbol=Symbol(\"mongoose#isNestedArray\"),emptyOpts=Object.freeze({});function SchemaArray(r,e,t,a){EmbeddedDoc||(EmbeddedDoc=require(\"../types\").Embedded);let s,o,i=\"type\";if(a&&a.typeKey&&(i=a.typeKey),this.schemaOptions=a,e){let a={};utils.isPOJO(e)&&(e[i]?(delete(a=utils.clone(e))[i],e=e[i]):e=Mixed),null!=t&&null!=t.ref&&null==a.ref&&(a.ref=t.ref),e===Object&&(e=Mixed);const s=\"string\"==typeof e?e:utils.getFunctionName(e),o=require(\"./index.js\"),n=o.hasOwnProperty(s)?o[s]:e;if(this.casterConstructor=n,this.casterConstructor instanceof SchemaArray&&(this.casterConstructor[isNestedArraySymbol]=!0),\"function\"!=typeof n||n.$isArraySubdocument||n.$isSchemaMap)this.caster=n,this.caster instanceof EmbeddedDoc||(this.caster.path=r);else{const e=this.caster instanceof EmbeddedDoc?null:r;this.caster=new n(e,a)}this.$embeddedSchemaType=this.caster}if(this.$isMongooseArray=!0,SchemaType.call(this,r,t,\"Array\"),null!=this.defaultValue&&(s=this.defaultValue,o=\"function\"==typeof s),!(\"defaultValue\"in this)||void 0!==this.defaultValue){const r=function(){let r=[];return o?r=s.call(this):null!=s&&(r=r.concat(s)),r};r.$runBeforeSetters=!o,this.default(r)}}function cast$all(r){return Array.isArray(r)||(r=[r]),r=r.map(function(r){if(utils.isObject(r)){const e={};return e[this.path]=r,cast(this.casterConstructor.schema,e)[this.path]}return r},this),this.castForQuery(r)}function cast$elemMatch(r){const e=Object.keys(r),t=e.length;for(let a=0;a<t;++a){const t=e[a],s=r[t];isOperator(t)&&null!=s&&(r[t]=this.castForQuery(t,s))}const a=get(this,\"casterConstructor.schema.options.discriminatorKey\"),s=get(this,\"casterConstructor.schema.discriminators\",{});return null!=a&&null!=r[a]&&null!=s[r[a]]?cast(s[r[a]],r):cast(this.casterConstructor.schema,r)}SchemaArray.schemaName=\"Array\",SchemaArray.options={castNonArrays:!0},SchemaArray.defaultOptions={},SchemaArray.set=SchemaType.set,SchemaArray.prototype=Object.create(SchemaType.prototype),SchemaArray.prototype.constructor=SchemaArray,SchemaArray.prototype.OptionsConstructor=SchemaArrayOptions,SchemaArray._checkRequired=SchemaType.prototype.checkRequired,SchemaArray.checkRequired=SchemaType.checkRequired,SchemaArray.prototype.checkRequired=function(r,e){if(SchemaType._isRef(this,r,e,!0))return!!r;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():SchemaArray.checkRequired())(r)},SchemaArray.prototype.enum=function(){let r=this;for(;;){const e=get(r,\"caster.instance\");if(\"Array\"!==e){if(\"String\"!==e&&\"Number\"!==e)throw new Error(\"`enum` can only be set on an array of strings or numbers , not \"+e);break}r=r.caster}let e=arguments;return!Array.isArray(arguments)&&utils.isObject(arguments)&&(e=utils.object.vals(e)),r.caster.enum.apply(r.caster,e),this},SchemaArray.prototype.applyGetters=function(r,e){if(null!=e&&null!=e.$__&&e.populated(this.path))return r;const t=SchemaType.prototype.applyGetters.call(this,r,e);if(Array.isArray(t)){const r=t.length;for(let a=0;a<r;++a)t[a]=this.caster.applyGetters(t[a],e)}return t},SchemaArray.prototype._applySetters=function(r,e,t,a){if(this.casterConstructor instanceof SchemaArray&&SchemaArray.options.castNonArrays&&!this[isNestedArraySymbol]){let e=0,t=this;for(;null!=t&&t instanceof SchemaArray&&!t.$isMongooseDocumentArray;)++e,t=t.casterConstructor;if(null!=r&&r.length>0){const t=arrayDepth(r);if(t.min===t.max&&t.max<e&&t.containsNonArrayItem)for(let a=t.max;a<e;++a)r=[r]}}return SchemaType.prototype._applySetters.call(this,r,e,t,a)},SchemaArray.prototype.cast=function(r,e,t,a,s){let o,i;if(MongooseArray||(MongooseArray=require(\"../types\").Array),Array.isArray(r)){const a=r.length;if(!a&&e){const r=e.schema.indexedPaths(),t=this.path;for(o=0,i=r.length;o<i;++o){const e=r[o][0][t];if(\"2dsphere\"===e||\"2d\"===e)return}const a=this.path.endsWith(\".coordinates\")?this.path.substr(0,this.path.lastIndexOf(\".\")):null;if(null!=a)for(o=0,i=r.length;o<i;++o){if(\"2dsphere\"===r[o][0][a])return}}if(r=MongooseArray(r,(s=s||emptyOpts).path||this._arrayPath||this.path,e,this),t&&null!=e&&null!=e.$__&&e.populated(this.path))return r;const n=this.caster;if(n&&this.casterConstructor!==Mixed)try{for(o=0;o<a;o++){if(\"Number\"===n.instance&&void 0===r[o])throw new MongooseError(\"Mongoose number arrays disallow storing undefined\");const a={};n.$isMongooseArray&&(null!=s.arrayPath?a.arrayPathIndex=o:null!=n._arrayParentPath&&(a.arrayPathIndex=o)),r[o]=n.applySetters(r[o],e,t,void 0,a)}}catch(e){throw new CastError(\"[\"+e.kind+\"]\",util.inspect(r),this.path+\".\"+o,e,this)}return r}if(t||SchemaArray.options.castNonArrays)return e&&t&&e.markModified(this.path),this.cast([r],e,t);throw new CastError(\"Array\",util.inspect(r),this.path,null,this)},SchemaArray.prototype._castForPopulate=function(r,e){if(MongooseArray||(MongooseArray=require(\"../types\").Array),Array.isArray(r)){let t;const a=r.length,s=this.caster;if(s&&this.casterConstructor!==Mixed)try{for(t=0;t<a;t++){const a={};s.$isMongooseArray&&null!=s._arrayParentPath&&(a.arrayPathIndex=t),r[t]=s.cast(r[t],e,!1,void 0,a)}}catch(e){throw new CastError(\"[\"+e.kind+\"]\",util.inspect(r),this.path+\".\"+t,e,this)}return r}throw new CastError(\"Array\",util.inspect(r),this.path,null,this)},SchemaArray.prototype.discriminator=function(r,e){let t=this;for(;t.$isMongooseArray&&!t.$isMongooseDocumentArray;)if(null==(t=t.casterConstructor)||\"function\"==typeof t)throw new MongooseError(\"You can only add an embedded discriminator on a document array, \"+this.path+\" is a plain array\");return t.discriminator(r,e)},SchemaArray.prototype.clone=function(){const r=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,r,this.schemaOptions);return e.validators=this.validators.slice(),void 0!==this.requiredValidator&&(e.requiredValidator=this.requiredValidator),e},SchemaArray.prototype.castForQuery=function(r,e){let t,a;if(2===arguments.length){if(!(t=this.$conditionalHandlers[r]))throw new Error(\"Can't use \"+r+\" with Array.\");a=t.call(this,e)}else{a=r;let e=this.casterConstructor;if(a&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(\"string\"==typeof a[e.schema.options.discriminatorKey]&&e.discriminators[a[e.schema.options.discriminatorKey]])e=e.discriminators[a[e.schema.options.discriminatorKey]];else{const r=getDiscriminatorByValue(e.discriminators,a[e.schema.options.discriminatorKey]);r&&(e=r)}const t=this.casterConstructor.prototype;let s=t&&(t.castForQuery||t.cast);!s&&e.castForQuery&&(s=e.castForQuery);const o=this.caster;Array.isArray(a)?(this.setters.reverse().forEach(r=>{a=r.call(this,a,this)}),a=a.map(function(r){return utils.isObject(r)&&r.$elemMatch?r:s?r=s.call(o,r):null!=r?r=new e(r):r})):s?a=s.call(o,a):null!=a&&(a=new e(a))}return a};const handle=SchemaArray.prototype.$conditionalHandlers={};function createLogicalQueryOperatorHandler(r){return function(e){if(!Array.isArray(e))throw new TypeError(\"conditional \"+r+\" requires an array\");const t=[];for(const r of e)t.push(cast(this.casterConstructor.schema,r));return t}}handle.$all=cast$all,handle.$options=String,handle.$elemMatch=cast$elemMatch,handle.$geoIntersects=geospatial.cast$geoIntersects,handle.$or=createLogicalQueryOperatorHandler(\"$or\"),handle.$and=createLogicalQueryOperatorHandler(\"$and\"),handle.$nor=createLogicalQueryOperatorHandler(\"$nor\"),handle.$near=handle.$nearSphere=geospatial.cast$near,handle.$within=handle.$geoWithin=geospatial.cast$within,handle.$size=handle.$minDistance=handle.$maxDistance=castToNumber,handle.$exists=$exists,handle.$type=$type,handle.$eq=handle.$gt=handle.$gte=handle.$lt=handle.$lte=handle.$ne=handle.$regex=SchemaArray.prototype.castForQuery,handle.$nin=SchemaType.prototype.$conditionalHandlers.$nin,handle.$in=SchemaType.prototype.$conditionalHandlers.$in,module.exports=SchemaArray;","node_modules/mongoose/lib/schema/buffer.js":"\"use strict\";const MongooseBuffer=require(\"../types/buffer\"),SchemaBufferOptions=require(\"../options/SchemaBufferOptions\"),SchemaType=require(\"../schematype\"),handleBitwiseOperator=require(\"./operators/bitwise\"),utils=require(\"../utils\"),Binary=MongooseBuffer.Binary,CastError=SchemaType.CastError;function SchemaBuffer(e,t){SchemaType.call(this,e,t,\"Buffer\")}function handleSingle(e){return this.castForQuery(e)}SchemaBuffer.schemaName=\"Buffer\",SchemaBuffer.defaultOptions={},SchemaBuffer.prototype=Object.create(SchemaType.prototype),SchemaBuffer.prototype.constructor=SchemaBuffer,SchemaBuffer.prototype.OptionsConstructor=SchemaBufferOptions,SchemaBuffer._checkRequired=(e=>!(!e||!e.length)),SchemaBuffer.set=SchemaType.set,SchemaBuffer.checkRequired=SchemaType.checkRequired,SchemaBuffer.prototype.checkRequired=function(e,t){return SchemaType._isRef(this,e,t,!0)?!!e:this.constructor._checkRequired(e)},SchemaBuffer.prototype.cast=function(e,t,r){let o;if(SchemaType._isRef(this,e,t,r)){if(e&&e.isMongooseBuffer)return e;if(Buffer.isBuffer(e))return e&&e.isMongooseBuffer||(e=new MongooseBuffer(e,[this.path,t]),null!=this.options.subtype&&(e._subtype=this.options.subtype)),e;if(e instanceof Binary){if(o=new MongooseBuffer(e.value(!0),[this.path,t]),\"number\"!=typeof e.sub_type)throw new CastError(\"Buffer\",e,this.path,null,this);return o._subtype=e.sub_type,o}return this._castRef(e,t,r)}if(e&&e._id&&(e=e._id),e&&e.isMongooseBuffer)return e;if(Buffer.isBuffer(e))return e&&e.isMongooseBuffer||(e=new MongooseBuffer(e,[this.path,t]),null!=this.options.subtype&&(e._subtype=this.options.subtype)),e;if(e instanceof Binary){if(o=new MongooseBuffer(e.value(!0),[this.path,t]),\"number\"!=typeof e.sub_type)throw new CastError(\"Buffer\",e,this.path,null,this);return o._subtype=e.sub_type,o}if(null===e)return e;const s=typeof e;if(\"string\"===s||\"number\"===s||Array.isArray(e)||\"object\"===s&&\"Buffer\"===e.type&&Array.isArray(e.data))return\"number\"===s&&(e=[e]),o=new MongooseBuffer(e,[this.path,t]),null!=this.options.subtype&&(o._subtype=this.options.subtype),o;throw new CastError(\"Buffer\",e,this.path,null,this)},SchemaBuffer.prototype.subtype=function(e){return this.options.subtype=e,this},SchemaBuffer.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$bitsAllClear:handleBitwiseOperator,$bitsAnyClear:handleBitwiseOperator,$bitsAllSet:handleBitwiseOperator,$bitsAnySet:handleBitwiseOperator,$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle}),SchemaBuffer.prototype.castForQuery=function(e,t){let r;if(2===arguments.length){if(!(r=this.$conditionalHandlers[e]))throw new Error(\"Can't use \"+e+\" with Buffer.\");return r.call(this,t)}t=e;const o=this._castForQuery(t);return o?o.toObject({transform:!1,virtuals:!1}):o},module.exports=SchemaBuffer;","node_modules/mongoose/lib/schema/date.js":"\"use strict\";const MongooseError=require(\"../error/index\"),SchemaDateOptions=require(\"../options/SchemaDateOptions\"),SchemaType=require(\"../schematype\"),castDate=require(\"../cast/date\"),utils=require(\"../utils\"),CastError=SchemaType.CastError;function SchemaDate(t,e){SchemaType.call(this,t,e,\"Date\")}function handleSingle(t){return this.cast(t)}SchemaDate.schemaName=\"Date\",SchemaDate.defaultOptions={},SchemaDate.prototype=Object.create(SchemaType.prototype),SchemaDate.prototype.constructor=SchemaDate,SchemaDate.prototype.OptionsConstructor=SchemaDateOptions,SchemaDate._cast=castDate,SchemaDate.set=SchemaType.set,SchemaDate.cast=function(t){return 0===arguments.length?this._cast:(!1===t&&(t=this._defaultCaster),this._cast=t,this._cast)},SchemaDate._defaultCaster=(t=>{if(null!=t&&!(t instanceof Date))throw new Error;return t}),SchemaDate.prototype.expires=function(t){return this._index&&\"Object\"===this._index.constructor.name||(this._index={}),this._index.expires=t,utils.expires(this._index),this},SchemaDate._checkRequired=(t=>t instanceof Date),SchemaDate.checkRequired=SchemaType.checkRequired,SchemaDate.prototype.checkRequired=function(t,e){if(SchemaType._isRef(this,t,e,!0))return!!t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():SchemaDate.checkRequired())(t)},SchemaDate.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(t){return t.validator!==this.minValidator},this)),t){let a=e||MongooseError.messages.Date.min;\"string\"==typeof a&&(a=a.replace(/{MIN}/,t===Date.now?\"Date.now()\":t.toString()));const i=this;this.validators.push({validator:this.minValidator=function(e){let a=t;\"function\"==typeof t&&t!==Date.now&&(a=a.call(this));const r=a===Date.now?a():i.cast(a);return null===e||e.valueOf()>=r.valueOf()},message:a,type:\"min\",min:t})}return this},SchemaDate.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(t){return t.validator!==this.maxValidator},this)),t){let a=e||MongooseError.messages.Date.max;\"string\"==typeof a&&(a=a.replace(/{MAX}/,t===Date.now?\"Date.now()\":t.toString()));const i=this;this.validators.push({validator:this.maxValidator=function(e){let a=t;\"function\"==typeof a&&a!==Date.now&&(a=a.call(this));const r=a===Date.now?a():i.cast(a);return null===e||e.valueOf()<=r.valueOf()},message:a,type:\"max\",max:t})}return this},SchemaDate.prototype.cast=function(t){let e;e=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():SchemaDate.cast();try{return e(t)}catch(e){throw new CastError(\"date\",t,this.path,e,this)}},SchemaDate.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle}),SchemaDate.prototype.castForQuery=function(t,e){if(2!==arguments.length)return this._castForQuery(t);const a=this.$conditionalHandlers[t];if(!a)throw new Error(\"Can't use \"+t+\" with Date.\");return a.call(this,e)},module.exports=SchemaDate;","node_modules/mongoose/lib/schema/objectid.js":"\"use strict\";const SchemaObjectIdOptions=require(\"../options/SchemaObjectIdOptions\"),SchemaType=require(\"../schematype\"),castObjectId=require(\"../cast/objectid\"),oid=require(\"../types/objectid\"),utils=require(\"../utils\"),CastError=SchemaType.CastError;let Document;function ObjectId(t,e){const c=\"string\"==typeof t&&24===t.length&&/^[a-f0-9]+$/i.test(t),o=e&&e.suppressWarning;!c&&void 0!==t||o||(console.warn(\"mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema.\"),console.trace()),SchemaType.call(this,t,e,\"ObjectID\")}function handleSingle(t){return this.cast(t)}function defaultId(){return new oid}function resetId(t){if(Document||(Document=require(\"./../document\")),this instanceof Document){if(void 0===t){const t=new oid;return this.$__._id=t,t}this.$__._id=t}return t}ObjectId.schemaName=\"ObjectId\",ObjectId.defaultOptions={},ObjectId.prototype=Object.create(SchemaType.prototype),ObjectId.prototype.constructor=ObjectId,ObjectId.prototype.OptionsConstructor=SchemaObjectIdOptions,ObjectId.get=SchemaType.get,ObjectId.set=SchemaType.set,ObjectId.prototype.auto=function(t){return t&&(this.default(defaultId),this.set(resetId)),this},ObjectId._checkRequired=(t=>t instanceof oid),ObjectId._cast=castObjectId,ObjectId.cast=function(t){return 0===arguments.length?this._cast:(!1===t&&(t=this._defaultCaster),this._cast=t,this._cast)},ObjectId._defaultCaster=(t=>{if(!(t instanceof oid))throw new Error(t+\" is not an instance of ObjectId\");return t}),ObjectId.checkRequired=SchemaType.checkRequired,ObjectId.prototype.checkRequired=function(t,e){if(SchemaType._isRef(this,t,e,!0))return!!t;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():ObjectId.checkRequired())(t)},ObjectId.prototype.cast=function(t,e,c){if(SchemaType._isRef(this,t,e,c))return t instanceof oid?t:null!=t&&\"objectid\"===(t.constructor.name||\"\").toLowerCase()?new oid(t.toHexString()):this._castRef(t,e,c);let o;o=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():ObjectId.cast();try{return o(t)}catch(e){throw new CastError(\"ObjectId\",t,this.path,e,this)}},ObjectId.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle}),defaultId.$runBeforeSetters=!0,module.exports=ObjectId;","node_modules/mongoose/lib/schema/decimal128.js":"\"use strict\";const SchemaType=require(\"../schematype\"),CastError=SchemaType.CastError,Decimal128Type=require(\"../types/decimal128\"),castDecimal128=require(\"../cast/decimal128\"),utils=require(\"../utils\");function Decimal128(e,t){SchemaType.call(this,e,t,\"Decimal128\")}function handleSingle(e){return this.cast(e)}Decimal128.schemaName=\"Decimal128\",Decimal128.defaultOptions={},Decimal128.prototype=Object.create(SchemaType.prototype),Decimal128.prototype.constructor=Decimal128,Decimal128._cast=castDecimal128,Decimal128.set=SchemaType.set,Decimal128.cast=function(e){return 0===arguments.length?this._cast:(!1===e&&(e=this._defaultCaster),this._cast=e,this._cast)},Decimal128._defaultCaster=(e=>{if(null!=e&&!(e instanceof Decimal128Type))throw new Error;return e}),Decimal128._checkRequired=(e=>e instanceof Decimal128Type),Decimal128.checkRequired=SchemaType.checkRequired,Decimal128.prototype.checkRequired=function(e,t){if(SchemaType._isRef(this,e,t,!0))return!!e;return(\"function\"==typeof this.constructor.checkRequired?this.constructor.checkRequired():Decimal128.checkRequired())(e)},Decimal128.prototype.cast=function(e,t,c){if(SchemaType._isRef(this,e,t,c))return e instanceof Decimal128Type?e:this._castRef(e,t,c);let i;i=\"function\"==typeof this._castFunction?this._castFunction:\"function\"==typeof this.constructor.cast?this.constructor.cast():Decimal128.cast();try{return i(e)}catch(t){throw new CastError(\"Decimal128\",e,this.path,t,this)}},Decimal128.prototype.$conditionalHandlers=utils.options(SchemaType.prototype.$conditionalHandlers,{$gt:handleSingle,$gte:handleSingle,$lt:handleSingle,$lte:handleSingle}),module.exports=Decimal128;","node_modules/mongoose/lib/schema/map.js":"\"use strict\";const MongooseMap=require(\"../types/map\"),SchemaMapOptions=require(\"../options/SchemaMapOptions\"),SchemaType=require(\"../schematype\");class Map extends SchemaType{constructor(e,s){super(e,s,\"Map\"),this.$isSchemaMap=!0}set(e,s){return SchemaType.set(e,s)}cast(e,s,t){if(e instanceof MongooseMap)return e;const a=this.path;if(t){const t=new MongooseMap({},a,s,this.$__schemaType);if(e instanceof global.Map)for(const o of e.keys()){let p=e.get(o);p=null==p?t.$__schemaType._castNullish(p):t.$__schemaType.cast(p,s,!0,null,{path:a+\".\"+o}),t.$init(o,p)}else for(const o of Object.keys(e)){let p=e[o];p=null==p?t.$__schemaType._castNullish(p):t.$__schemaType.cast(p,s,!0,null,{path:a+\".\"+o}),t.$init(o,p)}return t}return new MongooseMap(e,a,s,this.$__schemaType)}clone(){const e=super.clone();return null!=this.$__schemaType&&(e.$__schemaType=this.$__schemaType.clone()),e}}Map.prototype.OptionsConstructor=SchemaMapOptions,Map.defaultOptions={},module.exports=Map;","node_modules/mongoose/lib/options/SchemaStringOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaStringOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaStringOptions.prototype,\"enum\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"match\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"lowercase\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"trim\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"uppercase\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"minLength\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"minlength\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"maxLength\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"maxlength\",opts),Object.defineProperty(SchemaStringOptions.prototype,\"populate\",opts),module.exports=SchemaStringOptions;","node_modules/mongoose/lib/cast/string.js":"\"use strict\";const CastError=require(\"../error/cast\");module.exports=function(r,t){if(null==r)return r;if(r._id&&\"string\"==typeof r._id)return r._id;if(r.toString&&r.toString!==Object.prototype.toString&&!Array.isArray(r))return r.toString();throw new CastError(\"string\",r,t)};","node_modules/mongoose/lib/options/SchemaNumberOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaNumberOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaNumberOptions.prototype,\"min\",opts),Object.defineProperty(SchemaNumberOptions.prototype,\"max\",opts),Object.defineProperty(SchemaNumberOptions.prototype,\"enum\",opts),Object.defineProperty(SchemaNumberOptions.prototype,\"populate\",opts),module.exports=SchemaNumberOptions;","node_modules/mongoose/lib/cast/number.js":"\"use strict\";const assert=require(\"assert\");module.exports=function(r){return null==r?r:\"\"===r?null:(\"string\"!=typeof r&&\"boolean\"!=typeof r||(r=Number(r)),assert.ok(!isNaN(r)),r instanceof Number?r.valueOf():\"number\"==typeof r?r:Array.isArray(r)||\"function\"!=typeof r.valueOf?r.toString&&!Array.isArray(r)&&r.toString()==Number(r)?Number(r):void assert.ok(!1):Number(r.valueOf()))};","node_modules/mongoose/lib/schema/operators/bitwise.js":"\"use strict\";const CastError=require(\"../../error/cast\");function handleBitwiseOperator(r){const t=this;return Array.isArray(r)?r.map(function(r){return _castNumber(t.path,r)}):Buffer.isBuffer(r)?r:_castNumber(t.path,r)}function _castNumber(r,t){const e=Number(t);if(isNaN(e))throw new CastError(\"number\",t,r);return e}module.exports=handleBitwiseOperator;","node_modules/mongoose/lib/options/SchemaDocumentArrayOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaDocumentArrayOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaDocumentArrayOptions.prototype,\"excludeIndexes\",opts),Object.defineProperty(SchemaDocumentArrayOptions.prototype,\"_id\",opts),module.exports=SchemaDocumentArrayOptions;","node_modules/mongoose/lib/helpers/model/discriminator.js":"\"use strict\";const Mixed=require(\"../../schema/mixed\"),ObjectId=require(\"../../types/objectid\"),defineKey=require(\"../document/compile\").defineKey,get=require(\"../get\"),utils=require(\"../../utils\"),CUSTOMIZABLE_DISCRIMINATOR_OPTIONS={toJSON:!0,toObject:!0,_id:!0,id:!0};module.exports=function(i,o,e,t,s){if(!e||!e.instanceOfSchema)throw new Error(\"You must pass a valid discriminator Schema\");if(i.schema.discriminatorMapping&&!i.schema.discriminatorMapping.isRoot)throw new Error('Discriminator \"'+o+'\" can only be a discriminator of the root model');if(s){const o=get(i.base,\"options.applyPluginsToDiscriminators\",!1);i.base._applyPlugins(e,{skipTopLevel:!o})}const n=i.schema.options.discriminatorKey,r=i.schema.path(n);if(null!=r)utils.hasUserDefinedProperty(r.options,\"select\")||(r.options.select=!0),r.options.$skipDiscriminatorCheck=!0;else{const o={};o[n]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},o[n][i.schema.options.typeKey]=String,i.schema.add(o),defineKey(n,null,i.prototype,null,[n],i.schema.options)}if(e.path(n)&&!0!==e.path(n).options.$skipDiscriminatorCheck)throw new Error('Discriminator \"'+o+'\" cannot have field with name \"'+n+'\"');let c=o;if((\"string\"==typeof t&&t.length||\"number\"==typeof t||t instanceof ObjectId)&&(c=t),function(o,e){o._baseSchema=e,e.paths._id&&e.paths._id.options&&!e.paths._id.options.auto&&o.remove(\"_id\");const t=Object.keys(e.paths),s=[];for(const i of t){if(o.nested[i]){s.push(i);continue}if(-1===i.indexOf(\".\"))continue;const e=i.split(\".\").slice(0,-1);let t=\"\";for(const n of e)t+=(t.length?\".\":\"\")+n,(o.paths[t]instanceof Mixed||o.singleNestedPaths[t]instanceof Mixed)&&s.push(i)}utils.merge(o,e,{isDiscriminatorSchemaMerge:!0,omit:{discriminators:!0,base:!0},omitNested:s.reduce((i,o)=>(i[\"tree.\"+o]=!0,i),{})});for(const i of s)delete o.paths[i];o.childSchemas.forEach(i=>{i.model.prototype.$__setSchema(i.schema)});const a={};a[n]={default:c,select:!0,set:function(i){if(i===c)return c;throw new Error(\"Can't set discriminator key \\\"\"+n+'\"')},$skipDiscriminatorCheck:!0},a[n][o.options.typeKey]=r?r.instance:String,o.add(a),o.discriminatorMapping={key:n,value:c,isRoot:!1},e.options.collection&&(o.options.collection=e.options.collection);const p=o.options.toJSON,l=o.options.toObject,m=o.options._id,d=o.options.id,h=Object.keys(o.options);o.options.discriminatorKey=e.options.discriminatorKey;for(const i of h)if(!CUSTOMIZABLE_DISCRIMINATOR_OPTIONS[i]){if(\"pluralization\"===i&&1==o.options[i]&&null==e.options[i])continue;if(!utils.deepEqual(o.options[i],e.options[i]))throw new Error(\"Can't customize discriminator option \"+i+\" (can only modify \"+Object.keys(CUSTOMIZABLE_DISCRIMINATOR_OPTIONS).join(\", \")+\")\")}o.options=utils.clone(e.options),p&&(o.options.toJSON=p),l&&(o.options.toObject=l),void 0!==m&&(o.options._id=m),o.options.id=d,o.s.hooks=i.schema.s.hooks.merge(o.s.hooks),o.plugins=Array.prototype.slice.call(e.plugins),o.callQueue=e.callQueue.concat(o.callQueue),delete o._requiredpaths}(e,i.schema),i.discriminators||(i.discriminators={}),i.schema.discriminatorMapping||(i.schema.discriminatorMapping={key:n,value:null,isRoot:!0}),i.schema.discriminators||(i.schema.discriminators={}),i.schema.discriminators[o]=e,i.discriminators[o])throw new Error('Discriminator with name \"'+o+'\" already exists');return e};","node_modules/mongoose/lib/helpers/schema/handleIdOption.js":"\"use strict\";const addAutoId=require(\"./addAutoId\");module.exports=function(d,o){return null==o||null==o._id?d:(d=d.clone(),o._id?d.paths._id||(addAutoId(d),d.options._id=!0):(d.remove(\"_id\"),d.options._id=!1),d)};","node_modules/mongoose/lib/helpers/discriminator/getConstructor.js":"\"use strict\";const getDiscriminatorByValue=require(\"./getDiscriminatorByValue\");module.exports=function(i,r){const s=i.schema.options.discriminatorKey;if(null!=r&&i.discriminators&&null!=r[s])if(i.discriminators[r[s]])i=i.discriminators[r[s]];else{const t=getDiscriminatorByValue(i.discriminators,r[s]);t&&(i=t)}return i};","node_modules/mongoose/lib/options/SchemaArrayOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaArrayOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaArrayOptions.prototype,\"enum\",opts),Object.defineProperty(SchemaArrayOptions.prototype,\"of\",opts),module.exports=SchemaArrayOptions;","node_modules/mongoose/lib/helpers/arrayDepth.js":"\"use strict\";function arrayDepth(n){if(!Array.isArray(n))return{min:0,max:0,containsNonArrayItem:!0};if(0===n.length)return{min:1,max:1,containsNonArrayItem:!1};const r=arrayDepth(n[0]);for(let a=1;a<n.length;++a){const t=arrayDepth(n[a]);t.min<r.min&&(r.min=t.min),t.max>r.max&&(r.max=t.max),r.containsNonArrayItem=r.containsNonArrayItem||t.containsNonArrayItem}return r.min=r.min+1,r.max=r.max+1,r}module.exports=arrayDepth;","node_modules/mongoose/lib/helpers/query/isOperator.js":"\"use strict\";const specialKeys=new Set([\"$ref\",\"$id\",\"$db\"]);module.exports=function(e){return e.startsWith(\"$\")&&!specialKeys.has(e)};","node_modules/mongoose/lib/schema/operators/helpers.js":"\"use strict\";const SchemaNumber=require(\"../number\");function castToNumber(r){return SchemaNumber.cast()(r)}function castArraysOfNumbers(r,s){r.forEach(function(a,e){Array.isArray(a)?castArraysOfNumbers(a,s):r[e]=castToNumber.call(s,a)})}exports.castToNumber=castToNumber,exports.castArraysOfNumbers=castArraysOfNumbers;","node_modules/mongoose/lib/schema/operators/geospatial.js":"\"use strict\";const castArraysOfNumbers=require(\"./helpers\").castArraysOfNumbers,castToNumber=require(\"./helpers\").castToNumber;function cast$near(e){const r=require(\"../array\");if(Array.isArray(e))return castArraysOfNumbers(e,this),e;if(_castMinMaxDistance(this,e),e&&e.$geometry)return cast$geometry(e,this);if(!Array.isArray(e))throw new TypeError(\"$near must be either an array or an object with a $geometry property\");return r.prototype.castForQuery.call(this,e)}function cast$geometry(e,r){switch(e.$geometry.type){case\"Polygon\":case\"LineString\":case\"Point\":castArraysOfNumbers(e.$geometry.coordinates,r)}return _castMinMaxDistance(r,e),e}function cast$within(e){if(_castMinMaxDistance(this,e),e.$box||e.$polygon){const r=e.$box?\"$box\":\"$polygon\";e[r].forEach(e=>{if(!Array.isArray(e)){throw new TypeError(\"Invalid $within $box argument. Expected an array, received \"+e)}e.forEach((r,t)=>{e[t]=castToNumber.call(this,r)})})}else if(e.$center||e.$centerSphere){const r=e.$center?\"$center\":\"$centerSphere\";e[r].forEach((t,a)=>{Array.isArray(t)?t.forEach((e,r)=>{t[r]=castToNumber.call(this,e)}):e[r][a]=castToNumber.call(this,t)})}else e.$geometry&&cast$geometry(e,this);return e}function cast$geoIntersects(e){if(e.$geometry)return cast$geometry(e,this),e}function _castMinMaxDistance(e,r){r.$maxDistance&&(r.$maxDistance=castToNumber.call(e,r.$maxDistance)),r.$minDistance&&(r.$minDistance=castToNumber.call(e,r.$minDistance))}exports.cast$geoIntersects=cast$geoIntersects,exports.cast$near=cast$near,exports.cast$within=cast$within;","node_modules/mongoose/lib/helpers/discriminator/getDiscriminatorByValue.js":"\"use strict\";const areDiscriminatorValuesEqual=require(\"./areDiscriminatorValuesEqual\");module.exports=function(r,i){if(null==r)return null;for(const a of Object.keys(r)){const e=r[a];if(e.schema&&e.schema.discriminatorMapping&&areDiscriminatorValuesEqual(e.schema.discriminatorMapping.value,i))return e}return null};","node_modules/mongoose/lib/schema/operators/text.js":"\"use strict\";const CastError=require(\"../../error/cast\"),castBoolean=require(\"../../cast/boolean\"),castString=require(\"../../cast/string\");module.exports=function(e,t){if(null==e||\"object\"!=typeof e)throw new CastError(\"$text\",e,t);return null!=e.$search&&(e.$search=castString(e.$search,t+\".$search\")),null!=e.$language&&(e.$language=castString(e.$language,t+\".$language\")),null!=e.$caseSensitive&&(e.$caseSensitive=castBoolean(e.$caseSensitive,t+\".$castSensitive\")),null!=e.$diacriticSensitive&&(e.$diacriticSensitive=castBoolean(e.$diacriticSensitive,t+\".$diacriticSensitive\")),e};","node_modules/mongoose/lib/helpers/discriminator/getSchemaDiscriminatorByValue.js":"\"use strict\";const areDiscriminatorValuesEqual=require(\"./areDiscriminatorValuesEqual\");module.exports=function(i,r){if(null==i||null==i.discriminators)return null;for(const n of Object.keys(i.discriminators)){const s=i.discriminators[n];if(null!=s.discriminatorMapping&&areDiscriminatorValuesEqual(s.discriminatorMapping.value,r))return s}return null};","node_modules/mongoose/lib/helpers/discriminator/areDiscriminatorValuesEqual.js":"\"use strict\";const ObjectId=require(\"../../types/objectid\");module.exports=function(t,e){return\"string\"==typeof t&&\"string\"==typeof e?t===e:\"number\"==typeof t&&\"number\"==typeof e?t===e:t instanceof ObjectId&&e instanceof ObjectId&&t.toString()===e.toString()};","node_modules/mongoose/lib/options/SchemaSingleNestedOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaSingleNestedOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaSingleNestedOptions.prototype,\"_id\",opts),module.exports=SchemaSingleNestedOptions;","node_modules/mongoose/lib/types/buffer.js":"\"use strict\";const Binary=require(\"../driver\").get().Binary,utils=require(\"../utils\"),Buffer=require(\"safe-buffer\").Buffer;function MongooseBuffer(e,t,r){let o,i,n,f,u;return o=0===arguments.length||null===arguments[0]||void 0===arguments[0]?0:e,Array.isArray(t)?(n=t[0],f=t[1]):i=t,u=\"number\"==typeof o||o instanceof Number?Buffer.alloc(o):Buffer.from(o,i,r),utils.decorate(u,MongooseBuffer.mixin),u.isMongooseBuffer=!0,u[MongooseBuffer.pathSymbol]=n,u[parentSymbol]=f,u._subtype=0,u}const pathSymbol=Symbol.for(\"mongoose#Buffer#_path\"),parentSymbol=Symbol.for(\"mongoose#Buffer#_parent\");MongooseBuffer.pathSymbol=pathSymbol,MongooseBuffer.mixin={_subtype:void 0,_markModified:function(){const e=this[parentSymbol];return e&&e.markModified(this[MongooseBuffer.pathSymbol]),this},write:function(){const e=Buffer.prototype.write.apply(this,arguments);return e>0&&this._markModified(),e},copy:function(e){const t=Buffer.prototype.copy.apply(this,arguments);return e&&e.isMongooseBuffer&&e._markModified(),t}},\"writeUInt8 writeUInt16 writeUInt32 writeInt8 writeInt16 writeInt32 writeFloat writeDouble fill utf8Write binaryWrite asciiWrite set writeUInt16LE writeUInt16BE writeUInt32LE writeUInt32BE writeInt16LE writeInt16BE writeInt32LE writeInt32BE writeFloatLE writeFloatBE writeDoubleLE writeDoubleBE\".split(\" \").forEach(function(e){Buffer.prototype[e]&&(MongooseBuffer.mixin[e]=function(){const t=Buffer.prototype[e].apply(this,arguments);return this._markModified(),t})}),MongooseBuffer.mixin.toObject=function(e){const t=\"number\"==typeof e?e:this._subtype||0;return new Binary(Buffer.from(this),t)},MongooseBuffer.mixin.toBSON=function(){return new Binary(this,this._subtype||0)},MongooseBuffer.mixin.equals=function(e){if(!Buffer.isBuffer(e))return!1;if(this.length!==e.length)return!1;for(let t=0;t<this.length;++t)if(this[t]!==e[t])return!1;return!0},MongooseBuffer.mixin.subtype=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Invalid subtype. Expected a number\");this._subtype!==e&&this._markModified(),this._subtype=e},MongooseBuffer.Binary=Binary,module.exports=MongooseBuffer;","node_modules/mongoose/lib/options/SchemaBufferOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaBufferOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaBufferOptions.prototype,\"subtype\",opts),module.exports=SchemaBufferOptions;","node_modules/mongoose/lib/options/SchemaDateOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaDateOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaDateOptions.prototype,\"min\",opts),Object.defineProperty(SchemaDateOptions.prototype,\"max\",opts),Object.defineProperty(SchemaDateOptions.prototype,\"expires\",opts),module.exports=SchemaDateOptions;","node_modules/mongoose/lib/cast/date.js":"\"use strict\";const assert=require(\"assert\");module.exports=function(e){if(null==e||\"\"===e)return null;if(e instanceof Date)return assert.ok(!isNaN(e.valueOf())),e;let t;if(assert.ok(\"boolean\"!=typeof e),t=e instanceof Number||\"number\"==typeof e?new Date(e):\"string\"==typeof e&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?new Date(Number(e)):\"function\"==typeof e.valueOf?new Date(e.valueOf()):new Date(e),!isNaN(t.valueOf()))return t;assert.ok(!1)};","node_modules/mongoose/lib/options/SchemaObjectIdOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaObjectIdOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaObjectIdOptions.prototype,\"auto\",opts),Object.defineProperty(SchemaObjectIdOptions.prototype,\"populate\",opts),module.exports=SchemaObjectIdOptions;","node_modules/mongoose/lib/cast/objectid.js":"\"use strict\";const ObjectId=require(\"../driver\").get().ObjectId,assert=require(\"assert\");module.exports=function(t){if(null==t)return t;if(t instanceof ObjectId)return t;if(t._id){if(t._id instanceof ObjectId)return t._id;if(t._id.toString instanceof Function)return new ObjectId(t._id.toString())}if(t.toString instanceof Function)return new ObjectId(t.toString());assert.ok(!1)};","node_modules/mongoose/lib/cast/decimal128.js":"\"use strict\";const Decimal128Type=require(\"../types/decimal128\"),assert=require(\"assert\");module.exports=function(e){return null==e?e:\"object\"==typeof e&&\"string\"==typeof e.$numberDecimal?Decimal128Type.fromString(e.$numberDecimal):e instanceof Decimal128Type?e:\"string\"==typeof e?Decimal128Type.fromString(e):Buffer.isBuffer(e)?new Decimal128Type(e):\"number\"==typeof e?Decimal128Type.fromString(String(e)):\"function\"==typeof e.valueOf&&\"string\"==typeof e.valueOf()?Decimal128Type.fromString(e.valueOf()):void assert.ok(!1)};","node_modules/mongoose/lib/types/map.js":"\"use strict\";const Mixed=require(\"../schema/mixed\"),ObjectId=require(\"./objectid\"),deepEqual=require(\"../utils\").deepEqual,get=require(\"../helpers/get\"),handleSpreadDoc=require(\"../helpers/document/handleSpreadDoc\"),util=require(\"util\"),specialProperties=require(\"../helpers/specialProperties\"),populateModelSymbol=require(\"../helpers/symbols\").populateModelSymbol;class MongooseMap extends Map{constructor(e,t,r,o){null!=e&&\"Object\"===e.constructor.name&&(e=Object.keys(e).reduce((t,r)=>t.concat([[r,e[r]]]),[])),super(e),this.$__parent=null!=r&&null!=r.$__?r:null,this.$__path=t,this.$__schemaType=null==o?new Mixed(t):o,this.$__runDeferred()}$init(e,t){checkValidKey(e),super.set(e,t),null!=t&&t.$isSingleNested&&(t.$basePath=this.$__path+\".\"+e)}$__set(e,t){super.set(e,t)}get(e,t){return e instanceof ObjectId&&(e=e.toString()),!1===(t=t||{}).getters?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,t){if(e instanceof ObjectId&&(e=e.toString()),checkValidKey(e),t=handleSpreadDoc(t),null==this.$__schemaType)return this.$__deferred=this.$__deferred||[],void this.$__deferred.push({key:e,value:t});const r=this.$__path+\".\"+e,o=null!=this.$__parent&&this.$__parent.$__?this.$__parent.populated(r)||this.$__parent.populated(this.$__path):null,s=this.get(e);if(null!=o)null==t.$__&&(t=new o.options[populateModelSymbol](t)),t.$__.wasPopulated=!0;else try{t=this.$__schemaType.applySetters(t,this.$__parent,!1,this.get(e),{path:r})}catch(e){if(null!=this.$__parent&&null!=this.$__parent.$__)return void this.$__parent.invalidate(r,e);throw e}super.set(e,t),null!=t&&t.$isSingleNested&&(t.$basePath=this.$__path+\".\"+e);const n=this.$__parent;null==n||null==n.$__||deepEqual(t,s)||n.markModified(this.$__path+\".\"+e)}clear(){super.clear();const e=this.$__parent;null!=e&&e.markModified(this.$__path)}delete(e){e instanceof ObjectId&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(get(e,\"flattenMaps\")){const e={},t=this.keys();for(const r of t)e[r]=this.get(r);return e}return new Map(this)}toJSON(){const e={},t=this.keys();for(const r of t)e[r]=this.get(r);return e}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(const e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}}function checkValidKey(e){const t=typeof e;if(\"string\"!==t)throw new TypeError(`Mongoose maps only support string keys, got ${t}`);if(e.startsWith(\"$\"))throw new Error(`Mongoose maps do not support keys that start with \"$\", got \"${e}\"`);if(e.includes(\".\"))throw new Error(`Mongoose maps do not support keys that contain \".\", got \"${e}\"`);if(specialProperties.has(e))throw new Error(`Mongoose maps do not support reserved key name \"${e}\"`)}util.inspect.custom&&Object.defineProperty(MongooseMap.prototype,util.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:MongooseMap.prototype.inspect}),Object.defineProperty(MongooseMap.prototype,\"$__set\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(MongooseMap.prototype,\"$__parent\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(MongooseMap.prototype,\"$__path\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(MongooseMap.prototype,\"$__schemaType\",{enumerable:!1,writable:!0,configurable:!1}),Object.defineProperty(MongooseMap.prototype,\"$isMongooseMap\",{enumerable:!1,writable:!1,configurable:!1,value:!0}),Object.defineProperty(MongooseMap.prototype,\"$__deferredCalls\",{enumerable:!1,writable:!1,configurable:!1,value:!0}),module.exports=MongooseMap;","node_modules/mongoose/lib/options/SchemaMapOptions.js":"\"use strict\";const SchemaTypeOptions=require(\"./SchemaTypeOptions\");class SchemaMapOptions extends SchemaTypeOptions{}const opts=require(\"./propertyOptions\");Object.defineProperty(SchemaMapOptions.prototype,\"of\",opts),module.exports=SchemaMapOptions;","node_modules/mongoose/lib/helpers/discriminator/checkEmbeddedDiscriminatorKeyProjection.js":"\"use strict\";module.exports=function(t,e,s,i,c){const n=Object.keys(t).reduce((t,s)=>t||s.startsWith(e+\".\"),!1),o=e+\".\"+s.options.discriminatorKey;n||1!==c.length||c[0]!==o||i.splice(i.indexOf(o),1)};","node_modules/mongoose/lib/types/array.js":"\"use strict\";const CoreMongooseArray=require(\"./core_array\"),Document=require(\"../document\"),arrayAtomicsSymbol=require(\"../helpers/symbols\").arrayAtomicsSymbol,arrayParentSymbol=require(\"../helpers/symbols\").arrayParentSymbol,arrayPathSymbol=require(\"../helpers/symbols\").arrayPathSymbol,arraySchemaSymbol=require(\"../helpers/symbols\").arraySchemaSymbol,_basePush=Array.prototype.push;function MongooseArray(r,e,o,a){let y;if(Array.isArray(r)){const e=r.length;if(0===e)y=new CoreMongooseArray;else if(1===e)(y=new CoreMongooseArray(1))[0]=r[0];else if(e<1e4)y=new CoreMongooseArray,_basePush.apply(y,r);else{y=new CoreMongooseArray;for(let o=0;o<e;++o)_basePush.call(y,r[o])}null!=r[arrayAtomicsSymbol]?y[arrayAtomicsSymbol]=r[arrayAtomicsSymbol]:y[arrayAtomicsSymbol]={}}else(y=new CoreMongooseArray)[arrayAtomicsSymbol]={};return y[arrayPathSymbol]=e,y[arraySchemaSymbol]=void 0,o&&o instanceof Document&&(y[arrayParentSymbol]=o,y[arraySchemaSymbol]=a||o.schema.path(e)),y}module.exports=exports=MongooseArray;","node_modules/mongoose/lib/types/embedded.js":"\"use strict\";const Document=require(\"../document_provider\")(),EventEmitter=require(\"events\").EventEmitter,ValidationError=require(\"../error/validation\"),immediate=require(\"../helpers/immediate\"),internalToObjectOptions=require(\"../options\").internalToObjectOptions,get=require(\"../helpers/get\"),promiseOrCallback=require(\"../helpers/promiseOrCallback\"),util=require(\"util\"),documentArrayParent=require(\"../helpers/symbols\").documentArrayParent,validatorErrorSymbol=require(\"../helpers/symbols\").validatorErrorSymbol;function EmbeddedDocument(t,e,r,o,n){const i={};null!=e&&e.isMongooseDocumentArray?(this.__parentArray=e,this[documentArrayParent]=e.$parent()):(this.__parentArray=void 0,this[documentArrayParent]=void 0),this.$setIndex(n),this.$isDocumentArrayElement=!0,null!=this[documentArrayParent]&&(i.defaults=this[documentArrayParent].$__.$options.defaults),Document.call(this,t,o,r,i);const a=this;this.on(\"isNew\",function(t){a.isNew=t}),a.on(\"save\",function(){a.constructor.emit(\"save\",a)})}EmbeddedDocument.prototype=Object.create(Document.prototype),EmbeddedDocument.prototype.constructor=EmbeddedDocument;for(const t in EventEmitter.prototype)EmbeddedDocument[t]=EventEmitter.prototype[t];function registerRemoveListener(t){let e=t.ownerDocument();function r(){e.removeListener(\"save\",r),e.removeListener(\"remove\",r),t.emit(\"remove\",t),t.constructor.emit(\"remove\",t),e=t=null}e.on(\"save\",r),e.on(\"remove\",r)}EmbeddedDocument.prototype.toBSON=function(){return this.toObject(internalToObjectOptions)},EmbeddedDocument.prototype.$setIndex=function(t){if(this.__index=t,null!=get(this,\"$__.validationError\",null)){const t=Object.keys(this.$__.validationError.errors);for(const e of t)this.invalidate(e,this.$__.validationError.errors[e])}},EmbeddedDocument.prototype.markModified=function(t){if(this.$__.activePaths.modify(t),!this.__parentArray)return;const e=this.__parentArray.$path()+\".0.\"+t;this.isNew&&this.ownerDocument().$__isSelected(e)?this.__parentArray._markModified():this.__parentArray._markModified(this,t)},EmbeddedDocument.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate(\"path\")`, use `doc.populate(\"arr.0.path\")`')},EmbeddedDocument.prototype.save=function(t,e){return\"function\"==typeof t&&(e=t,t={}),(t=t||{}).suppressWarning||console.warn(\"mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.\"),promiseOrCallback(e,t=>{this.$__save(t)})},EmbeddedDocument.prototype.$__save=function(t){return immediate(()=>t(null,this))},EmbeddedDocument.prototype.$__remove=function(t){if(null!=t)return t(null,this)},EmbeddedDocument.prototype.remove=function(t,e){if(\"function\"!=typeof t||e||(e=t,t=void 0),!this.__parentArray||t&&t.noop)return this.$__remove(e),this;let r;if(!this.willRemove){if(!(r=this._doc._id))throw new Error(\"For your own good, Mongoose does not know how to remove an EmbeddedDocument that has no _id\");this.__parentArray.pull({_id:r}),this.willRemove=!0,registerRemoveListener(this)}return this.$__remove(e),this},EmbeddedDocument.prototype.update=function(){throw new Error(\"The #update method is not available on EmbeddedDocuments\")},EmbeddedDocument.prototype.inspect=function(){return this.toObject({transform:!1,virtuals:!1,flattenDecimals:!1})},util.inspect.custom&&(EmbeddedDocument.prototype[util.inspect.custom]=EmbeddedDocument.prototype.inspect),EmbeddedDocument.prototype.invalidate=function(t,e,r){if(Document.prototype.invalidate.call(this,t,e,r),!this[documentArrayParent]||null==this.__index){if(e[validatorErrorSymbol]||e instanceof ValidationError)return this.ownerDocument().$__.validationError;throw e}const o=this.__index,n=[this.__parentArray.$path(),o,t].join(\".\");return this[documentArrayParent].invalidate(n,e,r),this.ownerDocument().$__.validationError},EmbeddedDocument.prototype.$markValid=function(t){if(!this[documentArrayParent])return;const e=this.__index;if(void 0!==e){const r=[this.__parentArray.$path(),e,t].join(\".\");this[documentArrayParent].$markValid(r)}},EmbeddedDocument.prototype.$ignore=function(t){if(Document.prototype.$ignore.call(this,t),!this[documentArrayParent])return;const e=this.__index;if(void 0!==e){const r=[this.__parentArray.$path(),e,t].join(\".\");this[documentArrayParent].$ignore(r)}},EmbeddedDocument.prototype.$isValid=function(t){return void 0===this.__index||!this[documentArrayParent]||(!this[documentArrayParent].$__.validationError||!this[documentArrayParent].$__.validationError.errors[this.$__fullPath(t)])},EmbeddedDocument.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this[documentArrayParent];if(!t)return this;for(;t[documentArrayParent]||t.$__parent;)t=t[documentArrayParent]||t.$__parent;return this.$__.ownerDocument=t,this.$__.ownerDocument},EmbeddedDocument.prototype.$__fullPath=function(t){if(!this.$__.fullPath){let e=this;if(!e[documentArrayParent])return t;const r=[];for(;e[documentArrayParent]||e.$__parent;)e[documentArrayParent]?r.unshift(e.__parentArray.$path()):r.unshift(e.$basePath),e=e[documentArrayParent]||e.$__parent;this.$__.fullPath=r.join(\".\"),this.$__.ownerDocument||(this.$__.ownerDocument=e)}return t?this.$__.fullPath+\".\"+t:this.$__.fullPath},EmbeddedDocument.prototype.parent=function(){return this[documentArrayParent]},EmbeddedDocument.prototype.$parent=EmbeddedDocument.prototype.parent,EmbeddedDocument.prototype.parentArray=function(){return this.__parentArray},module.exports=EmbeddedDocument;","node_modules/mongoose/lib/types/documentarray.js":"\"use strict\";const CoreMongooseArray=require(\"./core_array\"),Document=require(\"../document\"),ObjectId=require(\"./objectid\"),castObjectId=require(\"../cast/objectid\"),getDiscriminatorByValue=require(\"../helpers/discriminator/getDiscriminatorByValue\"),internalToObjectOptions=require(\"../options\").internalToObjectOptions,util=require(\"util\"),utils=require(\"../utils\"),arrayAtomicsSymbol=require(\"../helpers/symbols\").arrayAtomicsSymbol,arrayParentSymbol=require(\"../helpers/symbols\").arrayParentSymbol,arrayPathSymbol=require(\"../helpers/symbols\").arrayPathSymbol,arraySchemaSymbol=require(\"../helpers/symbols\").arraySchemaSymbol,documentArrayParent=require(\"../helpers/symbols\").documentArrayParent,_basePush=Array.prototype.push;class CoreDocumentArray extends CoreMongooseArray{get isMongooseDocumentArray(){return!0}toBSON(){return this.toObject(internalToObjectOptions)}map(){const r=super.map.apply(this,arguments);return r[arraySchemaSymbol]=null,r[arrayPathSymbol]=null,r[arrayParentSymbol]=null,r}_cast(r,t){if(null==this[arraySchemaSymbol])return r;let e=this[arraySchemaSymbol].casterConstructor;if((e.$isMongooseDocumentArray?r&&r.isMongooseDocumentArray:r instanceof e)||r&&r.constructor&&r.constructor.baseCasterConstructor===e)return r[documentArrayParent]&&r.__parentArray||(r[documentArrayParent]=this[arrayParentSymbol],r.__parentArray=this),r.$setIndex(t),r;if(void 0===r||null===r)return null;if((Buffer.isBuffer(r)||r instanceof ObjectId||!utils.isObject(r))&&(r={_id:r}),r&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(\"string\"==typeof r[e.schema.options.discriminatorKey]&&e.discriminators[r[e.schema.options.discriminatorKey]])e=e.discriminators[r[e.schema.options.discriminatorKey]];else{const t=getDiscriminatorByValue(e.discriminators,r[e.schema.options.discriminatorKey]);t&&(e=t)}return e.$isMongooseDocumentArray?e.cast(r,this,void 0,void 0,t):new e(r,this,void 0,void 0,t)}id(r){let t,e,a;try{t=castObjectId(r).toString()}catch(r){t=null}for(const o of this)if(o&&null!==(a=o.get(\"_id\"))&&void 0!==a)if(a instanceof Document){if(e||(e=String(r)),e==a._id)return o}else if(r instanceof ObjectId||a instanceof ObjectId){if(t==a)return o}else if(r==a||utils.deepEqual(r,a))return o;return null}toObject(r){return[].concat(this.map(function(t){return null==t?null:\"function\"!=typeof t.toObject?t:t.toObject(r)}))}slice(){const r=super.slice.apply(this,arguments);return r[arrayParentSymbol]=this[arrayParentSymbol],r[arrayPathSymbol]=this[arrayPathSymbol],r}push(){const r=super.push.apply(this,arguments);return _updateParentPopulated(this),r}pull(){const r=super.pull.apply(this,arguments);return _updateParentPopulated(this),r}shift(){const r=super.shift.apply(this,arguments);return _updateParentPopulated(this),r}splice(){const r=super.splice.apply(this,arguments);return _updateParentPopulated(this),r}inspect(){return this.toObject()}create(r){let t=this[arraySchemaSymbol].casterConstructor;if(r&&t.discriminators&&t.schema&&t.schema.options&&t.schema.options.discriminatorKey)if(\"string\"==typeof r[t.schema.options.discriminatorKey]&&t.discriminators[r[t.schema.options.discriminatorKey]])t=t.discriminators[r[t.schema.options.discriminatorKey]];else{const e=getDiscriminatorByValue(t.discriminators,r[t.schema.options.discriminatorKey]);e&&(t=e)}return new t(r,this)}notify(r){const t=this;return function e(a,o){let i=(o=o||t).length;for(;i--;)if(null!=o[i]){switch(r){case\"save\":a=t[i]}o[i].isMongooseArray?e(a,o[i]):o[i]&&o[i].emit(r,a)}}}_markModified(r,t){const e=this[arrayParentSymbol];let a;if(e){if(a=this[arrayPathSymbol],arguments.length)if(null!=t){a=a+\".\"+r.__index+\".\"+t}else a=a+\".\"+r;if(null!=a&&a.endsWith(\".$\"))return this;e.markModified(a,arguments.length>0?r:e)}return this}}function _updateParentPopulated(r){const t=r[arrayParentSymbol];if(!t||null==t.$__.populated)return;const e=Object.keys(t.$__.populated).filter(t=>t.startsWith(r[arrayPathSymbol]+\".\"));for(const a of e){const e=a.slice((r[arrayPathSymbol]+\".\").length);Array.isArray(t.$__.populated[a].value)&&(t.$__.populated[a].value=r.map(r=>r.populated(e)))}}function MongooseDocumentArray(r,t,e){const a=new CoreDocumentArray;if(a[arrayAtomicsSymbol]={},a[arraySchemaSymbol]=void 0,Array.isArray(r)&&(r[arrayPathSymbol]===t&&r[arrayParentSymbol]===e&&(a[arrayAtomicsSymbol]=Object.assign({},r[arrayAtomicsSymbol])),r.forEach(r=>{_basePush.call(a,r)})),a[arrayPathSymbol]=t,e&&e instanceof Document)for(a[arrayParentSymbol]=e,a[arraySchemaSymbol]=e.schema.path(t);null!=a&&null!=a[arraySchemaSymbol]&&a[arraySchemaSymbol].$isMongooseArray&&!a[arraySchemaSymbol].$isMongooseDocumentArray;)a[arraySchemaSymbol]=a[arraySchemaSymbol].casterConstructor;return a}util.inspect.custom&&(CoreDocumentArray.prototype[util.inspect.custom]=CoreDocumentArray.prototype.inspect),module.exports=MongooseDocumentArray;","node_modules/mongoose/lib/types/subdocument.js":"\"use strict\";const Document=require(\"../document\"),immediate=require(\"../helpers/immediate\"),internalToObjectOptions=require(\"../options\").internalToObjectOptions,promiseOrCallback=require(\"../helpers/promiseOrCallback\"),documentArrayParent=require(\"../helpers/symbols\").documentArrayParent;function Subdocument(t,e,o,i,n){this.$isSingleNested=!0,null!=n&&null!=n.path&&(this.$basePath=n.path);const r=null!=n&&n.priorDoc;let s=null;if(r&&(this._doc=Object.assign({},n.priorDoc._doc),delete this._doc[this.$__schema.options.discriminatorKey],s=Object.keys(n.priorDoc._doc||{}).filter(t=>t!==this.$__schema.options.discriminatorKey)),null!=o&&(n=Object.assign({},n,{isNew:o.isNew,defaults:o.$__.$options.defaults})),Document.call(this,t,e,i,n),r){for(const t of s)if(!this.$__.activePaths.states.modify[t]&&!this.$__.activePaths.states.default[t]&&!this.$__.$setCalled.has(t)){const e=this.$__schema.path(t),o=null==e?void 0:e.getDefault(this);void 0===o?delete this._doc[t]:(this._doc[t]=o,this.$__.activePaths.default(t))}delete n.priorDoc,delete this.$__.$options.priorDoc}}function registerRemoveListener(t){let e=t.ownerDocument();function o(){e.removeListener(\"save\",o),e.removeListener(\"remove\",o),t.emit(\"remove\",t),t.constructor.emit(\"remove\",t),e=t=null}e.on(\"save\",o),e.on(\"remove\",o)}module.exports=Subdocument,Subdocument.prototype=Object.create(Document.prototype),Subdocument.prototype.toBSON=function(){return this.toObject(internalToObjectOptions)},Subdocument.prototype.save=function(t,e){return\"function\"==typeof t&&(e=t,t={}),(t=t||{}).suppressWarning||console.warn(\"mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app.\"),promiseOrCallback(e,t=>{this.$__save(t)})},Subdocument.prototype.$__save=function(t){return immediate(()=>t(null,this))},Subdocument.prototype.$isValid=function(t){return this.$__parent&&this.$basePath?this.$__parent.$isValid([this.$basePath,t].join(\".\")):Document.prototype.$isValid.call(this,t)},Subdocument.prototype.markModified=function(t){if(Document.prototype.markModified.call(this,t),this.$__parent&&this.$basePath){if(this.$__parent.isDirectModified(this.$basePath))return;this.$__parent.markModified([this.$basePath,t].join(\".\"),this)}},Subdocument.prototype.isModified=function(t,e){return this.$__parent&&this.$basePath?Array.isArray(t)||\"string\"==typeof t?(t=(t=Array.isArray(t)?t:t.split(\" \")).map(t=>[this.$basePath,t].join(\".\")),this.$__parent.isModified(t,e)):this.$__parent.isModified(this.$basePath):Document.prototype.isModified.call(this,t,e)},Subdocument.prototype.$markValid=function(t){Document.prototype.$markValid.call(this,t),this.$__parent&&this.$basePath&&this.$__parent.$markValid([this.$basePath,t].join(\".\"))},Subdocument.prototype.invalidate=function(t,e,o){if(e!==this.ownerDocument().$__.validationError&&Document.prototype.invalidate.call(this,t,e,o),this.$__parent&&this.$basePath)this.$__parent.invalidate([this.$basePath,t].join(\".\"),e,o);else if(\"cast\"===e.kind||\"CastError\"===e.name)throw e;return this.ownerDocument().$__.validationError},Subdocument.prototype.$ignore=function(t){Document.prototype.$ignore.call(this,t),this.$__parent&&this.$basePath&&this.$__parent.$ignore([this.$basePath,t].join(\".\"))},Subdocument.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this.$__parent;if(!t)return this;for(;t.$__parent||t[documentArrayParent];)t=t.$__parent||t[documentArrayParent];return this.$__.ownerDocument=t,this.$__.ownerDocument},Subdocument.prototype.parent=function(){return this.$__parent},Subdocument.prototype.$parent=Subdocument.prototype.parent,Subdocument.prototype.$__remove=function(t){return t(null,this)},Subdocument.prototype.remove=function(t,e){\"function\"==typeof t&&(e=t,t=null),registerRemoveListener(this),t&&t.noop||this.$__parent.set(this.$basePath,null),\"function\"==typeof e&&e(null)},Subdocument.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate(\"path\")`, use `doc.populate(\"nested.path\")`')};","node_modules/mongoose/lib/types/core_array.js":"\"use strict\";const Document=require(\"../document\"),EmbeddedDocument=require(\"./embedded\"),MongooseError=require(\"../error/mongooseError\"),ObjectId=require(\"./objectid\"),cleanModifiedSubpaths=require(\"../helpers/document/cleanModifiedSubpaths\"),get=require(\"../helpers/get\"),internalToObjectOptions=require(\"../options\").internalToObjectOptions,utils=require(\"../utils\"),util=require(\"util\"),arrayAtomicsSymbol=require(\"../helpers/symbols\").arrayAtomicsSymbol,arrayParentSymbol=require(\"../helpers/symbols\").arrayParentSymbol,arrayPathSymbol=require(\"../helpers/symbols\").arrayPathSymbol,arraySchemaSymbol=require(\"../helpers/symbols\").arraySchemaSymbol,populateModelSymbol=require(\"../helpers/symbols\").populateModelSymbol,slicedSymbol=Symbol(\"mongoose#Array#sliced\"),_basePush=Array.prototype.push,validatorsSymbol=Symbol(\"mongoose#MongooseCoreArray#validators\");class CoreMongooseArray extends Array{get isMongooseArray(){return!0}get validators(){return this[validatorsSymbol]}set validators(t){this[validatorsSymbol]=t}$__getAtomics(){const t=[],e=Object.keys(this[arrayAtomicsSymbol]||{});let r=e.length;const s=Object.assign({},internalToObjectOptions,{_isNested:!0});if(0===r)return t[0]=[\"$set\",this.toObject(s)],t;for(;r--;){const i=e[r];let a=this[arrayAtomicsSymbol][i];utils.isMongooseObject(a)?a=a.toObject(s):Array.isArray(a)?a=this.toObject.call(a,s):null!=a&&Array.isArray(a.$each)?a.$each=this.toObject.call(a.$each,s):null!=a&&\"function\"==typeof a.valueOf&&(a=a.valueOf()),\"$addToSet\"===i&&(a={$each:a}),t.push([i,a])}return t}$atomics(){return this[arrayAtomicsSymbol]}$parent(){return this[arrayParentSymbol]}$path(){return this[arrayPathSymbol]}$shift(){if(this._registerAtomic(\"$pop\",-1),this._markModified(),!this._shifted)return this._shifted=!0,[].shift.call(this)}$pop(){if(this._registerAtomic(\"$pop\",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)}$schema(){return this[arraySchemaSymbol]}_cast(t){let e,r=!1;if(this[arrayParentSymbol]&&(r=this[arrayParentSymbol].populated(this[arrayPathSymbol],!0)),r&&null!==t&&void 0!==t){return e=r.options[populateModelSymbol],(Buffer.isBuffer(t)||t instanceof ObjectId||!utils.isObject(t))&&(t={_id:t}),t.$__schema&&t.$__schema.discriminatorMapping&&void 0!==t.$__schema.discriminatorMapping.key||(t=new e(t)),this[arraySchemaSymbol].caster.applySetters(t,this[arrayParentSymbol],!0)}return this[arraySchemaSymbol].caster.applySetters(t,this[arrayParentSymbol],!1)}_mapCast(t,e){return this._cast(t,this.length+e)}_markModified(t){const e=this[arrayParentSymbol];let r;if(e){if(r=this[arrayPathSymbol],arguments.length&&(r=r+\".\"+t),null!=r&&r.endsWith(\".$\"))return this;e.markModified(r,arguments.length>0?t:e)}return this}_registerAtomic(t,e){if(this[slicedSymbol])return;if(\"$set\"===t)return this[arrayAtomicsSymbol]={$set:e},cleanModifiedSubpaths(this[arrayParentSymbol],this[arrayPathSymbol]),this._markModified(),this;const r=this[arrayAtomicsSymbol];if(\"$pop\"===t&&!(\"$pop\"in r)){const t=this;this[arrayParentSymbol].once(\"save\",function(){t._popped=t._shifted=null})}if(this[arrayAtomicsSymbol].$set||Object.keys(r).length&&!(t in r))return this[arrayAtomicsSymbol]={$set:this},this;let s;if(\"$pullAll\"===t||\"$addToSet\"===t)r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(\"$pullDocs\"===t){const t=r.$pull||(r.$pull={});e[0]instanceof EmbeddedDocument?(s=t.$or||(t.$or=[]),Array.prototype.push.apply(s,e.map(function(t){return t.toObject({transform:!1,virtuals:!1})}))):(s=t._id||(t._id={$in:[]})).$in=s.$in.concat(e)}else\"$push\"===t?(r.$push=r.$push||{$each:[]},null!=e&&utils.hasUserDefinedProperty(e,\"$each\")?r.$push=e:r.$push.$each=r.$push.$each.concat(e)):r[t]=e;return this}addToSet(){_checkManualPopulation(this,arguments);let t=[].map.call(arguments,this._mapCast,this);const e=[];let r=\"\";return(t=this[arraySchemaSymbol].applySetters(t,this[arrayParentSymbol]))[0]instanceof EmbeddedDocument?r=\"doc\":t[0]instanceof Date&&(r=\"date\"),t.forEach(function(t){let s;const i=+t;switch(r){case\"doc\":s=this.some(function(e){return e.equals(t)});break;case\"date\":s=this.some(function(t){return+t===i});break;default:s=~this.indexOf(t)}s||([].push.call(this,t),this._registerAtomic(\"$addToSet\",t),this._markModified(),[].push.call(e,t))},this),e}hasAtomics(){return utils.isPOJO(this[arrayAtomicsSymbol])?Object.keys(this[arrayAtomicsSymbol]).length:0}includes(t,e){return-1!==this.indexOf(t,e)}indexOf(t,e){t instanceof ObjectId&&(t=t.toString()),e=null==e?0:e;const r=this.length;for(let s=e;s<r;++s)if(t==this[s])return s;return-1}inspect(){return JSON.stringify(this)}nonAtomicPush(){const t=[].map.call(arguments,this._mapCast,this),e=[].push.apply(this,t);return this._registerAtomic(\"$set\",this),this._markModified(),e}pop(){const t=[].pop.call(this);return this._registerAtomic(\"$set\",this),this._markModified(),t}pull(){const t=[].map.call(arguments,this._cast,this),e=this[arrayParentSymbol].get(this[arrayPathSymbol]);let r,s=e.length;for(;s--;)if((r=e[s])instanceof Document){t.some(function(t){return r.equals(t)})&&[].splice.call(e,s,1)}else~e.indexOf.call(t,r)&&[].splice.call(e,s,1);return t[0]instanceof EmbeddedDocument?this._registerAtomic(\"$pullDocs\",t.map(function(t){return t.$__getValue(\"_id\")||t})):this._registerAtomic(\"$pullAll\",t),this._markModified(),cleanModifiedSubpaths(this[arrayParentSymbol],this[arrayPathSymbol])>0&&this._registerAtomic(\"$set\",this),this}push(){let t=arguments,e=t;const r=null!=t[0]&&utils.hasUserDefinedProperty(t[0],\"$each\");if(r&&(e=t[0],t=t[0].$each),null==this[arraySchemaSymbol])return _basePush.apply(this,t);_checkManualPopulation(this,t);const s=this[arrayParentSymbol];let i;t=[].map.call(t,this._mapCast,this),t=this[arraySchemaSymbol].applySetters(t,s,void 0,void 0,{skipDocumentArrayCast:!0});const a=this[arrayAtomicsSymbol];if(r){if(e.$each=t,get(a,\"$push.$each.length\",0)>0&&a.$push.$position!=a.$position)throw new MongooseError(\"Cannot call `Array#push()` multiple times with different `$position`\");null!=e.$position?([].splice.apply(this,[e.$position,0].concat(t)),i=this.length):i=[].push.apply(this,t)}else{if(get(a,\"$push.$each.length\",0)>0&&null!=a.$push.$position)throw new MongooseError(\"Cannot call `Array#push()` multiple times with different `$position`\");e=t,i=[].push.apply(this,t)}return this._registerAtomic(\"$push\",e),this._markModified(),i}remove(){return this.pull.apply(this,arguments)}set(t,e){const r=this._cast(e,t);return this[t]=r,this._markModified(t),this}shift(){const t=[].shift.call(this);return this._registerAtomic(\"$set\",this),this._markModified(),t}sort(){const t=[].sort.apply(this,arguments);return this._registerAtomic(\"$set\",this),t}splice(){let t;if(_checkManualPopulation(this,Array.prototype.slice.call(arguments,2)),arguments.length){let e;if(null==this[arraySchemaSymbol])e=arguments;else{e=[];for(let t=0;t<arguments.length;++t)e[t]=t<2?arguments[t]:this._cast(arguments[t],arguments[0]+(t-2))}t=[].splice.apply(this,e),this._registerAtomic(\"$set\",this)}return t}slice(){const t=super.slice.apply(this,arguments);return t[arrayParentSymbol]=this[arrayParentSymbol],t[arraySchemaSymbol]=this[arraySchemaSymbol],t[arrayAtomicsSymbol]=this[arrayAtomicsSymbol],t[arrayPathSymbol]=this[arrayPathSymbol],t[slicedSymbol]=!0,t}filter(){const t=super.filter.apply(this,arguments);return t[arrayParentSymbol]=this[arrayParentSymbol],t[arraySchemaSymbol]=this[arraySchemaSymbol],t[arrayAtomicsSymbol]=this[arrayAtomicsSymbol],t[arrayPathSymbol]=this[arrayPathSymbol],t}toBSON(){return this.toObject(internalToObjectOptions)}toObject(t){return t&&t.depopulate?((t=utils.clone(t))._isNested=!0,[].concat(this).map(function(e){return e instanceof Document?e.toObject(t):e})):[].concat(this)}unshift(){let t;return _checkManualPopulation(this,arguments),null==this[arraySchemaSymbol]?t=arguments:(t=[].map.call(arguments,this._cast,this),t=this[arraySchemaSymbol].applySetters(t,this[arrayParentSymbol])),[].unshift.apply(this,t),this._registerAtomic(\"$set\",this),this._markModified(),this.length}}function _isAllSubdocs(t,e){if(!e)return!1;for(const r of t){if(null==r)return!1;const t=r.constructor;if(!(r instanceof Document)||t.modelName!==e&&t.baseModelName!==e)return!1}return!0}function _checkManualPopulation(t,e){const r=null==t?null:get(t[arraySchemaSymbol],\"caster.options.ref\",null);0===t.length&&e.length>0&&_isAllSubdocs(e,r)&&t[arrayParentSymbol].populated(t[arrayPathSymbol],[],{[populateModelSymbol]:e[0].constructor})}util.inspect.custom&&(CoreMongooseArray.prototype[util.inspect.custom]=CoreMongooseArray.prototype.inspect),module.exports=CoreMongooseArray;","node_modules/mongoose/lib/browserDocument.js":"\"use strict\";const NodeJSDocument=require(\"./document\"),EventEmitter=require(\"events\").EventEmitter,MongooseError=require(\"./error/index\"),Schema=require(\"./schema\"),ObjectId=require(\"./types/objectid\"),ValidationError=MongooseError.ValidationError,applyHooks=require(\"./helpers/model/applyHooks\"),isObject=require(\"./helpers/isObject\");function Document(e,t,o,r,n){if(!(this instanceof Document))return new Document(e,t,o,r,n);if(isObject(t)&&!t.instanceOfSchema&&(t=new Schema(t)),t=this.schema||t,!this.schema&&t.options._id&&void 0===(e=e||{})._id&&(e._id=new ObjectId),!t)throw new MongooseError.MissingSchemaError;this.$__setSchema(t),NodeJSDocument.call(this,e,o,r,n),applyHooks(this,t,{decorateDoc:!0});for(const e in t.methods)this[e]=t.methods[e];for(const e in t.statics)this[e]=t.statics[e]}Document.prototype=Object.create(NodeJSDocument.prototype),Document.prototype.constructor=Document,Document.events=new EventEmitter,Document.$emitter=new EventEmitter,[\"on\",\"once\",\"emit\",\"listeners\",\"removeListener\",\"setMaxListeners\",\"removeAllListeners\",\"addListener\"].forEach(function(e){Document[e]=function(){return Document.$emitter[e].apply(Document.$emitter,arguments)}}),Document.ValidationError=ValidationError,module.exports=exports=Document;","node_modules/mongoose/lib/cursor/QueryCursor.js":"\"use strict\";const Readable=require(\"stream\").Readable,promiseOrCallback=require(\"../helpers/promiseOrCallback\"),eachAsync=require(\"../helpers/cursor/eachAsync\"),helpers=require(\"../queryhelpers\"),util=require(\"util\");function QueryCursor(r,t){Readable.call(this,{objectMode:!0}),this.cursor=null,this.query=r;const o=this,e=r.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options=t||{},e.hooks.execPre(\"find\",r,()=>{this._transforms=this._transforms.concat(r._transforms.slice()),this.options.transform&&this._transforms.push(t.transform),this.options.batchSize&&(this.options.cursor=t.cursor||{},this.options.cursor.batchSize=t.batchSize),e.collection.find(r._conditions,this.options,function(r,t){return o._error?(null!=t&&t.close(function(){}),o.emit(\"cursor\",null),void(o.listeners(\"error\").length>0&&o.emit(\"error\",o._error))):r?o.emit(\"error\",r):(o.cursor=t,void o.emit(\"cursor\",t))})})}function _transformForAsyncIterator(r){return null==r?{done:!0}:{value:r,done:!1}}function _next(r,t){let o=t;return r._transforms.length&&(o=function(o,e){if(o||null===e&&!r._mongooseOptions.transformNull)return t(o,e);t(o,r._transforms.reduce(function(t,o){return o.call(r,t)},e))}),r._error?process.nextTick(function(){o(r._error)}):r.cursor?(r.query._mongooseOptions.populate&&!r._pop&&(r._pop=helpers.preparePopulationOptionsMQ(r.query,r.query._mongooseOptions),r._pop.__noPromise=!0),r.query._mongooseOptions.populate&&r.options.batchSize>1?r._batchDocs&&r._batchDocs.length?_nextDoc(r,r._batchDocs.shift(),r._pop,o):r._batchExhausted?o(null,null):(r._batchDocs=[],r.cursor.next(_onNext.bind({ctx:r,callback:o}))):r.cursor.next(function(t,e){return t?o(t):e?r.query._mongooseOptions.populate?void r.query.model.populate(e,r._pop,function(t,e){return t?o(t):_nextDoc(r,e,r._pop,o)}):_nextDoc(r,e,null,o):o(null,null)})):void r.once(\"cursor\",function(o){null!=o&&_next(r,t)})}function _onNext(r,t){return r?this.callback(r):t?(this.ctx._batchDocs.push(t),void(this.ctx._batchDocs.length<this.ctx.options.batchSize?this.ctx.cursor.next(_onNext.bind(this)):_populateBatch.call(this))):(this.ctx._batchExhausted=!0,_populateBatch.call(this))}function _populateBatch(){if(!this.ctx._batchDocs.length)return this.callback(null,null);const r=this;this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop,function(t){if(t)return r.callback(t);_nextDoc(r.ctx,r.ctx._batchDocs.shift(),r.ctx._pop,r.callback)})}function _nextDoc(r,t,o,e){if(r.query._mongooseOptions.lean)return r.model.hooks.execPost(\"find\",r.query,[[t]],r=>{if(null!=r)return e(r);e(null,t)});_create(r,t,o,(t,o)=>{if(null!=t)return e(t);r.model.hooks.execPost(\"find\",r.query,[[o]],r=>{if(null!=r)return e(r);e(null,o)})})}function _waitForCursor(r,t){if(r.cursor)return t();r.once(\"cursor\",function(r){null!=r&&t()})}function _create(r,t,o,e){const n=helpers.createModel(r.query.model,t,r.query._fields),s=o?{populated:o}:void 0;n.init(t,s,function(r){if(r)return e(r);e(null,n)})}util.inherits(QueryCursor,Readable),QueryCursor.prototype._read=function(){const r=this;_next(this,function(t,o){return t?r.emit(\"error\",t):o?void r.push(o):(r.push(null),void r.cursor.close(function(t){if(t)return r.emit(\"error\",t);setTimeout(function(){!r.destroyed&&r.emit(\"close\")},0)}))})},QueryCursor.prototype.map=function(r){return this._transforms.push(r),this},QueryCursor.prototype._markError=function(r){return this._error=r,this},QueryCursor.prototype.close=function(r){return promiseOrCallback(r,r=>{this.cursor.close(t=>{if(t)return r(t),this.listeners(\"error\").length>0&&this.emit(\"error\",t);this.emit(\"close\"),r(null)})},this.model.events)},QueryCursor.prototype.next=function(r){return promiseOrCallback(r,r=>{_next(this,function(t,o){if(t)return r(t);r(null,o)})},this.model.events)},QueryCursor.prototype.eachAsync=function(r,t,o){const e=this;return\"function\"==typeof t&&(o=t,t={}),eachAsync(function(r){return _next(e,r)},r,t=t||{},o)},QueryCursor.prototype.options,QueryCursor.prototype.addCursorFlag=function(r,t){const o=this;return _waitForCursor(this,function(){o.cursor.addCursorFlag(r,t)}),this},QueryCursor.prototype.transformNull=function(r){return 0===arguments.length&&(r=!0),this._mongooseOptions.transformNull=r,this},QueryCursor.prototype._transformForAsyncIterator=function(){return-1===this._transforms.indexOf(_transformForAsyncIterator)&&this.map(_transformForAsyncIterator),this},null!=Symbol.asyncIterator&&(QueryCursor.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()}),module.exports=QueryCursor;","node_modules/mongoose/lib/helpers/query/applyGlobalMaxTimeMS.js":"\"use strict\";const utils=require(\"../../utils\");module.exports=function(e,i){utils.hasUserDefinedProperty(e,\"maxTimeMS\")||(utils.hasUserDefinedProperty(i.db.options,\"maxTimeMS\")?e.maxTimeMS=i.db.options.maxTimeMS:utils.hasUserDefinedProperty(i.base.options,\"maxTimeMS\")&&(e.maxTimeMS=i.base.options.maxTimeMS))};","node_modules/mongoose/lib/helpers/schema/applyWriteConcern.js":"\"use strict\";const get=require(\"../get\");module.exports=function(t,e){const n=get(t,\"options.writeConcern\",{});0!=Object.keys(n).length?(e.writeConcern={},\"w\"in e||null==n.w||(e.writeConcern.w=n.w),\"j\"in e||null==n.j||(e.writeConcern.j=n.j),\"wtimeout\"in e||null==n.wtimeout||(e.writeConcern.wtimeout=n.wtimeout)):(\"w\"in e||null==n.w||(e.w=n.w),\"j\"in e||null==n.j||(e.j=n.j),\"wtimeout\"in e||null==n.wtimeout||(e.wtimeout=n.wtimeout))};","node_modules/mongoose/lib/helpers/update/castArrayFilters.js":"\"use strict\";const castFilterPath=require(\"../query/castFilterPath\"),cleanPositionalOperators=require(\"../schema/cleanPositionalOperators\"),getPath=require(\"../schema/getPath\"),updatedPathsByArrayFilter=require(\"./updatedPathsByArrayFilter\");module.exports=function(t){const r=t.options.arrayFilters;if(!Array.isArray(r))return;const e=t.getUpdate(),o=t.schema,a=o.options.strictQuery,s=updatedPathsByArrayFilter(e);for(const e of r){if(null==e)throw new Error(`Got null array filter in ${r}`);for(const r of Object.keys(e)){if(null==e[r])continue;const i=r.indexOf(\".\");let n=-1===i?s[r]+\".0\":s[r.substr(0,i)]+\".0\"+r.substr(i);if(null==n)throw new Error(`Filter path not found for ${r}`);n=cleanPositionalOperators(n);const l=getPath(o,n);if(null==l){if(!a)return;throw new Error(`Could not find path \"${n}\" in schema`)}\"object\"==typeof e[r]?e[r]=castFilterPath(t,l,e[r]):e[r]=l.castForQuery(e[r])}}};","node_modules/mongoose/lib/helpers/query/castUpdate.js":"\"use strict\";const CastError=require(\"../../error/cast\"),MongooseError=require(\"../../error/mongooseError\"),StrictModeError=require(\"../../error/strict\"),ValidationError=require(\"../../error/validation\"),castNumber=require(\"../../cast/number\"),cast=require(\"../../cast\"),getEmbeddedDiscriminatorPath=require(\"./getEmbeddedDiscriminatorPath\"),handleImmutable=require(\"./handleImmutable\"),moveImmutableProperties=require(\"../update/moveImmutableProperties\"),schemaMixedSymbol=require(\"../../schema/symbols\").schemaMixedSymbol,setDottedPath=require(\"../path/setDottedPath\"),utils=require(\"../../utils\");function castPipelineOperator(e,t){if(\"$unset\"===e){if(!Array.isArray(t)||t.find(e=>\"string\"!=typeof e))throw new MongooseError(\"Invalid $unset in pipeline, must be an array of strings\");return t}if(\"$project\"===e){if(null==t||\"object\"!=typeof t)throw new MongooseError(\"Invalid $project in pipeline, must be an object\");return t}if(\"$addFields\"===e||\"$set\"===e){if(null==t||\"object\"!=typeof t)throw new MongooseError(\"Invalid \"+e+\" in pipeline, must be an object\");return t}if(\"$replaceRoot\"===e||\"$replaceWith\"===e){if(null==t||\"object\"!=typeof t)throw new MongooseError(\"Invalid \"+e+\" in pipeline, must be an object\");return t}throw new MongooseError('Invalid update pipeline operator: \"'+e+'\"')}function walkUpdatePath(e,t,r,s,o,n,a){const i=s.strict,c=a?a+\".\":\"\",l=Object.keys(t);let u,p,d,h,f=l.length,m=!1,$=null;for(h=void 0===s.useNestedStrict?e.options.useNestedStrict:s.useNestedStrict;f--;)if(d=t[p=l[f]],\"$pull\"!==r||null==(u=e._getSchema(c+p))||null==u.schema)if(d&&\"Object\"===d.constructor.name){if(null==(u=e._getSchema(c+p))){const r=getEmbeddedDiscriminatorPath(e,t,n,c+p,s);null!=r.schematype&&(u=r.schematype)}if(\"$setOnInsert\"!==r&&handleImmutable(u,i,t,p,c+p,o))continue;if(u&&u.caster&&r in castOps)if(\"$each\"in d){m=!0;try{t[p]={$each:castUpdateVal(u,d.$each,r,p,o,c+p)}}catch(e){$=_handleCastError(e,o,p,$)}null!=d.$slice&&(t[p].$slice=0|d.$slice),d.$sort&&(t[p].$sort=d.$sort),null!=d.$position&&(t[p].$position=castNumber(d.$position))}else{if(null!=u&&u.$isSingleNested){let r=i;!1!==h&&u.schema.options.hasOwnProperty(\"strict\")?r=u.schema.options.strict:!1===h&&(r=e.options.strict);try{t[p]=u.castForQuery(d,o,{strict:r})}catch(e){$=_handleCastError(e,o,p,$)}}else try{t[p]=castUpdateVal(u,d,r,p,o,c+p)}catch(e){$=_handleCastError(e,o,p,$)}if(s.omitUndefined&&void 0===t[p]){delete t[p];continue}m=!0}else if(\"$currentDate\"===r||r in castOps&&u){try{t[p]=castUpdateVal(u,d,r,p,o,c+p)}catch(e){$=_handleCastError(e,o,p,$)}if(s.omitUndefined&&void 0===t[p]){delete t[p];continue}m=!0}else{const a=c+p,l=e._getPathType(a);let u=i;if(h&&l&&l.schema&&\"strict\"in l.schema.options&&(u=l.schema.options.strict),\"undefined\"===l.pathType){if(\"throw\"===u)throw new StrictModeError(a);if(u){delete t[p];continue}}m|=walkUpdatePath(e,d,r,s,o,n,c+p)||utils.isObject(d)&&0===Object.keys(d).length}}else{const l=\"$each\"===p||\"$or\"===p||\"$and\"===p||\"$in\"===p?a:c+p;if(u=e._getSchema(l),\"$setOnInsert\"!==r&&handleImmutable(u,i,t,p,c+p,o))continue;let f=e._getPathType(l);if(null==u){const r=getEmbeddedDiscriminatorPath(e,t,n,l,s);null!=r.schematype&&(u=r.schematype,f=r.type)}let y=i;if(h&&f&&f.schema&&\"strict\"in f.schema.options&&(y=f.schema.options.strict),y&&!u&&!/real|nested/.test(f.pathType)){if(\"throw\"===y&&null==e.virtuals[l])throw new StrictModeError(c+p);delete t[p]}else{if(\"$rename\"===r){m=!0;continue}try{0===c.length||-1===p.indexOf(\".\")?t[p]=castUpdateVal(u,d,r,p,o,c+p):(setDottedPath(t,p,castUpdateVal(u,d,r,p,o,c+p)),delete t[p])}catch(e){$=_handleCastError(e,o,p,$)}if(!Array.isArray(t[p])||\"$addToSet\"!==r&&\"$push\"!==r||\"$each\"===p||u&&u.caster&&!u.caster.$isMongooseArray&&(t[p]={$each:t[p]}),s.omitUndefined&&void 0===t[p]){delete t[p];continue}m=!0}}else t[p]=cast(u.schema,t[p],s,o),m=!0;if(null!=$)throw $;return m}function _handleCastError(e,t,r,s){if(\"object\"!=typeof t||!t.options.multipleCastError)throw e;return(s=s||new ValidationError).addError(r,e),s}module.exports=function(e,t,r,s,o){if(null==t)return;if(r=r||{},Array.isArray(t)){const e=t.length;for(let r=0;r<e;++r){const e=Object.keys(t[r]);for(const s of e)t[r][s]=castPipelineOperator(s,t[r][s])}return t}r.upsert&&moveImmutableProperties(e,t,s);const n=Object.keys(t);let a=n.length;const i={};let c,l=!1;const u=r.overwrite;for(o=o||{};a--;){const e=n[a];\"$\"===e[0]||u?\"$set\"===e&&i.$set||(i[e]=t[e]):(i.$set||(t.$set?i.$set=t.$set:i.$set={}),i.$set[e]=t[e],n.splice(a,1),~n.indexOf(\"$set\")||n.push(\"$set\"))}for(a=n.length;a--;){const t=n[a];if(c=i[t],l=l||t.startsWith(\"$\"),!c||\"object\"!=typeof c||Buffer.isBuffer(c)||u&&!l){if(!u||!i||\"object\"!=typeof i){throw new Error(\"Invalid atomic update value for \"+t+\". Expected an object, received \"+typeof c)}walkUpdatePath(e,i,\"$set\",r,s,o)}else walkUpdatePath(e,c,t,r,s,o);t.startsWith(\"$\")&&utils.isEmptyObject(c)&&delete i[t]}return 0===Object.keys(i).length&&r.upsert&&Object.keys(o).length>0?{$setOnInsert:o}:i};const numberOps={$pop:1,$inc:1},noCastOps={$unset:1},castOps={$push:1,$addToSet:1,$set:1,$setOnInsert:1},overwriteOps={$set:1,$setOnInsert:1};function castUpdateVal(e,t,r,s,o,n){if(!e){if(r in numberOps)try{return castNumber(t)}catch(e){throw new CastError(\"number\",t,n)}return t}if(e.caster&&r in castOps&&(utils.isObject(t)||Array.isArray(t))&&!overwriteOps[r]){let r=0,s=e;for(;s.$isMongooseArray;)++r,s=s.caster;let n=0,a=t;for(;Array.isArray(a);)++n,a=a[0];const i=r-n;for(;n<r;)t=[t],++n;let c=e.applySetters(Array.isArray(t)?t:[t],o);for(let e=0;e<i;++e)c=c[0];return c}if(r in noCastOps)return t;if(r in numberOps){if(null==t)throw new CastError(\"number\",t,e.path);if(\"$inc\"===r)return e.castForQueryWrapper({val:t,context:o});try{return castNumber(t)}catch(r){throw new CastError(\"number\",t,e.path)}}return\"$currentDate\"===r?\"object\"==typeof t?{$type:t.$type}:Boolean(t):/^\\$/.test(s)?e.castForQueryWrapper({$conditional:s,val:t,context:o}):overwriteOps[r]?e.castForQueryWrapper({val:t,context:o,$skipQueryCastForUpdate:null!=t&&e.$isMongooseArray&&null!=e.$fullPath&&!e.$fullPath.match(/\\d+$/),$applySetters:null!=e[schemaMixedSymbol]}):e.castForQueryWrapper({val:t,context:o})}","node_modules/mongoose/lib/helpers/query/completeMany.js":"\"use strict\";const helpers=require(\"../../queryhelpers\");function completeMany(e,t,s,n,l,c){const o=[];let r=t.length;const i=r;let u=null;function p(e){null!=e&&(u=u||e),null==u?--r||process.nextTick(()=>c(u,o)):--r||process.nextTick(()=>c(u))}for(let c=0;c<i;++c){o[c]=helpers.createModel(e,t[c],s,n);try{o[c].init(t[c],l,p)}catch(u){p(u)}o[c].$session(l.session)}}module.exports=completeMany;","node_modules/mongoose/lib/helpers/query/hasDollarKeys.js":"\"use strict\";module.exports=function(t){if(null==t)return!1;const e=Object.keys(t),r=e.length;for(let t=0;t<r;++t)if(e[t].startsWith(\"$\"))return!0;return!1};","node_modules/mongoose/lib/helpers/projection/isInclusive.js":"\"use strict\";const isDefiningProjection=require(\"./isDefiningProjection\");module.exports=function(n){if(null==n)return!1;const t=Object.keys(n),e=t.length;if(0===e)return!1;for(let i=0;i<e;++i){const e=t[i];if(!e.startsWith(\"+\")&&(isDefiningProjection(n[e])&&n[e]))return!0}return!1};","node_modules/mongoose/lib/helpers/projection/parseProjection.js":"\"use strict\";module.exports=function(t,r){if(\"string\"===typeof t&&(t=t.split(/\\s+/)),!Array.isArray(t)&&\"[object Arguments]\"!==Object.prototype.toString.call(t))return t;const e=t.length,n={};for(let o=0;o<e;++o){let e=t[o];if(!e)continue;const s=\"-\"==e[0]?0:1;r||0!==s||(e=e.substring(1)),n[e]=s}return n};","node_modules/mongoose/lib/helpers/update/removeUnusedArrayFilters.js":"\"use strict\";module.exports=function(e,t){const c=Object.keys(e).map(t=>Object.keys(e[t])).reduce((e,t)=>e.concat(t),[]);return t.filter(e=>{const t=Object.keys(e)[0],n=t.indexOf(\".\"),s=-1===n?t:t.slice(0,n);return null!=c.find(e=>e.includes(\"$[\"+s+\"]\"))})};","node_modules/mongoose/lib/helpers/query/selectPopulatedFields.js":"\"use strict\";const isExclusive=require(\"../projection/isExclusive\"),isInclusive=require(\"../projection/isInclusive\");function isPathInFields(e,i){const l=i.split(\".\"),s=l.length;let n=l[0];for(let i=1;i<s;++i){if(null!=e[n]||null!=e[n+\".$\"])return!0;n+=\".\"+l[i]}return null!=e[n]||null!=e[n+\".$\"]}module.exports=function(e,i,l){if(null==l)return;const s=Object.keys(l);if(i=i||{},isInclusive(e))for(const l of s)isPathInFields(i,l)?0===i[l]&&delete e[l]:e[l]=1;else if(isExclusive(e))for(const l of s)null==i[l]&&delete e[l]};","node_modules/mongoose/lib/helpers/setDefaultsOnInsert.js":"\"use strict\";const modifiedPaths=require(\"./common\").modifiedPaths,get=require(\"./get\");function isModified(t,e){if(t[e])return!0;const n=e.split(\".\");let s=n[0];for(let e=1;e<n.length;++e){if(t[s])return!0;s+=\".\"+n[e]}return!1}module.exports=function(t,e,n,s){const i=null!=(s=s||{}).setDefaultsOnInsert?s.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!s.upsert||!i)return n;const o=Object.keys(n||{}),r={},f={},l=o.length,u={};let c=!1;for(let t=0;t<l;++t)o[t].startsWith(\"$\")&&(modifiedPaths(n[o[t]],\"\",u),c=!0);c||modifiedPaths(n,\"\",u);const a=Object.keys(t),d=a.length;for(let e=0;e<d;++e){const n=a[e],s=t[n];if(s&&\"object\"==typeof s){const t=Object.keys(s),e=t.length;let n=!1;for(let s=0;s<e;++s)if(t[s].startsWith(\"$\")){n=!0;break}if(n)continue}r[n]=!0,u[n]=!0}return s&&s.overwrite&&!c?n:(e.eachPath(function(t,e){const s=e.path.endsWith(\".$*\")||-1!==e.path.indexOf(\".$*.\");if(e.$isSingleNested&&!s)e.schema.eachPath(function(e,s){if(\"_id\"===e&&s.auto)return;const i=s.getDefault(null,!0);isModified(u,t+\".\"+e)||void 0===i||((n=n||{}).$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[t+\".\"+e]=i,f[t+\".\"+e]=i)});else{const s=e.getDefault(null,!0);isModified(u,t)||void 0===s||((n=n||{}).$setOnInsert=n.$setOnInsert||{},null==get(n,t)&&(n.$setOnInsert[t]=s),f[t]=s)}}),n)};","node_modules/mongoose/lib/helpers/updateValidators.js":"\"use strict\";const ValidationError=require(\"../error/validation\"),cleanPositionalOperators=require(\"./schema/cleanPositionalOperators\"),flatten=require(\"./common\").flatten,modifiedPaths=require(\"./common\").modifiedPaths;module.exports=function(t,n,e,o,l){let r;const i=Object.keys(e||{});let u={},a={};const s={},c={},f=i.length;let h=!1;const d={};let p,$,m;for(m=0;m<f;++m)if(i[m].startsWith(\"$\")){if(h=!0,\"$push\"===i[m]||\"$addToSet\"===i[m]){r=Object.keys(e[i[m]]);for(let t=0;t<r.length;++t)(p=e[i[m]][r[t]])&&p.$each?c[r[t]]=(c[r[t]]||[]).concat(p.$each):c[r[t]]=(c[r[t]]||[]).concat([p]);continue}modifiedPaths(e[i[m]],\"\",d);const t=flatten(e[i[m]],null,null,n),o=Object.keys(t),l=o.length;for(let n=0;n<l;++n){const e=cleanPositionalOperators(o[n]);$=i[m],e.includes(\"$\")||(\"$set\"===$||\"$setOnInsert\"===$||\"$pull\"===$||\"$pullAll\"===$?(a[e]=t[o[n]],s[e]=\"$pull\"===$||\"$pullAll\"===$):\"$unset\"===$&&(a[e]=void 0),u[e]=!0)}}h||(modifiedPaths(e,\"\",d),a=flatten(e,null,null,n),u=Object.keys(a));const y=Object.keys(a),g=y.length,V=[],O=[],b=[],j=o&&\"query\"===o.context?t:null;function k(t,e){const o=n._getSchema(y[t]);if(null!=o&&(\"Mixed\"!==o.instance||o.path===y[t]))if(e&&Array.isArray(e.$in))e.$in.forEach((t,n)=>{V.push(function(e){o.doValidate(t,function(t){t&&(t.path=y[n]+\".$in.\"+n,O.push(t)),e(null)},j,{updateValidator:!0})})});else{if(s[y[t]]&&o.$isMongooseArray)return;o.$isMongooseDocumentArrayElement&&null!=e&&null!=e.$__?(b.push(y[t]),V.push(function(n){o.doValidate(e,function(o){if(o)return o.path=y[t],O.push(o),n(null);e.validate(function(e){if(e)if(e.errors)for(const n of Object.keys(e.errors)){const o=e.errors[n];o.path=y[t]+\".\"+n,O.push(o)}else e.path=y[t],O.push(e);n(null)})},j,{updateValidator:!0})})):V.push(function(n){for(const e of b)if(y[t].startsWith(e+\".\"))return n(null);o.doValidate(e,function(e){if(null!=o.schema&&!1===o.schema.options.storeSubdocValidationError&&e instanceof ValidationError)return n(null);e&&(e.path=y[t],O.push(e)),n(null)},j,{updateValidator:!0})})}}for(m=0;m<g;++m)k(m,a[y[m]]);const q=Object.keys(c);for(const e of q){let l=n._getSchema(e);if(l&&l.$isMongooseDocumentArray)V.push(function(n){l.doValidate(c[e],E(e,O,n),o&&\"query\"===o.context?t:null)});else{l=n._getSchema(e+\".0\");for(const n of c[e])V.push(function(r){l.doValidate(n,E(e,O,r),o&&\"query\"===o.context?t:null,{updateValidator:!0})})}}if(null==l)return function(t){let n=V.length;if(0===n)return A(t);for(const e of V)e(function(){--n<=0&&A(t)})};{let t=V.length;if(0===t)return A(l);for(const n of V)n(function(){--t<=0&&A(l)})}function A(t){if(O.length){const n=new ValidationError(null);for(const t of O)n.addError(t.path,t);return t(n)}t(null)}function E(t,n,e){return function(o){o&&(o.path=t,n.push(o)),e(null)}}};","node_modules/mongoose/lib/helpers/query/wrapThunk.js":"\"use strict\";module.exports=function(t){return function(n){++this._executionCount,t.call(this,n)}};","node_modules/mongoose/lib/helpers/cursor/eachAsync.js":"\"use strict\";const promiseOrCallback=require(\"../promiseOrCallback\");function asyncQueue(){const n=[];let e=null,t=0;return function(u){if(0===n.length&&null==e)return e=t++,u(l);n.push(u)};function l(){if(e=null,n.length>0){e=t++,n.shift()(l)}}}module.exports=function(n,e,t,l){const u=t.parallel||1,r=t.batchSize,i=asyncQueue();return promiseOrCallback(l,e=>{if(null!=r){if(\"number\"!=typeof r)throw new TypeError(\"batchSize must be a number\");if(r<1)throw new TypeError(\"batchSize must be at least 1\");if(r!==Math.floor(r))throw new TypeError(\"batchSize must be a positive integer\")}!function(e){let t=!1,l=0,c=0,f=[],s=null;for(let n=0;n<u;++n)i(a);function a(u){if(t||s)return u();n(function(n,h){if(t||null!=s)return u();if(null!=n)return s=n,e(n),u();if(null==h)return t=!0,l<=0?e(null):null!=r&&f.length&&o(f,c++,b),u();if(++l,process.nextTick(()=>u()),null!=r&&f.push(h),null!=r&&f.length!==r)return void setTimeout(()=>i(a),0);const p=null!=r?f:h;function b(n){return null!=r?(l-=f.length,f=[]):--l,null!=n?(s=n,e(n)):t&&l<=0?e(null):void setTimeout(()=>i(a),0)}o(p,c++,b)})}}(e)});function o(n,t,l){const u=e(n,t);u&&\"function\"==typeof u.then?u.then(function(){l(null)},function(n){l(n||new Error(\"`eachAsync()` promise rejected without error\"))}):l(null)}};","node_modules/mongoose/lib/helpers/query/castFilterPath.js":"\"use strict\";const isOperator=require(\"./isOperator\");module.exports=function(e,t,r){const o=e;if(!Object.keys(r).some(isOperator))return t.castForQueryWrapper({val:r,context:o});const c=Object.keys(r);let n=c.length;for(;n--;){const e=c[n],s=r[e];if(\"$not\"===e){if(s&&t&&!t.caster){const c=Object.keys(s);if(c.length&&isOperator(c[0]))for(const e of Object.keys(s))s[e]=t.castForQueryWrapper({$conditional:e,val:s[e],context:o});else r[e]=t.castForQueryWrapper({$conditional:e,val:s,context:o});continue}}else r[e]=t.castForQueryWrapper({$conditional:e,val:s,context:o})}return r};","node_modules/mongoose/lib/helpers/schema/getPath.js":"\"use strict\";module.exports=function(t,e){let n=t.path(e);if(null!=n)return n;const o=e.split(\".\");let s=\"\",l=!1;for(const e of o)/^\\d+$/.test(e)&&l||(s=0===s.length?e:s+\".\"+e,null!=(n=t.path(s))&&n.schema&&(t=n.schema,s=\"\",n.$isMongooseDocumentArray&&(l=!0)));return n};","node_modules/mongoose/lib/helpers/update/updatedPathsByArrayFilter.js":"\"use strict\";const modifiedPaths=require(\"./modifiedPaths\");module.exports=function(t){const e=modifiedPaths(t);return Object.keys(e).reduce((t,e)=>{const r=e.match(/\\$\\[[^\\]]+\\]/g);if(null==r)return t;for(const s of r){const r=e.indexOf(s);if(r!==e.lastIndexOf(s))throw new Error(`Path '${e}' contains the same array filter multiple times`);t[s.substring(2,s.length-1)]=e.substr(0,r-1).replace(/\\$\\[[^\\]]+\\]/g,\"0\")}return t},{})};","node_modules/mongoose/lib/helpers/update/modifiedPaths.js":"\"use strict\";const _modifiedPaths=require(\"../common\").modifiedPaths;module.exports=function(t){const o=Object.keys(t),s={},e={};for(const i of o)i.startsWith(\"$\")?_modifiedPaths(t[i],\"\",s):e[i]=t[i];return _modifiedPaths(e,\"\",s),s};","node_modules/mongoose/lib/helpers/query/getEmbeddedDiscriminatorPath.js":"\"use strict\";const cleanPositionalOperators=require(\"../schema/cleanPositionalOperators\"),get=require(\"../get\"),getDiscriminatorByValue=require(\"../discriminator/getDiscriminatorByValue\"),updatedPathsByArrayFilter=require(\"../update/updatedPathsByArrayFilter\");module.exports=function(e,t,r,i,n){const a=i.split(\".\");let s=null,l=\"adhocOrUndefined\";r=r||{},t=t||{};const o=null!=n&&Array.isArray(n.arrayFilters)?n.arrayFilters:[],c=updatedPathsByArrayFilter(t);for(let i=0;i<a.length;++i){const n=cleanPositionalOperators(a.slice(0,i+1).join(\".\"));if(null!=(s=e.path(n))&&(l=e.pathType(n),(s.$isSingleNested||s.$isMongooseDocumentArrayElement)&&null!=s.schema.discriminators)){const e=get(s,\"schema.options.discriminatorKey\"),u=n+\".\"+e,y=u.replace(/\\.\\d+\\./,\".\");let p=null;u in r&&(p=r[u]),y in r&&(p=r[y]);const d=n.replace(/\\.\\d+$/,\"\");s.$isMongooseDocumentArrayElement&&null!=get(r[d],\"$elemMatch.\"+e)&&(p=r[d].$elemMatch[e]),u in t&&(p=t[u]);for(const t of Object.keys(c)){const r=t+\".\"+e;if(c[t]+\".\"+e===y){const e=o.find(e=>e.hasOwnProperty(r));null!=e&&(p=e[r])}}if(null==p)continue;const m=getDiscriminatorByValue(s.caster.discriminators,p).schema,h=a.slice(i+1).join(\".\");if(null!=(s=m.path(h))){l=m._getPathType(h);break}}}return{type:l,schematype:s}};","node_modules/mongoose/lib/helpers/query/handleImmutable.js":"\"use strict\";const StrictModeError=require(\"../../error/strict\");module.exports=function(t,r,e,i,o,n){if(null==t||!t.options||!t.options.immutable)return!1;let u=t.options.immutable;if(\"function\"==typeof u&&(u=u.call(n,n)),!u)return!1;if(!1===r)return!1;if(\"throw\"===r)throw new StrictModeError(null,`Field ${o} is immutable and strict = 'throw'`);return delete e[i],!0};","node_modules/mongoose/lib/helpers/update/moveImmutableProperties.js":"\"use strict\";const get=require(\"../get\");function _walkUpdatePath(t,e,n,s,o){const l=t.path(n);if(null==l)return;let c=get(l,\"options.immutable\",null);null!=c&&(\"function\"==typeof c&&(c=c.call(o,o)),c&&(s.$setOnInsert=s.$setOnInsert||{},s.$setOnInsert[n]=e[n],delete e[n]))}module.exports=function(t,e,n){if(null==e)return;const s=Object.keys(e);for(const o of s){const s=o.startsWith(\"$\");if(\"$set\"===o){const s=Object.keys(e[o]);for(const l of s)_walkUpdatePath(t,e[o],l,e,n)}else s||_walkUpdatePath(t,e,o,e,n)}};","node_modules/mongoose/lib/helpers/path/setDottedPath.js":"\"use strict\";module.exports=function(t,l,o){const s=l.split(\".\");let e=t;for(const t of s.slice(0,-1))null==e[t]&&(e[t]={}),e=e[t];e[s[s.length-1]]=o};","node_modules/mongoose/lib/cursor/ChangeStream.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter;class ChangeStream extends EventEmitter{constructor(e,t,r){super(),this.driverChangeStream=null,this.closed=!1,this.pipeline=t,this.options=r,e((e,t)=>{null==e?(this.driverChangeStream=t,this._bindEvents(),this.emit(\"ready\")):this.emit(\"error\",e)})}_bindEvents(){this.driverChangeStream.on(\"close\",()=>{this.closed=!0}),[\"close\",\"change\",\"end\",\"error\"].forEach(e=>{this.driverChangeStream.on(e,t=>this.emit(e,t))})}_queue(e){this.once(\"ready\",()=>e())}close(){this.closed=!0,this.driverChangeStream&&this.driverChangeStream.close()}}module.exports=ChangeStream;","node_modules/mongoose/lib/options/removeOptions.js":"\"use strict\";const clone=require(\"../helpers/clone\");class RemoveOptions{constructor(e){null!=e&&Object.assign(this,clone(e))}}module.exports=RemoveOptions;","node_modules/mongoose/lib/options/saveOptions.js":"\"use strict\";const clone=require(\"../helpers/clone\");class SaveOptions{constructor(e){null!=e&&Object.assign(this,clone(e))}}module.exports=SaveOptions;","node_modules/mongoose/lib/error/serverSelection.js":"\"use strict\";const MongooseError=require(\"./mongooseError\"),allServersUnknown=require(\"../helpers/topology/allServersUnknown\"),isAtlas=require(\"../helpers/topology/isAtlas\"),isSSLError=require(\"../helpers/topology/isSSLError\"),atlasMessage=\"Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://docs.atlas.mongodb.com/security-whitelist/\",sslMessage=\"Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html\";class MongooseServerSelectionError extends MongooseError{assimilateError(e){const s=e.reason;isAtlas(s)&&allServersUnknown(s)&&-1===e.message.indexOf(\"bad auth\")&&-1===e.message.indexOf(\"Authentication failed\")?this.message=atlasMessage:isSSLError(s)?this.message=sslMessage:this.message=e.message;for(const s in e)\"name\"!==s&&(this[s]=e[s]);return this}}Object.defineProperty(MongooseServerSelectionError.prototype,\"name\",{value:\"MongooseServerSelectionError\"}),module.exports=MongooseServerSelectionError;","node_modules/mongoose/lib/helpers/model/applyMethods.js":"\"use strict\";const get=require(\"../get\");module.exports=function e(o,t){function s(e,t){Object.defineProperty(o.prototype,e,{get:function(){const o={};for(const s in t.methods[e])o[s]=t.methods[e][s].bind(this);return o},configurable:!0})}for(const e of Object.keys(t.methods)){const r=t.methods[e];if(t.tree.hasOwnProperty(e))throw new Error('You have a method and a property in your schema both named \"'+e+'\"');t.reserved[e]&&!get(t,`methodOptions.${e}.suppressWarning`,!1)&&console.warn(`mongoose: the method name \"${e}\" is used by mongoose `+\"internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \"+`\\`schema.method('${e}', fn, { suppressWarning: true })\\`.`),\"function\"==typeof r?o.prototype[e]=r:s(e,t)}o.$appliedMethods=!0;for(const o of Object.keys(t.paths)){const s=t.paths[o];s.$isSingleNested&&!s.caster.$appliedMethods&&e(s.caster,s.schema),s.$isMongooseDocumentArray&&!s.Constructor.$appliedMethods&&e(s.Constructor,s.schema)}};","node_modules/mongoose/lib/helpers/model/applyStaticHooks.js":"\"use strict\";const middlewareFunctions=require(\"../query/applyQueryMiddleware\").middlewareFunctions,promiseOrCallback=require(\"../promiseOrCallback\");module.exports=function(e,n,r){n=n.filter(e=>-1!==middlewareFunctions.indexOf(e.name)?!!e.model:!1!==e.model),e.$__insertMany=n.createWrapper(\"insertMany\",e.$__insertMany,e,{useErrorHandlers:!0,numCallbackParams:1});for(const l of Object.keys(r))if(n.hasHooks(l)){const r=e[l];e[l]=function(){const t=arguments.length,o=t>0?arguments[t-1]:null,i=\"function\"==typeof o?o:null,u=Array.prototype.slice.call(arguments,0,null==i?t:t-1);return promiseOrCallback(i,t=>{n.execPre(l,e,u,function(o){if(null!=o)return t(o);let i=0;const c=r.apply(e,u.concat(a));function a(r,o){if(!(i++>0))return null!=r?t(r):void n.execPost(l,e,[o],function(e){if(null!=e)return t(e);t(null,o)})}null!=c&&\"function\"==typeof c.then&&c.then(e=>a(null,e),e=>a(e))})},e.events)}}};","node_modules/mongoose/lib/helpers/model/applyStatics.js":"\"use strict\";module.exports=function(t,s){for(const c in s.statics)t[c]=s.statics[c]};","node_modules/mongoose/lib/helpers/populate/assignVals.js":"\"use strict\";const SkipPopulateValue=require(\"./SkipPopulateValue\"),assignRawDocsToIdStructure=require(\"./assignRawDocsToIdStructure\"),get=require(\"../get\"),getVirtual=require(\"./getVirtual\"),leanPopulateMap=require(\"./leanPopulateMap\"),lookupLocalFields=require(\"./lookupLocalFields\"),mpath=require(\"mpath\"),sift=require(\"sift\").default,utils=require(\"../../utils\");function numDocs(t){return Array.isArray(t)?t.some(t=>Array.isArray(t))?t.map(t=>numDocs(t)):t.length:null==t?0:1}function valueFilter(t,e,l,r){const a=\"function\"==typeof l.transform,o=a?l.transform:noop;if(Array.isArray(t)){const n=[],s=t.length;for(let i=0;i<s;++i){let s=t[i];const u=Array.isArray(r)?r[i]:r;if((isPopulatedObject(s)||l.retainNullValues&&null==s||a)&&(a&&(s=o(isPopulatedObject(s)?s:null,u)),maybeRemoveId(s,e),n.push(s),e.originalLimit&&n.length>=e.originalLimit))break}for(;t.length>n.length;)Array.prototype.pop.apply(t,[]);for(let e=0;e<n.length;++e)t[e]=n[e];return t}return isPopulatedObject(t)||utils.isPOJO(t)?(maybeRemoveId(t,e),o(t,r)):t instanceof Map?t:!1===l.justOne?[]:o(null==t?t:null,r)}function maybeRemoveId(t,e){null!=t&&e.excludeId&&(\"function\"==typeof t.$__setValue?delete t._doc._id:delete t._id)}function isPopulatedObject(t){return null!=t&&(Array.isArray(t)||t.$isMongooseMap||null!=t.$__||leanPopulateMap.has(t))}function noop(t){return t}module.exports=function(t){const e=Object.assign({},get(t,\"allOptions.options.options\"),get(t,\"allOptions.options\")),l=Object.assign({},t.options,e,{justOne:t.justOne});l.$nullIfNotFound=t.isVirtual;const r=t.populatedModel,a=[].concat(t.rawIds);t.allIds=[].concat(t.allIds),assignRawDocsToIdStructure(t.rawIds,t.rawDocs,t.rawOrder,l);const o=t.docs,n=t.rawIds,s=t.options,i=t.count&&t.isVirtual;let u;function p(e){if(i)return e;if(e instanceof SkipPopulateValue)return e.val;const a=t.allIds[u];if(!0===t.justOne&&Array.isArray(e)){const t=[];for(const l of e){const e=leanPopulateMap.get(l);null!=e&&e!==r||t.push(l)}for(;e.length>t.length;)Array.prototype.pop.apply(e,[]);for(let l=0;l<t.length;++l)e[l]=t[l];return valueFilter(e[0],s,l,a)}return!1!==t.justOne||Array.isArray(e)?valueFilter(e,s,l,a):valueFilter([e],s,l,a)}for(u=0;u<o.length;++u){const e=t.path.endsWith(\".$*\")?t.path.slice(0,-3):t.path,l=mpath.get(e,o[u],lookupLocalFields);if(null==l&&!getVirtual(t.originalModel.schema,e))continue;let r;r=i?numDocs(n[u]):Array.isArray(t.match)?Array.isArray(n[u])?n[u].filter(sift(t.match[u])):[n[u]].filter(sift(t.match[u]))[0]:n[u];const s=t.originalModel.schema,c=null!=get(o[u],\"$__\",null);let f=c?l instanceof Map:utils.isPOJO(l);if(f=f&&get(s._getSchema(e),\"$isSchemaMap\"),!t.isVirtual&&f){const t=l instanceof Map?Array.from(l.keys()):Object.keys(l);r=r.reduce((e,l,r)=>(e.set(t[r],l),e),new Map)}if(c&&Array.isArray(r))for(const t of r)null!=t&&null!=t.$__&&(t.$__.parent=o[u]);else c&&null!=r&&null!=r.$__&&(r.$__.parent=o[u]);if(t.isVirtual&&c){o[u].populated(e,t.justOne?a[0]:a,t.allOptions),mpath.set(e,r,o[u],p);continue}const d=e.split(\".\");let y=o[u];const g=d[0];for(let t=0;t<d.length-1&&(!Array.isArray(y)||utils.isArrayIndex(d[t]))&&\"$*\"!==d[t];++t){if(null==y[d[t]]){const e=s._getSchema(g);if(null==r&&null!=e&&e.$isMongooseArray)break;y[d[t]]={}}if(\"object\"!=typeof(y=y[d[t]]))break}o[u].$__&&o[u].populated(e,t.allIds[u],t.allOptions),mpath.set(e,r,o[u],lookupLocalFields,p,!1)}};","node_modules/mongoose/lib/helpers/model/castBulkWrite.js":"\"use strict\";const getDiscriminatorByValue=require(\"../../helpers/discriminator/getDiscriminatorByValue\"),applyTimestampsToChildren=require(\"../update/applyTimestampsToChildren\"),applyTimestampsToUpdate=require(\"../update/applyTimestampsToUpdate\"),cast=require(\"../../cast\"),castUpdate=require(\"../query/castUpdate\"),setDefaultsOnInsert=require(\"../setDefaultsOnInsert\");function _addDiscriminatorToObject(e,t){null!=e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t[e.discriminatorMapping.key]=e.discriminatorMapping.value)}function decideModelByObject(e,t){const a=e.schema.options.discriminatorKey;return null!=t&&t.hasOwnProperty(a)&&(e=getDiscriminatorByValue(e.discriminators,t[a])||e),e}module.exports=function(e,t,a){const s=e.base.now();return t.insertOne?s=>{const n=decideModelByObject(e,t.insertOne.document),r=new n(t.insertOne.document);n.schema.options.timestamps&&r.initializeTimestamps(),null!=a.session&&r.$session(a.session),t.insertOne.document=r,t.insertOne.document.validate({__noPromise:!0},function(e){if(e)return s(e,null);s(null)})}:t.updateOne?n=>{try{if(!t.updateOne.filter)throw new Error(\"Must provide a filter object.\");if(!t.updateOne.update)throw new Error(\"Must provide an update object.\");const r=decideModelByObject(e,t.updateOne.filter),i=r.schema,p=null!=a.strict?a.strict:r.schema.options.strict;if(_addDiscriminatorToObject(i,t.updateOne.filter),null!=r.schema.$timestamps&&!1!==t.updateOne.timestamps){const e=r.schema.$timestamps.createdAt,a=r.schema.$timestamps.updatedAt;applyTimestampsToUpdate(s,e,a,t.updateOne.update,{})}applyTimestampsToChildren(s,t.updateOne.update,r.schema),t.updateOne.setDefaultsOnInsert&&setDefaultsOnInsert(t.updateOne.filter,r.schema,t.updateOne.update,{setDefaultsOnInsert:!0,upsert:t.updateOne.upsert}),t.updateOne.filter=cast(r.schema,t.updateOne.filter,{strict:p,upsert:t.updateOne.upsert}),t.updateOne.update=castUpdate(r.schema,t.updateOne.update,{strict:p,overwrite:!1,upsert:t.updateOne.upsert},r,t.updateOne.filter)}catch(e){return n(e,null)}n(null)}:t.updateMany?n=>{try{if(!t.updateMany.filter)throw new Error(\"Must provide a filter object.\");if(!t.updateMany.update)throw new Error(\"Must provide an update object.\");const r=decideModelByObject(e,t.updateMany.filter),i=r.schema,p=null!=a.strict?a.strict:r.schema.options.strict;if(t.updateMany.setDefaultsOnInsert&&setDefaultsOnInsert(t.updateMany.filter,r.schema,t.updateMany.update,{setDefaultsOnInsert:!0,upsert:t.updateMany.upsert}),null!=r.schema.$timestamps&&!1!==t.updateMany.timestamps){const e=r.schema.$timestamps.createdAt,a=r.schema.$timestamps.updatedAt;applyTimestampsToUpdate(s,e,a,t.updateMany.update,{})}applyTimestampsToChildren(s,t.updateMany.update,r.schema),_addDiscriminatorToObject(i,t.updateMany.filter),t.updateMany.filter=cast(r.schema,t.updateMany.filter,{strict:p,upsert:t.updateMany.upsert}),t.updateMany.update=castUpdate(r.schema,t.updateMany.update,{strict:p,overwrite:!1,upsert:t.updateMany.upsert},r,t.updateMany.filter)}catch(e){return n(e,null)}n(null)}:t.replaceOne?s=>{const n=decideModelByObject(e,t.replaceOne.filter),r=n.schema,i=null!=a.strict?a.strict:n.schema.options.strict;_addDiscriminatorToObject(r,t.replaceOne.filter);try{t.replaceOne.filter=cast(n.schema,t.replaceOne.filter,{strict:i,upsert:t.replaceOne.upsert})}catch(e){return s(e,null)}const p=new n(t.replaceOne.replacement,i,!0);n.schema.options.timestamps&&p.initializeTimestamps(),null!=a.session&&p.$session(a.session),t.replaceOne.replacement=p,t.replaceOne.replacement.validate({__noPromise:!0},function(e){if(e)return s(e,null);t.replaceOne.replacement=t.replaceOne.replacement.toBSON(),s(null)})}:t.deleteOne?a=>{const s=decideModelByObject(e,t.deleteOne.filter);_addDiscriminatorToObject(s.schema,t.deleteOne.filter);try{t.deleteOne.filter=cast(s.schema,t.deleteOne.filter)}catch(e){return a(e,null)}a(null)}:t.deleteMany?a=>{const s=decideModelByObject(e,t.deleteMany.filter);_addDiscriminatorToObject(s.schema,t.deleteMany.filter);try{t.deleteMany.filter=cast(s.schema,t.deleteMany.filter)}catch(e){return a(e,null)}a(null)}:e=>{e(new Error(\"Invalid op passed to `bulkWrite()`\"),null)}};","node_modules/mongoose/lib/helpers/populate/createPopulateQueryFilter.js":"\"use strict\";const SkipPopulateValue=require(\"./SkipPopulateValue\"),parentPaths=require(\"../path/parentPaths\");function _filterInvalidIds(t,e,r){return t=t.filter(t=>!(t instanceof SkipPopulateValue)),r?t.filter(t=>{try{return e.cast(t),!0}catch(t){return!1}}):t}function _formatMatch(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(t=>Object.assign({},t)))}:Object.assign({},t[0]):Object.assign({},t)}module.exports=function(t,e,r,a,n){const i=_formatMatch(e);if(1===r.size){const e=Array.from(r)[0],s=a.schema.path(e);\"_id\"===e&&i._id||(t=_filterInvalidIds(t,s,n),i[e]={$in:t});const o=parentPaths(e);for(let r=0;r<o.length-1;++r){const a=o[r];if(null!=i[a]&&null!=i[a].$elemMatch){i[a].$elemMatch[e.slice(a.length+1)]={$in:t},delete i[e];break}}}else{const e=[];Array.isArray(i.$or)?(i.$and=[{$or:i.$or},{$or:e}],delete i.$or):i.$or=e;for(const s of r)if(\"_id\"!==s||!i._id){t=_filterInvalidIds(t,a.schema.path(s),n),e.push({[s]:{$in:t}})}}return i};","node_modules/mongoose/lib/helpers/getDefaultBulkwriteResult.js":"\"use strict\";function getDefaultBulkwriteResult(){return{result:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},insertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,upsertedCount:0,upsertedIds:{},insertedIds:{},n:0}}module.exports=getDefaultBulkwriteResult;","node_modules/mongoose/lib/helpers/each.js":"\"use strict\";module.exports=function(n,t,l){if(0===n.length)return l();let u=n.length,e=null;for(const o of n)t(o,function(n){if(null==e)return null!=n?l(e=n):--u<=0?l():void 0})};","node_modules/mongoose/lib/helpers/populate/getModelsMapForPopulate.js":"\"use strict\";const MongooseError=require(\"../../error/index\"),SkipPopulateValue=require(\"./SkipPopulateValue\"),get=require(\"../get\"),getDiscriminatorByValue=require(\"../discriminator/getDiscriminatorByValue\"),isPathExcluded=require(\"../projection/isPathExcluded\"),getSchemaTypes=require(\"./getSchemaTypes\"),getVirtual=require(\"./getVirtual\"),lookupLocalFields=require(\"./lookupLocalFields\"),mpath=require(\"mpath\"),normalizeRefPath=require(\"./normalizeRefPath\"),util=require(\"util\"),utils=require(\"../../utils\"),modelSymbol=require(\"../symbols\").modelSymbol,populateModelSymbol=require(\"../symbols\").populateModelSymbol,schemaMixedSymbol=require(\"../../schema/symbols\").schemaMixedSymbol;function handleRefFunction(e,t){return\"function\"!=typeof e||e[modelSymbol]?e:e.call(t,t)}function convertTo_id(e,t){if(null!=e&&null!=e.$__)return e._id;if(null!=e&&null!=e._id&&(null==t||!t.$isSchemaMap))return e._id;if(Array.isArray(e)){for(let t=0;t<e.length;++t)null!=e[t]&&null!=e[t].$__&&(e[t]=e[t]._id);return e.isMongooseArray&&e.$schema()?e.$schema()._castForPopulate(e,e.$parent()):[].concat(e)}if(null!=e&&\"Object\"===e.constructor.name&&(null==t||null==t[schemaMixedSymbol])){const t=[];for(const o of Object.keys(e))t.push(e[o]);return t}return e instanceof Map?Array.from(e.values()):e}module.exports=function(e,t,o){let l,i;const n=t.length,r={},s=[],a=o.model&&o.model.modelName||o.model;let u,c,p,h,m,f;const d=o.model;let y=!1;const g=e.schema;let P=getSchemaTypes(g,null,o.path);const A=(P=Array.isArray(P)?P:[P].filter(e=>null!=e)).find(e=>null!=get(e,\"options.refPath\",null));for(l=0;l<n;l++){i=t[l];let n=null;if(null!=(u=getSchemaTypes(g,i,o.path))&&u.$isMongooseDocumentArray&&null==u.options.ref&&null==u.options.refPath)continue;if(g.nested[o.path])continue;if(u&&u.$isUnderneathDocArray&&null!=get(o,\"options.sort\"))return new MongooseError(\"Cannot populate with `sort` on path \"+o.path+\" because it is a subproperty of a document array\");m=null;let a=!!A,c=A?get(A,\"options.refPath\",null):null,P=null;if(Array.isArray(u)){const e=u;for(const t of e){let e,l;try{e=(l=b(i,t)).modelNames,a=a||l.isRefPath,c=normalizeRefPath(c,i,o.path)||l.refPath,n=l.justOne}catch(e){return e}if((!a||l.isRefPath)&&e){m=m||[];for(const t of e)-1===m.indexOf(t)&&m.push(t)}}}else{try{const e=b(i,u);m=e.modelNames,a=e.isRefPath,c=e.refPath,n=e.justOne,P=get(u,\"options.populate\",null)}catch(e){return e}if(!m)continue}const S=getVirtual(e.schema,o.path),_=null==S?null:S.virtual;let F,M=!1;if(_&&_.options){const e=S.nestedSchemaPath?S.nestedSchemaPath+\".\":\"\";F=\"function\"==typeof _.options.localField?e+_.options.localField.call(i,i):Array.isArray(_.options.localField)?_.options.localField.map(t=>e+t):e+_.options.localField,M=_.options.count,null==_.options.skip||o.hasOwnProperty(\"skip\")||(o.skip=_.options.skip),null==_.options.limit||o.hasOwnProperty(\"limit\")||(o.limit=_.options.limit),null==_.options.perDocumentLimit||o.hasOwnProperty(\"perDocumentLimit\")||(o.perDocumentLimit=_.options.perDocumentLimit)}else F=o.path;let V=_&&_.options?_.options.foreignField:\"_id\";if(\"justOne\"in o&&void 0!==o.justOne)n=o.justOne;else if(_&&_.options&&_.options.refPath){const e=normalizeRefPath(_.options.refPath,i,o.path);n=!!_.options.justOne,y=!0;const t=utils.getValue(e,i);m=Array.isArray(t)?t:[t]}else if(_&&_.options&&_.options.ref){let e;e=\"function\"==typeof _.options.ref?_.options.ref.call(i,i):_.options.ref,n=!!_.options.justOne,y=!0,m||(m=[].concat(e))}else u&&!u[schemaMixedSymbol]&&o.path.endsWith(\".\"+u.path)&&(n=Array.isArray(u)?u.every(e=>!e.$isMongooseArray):!u.$isMongooseArray);if(!m)continue;if(_&&(!F||!V))return new MongooseError(\"If you are populating a virtual, you must set the localField and foreignField options\");o.isVirtual=y,o.virtual=_,\"function\"==typeof F&&(F=F.call(i,i)),\"function\"==typeof V&&(V=V.call(i));let j=get(o,\"match\",null)||get(h,\"match\",null)||get(o,\"virtual.options.match\",null)||get(o,\"virtual.options.options.match\",null),O=\"function\"==typeof j;if(O&&(j=j.call(i,i)),Array.isArray(F)&&Array.isArray(V)&&F.length===V.length){j=Object.assign({},j);for(let e=1;e<F.length;++e)j[V[e]]=convertTo_id(mpath.get(F[e],i,lookupLocalFields),u),O=!0;F=F[0],V=V[0]}const q=g._getPathType(F),v=\"real\"===q?g.path(F):q.schema,k=v&&v.getters?v.getters:[];let $;const R=get(o,\"options\",{}),L=\"getters\"in R?R.getters:o.isVirtual&&get(_,\"options.getters\",!1);if(k.length>0&&L){const t=null!=i.$__?i:e.hydrate(i),o=mpath.get(F,i,lookupLocalFields);if(Array.isArray(o)){const e=mpath.get(F.split(\".\").slice(0,-1),t,lookupLocalFields);$=o.map((t,o)=>v.applyGetters(t,e[o]))}else $=v.applyGetters(o,t)}else $=convertTo_id(mpath.get(F,i,lookupLocalFields),u);const w=String(utils.getValue(V,i));if(o._docs[w]=Array.isArray($)?$.slice():$,a&&null!=c){const e=c.split(\".\");let t=\"\";for(let l=0;l<e.length;++l){const n=e[l];t=t+(0===t.length?\"\":\".\")+n;const r=g.path(t);if(null!=r&&r.$isMongooseArray&&null!=r.caster.discriminators&&Object.keys(r.caster.discriminators).length>0){const n=utils.getValue(t,i),s=o.path.substr(t.length+1),a=r.caster.schema.options.discriminatorKey;m=[];for(const o of n){const i=utils.getValue(a,o),n=r.caster.discriminators[i],u=n&&n.schema;if(null==u)continue;const c=u.path(s);if(null==c||null==c.options.refPath){const e=utils.getValue(F.substr(t.length+1),o);$=$.map(t=>t===e?SkipPopulateValue(t):t);continue}const p=utils.getValue(e.slice(l+1).join(\".\"),o);m.push(p)}}}}let x=m.length;for(;x--;){if(null==(f=m[x]))continue;const t=null!=o.connection?o.connection:e.db;try{p=d&&d[modelSymbol]?d:f[modelSymbol]?f:t.model(f)}catch(e){if(void 0!==$)return e}let l=$;const u=Array.isArray($)?utils.array.flatten($):[];a&&Array.isArray($)&&u.length===m.length&&(l=u.filter((e,t)=>m[t]===f)),r[f]&&null==h.perDocumentLimit&&null==get(h,\"options.perDocumentLimit\")?(r[f].localField.add(F),r[f].foreignField.add(V),r[f].docs.push(i),r[f].ids.push(l),r[f].allIds.push($),O&&r[f].match.push(j)):(h={model:p},y&&get(_,\"options.options\")?h.options=utils.clone(_.options.options):null!=P&&(h.options=Object.assign({},P)),utils.merge(h,o),o[populateModelSymbol]=p,r[f]={model:p,options:h,match:O?[j]:j,docs:[i],ids:[l],allIds:[$],localField:new Set([F]),foreignField:new Set([V]),justOne:n,isVirtual:y,virtual:_,count:M,[populateModelSymbol]:p},s.push(r[f]))}}return s;function b(t,l){let i,n,r=!1,s=null;l&&l.caster&&(l=l.caster),l&&l.$isSchemaMap&&(l=l.$__schemaType),!l&&e.discriminators&&(n=e.schema.discriminatorMapping.key),c=l&&l.options&&l.options.refPath;const u=normalizeRefPath(c,t,o.path);if(a)i=[a];else if(u){if(null!=o._queryProjection&&isPathExcluded(o._queryProjection,u))throw new MongooseError(\"refPath `\"+u+\"` must not be excluded in projection, got \"+util.inspect(o._queryProjection));i=g.virtuals.hasOwnProperty(u)&&null==t.$__?[g.virtuals[u].applyGetters(void 0,t)]:utils.getValue(u,t),Array.isArray(i)&&(i=utils.array.flatten(i)),r=!0}else{let a,u,c=e;if(!l&&n&&(u=utils.getValue(n,t))){const t=getDiscriminatorByValue(e.discriminators,u)||e;if(null!=t)c=t;else try{c=e.db.model(u)}catch(e){return e}(a=c.schema._getSchema(o.path))&&a.caster&&(a=a.caster)}else a=l;const p=getVirtual(c.schema,o.path),h=null==p?null:p.virtual;let m,f;null!=a&&(s=!a.$isMongooseArray&&!a._arrayPath),null!=(m=get(a,\"options.ref\"))?i=[m=handleRefFunction(m,t)]:null!=(m=get(h,\"options.ref\"))?(m=handleRefFunction(m,t),i=Array.isArray(m)?m:[m],y=!0):null!=(f=get(a,\"options.refPath\"))?(r=!0,f=normalizeRefPath(f,t,o.path),i=utils.getValue(f,t),Array.isArray(i)&&(i=utils.array.flatten(i))):i=n?null:[e.modelName]}return i?(Array.isArray(i)||(i=[i]),{modelNames:i,isRefPath:r,refPath:u,justOne:s}):{modelNames:i,isRefPath:r,refPath:u,justOne:s}}};","node_modules/mongoose/lib/helpers/indexes/isDefaultIdIndex.js":"\"use strict\";const get=require(\"../get\");module.exports=function(e){if(Array.isArray(e)){const t=Object.keys(e[0]);return 1===t.length&&\"_id\"===t[0]&&\"hashed\"!==e[0]._id}if(\"object\"!=typeof e)return!1;const t=get(e,\"key\",{});return 1===Object.keys(t).length&&t.hasOwnProperty(\"_id\")};","node_modules/mongoose/lib/helpers/indexes/isIndexEqual.js":"\"use strict\";const get=require(\"../get\"),utils=require(\"../../utils\");module.exports=function(e,t,n){if(null!=n.textIndexVersion){const l=n.weights;if(Object.keys(l).length!==Object.keys(e).length)return!1;for(const n of Object.keys(l)){if(!(n in e))return!1;const r=l[n];if(r!==get(t,\"weights.\"+n)&&(1!==r||null!=get(t,\"weights.\"+n)))return!1}return t.default_language===n.default_language||\"english\"===n.default_language&&null==t.default_language}const l=[\"unique\",\"partialFilterExpression\",\"sparse\",\"expireAfterSeconds\",\"collation\"];for(const e of l)if(e in t||e in n)if(\"collation\"===e){if(null==t[e]||null==n[e])return null==t[e]&&null==n[e];const l=Object.keys(t.collation),r=t.collation,u=n.collation;for(const e of l)if(get(r,e)!==get(u,e))return!1}else if(!utils.deepEqual(t[e],n[e]))return!1;const r=Object.keys(e),u=Object.keys(n.key);if(r.length!==u.length)return!1;for(let t=0;t<r.length;++t){if(r[t]!==u[t])return!1;if(!utils.deepEqual(e[r[t]],n.key[u[t]]))return!1}return!0};","node_modules/mongoose/lib/helpers/projection/isPathSelectedInclusive.js":"\"use strict\";module.exports=function(e,t){const n=t.split(\".\");let r,l,f,i=\"\";for(let o=0;o<n.length;++o)if(e[i+=i.length?\".\":\"\"+n[o]]){for(f=(l=Object.keys(e)).length,r=0;r<f;++r)0!==l[o].indexOf(i+\".\")||l[o].indexOf(t);return!0}return!1};","node_modules/mongoose/lib/helpers/populate/leanPopulateMap.js":"\"use strict\";module.exports=new WeakMap;","node_modules/mongoose/lib/helpers/parallelLimit.js":"\"use strict\";function parallelLimit(l,t,n){let e=0,i=0,r=null;if(t<=0)throw new Error(\"Limit must be positive\");if(0===l.length)return n(null,[]);for(let n=0;n<l.length&&n<t;++n)u();function u(){var t;l[i+e]((t=i+e,(f,s)=>{if(--e,++i,null==r){if(null!=f)return n(r=f);if(o[t]=s,i===l.length)return n(null,o);i+e<l.length&&u()}})),++e}const o=[]}module.exports=parallelLimit;","node_modules/mongoose/lib/helpers/populate/removeDeselectedForeignField.js":"\"use strict\";const get=require(\"../get\"),mpath=require(\"mpath\"),parseProjection=require(\"../projection/parseProjection\");module.exports=function(e,t,o){const r=parseProjection(get(t,\"select\",null),!0)||parseProjection(get(t,\"options.select\",null),!0);if(null!=r)for(const t of e)if(r.hasOwnProperty(\"-\"+t))for(const e of o)null!=e.$__?mpath.unset(t,e._doc):mpath.unset(t,e)};","node_modules/mongoose/lib/cursor/AggregationCursor.js":"\"use strict\";const MongooseError=require(\"../error/mongooseError\"),Readable=require(\"stream\").Readable,promiseOrCallback=require(\"../helpers/promiseOrCallback\"),eachAsync=require(\"../helpers/cursor/eachAsync\"),util=require(\"util\");function AggregationCursor(r){Readable.call(this,{objectMode:!0}),this.cursor=null,this.agg=r,this._transforms=[];const o=r._model;delete r.options.cursor.useMongooseAggCursor,this._mongooseOptions={},_init(o,this,r)}function _init(r,o,t){r.collection.buffer?r.collection.emitter.once(\"queue\",function(){r.hooks.execPre(\"aggregate\",t,function(){o.cursor=r.collection.aggregate(t._pipeline,t.options||{}),o.emit(\"cursor\",o.cursor)})}):r.hooks.execPre(\"aggregate\",t,function(){o.cursor=r.collection.aggregate(t._pipeline,t.options||{}),o.emit(\"cursor\",o.cursor)})}if(util.inherits(AggregationCursor,Readable),AggregationCursor.prototype._read=function(){const r=this;_next(this,function(o,t){return o?r.emit(\"error\",o):t?void r.push(t):(r.push(null),void r.cursor.close(function(o){if(o)return r.emit(\"error\",o);setTimeout(function(){!r.destroyed&&r.emit(\"close\")},0)}))})},null!=Symbol.asyncIterator){const r=\"Mongoose does not support using async iterators with an existing aggregation cursor. See http://bit.ly/mongoose-async-iterate-aggregation\";AggregationCursor.prototype[Symbol.asyncIterator]=function(){throw new MongooseError(r)}}function _transformForAsyncIterator(r){return null==r?{done:!0}:{value:r,done:!1}}function _waitForCursor(r,o){if(r.cursor)return o();r.once(\"cursor\",function(){o()})}function _next(r,o){let t=o;return r._transforms.length&&(t=function(t,e){if(t||null===e&&!r._mongooseOptions.transformNull)return o(t,e);o(t,r._transforms.reduce(function(r,o){return o(r)},e))}),r._error?process.nextTick(function(){t(r._error)}):r.cursor?r.cursor.next(function(r,o){return r?t(r):o?void t(null,o):t(null,null)}):void r.once(\"cursor\",function(){_next(r,o)})}AggregationCursor.prototype.map=function(r){return this._transforms.push(r),this},AggregationCursor.prototype._markError=function(r){return this._error=r,this},AggregationCursor.prototype.close=function(r){return promiseOrCallback(r,r=>{this.cursor.close(o=>{if(o)return r(o),this.listeners(\"error\").length>0&&this.emit(\"error\",o);this.emit(\"close\"),r(null)})})},AggregationCursor.prototype.next=function(r){return promiseOrCallback(r,r=>{_next(this,r)})},AggregationCursor.prototype.eachAsync=function(r,o,t){const e=this;return\"function\"==typeof o&&(t=o,o={}),eachAsync(function(r){return _next(e,r)},r,o=o||{},t)},null!=Symbol.asyncIterator&&(AggregationCursor.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()}),AggregationCursor.prototype._transformForAsyncIterator=function(){return-1===this._transforms.indexOf(_transformForAsyncIterator)&&this.map(_transformForAsyncIterator),this},AggregationCursor.prototype.transformNull=function(r){return 0===arguments.length&&(r=!0),this._mongooseOptions.transformNull=r,this},AggregationCursor.prototype.addCursorFlag=function(r,o){const t=this;return _waitForCursor(this,function(){t.cursor.addCursorFlag(r,o)}),this},module.exports=AggregationCursor;","node_modules/mongoose/lib/helpers/aggregate/stringifyFunctionOperators.js":"\"use strict\";function handleAccumulator(o){if(null!=o&&null!=o.$accumulator)for(const t of[\"init\",\"accumulate\",\"merge\",\"finalize\"])\"function\"==typeof o.$accumulator[t]&&(o.$accumulator[t]=String(o.$accumulator[t]))}module.exports=function o(t){if(Array.isArray(t))for(const c of t){if(null==c)continue;const t=c.$group||c.$bucket||c.$bucketAuto;if(null!=t)for(const o of Object.keys(t))handleAccumulator(t[o]);const n=Object.keys(c)[0];if(n&&\"object\"==typeof c[n]){const o=c[n];for(const t of Object.keys(o))null!=o[t]&&null!=o[t].$function&&\"function\"==typeof o[t].$function.body&&(o[t].$function.body=o[t].$function.body.toString())}if(null!=c.$facet)for(const t of Object.keys(c.$facet))o(c.$facet[t])}};","node_modules/mongoose/lib/helpers/topology/allServersUnknown.js":"\"use strict\";module.exports=function(r){if(null==r||\"TopologyDescription\"!==r.constructor.name)return!1;const e=Array.from(r.servers.values());return e.length>0&&e.every(r=>\"Unknown\"===r.type)};","node_modules/mongoose/lib/helpers/topology/isAtlas.js":"\"use strict\";module.exports=function(e){if(null==e||\"TopologyDescription\"!==e.constructor.name)return!1;const r=Array.from(e.servers.keys());return r.length>0&&r.every(e=>e.endsWith(\".mongodb.net:27017\"))};","node_modules/mongoose/lib/helpers/topology/isSSLError.js":"\"use strict\";const nonSSLMessage=\"Client network socket disconnected before secure TLS connection was established\";module.exports=function(e){if(null==e||\"TopologyDescription\"!==e.constructor.name)return!1;const r=Array.from(e.servers.values());return r.length>0&&r.every(e=>e.error&&-1!==e.error.message.indexOf(nonSSLMessage))};","node_modules/mongoose/lib/helpers/populate/SkipPopulateValue.js":"\"use strict\";module.exports=function t(s){return this instanceof t?(this.val=s,this):new t(s)};","node_modules/mongoose/lib/helpers/populate/assignRawDocsToIdStructure.js":"\"use strict\";const leanPopulateMap=require(\"./leanPopulateMap\"),modelSymbol=require(\"../symbols\").modelSymbol,utils=require(\"../../utils\");function assignRawDocsToIdStructure(l,e,t,u,o){const s=[],n=u.sort&&l.length>1,r=u.$nullIfNotFound;let a,i,c;for(let p=0;p<l.length;++p)if(c=l[p],Array.isArray(c))assignRawDocsToIdStructure(c,e,t,u,!0),s.push(c);else if(null!==c||n){if(a=e[i=String(c)],u.clone&&null!=a)if(u.lean){const l=leanPopulateMap.get(a);a=utils.clone(a),leanPopulateMap.set(a,l)}else a=a.constructor.hydrate(a._doc);o?a?n?s[t[i]]=a:s.push(a):null!=c&&null!=c[modelSymbol]?s.push(c):s.push(u.retainNullValues||r?null:c):s[p]=a||null}else s.push(c);l.length=0,s.length&&s.forEach(function(e,t){l[t]=e})}module.exports=assignRawDocsToIdStructure;","node_modules/mongoose/lib/helpers/populate/getVirtual.js":"\"use strict\";function getVirtual(t,i){if(t.virtuals[i])return{virtual:t.virtuals[i],path:void 0};const r=i.split(\".\");let e=\"\",s=\"\";for(let n=0;n<r.length;++n)if(e+=(e.length>0?\".\":\"\")+r[n],t.virtuals[e]){if(n===r.length-1)return{virtual:t.virtuals[e],path:s}}else if(!t.nested[e]){if(!t.paths[e]||!t.paths[e].schema){if(t.discriminators)for(const r of Object.keys(t.discriminators)){const e=getVirtual(t.discriminators[r],i);if(e)return e}return null}{t=t.paths[e].schema;const i=r.slice(n+1).join(\".\");if(t.virtuals[i]){if(n===r.length-2)return{virtual:t.virtuals[i],nestedSchemaPath:[s,e].filter(t=>!!t).join(\".\")};continue}if(n+1<r.length&&t.discriminators)for(const r of Object.keys(t.discriminators)){const n=getVirtual(t.discriminators[r],i);if(null!=n){const t=[s,e,n.nestedSchemaPath].filter(t=>!!t).join(\".\");return{virtual:n.virtual,nestedSchemaPath:t}}}s+=(s.length>0?\".\":\"\")+e,e=\"\"}}}module.exports=getVirtual;","node_modules/mongoose/lib/helpers/populate/lookupLocalFields.js":"\"use strict\";module.exports=function(e,r,t){if(null==e)return e;if(null!=e._doc&&(e=e._doc),arguments.length>=3){if(\"object\"!=typeof e)return;return e[r]=t,t}return\"$*\"===r?e instanceof Map?Array.from(e.values()):Object.keys(e).map(r=>e[r]):e[r]};","node_modules/sift/index.js":"const lib=require(\"./lib\");module.exports=lib.default,Object.assign(module.exports,lib);","node_modules/sift/lib/index.js":"!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n((t=t||self).sift={})}(this,function(t){\"use strict\";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,e)};function e(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var r=function(t){var n=\"[object \"+t+\"]\";return function(t){return o(t)===n}},o=function(t){return Object.prototype.toString.call(t)},i=function(t){return t instanceof Date?t.getTime():u(t)?t.map(i):t&&\"function\"==typeof t.toJSON?t.toJSON():t},u=r(\"Array\"),s=r(\"Object\"),p=r(\"Function\"),c=function(t,n){if(null==t&&t==n)return!0;if(t===n)return!0;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(n))return!1;if(u(t)){if(t.length!==n.length)return!1;for(var e=0,r=t.length;e<r;e++)if(!c(t[e],n[e]))return!1;return!0}if(s(t)){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var o in t)if(!c(t[o],n[o]))return!1;return!0}return!1},f=function(t,n,e,r,o,i){var s=n[r];if(u(t)&&isNaN(Number(s)))for(var p=0,c=t.length;p<c;p++)if(!f(t[p],n,e,r,p,t))return!1;return r===n.length||null==t?e(t,o,i):f(t[s],n,e,r+1,s,t)},a=function(){function t(t,n,e){this.params=t,this.owneryQuery=n,this.options=e,this.init()}return t.prototype.init=function(){},t.prototype.reset=function(){this.done=!1,this.keep=!1},t}(),h=function(t){function n(n,e,r,o){var i=t.call(this,n,e,r)||this;return i.name=o,i}return e(n,t),n}(a),l=function(t){function n(n,e,r,o){var i=t.call(this,n,e,r)||this;return i.children=o,i}return e(n,t),n.prototype.reset=function(){this.keep=!1,this.done=!1;for(var t=0,n=this.children.length;t<n;t++)this.children[t].reset()},n.prototype.childrenNext=function(t,n,e){for(var r=!0,o=!0,i=0,u=this.children.length;i<u;i++){var s=this.children[i];if(s.next(t,n,e),s.keep||(o=!1),s.done){if(!s.keep)break}else r=!1}this.done=r,this.keep=o},n}(a),y=function(t){function n(n,e,r,o,i){var u=t.call(this,n,e,r,o)||this;return u.name=i,u}return e(n,t),n}(l),d=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.next=function(t,n,e){this.childrenNext(t,n,e)},n}(l),$=function(t){function n(n,e,r,o,i){var u=t.call(this,e,r,o,i)||this;return u.keyPath=n,u._nextNestedValue=function(t,n,e){return u.childrenNext(t,n,e),!u.done},u}return e(n,t),n.prototype.next=function(t,n,e){f(t,this.keyPath,this._nextNestedValue,0,n,e)},n}(l),w=function(t,n){if(t instanceof Function)return t;if(t instanceof RegExp)return function(n){var e=\"string\"==typeof n&&t.test(n);return t.lastIndex=0,e};var e=i(t);return function(t){return n(e,i(t))}},v=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){this._test=w(this.params,this.options.compare)},n.prototype.next=function(t,n,e){Array.isArray(e)&&!e.hasOwnProperty(n)||this._test(t,n,e)&&(this.done=!0,this.keep=!0)},n}(a),x=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.next=function(){this.done=!0,this.keep=!1},n}(a),_=function(t){return n=function(n,e,r){var o=typeof i(n),u=t(n);return new v(function(t){return typeof i(t)===o&&u(t)},e,r)},function(t,e,r,o){return null==t?new x(t,e,r):n(t,e,r,o)};var n},g=function(t,n,e,r){var o=r.operations[t];if(!o)throw new Error(\"Unsupported operation: \"+t);return o(n,e,r,t)},m=function(t){for(var n in t)if(\"$\"===n.charAt(0))return!0;return!1},O=function(t,n,e,r){if(m(n)){var o=b(n,r),i=o[0];if(o[1].length)throw new Error(\"Property queries must contain only operations, or exact objects.\");return new $(t,n,e,r,i)}return new $(t,n,e,r,[new v(n,e,r)])},k=function(t,n,e){void 0===n&&(n=null);var r=void 0===e?{}:e,o=r.compare,i=r.operations,u={compare:o||c,operations:Object.assign({},i||{})},s=b(t,u),p=s[0],f=s[1],a=[];return p.length&&a.push(new $([],t,n,u,p)),a.push.apply(a,f),1===a.length?a[0]:new d(t,n,u,a)},b=function(t,n){var e,r=[],o=[];if(!(e=t)||e.constructor!==Object&&e.constructor!==Array&&\"function Object() { [native code] }\"!==e.constructor.toString()&&\"function Array() { [native code] }\"!==e.constructor.toString()||e.toJSON)return r.push(new v(t,t,n)),[r,o];for(var i in t)if(\"$\"===i.charAt(0)){var u=g(i,t[i],t,n);null!=u&&r.push(u)}else o.push(O(i.split(\".\"),t[i],t,n));return[r,o]},j=function(t){return function(n,e,r){return t.reset(),t.next(n,e,r),t.keep}},q=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){this._test=w(this.params,this.options.compare)},n.prototype.reset=function(){t.prototype.reset.call(this),this.keep=!0},n.prototype.next=function(t){this._test(t)&&(this.done=!0,this.keep=!1)},n}(h),N=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){this._queryOperation=k(this.params,this.owneryQuery,this.options)},n.prototype.reset=function(){t.prototype.reset.call(this),this._queryOperation.reset()},n.prototype.next=function(t){if(u(t)){for(var n=0,e=t.length;n<e;n++)this._queryOperation.reset(),this._queryOperation.next(t[n],n,t),this.keep=this.keep||this._queryOperation.keep;this.done=!0}else this.done=!1,this.keep=!1},n}(h),S=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){this._queryOperation=k(this.params,this.owneryQuery,this.options)},n.prototype.reset=function(){this._queryOperation.reset()},n.prototype.next=function(t,n,e){this._queryOperation.next(t,n,e),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},n}(h),A=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){},n.prototype.next=function(t){u(t)&&t.length===this.params&&(this.done=!0,this.keep=!0)},n}(h),E=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){var t=this;this._ops=this.params.map(function(n){return k(n,null,t.options)})},n.prototype.reset=function(){this.done=!1,this.keep=!1;for(var t=0,n=this._ops.length;t<n;t++)this._ops[t].reset()},n.prototype.next=function(t,n,e){for(var r=!1,o=!1,i=0,u=this._ops.length;i<u;i++){var s=this._ops[i];if(s.next(t,n,e),s.keep){r=!0,o=s.keep;break}}this.keep=o,this.done=r},n}(h),P=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.next=function(n,e,r){t.prototype.next.call(this,n,e,r),this.keep=!this.keep},n}(E),z=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.init=function(){var t=this;this._testers=this.params.map(function(n){if(m(n))throw new Error(\"cannot nest $ under \"+t.constructor.name.toLowerCase());return w(n,t.options.compare)})},n.prototype.next=function(t,n,e){for(var r=!1,o=!1,i=0,u=this._testers.length;i<u;i++){if((0,this._testers[i])(t)){r=!0,o=!0;break}}this.keep=o,this.done=r},n}(h),Q=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.next=function(n,e,r){t.prototype.next.call(this,n,e,r),this.keep=!this.keep},n}(z),D=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.next=function(t,n,e){e.hasOwnProperty(n)===this.params&&(this.done=!0,this.keep=!0)},n}(h),T=function(t){function n(n,e,r,o){return t.call(this,n,e,r,n.map(function(t){return k(t,e,r)}),o)||this}return e(n,t),n.prototype.next=function(t,n,e){this.childrenNext(t,n,e)},n}(y),C=function(t,n,e){return new v(t,n,e)},F=function(t,n,e,r){return new q(t,n,e,r)},J=function(t,n,e,r){return new E(t,n,e,r)},M=function(t,n,e,r){return new P(t,n,e,r)},I=function(t,n,e,r){return new N(t,n,e,r)},L=function(t,n,e,r){return new Q(t,n,e,r)},R=function(t,n,e,r){return new z(t,n,e,r)},V=_(function(t){return function(n){return n<t}}),B=_(function(t){return function(n){return n<=t}}),U=_(function(t){return function(n){return n>t}}),G=_(function(t){return function(n){return n>=t}}),H=function(t,n,e){var r=t[0],o=t[1];return new v(function(t){return i(t)%r===o},n,e)},K=function(t,n,e,r){return new D(t,n,e,r)},W=function(t,n,e){return new v(new RegExp(t,n.$options),n,e)},X=function(t,n,e,r){return new S(t,n,e,r)},Y={number:function(t){return\"number\"==typeof t},string:function(t){return\"string\"==typeof t},bool:function(t){return\"boolean\"==typeof t},array:function(t){return Array.isArray(t)},null:function(t){return null===t},timestamp:function(t){return t instanceof Date}},Z=function(t,n,e){return new v(function(n){if(\"string\"==typeof t){if(!Y[t])throw new Error(\"Type alias does not exist\");return Y[t](n)}return null!=n&&(n instanceof t||n.constructor===t)},n,e)},tt=function(t,n,e,r){return new T(t,n,e,r)},nt=tt,et=function(t,n,e){return new A(t,n,e,\"$size\")},rt=function(){return null},ot=function(t,n,e){var r;if(p(t))r=t;else{if(process.env.CSP_ENABLED)throw new Error('In CSP mode, sift does not support strings in \"$where\" condition');r=new Function(\"obj\",\"return \"+t)}return new v(function(t){return r.bind(t)(t)},n,e)},it=Object.freeze({__proto__:null,$Size:A,$eq:C,$ne:F,$or:J,$nor:M,$elemMatch:I,$nin:L,$in:R,$lt:V,$lte:B,$gt:U,$gte:G,$mod:H,$exists:K,$regex:W,$not:X,$type:Z,$and:tt,$all:nt,$size:et,$options:rt,$where:ot}),ut=function(t,n,e){var r=void 0===e?{}:e,o=r.compare,i=r.operations;return k(t,n,{compare:o,operations:Object.assign({},it,i||{})})};t.$Size=A,t.$all=nt,t.$and=tt,t.$elemMatch=I,t.$eq=C,t.$exists=K,t.$gt=U,t.$gte=G,t.$in=R,t.$lt=V,t.$lte=B,t.$mod=H,t.$ne=F,t.$nin=L,t.$nor=M,t.$not=X,t.$options=rt,t.$or=J,t.$regex=W,t.$size=et,t.$type=Z,t.$where=ot,t.EqualsOperation=v,t.createDefaultQueryOperation=ut,t.createEqualsOperation=function(t,n,e){return new v(t,n,e)},t.createOperationTester=j,t.createQueryOperation=k,t.createQueryTester=function(t,n){return void 0===n&&(n={}),j(k(t,null,n))},t.default=function(t,n){void 0===n&&(n={});var e=ut(t,null,n);return j(e)},Object.defineProperty(t,\"__esModule\",{value:!0})});","node_modules/mongoose/lib/helpers/path/parentPaths.js":"\"use strict\";module.exports=function(t){const e=t.split(\".\");let n=\"\";const s=[];for(let t=0;t<e.length;++t)n+=(n.length>0?\".\":\"\")+e[t],s.push(n);return s};","node_modules/mongoose/lib/helpers/projection/isPathExcluded.js":"\"use strict\";const isDefiningProjection=require(\"./isDefiningProjection\");module.exports=function(i,e){if(\"_id\"===e)return 0===i._id;const n=Object.keys(i);let o=null;for(const s of n)if(isDefiningProjection(i[s])){o=1===i[e]?\"inclusive\":\"exclusive\";break}return\"inclusive\"===o?1!==i[e]:\"exclusive\"===o&&0===i[e]};","node_modules/mongoose/lib/helpers/populate/getSchemaTypes.js":"\"use strict\";const Mixed=require(\"../../schema/mixed\"),get=require(\"../get\"),leanPopulateMap=require(\"./leanPopulateMap\"),mpath=require(\"mpath\"),populateModelSymbol=require(\"../symbols\").populateModelSymbol;module.exports=function(e,n,t){const s=e.path(t),r=n;if(s)return s;const l=t.split(\".\");for(let e=0;e<l.length;++e)\"$\"===l[e]&&(l[e]=\"0\");return function e(t,s,l,c){let i,a,o=t.length+1;for(;o--;){if(a=t.slice(0,o).join(\".\"),null==(i=s.path(a)))continue;if(i.caster){if(i.caster instanceof Mixed)return i.caster;let r=null;if(null!=i.schema&&null!=i.schema.discriminators){const e=i.schema.discriminators,t=a+\".\"+i.schema.options.discriminatorKey,s=l&&mpath.get(t,l)||[];r=Object.keys(e).reduce(function(t,r){const l=e[r].discriminatorMapping.value;return null!=n&&-1===s.indexOf(r)&&-1===s.indexOf(l)||t.push(e[r]),t},[])}if(o!==t.length&&i.schema){let n;if(\"$\"===t[o])return o+1===t.length?i:((n=e(t.slice(o+1),s,l?mpath.get(a,l):null,c.concat(t.slice(0,o))))&&(n.$isUnderneathDocArray=n.$isUnderneathDocArray||!i.schema.$isSingleNested),n);if(null!=r&&r.length>0){n=[];for(const s of r){const r=e(t.slice(o),s,l?mpath.get(a,l):null,c.concat(t.slice(0,o)));null!=r&&(r.$isUnderneathDocArray=r.$isUnderneathDocArray||!i.schema.$isSingleNested,r.$isUnderneathDocArray&&(n.$isUnderneathDocArray=!0),n.push(r))}return n}return(n=e(t.slice(o),i.schema,l?mpath.get(a,l):null,c.concat(t.slice(0,o))))&&(n.$isUnderneathDocArray=n.$isUnderneathDocArray||!i.schema.$isSingleNested),n}if(o!==t.length&&i.$isMongooseArray&&i.casterConstructor.$isMongooseArray){let n=i;for(;n.$isMongooseArray&&!n.$isMongooseDocumentArray;)n=n.casterConstructor;const s=e(t.slice(o),n.schema,null,c.concat(t.slice(0,o)));if(null!=s)return s;if(n.schema.discriminators){const s=[];for(const r of Object.keys(n.schema.discriminators)){const l=n.schema.discriminators[r]||n.schema,i=e(t.slice(o),l,null,c.concat(t.slice(0,o)));null!=i&&s.push(i)}if(s.length>0)return s}}}const u=c.concat([a]).join(\".\");if(null!=r&&r.$__&&r.populated(u)&&o<t.length){const s=n.$__.populated[u].options[populateModelSymbol];if(null!=s){const n=e(t.slice(o),s.schema,l?mpath.get(a,l):null,c.concat(t.slice(0,o)));return n&&(n.$isUnderneathDocArray=n.$isUnderneathDocArray||!s.schema.$isSingleNested),n}}const h=get(r,a);if(null!=h){const n=Array.isArray(h)&&h.length>0?leanPopulateMap.get(h[0]):leanPopulateMap.get(h),s=null!=n?n.schema:null;if(null!=s){const n=e(t.slice(o),s,l?mpath.get(a,l):null,c.concat(t.slice(0,o)));if(null!=n)return n.$isUnderneathDocArray=n.$isUnderneathDocArray||!s.$isSingleNested,n}}return i}}(l,e,n,[])};","node_modules/mongoose/lib/helpers/populate/normalizeRefPath.js":"\"use strict\";module.exports=function(t,n,e){if(null==t)return t;\"function\"==typeof t&&(t=t.call(n,n,e));const r=/(\\.\\d+$|\\.\\d+\\.)/g;if(r.test(e)){const n=e.split(r);if(\"\"===n[n.length-1])throw new Error(\"Can't populate individual element in an array\");let l=\"\",o=t;for(let t=0;t<n.length;t+=2){const e=n[t];if(!o.startsWith(e+\".\")){if(t===n.length-1){l+=o,o=\"\";break}throw new Error(\"Could not normalize ref path, chunk \"+e+\" not in populated path\")}l+=o.substr(0,e.length)+n[t+1],o=o.substr(e.length+1)}return l}return t};","node_modules/mongoose/lib/connection.js":"\"use strict\";const ChangeStream=require(\"./cursor/ChangeStream\"),EventEmitter=require(\"events\").EventEmitter,Schema=require(\"./schema\"),Collection=require(\"./driver\").get().Collection,STATES=require(\"./connectionstate\"),MongooseError=require(\"./error/index\"),PromiseProvider=require(\"./promise_provider\"),ServerSelectionError=require(\"./error/serverSelection\"),applyPlugins=require(\"./helpers/schema/applyPlugins\"),promiseOrCallback=require(\"./helpers/promiseOrCallback\"),get=require(\"./helpers/get\"),immediate=require(\"./helpers/immediate\"),mongodb=require(\"mongodb\"),pkg=require(\"../package.json\"),utils=require(\"./utils\"),parseConnectionString=require(\"mongodb/lib/core\").parseConnectionString,arrayAtomicsSymbol=require(\"./helpers/symbols\").arrayAtomicsSymbol,sessionNewDocuments=require(\"./helpers/symbols\").sessionNewDocuments,noPasswordAuthMechanisms=[\"MONGODB-X509\"];function Connection(e){this.base=e,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=STATES,this._readyState=STATES.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],void 0!==e&&e.connections.length?this.id=e.connections.length:this.id=0,this._queue=[]}function _wrapConnHelper(e){return function(){const t=arguments.length>0?arguments[arguments.length-1]:null,o=\"function\"==typeof t?Array.prototype.slice.call(arguments,0,arguments.length-1):Array.prototype.slice.call(arguments),n=new MongooseError(\"Connection \"+this.id+\" was disconnected when calling `\"+e.name+\"`\");return promiseOrCallback(t,t=>{immediate(()=>{if(this.readyState===STATES.connecting&&this._shouldBufferCommands())this._queue.push({fn:e,ctx:this,args:o.concat([t])});else if(this.readyState===STATES.disconnected&&null==this.db)t(n);else try{e.apply(this,o.concat([t]))}catch(e){return t(e)}})})}}function _setClient(e,t,o,n){const i=null!=n?t.db(n):t.db();e.db=i,e.client=t,e._closeCalled=t._closeCalled;const s=()=>{e.readyState!==STATES.connected&&(e.readyState=STATES.connected,e.emit(\"reconnect\"),e.emit(\"reconnected\"),e.onOpen())},r=get(i,\"s.topology.s.description.type\",\"\");if(o.useUnifiedTopology)if(\"Single\"===r){const o=Array.from(i.s.topology.s.servers.values())[0];o.s.topology.on(\"serverHeartbeatSucceeded\",()=>{s()}),o.s.pool.on(\"reconnect\",()=>{s()}),t.on(\"serverDescriptionChanged\",t=>{\"Standalone\"===t.newDescription.type?s():e.readyState=STATES.disconnected})}else r.startsWith(\"ReplicaSet\")&&(t.on(\"topologyDescriptionChanged\",t=>{const o=t.newDescription,n=Array.from(t.newDescription.servers.values()),i=\"ReplicaSetNoPrimary\"===o.type&&n.reduce((e,t)=>e||\"Unknown\"===t.type,!1);e.readyState===STATES.connected&&i?e.readyState=STATES.disconnected:e.readyState!==STATES.disconnected||i||s()}),t.on(\"close\",function(){\"ReplicaSetWithPrimary\"!==get(i,\"s.topology.s.description.type\",\"\")&&(e.readyState=STATES.disconnected)}));i.s.topology.on(\"reconnectFailed\",function(){e.emit(\"reconnectFailed\")}),o.useUnifiedTopology||(t.on(\"reconnect\",function(){s()}),i.s.topology.on(\"left\",function(t){e.emit(\"left\",t)})),i.s.topology.on(\"joined\",function(t){e.emit(\"joined\",t)}),i.s.topology.on(\"fullsetup\",function(t){e.emit(\"fullsetup\",t)}),null!=get(i,\"s.topology.s.coreTopology.s.pool\")&&i.s.topology.s.coreTopology.s.pool.on(\"attemptReconnect\",function(){e.emit(\"attemptReconnect\")}),o.useUnifiedTopology&&r.startsWith(\"ReplicaSet\")||t.on(\"close\",function(){e.readyState=STATES.disconnected}),o.useUnifiedTopology||(t.on(\"left\",function(){e.readyState===STATES.connected&&\"ReplicaSetNoPrimary\"===get(i,\"s.topology.s.coreTopology.s.replicaSetState.topologyType\")&&(e.readyState=STATES.disconnected)}),t.on(\"timeout\",function(){e.emit(\"timeout\")})),delete e.then,delete e.catch,e.onOpen()}Connection.prototype.__proto__=EventEmitter.prototype,Object.defineProperty(Connection.prototype,\"readyState\",{get:function(){return this._readyState},set:function(e){if(!(e in STATES))throw new Error(\"Invalid connection state: \"+e);if(this._readyState!==e){this._readyState=e;for(const t of this.otherDbs)t.readyState=e;STATES.connected===e&&(this._hasOpened=!0),this.emit(STATES[e])}}}),Connection.prototype.get=function(e){return this.config.hasOwnProperty(e)?this.config[e]:get(this.options,e)},Connection.prototype.set=function(e,t){return this.config.hasOwnProperty(e)?(this.config[e]=t,t):(this.options=this.options||{},this.options[e]=t,t)},Connection.prototype.collections,Connection.prototype.name,Connection.prototype.models,Connection.prototype.id,Object.defineProperty(Connection.prototype,\"plugins\",{configurable:!1,enumerable:!0,writable:!0}),Object.defineProperty(Connection.prototype,\"host\",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Connection.prototype,\"port\",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Connection.prototype,\"user\",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Connection.prototype,\"pass\",{configurable:!0,enumerable:!0,writable:!0}),Connection.prototype.db,Connection.prototype.client,Connection.prototype.config,Connection.prototype.createCollection=_wrapConnHelper(function(e,t,o){\"function\"==typeof t&&(o=t,t={}),this.db.createCollection(e,t,o)}),Connection.prototype.startSession=_wrapConnHelper(function(e,t){\"function\"==typeof e&&(t=e,e=null),t(null,this.client.startSession(e))}),Connection.prototype.transaction=function(e,t){return this.startSession().then(o=>(o[sessionNewDocuments]=new Map,o.withTransaction(()=>e(o),t).then(e=>(delete o[sessionNewDocuments],e)).catch(e=>{for(const e of o[sessionNewDocuments].keys()){const t=o[sessionNewDocuments].get(e);t.hasOwnProperty(\"isNew\")&&(e.isNew=t.isNew),t.hasOwnProperty(\"versionKey\")&&e.set(e.schema.options.versionKey,t.versionKey);for(const o of t.modifiedPaths)e.$__.activePaths.paths[o]=\"modify\",e.$__.activePaths.states.modify[o]=!0;for(const o of t.atomics.keys()){const n=e.$__getValue(o);null!=n&&(n[arrayAtomicsSymbol]=t.atomics.get(o))}}throw delete o[sessionNewDocuments],e})))},Connection.prototype.dropCollection=_wrapConnHelper(function(e,t){this.db.dropCollection(e,t)}),Connection.prototype.dropDatabase=_wrapConnHelper(function(e){for(const e of Object.keys(this.models))delete this.models[e].$init;this.db.dropDatabase(e)}),Connection.prototype._shouldBufferCommands=function(){return null!=this.config.bufferCommands?this.config.bufferCommands:null==this.base.get(\"bufferCommands\")||this.base.get(\"bufferCommands\")},Connection.prototype.error=function(e,t){return t?(t(e),null):(this.listeners(\"error\").length>0&&this.emit(\"error\",e),Promise.reject(e))},Connection.prototype.onOpen=function(){this.readyState=STATES.connected;for(const e of this._queue)e.fn.apply(e.ctx,e.args);this._queue=[];for(const e in this.collections)utils.object.hasOwnProperty(this.collections,e)&&this.collections[e].onOpen();this.emit(\"open\")},Connection.prototype.openUri=function(e,t,o){if(\"function\"==typeof t&&(o=t,t=null),-1!==[\"string\",\"number\"].indexOf(typeof t))throw new MongooseError(\"Mongoose 5.x no longer supports `mongoose.connect(host, dbname, port)` or `mongoose.createConnection(host, dbname, port)`. See http://mongoosejs.com/docs/connections.html for supported connection syntax\");if(\"string\"!=typeof e)throw new MongooseError(\"The `uri` parameter to `openUri()` must be a \"+`string, got \"${typeof e}\". Make sure the first parameter to `+\"`mongoose.connect()` or `mongoose.createConnection()` is a string.\");if(null!=o&&\"function\"!=typeof o)throw new MongooseError('3rd parameter to `mongoose.connect()` or `mongoose.createConnection()` must be a function, got \"'+typeof o+'\"');if(this.readyState===STATES.connecting||this.readyState===STATES.connected){if(this._connectionString!==e)throw new MongooseError(\"Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections\");return\"function\"==typeof o&&(this.$initialConnection=this.$initialConnection.then(()=>o(null,this),e=>o(e))),this}this._connectionString=e,this.readyState=STATES.connecting,this._closeCalled=!1;const n=PromiseProvider.get(),i=this;if(t){const e=(t=utils.clone(t)).config&&null!=t.config.autoIndex?t.config.autoIndex:t.autoIndex;null!=e&&(this.config.autoIndex=!1!==e,delete t.config,delete t.autoIndex),\"autoCreate\"in t&&(this.config.autoCreate=!!t.autoCreate,delete t.autoCreate),\"useCreateIndex\"in t&&(this.config.useCreateIndex=!!t.useCreateIndex,delete t.useCreateIndex),\"useFindAndModify\"in t&&(this.config.useFindAndModify=!!t.useFindAndModify,delete t.useFindAndModify),(t.user||t.pass)&&(t.auth=t.auth||{},t.auth.user=t.user,t.auth.password=t.pass,this.user=t.user,this.pass=t.pass),delete t.user,delete t.pass,null!=t.bufferCommands&&(null==t.bufferMaxEntries&&(t.bufferMaxEntries=0),this.config.bufferCommands=t.bufferCommands,delete t.bufferCommands),null!=t.useMongoClient&&handleUseMongoClient(t)}else t={};this._connectionOptions=t;const s=t.dbName;null!=s&&(this.$dbName=s),delete t.dbName,\"promiseLibrary\"in t||(t.promiseLibrary=PromiseProvider.get()),\"useNewUrlParser\"in t||(\"useNewUrlParser\"in this.base.options?t.useNewUrlParser=this.base.options.useNewUrlParser:t.useNewUrlParser=!1),utils.hasUserDefinedProperty(t,\"useUnifiedTopology\")||(utils.hasUserDefinedProperty(this.base.options,\"useUnifiedTopology\")?t.useUnifiedTopology=this.base.options.useUnifiedTopology:t.useUnifiedTopology=!1),utils.hasUserDefinedProperty(t,\"driverInfo\")||(t.driverInfo={name:\"Mongoose\",version:pkg.version});const r=new n((o,n)=>{parseConnectionString(e,t,(e,t)=>{if(e)return n(e);s?this.name=s:t.defaultDatabase?this.name=t.defaultDatabase:this.name=get(t,\"auth.db\",null),this.host=get(t,\"hosts.0.host\",\"localhost\"),this.port=get(t,\"hosts.0.port\",27017),this.user=this.user||get(t,\"auth.username\"),this.pass=this.pass||get(t,\"auth.password\"),o()})}),c=new n((o,n)=>{const r=new mongodb.MongoClient(e,t);i.client=r,r.connect(e=>{if(e)return n(e);_setClient(i,r,t,s),o(i)})}),l=new ServerSelectionError;return this.$initialConnection=n.all([c,r]).then(e=>e[0]).catch(e=>{throw this.readyState=STATES.disconnected,null!=e&&\"MongoServerSelectionError\"===e.name&&(e=l.assimilateError(e)),this.listeners(\"error\").length>0&&process.nextTick(()=>this.emit(\"error\",e)),e}),this.then=function(e,t){return this.$initialConnection.then(()=>{if(\"function\"==typeof e)return e(i)},t)},this.catch=function(e){return this.$initialConnection.catch(e)},null!=o&&(this.$initialConnection=this.$initialConnection.then(()=>o(null,this),e=>o(e))),this};const handleUseMongoClient=function(e){console.warn(\"WARNING: The `useMongoClient` option is no longer necessary in mongoose 5.x, please remove it.\");const t=(new Error).stack;console.warn(t.substr(t.indexOf(\"\\n\")+1)),delete e.useMongoClient};Connection.prototype.close=function(e,t){return\"function\"==typeof e&&(t=e,e=!1),this.$wasForceClosed=!!e,promiseOrCallback(t,t=>{this._close(e,t)})},Connection.prototype._close=function(e,t){const o=this,n=this._closeCalled;switch(this._closeCalled=!0,null!=this.client&&(this.client._closeCalled=!0),this.readyState){case STATES.disconnected:n?t():this.doClose(e,function(n){if(n)return t(n);o.onClose(e),t(null)});break;case STATES.connected:this.readyState=STATES.disconnecting,this.doClose(e,function(n){if(n)return t(n);o.onClose(e),t(null)});break;case STATES.connecting:this.once(\"open\",function(){o.close(t)});break;case STATES.disconnecting:this.once(\"close\",function(){t()})}return this},Connection.prototype.onClose=function(e){this.readyState=STATES.disconnected;for(const t in this.collections)utils.object.hasOwnProperty(this.collections,t)&&this.collections[t].onClose(e);this.emit(\"close\",e)},Connection.prototype.collection=function(e,t){const o={autoIndex:null!=this.config.autoIndex?this.config.autoIndex:this.base.options.autoIndex,autoCreate:null!=this.config.autoCreate?this.config.autoCreate:this.base.options.autoCreate};return(t=Object.assign({},o,t?utils.clone(t):{})).$wasForceClosed=this.$wasForceClosed,e in this.collections||(this.collections[e]=new Collection(e,this,t)),this.collections[e]},Connection.prototype.plugin=function(e,t){return this.plugins.push([e,t]),this},Connection.prototype.model=function(e,t,o,n){if(!(this instanceof Connection))throw new MongooseError(\"`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead\");let i;if(\"function\"==typeof e&&(e=(i=e).name),\"string\"==typeof t&&(o=t,t=!1),utils.isObject(t)&&!t.instanceOfSchema&&(t=new Schema(t)),t&&!t.instanceOfSchema)throw new Error(\"The 2nd parameter to `mongoose.model()` should be a schema or a POJO\");const s={cache:!1,overwriteModels:this.base.options.overwriteModels},r=Object.assign(s,n,{connection:this});if(this.models[e]&&!o&&!0!==r.overwriteModels){if(t&&t.instanceOfSchema&&t!==this.models[e].schema)throw new MongooseError.OverwriteModelError(e);return this.models[e]}let c;if(t&&t.instanceOfSchema)return applyPlugins(t,this.plugins,null,\"$connectionPluginsApplied\"),c=this.base.model(i||e,t,o,r),this.models[e]||(this.models[e]=c),c.init(function(){}),c;if(this.models[e]&&o){return t=(c=this.models[e]).prototype.schema,c.__subclass(this,t,o)}if(!(c=this.base.models[e]))throw new MongooseError.MissingSchemaError(e);return this!==c.prototype.db||o&&o!==c.collection.name?(this.models[e]=c.__subclass(this,t,o),this.models[e]):(this.models[e]||(this.models[e]=c),c)},Connection.prototype.deleteModel=function(e){if(\"string\"==typeof e){const t=this.model(e);if(null==t)return this;const o=t.collection.name;delete this.models[e],delete this.collections[o],delete this.base.modelSchemas[e],this.emit(\"deleteModel\",t)}else{if(!(e instanceof RegExp))throw new Error('First parameter to `deleteModel()` must be a string or regexp, got \"'+e+'\"');{const t=e,o=this.modelNames();for(const e of o)t.test(e)&&this.deleteModel(e)}}return this},Connection.prototype.watch=function(e,t){const o=new MongooseError(\"Connection \"+this.id+\" was disconnected when calling `watch()`\");return new ChangeStream(n=>{immediate(()=>{if(this.readyState===STATES.connecting)this.once(\"open\",function(){const o=this.db.watch(e,t);n(null,o)});else if(this.readyState===STATES.disconnected&&null==this.db)n(o);else{const o=this.db.watch(e,t);n(null,o)}})},e,t)},Connection.prototype.modelNames=function(){return Object.keys(this.models)},Connection.prototype.shouldAuthenticate=function(){return null!=this.user&&(null!=this.pass||this.authMechanismDoesNotRequirePassword())},Connection.prototype.authMechanismDoesNotRequirePassword=function(){return!this.options||!this.options.auth||noPasswordAuthMechanisms.indexOf(this.options.auth.authMechanism)>=0},Connection.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())},Connection.prototype.getClient=function(){return this.client},Connection.prototype.setClient=function(e){if(!(e instanceof mongodb.MongoClient))throw new MongooseError(\"Must call `setClient()` with an instance of MongoClient\");if(null!=this.client||this.readyState!==STATES.disconnected)throw new MongooseError(\"Cannot call `setClient()` on a connection that is already connected.\");if(!e.isConnected())throw new MongooseError(\"Cannot call `setClient()` with a MongoClient that is not connected.\");return this._connectionString=e.s.url,_setClient(this,e,{useUnifiedTopology:e.s.options.useUnifiedTopology},e.s.options.dbName),this},Connection.STATES=STATES,module.exports=Connection;","backend/node_modules/events/models/event.js":"\"use strict\";exports.name=\"Event\",exports.setUp=((e,t)=>{const i=new t.Schema({type:{type:String,trim:!0,required:!0},severity:{type:String,enum:[\"debug\",\"info\",\"success\",\"warning\",\"error\"],default:\"info\"},time:{type:Number,default:Date.now},user:{type:Object},data:{type:Object}},{id:!1});i.statics.TOPIC_PREFIX=\"events\",i.index({time:-1}),i.index({severity:1,time:-1}),i.index({type:1,time:-1}),i.index({\"user._id\":1,time:-1}),t.model(exports.name,i)});","backend/node_modules/events/routes.js":"\"use strict\";module.exports=((e,n)=>{const{express:t,user:s,Event:o}=n,g=s.auth(\"EVENTS:VIEW\");t.get(\"/events\",g,t.crud.browseRoute.bind(null,e,o)),t.get(\"/events/types\",g,function(e,t){t.send(Object.keys(n.types).sort())}),t.get(\"/events/pending\",g,function(e,t){t.send(n.getPendingEvents())}),t.post(\"/events/pending\",s.auth(\"SUPER\"),function(e,t){const s=n.getPendingEvents().length;n.insertEvents();const o=n.getPendingEvents().length;t.send({beforeCount:s,afterCount:o})})});","node_modules/csv/lib/index.js":"var generate,parse,stringify,transform;generate=require(\"csv-generate\"),parse=require(\"csv-parse\"),transform=require(\"stream-transform\"),stringify=require(\"csv-stringify\"),module.exports.generate=generate,module.exports.parse=parse,module.exports.transform=transform,module.exports.stringify=stringify;","node_modules/deep-equal/index.js":"\"use strict\";var objectKeys=require(\"object-keys\"),isArguments=require(\"is-arguments\"),is=require(\"object-is\"),isRegex=require(\"is-regex\"),flags=require(\"regexp.prototype.flags\"),isArray=require(\"isarray\"),isDate=require(\"is-date-object\"),whichBoxedPrimitive=require(\"which-boxed-primitive\"),GetIntrinsic=require(\"get-intrinsic\"),callBound=require(\"call-bind/callBound\"),whichCollection=require(\"which-collection\"),getIterator=require(\"es-get-iterator\"),getSideChannel=require(\"side-channel\"),whichTypedArray=require(\"which-typed-array\"),assign=require(\"object.assign\"),$getTime=callBound(\"Date.prototype.getTime\"),gPO=Object.getPrototypeOf,$objToString=callBound(\"Object.prototype.toString\"),$Set=GetIntrinsic(\"%Set%\",!0),$mapHas=callBound(\"Map.prototype.has\",!0),$mapGet=callBound(\"Map.prototype.get\",!0),$mapSize=callBound(\"Map.prototype.size\",!0),$setAdd=callBound(\"Set.prototype.add\",!0),$setDelete=callBound(\"Set.prototype.delete\",!0),$setHas=callBound(\"Set.prototype.has\",!0),$setSize=callBound(\"Set.prototype.size\",!0);function setHasEqualElement(e,t,r,i){for(var n,a=getIterator(e);(n=a.next())&&!n.done;)if(internalDeepEqual(t,n.value,r,i))return $setDelete(e,n.value),!0;return!1}function findLooseMatchingPrimitives(e){return void 0===e?null:\"object\"!=typeof e?\"symbol\"!=typeof e&&(\"string\"!=typeof e&&\"number\"!=typeof e||+e==+e):void 0}function mapMightHaveLoosePrim(e,t,r,i,n,a){var o=findLooseMatchingPrimitives(r);if(null!=o)return o;var u=$mapGet(t,o),s=assign({},n,{strict:!1});return!(void 0===u&&!$mapHas(t,o)||!internalDeepEqual(i,u,s,a))&&(!$mapHas(e,o)&&internalDeepEqual(i,u,s,a))}function setMightHaveLoosePrim(e,t,r){var i=findLooseMatchingPrimitives(r);return null!=i?i:$setHas(t,i)&&!$setHas(e,i)}function mapHasEqualEntry(e,t,r,i,n,a){for(var o,u,s=getIterator(e);(o=s.next())&&!o.done;)if(internalDeepEqual(r,u=o.value,n,a)&&internalDeepEqual(i,$mapGet(t,u),n,a))return $setDelete(e,u),!0;return!1}function internalDeepEqual(e,t,r,i){var n=r||{};if(n.strict?is(e,t):e===t)return!0;if(whichBoxedPrimitive(e)!==whichBoxedPrimitive(t))return!1;if(!e||!t||\"object\"!=typeof e&&\"object\"!=typeof t)return n.strict?is(e,t):e==t;var a,o=i.has(e),u=i.has(t);if(o&&u){if(i.get(e)===i.get(t))return!0}else a={};return o||i.set(e,a),u||i.set(t,a),objEquiv(e,t,n,i)}function isBuffer(e){return!(!e||\"object\"!=typeof e||\"number\"!=typeof e.length)&&(\"function\"==typeof e.copy&&\"function\"==typeof e.slice&&(!(e.length>0&&\"number\"!=typeof e[0])&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))))}function setEquiv(e,t,r,i){if($setSize(e)!==$setSize(t))return!1;for(var n,a,o,u=getIterator(e),s=getIterator(t);(n=u.next())&&!n.done;)if(n.value&&\"object\"==typeof n.value)o||(o=new $Set),$setAdd(o,n.value);else if(!$setHas(t,n.value)){if(r.strict)return!1;if(!setMightHaveLoosePrim(e,t,n.value))return!1;o||(o=new $Set),$setAdd(o,n.value)}if(o){for(;(a=s.next())&&!a.done;)if(a.value&&\"object\"==typeof a.value){if(!setHasEqualElement(o,a.value,r.strict,i))return!1}else if(!r.strict&&!$setHas(e,a.value)&&!setHasEqualElement(o,a.value,r.strict,i))return!1;return 0===$setSize(o)}return!0}function mapEquiv(e,t,r,i){if($mapSize(e)!==$mapSize(t))return!1;for(var n,a,o,u,s,l,f=getIterator(e),c=getIterator(t);(n=f.next())&&!n.done;)if(u=n.value[0],s=n.value[1],u&&\"object\"==typeof u)o||(o=new $Set),$setAdd(o,u);else if(void 0===(l=$mapGet(t,u))&&!$mapHas(t,u)||!internalDeepEqual(s,l,r,i)){if(r.strict)return!1;if(!mapMightHaveLoosePrim(e,t,u,s,r,i))return!1;o||(o=new $Set),$setAdd(o,u)}if(o){for(;(a=c.next())&&!a.done;)if(u=a.value[0],l=a.value[1],u&&\"object\"==typeof u){if(!mapHasEqualEntry(o,e,u,l,r,i))return!1}else if(!(r.strict||e.has(u)&&internalDeepEqual($mapGet(e,u),l,r,i)||mapHasEqualEntry(o,e,u,l,assign({},r,{strict:!1}),i)))return!1;return 0===$setSize(o)}return!0}function objEquiv(e,t,r,i){var n,a;if(typeof e!=typeof t)return!1;if(null==e||null==t)return!1;if($objToString(e)!==$objToString(t))return!1;if(isArguments(e)!==isArguments(t))return!1;if(isArray(e)!==isArray(t))return!1;var o=e instanceof Error,u=t instanceof Error;if(o!==u)return!1;if((o||u)&&(e.name!==t.name||e.message!==t.message))return!1;var s=isRegex(e),l=isRegex(t);if(s!==l)return!1;if((s||l)&&(e.source!==t.source||flags(e)!==flags(t)))return!1;var f=isDate(e),c=isDate(t);if(f!==c)return!1;if((f||c)&&$getTime(e)!==$getTime(t))return!1;if(r.strict&&gPO&&gPO(e)!==gPO(t))return!1;if(whichTypedArray(e)!==whichTypedArray(t))return!1;var p=isBuffer(e),g=isBuffer(t);if(p!==g)return!1;if(p||g){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;var v=objectKeys(e),d=objectKeys(t);if(v.length!==d.length)return!1;for(v.sort(),d.sort(),n=v.length-1;n>=0;n--)if(v[n]!=d[n])return!1;for(n=v.length-1;n>=0;n--)if(!internalDeepEqual(e[a=v[n]],t[a],r,i))return!1;var y=whichCollection(e),m=whichCollection(t);return y===m&&(\"Set\"===y||\"Set\"===m?setEquiv(e,t,r,i):\"Map\"!==y||mapEquiv(e,t,r,i))}module.exports=function(e,t,r){return internalDeepEqual(e,t,r,getSideChannel())};","node_modules/h5.modbus/lib/index.js":"\"use strict\";exports.Master=require(\"./Master\"),exports.Slave=require(\"./Slave\"),exports.ExceptionCode=require(\"./ExceptionCode\"),exports.FunctionCode=require(\"./FunctionCode\"),exports.helpers=require(\"./helpers\"),exports.ApplicationDataUnit=require(\"./ApplicationDataUnit\"),exports.RemoteClient=require(\"./RemoteClient\"),exports.Transaction=require(\"./Transaction\"),exports.InvalidFrameError=require(\"./InvalidFrameError\"),exports.ResponseTimeoutError=require(\"./ResponseTimeoutError\"),exports.Transport=require(\"./Transport\"),exports.IpTransport=require(\"./transports/IpTransport\"),exports.AsciiTransport=require(\"./transports/AsciiTransport\"),exports.RtuTransport=require(\"./transports/RtuTransport\"),exports.Connection=require(\"./Connection\"),exports.TcpConnection=require(\"./connections/TcpConnection\"),exports.UdpConnection=require(\"./connections/UdpConnection\"),exports.SerialConnection=require(\"./connections/SerialConnection\"),exports.WebSocketConnection=require(\"./connections/WebSocketConnection\"),exports.Listener=require(\"./Listener\"),exports.TcpListener=require(\"./listeners/TcpListener\"),exports.UdpListener=require(\"./listeners/UdpListener\"),exports.SerialListener=require(\"./listeners/SerialListener\"),exports.WebSocketListener=require(\"./listeners/WebSocketListener\");const messages=require(\"./messages\");function createByType(e,s,t,r,o){if(r&&\"function\"==typeof r.destroy)return r;r&&\"object\"==typeof r?r=(o=r).type:o||(o={}),r||(r=s);const n=t[r.toLowerCase()];if(\"function\"!=typeof n)throw new Error(`Unknown ${e} type: ${r}.`);return\"function\"==typeof n.fromOptions?n.fromOptions(o):new n(o)}exports.Message=require(\"./Message\"),exports.Request=require(\"./Request\"),exports.Response=require(\"./Response\"),exports.requests=messages.requests,exports.responses=messages.responses,exports.ReadDiscreteInputsRequest=messages.ReadDiscreteInputsRequest,exports.ReadDiscreteInputsResponse=messages.ReadDiscreteInputsResponse,exports.ReadCoilsRequest=messages.ReadCoilsRequest,exports.ReadCoilsResponse=messages.ReadCoilsResponse,exports.WriteSingleCoilRequest=messages.WriteSingleCoilRequest,exports.WriteSingleCoilResponse=messages.WriteSingleCoilResponse,exports.WriteMultipleCoilsRequest=messages.WriteMultipleCoilsRequest,exports.WriteMultipleCoilsResponse=messages.WriteMultipleCoilsResponse,exports.ReadInputRegistersRequest=messages.ReadInputRegistersRequest,exports.ReadInputRegistersResponse=messages.ReadInputRegistersResponse,exports.ReadHoldingRegistersRequest=messages.ReadHoldingRegistersRequest,exports.ReadHoldingRegistersResponse=messages.ReadHoldingRegistersResponse,exports.WriteSingleRegisterRequest=messages.WriteSingleRegisterRequest,exports.WriteSingleRegisterResponse=messages.WriteSingleRegisterResponse,exports.WriteMultipleRegistersRequest=messages.WriteMultipleRegistersRequest,exports.WriteMultipleRegistersResponse=messages.WriteMultipleRegistersResponse,exports.ReadWriteMultipleRegistersRequest=messages.ReadWriteMultipleRegistersRequest,exports.ReadWriteMultipleRegistersResponse=messages.ReadWriteMultipleRegistersResponse,exports.ExceptionResponse=messages.ExceptionResponse,exports.createMaster=function(e){return e||(e={}),e.transport=exports.createTransport(e.transport),e.connection=exports.createConnection(e.connection),new exports.Master(e)},exports.createSlave=function(e){return e||(e={}),e.transport=exports.createTransport(e.transport),e.listener=exports.createListener(e.listener),new exports.Slave(e)},exports.connections={tcp:exports.TcpConnection,udp:exports.UdpConnection,serial:exports.SerialConnection,ws:exports.WebSocketConnection},exports.createConnection=function(e,s){return createByType(\"connection\",\"tcp\",exports.connections,e,s)},exports.listeners={tcp:exports.TcpListener,udp:exports.UdpListener,serial:exports.SerialListener,ws:exports.WebSocketListener},exports.createListener=function(e,s){return createByType(\"listener\",\"tcp\",exports.listeners,e,s)},exports.transports={ip:exports.IpTransport,ascii:exports.AsciiTransport,rtu:exports.RtuTransport},exports.createTransport=function(e,s){return createByType(\"transport\",\"ip\",exports.transports,e,s)};","backend/node_modules/modbus/Tag.js":"\"use strict\";const _=require(\"lodash\"),deepEqual=require(\"deep-equal\"),deltaUtils=require(\"./deltaUtils\"),scaleFunctions=require(\"./scaleFunctions\");function Tag(t,e,i,s){this.broker=t,this.modbus=e,this.broadcastable=!_.includes(e.config.broadcastFilter,i.split(\".\")[0]),this.bits=null,this.bitMask=null,this.master=s.master,this.address=s.address,this.deltaAddress=null,this.name=i,this.description=s.description,this.kind=\"string\"==typeof s.kind?s.kind:\"virtual\",\"number\"==typeof s.code?this.code=s.code:(this.code=deltaUtils.getFunctionCode(s.kind),-1===this.code&&(this.code=3)),\"virtual\"===this.kind?this.setUpVirtualization():\"string\"==typeof this.address&&(this.deltaAddress=this.address,this.code=deltaUtils.getFunctionCode(this.deltaAddress),this.address=deltaUtils.getStartingAddress(this.deltaAddress)),this.type=\"string\"==typeof s.type?s.type:3===this.code?\"uint16\":\"bool\",this.unit=\"number\"==typeof s.unit?s.unit:-1,this.readable=!!s.readable,this.writable=!!s.writable,this.rawMin=numberOrNull(s.rawMin),this.rawMax=numberOrNull(s.rawMax),this.scaleUnit=\"string\"==typeof s.scaleUnit?s.scaleUnit:null,this.scaleFunction=\"string\"==typeof s.scaleFunction?s.scaleFunction:null,this.scaleMin=numberOrNull(s.scaleMin),this.scaleMax=numberOrNull(s.scaleMax),this.scale=scaleFunctions.create(this),this.archive=\"string\"==typeof s.archive?s.archive:null,this.lastChangeTime=0,this.oldValue=null}function createBitMask(t,e){let i=0;for(var s=t;s<=e;++s)i+=1<<s;return i}function numberOrNull(t){return t=parseFloat(t),isNaN(t)?null:t}Tag.prototype.toJSON=function(){return{name:this.name,description:this.description,master:this.master,unit:this.unit,kind:this.kind,type:this.type,address:this.deltaAddress?this.deltaAddress:this.address,readable:this.isReadable(),writable:this.isWritable(),rawMin:this.rawMin,rawMax:this.rawMax,scaleUnit:this.scaleUnit,scaleFunction:this.scaleFunction,scaleMin:this.scaleMin,scaleMax:this.scaleMax,archive:this.archive,lastChangeTime:this.lastChangeTime,value:this.getValue()}},Tag.prototype.isConnected=function(){const t=this.modbus.masters[this.master];return!!t&&t.isConnected()},Tag.prototype.isReadable=function(){return this.readable&&null!==this.address},Tag.prototype.isWritable=function(){return this.writable&&(null!==this.address||\"setting\"===this.kind||\"memory\"===this.kind)},Tag.prototype.getValue=function(){return this.modbus.values[this.name]},Tag.prototype.setValue=function(t,e){t=this.rawValueToValue(t);const i=this.modbus.values[this.name];return!deepEqual(t,i)&&(this.lastChangeTime=e||Date.now(),this.oldValue=i,this.modbus.values[this.name]=t,this.broker.publish(`tagValueChanged.${this.name}`,{tag:this,time:this.lastChangeTime,oldValue:this.oldValue,newValue:t}),!0)},Tag.prototype.writeValue=function(t,e){if(!this.isWritable())return e(new Error(\"TAG_WRITE_NOT_WRITABLE\"));const i=this.checkBeforeWrite(t);if(-1===i)return e(new Error(\"TAG_WRITE_ILLEGAL\"));if(i>0)return setTimeout(this.writeValue.bind(this,t,e),i);switch(this.kind){case\"output\":return this.writeOutputValue(t,e);case\"register\":return this.writeRegisterValue(t,e);case\"virtual\":return this.writeVirtualValue(t,e);case\"setting\":return this.writeSettingValue(t,e);case\"memory\":return this.writeMemoryValue(t,e);default:return e(new Error(\"TAG_WRITE_UNSUPPORTED\"))}},Tag.prototype.checkBeforeWrite=function(t){const e={tag:this,allowWrite:!0,writeDelay:0,newValue:t};return this.broker.publish(`beforeWriteTagValue.${this.name}`,e),e.allowWrite?e.writeDelay:-1},Tag.prototype.writeOutputValue=function(t,e){const i=this.modbus.masters[this.master].writeSingleCoil(this.address,!!t,{unit:this.unit});i.once(\"complete\",(s,a)=>this.handleWriteResponse(i,s,a,!!t,e))},Tag.prototype.writeRegisterValue=function(t,e){const i=this.modbus.masters[this.master];let s;try{s=this.createValueBuffer(this.valueToRawValue(t))}catch(t){return void e(t)}const a=i[2===s.length?\"writeSingleRegister\":\"writeMultipleRegisters\"](this.address,s,{unit:this.unit});a.once(\"complete\",(i,s)=>this.handleWriteResponse(a,i,s,t,e))},Tag.prototype.writeVirtualValue=function(t,e){if(null===this.bitMask)return void e(new Error(\"TAG_WRITE_NO_BIT_MASK\"));if(\"string\"!=typeof this.address)return void e(new Error(\"TAG_WRITE_NO_REFERENCE_TAG\"));const i=this.modbus.tags[this.address.split(\"&\")[0]];if(!i)return void e(new Error(\"TAG_WRITE_UNKNOWN_REFERENCE_TAG\"));const s=this.valueToRawValue(t)<<this.bits[0],a=i.getValue()&~this.bitMask|s;i.writeValue(a,e)},Tag.prototype.writeSettingValue=function(t,e){const i={_id:this.name},s={$set:{value:this.valueToRawValue(t),time:Date.now()}};this.modbus.config.settingsCollection().updateOne(i,s,{upsert:!0,writeConcern:{w:\"majority\"}},t=>{e(t),t||this.setValue(s.$set.value)})},Tag.prototype.writeMemoryValue=function(t,e){this.setValue(this.valueToRawValue(t)),setImmediate(e)},Tag.prototype.handleWriteResponse=function(t,e,i,s,a){e?a(e):i.isException()?a(new Error(i.toString())):(a(),this.isReadable()||this.setValue(s))},Tag.prototype.createValueBuffer=function(t){let e;switch(this.type){case\"double\":(e=new Buffer(8)).writeDoubleBE(t,0);break;case\"float\":(e=new Buffer(4)).writeFloatBE(t,0);break;case\"uint32\":(e=new Buffer(4)).writeUInt32BE(Math.round(t),0);break;case\"int32\":(e=new Buffer(4)).writeInt32BE(Math.round(t),0);break;case\"uint16\":case\"uint8\":(e=new Buffer(2)).writeUInt16BE(Math.round(t),0);break;case\"int16\":case\"int8\":(e=new Buffer(2)).writeInt16BE(Math.round(t),0);break;default:(e=new Buffer(2)).writeInt16BE(t?1:0,0)}return e},Tag.prototype.rawValueToValue=function(t){if(null===t)return null;if(null!==this.rawMin&&t<this.rawMin)return null;if(null!==this.rawMax&&t>this.rawMax)return null;var e=this.scale.rawValueToValue(t);return\"bool\"===this.type?!!e:e},Tag.prototype.valueToRawValue=function(t){switch(void 0===t&&(t=null),this.type){case\"double\":case\"float\":t=parseFloat(t);break;case\"bool\":t=!!t;break;case\"string\":case\"text\":t=String(t);break;case\"object\":try{\"string\"==typeof t?t=JSON.parse(t):_.isPlainObject(t)||Array.isArray(t)||(t=null)}catch(e){t=null}break;default:t=parseFloat(t)}const e=this.scale.valueToRawValue(t);return null!==this.rawMin&&e<this.rawMin?this.rawMin:null!==this.rawMax&&e>this.rawMax?this.rawMax:e},Tag.prototype.setUpVirtualization=function(){if(\"string\"!=typeof this.address||-1===this.address.indexOf(\".\"))return;const t=this.address.split(\"&\"),e=t[0];if(void 0===this.modbus.tags[e])throw new Error(`Invalid address for [${this.name}]. Reference tag [${e}] does not exist.`);const i=t[1].split(\"-\").map(t=>+t).filter(t=>!isNaN(t));if(i.length>1&&i[0]>=i[1])throw new Error(`Invalid address for [${this.name}]. Start bit should be lower than the end bit.`);this.bits=1===i.length?[i[0],i[0]]:i,this.bitMask=createBitMask(this.bits[0],this.bits[1]);const s=`tagValueChanged.${e}`;this.broker.subscribe(s,t=>{null===t.newValue?this.setValue(null):\"number\"==typeof t.newValue&&this.setValue((t.newValue&this.bitMask)>>this.bits[0])})},module.exports=Tag;","backend/node_modules/modbus/virtuals.js":"\"use strict\";const _=require(\"lodash\");module.exports=function(s,t){!function(){const e=t.tags[\"masters.controlProcess\"];if(_.isUndefined(e))return t.warn(\"masters.controlProcess tag is not defined!\");const n=[];_.forEach(t.config.controlMasters,function(s){const e=t.masters[s];_.isObject(e)&&n.push(`masters.${s}`)});const o=function(s,e){let n=!0;for(let e=0,o=s.length;e<o;++e)if(!t.values[s[e]]){n=!1;break}e.setValue(n)}.bind(null,n,e);n.forEach(t=>{s.broker.subscribe(`tagValueChanged.${t}`,o)})}()};","backend/node_modules/modbus/safeGuards.js":"\"use strict\";module.exports=function(t,e){};","node_modules/csv-generate/lib/index.js":"var Generator,stream,util,indexOf=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};stream=require(\"stream\"),util=require(\"util\"),module.exports=function(){var t,e,n,o;return 2===arguments.length?(o=arguments[0],t=arguments[1]):1===arguments.length?\"function\"==typeof arguments[0]?(o={},t=arguments[0]):o=arguments[0]:0===arguments.length&&(o={}),n=new Generator(o),t&&(e=[],n.on(\"readable\",function(){var t,i;for(i=[];t=n.read();)i.push(e.push(o.objectMode?t:t.toString()));return i}),n.on(\"error\",t),n.on(\"end\",function(){return t(null,o.objectMode?e:e.join(\"\"))})),n},Generator=function(t){var e,n,o,i,r,s,h,u,l,a,f,p,d;for(this.options=null!=t?t:{},stream.Readable.call(this,this.options),null==(n=this.options).columns&&(n.columns=8),null==(o=this.options).max_word_length&&(o.max_word_length=16),null==(i=this.options).fixed_size&&(i.fixed_size=!1),null==(r=this.options).end&&(r.end=null),null==(s=this.options).seed&&(s.seed=!1),null==(h=this.options).length&&(h.length=-1),null==(u=this.options).delimiter&&(u.delimiter=\",\"),this._={fixed_size_buffer:\"\",count_written:0,count_created:0},\"number\"==typeof this.options.columns&&(this.options.columns=new Array(this.options.columns)),e=Object.keys(Generator).filter(function(t){return\"super_\"!==t}),l=a=0,f=(p=this.options.columns).length;a<f;l=++a)if(null==(d=p[l])&&(d=\"ascii\"),\"string\"==typeof d){if(indexOf.call(e,d)<0)throw Error('Invalid column type: got \"'+d+'\", default values are '+JSON.stringify(e));this.options.columns[l]=Generator[d]}return this},util.inherits(Generator,stream.Readable),module.exports.Generator=Generator,Generator.prototype.random=function(){return this.options.seed?this.options.seed=this.options.seed*Math.PI*100%100/100:Math.random()},Generator.prototype.end=function(){return this.push(null)},Generator.prototype._read=function(t){var e,n,o,i,r,s,h,u,l,a,f,p,d,c;for(e=[],(a=this._.fixed_size_buffer.length)&&e.push(this._.fixed_size_buffer);;){if(this._.count_created===this.options.length||this.options.end&&Date.now()>this.options.end){if(e.length)if(this.options.objectMode)for(o=0,s=e.length;o<s;o++)f=e[o],this._.count_written++,this.push(f);else this._.count_written++,this.push(e.join(\"\"));return this.push(null)}for(f=[],i=0,h=(c=this.options.columns).length;i<h;i++)n=c[i],f.push(\"\"+n(this));if(this.options.objectMode)for(p=0,r=0,u=f.length;r<u;r++)p+=f[r].length;else p=(f=(0===this._.count_created?\"\":\"\\n\")+f.join(this.options.delimiter)).length;if(this._.count_created++,a+p>t){if(this.options.objectMode)for(e.push(f),d=0,l=e.length;d<l;d++)f=e[d],this._.count_written++,this.push(f);else this.options.fixed_size?(this._.fixed_size_buffer=f.substr(t-a),e.push(f.substr(0,t-a))):e.push(f),this._.count_written++,this.push(e.join(\"\"));break}a+=p,e.push(f)}},Generator.ascii=function(t){var e,n,o,i;for(n=[],o=0,i=Math.ceil(t.random()*t.options.max_word_length);0<=i?o<i:o>i;0<=i?++o:--o)e=Math.floor(32*t.random()),n.push(String.fromCharCode(e+(e<16?65:81)));return n.join(\"\")},Generator.int=function(t){return Math.floor(t.random()*Math.pow(2,52))},Generator.bool=function(t){return Math.floor(2*t.random())};","node_modules/csv-parse/lib/index.js":"var Parser,StringDecoder,isObjLiteral,stream,util;stream=require(\"stream\"),util=require(\"util\"),StringDecoder=require(\"string_decoder\").StringDecoder,module.exports=function(){var t,i,n,s,e,o,r;if(3===arguments.length){if(s=arguments[0],o=arguments[1],\"function\"!=typeof(t=arguments[2]))throw Error(\"Invalid callback argument: \"+JSON.stringify(t));if(\"string\"!=typeof s&&!Buffer.isBuffer(arguments[0]))return t(Error(\"Invalid data argument: \"+JSON.stringify(s)))}else if(2===arguments.length){if(\"string\"==typeof arguments[0]||Buffer.isBuffer(arguments[0])?s=arguments[0]:isObjLiteral(arguments[0])?o=arguments[0]:e=\"Invalid first argument: \"+JSON.stringify(arguments[0]),\"function\"==typeof arguments[1]?t=arguments[1]:isObjLiteral(arguments[1])?o?e=\"Invalid arguments: got options twice as first and second arguments\":o=arguments[1]:e=\"Invalid first argument: \"+JSON.stringify(arguments[1]),e){if(t)return t(Error(e));throw Error(e)}}else 1===arguments.length&&(\"function\"==typeof arguments[0]?t=arguments[0]:o=arguments[0]);return null==o&&(o={}),r=new Parser(o),null!=s&&process.nextTick(function(){return r.write(s),r.end()}),t&&(i=!1,n=o.objname?{}:[],r.on(\"readable\",function(){var t,i;for(i=[];t=r.read();)o.objname?i.push(n[t[0]]=t[1]):i.push(n.push(t));return i}),r.on(\"error\",function(n){return i=!0,t(n)}),r.on(\"end\",function(){if(!i)return t(null,n)})),r},Parser=function(t){var i,n,s,e,o,r,l,h,u,_,a,p,m,f,c,d,g,w,y;for(w in null==t&&(t={}),this.options={},t)y=t[w],this.options[w]=y;return this.options.objectMode=!0,stream.Transform.call(this,this.options),null==(i=this.options).rowDelimiter&&(i.rowDelimiter=null),\"string\"==typeof this.options.rowDelimiter&&(this.options.rowDelimiter=[this.options.rowDelimiter]),null==(n=this.options).delimiter&&(n.delimiter=\",\"),void 0===this.options.quote||this.options.quote||(this.options.quote=\"\"),null==(_=this.options).quote&&(_.quote='\"'),null==(a=this.options).escape&&(a.escape='\"'),null==(p=this.options).columns&&(p.columns=null),null==(m=this.options).comment&&(m.comment=\"\"),null==(f=this.options).objname&&(f.objname=!1),null==(c=this.options).trim&&(c.trim=!1),null==(d=this.options).ltrim&&(d.ltrim=!1),null==(g=this.options).rtrim&&(g.rtrim=!1),null==(s=this.options).auto_parse&&(s.auto_parse=!1),null==(e=this.options).auto_parse_date&&(e.auto_parse_date=!1),!0===this.options.auto_parse_date&&(this.options.auto_parse_date=function(t){var i;return i=Date.parse(t),isNaN(i)||(t=new Date(i)),t}),null==(o=this.options).relax&&(o.relax=!1),null==(r=this.options).relax_column_count&&(r.relax_column_count=!1),null==(l=this.options).skip_empty_lines&&(l.skip_empty_lines=!1),null==(h=this.options).max_limit_on_data_read&&(h.max_limit_on_data_read=128e3),null==(u=this.options).skip_lines_with_empty_values&&(u.skip_lines_with_empty_values=!1),this.lines=0,this.count=0,this.skipped_line_count=0,this.empty_line_count=0,this.is_int=/^(\\-|\\+)?([1-9]+[0-9]*)$/,this.is_float=function(t){return t-parseFloat(t)+1>=0},this._={decoder:new StringDecoder,quoting:!1,commenting:!1,field:null,nextChar:null,closingQuote:0,line:[],chunks:[],rawBuf:\"\",buf:\"\",rowDelimiterLength:this.options.rowDelimiter?Math.max.apply(Math,this.options.rowDelimiter.map(function(t){return t.length})):void 0},this},util.inherits(Parser,stream.Transform),module.exports.Parser=Parser,Parser.prototype._transform=function(t,i,n){var s;return t instanceof Buffer&&(t=this._.decoder.write(t)),(s=this.__write(t,!1))?this.emit(\"error\",s):n()},Parser.prototype._flush=function(t){var i;return(i=this.__write(this._.decoder.end(),!0))?this.emit(\"error\",i):this._.quoting?void this.emit(\"error\",new Error(\"Quoted field not terminated at line \"+(this.lines+1))):this._.line.length>0&&(i=this.__push(this._.line))?t(i):t()},Parser.prototype.__push=function(t){var i,n,s,e,o,r,l,h,u;if(!this.options.skip_lines_with_empty_values||\"\"!==t.join(\"\").trim()){if(u=null,!0===this.options.columns)return this.options.columns=t,void\"\";if(\"function\"==typeof this.options.columns)return n=(h=function(t,i){try{return[null,t.call(null,i)]}catch(t){return[t]}}(this.options.columns,t))[0],i=h[1],n||(this.options.columns=i,void\"\");if(!this._.line_length&&t.length>0&&(this._.line_length=this.options.columns?this.options.columns.length:t.length),1===t.length&&\"\"===t[0])this.empty_line_count++;else if(t.length!==this._.line_length){if(!this.options.relax_column_count)return null!=this.options.columns?Error(\"Number of columns on line \"+this.lines+\" does not match header\"):Error(\"Number of columns is inconsistent on line \"+this.lines);this.count++,this.skipped_line_count++}else this.count++;if(null!=this.options.columns){for(l={},e=o=0,r=t.length;o<r;e=++o)s=t[e],!1!==this.options.columns[e]&&(l[this.options.columns[e]]=s);u=this.options.objname?[l[this.options.objname],l]:l}else u=t;if(!(this.count<this.options.from||this.count>this.options.to))return this.options.raw?(this.push({raw:this._.rawBuf,row:u}),this._.rawBuf=\"\"):this.push(u),null}},Parser.prototype.__write=function(t,i){var n,s,e,o,r,l,h,u,_,a,p,m,f,c,d,g,w,y,x,b,D,q,v,O,C,j,N,S,E;for(E=this,d=function(t){return\"function\"==typeof E.is_int?E.is_int(t):E.is_int.test(t)},c=function(t){return function(i){return\"function\"==typeof t.is_float?t.is_float(i):t.is_float.test(i)}}(this),e=function(t){return function(i){return t.options.auto_parse?\"function\"==typeof t.options.auto_parse?t.options.auto_parse(i):(d(i)?i=parseInt(i):c(i)?i=parseFloat(i):t.options.auto_parse_date&&(i=t.options.auto_parse_date(i)),i):i}}(this),w=this.options.trim||this.options.ltrim,N=this.options.trim||this.options.rtrim,t=this._.buf+t,g=t.length,h=0,0===this.lines&&65279===t.charCodeAt(0)&&h++;h<g&&(i||(C=t.substr(h,g-h),!(!this.options.rowDelimiter&&h+3>g||!this._.commenting&&g-h<this.options.comment.length&&this.options.comment.substr(0,g-h)===C||this.options.rowDelimiter&&g-h<this._.rowDelimiterLength&&this.options.rowDelimiter.some(function(t){return t.substr(0,g-h)===C})||this.options.rowDelimiter&&this._.quoting&&g-h<this.options.quote.length+this._.rowDelimiterLength&&this.options.rowDelimiter.some(function(t){return function(i){return(t.options.quote+i).substr(0,g-h)===C}}(this))||g-h<=this.options.delimiter.length&&this.options.delimiter.substr(0,g-h)===C||g-h<=this.options.escape.length&&this.options.escape.substr(0,g-h)===C)));)if(o=this._.nextChar?this._.nextChar:t.charAt(h),this._.nextChar=g>h+1?t.charAt(h+1):\"\",this.options.raw&&(this._.rawBuf+=o),null==this.options.rowDelimiter&&(y=h,j=null,this._.quoting||\"\\n\"!==o&&\"\\r\"!==o?!this._.quoting||o!==this.options.quote||\"\\n\"!==(x=this._.nextChar)&&\"\\r\"!==x||(j=this._.nextChar,y+=2,this.raw&&(rawBuf+=this._.nextChar)):(j=o,y+=1),j&&(\"\\r\"===j&&\"\\n\"===t.charAt(y)&&(j+=\"\\n\"),this.options.rowDelimiter=[j],this._.rowDelimiterLength=j.length)),this._.commenting||o!==this.options.escape||(l=this.options.escape===this.options.quote,_=this._.nextChar===this.options.escape,p=this._.nextChar===this.options.quote,l&&null==this._.field&&!this._.quoting||!_&&!p)){if(!this._.commenting&&o===this.options.quote)if(this._.quoting){if(s=this.options.rowDelimiter&&this.options.rowDelimiter.some(function(i){return t.substr(h+1,i.length)===i}),n=t.substr(h+1,this.options.delimiter.length)===this.options.delimiter,a=this._.nextChar===this.options.comment,!this._.nextChar||s||n||a){this._.quoting=!1,this._.closingQuote=this.options.quote.length,h++,i&&h===g&&(this._.line.push(e(this._.field||\"\")),this._.field=null);continue}if(!this.options.relax)return Error(\"Invalid closing quote at line \"+(this.lines+1)+\"; found \"+JSON.stringify(this._.nextChar)+\" instead of delimiter \"+JSON.stringify(this.options.delimiter));this._.quoting=!1,this._.field&&(this._.field=\"\"+this.options.quote+this._.field)}else{if(!this._.field){this._.quoting=!0,h++;continue}if(null!=this._.field&&!this.options.relax)return Error(\"Invalid opening quote at line \"+(this.lines+1))}if(((m=this.options.rowDelimiter&&this.options.rowDelimiter.some(function(i){return t.substr(h,i.length)===i}))||i&&h===g-1)&&this.lines++,S=!1,this._.commenting||this._.quoting||!this.options.comment||t.substr(h,this.options.comment.length)!==this.options.comment?this._.commenting&&m&&(S=!0,this._.commenting=!1):this._.commenting=!0,u=t.substr(h,this.options.delimiter.length)===this.options.delimiter,this._.commenting||this._.quoting||!u&&!m)this._.commenting||this._.quoting||\" \"!==o&&\"\\t\"!==o?this._.commenting?h++:(null==this._.field&&(this._.field=\"\"),this._.field+=o,h++):(null==this._.field&&(this._.field=\"\"),w&&!this._.field||(this._.field+=o),h++);else{if(m&&(f=this.options.rowDelimiter.filter(function(i){return t.substr(h,i.length)===i})[0].length),m&&0===this._.line.length&&null==this._.field&&(S||this.options.skip_empty_lines)){h+=f,this._.nextChar=t.charAt(h);continue}if(N&&(this._.closingQuote||(this._.field=null!=(b=this._.field)?b.trimRight():void 0)),this._.line.push(e(this._.field||\"\")),this._.closingQuote=0,this._.field=null,u&&(h+=this.options.delimiter.length,this._.nextChar=t.charAt(h),i&&!this._.nextChar&&(m=!0,this._.line.push(\"\"))),m){if(r=this.__push(this._.line))return r;this._.line=[],h+=f,this._.nextChar=t.charAt(h);continue}}if(!this._.commenting&&(null!=(D=this._.field)?D.length:void 0)>this.options.max_limit_on_data_read)return Error(\"Field exceeds max_limit_on_data_read setting (\"+this.options.max_limit_on_data_read+\") \"+JSON.stringify(this.options.delimiter));if(!this._.commenting&&(null!=(q=this._.line)?q.length:void 0)>this.options.max_limit_on_data_read)return Error(\"Row delimiter not found in the file \"+JSON.stringify(this.options.rowDelimiter))}else h++,o=this._.nextChar,this._.nextChar=t.charAt(h+1),null==this._.field&&(this._.field=\"\"),this._.field+=o,this.options.raw&&(this._.rawBuf+=o),h++;if(i){if(null!=this._.field&&(N&&(this._.closingQuote||(this._.field=null!=(v=this._.field)?v.trimRight():void 0)),this._.line.push(e(this._.field||\"\")),this._.field=null),(null!=(O=this._.field)?O.length:void 0)>this.options.max_limit_on_data_read)return Error(\"Delimiter not found in the file \"+JSON.stringify(this.options.delimiter));if(0===g&&this.lines++,this._.line.length>this.options.max_limit_on_data_read)return Error(\"Row delimiter not found in the file \"+JSON.stringify(this.options.rowDelimiter))}return this._.buf=t.substr(h),null},isObjLiteral=function(t){var i;return i=t,\"object\"==typeof t&&null!==t&&!Array.isArray(t)&&function(){for(;null!==Object.getPrototypeOf(i=Object.getPrototypeOf(i)););return Object.getPrototypeOf(t===i)}()};","node_modules/stream-transform/lib/index.js":"var Transformer,stream,util,slice=[].slice;stream=require(\"stream\"),util=require(\"util\"),module.exports=function(){var r,n,t,i,e,s,o,l,u,a,h,f,m,p;for(a={},s=o=0,u=arguments.length;o<u;s=++o)if(m=typeof(r=arguments[s]),null===r?m=\"null\":\"object\"===m&&Array.isArray(r)&&(m=\"array\"),0!==s){if(\"object\"===m)for(l in r)p=r[l],a[l]=p;else if(\"function\"===m)e&&s===arguments.length-1?n=r:e=r;else if(\"null\"!==m)throw new Error(\"Invalid arguments\")}else\"function\"===m?e=r:null!==m&&(t=r);return f=new Transformer(a,e),i=!1,t&&process.nextTick(function(){var r,n,e;for(n=0,r=t.length;n<r&&(e=t[n],!i);n++)f.write(e);return f.end()}),(n||a.consume)&&(h=[],f.on(\"readable\",function(){var r,t;for(t=[];r=f.read();)n?t.push(h.push(r)):t.push(void 0);return t}),f.on(\"error\",function(r){if(i=!0,n)return n(r)}),f.on(\"end\",function(){if(n&&!i)return n(null,h)})),f},Transformer=function(r,n){var t;return this.options=null!=r?r:{},this.transform=n,this.options.objectMode=!0,null==(t=this.options).parallel&&(t.parallel=100),stream.Transform.call(this,this.options),this.running=0,this.started=0,this.finished=0,this},util.inherits(Transformer,stream.Transform),module.exports.Transformer=Transformer,Transformer.prototype._transform=function(r,n,t){var i,e,s,o;this.started++,this.running++,this.running<this.options.parallel&&(t(),t=null);try{if(s=this.transform.length,null!=this.options.params&&s--,1===s)this._done(null,[this.transform.call(null,r,this.options.params)],t);else{if(2!==s)throw Error(\"Invalid handler arguments\");o=this,i=function(){var r,n;return n=arguments[0],r=2<=arguments.length?slice.call(arguments,1):[],o._done(n,r,t)},this.transform.call(null,r,i,this.options.params)}return!1}catch(r){return e=r,this._done(e)}},Transformer.prototype._flush=function(r){return this._ending=function(){if(0===this.running)return r()},this._ending()},Transformer.prototype._done=function(r,n,t){var i,e,s;if(this.running--,r)return this.emit(\"error\",r);for(this.finished++,e=0,s=n.length;e<s;e++)\"number\"==typeof(i=n[e])&&(i=\"\"+i),null!=i&&this.push(i);return t&&t(),this._ending?this._ending():void 0};","node_modules/csv-stringify/lib/index.js":"var Stringifier,get,stream,util;stream=require(\"stream\"),util=require(\"util\"),get=require(\"lodash.get\"),module.exports=function(){var t,i,e,o,r;return 3===arguments.length?(e=arguments[0],o=arguments[1],t=arguments[2]):2===arguments.length?(Array.isArray(arguments[0])?e=arguments[0]:o=arguments[0],\"function\"==typeof arguments[1]?t=arguments[1]:o=arguments[1]):1===arguments.length&&(\"function\"==typeof arguments[0]?t=arguments[0]:Array.isArray(arguments[0])?e=arguments[0]:o=arguments[0]),null==o&&(o={}),r=new Stringifier(o),e&&process.nextTick(function(){var t,i,o;for(i=0,o=e.length;i<o;i++)t=e[i],r.write(t);return r.end()}),t&&(i=[],r.on(\"readable\",function(){var t,e;for(e=[];t=r.read();)e.push(i.push(t));return e}),r.on(\"error\",function(i){return t(i)}),r.on(\"end\",function(){return t(null,i.join(\"\"))})),r},Stringifier=function(t){var i,e,o,r,n,s,u,l,p,h,f,a,c,m,y,d,g;for(y in null==t&&(t={}),d={},t)g=t[y],d[y]=g;switch(stream.Transform.call(this,d),this.options=d,null==(i=this.options).delimiter&&(i.delimiter=\",\"),null==(e=this.options).quote&&(e.quote='\"'),null==(u=this.options).quoted&&(u.quoted=!1),null==(l=this.options).quotedEmpty&&(l.quotedEmpty=void 0),null==(p=this.options).quotedString&&(p.quotedString=!1),null==(h=this.options).eof&&(h.eof=!0),null==(f=this.options).escape&&(f.escape='\"'),null==(a=this.options).columns&&(a.columns=null),null==(c=this.options).header&&(c.header=!1),null==(m=this.options).formatters&&(m.formatters={}),null==(o=this.options.formatters).date&&(o.date=function(t){return\"\"+t.getTime()}),null==(r=this.options.formatters).bool&&(r.bool=function(t){return t?\"1\":\"\"}),null==(n=this.options.formatters).object&&(n.object=function(t){return JSON.stringify(t)}),null==(s=this.options).rowDelimiter&&(s.rowDelimiter=\"\\n\"),null==this.countWriten&&(this.countWriten=0),this.options.rowDelimiter){case\"auto\":this.options.rowDelimiter=null;break;case\"unix\":this.options.rowDelimiter=\"\\n\";break;case\"mac\":this.options.rowDelimiter=\"\\r\";break;case\"windows\":this.options.rowDelimiter=\"\\r\\n\";break;case\"unicode\":this.options.rowDelimiter=\"\\u2028\"}return this},util.inherits(Stringifier,stream.Transform),module.exports.Stringifier=Stringifier,Stringifier.prototype.headers=function(){var t,i,e;if(this.options.header&&this.options.columns)return\"object\"==typeof(e=this.options.columns)&&(e=function(){var o;for(t in o=[],e)i=e[t],o.push(i);return o}()),e=this.options.eof?this.stringify(e)+this.options.rowDelimiter:this.stringify(e),stream.Transform.prototype.write.call(this,e)},Stringifier.prototype.end=function(t,i,e){return 0===this.countWriten&&this.headers(),stream.Transform.prototype.end.apply(this,arguments)},Stringifier.prototype.write=function(t,i,e){var o,r,n;if(null!=t){if(!(n=\"object\"!=typeof t)){0!==this.countWriten||Array.isArray(t)||null==(o=this.options).columns&&(o.columns=Object.keys(t));try{this.emit(\"record\",t,this.countWriten)}catch(t){return r=t,this.emit(\"error\",r)}this.options.eof?t=this.stringify(t)+this.options.rowDelimiter:(t=this.stringify(t),(this.options.header||this.countWriten)&&(t=this.options.rowDelimiter+t))}return\"number\"==typeof t&&(t=\"\"+t),0===this.countWriten&&this.headers(),n||this.countWriten++,stream.Transform.prototype.write.call(this,t,i,e)}},Stringifier.prototype._transform=function(t,i,e){return this.push(t),e()},Stringifier.prototype.stringify=function(t){var i,e,o,r,n,s,u,l,p,h,f,a,c,m,y,d,g,w,b,q;if(\"object\"!=typeof t)return t;if(\"object\"!=typeof(o=this.options.columns)||null===o||Array.isArray(o)||(o=Object.keys(o)),l=this.options.delimiter,y=this.options.quote,p=this.options.escape,Array.isArray(t))o&&t.splice(o.length);else{if(i=[],o)for(f=a=0,d=o.length;0<=d?a<d:a>d;f=0<=d?++a:--a)e=o[f],q=get(t,e),i[f]=void 0===q||null===q?\"\":q;else for(e in t)i.push(t[e]);t=i,i=null}if(Array.isArray(t)){for(m=\"\",f=c=0,g=t.length;0<=g?c<g:c>g;f=0<=g?++c:--c)\"string\"==typeof(h=t[f])||(\"number\"==typeof h?h=\"\"+h:\"boolean\"==typeof h?h=this.options.formatters.bool(h):h instanceof Date?h=this.options.formatters.date(h):\"object\"==typeof h&&null!==h&&(h=this.options.formatters.object(h))),h?(u=h.indexOf(l)>=0,s=h.indexOf(y)>=0,r=h.indexOf(p)>=0&&p!==y,n=h.indexOf(\"\\r\")>=0||h.indexOf(\"\\n\")>=0,(b=s||u||n||this.options.quoted||this.options.quotedString&&\"string\"==typeof t[f])&&r&&(w=\"\\\\\"===p?new RegExp(p+p,\"g\"):new RegExp(p,\"g\"),h=h.replace(w,p+p)),s&&(w=new RegExp(y,\"g\"),h=h.replace(w,p+y)),b&&(h=y+h+y),m+=h):(this.options.quotedEmpty||null==this.options.quotedEmpty&&\"\"===t[f]&&this.options.quotedString)&&(m+=y+y),f!==t.length-1&&(m+=l);t=m}return t};","node_modules/lodash.get/index.js":"var FUNC_ERROR_TEXT=\"Expected a function\",HASH_UNDEFINED=\"__lodash_hash_undefined__\",INFINITY=1/0,funcTag=\"[object Function]\",genTag=\"[object GeneratorFunction]\",symbolTag=\"[object Symbol]\",reIsDeepProp=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/,reLeadingDot=/^\\./,rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g,reEscapeChar=/\\\\(\\\\)?/g,reIsHostCtor=/^\\[object .+?Constructor\\]$/,freeGlobal=\"object\"==typeof global&&global&&global.Object===Object&&global,freeSelf=\"object\"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function(\"return this\")();function getValue(t,e){return null==t?void 0:t[e]}function isHostObject(t){var e=!1;if(null!=t&&\"function\"!=typeof t.toString)try{e=!!(t+\"\")}catch(t){}return e}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root[\"__core-js_shared__\"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||\"\");return t?\"Symbol(src)_1.\"+t:\"\"}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp(\"^\"+funcToString.call(hasOwnProperty).replace(reRegExpChar,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),Symbol=root.Symbol,splice=arrayProto.splice,Map=getNative(root,\"Map\"),nativeCreate=getNative(Object,\"create\"),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(t){return this.has(t)&&delete this.__data__[t]}function hashGet(t){var e=this.__data__;if(nativeCreate){var r=e[t];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(e,t)?e[t]:void 0}function hashHas(t){var e=this.__data__;return nativeCreate?void 0!==e[t]:hasOwnProperty.call(e,t)}function hashSet(t,e){return this.__data__[t]=nativeCreate&&void 0===e?HASH_UNDEFINED:e,this}function ListCache(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(t){var e=this.__data__,r=assocIndexOf(e,t);return!(r<0)&&(r==e.length-1?e.pop():splice.call(e,r,1),!0)}function listCacheGet(t){var e=this.__data__,r=assocIndexOf(e,t);return r<0?void 0:e[r][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var r=this.__data__,a=assocIndexOf(r,t);return a<0?r.push([t,e]):r[a][1]=e,this}function MapCache(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var a=t[e];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(t){return getMapData(this,t).delete(t)}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){return getMapData(this,t).set(t,e),this}function assocIndexOf(t,e){for(var r=t.length;r--;)if(eq(t[r][0],e))return r;return-1}function baseGet(t,e){for(var r=0,a=(e=isKey(e,t)?[e]:castPath(e)).length;null!=t&&r<a;)t=t[toKey(e[r++])];return r&&r==a?t:void 0}function baseIsNative(t){return!(!isObject(t)||isMasked(t))&&(isFunction(t)||isHostObject(t)?reIsNative:reIsHostCtor).test(toSource(t))}function baseToString(t){if(\"string\"==typeof t)return t;if(isSymbol(t))return symbolToString?symbolToString.call(t):\"\";var e=t+\"\";return\"0\"==e&&1/t==-INFINITY?\"-0\":e}function castPath(t){return isArray(t)?t:stringToPath(t)}function getMapData(t,e){var r=t.__data__;return isKeyable(e)?r[\"string\"==typeof e?\"string\":\"hash\"]:r.map}function getNative(t,e){var r=getValue(t,e);return baseIsNative(r)?r:void 0}function isKey(t,e){if(isArray(t))return!1;var r=typeof t;return!(\"number\"!=r&&\"symbol\"!=r&&\"boolean\"!=r&&null!=t&&!isSymbol(t))||(reIsPlainProp.test(t)||!reIsDeepProp.test(t)||null!=e&&t in Object(e))}function isKeyable(t){var e=typeof t;return\"string\"==e||\"number\"==e||\"symbol\"==e||\"boolean\"==e?\"__proto__\"!==t:null===t}function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var stringToPath=memoize(function(t){t=toString(t);var e=[];return reLeadingDot.test(t)&&e.push(\"\"),t.replace(rePropName,function(t,r,a,o){e.push(a?o.replace(reEscapeChar,\"$1\"):r||t)}),e});function toKey(t){if(\"string\"==typeof t||isSymbol(t))return t;var e=t+\"\";return\"0\"==e&&1/t==-INFINITY?\"-0\":e}function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+\"\"}catch(t){}}return\"\"}function memoize(t,e){if(\"function\"!=typeof t||e&&\"function\"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var a=arguments,o=e?e.apply(this,a):a[0],n=r.cache;if(n.has(o))return n.get(o);var i=t.apply(this,a);return r.cache=n.set(o,i),i};return r.cache=new(memoize.Cache||MapCache),r}function eq(t,e){return t===e||t!=t&&e!=e}memoize.Cache=MapCache;var isArray=Array.isArray;function isFunction(t){var e=isObject(t)?objectToString.call(t):\"\";return e==funcTag||e==genTag}function isObject(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}function isObjectLike(t){return!!t&&\"object\"==typeof t}function isSymbol(t){return\"symbol\"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}function toString(t){return null==t?\"\":baseToString(t)}function get(t,e,r){var a=null==t?void 0:baseGet(t,e);return void 0===a?r:a}module.exports=get;","node_modules/object-keys/index.js":"\"use strict\";var slice=Array.prototype.slice,isArgs=require(\"./isArguments\"),origKeys=Object.keys,keysShim=origKeys?function(e){return origKeys(e)}:require(\"./implementation\"),originalKeys=Object.keys;keysShim.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return isArgs(e)?originalKeys(slice.call(e)):originalKeys(e)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim;","node_modules/is-arguments/index.js":"\"use strict\";var hasToStringTag=require(\"has-tostringtag/shams\")(),callBound=require(\"call-bind/callBound\"),$toString=callBound(\"Object.prototype.toString\"),isStandardArguments=function(t){return!(hasToStringTag&&t&&\"object\"==typeof t&&Symbol.toStringTag in t)&&\"[object Arguments]\"===$toString(t)},isLegacyArguments=function(t){return!!isStandardArguments(t)||null!==t&&\"object\"==typeof t&&\"number\"==typeof t.length&&t.length>=0&&\"[object Array]\"!==$toString(t)&&\"[object Function]\"===$toString(t.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments;","node_modules/object-is/index.js":"\"use strict\";var define=require(\"define-properties\"),callBind=require(\"call-bind\"),implementation=require(\"./implementation\"),getPolyfill=require(\"./polyfill\"),shim=require(\"./shim\"),polyfill=callBind(getPolyfill(),Object);define(polyfill,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=polyfill;","node_modules/is-regex/index.js":"\"use strict\";var has,$exec,isRegexMarker,badStringifier,callBound=require(\"call-bind/callBound\"),hasToStringTag=require(\"has-tostringtag/shams\")();if(hasToStringTag){has=callBound(\"Object.prototype.hasOwnProperty\"),$exec=callBound(\"RegExp.prototype.exec\"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},\"symbol\"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString=callBound(\"Object.prototype.toString\"),gOPD=Object.getOwnPropertyDescriptor,regexClass=\"[object RegExp]\";module.exports=hasToStringTag?function(e){if(!e||\"object\"!=typeof e)return!1;var r=gOPD(e,\"lastIndex\");if(!(r&&has(r,\"value\")))return!1;try{$exec(e,badStringifier)}catch(e){return e===isRegexMarker}}:function(e){return!(!e||\"object\"!=typeof e&&\"function\"!=typeof e)&&$toString(e)===regexClass};","node_modules/regexp.prototype.flags/index.js":"\"use strict\";var define=require(\"define-properties\"),callBind=require(\"call-bind\"),implementation=require(\"./implementation\"),getPolyfill=require(\"./polyfill\"),shim=require(\"./shim\"),flagsBound=callBind(implementation);define(flagsBound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=flagsBound;","node_modules/isarray/index.js":"var toString={}.toString;module.exports=Array.isArray||function(r){return\"[object Array]\"==toString.call(r)};","node_modules/is-date-object/index.js":"\"use strict\";var getDay=Date.prototype.getDay,tryDateObject=function(t){try{return getDay.call(t),!0}catch(t){return!1}},toStr=Object.prototype.toString,dateClass=\"[object Date]\",hasToStringTag=require(\"has-tostringtag/shams\")();module.exports=function(t){return\"object\"==typeof t&&null!==t&&(hasToStringTag?tryDateObject(t):toStr.call(t)===dateClass)};","node_modules/which-boxed-primitive/index.js":"\"use strict\";var isString=require(\"is-string\"),isNumber=require(\"is-number-object\"),isBoolean=require(\"is-boolean-object\"),isSymbol=require(\"is-symbol\"),isBigInt=require(\"is-bigint\");module.exports=function(i){return null==i||\"object\"!=typeof i&&\"function\"!=typeof i?null:isString(i)?\"String\":isNumber(i)?\"Number\":isBoolean(i)?\"Boolean\":isSymbol(i)?\"Symbol\":isBigInt(i)?\"BigInt\":void 0};","node_modules/get-intrinsic/index.js":"\"use strict\";var undefined,$SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(r){try{return $Function('\"use strict\"; return ('+r+\").constructor;\")()}catch(r){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},\"\")}catch(r){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch(r){try{return $gOPD(arguments,\"callee\").get}catch(r){return throwTypeError}}}():throwTypeError,hasSymbols=require(\"has-symbols\")(),getProto=Object.getPrototypeOf||function(r){return r.__proto__},needsEval={},TypedArray=\"undefined\"==typeof Uint8Array?undefined:getProto(Uint8Array),INTRINSICS={\"%AggregateError%\":\"undefined\"==typeof AggregateError?undefined:AggregateError,\"%Array%\":Array,\"%ArrayBuffer%\":\"undefined\"==typeof ArrayBuffer?undefined:ArrayBuffer,\"%ArrayIteratorPrototype%\":hasSymbols?getProto([][Symbol.iterator]()):undefined,\"%AsyncFromSyncIteratorPrototype%\":undefined,\"%AsyncFunction%\":needsEval,\"%AsyncGenerator%\":needsEval,\"%AsyncGeneratorFunction%\":needsEval,\"%AsyncIteratorPrototype%\":needsEval,\"%Atomics%\":\"undefined\"==typeof Atomics?undefined:Atomics,\"%BigInt%\":\"undefined\"==typeof BigInt?undefined:BigInt,\"%Boolean%\":Boolean,\"%DataView%\":\"undefined\"==typeof DataView?undefined:DataView,\"%Date%\":Date,\"%decodeURI%\":decodeURI,\"%decodeURIComponent%\":decodeURIComponent,\"%encodeURI%\":encodeURI,\"%encodeURIComponent%\":encodeURIComponent,\"%Error%\":Error,\"%eval%\":eval,\"%EvalError%\":EvalError,\"%Float32Array%\":\"undefined\"==typeof Float32Array?undefined:Float32Array,\"%Float64Array%\":\"undefined\"==typeof Float64Array?undefined:Float64Array,\"%FinalizationRegistry%\":\"undefined\"==typeof FinalizationRegistry?undefined:FinalizationRegistry,\"%Function%\":$Function,\"%GeneratorFunction%\":needsEval,\"%Int8Array%\":\"undefined\"==typeof Int8Array?undefined:Int8Array,\"%Int16Array%\":\"undefined\"==typeof Int16Array?undefined:Int16Array,\"%Int32Array%\":\"undefined\"==typeof Int32Array?undefined:Int32Array,\"%isFinite%\":isFinite,\"%isNaN%\":isNaN,\"%IteratorPrototype%\":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,\"%JSON%\":\"object\"==typeof JSON?JSON:undefined,\"%Map%\":\"undefined\"==typeof Map?undefined:Map,\"%MapIteratorPrototype%\":\"undefined\"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):undefined,\"%Math%\":Math,\"%Number%\":Number,\"%Object%\":Object,\"%parseFloat%\":parseFloat,\"%parseInt%\":parseInt,\"%Promise%\":\"undefined\"==typeof Promise?undefined:Promise,\"%Proxy%\":\"undefined\"==typeof Proxy?undefined:Proxy,\"%RangeError%\":RangeError,\"%ReferenceError%\":ReferenceError,\"%Reflect%\":\"undefined\"==typeof Reflect?undefined:Reflect,\"%RegExp%\":RegExp,\"%Set%\":\"undefined\"==typeof Set?undefined:Set,\"%SetIteratorPrototype%\":\"undefined\"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):undefined,\"%SharedArrayBuffer%\":\"undefined\"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,\"%String%\":String,\"%StringIteratorPrototype%\":hasSymbols?getProto(\"\"[Symbol.iterator]()):undefined,\"%Symbol%\":hasSymbols?Symbol:undefined,\"%SyntaxError%\":$SyntaxError,\"%ThrowTypeError%\":ThrowTypeError,\"%TypedArray%\":TypedArray,\"%TypeError%\":$TypeError,\"%Uint8Array%\":\"undefined\"==typeof Uint8Array?undefined:Uint8Array,\"%Uint8ClampedArray%\":\"undefined\"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,\"%Uint16Array%\":\"undefined\"==typeof Uint16Array?undefined:Uint16Array,\"%Uint32Array%\":\"undefined\"==typeof Uint32Array?undefined:Uint32Array,\"%URIError%\":URIError,\"%WeakMap%\":\"undefined\"==typeof WeakMap?undefined:WeakMap,\"%WeakRef%\":\"undefined\"==typeof WeakRef?undefined:WeakRef,\"%WeakSet%\":\"undefined\"==typeof WeakSet?undefined:WeakSet},doEval=function r(e){var t;if(\"%AsyncFunction%\"===e)t=getEvalledConstructor(\"async function () {}\");else if(\"%GeneratorFunction%\"===e)t=getEvalledConstructor(\"function* () {}\");else if(\"%AsyncGeneratorFunction%\"===e)t=getEvalledConstructor(\"async function* () {}\");else if(\"%AsyncGenerator%\"===e){var o=r(\"%AsyncGeneratorFunction%\");o&&(t=o.prototype)}else if(\"%AsyncIteratorPrototype%\"===e){var n=r(\"%AsyncGenerator%\");n&&(t=getProto(n.prototype))}return INTRINSICS[e]=t,t},LEGACY_ALIASES={\"%ArrayBufferPrototype%\":[\"ArrayBuffer\",\"prototype\"],\"%ArrayPrototype%\":[\"Array\",\"prototype\"],\"%ArrayProto_entries%\":[\"Array\",\"prototype\",\"entries\"],\"%ArrayProto_forEach%\":[\"Array\",\"prototype\",\"forEach\"],\"%ArrayProto_keys%\":[\"Array\",\"prototype\",\"keys\"],\"%ArrayProto_values%\":[\"Array\",\"prototype\",\"values\"],\"%AsyncFunctionPrototype%\":[\"AsyncFunction\",\"prototype\"],\"%AsyncGenerator%\":[\"AsyncGeneratorFunction\",\"prototype\"],\"%AsyncGeneratorPrototype%\":[\"AsyncGeneratorFunction\",\"prototype\",\"prototype\"],\"%BooleanPrototype%\":[\"Boolean\",\"prototype\"],\"%DataViewPrototype%\":[\"DataView\",\"prototype\"],\"%DatePrototype%\":[\"Date\",\"prototype\"],\"%ErrorPrototype%\":[\"Error\",\"prototype\"],\"%EvalErrorPrototype%\":[\"EvalError\",\"prototype\"],\"%Float32ArrayPrototype%\":[\"Float32Array\",\"prototype\"],\"%Float64ArrayPrototype%\":[\"Float64Array\",\"prototype\"],\"%FunctionPrototype%\":[\"Function\",\"prototype\"],\"%Generator%\":[\"GeneratorFunction\",\"prototype\"],\"%GeneratorPrototype%\":[\"GeneratorFunction\",\"prototype\",\"prototype\"],\"%Int8ArrayPrototype%\":[\"Int8Array\",\"prototype\"],\"%Int16ArrayPrototype%\":[\"Int16Array\",\"prototype\"],\"%Int32ArrayPrototype%\":[\"Int32Array\",\"prototype\"],\"%JSONParse%\":[\"JSON\",\"parse\"],\"%JSONStringify%\":[\"JSON\",\"stringify\"],\"%MapPrototype%\":[\"Map\",\"prototype\"],\"%NumberPrototype%\":[\"Number\",\"prototype\"],\"%ObjectPrototype%\":[\"Object\",\"prototype\"],\"%ObjProto_toString%\":[\"Object\",\"prototype\",\"toString\"],\"%ObjProto_valueOf%\":[\"Object\",\"prototype\",\"valueOf\"],\"%PromisePrototype%\":[\"Promise\",\"prototype\"],\"%PromiseProto_then%\":[\"Promise\",\"prototype\",\"then\"],\"%Promise_all%\":[\"Promise\",\"all\"],\"%Promise_reject%\":[\"Promise\",\"reject\"],\"%Promise_resolve%\":[\"Promise\",\"resolve\"],\"%RangeErrorPrototype%\":[\"RangeError\",\"prototype\"],\"%ReferenceErrorPrototype%\":[\"ReferenceError\",\"prototype\"],\"%RegExpPrototype%\":[\"RegExp\",\"prototype\"],\"%SetPrototype%\":[\"Set\",\"prototype\"],\"%SharedArrayBufferPrototype%\":[\"SharedArrayBuffer\",\"prototype\"],\"%StringPrototype%\":[\"String\",\"prototype\"],\"%SymbolPrototype%\":[\"Symbol\",\"prototype\"],\"%SyntaxErrorPrototype%\":[\"SyntaxError\",\"prototype\"],\"%TypedArrayPrototype%\":[\"TypedArray\",\"prototype\"],\"%TypeErrorPrototype%\":[\"TypeError\",\"prototype\"],\"%Uint8ArrayPrototype%\":[\"Uint8Array\",\"prototype\"],\"%Uint8ClampedArrayPrototype%\":[\"Uint8ClampedArray\",\"prototype\"],\"%Uint16ArrayPrototype%\":[\"Uint16Array\",\"prototype\"],\"%Uint32ArrayPrototype%\":[\"Uint32Array\",\"prototype\"],\"%URIErrorPrototype%\":[\"URIError\",\"prototype\"],\"%WeakMapPrototype%\":[\"WeakMap\",\"prototype\"],\"%WeakSetPrototype%\":[\"WeakSet\",\"prototype\"]},bind=require(\"function-bind\"),hasOwn=require(\"has\"),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),rePropName=/[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g,reEscapeChar=/\\\\(\\\\)?/g,stringToPath=function(r){var e=$strSlice(r,0,1),t=$strSlice(r,-1);if(\"%\"===e&&\"%\"!==t)throw new $SyntaxError(\"invalid intrinsic syntax, expected closing `%`\");if(\"%\"===t&&\"%\"!==e)throw new $SyntaxError(\"invalid intrinsic syntax, expected opening `%`\");var o=[];return $replace(r,rePropName,function(r,e,t,n){o[o.length]=t?$replace(n,reEscapeChar,\"$1\"):e||r}),o},getBaseIntrinsic=function(r,e){var t,o=r;if(hasOwn(LEGACY_ALIASES,o)&&(o=\"%\"+(t=LEGACY_ALIASES[o])[0]+\"%\"),hasOwn(INTRINSICS,o)){var n=INTRINSICS[o];if(n===needsEval&&(n=doEval(o)),void 0===n&&!e)throw new $TypeError(\"intrinsic \"+r+\" exists, but is not available. Please file an issue!\");return{alias:t,name:o,value:n}}throw new $SyntaxError(\"intrinsic \"+r+\" does not exist!\")};module.exports=function(r,e){if(\"string\"!=typeof r||0===r.length)throw new $TypeError(\"intrinsic name must be a non-empty string\");if(arguments.length>1&&\"boolean\"!=typeof e)throw new $TypeError('\"allowMissing\" argument must be a boolean');var t=stringToPath(r),o=t.length>0?t[0]:\"\",n=getBaseIntrinsic(\"%\"+o+\"%\",e),a=n.name,y=n.value,i=!1,p=n.alias;p&&(o=p[0],$spliceApply(t,$concat([0,1],p)));for(var d=1,f=!0;d<t.length;d+=1){var s=t[d],u=$strSlice(s,0,1),c=$strSlice(s,-1);if(('\"'===u||\"'\"===u||\"`\"===u||'\"'===c||\"'\"===c||\"`\"===c)&&u!==c)throw new $SyntaxError(\"property names with quotes must have matching quotes\");if(\"constructor\"!==s&&f||(i=!0),hasOwn(INTRINSICS,a=\"%\"+(o+=\".\"+s)+\"%\"))y=INTRINSICS[a];else if(null!=y){if(!(s in y)){if(!e)throw new $TypeError(\"base intrinsic for \"+r+\" exists, but the property is not available.\");return}if($gOPD&&d+1>=t.length){var l=$gOPD(y,s);y=(f=!!l)&&\"get\"in l&&!(\"originalValue\"in l.get)?l.get:y[s]}else f=hasOwn(y,s),y=y[s];f&&!i&&(INTRINSICS[a]=y)}}return y};","node_modules/call-bind/callBound.js":"\"use strict\";var GetIntrinsic=require(\"get-intrinsic\"),callBind=require(\"./\"),$indexOf=callBind(GetIntrinsic(\"String.prototype.indexOf\"));module.exports=function(i,n){var t=GetIntrinsic(i,!!n);return\"function\"==typeof t&&$indexOf(i,\".prototype.\")>-1?callBind(t):t};","node_modules/which-collection/index.js":"\"use strict\";var isMap=require(\"is-map\"),isSet=require(\"is-set\"),isWeakMap=require(\"is-weakmap\"),isWeakSet=require(\"is-weakset\");module.exports=function(e){if(e&&\"object\"==typeof e){if(isMap(e))return\"Map\";if(isSet(e))return\"Set\";if(isWeakMap(e))return\"WeakMap\";if(isWeakSet(e))return\"WeakSet\"}return!1};","node_modules/es-get-iterator/node.js":"\"use strict\";var $iterator=Symbol.iterator;module.exports=function(r){if(null!=r&&void 0!==r[$iterator])return r[$iterator]()};","node_modules/side-channel/index.js":"\"use strict\";var GetIntrinsic=require(\"get-intrinsic\"),callBound=require(\"call-bind/callBound\"),inspect=require(\"object-inspect\"),$TypeError=GetIntrinsic(\"%TypeError%\"),$WeakMap=GetIntrinsic(\"%WeakMap%\",!0),$Map=GetIntrinsic(\"%Map%\",!0),$weakMapGet=callBound(\"WeakMap.prototype.get\",!0),$weakMapSet=callBound(\"WeakMap.prototype.set\",!0),$weakMapHas=callBound(\"WeakMap.prototype.has\",!0),$mapGet=callBound(\"Map.prototype.get\",!0),$mapSet=callBound(\"Map.prototype.set\",!0),$mapHas=callBound(\"Map.prototype.has\",!0),listGetNode=function(e,t){for(var n,a=e;null!==(n=a.next);a=n)if(n.key===t)return a.next=n.next,n.next=e.next,e.next=n,n},listGet=function(e,t){var n=listGetNode(e,t);return n&&n.value},listSet=function(e,t,n){var a=listGetNode(e,t);a?a.value=n:e.next={key:t,next:e.next,value:n}},listHas=function(e,t){return!!listGetNode(e,t)};module.exports=function(){var e,t,n,a={assert:function(e){if(!a.has(e))throw new $TypeError(\"Side channel does not contain \"+inspect(e))},get:function(a){if($WeakMap&&a&&(\"object\"==typeof a||\"function\"==typeof a)){if(e)return $weakMapGet(e,a)}else if($Map){if(t)return $mapGet(t,a)}else if(n)return listGet(n,a)},has:function(a){if($WeakMap&&a&&(\"object\"==typeof a||\"function\"==typeof a)){if(e)return $weakMapHas(e,a)}else if($Map){if(t)return $mapHas(t,a)}else if(n)return listHas(n,a);return!1},set:function(a,r){$WeakMap&&a&&(\"object\"==typeof a||\"function\"==typeof a)?(e||(e=new $WeakMap),$weakMapSet(e,a,r)):$Map?(t||(t=new $Map),$mapSet(t,a,r)):(n||(n={key:{},next:null}),listSet(n,a,r))}};return a};","node_modules/which-typed-array/index.js":"\"use strict\";var forEach=require(\"foreach\"),availableTypedArrays=require(\"available-typed-arrays\"),callBound=require(\"call-bind/callBound\"),$toString=callBound(\"Object.prototype.toString\"),hasToStringTag=require(\"has-tostringtag/shams\")(),g=\"undefined\"==typeof globalThis?global:globalThis,typedArrays=availableTypedArrays(),$slice=callBound(\"String.prototype.slice\"),toStrTags={},gOPD=require(\"es-abstract/helpers/getOwnPropertyDescriptor\"),getPrototypeOf=Object.getPrototypeOf;hasToStringTag&&gOPD&&getPrototypeOf&&forEach(typedArrays,function(r){if(\"function\"==typeof g[r]){var t=new g[r];if(Symbol.toStringTag in t){var a=getPrototypeOf(t),e=gOPD(a,Symbol.toStringTag);if(!e){var o=getPrototypeOf(a);e=gOPD(o,Symbol.toStringTag)}toStrTags[r]=e.get}}});var tryTypedArrays=function(r){var t=!1;return forEach(toStrTags,function(a,e){if(!t)try{var o=a.call(r);o===e&&(t=o)}catch(r){}}),t},isTypedArray=require(\"is-typed-array\");module.exports=function(r){return!!isTypedArray(r)&&(hasToStringTag&&Symbol.toStringTag in r?tryTypedArrays(r):$slice($toString(r),8,-1))};","node_modules/object.assign/index.js":"\"use strict\";var defineProperties=require(\"define-properties\"),callBind=require(\"call-bind\"),implementation=require(\"./implementation\"),getPolyfill=require(\"./polyfill\"),shim=require(\"./shim\"),polyfill=callBind.apply(getPolyfill()),bound=function(e,i){return polyfill(Object,arguments)};defineProperties(bound,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=bound;","node_modules/object-keys/isArguments.js":"\"use strict\";var toStr=Object.prototype.toString;module.exports=function(t){var e=toStr.call(t),o=\"[object Arguments]\"===e;return o||(o=\"[object Array]\"!==e&&null!==t&&\"object\"==typeof t&&\"number\"==typeof t.length&&t.length>=0&&\"[object Function]\"===toStr.call(t.callee)),o};","node_modules/has-tostringtag/shams.js":"\"use strict\";var hasSymbols=require(\"has-symbols/shams\");module.exports=function(){return hasSymbols()&&!!Symbol.toStringTag};","node_modules/has-symbols/shams.js":"\"use strict\";module.exports=function(){if(\"function\"!=typeof Symbol||\"function\"!=typeof Object.getOwnPropertySymbols)return!1;if(\"symbol\"==typeof Symbol.iterator)return!0;var t={},e=Symbol(\"test\"),r=Object(e);if(\"string\"==typeof e)return!1;if(\"[object Symbol]\"!==Object.prototype.toString.call(e))return!1;if(\"[object Symbol]\"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if(\"function\"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if(\"function\"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(\"function\"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0};","node_modules/call-bind/index.js":"\"use strict\";var bind=require(\"function-bind\"),GetIntrinsic=require(\"get-intrinsic\"),$apply=GetIntrinsic(\"%Function.prototype.apply%\"),$call=GetIntrinsic(\"%Function.prototype.call%\"),$reflectApply=GetIntrinsic(\"%Reflect.apply%\",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic(\"%Object.getOwnPropertyDescriptor%\",!0),$defineProperty=GetIntrinsic(\"%Object.defineProperty%\",!0),$max=GetIntrinsic(\"%Math.max%\");if($defineProperty)try{$defineProperty({},\"a\",{value:1})}catch(e){$defineProperty=null}module.exports=function(e){var t=$reflectApply(bind,$call,arguments);$gOPD&&$defineProperty&&($gOPD(t,\"length\").configurable&&$defineProperty(t,\"length\",{value:1+$max(0,e.length-(arguments.length-1))}));return t};var applyBind=function(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,\"apply\",{value:applyBind}):module.exports.apply=applyBind;","node_modules/has-symbols/index.js":"\"use strict\";var origSymbol=\"undefined\"!=typeof Symbol&&Symbol,hasSymbolSham=require(\"./shams\");module.exports=function(){return\"function\"==typeof origSymbol&&(\"function\"==typeof Symbol&&(\"symbol\"==typeof origSymbol(\"foo\")&&(\"symbol\"==typeof Symbol(\"bar\")&&hasSymbolSham())))};","node_modules/function-bind/index.js":"\"use strict\";var implementation=require(\"./implementation\");module.exports=Function.prototype.bind||implementation;","node_modules/has/src/index.js":"\"use strict\";var bind=require(\"function-bind\");module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty);","node_modules/function-bind/implementation.js":"\"use strict\";var ERROR_MESSAGE=\"Function.prototype.bind called on incompatible \",slice=Array.prototype.slice,toStr=Object.prototype.toString,funcType=\"[object Function]\";module.exports=function(t){var n=this;if(\"function\"!=typeof n||toStr.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var o,e=slice.call(arguments,1),r=Math.max(0,n.length-e.length),c=[],i=0;i<r;i++)c.push(\"$\"+i);if(o=Function(\"binder\",\"return function (\"+c.join(\",\")+\"){ return binder.apply(this,arguments); }\")(function(){if(this instanceof o){var r=n.apply(this,e.concat(slice.call(arguments)));return Object(r)===r?r:this}return n.apply(t,e.concat(slice.call(arguments)))}),n.prototype){var p=function(){};p.prototype=n.prototype,o.prototype=new p,p.prototype=null}return o};","node_modules/define-properties/index.js":"\"use strict\";var keys=require(\"object-keys\"),hasSymbols=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol(\"foo\"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction=function(e){return\"function\"==typeof e&&\"[object Function]\"===toStr.call(e)},arePropertyDescriptorsSupported=function(){var e={};try{for(var r in origDefineProperty(e,\"x\",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}},supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported(),defineProperty=function(e,r,t,o){(!(r in e)||isFunction(o)&&o())&&(supportsDescriptors?origDefineProperty(e,r,{configurable:!0,enumerable:!1,value:t,writable:!0}):e[r]=t)},defineProperties=function(e,r){var t=arguments.length>2?arguments[2]:{},o=keys(r);hasSymbols&&(o=concat.call(o,Object.getOwnPropertySymbols(r)));for(var n=0;n<o.length;n+=1)defineProperty(e,o[n],r[o[n]],t[o[n]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties;","node_modules/object-is/implementation.js":"\"use strict\";var numberIsNaN=function(r){return r!=r};module.exports=function(r,n){return 0===r&&0===n?1/r==1/n:r===n||!(!numberIsNaN(r)||!numberIsNaN(n))};","node_modules/object-is/polyfill.js":"\"use strict\";var implementation=require(\"./implementation\");module.exports=function(){return\"function\"==typeof Object.is?Object.is:implementation};","node_modules/object-is/shim.js":"\"use strict\";var getPolyfill=require(\"./polyfill\"),define=require(\"define-properties\");module.exports=function(){var e=getPolyfill();return define(Object,{is:e},{is:function(){return Object.is!==e}}),e};","node_modules/regexp.prototype.flags/implementation.js":"\"use strict\";var $Object=Object,$TypeError=TypeError;module.exports=function(){if(null!=this&&this!==$Object(this))throw new $TypeError(\"RegExp.prototype.flags getter called on non-object\");var t=\"\";return this.global&&(t+=\"g\"),this.ignoreCase&&(t+=\"i\"),this.multiline&&(t+=\"m\"),this.dotAll&&(t+=\"s\"),this.unicode&&(t+=\"u\"),this.sticky&&(t+=\"y\"),t};","node_modules/regexp.prototype.flags/polyfill.js":"\"use strict\";var implementation=require(\"./implementation\"),supportsDescriptors=require(\"define-properties\").supportsDescriptors,$gOPD=Object.getOwnPropertyDescriptor,$TypeError=TypeError;module.exports=function(){if(!supportsDescriptors)throw new $TypeError(\"RegExp.prototype.flags requires a true ES5 environment that supports property descriptors\");if(\"gim\"===/a/gim.flags){var r=$gOPD(RegExp.prototype,\"flags\");if(r&&\"function\"==typeof r.get&&\"boolean\"==typeof/a/.dotAll)return r.get}return implementation};","node_modules/regexp.prototype.flags/shim.js":"\"use strict\";var supportsDescriptors=require(\"define-properties\").supportsDescriptors,getPolyfill=require(\"./polyfill\"),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function(){if(!supportsDescriptors||!getProto)throw new TypeErr(\"RegExp.prototype.flags requires a true ES5 environment that supports property descriptors\");var e=getPolyfill(),r=getProto(regex),t=gOPD(r,\"flags\");return t&&t.get===e||defineProperty(r,\"flags\",{configurable:!0,enumerable:!1,get:e}),e};","node_modules/is-string/index.js":"\"use strict\";var strValue=String.prototype.valueOf,tryStringObject=function(t){try{return strValue.call(t),!0}catch(t){return!1}},toStr=Object.prototype.toString,strClass=\"[object String]\",hasToStringTag=require(\"has-tostringtag/shams\")();module.exports=function(t){return\"string\"==typeof t||\"object\"==typeof t&&(hasToStringTag?tryStringObject(t):toStr.call(t)===strClass)};","node_modules/is-number-object/index.js":"\"use strict\";var numToStr=Number.prototype.toString,tryNumberObject=function(t){try{return numToStr.call(t),!0}catch(t){return!1}},toStr=Object.prototype.toString,numClass=\"[object Number]\",hasToStringTag=require(\"has-tostringtag/shams\")();module.exports=function(t){return\"number\"==typeof t||\"object\"==typeof t&&(hasToStringTag?tryNumberObject(t):toStr.call(t)===numClass)};","node_modules/is-boolean-object/index.js":"\"use strict\";var callBound=require(\"call-bind/callBound\"),$boolToStr=callBound(\"Boolean.prototype.toString\"),$toString=callBound(\"Object.prototype.toString\"),tryBooleanObject=function(o){try{return $boolToStr(o),!0}catch(o){return!1}},boolClass=\"[object Boolean]\",hasToStringTag=require(\"has-tostringtag/shams\")();module.exports=function(o){return\"boolean\"==typeof o||null!==o&&\"object\"==typeof o&&(hasToStringTag&&Symbol.toStringTag in o?tryBooleanObject(o):$toString(o)===boolClass)};","node_modules/is-symbol/index.js":"\"use strict\";var toStr=Object.prototype.toString,hasSymbols=require(\"has-symbols\")();if(hasSymbols){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\\(.*\\)$/,isSymbolObject=function(t){return\"symbol\"==typeof t.valueOf()&&symStringRegex.test(symToStr.call(t))};module.exports=function(t){if(\"symbol\"==typeof t)return!0;if(\"[object Symbol]\"!==toStr.call(t))return!1;try{return isSymbolObject(t)}catch(t){return!1}}}else module.exports=function(t){return!1};","node_modules/is-bigint/index.js":"\"use strict\";var hasBigInts=require(\"has-bigints\")();if(hasBigInts){var bigIntValueOf=BigInt.prototype.valueOf,tryBigInt=function(t){try{return bigIntValueOf.call(t),!0}catch(t){}return!1};module.exports=function(t){return null!==t&&void 0!==t&&\"boolean\"!=typeof t&&\"string\"!=typeof t&&\"number\"!=typeof t&&\"symbol\"!=typeof t&&\"function\"!=typeof t&&(\"bigint\"==typeof t||tryBigInt(t))}}else module.exports=function(t){return!1};","node_modules/has-bigints/index.js":"\"use strict\";var $BigInt=global.BigInt;module.exports=function(){return\"function\"==typeof $BigInt&&\"function\"==typeof BigInt&&\"bigint\"==typeof $BigInt(42)&&\"bigint\"==typeof BigInt(42)};","node_modules/is-map/index.js":"\"use strict\";var exported,$Map=\"function\"==typeof Map&&Map.prototype?Map:null,$Set=\"function\"==typeof Set&&Set.prototype?Set:null;$Map||(exported=function(t){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$mapHas||(exported=function(t){return!1}),module.exports=exported||function(t){if(!t||\"object\"!=typeof t)return!1;try{if($mapHas.call(t),$setHas)try{$setHas.call(t)}catch(t){return!0}return t instanceof $Map}catch(t){}return!1};","node_modules/is-set/index.js":"\"use strict\";var exported,$Map=\"function\"==typeof Map&&Map.prototype?Map:null,$Set=\"function\"==typeof Set&&Set.prototype?Set:null;$Set||(exported=function(t){return!1});var $mapHas=$Map?Map.prototype.has:null,$setHas=$Set?Set.prototype.has:null;exported||$setHas||(exported=function(t){return!1}),module.exports=exported||function(t){if(!t||\"object\"!=typeof t)return!1;try{if($setHas.call(t),$mapHas)try{$mapHas.call(t)}catch(t){return!0}return t instanceof $Set}catch(t){}return!1};","node_modules/is-weakmap/index.js":"\"use strict\";var exported,$WeakMap=\"function\"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,$WeakSet=\"function\"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;$WeakMap||(exported=function(e){return!1});var $mapHas=$WeakMap?$WeakMap.prototype.has:null,$setHas=$WeakSet?$WeakSet.prototype.has:null;exported||$mapHas||(exported=function(e){return!1}),module.exports=exported||function(e){if(!e||\"object\"!=typeof e)return!1;try{if($mapHas.call(e,$mapHas),$setHas)try{$setHas.call(e,$setHas)}catch(e){return!0}return e instanceof $WeakMap}catch(e){}return!1};","node_modules/is-weakset/index.js":"\"use strict\";var exported,$WeakMap=\"function\"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,$WeakSet=\"function\"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;$WeakMap||(exported=function(e){return!1});var $mapHas=$WeakMap?$WeakMap.prototype.has:null,$setHas=$WeakSet?$WeakSet.prototype.has:null;exported||$setHas||(module.exports=function(e){return!1}),module.exports=exported||function(e){if(!e||\"object\"!=typeof e)return!1;try{if($setHas.call(e,$setHas),$mapHas)try{$mapHas.call(e,$mapHas)}catch(e){return!0}return e instanceof $WeakSet}catch(e){}return!1};","node_modules/object-inspect/index.js":"var hasMap=\"function\"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,\"size\"):null,mapSize=hasMap&&mapSizeDescriptor&&\"function\"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=\"function\"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,\"size\"):null,setSize=hasSet&&setSizeDescriptor&&\"function\"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=\"function\"==typeof WeakMap&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=\"function\"==typeof WeakSet&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=\"function\"==typeof WeakRef&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,match=String.prototype.match,bigIntValueOf=\"function\"==typeof BigInt?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?Symbol.prototype.toString:null,hasShammedSymbols=\"function\"==typeof Symbol&&\"object\"==typeof Symbol.iterator,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(\"function\"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),inspectCustom=require(\"./util.inspect\").custom,inspectSymbol=inspectCustom&&isSymbol(inspectCustom)?inspectCustom:null,toStringTag=\"function\"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function wrapQuotes(t,e,n){var r=\"double\"===(n.quoteStyle||e)?'\"':\"'\";return r+t+r}function quote(t){return String(t).replace(/\"/g,\"&quot;\")}function isArray(t){return!(\"[object Array]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isDate(t){return!(\"[object Date]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isRegExp(t){return!(\"[object RegExp]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isError(t){return!(\"[object Error]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isString(t){return!(\"[object String]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isNumber(t){return!(\"[object Number]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isBoolean(t){return!(\"[object Boolean]\"!==toStr(t)||toStringTag&&\"object\"==typeof t&&toStringTag in t)}function isSymbol(t){if(hasShammedSymbols)return t&&\"object\"==typeof t&&t instanceof Symbol;if(\"symbol\"==typeof t)return!0;if(!t||\"object\"!=typeof t||!symToString)return!1;try{return symToString.call(t),!0}catch(t){}return!1}function isBigInt(t){if(!t||\"object\"!=typeof t||!bigIntValueOf)return!1;try{return bigIntValueOf.call(t),!0}catch(t){}return!1}module.exports=function t(e,n,r,o){var i=n||{};if(has(i,\"quoteStyle\")&&\"single\"!==i.quoteStyle&&\"double\"!==i.quoteStyle)throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');if(has(i,\"maxStringLength\")&&(\"number\"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');var a=!has(i,\"customInspect\")||i.customInspect;if(\"boolean\"!=typeof a&&\"symbol\"!==a)throw new TypeError(\"option \\\"customInspect\\\", if provided, must be `true`, `false`, or `'symbol'`\");if(has(i,\"indent\")&&null!==i.indent&&\"\\t\"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('options \"indent\" must be \"\\\\t\", an integer > 0, or `null`');if(void 0===e)return\"undefined\";if(null===e)return\"null\";if(\"boolean\"==typeof e)return e?\"true\":\"false\";if(\"string\"==typeof e)return inspectString(e,i);if(\"number\"==typeof e)return 0===e?1/0/e>0?\"0\":\"-0\":String(e);if(\"bigint\"==typeof e)return String(e)+\"n\";var u=void 0===i.depth?5:i.depth;if(void 0===r&&(r=0),r>=u&&u>0&&\"object\"==typeof e)return isArray(e)?\"[Array]\":\"[Object]\";var c=getIndent(i,r);if(void 0===o)o=[];else if(indexOf(o,e)>=0)return\"[Circular]\";function f(e,n,a){if(n&&(o=o.slice()).push(n),a){var u={depth:i.depth};return has(i,\"quoteStyle\")&&(u.quoteStyle=i.quoteStyle),t(e,u,r+1,o)}return t(e,i,r+1,o)}if(\"function\"==typeof e){var p=nameOf(e),l=arrObjKeys(e,f);return\"[Function\"+(p?\": \"+p:\" (anonymous)\")+\"]\"+(l.length>0?\" { \"+l.join(\", \")+\" }\":\"\")}if(isSymbol(e)){var s=hasShammedSymbols?String(e).replace(/^(Symbol\\(.*\\))_[^)]*$/,\"$1\"):symToString.call(e);return\"object\"!=typeof e||hasShammedSymbols?s:markBoxed(s)}if(isElement(e)){for(var y=\"<\"+String(e.nodeName).toLowerCase(),S=e.attributes||[],g=0;g<S.length;g++)y+=\" \"+S[g].name+\"=\"+wrapQuotes(quote(S[g].value),\"double\",i);return y+=\">\",e.childNodes&&e.childNodes.length&&(y+=\"...\"),y+=\"</\"+String(e.nodeName).toLowerCase()+\">\"}if(isArray(e)){if(0===e.length)return\"[]\";var b=arrObjKeys(e,f);return c&&!singleLineValues(b)?\"[\"+indentedJoin(b,c)+\"]\":\"[ \"+b.join(\", \")+\" ]\"}if(isError(e)){var m=arrObjKeys(e,f);return 0===m.length?\"[\"+String(e)+\"]\":\"{ [\"+String(e)+\"] \"+m.join(\", \")+\" }\"}if(\"object\"==typeof e&&a){if(inspectSymbol&&\"function\"==typeof e[inspectSymbol])return e[inspectSymbol]();if(\"symbol\"!==a&&\"function\"==typeof e.inspect)return e.inspect()}if(isMap(e)){var h=[];return mapForEach.call(e,function(t,n){h.push(f(n,e,!0)+\" => \"+f(t,e))}),collectionOf(\"Map\",mapSize.call(e),h,c)}if(isSet(e)){var d=[];return setForEach.call(e,function(t){d.push(f(t,e))}),collectionOf(\"Set\",setSize.call(e),d,c)}if(isWeakMap(e))return weakCollectionOf(\"WeakMap\");if(isWeakSet(e))return weakCollectionOf(\"WeakSet\");if(isWeakRef(e))return weakCollectionOf(\"WeakRef\");if(isNumber(e))return markBoxed(f(Number(e)));if(isBigInt(e))return markBoxed(f(bigIntValueOf.call(e)));if(isBoolean(e))return markBoxed(booleanValueOf.call(e));if(isString(e))return markBoxed(f(String(e)));if(!isDate(e)&&!isRegExp(e)){var O=arrObjKeys(e,f),j=gPO?gPO(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?\"\":\"null prototype\",w=!j&&toStringTag&&Object(e)===e&&toStringTag in e?toStr(e).slice(8,-1):k?\"Object\":\"\",v=(j||\"function\"!=typeof e.constructor?\"\":e.constructor.name?e.constructor.name+\" \":\"\")+(w||k?\"[\"+[].concat(w||[],k||[]).join(\": \")+\"] \":\"\");return 0===O.length?v+\"{}\":c?v+\"{\"+indentedJoin(O,c)+\"}\":v+\"{ \"+O.join(\", \")+\" }\"}return String(e)};var hasOwn=Object.prototype.hasOwnProperty||function(t){return t in this};function has(t,e){return hasOwn.call(t,e)}function toStr(t){return objectToString.call(t)}function nameOf(t){if(t.name)return t.name;var e=match.call(functionToString.call(t),/^function\\s*([\\w$]+)/);return e?e[1]:null}function indexOf(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function isMap(t){if(!mapSize||!t||\"object\"!=typeof t)return!1;try{mapSize.call(t);try{setSize.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}function isWeakMap(t){if(!weakMapHas||!t||\"object\"!=typeof t)return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}function isWeakRef(t){if(!weakRefDeref||!t||\"object\"!=typeof t)return!1;try{return weakRefDeref.call(t),!0}catch(t){}return!1}function isSet(t){if(!setSize||!t||\"object\"!=typeof t)return!1;try{setSize.call(t);try{mapSize.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}function isWeakSet(t){if(!weakSetHas||!t||\"object\"!=typeof t)return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}function isElement(t){return!(!t||\"object\"!=typeof t)&&(\"undefined\"!=typeof HTMLElement&&t instanceof HTMLElement||\"string\"==typeof t.nodeName&&\"function\"==typeof t.getAttribute)}function inspectString(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r=\"... \"+n+\" more character\"+(n>1?\"s\":\"\");return inspectString(t.slice(0,e.maxStringLength),e)+r}return wrapQuotes(t.replace(/(['\\\\])/g,\"\\\\$1\").replace(/[\\x00-\\x1f]/g,lowbyte),\"single\",e)}function lowbyte(t){var e=t.charCodeAt(0),n={8:\"b\",9:\"t\",10:\"n\",12:\"f\",13:\"r\"}[e];return n?\"\\\\\"+n:\"\\\\x\"+(e<16?\"0\":\"\")+e.toString(16).toUpperCase()}function markBoxed(t){return\"Object(\"+t+\")\"}function weakCollectionOf(t){return t+\" { ? }\"}function collectionOf(t,e,n,r){return t+\" (\"+e+\") {\"+(r?indentedJoin(n,r):n.join(\", \"))+\"}\"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf(t[e],\"\\n\")>=0)return!1;return!0}function getIndent(t,e){var n;if(\"\\t\"===t.indent)n=\"\\t\";else{if(!(\"number\"==typeof t.indent&&t.indent>0))return null;n=Array(t.indent+1).join(\" \")}return{base:n,prev:Array(e+1).join(n)}}function indentedJoin(t,e){if(0===t.length)return\"\";var n=\"\\n\"+e.prev+e.base;return n+t.join(\",\"+n)+\"\\n\"+e.prev}function arrObjKeys(t,e){var n=isArray(t),r=[];if(n){r.length=t.length;for(var o=0;o<t.length;o++)r[o]=has(t,o)?e(t[o],t):\"\"}var i,a=\"function\"==typeof gOPS?gOPS(t):[];if(hasShammedSymbols){i={};for(var u=0;u<a.length;u++)i[\"$\"+a[u]]=a[u]}for(var c in t)has(t,c)&&(n&&String(Number(c))===c&&c<t.length||hasShammedSymbols&&i[\"$\"+c]instanceof Symbol||(/[^\\w$]/.test(c)?r.push(e(c,t)+\": \"+e(t[c],t)):r.push(c+\": \"+e(t[c],t))));if(\"function\"==typeof gOPS)for(var f=0;f<a.length;f++)isEnumerable.call(t,a[f])&&r.push(\"[\"+e(a[f])+\"]: \"+e(t[a[f]],t));return r}","node_modules/object-inspect/util.inspect.js":"module.exports=require(\"util\").inspect;","node_modules/foreach/index.js":"var hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString;module.exports=function(t,r,o){if(\"[object Function]\"!==toString.call(r))throw new TypeError(\"iterator must be a function\");var e=t.length;if(e===+e)for(var n=0;n<e;n++)r.call(o,t[n],n,t);else for(var a in t)hasOwn.call(t,a)&&r.call(o,t[a],a,t)};","node_modules/available-typed-arrays/index.js":"\"use strict\";var possibleNames=[\"BigInt64Array\",\"BigUint64Array\",\"Float32Array\",\"Float64Array\",\"Int16Array\",\"Int32Array\",\"Int8Array\",\"Uint16Array\",\"Uint32Array\",\"Uint8Array\",\"Uint8ClampedArray\"],g=\"undefined\"==typeof globalThis?global:globalThis;module.exports=function(){for(var r=[],a=0;a<possibleNames.length;a++)\"function\"==typeof g[possibleNames[a]]&&(r[r.length]=possibleNames[a]);return r};","node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js":"\"use strict\";var GetIntrinsic=require(\"get-intrinsic\"),$gOPD=GetIntrinsic(\"%Object.getOwnPropertyDescriptor%\",!0);if($gOPD)try{$gOPD([],\"length\")}catch(t){$gOPD=null}module.exports=$gOPD;","node_modules/is-typed-array/index.js":"\"use strict\";var forEach=require(\"foreach\"),availableTypedArrays=require(\"available-typed-arrays\"),callBound=require(\"call-bind/callBound\"),$toString=callBound(\"Object.prototype.toString\"),hasToStringTag=require(\"has-tostringtag/shams\")(),g=\"undefined\"==typeof globalThis?global:globalThis,typedArrays=availableTypedArrays(),$indexOf=callBound(\"Array.prototype.indexOf\",!0)||function(r,t){for(var e=0;e<r.length;e+=1)if(r[e]===t)return e;return-1},$slice=callBound(\"String.prototype.slice\"),toStrTags={},gOPD=require(\"es-abstract/helpers/getOwnPropertyDescriptor\"),getPrototypeOf=Object.getPrototypeOf;hasToStringTag&&gOPD&&getPrototypeOf&&forEach(typedArrays,function(r){var t=new g[r];if(Symbol.toStringTag in t){var e=getPrototypeOf(t),a=gOPD(e,Symbol.toStringTag);if(!a){var o=getPrototypeOf(e);a=gOPD(o,Symbol.toStringTag)}toStrTags[r]=a.get}});var tryTypedArrays=function(r){var t=!1;return forEach(toStrTags,function(e,a){if(!t)try{t=e.call(r)===a}catch(r){}}),t};module.exports=function(r){if(!r||\"object\"!=typeof r)return!1;if(!(hasToStringTag&&Symbol.toStringTag in r)){var t=$slice($toString(r),8,-1);return $indexOf(typedArrays,t)>-1}return!!gOPD&&tryTypedArrays(r)};","node_modules/object.assign/implementation.js":"\"use strict\";var keys=require(\"object-keys\"),canBeObject=function(e){return void 0!==e&&null!==e},hasSymbols=require(\"has-symbols/shams\")(),callBound=require(\"call-bind/callBound\"),toObject=Object,$push=callBound(\"Array.prototype.push\"),$propIsEnumerable=callBound(\"Object.prototype.propertyIsEnumerable\"),originalGetSymbols=hasSymbols?Object.getOwnPropertySymbols:null;module.exports=function(e,r){if(!canBeObject(e))throw new TypeError(\"target must be an object\");var o,t,l,s,n,b,a,u=toObject(e);for(o=1;o<arguments.length;++o){t=toObject(arguments[o]),s=keys(t);var c=hasSymbols&&(Object.getOwnPropertySymbols||originalGetSymbols);if(c)for(n=c(t),l=0;l<n.length;++l)a=n[l],$propIsEnumerable(t,a)&&$push(s,a);for(l=0;l<s.length;++l)b=t[a=s[l]],$propIsEnumerable(t,a)&&(u[a]=b)}return u};","node_modules/object.assign/polyfill.js":"\"use strict\";var implementation=require(\"./implementation\"),lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var n=\"abcdefghijklmnopqrst\",e=n.split(\"\"),t={},r=0;r<e.length;++r)t[e[r]]=e[r];var i=Object.assign({},t),s=\"\";for(var a in i)s+=a;return n!==s},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,\"xy\")}catch(e){return\"y\"===n[1]}return!1};module.exports=function(){return Object.assign?lacksProperEnumerationOrder()?implementation:assignHasPendingExceptions()?implementation:Object.assign:implementation};","node_modules/object.assign/shim.js":"\"use strict\";var define=require(\"define-properties\"),getPolyfill=require(\"./polyfill\");module.exports=function(){var e=getPolyfill();return define(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e};","node_modules/h5.modbus/lib/Master.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,InvalidFrameError=require(\"./InvalidFrameError\"),ResponseTimeoutError=require(\"./ResponseTimeoutError\"),Transaction=require(\"./Transaction\"),messages=require(\"./messages\");class Master extends EventEmitter{constructor(t){super(),this.onConnectionOpen=this.onConnectionOpen.bind(this),this.onConnectionClose=this.onConnectionClose.bind(this),this.onConnectionError=this.onConnectionError.bind(this),this.onConnectionData=this.onConnectionData.bind(this),this.connection=this.setUpConnection(t.connection),this.transport=this.setUpTransport(t.transport),this.suppressTransactionErrors=!0===t.suppressTransactionErrors,this.retryOnException=!1!==t.retryOnException,this.maxConcurrentTransactions=t.maxConcurrentTransactions||1,this.defaultUnit=t.defaultUnit>0?t.defaultUnit:0,this.defaultMaxRetries=t.defaultMaxRetries>=0?t.defaultMaxRetries:1,this.defaultTimeout=t.defaultTimeout>0?t.defaultTimeout:100,this.repeatableTransactions=new Map,this.transactionQueue=[],this.runningTransactionCache=new Map,this.runningTransactions=new Map,this.runningRequests=new Map,this.lastRunningTransaction=null,this.connected=this.connection.isOpen(),this.nextRequestId=0}destroy(t){this.removeAllListeners(),this.destroyTransport(t),this.destroyConnection(t),this.destroyTransactions()}isOpen(){return this.connected}execute(t){const e=this.createTransaction(t);return e.isRepeatable()&&this.addRepeatableTransaction(e),this.transactionQueue.push(e),this.runQueuedTransactions(),e}readDiscreteInputs(t,e,n){return this.request(new messages.ReadDiscreteInputsRequest(t,e),n)}readCoils(t,e,n){return this.request(new messages.ReadCoilsRequest(t,e),n)}writeSingleCoil(t,e,n){return this.request(new messages.WriteSingleCoilRequest(t,e),n)}writeMultipleCoils(t,e,n){return this.request(new messages.WriteMultipleCoilsRequest(t,e),n)}readInputRegisters(t,e,n){return this.request(new messages.ReadInputRegistersRequest(t,e),n)}readHoldingRegisters(t,e,n){return this.request(new messages.ReadHoldingRegistersRequest(t,e),n)}writeSingleRegister(t,e,n){return this.request(new messages.WriteSingleRegisterRequest(t,e),n)}writeMultipleRegisters(t,e,n){return this.request(new messages.WriteMultipleRegistersRequest(t,e),n)}readWriteMultipleRegisters(t,e,n,s,i){return this.request(new messages.ReadWriteMultipleRegistersRequest(t,e,n,s),i)}request(t,e){let n=e,s=null;\"function\"==typeof e?(s=e,n={request:t}):null==e?n={request:t}:n.request=t;const i=this.execute(n);return s&&i.on(\"complete\",s),i}createTransaction(t){const e=t&&\"function\"==typeof t.bind?t:new Transaction(this.applyTransactionDefaults(t));return e.bind(this.onTransactionDestroy.bind(this,e)),this.suppressTransactionErrors&&e.on(\"error\",()=>{}),e.on(\"timeout\",this.onTransactionTimeout.bind(this)),e}applyTransactionDefaults(t){return t||(t={}),null==t.unit&&(t.unit=this.defaultUnit),null==t.maxRetries&&(t.maxRetries=this.defaultMaxRetries),null==t.timeout&&(t.timeout=this.defaultTimeout),t}addRepeatableTransaction(t){if(this.repeatableTransactions.has(t.id))throw new Error(`Transaction ID must be unique per each Master. [${t.id}] already exists.`);this.repeatableTransactions.set(t.id,t)}destroyTransactions(){this.transactionQueue.forEach(t=>t.destroy()),this.repeatableTransactions.forEach(t=>t.destroy()),this.runningTransactions.forEach(t=>t.destroy()),this.repeatableTransactions=null,this.transactionQueue=null,this.runningTransactions=null}setUpTransport(t){return t.add(this),this.on(\"adu\",this.handleAdu.bind(this)),t}destroyTransport(t){t&&this.transport.destroy(),this.transport=null}setUpConnection(t){return t.on(\"open\",this.onConnectionOpen),t.on(\"close\",this.onConnectionClose),t.on(\"error\",this.onConnectionError),t.on(\"data\",this.onConnectionData),t}destroyConnection(t){const e=this.connection;null!==e&&(e.removeListener(\"open\",this.onConnectionOpen),e.removeListener(\"close\",this.onConnectionClose),e.removeListener(\"error\",this.onConnectionError),e.removeListener(\"data\",this.onConnectionData),t&&e.destroy(),this.connection=null)}onConnectionOpen(){this.connected=!0,this.transport.add(this),this.queueRepeatableTransactions(),this.runQueuedTransactions(),this.emit(\"open\")}onConnectionClose(){this.connected&&(this.connected=!1,this.emit(\"close\"))}onConnectionError(t){this.emit(\"error\",t)}onConnectionData(t){this.emit(\"data\",t)}onTransactionTimeout(t){this.handleResult(t,null,new ResponseTimeoutError,null),this.emit(\"timeout\",t)}onTransactionDestroy(t){this.repeatableTransactions.delete(t.id);const e=this.runningTransactions.get(t);e&&(this.runningRequests.delete(e.requestId),this.runningTransactions.delete(t),e.destroy(),this.lastRunningTransaction===e&&(this.lastRunningTransaction=null)),this.runningTransactionCache.delete(t);const n=this.transactionQueue.indexOf(t);-1!==n&&this.transactionQueue.splice(n,1)}queueRepeatableTransactions(){this.repeatableTransactions.forEach(t=>this.transactionQueue.push(t))}runQueuedTransactions(){for(;this.transactionQueue.length>0&&this.runningTransactions.size<this.maxConcurrentTransactions;)this.runTransaction(this.transactionQueue.shift())}runTransaction(t){let e=this.runningTransactionCache.get(t);e||(e=new RunningTransaction(t,this.transport,this.connection)),this.startRunningTransaction(e)}startRunningTransaction(t){const e=this.getNextRequestId();this.runningTransactions.set(t.transaction,t),this.runningRequests.set(e,t),this.lastRunningTransaction=t,setImmediate(t.start.bind(t,e))}getNextRequestId(){return 65535===this.nextRequestId?this.nextRequestId=1:this.nextRequestId+=1,this.nextRequestId}handleAdu(t){let e=null;try{e=t.toResponse()}catch(t){this.emit(\"error\",t)}e&&this.handleResult(t.id,t,null,e)}handleResult(t,e,n,s){const i=this.findRunningTransaction(t);if(!i)return;const r=i.transaction;this.runningTransactions.delete(r),this.runningRequests.delete(i.requestId),this.lastRunningTransaction=null,n||(n=i.validate(e)),n?this.handleTransactionError(i,n):this.handleTransactionResponse(i,e,s),this.runQueuedTransactions()}handleTransactionError(t,e){t.handleError(e);const n=t.transaction;t.shouldRetry()?this.scheduleReExecution(t):t.isRepeatable()?this.scheduleExecution(t):n.destroy()}handleTransactionResponse(t,e,n){const s=e.isException();t.handleResponse(s,n);const i=t.transaction;s&&this.retryOnException&&t.shouldRetry()?this.scheduleReExecution(t):t.isRepeatable()?this.scheduleExecution(t):i.destroy()}scheduleExecution(t){this.cacheRunningTransaction(t),t.scheduleExecution(()=>{this.isOpen()&&(this.transactionQueue.push(t.transaction),this.runQueuedTransactions())})}scheduleReExecution(t){this.cacheRunningTransaction(t),this.transactionQueue.unshift(t.transaction)}findRunningTransaction(t){return 0===this.runningRequests.size?null:null===t?this.lastRunningTransaction:this.runningRequests.get(t)||null}cacheRunningTransaction(t){this.runningTransactionCache.set(t.transaction,t)}}class RunningTransaction{constructor(t,e,n){this.requestId=-1,this.transaction=t,this.transport=e,this.connection=n,this.frame=null,this.failures=0,this.timeoutTimer=null,this.executionTimer=null}destroy(){this.stopTimeout(),this.executionTimer&&(clearTimeout(this.executionTimer),this.executionTimer=null),this.transaction=null,this.transport=null,this.connection=null,this.frame=null,this.pdu=null}isRepeatable(){return this.transaction.isRepeatable()}shouldRetry(){return this.failures<=this.transaction.maxRetries}start(t){this.frame&&this.transport.update(this.frame,t)||(this.frame=this.transport.encode(t,this.transaction.unit,this.transaction.request.toBuffer())),this.requestId=t,this.timeoutTimer=setTimeout(this.onTimeout.bind(this),this.transaction.timeout),this.connection.write(this.frame),this.transaction.emit(\"request\",t)}scheduleExecution(t){this.failures=0,0===this.transaction.interval?t():this.executionTimer=setTimeout(t,this.transaction.interval)}validate(t){const e=this.transaction.unit,n=t.unit;if(n!==e)return new InvalidFrameError(`Invalid unit in a response to request [${t.id}] of transaction [${this.transaction.id}]. `+`Expected [${e}], but got [${n}].`);const s=this.transaction.request.functionCode,i=t.getRealFunctionCode();return i!==s?new InvalidFrameError(`Invalid function code in a response to request [${t.id}] of transaction [${this.transaction.id}]. `+`Expected [${s}], but got [${i}].`):null}handleResponse(t,e){this.stopTimeout(),t?this.failures+=1:this.failures=0,this.transaction.emit(\"response\",e),this.transaction.emit(\"complete\",null,e)}handleError(t){this.stopTimeout(),this.failures+=1,this.transaction.emit(\"error\",t),this.transaction.emit(\"complete\",t,null)}onTimeout(){this.stopTimeout(),this.transaction.emit(\"timeout\",this.requestId)}stopTimeout(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)}}module.exports=Master;","node_modules/h5.modbus/lib/Slave.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,ExceptionCode=require(\"./ExceptionCode\"),FunctionCode=require(\"./FunctionCode\"),Response=require(\"./Response\"),ExceptionResponse=require(\"./messages/ExceptionResponse\"),responses=require(\"./messages\").responses;class Slave extends EventEmitter{constructor(e){super(),this.onRemoteClient=this.onRemoteClient.bind(this),this.listener=this.setUpListener(e.listener),this.transport=this.setUpTransport(e.transport),this.requestHandler=this.setUpRequestHandler(e.requestHandler),this.suppressClientErrors=!1!==e.suppressClientErrors,this.maxClients=e.maxClients||0,this.clients=new Set}destroy(e){this.removeAllListeners(),this.destroyTransport(e),this.destroyListener(e),this.clients.clear()}setUpRequestHandler(e){if(!e)throw new Error(\"The `requestHandler` option must be specified!\");return e}setUpTransport(e){if(!e)throw new Error(\"The `transport` option must be specified!\");return e}destroyTransport(e){this.transport&&(e&&this.transport.destroy(),this.transport=null)}setUpListener(e){if(!e)throw new Error(\"The `listener` option must be specified!\");return e.on(\"client\",this.onRemoteClient),e}destroyListener(e){this.listener&&(this.listener.removeListener(\"client\",this.onRemoteClient),e&&this.listener.destroy(),this.listener=null)}onRemoteClient(e){this.hasMaxClients()?e.destroy():(e.on(\"adu\",this.handleAdu.bind(this,e)),e.on(\"close\",()=>this.clients.delete(e)),this.suppressClientErrors&&e.on(\"error\",()=>{}),this.transport.add(e),this.clients.add(e))}hasMaxClients(){return this.maxClients>0&&this.clients.size===this.maxClients}handleAdu(e,t){let s=null;try{s=t.toRequest()}catch(t){e.emit(\"error\",t)}s&&this.handleRequest(e,t,s)}handleRequest(e,t,s){this.emit(\"request\",{client:e,adu:t,request:s}),this.requestHandler(t.unit,s,this.createRespondCallback(e,t,s))}createRespondCallback(e,t,s){return n=>{if(!this.transport)return;const r=this.createResponse(t.functionCode,n),i=r.toBuffer(),o=this.transport.encode(t.id,t.unit,i);this.emit(\"response\",{client:e,adu:t,request:s,response:r}),e.write(o)}}createResponse(e,t){if(null==t)throw new Error(\"Invalid response result. Expected an ExceptionCode, a Response, a Response options object or a Response Buffer, \"+`but got [${t}].`);if(\"number\"==typeof t)return new ExceptionResponse(e,t);if(t instanceof Response){if(t.functionCode!==e)throw new Error(\"Invalid response result. \"+`Expected a Response with function code ${FunctionCode[e]} (${e}), `+`but got ${FunctionCode[t.functionCode]} (${t.functionCode}).`);return t}if(t instanceof Error)return new ExceptionResponse(e,ExceptionCode.SlaveDeviceFailure);const s=responses[e];if(!s)throw new Error(\"Invalid response result. Expected an options object or Buffer for an implemented MODBUS function code, \"+`but ${FunctionCode[e]} (${e}) is not implemented.`);return Buffer.isBuffer(t)?s.fromBuffer(t):s.fromOptions(t)}}module.exports=Slave;","node_modules/h5.modbus/lib/ExceptionCode.js":"\"use strict\";const ExceptionCode={IllegalFunctionCode:1,IllegalDataAddress:2,IllegalDataValue:3,SlaveDeviceFailure:4,Acknowledge:5,SlaveDeviceBusy:6,NegativeAcknowledge:7,MemoryParityError:8,GatewayPathUnavailable:10,GatewayTargetDeviceFailedToRespond:11};Object.keys(ExceptionCode).forEach(e=>{ExceptionCode[ExceptionCode[e]]=e}),module.exports=ExceptionCode;","node_modules/h5.modbus/lib/FunctionCode.js":"\"use strict\";const FunctionCode={ReadDiscreteInputs:2,ReadCoils:1,WriteSingleCoil:5,WriteMultipleCoils:15,ReadInputRegisters:4,ReadHoldingRegisters:3,WriteSingleRegister:6,WriteMultipleRegisters:16,ReadWriteMultipleRegisters:23,MaskWriteRegister:22,ReadFifoQueue:24,ReadFileRecord:20,WriteFileRecord:21,ReadExceptionStatus:7,Diagnostic:8,GetComEventCounter:11,GetComEventLog:12,ReportServerId:17,ReadDeviceIdentification:43,Exception:128};Object.keys(FunctionCode).forEach(e=>{FunctionCode[FunctionCode[e]]=e}),module.exports=FunctionCode;","node_modules/h5.modbus/lib/helpers.js":"\"use strict\";const inspect=require(\"util\").inspect,POWER=[1,2,4,8,16,32,64,128];function ModbusHelpers(){}function formatMessage(e,r,t){return`${ModbusHelpers.formatFunctionCode(e)} (${t?\"RES\":\"REQ\"}) ${r}`}ModbusHelpers.toBitArray=function(e,r,t){const n=new Array(t),o=e.length;let s=0;for(;r<o;++r){const o=e[r];for(let e=0;e<8&&s!==t;++e)n[s++]=0!=(o&POWER[e])}return n},ModbusHelpers.formatFunctionCode=function(e){return`0x${e>15?\"\":\"0\"}${e.toString(16).toUpperCase()}`},ModbusHelpers.formatRequest=function(e,r){return formatMessage(e.functionCode,r,!1)},ModbusHelpers.formatResponse=function(e,r){return formatMessage(e.functionCode,r,!0)},ModbusHelpers.assertFunctionCode=function(e,r){if(e!==r)throw new Error(`Invalid function code. Expected [${r}], got [${e}].`)},ModbusHelpers.assertBufferLength=function(e,r){if(e.length<r)throw new Error(`Invalid buffer. Expected at least [${r}] bytes, got [${e.length}].`)},ModbusHelpers.prepareAddress=function(e,r){const t=ModbusHelpers.prepareNumericOption(e,0,0,65535,\"A starting address\"),n=t+r;if(n>0&&n>65536)throw new Error(`The sum of the starting address and quantity must be an integer between 1 and 65536, but got [${n}].`);return t},ModbusHelpers.prepareQuantity=function(e,r){return ModbusHelpers.prepareNumericOption(e,1,1,r,\"Quantity\")},ModbusHelpers.prepareRegisterValue=function(e){if(Buffer.isBuffer(e)){if(e.length<2)throw new Error(`Register value must be a 2 byte Buffer, but got: ${inspect(e)}`);return e.readUInt16BE(0)}const r=ModbusHelpers.prepareNumericOption(e,0,-32768,65535,\"Register value\");return r>=0?r:r+65536},ModbusHelpers.prepareRegisterValues=function(e,r){r||(r=246);let t=e;if(Array.isArray(e)){t=Buffer.allocUnsafe(2*e.length);for(let r=0;r<e.length;++r){const n=ModbusHelpers.prepareNumericOption(e[r],0,-32768,65535,\"Register value\");t.writeUInt16BE(n>=0?n:n+65536,2*r)}}if(!Buffer.isBuffer(t)){const e=typeof t,r=\"object\"===e?inspect(t):e;throw new Error(`Invalid register values. Expected a Buffer, but got [${r}].`)}if(t.length%2!=0||t.length<2||t.length>r)throw new Error(\"Invalid register values. \"+`Expected a Buffer of even length between 2 and ${r} bytes, but got [${t.length}].`);return t},ModbusHelpers.prepareNumericOption=function(e,r,t,n,o){if(null==e)return r;const s=Math.floor(e);if(isNaN(s)||s<t||s>n)throw new Error(`${o} must be a number between ${t} and ${n}, but got [${e}].`);return s},module.exports=ModbusHelpers;","node_modules/h5.modbus/lib/ApplicationDataUnit.js":"\"use strict\";const InvalidFrameError=require(\"./InvalidFrameError\"),FunctionCode=require(\"./FunctionCode\"),messages=require(\"./messages\");class ApplicationDataUnit{constructor(e,t,o,n){this.id=e,this.unit=t,this.functionCode=o[0],this.protocolDataUnit=o,this.checksum=n}isException(){return this.functionCode>FunctionCode.Exception}getRealFunctionCode(){return this.isException()?this.functionCode-FunctionCode.Exception:this.functionCode}toRequest(){if(!messages.requests[this.functionCode])throw new InvalidFrameError(`Unsupported request function code: ${this.functionCode}`);return messages.requests[this.functionCode].fromBuffer(this.protocolDataUnit)}toResponse(){const e=this.isException()?FunctionCode.Exception:this.functionCode;if(!messages.responses[e])throw new InvalidFrameError(`Unsupported response function code: ${e}`);return messages.responses[e].fromBuffer(this.protocolDataUnit)}}module.exports=ApplicationDataUnit;","node_modules/h5.modbus/lib/RemoteClient.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter;class RemoteClient extends EventEmitter{constructor(e){super(),this.remoteInfo=e}destroy(){this.emit(\"close\"),this.removeAllListeners()}write(e){this.emit(\"write\",e)}}module.exports=RemoteClient;","node_modules/h5.modbus/lib/Transaction.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter,requests=require(\"./messages\").requests;let TID=0;class Transaction extends EventEmitter{constructor(t){super(),this.id=\"string\"==typeof t.id?t.id:`T~${++TID}`,this.unit=t.unit>=0?t.unit:1,this.maxRetries=t.maxRetries>=0?t.maxRetries:1,this.timeout=t.timeout>0?t.timeout:100,this.interval=t.interval>=0?t.interval:-1,this.request=\"function\"==typeof t.request.toBuffer?t.request:requests[t.request.functionCode].fromOptions(t.request),this.onDestroy=null}destroy(){this.removeAllListeners(),this.onDestroy&&(this.onDestroy(),this.onDestroy=null)}isRepeatable(){return this.interval>=0}bind(t){if(this.onDestroy)throw new Error(`Transaction [${this.id}] is already bound to another Master.`);this.onDestroy=t}}module.exports=Transaction;","node_modules/h5.modbus/lib/InvalidFrameError.js":"\"use strict\";class InvalidFrameError extends Error{constructor(r){super(),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=r||\"Received an invalid MODBUS frame.\"}}module.exports=InvalidFrameError;","node_modules/h5.modbus/lib/ResponseTimeoutError.js":"\"use strict\";class ResponseTimeoutError extends Error{constructor(e){super(),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e||\"No response was received from the slave in the specified time.\"}}module.exports=ResponseTimeoutError;","node_modules/h5.modbus/lib/Transport.js":"\"use strict\";class Transport{constructor(){}destroy(){throw new Error(\"@abstract\")}encode(r,t,o){throw new Error(\"@abstract\")}decode(r){throw new Error(\"@abstract\")}update(r,t){throw new Error(\"@abstract\")}add(r){throw new Error(\"@abstract\")}}module.exports=Transport;","node_modules/h5.modbus/lib/transports/IpTransport.js":"\"use strict\";const inspect=require(\"util\").inspect,buffers=require(\"h5.buffers\"),InvalidFrameError=require(\"../InvalidFrameError\"),ApplicationDataUnit=require(\"../ApplicationDataUnit\"),Transport=require(\"../Transport\"),IP_FRAME_MIN_LENGTH=8;class IpTransport extends Transport{constructor(e){super(),e||(e={}),this.maxBufferLength=e.maxBufferLength||1e3,this.eeToState=new Map}destroy(){this.eeToState.forEach(e=>e.destroy()),this.eeToState=null}encode(e,t,r){const s=Buffer.allocUnsafe(7+r.length);return s.writeUInt16BE(e,0),s.writeUInt16BE(0,2),s.writeUInt16BE(r.length+1,4),s.writeUInt8(t,6),r.copy(s,7),s}decode(e){if(e.length<IP_FRAME_MIN_LENGTH)throw new InvalidFrameError(`MODBUS IP frames must have at least ${IP_FRAME_MIN_LENGTH} bytes, `+`but got [${e.length}]: ${inspect(e)}`);const t=new IpTransportState(null,this.maxBufferLength,null);t.pushData(e),t.readHeader();const r=t.validateHeader();if(r)throw r;return t.createAdu()}update(e,t){return e.length>=2&&(e.writeUInt16BE(65535&t,0),!0)}add(e){if(this.eeToState.has(e))return;const t=new IpTransportState(e,this.maxBufferLength,()=>this.eeToState.delete(e));this.eeToState.set(e,t)}}class IpTransportState{constructor(e,t,r){this.ee=e,this.maxBufferLength=t,this.onDestroy=r,this.onClose=this.destroy.bind(this),this.onData=this.onData.bind(this),this.id=-1,this.version=-1,this.length=-1,this.unit=-1,this.buffer=new buffers.BufferQueueReader,e&&(e.on(\"close\",this.onClose),e.on(\"data\",this.onData))}destroy(){this.ee&&(this.ee.removeListener(\"close\",this.onClose),this.ee.removeListener(\"data\",this.onData),this.ee=null),this.buffer&&(this.buffer.skip(this.buffer.length),this.buffer=null),this.onDestroy&&(this.onDestroy(),this.onDestroy=null)}pushData(e){this.buffer.push(e)}readHeader(){this.id=this.buffer.shiftUInt16(!1),this.version=this.buffer.shiftUInt16(!1),this.length=this.buffer.shiftUInt16(!1)-1,this.unit=this.buffer.shiftByte()}validateHeader(){return 0!==this.version?new InvalidFrameError(\"Invalid version specified in a header of a MODBUS IP frame. \"+`Expected [0], but got [${this.version}].`):this.length<2?new InvalidFrameError(\"Invalid length specified in a header of a MODBUS IP frame. \"+`Expected at least [2], but got [${this.length}].`):null}createAdu(){return new ApplicationDataUnit(this.id,this.unit,this.buffer.shiftBuffer(this.length),null)}resetHeader(){this.id=-1,this.version=-1,this.length=-1,this.unit=-1}onData(e){this.pushData(e),this.handleIncompleteFrame()}hasCompleteFrame(){return-1!==this.id&&this.buffer.length>=this.length}isReadable(){return-1===this.id&&this.buffer.length>=7}skipFrame(){this.length>0&&this.buffer.skip(this.length)}handleIncompleteFrame(){this.isReadable()&&this.readHeader(),this.hasCompleteFrame()?this.handleCompleteFrame():this.isBufferOverflow()&&this.handleBufferOverflow()}handleCompleteFrame(){const e=this.validateHeader();if(e)return this.skipFrame(),this.resetHeader(),void this.ee.emit(\"error\",e);this.ee.emit(\"adu\",this.createAdu()),this.resetHeader(),this.buffer.length>0&&this.handleIncompleteFrame()}isBufferOverflow(){return this.buffer.length>this.maxBufferLength}handleBufferOverflow(){this.resetHeader(),this.ee.emit(\"bufferOverflow\",this.buffer.shiftBuffer(this.buffer.length))}}module.exports=IpTransport;","node_modules/h5.modbus/lib/transports/AsciiTransport.js":"\"use strict\";const inspect=require(\"util\").inspect,buffers=require(\"h5.buffers\"),InvalidFrameError=require(\"../InvalidFrameError\"),ApplicationDataUnit=require(\"../ApplicationDataUnit\"),Transport=require(\"../Transport\"),ASCII_FRAME_MIN_LENGTH=9,ASCII_FRAME_START=58,ASCII_FRAME_CR=13,ASCII_FRAME_LF=10;class AsciiTransport extends Transport{constructor(e){super(),e||(e={}),this.maxBufferLength=e.maxBufferLength||1e3,this.eeToState=new Map}destroy(){this.eeToState.forEach(e=>e.destroy()),this.eeToState=null}encode(e,t,n){const r=Buffer.allocUnsafe(3+2*n.length+2+2),o=lrc(t,n);let i=0;r[i++]=ASCII_FRAME_START,r[i++]=encodeNibble(high(t)),r[i++]=encodeNibble(low(t));for(let e=0;e<n.length;++e)r[i++]=encodeNibble(high(n[e])),r[i++]=encodeNibble(low(n[e]));return r[i++]=encodeNibble(high(o)),r[i++]=encodeNibble(low(o)),r[i++]=ASCII_FRAME_CR,r[i]=ASCII_FRAME_LF,r}decode(e){if(e.length<ASCII_FRAME_MIN_LENGTH)throw new InvalidFrameError(`MODBUS ASCII frames must have at least ${ASCII_FRAME_MIN_LENGTH} bytes, `+`but got [${e.length}]: ${inspect(e)}`);if(e[0]!==ASCII_FRAME_START||e[e.length-2]!==ASCII_FRAME_CR||e[e.length-1]!==ASCII_FRAME_LF)throw new InvalidFrameError(`MODBUS ASCII frames must begin with [:] and end with [CR] followed by [LF], but got: ${inspect(e)}`);const t=decodeBytes(e.slice(1,e.length-2)),n=t.pop(),r=lrc(0,t);if(r!==n)throw new InvalidFrameError(`Checksum mismatch. Expected [${n}], but got [${r}].`);const o=t.shift(),i=Buffer.from(t);return new ApplicationDataUnit(null,o,i,n)}update(e,t){return!0}add(e){if(this.eeToState.has(e))return;const t={buffer:new buffers.BufferQueueReader,onClose:this.onClose.bind(this,e),onTimeout:this.onTimeout.bind(this,e),onData:this.onData.bind(this,e),destroy:()=>{t.buffer.skip(t.buffer.length),t.buffer=null,e.removeListener(\"close\",t.onClose),e.removeListener(\"onTimeout\",t.onTimeout),e.removeListener(\"data\",t.onData),t.onClose=null,t.onTimeout=null,t.onData=null,this.eeToState.delete(e)}};e.on(\"close\",t.onClose),e.on(\"timeout\",t.onTimeout),e.on(\"data\",t.onData),this.eeToState.set(e,t)}onClose(e){const t=this.eeToState.get(e);t&&t.destroy()}onTimeout(e,t){const n=this.eeToState.get(e);n&&n.buffer.skip(n.buffer.length)}onData(e,t){const n=this.eeToState.get(e);if(!n)return;const r=n.buffer;this.isValidChunk(r,t)?(r.push(t),this.hasCompleteFrame(r)?this.handleCompleteFrame(e,r):this.isBufferOverflow(r)&&this.handleBufferOverflow(e,r)):e.emit(\"error\",new InvalidFrameError(`Invalid data chunk. Expected the first byte to be [:], but got: ${inspect(t)}`))}isValidChunk(e,t){return e.length>0||t[0]===ASCII_FRAME_START}hasCompleteFrame(e){return e.length>=2&&(e.readByte(e.length-2)===ASCII_FRAME_CR&&e.readByte(e.length-1)===ASCII_FRAME_LF)}handleCompleteFrame(e,t){let n=null;try{n=this.decode(t.shiftBuffer(t.length))}catch(t){e.emit(\"error\",t)}null!==n&&e.emit(\"adu\",n)}isBufferOverflow(e){return e.length>this.maxBufferLength}handleBufferOverflow(e,t){e.emit(\"bufferOverflow\",t.shiftBuffer(t.length))}}function encodeNibble(e){return e+(e<10?48:55)}function decodeNibble(e){return e-(e<65?48:55)}function decodeByte(e,t){return(decodeNibble(e)<<4)+(decodeNibble(t)<<0)}function decodeBytes(e){const t=e.length/2,n=new Array(t);for(let r=0,o=0;r<t;++r)n[r]=decodeByte(e[o++],e[o++]);return n}function high(e){return(240&e)>>>4&255}function low(e){return(15&e)>>>0&255}function lrc(e,t){let n=255&e;for(let e=0;e<t.length;++e)n=n+t[e]&255;return 1+(255^n)&255}module.exports=AsciiTransport;","node_modules/h5.modbus/lib/transports/RtuTransport.js":"\"use strict\";const inspect=require(\"util\").inspect,buffers=require(\"h5.buffers\"),InvalidFrameError=require(\"../InvalidFrameError\"),ApplicationDataUnit=require(\"../ApplicationDataUnit\"),Transport=require(\"../Transport\"),RTU_FRAME_MIN_LENGTH=5,CRC_TABLE=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];class RtuTransport extends Transport{constructor(e){super(),e||(e={}),this.handleEndOfFrame=this.handleEndOfFrame.bind(this),this.eofTimeout=e.eofTimeout>0?e.eofTimeout:10,this.eeToState=new Map}destroy(){this.eeToState.forEach(e=>e.destroy()),this.eeToState=null}encode(e,t,r){const o=Buffer.allocUnsafe(1+r.length+2),n=crc16(t,r);return o[0]=t,r.copy(o,1),o.writeUInt16LE(n,1+r.length),o}decode(e){if(e.length<RTU_FRAME_MIN_LENGTH)throw new InvalidFrameError(`MODBUS RTU frames must have at least ${RTU_FRAME_MIN_LENGTH} bytes, `+`but got [${e.length}]: ${inspect(e)}`);const t=e[0],r=e.slice(1,e.length-2),o=e.readUInt16LE(e.length-2),n=crc16(t,r);if(n!==o)throw new InvalidFrameError(`Checksum mismatch. Expected [${o}], but got [${n}].`);return new ApplicationDataUnit(null,t,r,o)}update(e,t){return!0}add(e){if(this.eeToState.has(e))return;const t={buffer:new buffers.BufferQueueReader,eofTimer:null,onClose:this.onClose.bind(this,e),onData:this.onData.bind(this,e),destroy:()=>{t.buffer.skip(t.buffer.length),t.buffer=null,t.eofTimer&&(clearTimeout(t.eofTimer),t.eofTimer=null),e.removeListener(\"close\",t.onClose),e.removeListener(\"data\",t.onData),t.onClose=null,t.onData=null,this.eeToState.delete(e)}};e.on(\"close\",t.onClose),e.on(\"data\",t.onData),this.eeToState.set(e,t)}onClose(e){const t=this.eeToState.get(e);t&&t.destroy()}onData(e,t){const r=this.eeToState.get(e);r&&(r.buffer.push(t),this.eofTimeout<=0?this.handleEndOfFrame(e):(clearTimeout(r.eofTimer),r.eofTimer=setTimeout(this.handleEndOfFrame,this.eofTimeout,e)))}handleEndOfFrame(e){const t=this.eeToState.get(e);if(!t)return;t.eofTimer=null;let r=null;try{r=this.decode(t.buffer.shiftBuffer(t.buffer.length))}catch(t){e.emit(\"error\",t)}null!==r&&e.emit(\"adu\",r)}}function crc16(e,t){let r,o=65535;-1!==e&&(r=255&(o^e),o>>=8,o^=CRC_TABLE[r]);for(let e=0,n=t.length;e<n;++e)r=255&(o^t[e]),o>>=8,o^=CRC_TABLE[r];return o}module.exports=RtuTransport;","node_modules/h5.modbus/lib/Connection.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter;class Connection extends EventEmitter{constructor(){super()}destroy(){throw new Error(\"@abstract\")}isOpen(){throw new Error(\"@abstract\")}write(t){throw new Error(\"@abstract\")}}module.exports=Connection;","node_modules/h5.modbus/lib/connections/TcpConnection.js":"\"use strict\";const Socket=require(\"net\").Socket,Connection=require(\"../Connection\");class TcpConnection extends Connection{constructor(t){super(),this.onSocketConnect=this.onSocketConnect.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketReadable=this.onSocketReadable.bind(this),t||(t={}),this.socketOptions=Object.assign({port:502,host:\"localhost\"},t.socketOptions),this.socket=this.setUpSocket(t.socket),this.autoReconnect=!1!==t.autoReconnect,this.minConnectTime=t.minConnectTime||2500,this.maxReconnectTime=t.maxReconnectTime||5e3,this.noActivityTime=t.noActivityTime||0,this.closeOnDestroy=!1!==t.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==t.suppressErrorsAfterDestroy,this.connected=!this.socket.pending&&\"open\"===this.socket.readyState,this.connecting=\"opening\"===this.socket.readyState,this.shouldReconnect=this.autoReconnect,this.connectionAttempts=0,this.lastDataEventTime=0,this.reconnectTimer=null,this.minConnectTimeTimer=null,this.noActivityTimer=null,this.isOpen()?this.onSocketConnect(!0):this.isOpening()?this.connectionAttempts+=1:!1!==t.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroySocket(),null!==this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),null!==this.minConnectTimeTimer&&(clearTimeout(this.minConnectTimeTimer),this.minConnectTimeTimer=null),null!==this.noActivityTimer&&(clearInterval(this.noActivityTimer),this.noActivityTimer=null)}isOpen(){return this.connected}isOpening(){return this.connecting}open(){this.isOpen()||this.isOpening()||(clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.connecting=!0,this.shouldReconnect=this.autoReconnect,this.connectionAttempts+=1,null===this.socket&&(this.socket=this.setUpSocket(null)),this.socket.connect(this.socketOptions))}close(){this.doClose(!1)}write(t){if(this.emit(\"write\",t),this.isOpen())try{this.socket.write(t)}catch(t){this.emit(\"error\",t)}}setUpSocket(t){return t||(t=new Socket),t.on(\"connect\",this.onSocketConnect),t.on(\"close\",this.onSocketClose),t.on(\"error\",this.onSocketError),t.on(\"readable\",this.onSocketReadable),t.setNoDelay(!1!==this.socketOptions.noDelay),t}destroySocket(){const t=this.socket;null!==t&&(this.socket=null,t.removeListener(\"connect\",this.onSocketConnect),t.removeListener(\"close\",this.onSocketClose),t.removeListener(\"error\",this.onSocketError),t.removeListener(\"readable\",this.onSocketReadable),this.suppressErrorsAfterDestroy&&t.on(\"error\",()=>{}),this.closeOnDestroy&&t.destroy())}onSocketConnect(t){this.connecting=!1,this.connected=!0,clearTimeout(this.minConnectTimeTimer),this.minConnectTimeTimer=setTimeout(this.onAfterMinConnectTime.bind(this),this.minConnectTime),t||this.emit(\"open\"),this.onSocketReadable()}onSocketClose(){null!==this.minConnectTimeTimer&&(clearTimeout(this.minConnectTimeTimer),this.minConnectTimeTimer=null),null!==this.noActivityTimer&&(clearInterval(this.noActivityTimer),this.noActivityTimer=null),this.connecting=!1,this.connected=!1,this.reconnect(),this.emit(\"close\")}onSocketError(t){this.emit(\"error\",t)}onSocketReadable(){for(;;){const t=this.socket.read();if(null===t){this.lastDataEventTime=Date.now();break}this.emit(\"data\",t)}}onAfterMinConnectTime(){this.connectionAttempts=0,this.minConnectTimeTimer=null,this.setUpNoActivityTimer()}setUpNoActivityTimer(){this.noActivityTime>0&&null===this.noActivityTimer&&(this.noActivityTimer=setInterval(this.checkActivity.bind(this),this.noActivityTime))}checkActivity(){Date.now()-this.lastDataEventTime>this.noActivityTime&&(this.connected=!1,this.doClose(!0))}reconnect(){if(!this.shouldReconnect)return;let t=250*this.connectionAttempts;t>this.maxReconnectTime&&(t=this.maxReconnectTime),this.reconnectTimer=setTimeout(this.open.bind(this),t)}doClose(t){this.shouldReconnect=t,null!==this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),null!==this.socket&&this.socket.destroy()}}module.exports=TcpConnection;","node_modules/h5.modbus/lib/connections/UdpConnection.js":"\"use strict\";const net=require(\"net\"),dns=require(\"dns\"),dgram=require(\"dgram\"),Connection=require(\"../Connection\"),BindState={Binding:1,Bound:2},DnsState={Unresolved:0,Resolving:1,Resolved:2};class UdpConnection extends Connection{constructor(t){super(),this.onSocketListening=this.onSocketListening.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),t||(t={}),this.socketOptions=Object.assign({port:502,host:\"localhost\"},t.socketOptions),this.socket=this.setUpSocket(t.socket),this.closeOnDestroy=!1!==t.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==t.suppressErrorsAfterDestroy,this.dnsState=this.getInitialDnsState(),this.resolveDns(),!1!==t.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroySocket()}isOpen(){return null!==this.socket&&this.socket._bindState===BindState.Bound}isOpening(){return null!==this.socket&&this.socket._bindState===BindState.Binding}open(){if(this.dnsState!==DnsState.Resolved)return this.once(\"lookup\",this.open.bind(this)),void this.resolveDns();this.isOpen()||this.isOpening()||(null===this.socket&&(this.socket=this.setUpSocket(null)),this.socket.bind({port:this.socketOptions.localPort,address:this.socketOptions.localAddress,exclusive:!0===this.socketOptions.exclusive}))}close(){null!==this.socket&&this.socket.close()}write(t){if(this.emit(\"write\",t),this.isOpen())try{this.socket.send(t,0,t.length,this.socketOptions.port,this.socketOptions.host)}catch(t){this.emit(\"error\",t)}}setUpSocket(t){return t||(t=dgram.createSocket({type:6===this.socketOptions.family?\"udp6\":\"udp4\",reuseAddr:!0===this.socketOptions.reuseAddress})),t.on(\"listening\",this.onSocketListening),t.on(\"close\",this.onSocketClose),t.on(\"error\",this.onSocketError),t.on(\"message\",this.onSocketMessage),t}destroySocket(){const t=this.socket;null!==t&&(this.socket=null,t.removeListener(\"open\",this.onSocketListening),t.removeListener(\"close\",this.onSocketClose),t.removeListener(\"error\",this.onSocketError),t.removeListener(\"message\",this.onSocketMessage),this.suppressErrorsAfterDestroy&&t.on(\"error\",()=>{}),this.closeOnDestroy&&t.close())}getInitialDnsState(){return this.socketOptions.host?6===this.socketOptions.family&&net.isIPv6(this.socketOptions.host)?(this.socketOptions.host=expandIpv6(this.socketOptions.host),DnsState.Resolved):4===this.socketOptions.family&&net.isIPv4(this.socketOptions.host)?DnsState.Resolved:DnsState.Unresolved:(this.socketOptions.host=\"localhost\",DnsState.Unresolved)}resolveDns(){this.dnsState===DnsState.Unresolved&&(this.dnsState=DnsState.Resolving,dns.lookup(this.socketOptions.host,this.socketOptions.family,(t,s)=>{this.dnsState=DnsState.Resolved,t?this.emit(\"error\",t):this.socketOptions.host=6===this.socketOptions.family?expandIpv6(s):s,this.emit(\"lookup\",t,s,this.socketOptions.family)}))}onSocketListening(){this.emit(\"open\")}onSocketClose(){this.emit(\"close\")}onSocketError(t){this.emit(\"error\",t)}onSocketMessage(t,s){s.address===this.socketOptions.host&&s.port===this.socketOptions.port&&this.emit(\"data\",t)}}function expandIpv6(t){if(39===t.length)return t;const s=t.split(\"::\");let e=s[0].split(\":\"),o=1===s.length?[]:s[1].split(\":\");1===e.length&&\"\"===e[0]&&(e=[]),1===o.length&&\"\"===o[0]&&(o=[]);const i=8-(e.length+o.length),n=[];let r,h;for(r=0,h=e.length;r<h;++r)n.push(padIpv6(e[r]));for(r=0;r<i;++r)n.push(\"0000\");for(r=0,h=o.length;r<h;++r)n.push(padIpv6(o[r]));return n.join(\":\").toLowerCase()}function padIpv6(t){for(;t.length<4;)t=`0${t}`;return t}module.exports=UdpConnection;","node_modules/h5.modbus/lib/connections/SerialConnection.js":"\"use strict\";const Connection=require(\"../Connection\");let SerialPort=null;class SerialConnection extends Connection{constructor(e){super(),this.onOpen=this.onOpen.bind(this),this.onClose=this.onClose.bind(this),this.onError=this.onError.bind(this),this.onReadable=this.onReadable.bind(this),this.serialPortOptions=Object.assign({path:\"win32\"===process.platform?\"COM1\":\"/dev/ttys0\"},e.serialPortOptions,{autoOpen:!1}),this.serialPort=this.setUpSerialPort(e.serialPort),this.closeOnDestroy=!1!==e.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==e.suppressErrorsAfterDestroy,!1!==e.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroySerialPort()}isOpen(){return null!==this.serialPort&&this.serialPort.isOpen}isOpening(){return null!==this.serialPort&&this.serialPort.opening}open(){this.isOpen()||this.isOpening()||(null===this.serialPort&&(this.serialPort=this.setUpSocket(null)),this.serialPort.open())}close(){null!==this.serialPort&&this.serialPort.close()}write(e){if(this.emit(\"write\",e),null!==this.serialPort)try{this.serialPort.write(e)}catch(e){this.emit(\"error\",e)}}setUpSerialPort(e){return e||(null===SerialPort&&(SerialPort=require(\"serialport\")),e=new SerialPort(this.serialPortOptions.path,this.serialPortOptions)),e.on(\"open\",this.onOpen),e.on(\"close\",this.onClose),e.on(\"error\",this.onError),e.on(\"readable\",this.onReadable),e}destroySerialPort(){const e=this.serialPort;null!==e&&(e.removeListener(\"open\",this.onOpen),e.removeListener(\"close\",this.onClose),e.removeListener(\"error\",this.onError),e.removeListener(\"readable\",this.onReadable),this.suppressErrorsAfterDestroy&&e.on(\"error\",()=>{}),this.closeOnDestroy&&e.close(),this.serialPort=null)}onOpen(){this.emit(\"open\")}onClose(){this.emit(\"close\")}onError(e){this.emit(\"error\",e)}onReadable(){if(this.serialPort)for(;;){const e=this.serialPort.read();if(null===e)break;this.emit(\"data\",e)}}}module.exports=SerialConnection;","node_modules/h5.modbus/lib/connections/WebSocketConnection.js":"\"use strict\";const Connection=require(\"../Connection\");let WebSocket=null;const ReadyState={Connecting:0,Open:1,Closing:2,Closed:3};class WebSocketConnection extends Connection{constructor(t){super(),this.onSocketOpen=this.onSocketOpen.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onOpeningError=this.onOpeningError.bind(this),t||(t={}),this.socketOptions=Object.assign({url:\"ws://localhost:502/\"},t.socketOptions),this.socketFactory=null,this.socket=this.setUpSocket(t.socket),this.autoReconnect=!1!==t.autoReconnect,this.minConnectTime=t.minConnectTime||2500,this.maxReconnectTime=t.maxReconnectTime||5e3,this.noActivityTime=t.noActivityTime||0,this.closeOnDestroy=!1!==t.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==t.suppressErrorsAfterDestroy,this.connected=this.socket.readyState===ReadyState.Open,this.connecting=this.socket.readyState===ReadyState.Connecting,this.shouldReconnect=this.autoReconnect,this.connectionAttempts=0,this.lastDataEventTime=0,this.reconnectTimer=null,this.minConnectTimeTimer=null,this.noActivityTimer=null,this.sendOptions={binary:!0,mask:!!t.mask,compress:!!t.compress},this.isOpen()?this.onSocketOpen(!0):this.isOpening()?(this.connectionAttempts+=1,this.on(\"error\",this.onOpeningError)):!1!==t.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroySocket(this.suppressErrorsAfterDestroy,this.closeOnDestroy),null!==this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),null!==this.minConnectTimeTimer&&(clearTimeout(this.minConnectTimeTimer),this.minConnectTimeTimer=null),null!==this.noActivityTimer&&(clearInterval(this.noActivityTimer),this.noActivityTimer=null)}isOpen(){return this.connected}isOpening(){return this.connecting}open(){this.isOpen()||this.isOpening()||(clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.on(\"error\",this.onOpeningError),this.connecting=!0,this.shouldReconnect=this.autoReconnect,this.connectionAttempts+=1,this.socket=this.setUpSocket(this.socketFactory?this.socketFactory():null))}close(){this.doClose(!1)}write(t){if(this.emit(\"write\",t),this.isOpen())try{this.socket.send(t,this.sendOptions)}catch(t){this.emit(\"error\",t)}}setUpSocket(t){if(t)\"function\"==typeof t&&(this.socketFactory=t,t=t());else{WebSocket||(WebSocket=require(\"ws\"));const e=Object.assign({},this.socketOptions);\"function\"==typeof e.agent&&(e.agent=e.agent()),t=new WebSocket(e.url,null,e)}return t.on(\"open\",this.onSocketOpen),t.on(\"close\",this.onSocketClose),t.on(\"error\",this.onSocketError),t.on(\"message\",this.onSocketMessage),t}destroySocket(t,e){const i=this.socket;null!==i&&(this.socket=null,i.removeListener(\"open\",this.onSocketOpen),i.removeListener(\"close\",this.onSocketClose),i.removeListener(\"error\",this.onSocketError),i.removeListener(\"message\",this.onSocketMessage),t&&i.on(\"error\",()=>{}),e&&i.terminate())}onSocketOpen(t){this.removeListener(\"error\",this.onOpeningError),this.connecting=!1,this.connected=!0,clearTimeout(this.minConnectTimeTimer),this.minConnectTimeTimer=setTimeout(this.onAfterMinConnectTime.bind(this),this.minConnectTime),t||this.emit(\"open\")}onSocketClose(){null!==this.minConnectTimeTimer&&(clearTimeout(this.minConnectTimeTimer),this.minConnectTimeTimer=null),null!==this.noActivityTimer&&(clearInterval(this.noActivityTimer),this.noActivityTimer=null),this.connecting=!1,this.connected=!1,this.destroySocket(!1,!1),this.reconnect(),this.emit(\"close\")}onSocketError(t){this.emit(\"error\",t)}onOpeningError(){this.removeListener(\"error\",this.onOpeningError),this.onSocketClose()}onSocketMessage(t,e){e.binary&&(this.lastDataEventTime=Date.now(),this.emit(\"data\",t))}onAfterMinConnectTime(){this.connectionAttempts=0,this.minConnectTimeTimer=null,this.setUpNoActivityTimer()}setUpNoActivityTimer(){this.noActivityTime>0&&null===this.noActivityTimer&&(this.noActivityTimer=setInterval(this.checkActivity.bind(this),this.noActivityTime))}checkActivity(){Date.now()-this.lastDataEventTime>this.noActivityTime&&(this.connected=!1,this.doClose(!0))}reconnect(){if(!this.shouldReconnect)return;let t=250*this.connectionAttempts;t>this.maxReconnectTime&&(t=this.maxReconnectTime),this.reconnectTimer=setTimeout(this.open.bind(this),t)}doClose(t){this.removeListener(\"error\",this.onOpeningError),this.shouldReconnect=t,null!==this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),null!==this.socket&&this.socket.terminate()}}module.exports=WebSocketConnection;","node_modules/h5.modbus/lib/Listener.js":"\"use strict\";const EventEmitter=require(\"events\").EventEmitter;class Listener extends EventEmitter{constructor(){super()}destroy(){throw new Error(\"@abstract\")}isOpen(){throw new Error(\"@abstract\")}}module.exports=Listener;","node_modules/h5.modbus/lib/listeners/TcpListener.js":"\"use strict\";const Server=require(\"net\").Server,Listener=require(\"../Listener\"),RemoteClient=require(\"../RemoteClient\");require(\"./monkeyPatch\");class TcpListener extends Listener{constructor(e){super(),this.onServerListening=this.onServerListening.bind(this),this.onServerClose=this.onServerClose.bind(this),this.onServerError=this.onServerError.bind(this),this.onServerConnection=this.onServerConnection.bind(this),e||(e={}),this.serverOptions=Object.assign({port:502},e.serverOptions),this.server=this.setUpServer(e.server),this.closeOnDestroy=!1!==e.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==e.suppressErrorsAfterDestroy,this.socketListeners=new Map,this.clients=new Map,!1!==e.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroyClients(),this.destroyServer()}isOpen(){return null!==this.server&&(\"boolean\"==typeof this.server.listening?this.server.listening:void 0===this.server._handle||!!this.server._handle)}isOpening(){return null!==this.server&&!!this.server.binding}open(){this.isOpen()||this.isOpening()||(null===this.server&&(this.server=this.setUpServer(null)),this.server.listen(this.serverOptions))}close(){null!==this.server&&(this.destroyClients(),this.server.close())}setUpServer(e){return e||(e=new Server(this.serverOptions)),e.on(\"listening\",this.onServerListening),e.on(\"close\",this.onServerClose),e.on(\"error\",this.onServerError),e.on(\"connection\",this.onServerConnection),e}destroyServer(){const e=this.server;null!==e&&(this.server=null,e.removeListener(\"listening\",this.onServerListening),e.removeListener(\"close\",this.onServerClose),e.removeListener(\"error\",this.onServerError),e.removeListener(\"connection\",this.onServerConnection),this.suppressErrorsAfterDestroy&&e.on(\"error\",()=>{}),this.closeOnDestroy&&e.close())}onServerListening(){this.emit(\"open\")}onServerClose(){this.destroyClients(),this.emit(\"close\")}onServerError(e){this.emit(\"error\",e)}onServerConnection(e){this.setUpClient(e)}setUpClient(e){const r=new RemoteClient({address:e.remoteAddress,port:e.remotePort,family:e.remoteFamily});r.on(\"close\",this.onClientClose.bind(this,e)),r.on(\"write\",this.onClientWrite.bind(this,e));const s={close:r.destroy.bind(r),error:r.emit.bind(r,\"error\"),readable:function(){for(;;){const s=e.read();if(null===s)break;r.emit(\"data\",s)}}};e.on(\"close\",s.close),e.on(\"error\",s.error),e.on(\"readable\",s.readable),e.setNoDelay(!1!==this.serverOptions.noDelay),this.socketListeners.set(e,s),this.clients.set(e,r),this.emit(\"client\",r)}destroyClients(){this.clients.forEach(e=>e.destroy())}onClientWrite(e,r){const s=this.clients.get(e);if(s)try{e.write(r)}catch(e){s.emit(\"error\",e)}}onClientClose(e){if(!this.clients.get(e))return;const r=this.socketListeners.get(e);e.removeListener(\"close\",r.close),e.removeListener(\"error\",r.error),e.removeListener(\"readable\",r.readable),this.suppressErrorsAfterDestroy&&e.on(\"error\",()=>{}),e.destroy(),this.socketListeners.delete(e),this.clients.delete(e)}}module.exports=TcpListener;","node_modules/h5.modbus/lib/listeners/UdpListener.js":"\"use strict\";const dgram=require(\"dgram\"),Listener=require(\"../Listener\"),RemoteClient=require(\"../RemoteClient\"),BIND_STATE_BINDING=1,BIND_STATE_BOUND=2;class UdpListener extends Listener{constructor(e){super(),this.onSocketListening=this.onSocketListening.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),e||(e={}),this.socketOptions=Object.assign({port:502},e.socketOptions),this.socket=this.setUpSocket(e.socket),this.clientTimeout=e.clientTimeout>0?e.clientTimeout:3e4,this.closeOnDestroy=!1!==e.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==e.suppressErrorsAfterDestroy,this.clients=new Map,!1!==e.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroyClients(),this.destroySocket()}isOpen(){return null!==this.socket&&this.socket._bindState===BIND_STATE_BOUND}isOpening(){return null!==this.socket&&this.socket._bindState===BIND_STATE_BINDING}open(){this.isOpen()||this.isOpening()||(null===this.socket&&(this.socket=this.setUpSocket(null)),this.socket.bind({port:this.socketOptions.port,address:this.socketOptions.host,exclusive:!0===this.socketOptions.exclusive}))}close(){null!==this.socket&&(this.destroyClients(),this.socket.close())}setUpSocket(e){return e||(e=dgram.createSocket({type:6===this.socketOptions.family?\"udp6\":\"udp4\",reuseAddr:!0===this.socketOptions.reuseAddress})),e.on(\"listening\",this.onSocketListening),e.on(\"close\",this.onSocketClose),e.on(\"error\",this.onSocketError),e.on(\"message\",this.onSocketMessage),e}destroySocket(){const e=this.socket;null!==e&&(this.socket=null,e.removeListener(\"listening\",this.onSocketListening),e.removeListener(\"close\",this.onSocketClose),e.removeListener(\"error\",this.onSocketError),e.removeListener(\"message\",this.onSocketMessage),this.suppressErrorsAfterDestroy&&e.on(\"error\",()=>{}),this.closeOnDestroy&&e.close())}onSocketListening(){this.emit(\"open\")}onSocketClose(){this.destroyClients(),this.emit(\"close\")}onSocketError(e){this.emit(\"error\",e)}onSocketMessage(e,t){const s=this.setUpClient(t);s.rescheduleTimeout(),s.emit(\"data\",e)}getRemoteClientKey(e){return`${e.address}@${e.port}`}setUpClient(e){const t=this.getRemoteClientKey(e),s=this.clients.get(t);if(s)return s;const i={address:e.address,port:e.port,family:e.family},o=new UdpRemoteClient(i,this.clientTimeout);return o.on(\"write\",this.onClientWrite.bind(this,t)),this.clients.set(t,o),this.emit(\"client\",o),o}destroyClients(){this.clients.forEach(e=>e.destroy())}onClientWrite(e,t){const s=this.clients.get(e);if(s)try{this.socket.send(t,0,t.length,s.remoteInfo.port,s.remoteInfo.address)}catch(e){s.emit(\"error\",e)}}onClientDestroy(e){this.clients.delete(e)}}class UdpRemoteClient extends RemoteClient{constructor(e,t){super(e),this.timeout=t,this.timeoutTimer=null}destroy(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),super.destroy()}rescheduleTimeout(){this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.timeoutTimer=setTimeout(this.destroy.bind(this),this.timeout)}}module.exports=UdpListener;","node_modules/h5.modbus/lib/listeners/SerialListener.js":"\"use strict\";const Listener=require(\"../Listener\"),RemoteClient=require(\"../RemoteClient\");let SerialPort=null;class SerialListener extends Listener{constructor(e){super(),this.onSerialOpen=this.onSerialOpen.bind(this),this.onSerialClose=this.onSerialClose.bind(this),this.onSerialError=this.onSerialError.bind(this),this.onSerialReadable=this.onSerialReadable.bind(this),e||(e={}),this.serialPortOptions=Object.assign({path:\"win32\"===process.platform?\"COM1\":\"/dev/ttys0\"},e.serialPortOptions,{autoOpen:!1}),this.serialPort=this.setUpSerialPort(e.serialPort),this.closeOnDestroy=!1!==e.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==e.suppressErrorsAfterDestroy,this.client=null,this.setUpClientTimer=null,this.isOpen()?this.setUpClientTimer=setImmediate(this.setUpClient.bind(this)):!1!==e.autoOpen&&this.open()}destroy(){null!==this.setUpClientTimer&&(clearImmediate(this.setUpClientTimer),this.setUpClientTimer=null),this.removeAllListeners(),this.destroyClient(),this.destroySerialPort()}isOpen(){return null!==this.serialPort&&this.serialPort.isOpen}isOpening(){return null!==this.serialPort&&this.serialPort.opening}open(){this.isOpen()||this.isOpening()||(null===this.serialPort&&(this.serialPort=this.setUpSerialPort(null)),this.serialPort.open())}close(){null!==this.serialPort&&(this.destroyClient(),this.serialPort.close())}setUpSerialPort(e){return e||(null===SerialPort&&(SerialPort=require(\"serialport\")),e=new SerialPort(this.serialPortOptions.path,this.serialPortOptions)),e.on(\"open\",this.onSerialOpen),e.on(\"close\",this.onSerialClose),e.on(\"error\",this.onSerialError),e.on(\"readable\",this.onSerialReadable),e}destroySerialPort(){const e=this.serialPort;null!==e&&(e.removeListener(\"open\",this.onSerialOpen),e.removeListener(\"close\",this.onSerialClose),e.removeListener(\"error\",this.onSerialError),e.removeListener(\"readable\",this.onSerialReadable),this.suppressErrorsAfterDestroy&&e.on(\"error\",()=>{}),this.closeOnDestroy&&e.close(),this.serialPort=null)}onSerialOpen(){this.emit(\"open\"),this.setUpClient()}onSerialClose(){this.destroyClient(),this.emit(\"close\")}onSerialError(e){this.emit(\"error\",e)}onSerialReadable(){if(this.client&&this.serialPort)for(;;){const e=this.serialPort.read();if(null===e)break;this.client.emit(\"data\",e)}}setUpClient(){null!==this.setUpClientTimer&&(clearImmediate(this.setUpClientTimer),this.setUpClientTimer=null),this.destroyClient(),this.client=new RemoteClient({path:this.serialPort.path}),this.client.on(\"close\",this.onClientClose.bind(this)),this.client.on(\"write\",this.onClientWrite.bind(this)),this.emit(\"client\",this.client)}destroyClient(){null!==this.client&&this.client.destroy()}onClientWrite(e){if(null!==this.serialPort)try{this.serialPort.write(e)}catch(e){this.client.emit(\"error\",e)}}onClientClose(){this.client=null}}module.exports=SerialListener;","node_modules/h5.modbus/lib/listeners/WebSocketListener.js":"\"use strict\";const fs=require(\"fs\"),http=require(\"http\"),https=require(\"https\"),Listener=require(\"../Listener\"),RemoteClient=require(\"../RemoteClient\");require(\"./monkeyPatch\");let WebSocketServer=null;class WebSocketListener extends Listener{constructor(e){super(),this.onServerListening=this.onServerListening.bind(this),this.onServerClose=this.onServerClose.bind(this),this.onServerError=this.onServerError.bind(this),this.onServerConnection=this.onServerConnection.bind(this),e||(e={}),this.serverOptions=Object.assign({port:502},e.serverOptions),this.httpServer=null,this.wsServer=null,this.closeOnDestroy=!1!==e.closeOnDestroy,this.suppressErrorsAfterDestroy=!1!==e.suppressErrorsAfterDestroy,this.socketListeners=new Map,this.clients=new Map,this.setUpServers(e.server),!1!==e.autoOpen&&this.open()}destroy(){this.removeAllListeners(),this.destroyClients(),this.destroyServers()}isOpen(){return null!==this.httpServer&&(\"boolean\"==typeof this.httpServer.listening?this.httpServer.listening:void 0===this.httpServer._handle||!!this.httpServer._handle)}isOpening(){return null!==this.httpServer&&!!this.httpServer.binding}open(){this.isOpen()||this.isOpening()||(null===this.httpServer&&this.setUpServers(null),this.httpServer.listen(this.serverOptions))}close(){null!==this.wsServer&&(this.destroyClients(),this.wsServer.close())}setUpServers(e){let r=null;if(e)r=e._server;else{const t=this.serverOptions;r=t.server?t.server:this.createHttpServer(t),WebSocketServer||(WebSocketServer=require(\"ws\").Server),e=new WebSocketServer({server:r,path:t.path,verifyClient:t.verifyClient,handleProtocols:t.handleProtocols,perMessageDeflate:t.perMessageDeflate,maxPayload:t.maxPayload,disableHixie:!0,clientTracking:!1})}r.on(\"listening\",this.onServerListening),r.on(\"close\",this.onServerClose),e.on(\"error\",this.onServerError),e.on(\"connection\",this.onServerConnection),this.wsServer=e,this.httpServer=r}createHttpServer(e){if(!e.key||!e.cert||!e.pfx)return http.createServer();const r=/\\.(pem|crt|pfx)$/;return[\"key\",\"cert\",\"pfx\"].forEach(t=>{const s=e[t];\"string\"==typeof s&&r.test(s)&&(e[t]=fs.readFileSync(s))}),https.createServer(e)}destroyServers(){const e=this.wsServer;if(null===e)return;const r=this.httpServer;this.wsServer=null,this.httpServer=null,r.removeListener(\"listening\",this.onServerListening),r.removeListener(\"close\",this.onServerClose),e.removeListener(\"error\",this.onServerError),e.removeListener(\"connection\",this.onServerConnection),this.suppressErrorsAfterDestroy&&(e.on(\"error\",()=>{}),r.on(\"error\",()=>{})),this.closeOnDestroy&&(e.close(),r.close())}onServerListening(){this.emit(\"open\")}onServerClose(){this.destroyClients(),this.emit(\"close\")}onServerError(e){this.emit(\"error\",e)}onServerConnection(e){this.setUpClient(e)}setUpClient(e){const r=e.upgradeReq.socket,t=new WebSocketRemoteClient({address:r.remoteAddress,port:r.remotePort,family:r.remoteFamily});t.on(\"close\",this.onClientClose.bind(this,e)),t.on(\"write\",this.onClientWrite.bind(this,e));const s={close:t.destroy.bind(t),error:t.emit.bind(t,\"error\"),message:function(e,r){r.binary&&(t.masked=r.masked,t.emit(\"data\",e))}};e.on(\"close\",s.close),e.on(\"error\",s.error),e.on(\"message\",s.message),this.socketListeners.set(e,s),this.clients.set(e,t),this.emit(\"client\",t)}destroyClients(){this.clients.forEach(e=>e.destroy())}onClientWrite(e,r){const t=this.clients.get(e);if(t)try{e.send(r,{binary:!0,mask:t.masked})}catch(e){t.emit(\"error\",e)}}onClientClose(e){if(!this.clients.get(e))return;const r=this.socketListeners.get(e);e.removeListener(\"close\",r.close),e.removeListener(\"error\",r.error),e.removeListener(\"message\",r.message),this.suppressErrorsAfterDestroy&&e.on(\"error\",()=>{}),e.terminate(),this.socketListeners.delete(e),this.clients.delete(e)}}class WebSocketRemoteClient extends RemoteClient{constructor(e){super(e),this.masked=!0}}module.exports=WebSocketListener;","node_modules/h5.modbus/lib/messages/index.js":"\"use strict\";const FunctionCode=require(\"../FunctionCode\"),requests={},responses={};exports.requests=requests,exports.responses=responses,exports.ReadDiscreteInputsRequest=requests[FunctionCode.ReadDiscreteInputs]=require(\"./ReadDiscreteInputsRequest\"),exports.ReadDiscreteInputsResponse=responses[FunctionCode.ReadDiscreteInputs]=require(\"./ReadDiscreteInputsResponse\"),exports.ReadCoilsRequest=requests[FunctionCode.ReadCoils]=require(\"./ReadCoilsRequest\"),exports.ReadCoilsResponse=responses[FunctionCode.ReadCoils]=require(\"./ReadCoilsResponse\"),exports.WriteSingleCoilRequest=requests[FunctionCode.WriteSingleCoil]=require(\"./WriteSingleCoilRequest\"),exports.WriteSingleCoilResponse=responses[FunctionCode.WriteSingleCoil]=require(\"./WriteSingleCoilResponse\"),exports.WriteMultipleCoilsRequest=requests[FunctionCode.WriteMultipleCoils]=require(\"./WriteMultipleCoilsRequest\"),exports.WriteMultipleCoilsResponse=responses[FunctionCode.WriteMultipleCoils]=require(\"./WriteMultipleCoilsResponse\"),exports.ReadInputRegistersRequest=requests[FunctionCode.ReadInputRegisters]=require(\"./ReadInputRegistersRequest\"),exports.ReadInputRegistersResponse=responses[FunctionCode.ReadInputRegisters]=require(\"./ReadInputRegistersResponse\"),exports.ReadHoldingRegistersRequest=requests[FunctionCode.ReadHoldingRegisters]=require(\"./ReadHoldingRegistersRequest\"),exports.ReadHoldingRegistersResponse=responses[FunctionCode.ReadHoldingRegisters]=require(\"./ReadHoldingRegistersResponse\"),exports.WriteSingleRegisterRequest=requests[FunctionCode.WriteSingleRegister]=require(\"./WriteSingleRegisterRequest\"),exports.WriteSingleRegisterResponse=responses[FunctionCode.WriteSingleRegister]=require(\"./WriteSingleRegisterResponse\"),exports.WriteMultipleRegistersRequest=requests[FunctionCode.WriteMultipleRegisters]=require(\"./WriteMultipleRegistersRequest\"),exports.WriteMultipleRegistersResponse=responses[FunctionCode.WriteMultipleRegisters]=require(\"./WriteMultipleRegistersResponse\"),exports.ReadWriteMultipleRegistersRequest=requests[FunctionCode.ReadWriteMultipleRegisters]=require(\"./ReadWriteMultipleRegistersRequest\"),exports.ReadWriteMultipleRegistersResponse=responses[FunctionCode.ReadWriteMultipleRegisters]=require(\"./ReadWriteMultipleRegistersResponse\"),exports.ExceptionResponse=responses[FunctionCode.Exception]=require(\"./ExceptionResponse\");","node_modules/h5.modbus/lib/Message.js":"\"use strict\";class Message{constructor(r){this.functionCode=r}static fromOptions(r){throw new Error(\"@abstract\")}static fromBuffer(r){throw new Error(\"@abstract\")}toBuffer(){throw new Error(\"@abstract\")}toString(){throw new Error(\"@abstract\")}}module.exports=Message;","node_modules/h5.modbus/lib/Request.js":"\"use strict\";const Message=require(\"./Message\");class Request extends Message{constructor(e){super(e)}}module.exports=Request;","node_modules/h5.modbus/lib/Response.js":"\"use strict\";const Message=require(\"./Message\");class Response extends Message{constructor(e){super(e)}isException(){return!1}}module.exports=Response;","node_modules/h5.modbus/lib/messages/ReadDiscreteInputsRequest.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class ReadDiscreteInputsRequest extends Request{constructor(e,t){super(FunctionCode.ReadDiscreteInputs),this.quantity=helpers.prepareQuantity(t,2e3),this.startingAddress=helpers.prepareAddress(e,this.quantity)}static fromOptions(e){return new ReadDiscreteInputsRequest(e.startingAddress,e.quantity)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.ReadDiscreteInputs),new ReadDiscreteInputsRequest(e.readUInt16BE(1),e.readUInt16BE(3))}get endingAddress(){return this.startingAddress+this.quantity}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.startingAddress,1),e.writeUInt16BE(this.quantity,3),e}toString(){return helpers.formatRequest(this,`Read ${this.quantity} inputs starting from address ${this.startingAddress}`)}}module.exports=ReadDiscreteInputsRequest;","node_modules/h5.modbus/lib/messages/ReadDiscreteInputsResponse.js":"\"use strict\";const buffers=require(\"h5.buffers\"),helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class ReadDiscreteInputsResponse extends Response{constructor(e){if(super(FunctionCode.ReadDiscreteInputs),0===e.length||e.length>2e3)throw new Error(`Invalid states array. Expected length between 1 and 2000, got [${e.length}].`);this.states=e}static fromOptions(e){return new ReadDiscreteInputsResponse(e.states)}static fromBuffer(e){helpers.assertFunctionCode(e[0],FunctionCode.ReadDiscreteInputs);const t=helpers.toBitArray(e,2,8*e[1]);return new ReadDiscreteInputsResponse(t)}get quantity(){return this.states.length}toBuffer(){return(new buffers.BufferBuilder).pushByte(this.functionCode).pushByte(Math.ceil(this.states.length/8)).pushBits(this.states).toBuffer()}toString(){return helpers.formatResponse(this,`${this.quantity} inputs: ${this.states.map(Number).join(\", \")}`)}isOn(e){if(e<0||e>=this.quantity)throw new RangeError(`Offset out of bounds: ${e}`);return!!this.states[e]}isOff(e){if(e<0||e>=this.quantity)throw new RangeError(`Offset out of bounds: ${e}`);return!this.states[e]}}module.exports=ReadDiscreteInputsResponse;","node_modules/h5.modbus/lib/messages/ReadCoilsRequest.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class ReadCoilsRequest extends Request{constructor(e,t){super(FunctionCode.ReadCoils),this.quantity=helpers.prepareQuantity(t,2e3),this.startingAddress=helpers.prepareAddress(e,this.quantity)}static fromOptions(e){return new ReadCoilsRequest(e.startingAddress,e.quantity)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.ReadCoils),new ReadCoilsRequest(e.readUInt16BE(1),e.readUInt16BE(3))}get endingAddress(){return this.startingAddress+this.quantity}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.startingAddress,1),e.writeUInt16BE(this.quantity,3),e}toString(){return helpers.formatRequest(this,`Read ${this.quantity} coils starting from address ${this.startingAddress}`)}}module.exports=ReadCoilsRequest;","node_modules/h5.modbus/lib/messages/ReadCoilsResponse.js":"\"use strict\";const buffers=require(\"h5.buffers\"),helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class ReadCoilsResponse extends Response{constructor(e){if(super(FunctionCode.ReadCoils),0===e.length||e.length>2e3)throw new Error(`Invalid states array. Expected length between 1 and 2000, got [${e.length}].`);this.states=e}static fromOptions(e){return new ReadCoilsResponse(e.states)}static fromBuffer(e){helpers.assertFunctionCode(e[0],FunctionCode.ReadCoils);const t=helpers.toBitArray(e,2,8*e[1]);return new ReadCoilsResponse(t)}get quantity(){return this.states.length}toBuffer(){return(new buffers.BufferBuilder).pushByte(this.functionCode).pushByte(Math.ceil(this.states.length/8)).pushBits(this.states).toBuffer()}toString(){return helpers.formatResponse(this,`${this.quantity} coils: ${this.states.map(Number).join(\", \")}`)}isOn(e){if(e<0||e>=this.states.length)throw new RangeError(`Offset out of bounds: ${e}`);return!!this.states[e]}isOff(e){if(e<0||e>=this.states.length)throw new RangeError(`Offset out of bounds: ${e}`);return!this.states[e]}}module.exports=ReadCoilsResponse;","node_modules/h5.modbus/lib/messages/WriteSingleCoilRequest.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class WriteSingleCoilRequest extends Request{constructor(e,t){super(FunctionCode.WriteSingleCoil),this.address=helpers.prepareAddress(e,1),this.state=!!t}static fromOptions(e){return new WriteSingleCoilRequest(e.address,e.state)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.WriteSingleCoil),new WriteSingleCoilRequest(e.readUInt16BE(1),65280===e.readUInt16BE(3))}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.address,1),e.writeUInt16BE(this.state?65280:0,3),e}toString(){return helpers.formatRequest(this,`Set coil at address ${this.address} to ${this.state?\"ON\":\"OFF\"}.`)}}module.exports=WriteSingleCoilRequest;","node_modules/h5.modbus/lib/messages/WriteSingleCoilResponse.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class WriteSingleCoilResponse extends Response{constructor(e,s){super(FunctionCode.WriteSingleCoil),this.address=helpers.prepareAddress(e,1),this.state=!!s}static fromOptions(e){return new WriteSingleCoilResponse(e.address,e.state)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.WriteSingleCoil),new WriteSingleCoilResponse(e.readUInt16BE(1),65280===e.readUInt16BE(3))}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.address,1),e.writeUInt16BE(this.state?65280:0,3),e}toString(){return helpers.formatResponse(this,`Coil at address ${this.address} was set to ${this.state?\"ON\":\"OFF\"}.`)}}module.exports=WriteSingleCoilResponse;","node_modules/h5.modbus/lib/messages/WriteMultipleCoilsRequest.js":"\"use strict\";const buffers=require(\"h5.buffers\"),helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class WriteMultipleCoilsRequest extends Request{constructor(t,e){if(super(FunctionCode.WriteMultipleCoils),e.length<1||e.length>1968)throw new Error(`Invalid coil states. Expected an array with 1 to 1968 elements, but got [${e.length}].`);this.startingAddress=helpers.prepareAddress(t,e.length),this.states=e}static fromOptions(t){return new WriteMultipleCoilsRequest(t.startingAddress,t.states)}static fromBuffer(t){const e=new buffers.BufferReader(t);helpers.assertFunctionCode(e.shiftByte(),FunctionCode.WriteMultipleCoils);const s=e.shiftUInt16(),r=e.shiftUInt16();e.skip(1);const i=e.shiftBits(r);return new WriteMultipleCoilsRequest(s,i)}get endingAddress(){return this.startingAddress+this.quantity}get quantity(){return this.states.length}toBuffer(){return(new buffers.BufferBuilder).pushByte(15).pushUInt16(this.startingAddress).pushUInt16(this.states.length).pushByte(Math.ceil(this.states.length/8)).pushBits(this.states).toBuffer()}toString(){if(1===this.quantity)return helpers.formatRequest(this,`Set coil at address ${this.startingAddress} to ${this.states[0]?\"ON\":\"OFF\"}.`);const t=this.states.map(t=>t?\"1\":\"0\").join(\", \");return helpers.formatRequest(this,`Set ${this.quantity} coils starting at address ${this.startingAddress} to: ${t}`)}}module.exports=WriteMultipleCoilsRequest;","node_modules/h5.modbus/lib/messages/WriteMultipleCoilsResponse.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class WriteMultipleCoilsResponse extends Response{constructor(e,t){super(FunctionCode.WriteMultipleCoils),this.quantity=helpers.prepareQuantity(t,1968),this.startingAddress=helpers.prepareAddress(e,this.quantity)}static fromOptions(e){return new WriteMultipleCoilsResponse(e.startingAddress,e.quantity)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.WriteMultipleCoils),new WriteMultipleCoilsResponse(e.readUInt16BE(1),e.readUInt16BE(3))}get endingAddress(){return this.startingAddress+this.quantity}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.startingAddress,1),e.writeUInt16BE(this.quantity,3),e}toString(){return 1===this.quantity?helpers.formatResponse(this,`Set coil at address ${this.startingAddress}.`):helpers.formatResponse(this,`Set ${this.quantity} coils starting at address ${this.startingAddress}.`)}}module.exports=WriteMultipleCoilsResponse;","node_modules/h5.modbus/lib/messages/ReadInputRegistersRequest.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class ReadInputRegistersRequest extends Request{constructor(t,e){super(FunctionCode.ReadInputRegisters),this.quantity=helpers.prepareQuantity(e,125),this.startingAddress=helpers.prepareAddress(t,this.quantity)}static fromOptions(t){return new ReadInputRegistersRequest(t.startingAddress,t.quantity)}static fromBuffer(t){return helpers.assertBufferLength(t,5),helpers.assertFunctionCode(t[0],FunctionCode.ReadInputRegisters),new ReadInputRegistersRequest(t.readUInt16BE(1),t.readUInt16BE(3))}get endingAddress(){return this.startingAddress+this.quantity}get startingIndex(){return 2*this.startingAddress}get endingIndex(){return this.startingIndex+2*this.quantity}toBuffer(){const t=Buffer.allocUnsafe(5);return t[0]=this.functionCode,t.writeUInt16BE(this.startingAddress,1),t.writeUInt16BE(this.quantity,3),t}toString(){return helpers.formatRequest(this,`Read ${this.quantity} input registers starting from address ${this.startingAddress}`)}}module.exports=ReadInputRegistersRequest;","node_modules/h5.modbus/lib/messages/ReadInputRegistersResponse.js":"\"use strict\";const inspect=require(\"util\").inspect,helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class ReadInputRegistersResponse extends Response{constructor(e){if(super(FunctionCode.ReadInputRegisters),e.length%2!=0||e.length<2||e.length>250)throw new Error(`The length of the data buffer must be an even number between 2 and 250, but got [${e.length}].`);this.data=e,this.quantity=e.length/2}static fromOptions(e){return new ReadInputRegistersResponse(e.data)}static fromBuffer(e){helpers.assertBufferLength(e,4),helpers.assertFunctionCode(e[0],FunctionCode.ReadInputRegisters);const t=e[1],s=e.slice(2,t+2);return new ReadInputRegistersResponse(s)}toBuffer(){const e=Buffer.allocUnsafe(2+this.data.length);return e[0]=this.functionCode,e[1]=this.data.length,this.data.copy(e,2),e}toString(){return helpers.formatResponse(this,`${this.quantity} input registers: ${inspect(this.data)}`)}}module.exports=ReadInputRegistersResponse;","node_modules/h5.modbus/lib/messages/ReadHoldingRegistersRequest.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class ReadHoldingRegistersRequest extends Request{constructor(e,t){super(FunctionCode.ReadHoldingRegisters),this.quantity=helpers.prepareQuantity(t,125),this.startingAddress=helpers.prepareAddress(e,this.quantity)}static fromOptions(e){return new ReadHoldingRegistersRequest(e.startingAddress,e.quantity)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.ReadHoldingRegisters),new ReadHoldingRegistersRequest(e.readUInt16BE(1),e.readUInt16BE(3))}get endingAddress(){return this.startingAddress+this.quantity}get startingIndex(){return 2*this.startingAddress}get endingIndex(){return this.startingIndex+2*this.quantity}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.startingAddress,1),e.writeUInt16BE(this.quantity,3),e}toString(){return helpers.formatRequest(this,`Read ${this.quantity} holding registers starting from address ${this.startingAddress}`)}}module.exports=ReadHoldingRegistersRequest;","node_modules/h5.modbus/lib/messages/ReadHoldingRegistersResponse.js":"\"use strict\";const inspect=require(\"util\").inspect,helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class ReadHoldingRegistersResponse extends Response{constructor(e){if(super(FunctionCode.ReadHoldingRegisters),e.length%2!=0||e.length<2||e.length>250)throw new Error(`The length of the data buffer must be an even number between 2 and 250, but got [${e.length}].`);this.data=e,this.quantity=e.length/2}static fromOptions(e){return new ReadHoldingRegistersResponse(e.data)}static fromBuffer(e){helpers.assertBufferLength(e,4),helpers.assertFunctionCode(e[0],FunctionCode.ReadHoldingRegisters);const t=e[1],s=e.slice(2,t+2);return new ReadHoldingRegistersResponse(s)}toBuffer(){const e=Buffer.allocUnsafe(2+this.data.length);return e[0]=this.functionCode,e[1]=this.data.length,this.data.copy(e,2),e}toString(){return helpers.formatResponse(this,`${this.quantity} holding registers: ${inspect(this.data)}`)}}module.exports=ReadHoldingRegistersResponse;","node_modules/h5.modbus/lib/messages/WriteSingleRegisterRequest.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class WriteSingleRegisterRequest extends Request{constructor(e,t){super(FunctionCode.WriteSingleRegister),this.address=helpers.prepareAddress(e,1),this.value=helpers.prepareRegisterValue(t)}static fromOptions(e){return new WriteSingleRegisterRequest(e.address,e.value)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.WriteSingleRegister),new WriteSingleRegisterRequest(e.readUInt16BE(1),e.readUInt16BE(3))}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.address,1),e.writeUInt16BE(this.value,3),e}toString(){return helpers.formatRequest(this,`Set register at address ${this.address} to: ${this.value}`)}}module.exports=WriteSingleRegisterRequest;","node_modules/h5.modbus/lib/messages/WriteSingleRegisterResponse.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class WriteSingleRegisterResponse extends Response{constructor(e,s){super(FunctionCode.WriteSingleRegister),this.address=helpers.prepareAddress(e,1),this.value=helpers.prepareRegisterValue(s)}static fromOptions(e){return new WriteSingleRegisterResponse(e.address,e.value)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.WriteSingleRegister),new WriteSingleRegisterResponse(e.readUInt16BE(1),e.readUInt16BE(3))}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.address,1),e.writeUInt16BE(this.value,3),e}toString(){return helpers.formatResponse(this,`Register at address ${this.address} was set to: ${this.value}`)}}module.exports=WriteSingleRegisterResponse;","node_modules/h5.modbus/lib/messages/WriteMultipleRegistersRequest.js":"\"use strict\";const inspect=require(\"util\").inspect,helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class WriteMultipleRegistersRequest extends Request{constructor(e,t){super(FunctionCode.WriteMultipleRegisters),this.values=helpers.prepareRegisterValues(t),this.startingAddress=helpers.prepareAddress(e,this.quantity)}static fromOptions(e){return new WriteMultipleRegistersRequest(e.startingAddress,e.values)}static fromBuffer(e){helpers.assertBufferLength(e,6+(e[5]||2)),helpers.assertFunctionCode(e[0],FunctionCode.WriteMultipleRegisters);const t=e.readUInt16BE(1),s=e[5],r=e.slice(6,6+s);return new WriteMultipleRegistersRequest(t,r)}get endingAddress(){return this.startingAddress+this.quantity}get quantity(){return this.values.length/2}toBuffer(){const e=Buffer.allocUnsafe(6+this.values.length);return e[0]=this.functionCode,e.writeUInt16BE(this.startingAddress,1),e.writeUInt16BE(this.quantity,3),e[5]=this.values.length,this.values.copy(e,6),e}toString(){return 1===this.quantity?helpers.formatRequest(this,`Write register at address ${this.startingAddress} to ${this.values.readUInt16BE(0)}.`):helpers.formatRequest(this,`Write ${this.quantity} registers starting at address ${this.startingAddress} to: ${inspect(this.values)}`)}}module.exports=WriteMultipleRegistersRequest;","node_modules/h5.modbus/lib/messages/WriteMultipleRegistersResponse.js":"\"use strict\";const helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class WriteMultipleRegistersResponse extends Response{constructor(e,t){super(FunctionCode.WriteMultipleRegisters),this.quantity=helpers.prepareQuantity(t,123),this.startingAddress=helpers.prepareAddress(e,this.quantity)}static fromOptions(e){return new WriteMultipleRegistersResponse(e.startingAddress,e.quantity)}static fromBuffer(e){return helpers.assertBufferLength(e,5),helpers.assertFunctionCode(e[0],FunctionCode.WriteMultipleRegisters),new WriteMultipleRegistersResponse(e.readUInt16BE(1),e.readUInt16BE(3))}get endingAddress(){return this.startingAddress+this.quantity}toBuffer(){const e=Buffer.allocUnsafe(5);return e[0]=this.functionCode,e.writeUInt16BE(this.startingAddress,1),e.writeUInt16BE(this.quantity,3),e}toString(){return 1===this.quantity?helpers.formatResponse(this,`Set register at address ${this.startingAddress}.`):helpers.formatResponse(this,`Set ${this.quantity} registers starting at address ${this.startingAddress}.`)}}module.exports=WriteMultipleRegistersResponse;","node_modules/h5.modbus/lib/messages/ReadWriteMultipleRegistersRequest.js":"\"use strict\";const inspect=require(\"util\").inspect,helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Request=require(\"../Request\");class ReadWriteMultipleRegistersRequest extends Request{constructor(e,t,r,s){super(FunctionCode.ReadWriteMultipleRegisters),this.readQuantity=helpers.prepareQuantity(t,125),this.readStartingAddress=helpers.prepareAddress(e,this.readQuantity),this.writeValues=helpers.prepareRegisterValues(s,242),this.writeStartingAddress=helpers.prepareAddress(r,this.writeQuantity)}static fromOptions(e){return new ReadWriteMultipleRegistersRequest(e.readStartingAddress,e.readQuantity,e.writeStartingAddress,e.writeValues)}static fromBuffer(e){helpers.assertBufferLength(e,10+(e[9]||2)),helpers.assertFunctionCode(e[0],FunctionCode.ReadWriteMultipleRegisters);const t=e.readUInt16BE(1),r=e.readUInt16BE(3),s=e.readUInt16BE(5),i=e[9],n=e.slice(10,10+i);return new ReadWriteMultipleRegistersRequest(t,r,s,n)}get readEndingAddress(){return this.readStartingAddress+this.readQuantity}get readStartingIndex(){return 2*this.readStartingAddress}get readEndingIndex(){return this.readStartingIndex+2*this.readQuantity}get writeEndingAddress(){return this.writeStartingAddress+this.writeQuantity}get writeQuantity(){return this.writeValues.length/2}toBuffer(){const e=Buffer.allocUnsafe(10+this.writeValues.length);return e[0]=this.functionCode,e.writeUInt16BE(this.readStartingAddress,1),e.writeUInt16BE(this.readQuantity,3),e.writeUInt16BE(this.writeStartingAddress,5),e.writeUInt16BE(this.writeQuantity,7),e[9]=this.writeValues.length,this.writeValues.copy(e,10),e}toString(){return helpers.formatRequest(this,`Read ${this.readQuantity} holding registers starting from address ${this.readStartingAddress} and `+`write ${this.writeQuantity} registers starting at address ${this.writeStartingAddress} to: `+inspect(this.values))}}module.exports=ReadWriteMultipleRegistersRequest;","node_modules/h5.modbus/lib/messages/ReadWriteMultipleRegistersResponse.js":"\"use strict\";const inspect=require(\"util\").inspect,helpers=require(\"../helpers\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\");class ReadWriteMultipleRegistersResponse extends Response{constructor(e){if(super(FunctionCode.ReadWriteMultipleRegisters),e.length%2!=0||e.length<2||e.length>242)throw new Error(`The length of the data buffer must be an even number between 2 and 242, but got [${e.length}].`);this.data=e,this.quantity=e.length/2}static fromOptions(e){return new ReadWriteMultipleRegistersResponse(e.data)}static fromBuffer(e){helpers.assertBufferLength(e,2+(e[1]||2)),helpers.assertFunctionCode(e[0],FunctionCode.ReadWriteMultipleRegisters);const t=e[1],s=e.slice(2,t+2);return new ReadWriteMultipleRegistersResponse(s)}toBuffer(){const e=Buffer.allocUnsafe(2+this.data.length);return e[0]=this.functionCode,e[1]=this.data.length,this.data.copy(e,2),e}toString(){return helpers.formatResponse(this,`${this.quantity} holding registers: ${inspect(this.data)}`)}}module.exports=ReadWriteMultipleRegistersResponse;","node_modules/h5.modbus/lib/messages/ExceptionResponse.js":"\"use strict\";const ExceptionCode=require(\"../ExceptionCode\"),FunctionCode=require(\"../FunctionCode\"),Response=require(\"../Response\"),helpers=require(\"../helpers\"),CODE_TO_MESSAGE_MAP={[ExceptionCode.IllegalFunctionCode]:\"Illegal Function Code: The function code received in the query is not an allowable action for the server (or slave).\",[ExceptionCode.IllegalDataAddress]:\"Illegal Data Address: The data address received in the query is not an allowable address for the server (or slave).\",[ExceptionCode.IllegalDataValue]:\"Illegal Data Value: A value contained in the query data field is not an allowable value for the server (or slave).\",[ExceptionCode.SlaveDeviceFailure]:\"Slave Device Failure: An unrecoverable error occurred while the server (or slave) was attempting to perform the requested action.\",[ExceptionCode.Acknowledge]:\"Acknowledge: The server (or slave) has accepted the request and is processing it, but a long duration of time will be required to do so.\",[ExceptionCode.SlaveDeviceBusy]:\"Slave Device Busy: The server (or slave) is engaged in processing a longduration program command.\",[ExceptionCode.NegativeAcknowledge]:\"Negative Acknowledge: The server (or slave) cannot perform the program function received in the query.\",[ExceptionCode.MemoryParityError]:\"Memory Parity Error: The server (or slave) attempted to read record file, but detected a parity error in the memory.\",[ExceptionCode.GatewayPathUnavailable]:\"Gateway Path Unavailable: Gateway was unable to allocate an internal communication path from the input port to the output port for processing the request.\",[ExceptionCode.GatewayTargetDeviceFailedToRespond]:\"Gateway Target Device Failed To Respond: No response was obtained from the target device.\"};class ExceptionResponse extends Response{constructor(e,o){super(e),this.exceptionCode=o}static fromOptions(e){return new ExceptionResponse(e.functionCode,e.exceptionCode)}static fromBuffer(e){if(helpers.assertBufferLength(e,2),e[0]<=FunctionCode.Exception)throw new Error(\"Invalid function code. \"+`Expected an integer greater than ${FunctionCode.Exception}, got [${e[0]}].`);return new ExceptionResponse(e[0]-FunctionCode.Exception,e[1])}toBuffer(){return Buffer.from([this.functionCode+FunctionCode.Exception,this.exceptionCode])}toString(){let e=`Exception (${this.exceptionCode})`;return void 0!==CODE_TO_MESSAGE_MAP[this.exceptionCode]&&(e+=`: ${CODE_TO_MESSAGE_MAP[this.exceptionCode]}`),`${helpers.formatFunctionCode(this.functionCode)} (RES) ${e}`}isException(){return!0}}module.exports=ExceptionResponse;","node_modules/h5.buffers/lib/index.js":"exports.BufferQueueReader=require(\"./BufferQueueReader\"),exports.BufferReader=require(\"./BufferReader\"),exports.BufferBuilder=require(\"./BufferBuilder\");","node_modules/h5.buffers/lib/BufferQueueReader.js":"\"use strict\";var toBits=require(\"./helpers\").toBits;function BufferQueueReader(){this.length=0,this.offset=0,this.buffers=[];for(var e=0,t=arguments.length;e<t;++e)this.push(arguments[e])}function shiftUInt(e,t,r){if(e.length<t)throw new Error(\"The reader's length is less than \"+t+\" bytes.\");e.length-=t;for(var n=0,f=-8;t--;){var u=e.buffers[0];r?n+=u[e.offset++]<<(f+=8)>>>0:n=(n<<8>>>0)+u[e.offset++],e.offset>=u.length&&(e.offset-=e.buffers.shift().length)}return n}function readUInt(e,t,r,n){if(t=parseInt(t,10),isNaN(t)||t<0||t+r>e.length)throw new Error(\"The offset must be a number between 0 and the reader's length minus 2.\");t+=e.offset;for(var f,u=0;(f=e.buffers[u++]).length<=t;)t-=f.length;for(var s=0,h=-8;r--;)n?s+=f[t++]<<(h+=8)>>>0:s=(s<<8>>>0)+f[t++],t>=f.length&&(t=0,f=e.buffers[u++]);return s}function toInt8(e){return 128&e?-1*(256-e):e}function toInt16(e){return 32768&e?-1*(65536-e):e}function toInt32(e){return 2147483648&e?-1*(4294967296-e):e}BufferQueueReader.prototype.push=function(){for(var e=0,t=arguments.length;e<t;++e){var r=arguments[e];if(!Buffer.isBuffer(r))throw new Error(\"The buffer must be an instance of Buffer.\");0!==r.length&&(this.buffers.push(r),this.length+=r.length)}},BufferQueueReader.prototype.skip=function(e){if(e=arguments.length?parseInt(e,10):this.length,isNaN(e)||e<0)throw new Error(\"The byte count must be a number greater than or equal to 0.\");var t;for(e>this.length&&(e=this.length),this.offset+=e,this.length-=e;this.buffers.length>0&&(t=this.buffers[0]).length<=this.offset;)this.buffers.shift(),this.offset-=t.length},BufferQueueReader.prototype.indexOf=function(e,t){if(e=parseInt(e,10),isNaN(e)||e<0||e>255)throw new Error(\"The search element must be a number between 0x00 and 0xFF.\");if(t=arguments.length>=2?parseInt(t,10):0,isNaN(t)||t<0||t>this.length)throw new Error(\"The search starting index must be a number between 0 and the reader's length.\");for(var r=this.offset+t,n=0,f=this.buffers[n];n<this.buffers.length&&r>=f.length;)r-=f.length,f=this.buffers[++n];for(var u=t;n<this.buffers.length;){if(f[r]===e)return u;u+=1,(r+=1)>=f.length&&(r=0,f=this.buffers[++n])}return-1},BufferQueueReader.prototype.copy=function(e,t,r,n){if(!Buffer.isBuffer(e))throw new Error(\"The target buffer must be an instance of Buffer.\");if(t=arguments.length>=2?parseInt(t,10):0,isNaN(t)||t<0||t>e.length)throw new Error(\"The target starting index must be a number greater than or equal to 0 and less than or equal to the target buffer's length.\");if(r=arguments.length>=3?parseInt(r,10):0,isNaN(r)||r<0||r>=this.length)throw new Error(\"The source starting index must be a number greater than or equal to 0 and less than the reader's length.\");if(n=arguments.length>=4?parseInt(n,10):this.length,isNaN(n)||n<1||n>this.length)throw new Error(\"The source ending index must be a number greater than 0 and less than or equal to the reader's length.\");if(r>=n)throw new Error(\"The source start index must be less than the source end index.\");for(var f,u=this.offset+r,s=0;(f=this.buffers[s++]).length<=u;)u-=f.length;var h=n-r;if(f.length>=u+h)return f.copy(e,t,u,u+h);for(var o=0;h;){var i=f.copy(e,t,u,Math.min(f.length,u+h));t+=i,o+=i,h-=i,(u+=i)>=f.length&&(u=0,f=this.buffers[s++])}return o},BufferQueueReader.prototype.shiftBits=function(e){return toBits(this.shiftBytes(Math.ceil(e/8)),e)},BufferQueueReader.prototype.shiftByte=function(){if(0===this.length)throw new Error(\"The reader is empty.\");var e=this.buffers[0],t=e[this.offset++];return this.length-=1,this.offset>=e.length&&(this.buffers.shift(),this.offset-=e.length),t},BufferQueueReader.prototype.shiftChar=function(){return String.fromCharCode(this.shiftByte())},BufferQueueReader.prototype.shiftBytes=function(e){if(e=parseInt(e,10),isNaN(e)||e<1||e>this.length)throw new Error(\"The byte count must be a number greater than 0 and less than or equal to the reader's length.\");this.length-=e;for(var t=[];e--;){var r=this.buffers[0];t.push(r[this.offset++]),this.offset>=r.length&&(this.buffers.shift(),this.offset-=r.length)}return t},BufferQueueReader.prototype.shiftBuffer=function(e){return new Buffer(this.shiftBytes(e))},BufferQueueReader.prototype.shiftString=function(e,t){return this.shiftBuffer(e).toString(t||\"utf8\")},BufferQueueReader.prototype.shiftZeroString=function(e){var t=this.indexOf(0);if(-1===t)return\"\";var r=this.shiftString(t,e);return this.skip(1),r},BufferQueueReader.prototype.shiftInt8=function(){return toInt8(this.shiftByte())},BufferQueueReader.prototype.shiftInt16=function(e){return toInt16(shiftUInt(this,2,e))},BufferQueueReader.prototype.shiftInt32=function(e){return toInt32(shiftUInt(this,4,e))},BufferQueueReader.prototype.shiftUInt8=function(){return this.shiftByte()},BufferQueueReader.prototype.shiftUInt16=function(e){return shiftUInt(this,2,e)},BufferQueueReader.prototype.shiftUInt32=function(e){return shiftUInt(this,4,e)},BufferQueueReader.prototype.shiftFloat=function(e){var t=e?\"readFloatLE\":\"readFloatBE\";return this.shiftBuffer(4)[t](0,!1)},BufferQueueReader.prototype.shiftDouble=function(e){var t=e?\"readDoubleLE\":\"readDoubleBE\";return this.shiftBuffer(8)[t](0,!1)},BufferQueueReader.prototype.readBits=function(e,t){return toBits(this.readBytes(e,Math.ceil(t/8)),t)},BufferQueueReader.prototype.readByte=function(e){if(e=parseInt(e,10),isNaN(e)||e<0||e>=this.length)throw new Error(\"The offset must be a number between 0 and the reader's length minus one.\");e+=this.offset;for(var t,r=0;(t=this.buffers[r++]).length<=e;)e-=t.length;return t[e]},BufferQueueReader.prototype.readChar=function(e){return String.fromCharCode(this.readByte(e))},BufferQueueReader.prototype.readBytes=function(e,t){if(e=parseInt(e,10),isNaN(e)||e<0)throw new Error(\"The offset must be a number greater than 0.\");if(t=parseInt(t,10),isNaN(t)||t<1)throw new Error(\"The byte count must be a number greater than 0.\");if(e+t>this.length)throw new Error(\"A sum of the offset and byte count must be less than or equal to the reader's length\");e+=this.offset;for(var r,n=[],f=0;(r=this.buffers[f++]).length<=e;)e-=r.length;for(;t--;)n.push(r[e++]),e>=r.length&&(e=0,r=this.buffers[f++]);return n},BufferQueueReader.prototype.readBuffer=function(e,t){if(e=parseInt(e,10),isNaN(e)||e<0)throw new Error(\"The offset must be a number greater than 0.\");if(t=parseInt(t,10),isNaN(t)||t<1)throw new Error(\"The byte count must be a number greater than 0.\");if(e+t>this.length)throw new Error(\"A sum of the offset and byte count must be less than or equal to the reader's length\");e+=this.offset;for(var r,n=0;(r=this.buffers[n++]).length<=e;)e-=r.length;if(r.length>=e+t)return r.slice(e,e+t);for(var f=new Buffer(t),u=0;t;){var s=r.copy(f,u,e,Math.min(r.length,e+t));u+=s,t-=s,(e+=s)>=r.length&&(e=0,r=this.buffers[n++])}return f},BufferQueueReader.prototype.readString=function(e,t,r){return this.readBuffer(e,t).toString(r||\"utf8\")},BufferQueueReader.prototype.readZeroString=function(e,t){var r=this.indexOf(0,e);return-1===r||r-e==0?\"\":this.readString(e,r-e,t)},BufferQueueReader.prototype.readInt8=function(e){return toInt8(this.readByte(e))},BufferQueueReader.prototype.readInt16=function(e,t){return toInt16(readUInt(this,e,2,t))},BufferQueueReader.prototype.readInt32=function(e,t){return toInt32(readUInt(this,e,4,t))},BufferQueueReader.prototype.readUInt8=function(e){return this.readByte(e)},BufferQueueReader.prototype.readUInt16=function(e,t){return readUInt(this,e,2,t)},BufferQueueReader.prototype.readUInt32=function(e,t){return readUInt(this,e,4,t)},BufferQueueReader.prototype.readFloat=function(e,t){var r=t?\"readFloatLE\":\"readFloatBE\";return this.readBuffer(e,4)[r](0,!1)},BufferQueueReader.prototype.readDouble=function(e,t){var r=t?\"readDoubleLE\":\"readDoubleBE\";return this.readBuffer(e,8)[r](0,!1)},module.exports=BufferQueueReader;","node_modules/h5.buffers/lib/BufferReader.js":"\"use strict\";var toBits=require(\"./helpers\").toBits;function BufferReader(e){if(!Buffer.isBuffer(e))throw new Error(\"Buffer reader expects an instance of Buffer.\");this.length=e.length,this.offset=0,this.buffer=e}BufferReader.prototype.skip=function(e){if(e=0===arguments.length?this.length:parseInt(e,10),isNaN(e)||e<0)throw new Error(\"The byte count must be a number greater than or equal to 0.\");e>this.length&&(e=this.length),this.offset+=e,this.length-=e},BufferReader.prototype.indexOf=function(e,t){if(e=parseInt(e,10),isNaN(e)||e<0||e>255)throw new Error(\"The search element must be a number between 0x00 and 0xFF.\");if(t=arguments.length>=2?parseInt(t,10):0,isNaN(t)||t<0||t>this.length)throw new Error(\"The search starting index must be a number between 0 and the reader's length.\");for(var r=this.offset+t;r<this.length;++r)if(this.buffer[r]===e)return r-this.offset;return-1},BufferReader.prototype.copy=function(e,t,r,n){if(!Buffer.isBuffer(e))throw new Error(\"The target buffer must be an instance of Buffer.\");if(t=arguments.length>=2?parseInt(t,10):0,isNaN(t)||t<0||t>e.length)throw new Error(\"The target starting index must be a number greater than or equal to 0 and less than or equal to the target buffer's length.\");if(r=arguments.length>=3?parseInt(r,10):0,isNaN(r)||r<0||r>=this.length)throw new Error(\"The source starting index must be a number greater than or equal to 0 and less than the reader's length.\");if(n=arguments.length>=4?parseInt(n,10):this.length,isNaN(n)||n<1||n>this.length)throw new Error(\"The source ending index must be a number greater than 0 and less than or equal to the reader's length.\");if(r>=n)throw new Error(\"The source start index must be less than the source end index.\");return this.buffer.copy(e,t,this.offset+r,this.offset+n)},BufferReader.prototype.shiftBits=function(e){return toBits(this.shiftBytes(Math.ceil(e/8)),e)},BufferReader.prototype.shiftByte=function(){if(0===this.length)throw new Error(\"The reader is empty.\");return this.length-=1,this.buffer[this.offset++]},BufferReader.prototype.shiftChar=function(){return String.fromCharCode(this.shiftByte())},BufferReader.prototype.shiftBytes=function(e){if(e=parseInt(e,10),isNaN(e)||e<1||e>this.length)throw new Error(\"The byte count must be a number greater than 0 and less than or equal to the reader's length.\");this.length-=e;for(var t=[];e--;)t.push(this.buffer[this.offset++]);return t},BufferReader.prototype.shiftBuffer=function(e){return new Buffer(this.shiftBytes(e))},BufferReader.prototype.shiftString=function(e,t){return this.shiftBuffer(e).toString(t||\"utf8\")},BufferReader.prototype.shiftZeroString=function(e){var t=this.indexOf(0);if(-1===t)return\"\";var r=this.shiftString(t,e);return this.skip(1),r},BufferReader.prototype.shiftInt8=function(){var e=this.readInt8(0);return this.skip(1),e},BufferReader.prototype.shiftInt16=function(e){var t=this.readInt16(0,e);return this.skip(2),t},BufferReader.prototype.shiftInt32=function(e){var t=this.readInt32(0,e);return this.skip(4),t},BufferReader.prototype.shiftUInt8=function(){var e=this.readUInt8(0);return this.skip(1),e},BufferReader.prototype.shiftUInt16=function(e){var t=this.readUInt16(0,e);return this.skip(2),t},BufferReader.prototype.shiftUInt32=function(e){var t=this.readUInt32(0,e);return this.skip(4),t},BufferReader.prototype.shiftFloat=function(e){var t=this.readFloat(0,e);return this.skip(4),t},BufferReader.prototype.shiftDouble=function(e){var t=this.readDouble(0,e);return this.skip(8),t},BufferReader.prototype.readBits=function(e,t){return toBits(this.readBytes(e,Math.ceil(t/8)),t)},BufferReader.prototype.readByte=function(e){if(e=parseInt(e,10),isNaN(e)||e<0||e>=this.length)throw new Error(\"The offset must be a number between 0 and the reader's length minus one.\");return this.buffer[this.offset+e]},BufferReader.prototype.readChar=function(e){return String.fromCharCode(this.readByte(e))},BufferReader.prototype.readBytes=function(e,t){if(e=parseInt(e,10),isNaN(e)||e<0)throw new Error(\"The offset must be a number greater than 0.\");if(t=parseInt(t,10),isNaN(t)||t<1)throw new Error(\"The byte count must be a number greater than 0.\");if(e+t>this.length)throw new Error(\"A sum of the offset and byte count must be less than or equal to the reader's length.\");e+=this.offset;for(var r=[];t--;)r.push(this.buffer[e++]);return r},BufferReader.prototype.readBuffer=function(e,t){return new Buffer(this.readBytes(e,t))},BufferReader.prototype.readString=function(e,t,r){return this.readBuffer(e,t).toString(r||\"utf8\")},BufferReader.prototype.readZeroString=function(e,t){var r=this.indexOf(0,e);return-1===r||r-e==0?\"\":this.readString(e,r-e,t)},BufferReader.prototype.readInt8=function(e){return this.buffer.readInt8(this.offset+e)},BufferReader.prototype.readInt16=function(e,t){return this.buffer[t?\"readInt16LE\":\"readInt16BE\"](this.offset+e)},BufferReader.prototype.readInt32=function(e,t){return this.buffer[t?\"readInt32LE\":\"readInt32BE\"](this.offset+e)},BufferReader.prototype.readUInt8=function(e){return this.buffer.readUInt8(this.offset+e)},BufferReader.prototype.readUInt16=function(e,t){return this.buffer[t?\"readUInt16LE\":\"readUInt16BE\"](this.offset+e)},BufferReader.prototype.readUInt32=function(e,t){return this.buffer[t?\"readUInt32LE\":\"readUInt32BE\"](this.offset+e)},BufferReader.prototype.readFloat=function(e,t){return this.buffer[t?\"readFloatLE\":\"readFloatBE\"](this.offset+e)},BufferReader.prototype.readDouble=function(e,t){return this.buffer[t?\"readDoubleLE\":\"readDoubleBE\"](this.offset+e)},module.exports=BufferReader;","node_modules/h5.buffers/lib/BufferBuilder.js":"\"use strict\";function BufferBuilder(){this.length=0,this.data=[]}function parseIntValue(t,r,e){if(t=parseInt(t,10),isNaN(t)||t<e||t>r)throw new Error(\"Expected an integer between \"+e+\" and \"+r+\".\");return t}function parseFloatValue(t,r,e){if(t=parseFloat(t,10),isNaN(t)||t<e||t>r)throw new Error(\"Expected a floating-point number between \"+e+\" and \"+r+\".\");return t}BufferBuilder.prototype.toBuffer=function(){var t=new Buffer(this.length);return this.data.reduce(function(r,e){return r+e(t,r)},0),t},BufferBuilder.prototype.pushBits=function(t){if(!Array.isArray(t))throw new Error(\"Expected an array.\");var r=t.length;if(0===r)return this;var e=Math.ceil(r/8);return this.data.push(function(n,u){for(var i=0,h=0,s=0;s<r;++s)0!==i&&i%8==0?(n[u++]=h,i=0,h=t[s]?1:0):t[s]&&(h|=Math.pow(2,i)),i+=1;return n[u]=h,e}),this.length+=e,this},BufferBuilder.prototype.pushByte=function(t){if(t=parseInt(t,10),isNaN(t)||t<0||t>255)throw new Error(\"Expected a number between 0 and 255.\");return this.data.push(function(r,e){return r[e]=t,1}),this.length+=1,this},BufferBuilder.prototype.pushChar=function(t){var r=t.charCodeAt(0);if(isNaN(r)||r<0||r>127)throw new Error(\"Expected an ASCII character.\");return this.pushByte(r)},BufferBuilder.prototype.pushBytes=function(t){if(!Array.isArray(t))throw new Error(\"Expected an array.\");var r=t.length;return 0===r?this:(this.data.push(function(e,n){for(var u=0;u<r;++u)e[n+u]=t[u];return r}),this.length+=r,this)},BufferBuilder.prototype.pushBuffer=function(t){if(!Buffer.isBuffer(t))throw new Error(\"Expected an instance of Buffer.\");return 0===t.length?this:(this.data.push(function(r,e){return t.copy(r,e,0,t.length)}),this.length+=t.length,this)},BufferBuilder.prototype.pushString=function(t,r){if(\"string\"!=typeof t)throw new Error(\"Expected a string.\");return 0===t.length?this:(r||(r=\"utf8\"),this.data.push(function(e,n){return e.write(t,n,r)}),this.length+=Buffer.byteLength(t,r),this)},BufferBuilder.prototype.pushZeroString=function(t,r){return this.pushString(t,r).pushByte(0)},BufferBuilder.prototype.pushInt8=function(t){return t=parseIntValue(t,127,-128),this.data.push(function(r,e){return r.writeInt8(t,e,!0),1}),this.length+=1,this},BufferBuilder.prototype.pushInt16=function(t,r){return t=parseIntValue(t,32767,-32768),this.data.push(function(e,n){return e[r?\"writeInt16LE\":\"writeInt16BE\"](t,n,!0),2}),this.length+=2,this},BufferBuilder.prototype.pushInt32=function(t,r){return t=parseIntValue(t,2147483647,-2147483648),this.data.push(function(e,n){return e[r?\"writeInt32LE\":\"writeInt32BE\"](t,n,!0),4}),this.length+=4,this},BufferBuilder.prototype.pushUInt8=function(t){return t=parseIntValue(t,255,0),this.data.push(function(r,e){return r.writeUInt8(t,e,!0),1}),this.length+=1,this},BufferBuilder.prototype.pushUInt16=function(t,r){return t=parseIntValue(t,65535,0),this.data.push(function(e,n){return e[r?\"writeUInt16LE\":\"writeUInt16BE\"](t,n,!0),2}),this.length+=2,this},BufferBuilder.prototype.pushUInt32=function(t,r){return t=parseIntValue(t,4294967295,0),this.data.push(function(e,n){return e[r?\"writeUInt32LE\":\"writeUInt32BE\"](t,n,!0),4}),this.length+=4,this},BufferBuilder.prototype.pushFloat=function(t,r){return t=parseFloatValue(t,3.4028234663852886e38,-3.4028234663852886e38),this.data.push(function(e,n){return e[r?\"writeFloatLE\":\"writeFloatBE\"](t,n,!0),4}),this.length+=4,this},BufferBuilder.prototype.pushDouble=function(t,r){return t=parseFloatValue(t,1.7976931348623157e308,-1.7976931348623157e308),this.data.push(function(e,n){return e[r?\"writeDoubleLE\":\"writeDoubleBE\"](t,n,!0),8}),this.length+=8,this},module.exports=BufferBuilder;","node_modules/h5.buffers/lib/helpers.js":"\"use strict\";exports.toBits=function(t,o){for(var r=[],e=t.length,n=0;n<e;++n)for(var s=t[n],a=0;a<8&&r.length!==o;++a)r.push(Boolean(s&Math.pow(2,a)));return r};","node_modules/h5.modbus/lib/listeners/monkeyPatch.js":"\"use strict\";const Server=require(\"net\").Server,originalServerListen=Server.prototype.listen;Server.prototype.binding=!1,Server.prototype.listen=function(){const e=()=>{this.binding=!1,this.removeListener(\"error\",e),this.removeListener(\"listening\",e)};return this.on(\"error\",e),this.on(\"listening\",e),this.binding=!0,originalServerListen.apply(this,arguments)};","backend/node_modules/modbus/deltaUtils.js":"\"use strict\";var DELTA_FUNCTIONS={S:2,X:2,Y:1,M:1,T:3,C:3,D:3,input:2,output:1,register:3},DELTA_ADDRESSES={S:function(t){return t<0||t>1023?-1:0+t},X:function(t){return t<0||t>377?-1:1024+8*Math.floor(t/10)+t%10},Y:function(t){return t<0||t>377?-1:1280+8*Math.floor(t/10)+t%10},T:function(t){return t<0||t>255?-1:1536+t},M:function(t){return t<0||t>4095?-1:t<1536?2048+t:45056+t-1536},C:function(t){return t<0||t>255?-1:3584+t},D:function(t){return t<0||t>11999?-1:t<4096?4096+t:36864+t-4096}};exports.getFunctionCode=function(t){if(\"number\"==typeof DELTA_FUNCTIONS[t])return DELTA_FUNCTIONS[t];var r=t.charAt(0);return\"number\"!=typeof DELTA_FUNCTIONS[r]?-1:DELTA_FUNCTIONS[r]},exports.getStartingAddress=function(t){var r=t.charAt(0);if(\"function\"!=typeof DELTA_ADDRESSES[r])return-1;var n=parseInt(t.substr(1),10);return DELTA_ADDRESSES[r](n)};","backend/node_modules/modbus/scaleFunctions.js":"\"use strict\";const _=require(\"lodash\"),SCALE_FUNCTIONS_RE=/([a-zA-Z0-9]+)(?:\\((.*?)\\))?/g,NOOP_SCALE_FUNCTIONS={rawValueToValue:e=>e,valueToRawValue:e=>e},SCALE_FUNCTIONS={round:(e,u)=>{const n=Math.pow(10,\"number\"==typeof u[0]?u[0]:0);return{rawValueToValue:round.bind(null,n),valueToRawValue:NOOP_SCALE_FUNCTIONS.valueToRawValue}},div:(e,u)=>{const n=\"number\"==typeof u[0]?u[0]:1;return{rawValueToValue:div.bind(null,n),valueToRawValue:mul.bind(null,n)}},minMax:(e,u)=>{const n=\"number\"==typeof u[0]?u[0]:e.rawMin,l=\"number\"==typeof u[1]?u[1]:e.rawMax,a=\"number\"==typeof u[2]?u[2]:e.scaleMin,r=\"number\"==typeof u[3]?u[3]:e.scaleMax;return null===l||null===r?NOOP_SCALE_FUNCTIONS:{rawValueToValue:scale.bind(null,n,l,a,r),valueToRawValue:scale.bind(null,a,r,n,l)}},flip:()=>({rawValueToValue:flip,valueToRawValue:flip}),cast:(e,u)=>{const n=\"string\"==typeof u[0]?u[0]:\"number\";return{rawValueToValue:cast.bind(null,n),valueToRawValue:cast.bind(null,e.type)}},sub:(e,u)=>{const n=[];if(_.forEach(u,u=>{const l=e.modbus.tags[u];l&&n.push(l)}),0===n.length)return NOOP_SCALE_FUNCTIONS;const l=sub.bind(null,n);return{rawValueToValue:l,valueToRawValue:l}},offset:(e,u)=>{const n=\"number\"==typeof u[0]?u[0]:0;return 0===n?NOOP_SCALE_FUNCTIONS:{rawValueToValue:offset.bind(null,n),valueToRawValue:offset.bind(null,-n)}},nil:(e,u)=>{if(0===u.length)return NOOP_SCALE_FUNCTIONS;if(1===u.length){const e=u[0];return{rawValueToValue:u=>u===e?null:u,valueToRawValue:u=>null===u?e:u}}return{rawValueToValue:e=>u.includes(e)?null:e,valueToRawValue:e=>null===e?u[0]:e}},const:(e,u)=>{if(0===u.length)return NOOP_SCALE_FUNCTIONS;const n=u[0];return{rawValueToValue:()=>n,valueToRawValue:()=>n}},onOff:(e,u)=>{if(2!==u.length)return NOOP_SCALE_FUNCTIONS;const n=u[0],l=u[1];return{rawValueToValue:e=>e===n?1:0,valueToRawValue:e=>e?n:l}},onOffWrite:(e,u)=>{if(2!==u.length)return NOOP_SCALE_FUNCTIONS;const n=u[0],l=u[1];return{rawValueToValue:e=>e===n?1:e===l?0:e,valueToRawValue:e=>e?n:l}}};function round(e,u){return Math.round(u*e)/e}function div(e,u){return u/e}function mul(e,u){return u*e}function scale(e,u,n,l,a){return(l-n)*(a-e)/(u-e)+n}function flip(e){return!e}function cast(e,u){switch(e){case\"number\":switch(typeof u){case\"bool\":return u?1:0}break;case\"bool\":return!!u}return u}function sub(e,u){return e.reduce((e,u)=>e+u.getValue(),0)-u}function offset(e,u){return u+e}function parseScaleFunctions(e,u){const n=[];let l;for(;null!==(l=SCALE_FUNCTIONS_RE.exec(u));){const u=l[1],a=\"string\"!=typeof l[2]||0===l[2].length?[]:l[2].split(\",\").map(parseArgValue);\"function\"==typeof SCALE_FUNCTIONS[u]&&n.push(SCALE_FUNCTIONS[u](e,a))}return n}function parseArgValue(e){e=e.trim();const u=parseFloat(e);if(!isNaN(u))return u;switch(e.toLowerCase()){case\"true\":return!0;case\"false\":return!1;case\"null\":return null;default:return e}}exports.create=(e=>{if(\"string\"!=typeof e.scaleFunction)return NOOP_SCALE_FUNCTIONS;const u=parseScaleFunctions(e,e.scaleFunction),n=u.length;return 0===n?NOOP_SCALE_FUNCTIONS:{rawValueToValue:e=>{let l=e;for(let e=0;e<n;++e)if(null===(l=u[e].rawValueToValue(l)))return null;return l},valueToRawValue:e=>{let l=e;for(let e=n-1;e>=0;--e)l=u[e].valueToRawValue(l);return l}}});","node_modules/axon/index.js":"module.exports=require(\"./lib\");","node_modules/amp-message/index.js":"var fmt=require(\"util\").format,amp=require(\"amp\"),methods=[\"push\",\"pop\",\"shift\",\"unshift\"];function Message(e){Buffer.isBuffer(e)&&(e=decode(e)),this.args=e||[]}function decode(e){for(var t=amp.decode(e),r=0;r<t.length;r++)t[r]=unpack(t[r]);return t}function encode(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=pack(e[r]);return amp.encode(t)}function pack(e){return Buffer.isBuffer(e)?e:\"string\"==typeof e?new Buffer(\"s:\"+e):(void 0===e&&(e=null),new Buffer(\"j:\"+JSON.stringify(e)))}function unpack(e){return isJSON(e)?JSON.parse(e.slice(2)):isString(e)?e.slice(2).toString():e}function isString(e){return 115==e[0]&&58==e[1]}function isJSON(e){return 106==e[0]&&58==e[1]}function isId(e){return 105==e[0]&&58==e[1]}module.exports=Message,methods.forEach(function(e){Message.prototype[e]=function(){return this.args[e].apply(this.args,arguments)}}),Message.prototype.inspect=function(){return fmt(\"<Message args=%d size=%d>\",this.args.length,this.toBuffer().length)},Message.prototype.toBuffer=function(){return encode(this.args)};","node_modules/axon/lib/index.js":"exports.PubEmitterSocket=require(\"./sockets/pub-emitter\"),exports.SubEmitterSocket=require(\"./sockets/sub-emitter\"),exports.PushSocket=require(\"./sockets/push\"),exports.PullSocket=require(\"./sockets/pull\"),exports.PubSocket=require(\"./sockets/pub\"),exports.SubSocket=require(\"./sockets/sub\"),exports.ReqSocket=require(\"./sockets/req\"),exports.RepSocket=require(\"./sockets/rep\"),exports.Socket=require(\"./sockets/sock\"),exports.types={\"pub-emitter\":exports.PubEmitterSocket,\"sub-emitter\":exports.SubEmitterSocket,push:exports.PushSocket,pull:exports.PullSocket,pub:exports.PubSocket,sub:exports.SubSocket,req:exports.ReqSocket,rep:exports.RepSocket},exports.socket=function(e,t){var r=exports.types[e];if(!r)throw new Error('invalid socket type \"'+e+'\"');return new r(t)};","node_modules/axon/lib/sockets/pub-emitter.js":"var PubSocket=require(\"./pub\");function PubEmitterSocket(){this.sock=new PubSocket,this.emit=this.sock.send.bind(this.sock),this.bind=this.sock.bind.bind(this.sock),this.connect=this.sock.connect.bind(this.sock),this.close=this.sock.close.bind(this.sock)}module.exports=PubEmitterSocket;","node_modules/axon/lib/sockets/sub-emitter.js":"var Message=require(\"amp-message\"),SubSocket=require(\"./sub\");function SubEmitterSocket(){this.sock=new SubSocket,this.sock.onmessage=this.onmessage.bind(this),this.bind=this.sock.bind.bind(this.sock),this.connect=this.sock.connect.bind(this.sock),this.close=this.sock.close.bind(this.sock),this.listeners=[]}module.exports=SubEmitterSocket,SubEmitterSocket.prototype.onmessage=function(){var s=this.listeners,t=this;return function(e){for(var i=new Message(e),n=i.shift(),o=0;o<s.length;++o){var r=s[o],c=r.re.exec(n);c&&r.fn.apply(t,c.slice(1).concat(i.args))}}},SubEmitterSocket.prototype.on=function(s,t){var e=this.sock.subscribe(s);return this.listeners.push({event:s,re:e,fn:t}),this},SubEmitterSocket.prototype.off=function(s){for(var t=0;t<this.listeners.length;++t)this.listeners[t].event===s&&(this.sock.unsubscribe(this.listeners[t].re),this.listeners.splice(t--,1));return this};","node_modules/axon/lib/sockets/push.js":"var roundrobin=require(\"../plugins/round-robin\"),queue=require(\"../plugins/queue\"),Socket=require(\"./sock\");function PushSocket(){Socket.call(this),this.use(queue()),this.use(roundrobin({fallback:this.enqueue}))}module.exports=PushSocket,PushSocket.prototype.__proto__=Socket.prototype;","node_modules/axon/lib/sockets/pull.js":"var Socket=require(\"./sock\");function PullSocket(){Socket.call(this)}module.exports=PullSocket,PullSocket.prototype.__proto__=Socket.prototype,PullSocket.prototype.send=function(){throw new Error(\"pull sockets should not send messages\")};","node_modules/axon/lib/sockets/pub.js":"var Socket=require(\"./sock\"),slice=require(\"../utils\").slice;function PubSocket(){Socket.call(this)}module.exports=PubSocket,PubSocket.prototype.__proto__=Socket.prototype,PubSocket.prototype.send=function(t){for(var e,o=this.socks,r=o.length,c=this.pack(arguments),i=0;i<r;i++)(e=o[i]).writable&&e.write(c);return this};","node_modules/axon/lib/sockets/sub.js":"var debug=require(\"debug\")(\"axon:sub\"),escape=require(\"escape-regexp\"),Message=require(\"amp-message\"),Socket=require(\"./sock\");function SubSocket(){Socket.call(this),this.subscriptions=[]}function toRegExp(t){return t instanceof RegExp?t:(t=(t=escape(t)).replace(/\\\\\\*/g,\"(.+)\"),new RegExp(\"^\"+t+\"$\"))}module.exports=SubSocket,SubSocket.prototype.__proto__=Socket.prototype,SubSocket.prototype.hasSubscriptions=function(){return!!this.subscriptions.length},SubSocket.prototype.matches=function(t){for(var e=0;e<this.subscriptions.length;++e)if(this.subscriptions[e].test(t))return!0;return!1},SubSocket.prototype.onmessage=function(t){var e=this.hasSubscriptions(),s=this;return function(t){var o=new Message(t);if(e){var r=o.args[0];if(!s.matches(r))return debug('not subscribed to \"%s\"',r)}s.emit.apply(s,[\"message\"].concat(o.args))}},SubSocket.prototype.subscribe=function(t){return debug('subscribe to \"%s\"',t),this.subscriptions.push(t=toRegExp(t)),t},SubSocket.prototype.unsubscribe=function(t){debug('unsubscribe from \"%s\"',t),t=toRegExp(t);for(var e=0;e<this.subscriptions.length;++e)this.subscriptions[e].toString()===t.toString()&&this.subscriptions.splice(e--,1)},SubSocket.prototype.clearSubscriptions=function(){this.subscriptions=[]},SubSocket.prototype.send=function(){throw new Error(\"subscribers cannot send messages\")};","node_modules/axon/lib/sockets/req.js":"var debug=require(\"debug\")(\"axon:req\"),queue=require(\"../plugins/queue\"),slice=require(\"../utils\").slice,Message=require(\"amp-message\"),Socket=require(\"./sock\");function ReqSocket(){Socket.call(this),this.n=0,this.ids=0,this.callbacks={},this.identity=this.get(\"identity\"),this.use(queue())}module.exports=ReqSocket,ReqSocket.prototype.__proto__=Socket.prototype,ReqSocket.prototype.id=function(){return this.identity+\":\"+this.ids++},ReqSocket.prototype.onmessage=function(){var e=this;return function(t){var i=new Message(t),s=i.pop(),o=e.callbacks[s];if(!o)return debug(\"missing callback %s\",s);o.apply(null,i.args),delete e.callbacks[s]}},ReqSocket.prototype.send=function(e){var t=this.socks,i=t.length,s=t[this.n++%i],o=slice(arguments);if(s){\"function\"==typeof o[o.length-1]||o.push(function(){});var c=o.pop();c.id=this.id(),this.callbacks[c.id]=c,o.push(c.id)}s?s.write(this.pack(o)):(debug(\"no connected peers\"),this.enqueue(o))};","node_modules/axon/lib/sockets/rep.js":"var slice=require(\"../utils\").slice,debug=require(\"debug\")(\"axon:rep\"),Message=require(\"amp-message\"),Socket=require(\"./sock\");function RepSocket(){Socket.call(this)}module.exports=RepSocket,RepSocket.prototype.__proto__=Socket.prototype,RepSocket.prototype.onmessage=function(e){var t=this;return function(o){var r=new Message(o).args,n=r.pop();r.unshift(\"message\"),r.push(function(){var o=function(){},r=slice(arguments);r[0]=r[0]||null,\"function\"==typeof r[r.length-1]&&(o=r.pop());return r.push(n),e.writable?(e.write(t.pack(r),function(){o(!0)}),!0):(debug(\"peer went away\"),process.nextTick(function(){o(!1)}),!1)}),t.emit.apply(t,r)}};","node_modules/axon/lib/sockets/sock.js":"var Emitter=require(\"events\").EventEmitter,Configurable=require(\"configurable\"),debug=require(\"debug\")(\"axon:sock\"),Message=require(\"amp-message\"),Parser=require(\"amp\").Stream,url=require(\"url\"),net=require(\"net\"),fs=require(\"fs\"),ignore=[\"ECONNREFUSED\",\"ECONNRESET\",\"ETIMEDOUT\",\"EHOSTUNREACH\",\"ENETUNREACH\",\"ENETDOWN\",\"EPIPE\",\"ENOENT\"];function Socket(){this.server=null,this.socks=[],this.settings={},this.set(\"hwm\",1/0),this.set(\"identity\",String(process.pid)),this.set(\"retry timeout\",100),this.set(\"retry max timeout\",5e3)}module.exports=Socket,Socket.prototype.__proto__=Emitter.prototype,Configurable(Socket.prototype),Socket.prototype.use=function(e){return e(this),this},Socket.prototype.pack=function(e){return new Message(e).toBuffer()},Socket.prototype.closeSockets=function(){debug(\"%s closing %d connections\",this.type,this.socks.length),this.socks.forEach(function(e){e.destroy()})},Socket.prototype.close=function(e){debug(\"%s closing\",this.type),this.closing=!0,this.closeSockets(),this.server&&this.closeServer(e)},Socket.prototype.closeServer=function(e){debug(\"%s closing server\",this.type),this.server.on(\"close\",this.emit.bind(this,\"close\")),this.server.close(),e&&e()},Socket.prototype.address=function(){if(this.server){var e=this.server.address();return e.string=\"tcp://\"+e.address+\":\"+e.port,e}},Socket.prototype.removeSocket=function(e){var t=this.socks.indexOf(e);~t&&(debug(\"%s remove socket %d\",this.type,t),this.socks.splice(t,1))},Socket.prototype.addSocket=function(e){var t=new Parser,o=this.socks.push(e)-1;debug(\"%s add socket %d\",this.type,o),e.pipe(t),t.on(\"data\",this.onmessage(e))},Socket.prototype.handleErrors=function(e){var t=this;e.on(\"error\",function(o){if(debug(\"%s error %s\",t.type,o.code||o.message),t.emit(\"socket error\",o),t.removeSocket(e),!~ignore.indexOf(o.code))return t.emit(\"error\",o);debug(\"%s ignored %s\",t.type,o.code),t.emit(\"ignored error\",o)})},Socket.prototype.onmessage=function(e){var t=this;return function(e){var o=new Message(e);t.emit.apply(t,[\"message\"].concat(o.args))}},Socket.prototype.connect=function(e,t,o){var r=this;if(\"server\"==this.type)throw new Error(\"cannot connect() after bind()\");\"function\"==typeof t&&(o=t,t=void 0),\"string\"==typeof e?\"unix:\"==(e=url.parse(e)).protocol?(t=o,o=void 0,e=e.pathname):(t=e.hostname||\"0.0.0.0\",e=parseInt(e.port,10)):t=t||\"0.0.0.0\";var s=r.get(\"retry max timeout\"),n=new net.Socket;return n.setNoDelay(),this.type=\"client\",this.handleErrors(n),n.on(\"close\",function(){if(r.emit(\"socket close\",n),r.connected=!1,r.removeSocket(n),r.closing)return r.emit(\"close\");var o=r.retry||r.get(\"retry timeout\");setTimeout(function(){debug(\"%s attempting reconnect\",r.type),r.emit(\"reconnect attempt\"),n.destroy(),r.connect(e,t),r.retry=Math.round(Math.min(s,1.5*o))},o)}),n.on(\"connect\",function(){debug(\"%s connect\",r.type),r.connected=!0,r.addSocket(n),r.retry=r.get(\"retry timeout\"),r.emit(\"connect\",n),o&&o()}),debug(\"%s connect attempt %s:%s\",r.type,t,e),n.connect(e,t),this},Socket.prototype.onconnect=function(e){var t=this,o=e.remoteAddress+\":\"+e.remotePort;debug(\"%s accept %s\",t.type,o),this.addSocket(e),this.handleErrors(e),this.emit(\"connect\",e),e.on(\"close\",function(){debug(\"%s disconnect %s\",t.type,o),t.emit(\"disconnect\",e),t.removeSocket(e)})},Socket.prototype.bind=function(e,t,o){var r=this;if(\"client\"==this.type)throw new Error(\"cannot bind() after connect()\");\"function\"==typeof t&&(o=t,t=void 0);var s=!1;return\"string\"==typeof e?\"unix:\"==(e=url.parse(e)).protocol?(t=o,o=void 0,e=e.pathname,s=!0):(t=e.hostname||\"0.0.0.0\",e=parseInt(e.port,10)):t=t||\"0.0.0.0\",this.type=\"server\",this.server=net.createServer(this.onconnect.bind(this)),debug(\"%s bind %s:%s\",this.type,t,e),this.server.on(\"listening\",this.emit.bind(this,\"bind\")),s&&this.server.on(\"error\",function(s){if(\"EADDRINUSE\"==s.code){var n=new net.Socket;n.on(\"error\",function(s){\"ECONNREFUSED\"==s.code&&(fs.unlink(e),r.server.listen(e,t,o))}),n.connect({path:e},function(){throw s})}}),this.server.listen(e,t,o),this};","node_modules/axon/lib/utils.js":"exports.slice=function(r){for(var e=r.length,n=new Array(e),t=0;t<e;t++)n[t]=r[t];return n};","node_modules/configurable/index.js":"module.exports=require(\"./lib/configurable\");","node_modules/debug/src/index.js":"\"undefined\"==typeof process||\"renderer\"===process.type||!0===process.browser||process.__nwjs?module.exports=require(\"./browser.js\"):module.exports=require(\"./node.js\");","node_modules/amp/index.js":"exports.Stream=require(\"./lib/stream\"),exports.encode=require(\"./lib/encode\"),exports.decode=require(\"./lib/decode\");","node_modules/configurable/lib/configurable.js":"module.exports=function(t){return t.settings={},t.set=function(t,e){if(1==arguments.length)for(var n in t)this.set(n,t[n]);else this.settings[t]=e;return this},t.get=function(t){return this.settings[t]},t.enable=function(t){return this.set(t,!0)},t.disable=function(t){return this.set(t,!1)},t.enabled=function(t){return!!this.get(t)},t.disabled=function(t){return!this.get(t)},t};","node_modules/debug/src/node.js":"const tty=require(\"tty\"),util=require(\"util\");exports.init=init,exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.destroy=util.deprecate(()=>{},\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\"),exports.colors=[6,2,3,4,5,1];try{const t=require(\"supports-color\");t&&(t.stderr||t).level>=2&&(exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function useColors(){return\"colors\"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:e,useColors:s}=this;if(s){const s=this.color,o=\"\u001b[3\"+(s<8?s:\"8;5;\"+s),r=`  ${o};1m${e} \u001b[0m`;t[0]=r+t[0].split(\"\\n\").join(\"\\n\"+r),t.push(o+\"m+\"+module.exports.humanize(this.diff)+\"\u001b[0m\")}else t[0]=getDate()+e+\" \"+t[0]}function getDate(){return exports.inspectOpts.hideDate?\"\":(new Date).toISOString()+\" \"}function log(...t){return process.stderr.write(util.format(...t)+\"\\n\")}function save(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function load(){return process.env.DEBUG}function init(t){t.inspectOpts={};const e=Object.keys(exports.inspectOpts);for(let s=0;s<e.length;s++)t.inspectOpts[e[s]]=exports.inspectOpts[e[s]]}exports.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{const s=e.substring(6).toLowerCase().replace(/_([a-z])/g,(t,e)=>e.toUpperCase());let o=process.env[e];return o=!!/^(yes|on|true|enabled)$/i.test(o)||!/^(no|off|false|disabled)$/i.test(o)&&(\"null\"===o?null:Number(o)),t[s]=o,t},{}),module.exports=require(\"./common\")(exports);const{formatters:formatters}=module.exports;formatters.o=function(t){return this.inspectOpts.colors=this.useColors,util.inspect(t,this.inspectOpts).split(\"\\n\").map(t=>t.trim()).join(\" \")},formatters.O=function(t){return this.inspectOpts.colors=this.useColors,util.inspect(t,this.inspectOpts)};","node_modules/debug/src/common.js":"function setup(e){function n(e){let r,s,o,a=null;function l(...e){if(!l.enabled)return;const t=l,s=Number(new Date),o=s-(r||s);t.diff=o,t.prev=r,t.curr=s,r=s,e[0]=n.coerce(e[0]),\"string\"!=typeof e[0]&&e.unshift(\"%O\");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if(\"%%\"===r)return\"%\";a++;const o=n.formatters[s];if(\"function\"==typeof o){const n=e[a];r=o.call(t,n),e.splice(a,1),a--}return r}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return l.namespace=e,l.useColors=n.useColors(),l.color=n.selectColor(e),l.extend=t,l.destroy=n.destroy,Object.defineProperty(l,\"enabled\",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(s!==n.namespaces&&(s=n.namespaces,o=n.enabled(e)),o),set:e=>{a=e}}),\"function\"==typeof n.init&&n.init(l),l}function t(e,t){const r=n(this.namespace+(void 0===t?\":\":t)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\\.\\*\\?$/,\"*\")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){const e=[...n.names.map(r),...n.skips.map(r).map(e=>\"-\"+e)].join(\",\");return n.enable(\"\"),e},n.enable=function(e){let t;n.save(e),n.namespaces=e,n.names=[],n.skips=[];const r=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),s=r.length;for(t=0;t<s;t++)r[t]&&(\"-\"===(e=r[t].replace(/\\*/g,\".*?\"))[0]?n.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):n.names.push(new RegExp(\"^\"+e+\"$\")))},n.enabled=function(e){if(\"*\"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=require(\"ms\"),n.destroy=function(){console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\")},Object.keys(e).forEach(t=>{n[t]=e[t]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return n.colors[Math.abs(t)%n.colors.length]},n.enable(n.load()),n}module.exports=setup;","node_modules/amp/lib/stream.js":"var Stream=require(\"stream\").Writable,encode=require(\"./encode\");function Parser(t){Stream.call(this,t),this.state=\"message\",this._lenbuf=new Buffer(4)}module.exports=Parser,Parser.prototype.__proto__=Stream.prototype,Parser.prototype._write=function(t,e,s){for(var r=0;r<t.length;r++)switch(this.state){case\"message\":var a=t[r];this.version=a>>4,this.argv=15&a,this.state=\"arglen\",this._bufs=[new Buffer([a])],this._nargs=0,this._leni=0;break;case\"arglen\":if(this._lenbuf[this._leni++]=t[r],4==this._leni){this._arglen=this._lenbuf.readUInt32BE(0);var i=new Buffer(4);i[0]=this._lenbuf[0],i[1]=this._lenbuf[1],i[2]=this._lenbuf[2],i[3]=this._lenbuf[3],this._bufs.push(i),this._argcur=0,this.state=\"arg\"}break;case\"arg\":var h=this._arglen-this._argcur,n=Math.min(h+r,t.length),_=t.slice(r,n);this._bufs.push(_),this._argcur+=n-r;var u=this._argcur==this._arglen;if(r=n-1,u&&this._nargs++,this._nargs==this.argv){this.state=\"message\",this.emit(\"data\",Buffer.concat(this._bufs));break}u&&(this.state=\"arglen\",this._leni=0)}s()};","node_modules/amp/lib/encode.js":"var version=1;module.exports=function(r){for(var e=r.length,n=1,t=0,o=0;o<e;o++)n+=4+r[o].length;var v=new Buffer(n);v[t++]=version<<4|e;for(o=0;o<e;o++){var f=r[o];v.writeUInt32BE(f.length,t),t+=4,f.copy(v,t),t+=f.length}return v};","node_modules/amp/lib/decode.js":"module.exports=function(r){for(var e=0,a=r[e++],n=15&a,o=new Array(n),t=0;t<n;t++){var u=r.readUInt32BE(e);e+=4;var v=r.slice(e,e+=u);o[t]=v}return o};","node_modules/escape-regexp/index.js":"module.exports=function(e){return String(e).replace(/([.*+?=^!:${}()|[\\]\\/\\\\])/g,\"\\\\$1\")};","node_modules/axon/lib/plugins/round-robin.js":"var slice=require(\"../utils\").slice;module.exports=function(i){var e=(i=i||{}).fallback||function(){};return function(i){e=e.bind(i);var n=0;i.send=function(){var i=this.socks,t=i.length,r=i[n++%t],c=slice(arguments);r&&r.writable?r.write(this.pack(c)):e(c)}}};","node_modules/axon/lib/plugins/queue.js":"var debug=require(\"debug\")(\"axon:queue\");module.exports=function(e){return e=e||{},function(e){e.queue=[],e.on(\"connect\",function(){var u=e.queue,n=u.length;e.queue=[],debug(\"flush %d messages\",n);for(var t=0;t<n;++t)this.send.apply(this,u[t]);e.emit(\"flush\",u)}),e.enqueue=function(u){var n=e.settings.hwm;if(e.queue.length>=n)return function(u){debug(\"drop\"),e.emit(\"drop\",u)}(u);e.queue.push(u)}}};","backend/node_modules/horti-program/Watchdog.js":"\"use strict\";const ControlUnit=require(\"./ControlUnit\");module.exports=class extends ControlUnit{constructor(t){super(t.broker,t.modbus,t[\"horti-program\"],\"watchdog\"),this.first=!0,this.timer=null,this.watch([\"watchdog\"],\"manageWatchdog\")}manageWatchdog(){const t=this.lock(\"manageWatchdog\");t.isLocked()?t.cb=this.manageWatchdog.bind(this):(t.on(),this.getTagValue(\"watchdog\")||setTimeout(()=>this.setTagValue(\"watchdog\",!0,()=>t.off()),1e3))}};","backend/node_modules/horti-program/ZoneManager.js":"\"use strict\";const _=require(\"lodash\"),step=require(\"h5.step\"),ControlUnit=require(\"./ControlUnit\"),{controller:controller}=require(\"../../../config/horti-frontend\");module.exports=class extends ControlUnit{constructor(e,t){super(e.broker,e.modbus,e[\"horti-program\"],\"zones\",t),this.Test=e.mongoose.model(\"HortiTest\"),this.programSteps=null,this.manageTimer=null,this.watch([\".status\",\".greenLed\",\".orangeLed\",\".redLed\",\".buzzer\",\".on\"],\"manageZone\")}manageZone(){clearTimeout(this.manageTimer);const e=this.lock(\"manageZone\");if(e.isLocked())e.cb=this.manageZone.bind(this);else switch(e.on(),this.getTagValue(\".status\")){case\"idle\":this.handleIdleStatus(e);break;case\"setup\":this.handleSetupStatus(e);break;case\"running\":this.handleRunningStatus(e);break;case\"success\":this.handleSuccessStatus(e);break;case\"failure\":this.handleFailureStatus(e);break;default:e.off()}}handleIdleStatus(e){const t=this;t.programSteps=null,step(function(){t.setTagValue(\".testId\",\"\",this.group()),t.setTagValue(\".on\",0,this.group()),t.setTagValue(\".greenLed\",0,this.group()),t.setTagValue(\".orangeLed\",0,this.group()),t.setTagValue(\".redLed\",0,this.group()),t.setTagValue(\".buzzer\",0,this.group()),t.setTagValue(\".program\",null,this.group()),t.setTagValue(\".serialNumbers\",[],this.group()),t.setTagValue(\".startTime\",0,this.group()),t.setTagValue(\".finishTime\",0,this.group()),t.setTagValue(\".metric\",0,this.group())},function(){e.off()})}handleSetupStatus(e){const t=this,s=Date.now();t.programSteps=null,step(function(){let e=t.getTagValue(\".orangeLed\");s-t.getLastTagChangeTime(\".orangeLed\")>1e3&&(e=e?0:1),t.setTagValue(\".testId\",\"\",this.group()),t.setTagValue(\".on\",0,this.group()),t.setTagValue(\".greenLed\",0,this.group()),t.setTagValue(\".redLed\",0,this.group()),t.setTagValue(\".orangeLed\",e,this.group()),t.setTagValue(\".buzzer\",0,this.group()),t.setTagValue(\".startTime\",0,this.group()),t.setTagValue(\".finishTime\",0,this.group()),t.setTagValue(\".metric\",0,this.group())},function(){t.manageTimer=setTimeout(()=>t.manageZone(),1e3),e.off()})}handleRunningStatus(e){const t=this;step(function(){const e=t.getProgramSteps();if(0===e.length)return t.setTagValue(\".status\",\"failure\",this.next());const s=Date.now(),a=e.find(e=>s>=e.startTime&&s<e.finishTime);if(!a)return t.setTagValue(\".status\",\"success\",this.next());const{finishTime:i}=_.last(e);let r=t.getTagValue(\".greenLed\"),u=1;i-s<9e5&&(s-t.getLastTagChangeTime(\".greenLed\")>1e3&&(r=r?0:1),u=0),t.setTagValue(\".testId\",\"\",this.group()),t.setTagValue(\".on\",a.on,this.group()),t.setTagValue(\".redLed\",0,this.group()),t.setTagValue(\".greenLed\",r,this.group()),t.setTagValue(\".orangeLed\",u,this.group()),t.setTagValue(\".buzzer\",0,this.group()),t.setTagValue(\".startTime\",_.first(e).startTime,this.group()),t.setTagValue(\".finishTime\",i,this.group())},function(){t.manageTimer=setTimeout(()=>t.manageZone(),1e3),e.off()})}handleSuccessStatus(e){const t=this;t.programSteps=null,step(function(){t.getTagValue(\".testId\")||t.finishTest({result:!0},this.next())},function(e,s){e&&t.error(e,\"Failed to record a successful test.\"),s&&t.setTagValue(\".testId\",s._id.toString(),this.group())},function(){t.setTagValue(\".on\",0,this.group()),t.setTagValue(\".greenLed\",1,this.group()),t.setTagValue(\".redLed\",0,this.group()),t.setTagValue(\".orangeLed\",0,this.group()),t.setTagValue(\".buzzer\",0,this.group())},function(){e.off()})}handleFailureStatus(e){const t=this;let s=t.getTagValue(\".finishTime\");t.programSteps=null,step(function(){t.getTagValue(\".testId\")||(s=Date.now(),t.finishTest({finishedAt:new Date(s),result:!1},this.next()))},function(e,s){e&&t.error(e,\"Failed to record an unsuccessful test.\"),s&&t.setTagValue(\".testId\",s._id.toString(),this.group())},function(){const e=Date.now()-t.getLastTagChangeTime(\".status\");let a=0;e<=3e3&&(a=1,t.manageTimer=setTimeout(()=>t.manageZone(),e+100)),t.setTagValue(\".on\",0,this.group()),t.setTagValue(\".greenLed\",0,this.group()),t.setTagValue(\".redLed\",1,this.group()),t.setTagValue(\".orangeLed\",0,this.group()),t.setTagValue(\".buzzer\",a,this.group()),t.setTagValue(\".finishTime\",s,this.group())},function(){e.off()})}finishTest(e,t){const s=new this.Test({zoneNo:this.index,startedAt:new Date(this.getTagValue(\".startTime\")),finishedAt:new Date(this.getTagValue(\".finishTime\")),program:this.getTagValue(\".program\"),serialNumbers:this.getTagValue(\".serialNumbers\"),metric:this.getTagValue(\".metric\"),...e});s.save(e=>{if(e)return t(e);this.broker.publish(\"horti.tests.added\",{model:s}),t(null,s)})}getProgramSteps(){const e=this.getTagValue(\".program\");if(!e||!Array.isArray(e.steps)||0===e.steps.length)return[];if(this.programSteps)return this.programSteps;this.programSteps=[];let t=this.getTagValue(\".startTime\")||Date.now();return e.steps.forEach(e=>{for(let s=0;s<e.repeat;++s){if(e.on>0){const s=1e3*e.on;this.programSteps.push({startTime:t,finishTime:t+s,on:1}),t+=s}if(e.off>0){const s=1e3*e.off;this.programSteps.push({startTime:t,finishTime:t+s,on:0}),t+=s}}}),this.programSteps}};","backend/node_modules/horti-tests/models/hortiTest.js":"\"use strict\";exports.name=\"HortiTest\",exports.setUp=((e,t)=>{const r=new t.Schema({zoneNo:Number,startedAt:Date,finishedAt:Date,program:{},result:Boolean,serialNumbers:[String],metric:{type:Number,default:0},exported:{type:Boolean,default:!1}},{id:!1});return r.statics.TOPIC_PREFIX=\"horti.tests\",r.index({startedAt:-1}),r.index({result:1}),r.index({serialNumbers:1}),r.index({exported:1}),r});","backend/node_modules/horti-program/ControlUnit.js":"\"use strict\";const _=require(\"lodash\"),jsonDeepEqual=require(\"util/jsonDeepEqual\"),Lock=require(\"./Lock\");module.exports=class{constructor(e,t,s,i,r){this.broker=e.sandbox(),this.modbus=t,this.program=s,this.index=r,this.tagPrefix=r>0?`${i}.${r}`:i,this.locks={}}getIndex(){return this.index}getTagName(e){return\".\"===e.charAt(0)?this.tagPrefix+e:e}getTagValue(e){return this.modbus.values[this.getTagName(e)]}getLastTagChangeTime(e){const t=this.modbus.tags[this.getTagName(e)];return _.isUndefined(t)?0:t.lastChangeTime}setTagValue(e,t,s){_.isFunction(s)||(s=function(){}),e=this.getTagName(e);const i=this.modbus.tags[e];return _.isObject(i)?jsonDeepEqual(i.getValue(),t)?s(null,!0):void i.writeValue(t,s):s(new Error(\"UNKNOWN_TAG\"))}ackTagValue(e,t,s,i){3===arguments.length&&(i=s,s=2e3);const r=this.modbus.tags[this.getTagName(e)];if(_.isUndefined(r)||jsonDeepEqual(r.getValue(),t))return i(null,!1);let a,n;a=this.broker.subscribe(`tagValueChanged.${r.name}`).on(\"message\",e=>{e.newValue===t&&(a.cancel(),clearTimeout(n),i(null,!1))}),n=setTimeout(()=>{a.cancel(),i(new Error(\"ACK_TIMEOUT\"),!1)},s||2e3)}watch(e,t){t=this.bindExec(t),_.isArray(e)||(e=[e]),_.forEach(e,e=>{this.broker.subscribe(`tagValueChanged.${this.getTagName(e)}`,t)}),process.nextTick(t)}bindExec(e){return this.program.exec.bind(null,this[e].bind(this),`${this.tagPrefix}~${e}`)}lock(e){return _.isUndefined(this.locks[e])&&(this.locks[e]=new Lock),this.locks[e]}debug(...e){this.program.debug(...e,{controlUnit:this.tagPrefix})}warn(...e){this.program.warn(...e,{controlUnit:this.tagPrefix})}error(...e){this.program.error(...e,{controlUnit:this.tagPrefix})}};","backend/node_modules/util/jsonDeepEqual.js":"\"use strict\";module.exports=function r(e,t){if(e===t)return!0;var n,i,f=typeof e;if(f!==typeof t||\"object\"!==f)return!1;if(null==e||null==t||e.prototype!==t.prototype)return!1;if(e instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(f)){if(i=e.length,!Array.isArray(t)||i!==t.length)return!1;for(n=0;n<i;++n)if(!r(e[n],t[n]))return!1;return!0}var u=Object.keys(e),o=Object.keys(t);if((i=u.length)!==o.length)return!1;for(n=0;n<i;++n){var y=u[n];if(!r(e[y],t[y]))return!1}return!0};","backend/node_modules/horti-program/Lock.js":"\"use strict\";function Lock(){this.active=!1,this.cb=null}module.exports=Lock,Lock.prototype.isLocked=function(){return this.active},Lock.prototype.on=function(){this.active=!0},Lock.prototype.off=function(){this.active=!1,null!==this.cb&&(process.nextTick(this.cb),this.cb=null)};","config/horti-frontend.js":"\"use strict\";const fs=require(\"fs\"),mongodb=require(\"./horti-mongodb\");exports.id=\"horti-frontend\",Object.assign(exports,require(\"./horti-common\")),exports.modules=[\"updater\",{id:\"h5-mongoose\",name:\"mongoose\"},\"events\",\"pubsub\",\"user\",{id:\"h5-express\",name:\"express\"},{id:\"h5-remoteApi\",name:\"remoteApi\"},\"users\",\"horti-tests\",{id:\"messenger/client\",name:\"messenger/client:controller\"},\"controller\",\"messenger/server\",\"httpServer\",\"sio\"],exports.updater={packageJsonPath:`${__dirname}/../package.json`,restartDelay:5e3,pull:{exe:\"git.exe\",cwd:`${__dirname}/../`,timeout:3e4},versionsKey:\"horti\",manifests:[{frontendVersionKey:\"frontend\",path:\"/manifest.appcache\",mainJsFile:\"/horti-main.js\",mainCssFile:\"/assets/horti-main.css\",template:fs.readFileSync(`${__dirname}/horti-manifest.appcache`,\"utf8\"),frontendAppData:{XLSX_EXPORT:\"win32\"===process.platform,CORS_PING_URL:\"https://test.wmes.pl/ping\"},dictionaryModules:{}}]},exports.events={collection:e=>e.mongoose.model(\"Event\").collection,insertDelay:1e3,topics:{debug:[\"*.added\",\"*.edited\"],warning:[\"*.deleted\"],error:[\"*.syncFailed\",\"app.started\"]},blacklist:[]},exports.httpServer={host:\"0.0.0.0\",port:1337},exports.sio={httpServerIds:[\"httpServer\"],socketIo:{pingInterval:1e4,pingTimeout:5e3}},exports.pubsub={statsPublishInterval:6e4,republishTopics:[\"*.added\",\"*.edited\",\"*.deleted\",\"*.synced\"]},exports.mongoose={uri:mongodb.uri,mongoClient:Object.assign(mongodb.mongoClient,{poolSize:5}),maxConnectTries:10,connectAttemptDelay:500},exports.express={staticPath:`${__dirname}/../frontend`,staticBuildPath:`${__dirname}/../frontend-build`,sessionCookieKey:\"horti.sid\",sessionCookie:{httpOnly:!0,path:\"/\",maxAge:7776e6,sameSite:\"lax\",secure:!1},sessionStore:{touchInterval:6e5,touchChance:0,gcInterval:28800,cacheInMemory:!1},cookieSecret:\"1ee7\\\\/\\\\/horti\",ejsAmdHelpers:{_:\"underscore\",$:\"jquery\",t:\"app/i18n\",time:\"app/time\",user:\"app/user\",forms:\"app/core/util/forms\"},textBody:{limit:\"1mb\"},jsonBody:{limit:\"1mb\"},routes:[require(\"../backend/routes/core\")]},exports.remoteApi={apiUrl:null,apiKey:null},exports.user={userInfoIdProperty:\"id\",localAddresses:[/^192\\.168\\./]},exports.users={},exports[\"messenger/server\"]={pubHost:\"0.0.0.0\",pubPort:5052,repHost:\"0.0.0.0\",repPort:5053,broadcastTopics:[]},exports[\"messenger/client:controller\"]={pubHost:\"127.0.0.1\",pubPort:5050,repHost:\"127.0.0.1\",repPort:5051,responseTimeout:15e3},exports[\"horti-tests\"]={},exports.controller={messengerClientId:\"messenger/client:controller\",managePrivilege:\"HORTI:MANAGE\"};","backend/routes/core.js":"\"use strict\";const _=require(\"lodash\");module.exports=((e,s)=>{const r=e[e.options.updaterId||\"updater\"],t=e[e.options.userId||\"user\"],i=t?JSON.stringify(_.omit(t.root,\"password\")):\"{}\",n=t?JSON.stringify(t.guest):\"{}\",o=t?JSON.stringify(t.config.privileges):\"[]\",a=JSON.stringify(e.options.modules.map(e=>e.id||e)),c=JSON.stringify(e.options.dashboardUrlAfterLogIn||\"/\"),d={packages:null,paths:null,shim:null};function p(){const e=require.resolve(\"../../config/require\");delete require.cache[e];const s=require(e);d.packages=JSON.stringify(s.packages),d.paths=JSON.stringify(s.paths),d.shim=JSON.stringify(s.shim)}function g(e,s,r){s.set(\"Access-Control-Allow-Origin\",e.headers.origin||\"*\"),s.set(\"Access-Control-Allow-Methods\",\"GET\"),s.set(\"Access-Control-Allow-Credentials\",\"true\"),s.set(\"Access-Control-Allow-Headers\",e.headers[\"access-control-request-headers\"]||\"\"),r()}e.broker.subscribe(\"updater.newVersion\",p).setFilter(e=>\"frontend\"===e.service),p(),e.broker.subscribe(\"dictionaries.updated\",()=>r.updateFrontendVersion()),s.get(\"/\",function(s,t,d){if(!r)return d(e.createError(\"No app available.\",\"SERVICE_UNAVAILABLE\",503));t.render(\"index\",r.getAppTemplateData(\"frontend\",s,{ROOT_USER:i,GUEST_USER:n,PRIVILEGES:o,MODULES:a,DASHBOARD_URL_AFTER_LOG_IN:c}))}),s.get(\"/redirect\",function(e,s){s.redirect(e.query.referrer||\"/\")}),s.get(\"/config.js\",function(e,s){s.type(\"js\"),s.render(\"config.js.ejs\",{cache:!1,packages:d.packages,paths:d.paths,shim:d.shim})}),s.options(\"/ping\",g,(e,s)=>s.end()),s.get(\"/ping\",g,(e,s)=>s.format({text:()=>{s.send(\"pong\")},json:()=>{s.json(\"pong\")}})),s.options(\"/time\",g,(e,s)=>s.end()),s.get(\"/time\",g,(e,s)=>{s.send(Date.now().toString())})});"}}