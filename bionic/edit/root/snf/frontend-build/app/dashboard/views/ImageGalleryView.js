// Part of <https://miracle.systems/p/walkner-snf> licensed under <CC BY-NC-SA 4.0>

define(["underscore","jquery","app/i18n","app/core/View","app/dashboard/templates/gallery"],function(i,e,t,s,n){"use strict";return s.extend({dialogClassName:"dashboard-gallery-dialog",template:n,events:{"click .dashboard-gallery-thumbnail":function(i){this.$(".is-active").removeClass("is-active");var e=this.$(i.currentTarget).addClass("is-active"),t=e.find("img");this.$id("image").attr("src",t.attr("src")),this.$id("label").text(t.attr("alt"))},"dblclick #-preview":function(){this.closeDialog()}},initialize:function(){this.onResize=i.debounce(this.resize.bind(this),25),e(window).on("resize",this.onResize)},destroy:function(){e(window).off("resize",this.onResize)},serialize:function(){return{idPrefix:this.idPrefix,programId:this.model.id,images:this.model.get("images")}},afterRender:function(){this.resize(),this.$id("thumbnails").kinetic(),this.$id("preview").kinetic()},resize:function(){this.$id("preview").css({height:window.innerHeight-190+"px"})},closeDialog:function(){},onDialogShown:function(i){this.closeDialog=i.closeDialog.bind(i)}})});